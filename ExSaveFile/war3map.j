globals
constant boolean LIBRARY_Angle=true
constant boolean LIBRARY_ArtfectEF=true
constant integer ArtfectEF___A=48271
constant integer ArtfectEF___M=2147483647
constant integer ArtfectEF___Q=ArtfectEF___M/ArtfectEF___A
constant integer ArtfectEF___R=ModuloInteger(ArtfectEF___M,ArtfectEF___A)
integer ArtfectEF___seed=1
constant boolean LIBRARY_Assets=true
hashtable udg_SoundHash=InitHashtable()
constant boolean LIBRARY_BossBar=true
hashtable BossBar__hash=InitHashtable()
integer BossBar__Bar
integer BossBar__Cnt=0
string array BossBar__Str
timer BossBar__Tme=null
unit array BossBar_Bos
integer array BossBar__Lne
real array BossBar__Max
real array BossBar__Bfe
real array BossBar__Bfe2
integer array BossBar__Dmg
integer BossBar__Dmx=-1
integer array BossBar_Idx
constant boolean LIBRARY_BossWarning=true
constant boolean LIBRARY_Buff=true
constant boolean LIBRARY_CFX=true
constant boolean CFX_COUNTWARNING=false
constant integer CFX_COUNTWARNINGBASE=300
constant real CFX_GCTIMEOUT=2.5
hashtable CFX_TABLE=InitHashtable()
constant boolean LIBRARY_Curve=true
constant boolean LIBRARY_CustomStun=true
constant real CustomStun__SYSTEM_TIMEOUT_DELAY=0.03125
constant integer CustomStun__SYSTEM_DUMMY_ID='sys8'
constant integer CustomStun__SYSTEM_BUFF_ID='BPSE'
constant player CustomStun__SYSTEM_DUMMY_OWNER=Player(PLAYER_NEUTRAL_PASSIVE)
constant real CustomStun__SYSTEM_DUMMY_X=0.0
constant real CustomStun__SYSTEM_DUMMY_Y=0.0
constant string CustomStun__SYSTEM_DUMMY_COMMAND="thunderbolt"
unit CustomStun__SYSTEM_DUMMY=null
hashtable CustomStun__TABLE=InitHashtable()
constant integer CustomStun__IN_KEY=2
trigger CustomStun__T_CALL=CreateTrigger()
unit CustomStun__T_SRC=null
unit CustomStun__T_DST=null
real CustomStun__T_TIMEOUT=0.0
integer array CustomStun__M_HNDL
unit array CustomStun__M_UCAS
unit array CustomStun__M_UTAR
timer array CustomStun__M_TIMR
real array CustomStun__M_FTIM
real array CustomStun__M_ELAP
real array CustomStun__M_DSDU
real array CustomStun__M_SDUR
trigger CustomStun__E_STUN_NEW=CreateTrigger()
trigger CustomStun__E_STUN_BEFORE_STACK=CreateTrigger()
trigger CustomStun__E_STUN_STACK=CreateTrigger()
trigger CustomStun__E_STUN_START=CreateTrigger()
trigger CustomStun__E_STUN_TIMEOUT=CreateTrigger()
trigger CustomStun__E_STUN_END=CreateTrigger()
integer CustomStun__P_STUN=0
constant boolean LIBRARY_DamageEngineDefensive=true
constant integer DamageEngineDefensive__DAMAGE_TYPE_DETECTOR='A02A'
constant real DamageEngineDefensive__TRIGGER_REFRESH_PERIOD=60.0
hashtable DamageEngineDefensive__ET=InitHashtable()
trigger DamageEngineDefensive__EAA=CreateTrigger()
trigger DamageEngineDefensive__EAH=CreateTrigger()
constant integer DamageEngineDefensive__EUTA=10
constant integer DamageEngineDefensive__EUTH=11
constant integer DamageEngineDefensive__EITA=10
constant integer DamageEngineDefensive__EITH=11
item DamageEngineDefensive__PT=null
trigger DamageEngineDefensive__dT=null
code DamageEngineDefensive__dC=null
integer DamageEngineDefensive__aI=0
group DamageEngineDefensive__rG=CreateGroup()
boolexpr DamageEngineDefensive__rF=null
constant boolean LIBRARY_Distance=true
constant boolean LIBRARY_DzAPIFrameHandle=true
constant integer JN_FRAMEPOINT_TOPLEFT=0
constant integer JN_FRAMEPOINT_TOP=1
constant integer JN_FRAMEPOINT_TOPRIGHT=2
constant integer JN_FRAMEPOINT_LEFT=3
constant integer JN_FRAMEPOINT_CENTER=4
constant integer JN_FRAMEPOINT_RIGHT=5
constant integer JN_FRAMEPOINT_BOTTOMLEFT=6
constant integer JN_FRAMEPOINT_BOTTOM=7
constant integer JN_FRAMEPOINT_BOTTOMRIGHT=8
constant integer JN_TEXT_JUSTIFY_TOP=0
constant integer JN_TEXT_JUSTIFY_MIDDLE=1
constant integer JN_TEXT_JUSTIFY_BOTTOM=2
constant integer JN_TEXT_JUSTIFY_LEFT=3
constant integer JN_TEXT_JUSTIFY_CENTER=4
constant integer JN_TEXT_JUSTIFY_RIGHT=5
constant integer JN_FRAMEEVENT_CONTROL_CLICK=1
constant integer JN_FRAMEEVENT_MOUSE_ENTER=2
constant integer JN_FRAMEEVENT_MOUSE_LEAVE=3
constant integer JN_FRAMEEVENT_MOUSE_UP=4
constant integer JN_FRAMEEVENT_MOUSE_DOWN=5
constant integer JN_FRAMEEVENT_MOUSE_WHEEL=6
constant integer JN_FRAMEEVENT_CHECKBOX_CHECKED=7
constant integer JN_FRAMEEVENT_CHECKBOX_UNCHECKED=8
constant integer JN_FRAMEEVENT_EDITBOX_TEXT_CHANGED=9
constant integer JN_FRAMEEVENT_POPUPMENU_ITEM_CHANGED=11
constant integer JN_FRAMEEVENT_MOUSE_DOUBLECLICK=12
constant integer JN_FRAMEEVENT_SPRITE_ANIM_UPDATE=13
constant integer JN_FRAMEEVENT_SLIDER_VALUE_CHANGED=14
constant integer JN_FRAMEEVENT_DIALOG_CANCEL=15
constant integer JN_FRAMEEVENT_DIALOG_ACCEPT=16
constant integer JN_FRAMEEVENT_EDITBOX_ENTER=17
constant real JN_FRAME_MAX_WIDTH=0.8
constant real JN_FRAME_MAX_HEIGHT=0.6
constant real JN_FRAME_ITEM_BUTTON_SIZE=0.03125
constant real JN_FRAME_ITEM_BUTTON_SPACING_WIDTH=0.00875
constant real JN_FRAME_ITEM_BUTTON_SPACING_HEIGHT=0.0068625
hashtable DzAPIFrameHandle___Data=InitHashtable()
constant boolean LIBRARY_DzAPIHardware=true
constant integer JN_MOUSE_BUTTON_TYPE_LEFT=1
constant integer JN_MOUSE_BUTTON_TYPE_MIDDLE=2
constant integer JN_MOUSE_BUTTON_TYPE_RIGHT=3
constant integer JN_OSKEY_LBUTTON=$01
constant integer JN_OSKEY_RBUTTON=$02
constant integer JN_OSKEY_CANCEL=$03
constant integer JN_OSKEY_MBUTTON=$04
constant integer JN_OSKEY_XBUTTON1=$05
constant integer JN_OSKEY_XBUTTON2=$06
constant integer JN_OSKEY_BACKSPACE=$08
constant integer JN_OSKEY_TAB=$09
constant integer JN_OSKEY_CLEAR=$0C
constant integer JN_OSKEY_RETURN=$0D
constant integer JN_OSKEY_SHIFT=$10
constant integer JN_OSKEY_CONTROL=$11
constant integer JN_OSKEY_ALT=$12
constant integer JN_OSKEY_PAUSE=$13
constant integer JN_OSKEY_CAPSLOCK=$14
constant integer JN_OSKEY_KANA=$15
constant integer JN_OSKEY_HANGUL=$15
constant integer JN_OSKEY_JUNJA=$17
constant integer JN_OSKEY_FINAL=$18
constant integer JN_OSKEY_HANJA=$19
constant integer JN_OSKEY_KANJI=$19
constant integer JN_OSKEY_ESCAPE=$1B
constant integer JN_OSKEY_CONVERT=$1C
constant integer JN_OSKEY_NONCONVERT=$1D
constant integer JN_OSKEY_ACCEPT=$1E
constant integer JN_OSKEY_MODECHANGE=$1F
constant integer JN_OSKEY_SPACE=$20
constant integer JN_OSKEY_PAGEUP=$21
constant integer JN_OSKEY_PAGEDOWN=$22
constant integer JN_OSKEY_END=$23
constant integer JN_OSKEY_HOME=$24
constant integer JN_OSKEY_LEFT=$25
constant integer JN_OSKEY_UP=$26
constant integer JN_OSKEY_RIGHT=$27
constant integer JN_OSKEY_DOWN=$28
constant integer JN_OSKEY_SELECT=$29
constant integer JN_OSKEY_PRINT=$2A
constant integer JN_OSKEY_EXECUTE=$2B
constant integer JN_OSKEY_PRINTSCREEN=$2C
constant integer JN_OSKEY_INSERT=$2D
constant integer JN_OSKEY_DELETE=$2E
constant integer JN_OSKEY_HELP=$2F
constant integer JN_OSKEY_0=$30
constant integer JN_OSKEY_1=$31
constant integer JN_OSKEY_2=$32
constant integer JN_OSKEY_3=$33
constant integer JN_OSKEY_4=$34
constant integer JN_OSKEY_5=$35
constant integer JN_OSKEY_6=$36
constant integer JN_OSKEY_7=$37
constant integer JN_OSKEY_8=$38
constant integer JN_OSKEY_9=$39
constant integer JN_OSKEY_A=$41
constant integer JN_OSKEY_B=$42
constant integer JN_OSKEY_C=$43
constant integer JN_OSKEY_D=$44
constant integer JN_OSKEY_E=$45
constant integer JN_OSKEY_F=$46
constant integer JN_OSKEY_G=$47
constant integer JN_OSKEY_H=$48
constant integer JN_OSKEY_I=$49
constant integer JN_OSKEY_J=$4A
constant integer JN_OSKEY_K=$4B
constant integer JN_OSKEY_L=$4C
constant integer JN_OSKEY_M=$4D
constant integer JN_OSKEY_N=$4E
constant integer JN_OSKEY_O=$4F
constant integer JN_OSKEY_P=$50
constant integer JN_OSKEY_Q=$51
constant integer JN_OSKEY_R=$52
constant integer JN_OSKEY_S=$53
constant integer JN_OSKEY_T=$54
constant integer JN_OSKEY_U=$55
constant integer JN_OSKEY_V=$56
constant integer JN_OSKEY_W=$57
constant integer JN_OSKEY_X=$58
constant integer JN_OSKEY_Y=$59
constant integer JN_OSKEY_Z=$5A
constant integer JN_OSKEY_LMETA=$5B
constant integer JN_OSKEY_RMETA=$5C
constant integer JN_OSKEY_APPS=$5D
constant integer JN_OSKEY_SLEEP=$5F
constant integer JN_OSKEY_NUMPAD0=$60
constant integer JN_OSKEY_NUMPAD1=$61
constant integer JN_OSKEY_NUMPAD2=$62
constant integer JN_OSKEY_NUMPAD3=$63
constant integer JN_OSKEY_NUMPAD4=$64
constant integer JN_OSKEY_NUMPAD5=$65
constant integer JN_OSKEY_NUMPAD6=$66
constant integer JN_OSKEY_NUMPAD7=$67
constant integer JN_OSKEY_NUMPAD8=$68
constant integer JN_OSKEY_NUMPAD9=$69
constant integer JN_OSKEY_MULTIPLY=$6A
constant integer JN_OSKEY_ADD=$6B
constant integer JN_OSKEY_SEPARATOR=$6C
constant integer JN_OSKEY_SUBTRACT=$6D
constant integer JN_OSKEY_DECIMAL=$6E
constant integer JN_OSKEY_DIVIDE=$6F
constant integer JN_OSKEY_F1=$70
constant integer JN_OSKEY_F2=$71
constant integer JN_OSKEY_F3=$72
constant integer JN_OSKEY_F4=$73
constant integer JN_OSKEY_F5=$74
constant integer JN_OSKEY_F6=$75
constant integer JN_OSKEY_F7=$76
constant integer JN_OSKEY_F8=$77
constant integer JN_OSKEY_F9=$78
constant integer JN_OSKEY_F10=$79
constant integer JN_OSKEY_F11=$7A
constant integer JN_OSKEY_F12=$7B
constant integer JN_OSKEY_F13=$7C
constant integer JN_OSKEY_F14=$7D
constant integer JN_OSKEY_F15=$7E
constant integer JN_OSKEY_F16=$7F
constant integer JN_OSKEY_F17=$80
constant integer JN_OSKEY_F18=$81
constant integer JN_OSKEY_F19=$82
constant integer JN_OSKEY_F20=$83
constant integer JN_OSKEY_F21=$84
constant integer JN_OSKEY_F22=$85
constant integer JN_OSKEY_F23=$86
constant integer JN_OSKEY_F24=$87
constant integer JN_OSKEY_NUMLOCK=$90
constant integer JN_OSKEY_SCROLLLOCK=$91
constant integer JN_OSKEY_OEM_NEC_EQUAL=$92
constant integer JN_OSKEY_OEM_FJ_JISHO=$92
constant integer JN_OSKEY_OEM_FJ_MASSHOU=$93
constant integer JN_OSKEY_OEM_FJ_TOUROKU=$94
constant integer JN_OSKEY_OEM_FJ_LOYA=$95
constant integer JN_OSKEY_OEM_FJ_ROYA=$96
constant integer JN_OSKEY_LSHIFT=$A0
constant integer JN_OSKEY_RSHIFT=$A1
constant integer JN_OSKEY_LCONTROL=$A2
constant integer JN_OSKEY_RCONTROL=$A3
constant integer JN_OSKEY_LALT=$A4
constant integer JN_OSKEY_RALT=$A5
constant integer JN_OSKEY_BROWSER_BACK=$A6
constant integer JN_OSKEY_BROWSER_FORWARD=$A7
constant integer JN_OSKEY_BROWSER_REFRESH=$A8
constant integer JN_OSKEY_BROWSER_STOP=$A9
constant integer JN_OSKEY_BROWSER_SEARCH=$AA
constant integer JN_OSKEY_BROWSER_FAVORITES=$AB
constant integer JN_OSKEY_BROWSER_HOME=$AC
constant integer JN_OSKEY_VOLUME_MUTE=$AD
constant integer JN_OSKEY_VOLUME_DOWN=$AE
constant integer JN_OSKEY_VOLUME_UP=$AF
constant integer JN_OSKEY_MEDIA_NEXT_TRACK=$B0
constant integer JN_OSKEY_MEDIA_PREV_TRACK=$B1
constant integer JN_OSKEY_MEDIA_STOP=$B2
constant integer JN_OSKEY_MEDIA_PLAY_PAUSE=$B3
constant integer JN_OSKEY_LAUNCH_MAIL=$B4
constant integer JN_OSKEY_LAUNCH_MEDIA_SELECT=$B5
constant integer JN_OSKEY_LAUNCH_APP1=$B6
constant integer JN_OSKEY_LAUNCH_APP2=$B7
constant integer JN_OSKEY_OEM_1=$BA
constant integer JN_OSKEY_OEM_PLUS=$BB
constant integer JN_OSKEY_OEM_COMMA=$BC
constant integer JN_OSKEY_OEM_MINUS=$BD
constant integer JN_OSKEY_OEM_PERIOD=$BE
constant integer JN_OSKEY_OEM_2=$BF
constant integer JN_OSKEY_OEM_3=$C0
constant integer JN_OSKEY_OEM_4=$DB
constant integer JN_OSKEY_OEM_5=$DC
constant integer JN_OSKEY_OEM_6=$DD
constant integer JN_OSKEY_OEM_7=$DE
constant integer JN_OSKEY_OEM_8=$DF
constant integer JN_OSKEY_OEM_AX=$E1
constant integer JN_OSKEY_OEM_102=$E2
constant integer JN_OSKEY_ICO_HELP=$E3
constant integer JN_OSKEY_ICO_00=$E4
constant integer JN_OSKEY_PROCESSKEY=$E5
constant integer JN_OSKEY_ICO_CLEAR=$E6
constant integer JN_OSKEY_PACKET=$E7
constant integer JN_OSKEY_OEM_RESET=$E9
constant integer JN_OSKEY_OEM_JUMP=$EA
constant integer JN_OSKEY_OEM_PA1=$EB
constant integer JN_OSKEY_OEM_PA2=$EC
constant integer JN_OSKEY_OEM_PA3=$ED
constant integer JN_OSKEY_OEM_WSCTRL=$EE
constant integer JN_OSKEY_OEM_CUSEL=$EF
constant integer JN_OSKEY_OEM_ATTN=$F0
constant integer JN_OSKEY_OEM_FINISH=$F1
constant integer JN_OSKEY_OEM_COPY=$F2
constant integer JN_OSKEY_OEM_AUTO=$F3
constant integer JN_OSKEY_OEM_ENLW=$F4
constant integer JN_OSKEY_OEM_BACKTAB=$F5
constant integer JN_OSKEY_ATTN=$F6
constant integer JN_OSKEY_CRSEL=$F7
constant integer JN_OSKEY_EXSEL=$F8
constant integer JN_OSKEY_EREOF=$F9
constant integer JN_OSKEY_PLAY=$FA
constant integer JN_OSKEY_ZOOM=$FB
constant integer JN_OSKEY_NONAME=$FC
constant integer JN_OSKEY_PA1=$FD
constant integer JN_OSKEY_OEM_CLEAR=$FE
constant boolean LIBRARY_DzAPIPlus=true
constant boolean LIBRARY_DzAPISync=true
constant boolean LIBRARY_JAPIAbilityState=true
constant integer ABILITY_STATE_COOLDOWN=1
constant integer ABILITY_DATA_TARGS=100
constant integer ABILITY_DATA_CAST=101
constant integer ABILITY_DATA_DUR=102
constant integer ABILITY_DATA_HERODUR=103
constant integer ABILITY_DATA_COST=104
constant integer ABILITY_DATA_COOL=105
constant integer ABILITY_DATA_AREA=106
constant integer ABILITY_DATA_RNG=107
constant integer ABILITY_DATA_DATA_A=108
constant integer ABILITY_DATA_DATA_B=109
constant integer ABILITY_DATA_DATA_C=110
constant integer ABILITY_DATA_DATA_D=111
constant integer ABILITY_DATA_DATA_E=112
constant integer ABILITY_DATA_DATA_F=113
constant integer ABILITY_DATA_DATA_G=114
constant integer ABILITY_DATA_DATA_H=115
constant integer ABILITY_DATA_DATA_I=116
constant integer ABILITY_DATA_UNITID=117
constant integer ABILITY_DATA_HOTKET=200
constant integer ABILITY_DATA_UNHOTKET=201
constant integer ABILITY_DATA_RESEARCH_HOTKEY=202
constant integer ABILITY_DATA_NAME=203
constant integer ABILITY_DATA_ART=204
constant integer ABILITY_DATA_TARGET_ART=205
constant integer ABILITY_DATA_CASTER_ART=206
constant integer ABILITY_DATA_EFFECT_ART=207
constant integer ABILITY_DATA_AREAEFFECT_ART=208
constant integer ABILITY_DATA_MISSILE_ART=209
constant integer ABILITY_DATA_SPECIAL_ART=210
constant integer ABILITY_DATA_LIGHTNING_EFFECT=211
constant integer ABILITY_DATA_BUFF_TIP=212
constant integer ABILITY_DATA_BUFF_UBERTIP=213
constant integer ABILITY_DATA_RESEARCH_TIP=214
constant integer ABILITY_DATA_TIP=215
constant integer ABILITY_DATA_UNTIP=216
constant integer ABILITY_DATA_RESEARCH_UBERTIP=217
constant integer ABILITY_DATA_UBERTIP=218
constant integer ABILITY_DATA_UNUBERTIP=219
constant integer ABILITY_DATA_UNART=220
constant boolean LIBRARY_JAPIDisplayChat=true
constant integer CHAT_RECIPIENT_ALL=0
constant integer CHAT_RECIPIENT_ALLIES=1
constant integer CHAT_RECIPIENT_OBSERVERS=2
constant integer CHAT_RECIPIENT_PRIVATE=3
constant boolean LIBRARY_JAPIEffect=true
constant boolean LIBRARY_JAPIEventDamageData=true
constant integer EVENT_DAMAGE_DATA_VAILD=0
constant integer EVENT_DAMAGE_DATA_IS_PHYSICAL=1
constant integer EVENT_DAMAGE_DATA_IS_ATTACK=2
constant integer EVENT_DAMAGE_DATA_IS_RANGED=3
constant integer EVENT_DAMAGE_DATA_DAMAGE_TYPE=4
constant integer EVENT_DAMAGE_DATA_WEAPON_TYPE=5
constant integer EVENT_DAMAGE_DATA_ATTACK_TYPE=6
constant boolean LIBRARY_JAPIUnitState=true
constant integer UNIT_STATE_ATTACK1_DAMAGE_BONUS=$13
constant integer UNIT_STATE_ATTACK1_RANGE_BUFFER=$27
constant integer UNIT_STATE_ATTACK1_DAMAGE_MIN=$14
constant integer UNIT_STATE_ATTACK1_DAMAGE_MAX=$15
constant integer UNIT_STATE_ATTACK1_WEAPON_TYPE=$58
constant integer UNIT_STATE_ATTACK2_DAMAGE_BONUS=$33
constant integer UNIT_STATE_ATTACK2_RANGE_BUFFER=$41
constant integer UNIT_STATE_ATTACK2_DAMAGE_MIN=$42
constant integer UNIT_STATE_ATTACK2_DAMAGE_MAX=$43
constant integer UNIT_STATE_ATTACK2_WEAPON_TYPE=$59
constant integer UNIT_STATE_RATE_OF_FIRE=$51
constant integer UNIT_STATE_TYPE=$61
constant integer JN_DEFENSE_TYPE_LIGHT=0
constant integer JN_DEFENSE_TYPE_MEDIUM=1
constant integer JN_DEFENSE_TYPE_LARGE=2
constant integer JN_DEFENSE_TYPE_FORT=3
constant integer JN_DEFENSE_TYPE_NORMAL=4
constant integer JN_DEFENSE_TYPE_HERO=5
constant integer JN_DEFENSE_TYPE_DIVINE=6
constant integer JN_DEFENSE_TYPE_NONE=7
constant integer JN_TARGET_FLAG_NONE=1
constant integer JN_TARGET_FLAG_GROUND=2
constant integer JN_TARGET_FLAG_AIR=4
constant integer JN_TARGET_FLAG_STRUCTURE=8
constant integer JN_TARGET_FLAG_WARD=$10
constant integer JN_TARGET_FLAG_ITEM=$20
constant integer JN_TARGET_FLAG_TREE=$40
constant integer JN_TARGET_FLAG_WALL=$80
constant integer JN_TARGET_FLAG_DEBRIS=$100
constant integer JN_TARGET_FLAG_DECORATION=$200
constant integer JN_TARGET_FLAG_BRIDGE=$400
constant integer JN_WEAPON_SOUND_METAL_LIGHT_CHOP=1
constant integer JN_WEAPON_SOUND_METAL_MEDIUM_CHOP=2
constant integer JN_WEAPON_SOUND_METAL_HEAVY_CHOP=3
constant integer JN_WEAPON_SOUND_METAL_LIGHT_SLICE=4
constant integer JN_WEAPON_SOUND_METAL_MEDIUM_SLICE=5
constant integer JN_WEAPON_SOUND_METAL_HEAVY_SLICE=6
constant integer JN_WEAPON_SOUND_METAL_MEDIUM_BASH=7
constant integer JN_WEAPON_SOUND_METAL_HEAVY_BASH=8
constant integer JN_WEAPON_SOUND_WOOD_LIGHT_BASH=14
constant integer JN_WEAPON_SOUND_WOOD_MEDIUM_BASH=15
constant integer JN_WEAPON_SOUND_WOOD_HEAVY_BASH=16
constant integer JN_WEAPON_SOUND_AXE_MEDIUM_CHOP=22
constant integer JN_WEAPON_SOUND_ROCK_HEAVY_BASH=23
constant boolean LIBRARY_JNCommon=true
constant boolean LIBRARY_JNMemory=true
constant hashtable JNProc_ht=InitHashtable()
constant integer JNProc_key=$DA7883F
constant integer JNProc__cdecl=1
constant integer JNProc__stdcall=2
constant integer JNProc__fastcall=3
constant integer JNProc__thiscall=4
constant boolean LIBRARY_JNServer=true
constant boolean LIBRARY_JNStopwatch=true
constant boolean LIBRARY_JNString=true
constant boolean LIBRARY_LinkFrame=true
boolean LinkFrame__isLink=false
integer LinkFrame__link_button
integer LinkFrame__link_box
integer LinkFrame__discord_back_drop
integer LinkFrame__seat_back_drop
integer LinkFrame__discord_button
integer LinkFrame__seat_button
constant boolean LIBRARY_MemoryLibEnd=true
constant boolean LIBRARY_Party=true
constant boolean LIBRARY_Polar=true
constant boolean LIBRARY_Polarangle2=true
constant boolean LIBRARY_Position=true
constant boolean LIBRARY_Random=true
constant boolean LIBRARY_ShildSet=true
constant boolean LIBRARY_Stash=true
integer Stash__ALIVE_STASH=0
integer Stash__MAX_STASH=0
hashtable Stash__EXIST_TABLE=InitHashtable()
hashtable Stash__SCALE_TABLE=InitHashtable()
hashtable Stash__HNAME_TABLE=InitHashtable()
hashtable Stash__HINDX_TABLE=InitHashtable()
hashtable Stash__PROPT_TABLE=InitHashtable()
hashtable Stash__VALUE_TABLE=InitHashtable()
hashtable Stash__STAMP_TABLE=InitHashtable()
constant integer Stash__SCALE_SIZE=0
constant integer Stash__SCALE_REMAINING=1
integer Stash__ARG_STASH=0
string Stash__ARG_PROPERTY=null
integer Stash__ARG_INDEX=0
string Stash__ARG_VALUE=null
boolean Stash__ARG_FLAG=false
integer Stash__ARG_SIGNAL=0
integer Stash__MK_THIS=0
string Stash__MK_PROPERTY=null
integer Stash__MK_INDEX=-1
constant integer Stash__COPY_PAGE=2000
integer Stash__COPY_THIS=0
integer Stash__COPY_SOURCE=0
integer Stash__COPY_SORUCE_SIZE=0
integer Stash__COPY_SORUCE_INDEX=0
integer Stash__COPY_INDEX=0
constant integer Stash__PRINT_PAGE=2000
integer Stash__PRINT_STASH=0
integer Stash__PRINT_INDEX=0
integer Stash__PRINT_MAX=0
constant boolean LIBRARY_TPTTSLinkedVariablesArray=true
constant integer TPTTSLinkedVariablesArray__ARRAY_MAX=51
constant boolean LIBRARY_TimerUtils=true
constant boolean TimerUtils__USE_HASH_TABLE=true
constant boolean TimerUtils__USE_FLEXIBLE_OFFSET=false
constant integer TimerUtils__OFFSET=0x100000
integer TimerUtils__VOFFSET=TimerUtils__OFFSET
constant integer TimerUtils__QUANTITY=1024
constant integer TimerUtils__ARRAY_SIZE=8190
hashtable TimerUtils__ht
integer TimerUtils__tN=0
constant integer TimerUtils__HELD=0x28829022
boolean TimerUtils__didinit=false
constant boolean LIBRARY_Typecast=true
code Code
integer Int
string Str
boolean Bool
code l__Code
integer l__Int
string l__Str
boolean l__Bool
constant boolean LIBRARY_ArtfactReset=true
constant boolean LIBRARY_EF=true
constant boolean LIBRARY_JNStashNet=true
constant real JNStashNet__CONNECTION_PROCESS_INTERVAL=0.03125
constant string JNStashNet__TASK_SYNC_KEY="STSH_TASK"
constant integer JNStashNet__TASK_DOWNLOAD_USER_JNUSE=10
constant integer JNStashNet__TASK_DOWNLOAD_USER_JNUSE_WAIT=11
constant integer JNStashNet__TASK_DOWNLOAD_USER_INIT=12
constant integer JNStashNet__TASK_DOWNLOAD_USER_INIT_WAIT=13
constant integer JNStashNet__TASK_DOWNLOAD_USER_HEADER=14
constant integer JNStashNet__TASK_DOWNLOAD_USER_HEADER_WAIT=15
constant integer JNStashNet__TASK_DOWNLOAD_USER_BODY=16
constant integer JNStashNet__TASK_DOWNLOAD_USER_BODY_WAIT=17
constant integer JNStashNet__TASK_DOWNLOAD_USER_FINALIZE=18
constant integer JNStashNet__TASK_UPLOAD_USER_STORE_DATA=100
constant integer JNStashNet__TASK_UPLOAD_USER_SAVE=101
constant integer JNStashNet__TASK_UPLOAD_USER_SAVE_WAIT=102
constant integer JNStashNet__TASK_UPLOAD_USER_FINALIZE=103
integer JNStashNet__TASK_NEXT=0
hashtable JNStashNet__TASK_USER_TABLE=InitHashtable()
hashtable JNStashNet__TASK_STR_TABLE=InitHashtable()
hashtable JNStashNet__TASK_INT_TABLE=InitHashtable()
hashtable JNStashNet__TASK_TRIG_TABLE=InitHashtable()
constant integer JNStashNet__TASK_USER=0
constant integer JNStashNet__TASK_MAPID=1
constant integer JNStashNet__TASK_USERID=2
constant integer JNStashNet__TASK_SECRETKEY=3
constant integer JNStashNet__TASK_MAX=10
constant integer JNStashNet__TASK_PROGRESS=11
constant integer JNStashNet__TASK_STAGE=12
constant integer JNStashNet__TASK_STASH=20
constant integer JNStashNet__TASK_CALLBACK=30
constant integer JNStashNet__TASK_RES_JNUSE=50
constant integer JNStashNet__TASK_RES_INIT=51
constant integer JNStashNet__TASK_RES_HEADER_SIZE=52
constant integer JNStashNet__TASK_RES_BODY_REQUEST=53
constant integer JNStashNet__TASK_RES_SAVE_RESULT=100
timer JNStashNet__TASK_ACTIVATOR=CreateTimer()
integer JNStashNet__ACTIVE_TASK_COUNT=0
integer array JNStashNet__ACTIVE_TASKS
player JNStashNet__EV_USER=null
integer JNStashNet__EV_STASH=0
boolean JNStashNet__EV_FINISHED=false
boolean JNStashNet__EV_RESULT=false
string JNStashNet__EV_MESSAGE=null
integer JNStashNet__EV_MAX=0
integer JNStashNet__EV_PROGRESS=0
player JNStashNet__ARG_USER=null
string JNStashNet__ARG_MAPID=null
string JNStashNet__ARG_USERID=null
string JNStashNet__ARG_SECRETKEY=null
integer JNStashNet__ARG_STASH=0
trigger JNStashNet__ARG_CALLBACK=null
boolean JNStashNet__RES_FLAG=false
integer JNStashNet__ARG_TASK=0
boolean JNStashNet__RES_TASK=false
constant boolean LIBRARY_MemoryLibBase=true
integer pGameDll
constant boolean LIBRARY_MoveSpeedLimit=true
constant boolean LIBRARY_TimerPutsTriggerToSleep=true
integer GlobalTV=0
integer Wait=0
constant boolean TimerPutsTriggerToSleep_USE_VARIABLE_ARRAY=true
constant boolean TimerPutsTriggerToSleep_USE_AUTO_FLUSH_location=true
constant boolean TimerPutsTriggerToSleep_USE_AUTO_FLUSH_effect=true
constant boolean TimerPutsTriggerToSleep_USE_AUTO_FLUSH_lightning=true
constant boolean TimerPutsTriggerToSleep_USE_AUTO_FLUSH_force=true
constant boolean TimerPutsTriggerToSleep_USE_AUTO_FLUSH_group=true
constant boolean LIBRARY_AnythingOPTION=true
constant boolean LIBRARY_BossDPS=true
constant boolean LIBRARY_DamageLib=true
constant boolean LIBRARY_MemoryLibPrimitiveType=true
constant boolean LIBRARY_Production=true
constant boolean LIBRARY_Arch=true
constant boolean LIBRARY_Aris=true
constant boolean LIBRARY_Aya=true
constant boolean LIBRARY_DoomGuardlib=true
constant boolean LIBRARY_Guts=true
constant boolean LIBRARY_Ichigo=true
constant boolean LIBRARY_Izayoi=true
constant boolean LIBRARY_Kali=true
constant boolean LIBRARY_Kaneki=true
boolean KanekiR=false
constant boolean LIBRARY_Kazusa=true
constant boolean LIBRARY_Meiling=true
constant boolean LIBRARY_MemoryLibCommandButtonData=true
constant boolean LIBRARY_MemoryLibGameUI=true
constant boolean LIBRARY_MemoryLibMemoryBlock=true
constant integer MemoryLib_MAX_MEMORY_BLOCK_SIZE=JASS_MAX_ARRAY_SIZE*4
constant boolean LIBRARY_Mika=true
timer MiKaD=CreateTimer()
constant boolean LIBRARY_Miku=true
constant boolean LIBRARY_Ryougi=true
constant boolean LIBRARY_SeaWitchlib=true
constant boolean LIBRARY_Shiki=true
constant boolean LIBRARY_Yae=true
constant boolean LIBRARY_Youmu=true
constant boolean LIBRARY_boosBB=true
constant boolean LIBRARY_boosCronus=true
constant boolean LIBRARY_boosTauren=true
constant boolean LIBRARY_illidan=true
constant boolean LIBRARY_MemoryLibCommandButton=true
constant boolean LIBRARY_MemoryLib=true
constant boolean LIBRARY_EndGameHook=true
integer EndGameHook___pGameWar3
integer EndGameHook___pSub_35FDF0
integer EndGameHook___pTrampoline
integer EndGameHook___pCallback
integer EndGameHook___pCallbackCodeIndex
integer EndGameHook___MemoryBlockOldProtect
integer EndGameHook___pDummy1
integer EndGameHook___pDummy2
integer array EndGameHook___originalSub_35FDF0
string EndGameHook___userCallbackName=null
code EndGameHook___userCallbackCode=null
integer GameExitHook__MemoryBlock_block
integer array l__GameExitHook__MemoryBlock_block
constant boolean LIBRARY_SpecialEffectColor=true
integer SpecialEffectColor__MemoryBlock_block
integer array l__SpecialEffectColor__MemoryBlock_block
constant boolean LIBRARY_Esds=true
constant boolean LIBRARY_Naru=true
constant boolean LIBRARY_Reimu=true
constant boolean LIBRARY_Wakamo=true
constant boolean LIBRARY_ikki=true
constant boolean REFORGED_MODE=false
real array udg_Character_Shild
real array udg_Character_Shild_Down
hashtable udg_Hashtable=null
hashtable udg_Hash=null
unit array udg_Spell_Dummy_Unit
item udg_Item_Pathable=null
unit udg_PathableChecker=null
hashtable udg_CallBackHash=null
force udg_PlayerTeam=null
dialog udg_Dialog=null
button array udg_Dialog_B
timerdialog udg_as=null
unit array udg_PickUpunit
timer udg_Artfact=null
timer array udg_PstatTimer
integer udg_regionI=0
sound udg_SND=null
integer array udg_int
timer array udg_infoRe
timer array udg_cost
group array udg_group
timer array udg_BattleEND
timer array udg_n007timer
timer array udg_c004timer
group udg_Mujuk=null
dialog array udg_CustomDialog
unit udg_BOSS=null
rect gg_rct_DummyUnitSet=null
rect gg_rct_WisspZone=null
rect gg_rct_ChangoZone=null
rect gg_rct_PigRegen=null
rect gg_rct_Tauren=null
rect gg_rct_Taurren_Middle=null
rect gg_rct_wave1=null
rect gg_rct_wave2=null
rect gg_rct_wave3=null
rect gg_rct_AttackZone=null
rect gg_rct_wave2_attack1=null
rect gg_rct_wave2_attack2=null
rect gg_rct_wave2_attack3=null
rect gg_rct_water_plz=null
rect gg_rct_water_plz2=null
rect gg_rct_item_plz=null
rect gg_rct_traning_room=null
rect gg_rct_TraningRoom1=null
rect gg_rct_TraningRoom2=null
rect gg_rct_TraningRoom3=null
rect gg_rct_TraningRoom4=null
rect gg_rct_TraningRoom5=null
rect gg_rct_Undead=null
rect gg_rct_Winter=null
rect gg_rct_Ent=null
rect gg_rct_Orc=null
rect gg_rct_Golem=null
rect gg_rct_LegendZone=null
rect gg_rct_itemSerch=null
rect gg_rct_BB_Middle=null
rect gg_rct_BB=null
rect gg_rct_Cronus_Middle=null
rect gg_rct_MemoryRoom=null
rect gg_rct_MemoryMonster=null
camerasetup gg_cam_Tauren=null
camerasetup gg_cam_Reset=null
camerasetup gg_cam_BB=null
camerasetup gg_cam_izayoiT=null
trigger gg_trg_Script=null
trigger gg_trg_TimerPutsTriggerToSleep=null
trigger gg_trg_TPTTS_SubTrigs=null
trigger gg_trg_TPTTS_LinkedVariables=null
trigger gg_trg_TPTTS_LinkedVariables2=null
trigger gg_trg_TPTTS_LinkedVariables_Array=null
trigger gg_trg_TPTTS_Copy=null
trigger gg_trg_TPTTS_WhenEventId=null
trigger gg_trg_TPTTS_EmptyTrigVars=null
trigger gg_trg_TimerUtils=null
trigger gg_trg_CFX=null
trigger gg_trg_CFX_CurbDash=null
trigger gg_trg_Group_Utill=null
trigger gg_trg_Angle_Helper=null
trigger gg_trg_Stun=null
trigger gg_trg_EF=null
trigger gg_trg_Camera=null
trigger gg_trg_AnythingOPTION=null
trigger gg_trg_Shild_Library=null
trigger gg_trg_Artifect_Persent=null
trigger gg_trg_Lucky_System=null
trigger gg_trg_info=null
trigger gg_trg_link=null
trigger gg_trg_Assets=null
trigger gg_trg_BuffSystemLib=null
trigger gg_trg_Boss_Bar=null
trigger gg_trg_Stash=null
trigger gg_trg_JNStash=null
trigger gg_trg_Stash_Load=null
trigger gg_trg_ArtProduction=null
trigger gg_trg_ArtfectEF=null
trigger gg_trg_IchigoSkill=null
trigger gg_trg_ArisLight=null
trigger gg_trg_ArtiPect_Set=null
trigger gg_trg_GachaUnit=null
trigger gg_trg_Arti_Reset=null
trigger gg_trg_Artefact_get=null
trigger gg_trg_Artefactget=null
trigger gg_trg_ArtefactEF=null
trigger gg_trg_Artefact_Stet=null
trigger gg_trg_Philosopher_stone=null
trigger gg_trg_Bending=null
trigger gg_trg_Taro=null
trigger gg_trg_Import=null
trigger gg_trg_EndGameHook=null
trigger gg_trg_MemoryLib=null
trigger gg_trg_Typecast=null
trigger gg_trg_Effect_Color=null
trigger gg_trg_Update_Callback=null
trigger gg_trg_Inventory=null
trigger gg_trg_Sync_Trig=null
trigger gg_trg_EquipSlot=null
trigger gg_trg_Setting=null
trigger gg_trg_Skill_LvUP=null
trigger gg_trg_Mouse_In_Common=null
trigger gg_trg_Player_Out=null
trigger gg_trg_Set=null
trigger gg_trg_ArtSet=null
trigger gg_trg_Difficulty_set=null
trigger gg_trg_Round_Start=null
trigger gg_trg_wave_unit_setting1=null
trigger gg_trg_wave_unit_setting2=null
trigger gg_trg_wave_unit_setting3=null
trigger gg_trg_wave_unit_setting4=null
trigger gg_trg_INFO_OFF=null
trigger gg_trg_Seeya=null
trigger gg_trg_test_mothin=null
trigger gg_trg_test0=null
trigger gg_trg_test1=null
trigger gg_trg_test111=null
trigger gg_trg_test2=null
trigger gg_trg_test4=null
trigger gg_trg_test5=null
trigger gg_trg_test6=null
trigger gg_trg_testnaga=null
trigger gg_trg_test7=null
trigger gg_trg_test=null
trigger gg_trg_handle=null
trigger gg_trg_Select=null
trigger gg_trg_Attack_Mosun=null
trigger gg_trg_Character_Click=null
trigger gg_trg_HP_bar_add=null
trigger gg_trg_timer_set=null
trigger gg_trg_cost=null
trigger gg_trg_Lv_up=null
trigger gg_trg_sec1=null
trigger gg_trg_Morning=null
trigger gg_trg_Night=null
trigger gg_trg_leader_timer=null
trigger gg_trg_dron_move=null
trigger gg_trg_N001=null
trigger gg_trg_N035counter=null
trigger gg_trg_N035barrior=null
trigger gg_trg_N035heal=null
trigger gg_trg_N031=null
trigger gg_trg_N031stat=null
trigger gg_trg_N031P=null
trigger gg_trg_C005=null
trigger gg_trg_C032=null
trigger gg_trg_U020trg=null
trigger gg_trg_R029=null
trigger gg_trg_R034=null
trigger gg_trg_U037=null
trigger gg_trg_R031=null
trigger gg_trg_U040=null
trigger gg_trg_U044=null
trigger gg_trg_U045=null
trigger gg_trg_U047=null
trigger gg_trg_U061=null
trigger gg_trg_U068=null
trigger gg_trg_U074=null
trigger gg_trg_RedMist=null
trigger gg_trg_info_Rejoin=null
trigger gg_trg_Pstat=null
trigger gg_trg_Hero_Death=null
trigger gg_trg_Revilve_Hero=null
trigger gg_trg_Monster_Death=null
trigger gg_trg_Town_Destroy=null
trigger gg_trg_CreepRegion=null
trigger gg_trg_Room_Skill=null
trigger gg_trg_mix=null
trigger gg_trg_Main_Skill=null
trigger gg_trg_Item_Lost=null
trigger gg_trg_water_Quest=null
trigger gg_trg_water_Quest2=null
trigger gg_trg_item_Quest=null
trigger gg_trg_traning_Quest=null
trigger gg_trg_Amalilse=null
trigger gg_trg_Frig=null
trigger gg_trg_Mono=null
trigger gg_trg_Latika=null
trigger gg_trg_HackterTrig=null
trigger gg_trg_Skill_Cool_and_Arti_Skill=null
trigger gg_trg_F3_F4_Teleport=null
trigger gg_trg_Aqua_EXO=null
trigger gg_trg_HolyWater=null
trigger gg_trg_Damage_Engine=null
trigger gg_trg_Any_Unit_Damage=null
trigger gg_trg_known=null
trigger gg_trg_BattleEND=null
trigger gg_trg_Damage_Trigger_Reset=null
trigger gg_trg_Damage=null
trigger gg_trg_BossStun=null
trigger gg_trg_illidan=null
trigger gg_trg_DoomGuard=null
trigger gg_trg_Seewitch=null
trigger gg_trg_Tauren_Lib=null
trigger gg_trg_BB_Lib=null
trigger gg_trg_Cronus_Lib=null
trigger gg_trg_BossWarning_Sign=null
trigger gg_trg_BossDPS=null
trigger gg_trg_Ichigo_Lib=null
trigger gg_trg_Guts_Lib=null
trigger gg_trg_Shiki_Lib=null
trigger gg_trg_Aya_Lib=null
trigger gg_trg_Ryougi_Lib=null
trigger gg_trg_Youmu_lib=null
trigger gg_trg_Kazusa_lib=null
trigger gg_trg_Kazusa_Lib=null
trigger gg_trg_Izayoi_lib=null
trigger gg_trg_ikki_lib=null
trigger gg_trg_kaneki_lib=null
trigger gg_trg_Kali_lib=null
trigger gg_trg_Mika_Lib=null
trigger gg_trg_Yae_Lib=null
trigger gg_trg_Aris_Re=null
trigger gg_trg_Meiling_Lib=null
trigger gg_trg_Miku_Lib_Re=null
trigger gg_trg_Arch_Lib=null
trigger gg_trg_Esdeath_Lib=null
trigger gg_trg_Reimu_Lib=null
trigger gg_trg_Naru_lib=null
trigger gg_trg_Wakamo_Lib=null
trigger gg_trg_test_text=null
trigger gg_trg_Dio_Lib=null
unit gg_unit_h000_0013=null
unit gg_unit_n002_0004=null
item gg_item_I00K_0119=null
unit gg_unit_np14_0151=null
unit gg_unit_np17_0150=null
unit gg_unit_DM01_0078=null
unit gg_unit_n002_0002=null
unit gg_unit_n002_0023=null
unit gg_unit_n002_0006=null
unit gg_unit_n002_0005=null
unit gg_unit_n005_0137=null
unit gg_unit_np18_0140=null
unit gg_unit_np06_0118=null
unit gg_unit_np07_0117=null
unit gg_unit_np05_0115=null
unit gg_unit_np04_0116=null
unit gg_unit_h002_0157=null
unit gg_unit_h006_0130=null
unit gg_unit_h006_0129=null
unit gg_unit_h006_0127=null
unit gg_unit_h006_0128=null
unit gg_unit_n004_0133=null
unit gg_unit_np10_0134=null
unit gg_unit_np11_0135=null
unit gg_unit_np12_0136=null
unit gg_unit_np16_0153=null
unit gg_unit_np13_0138=null
unit gg_unit_np15_0152=null
unit gg_unit_n006_0022=null
unit gg_unit_n007_0027=null
unit gg_unit_n008_0028=null
unit gg_unit_h007_0030=null
unit temp_unit
unit temp_unit2
unit temp_unit3
unit temp_unit_limaga
unit ApplyDM
unit t_u
unit target=null
integer temp_integer
integer temp_integer2
integer randomSeed
integer seedtimesec
integer ProduceLV=0
string array PlayerColor
boolean BossBattle=false
boolean BossBattleN=false
boolean GutsAttack=false
boolean array CharacterDeath
trigger DOWNLOAD_CALLBACK=CreateTrigger()
trigger UPLOAD_CALLBACK=CreateTrigger()
integer array PLAYER_DATA
constant string MapId="PDF"
constant string SecretKey="60608982-453d-476d-b325-e9ab085263cc"
string str
integer sec
integer min
unit udg_Sound_Dummy_Unit
unit Sandback
boolean array inaba
boolean array Check
boolean array SandeBisut
real array DashMove
boolean array EqSl_Enable
boolean array myEffectSys
boolean array frEffectSys
boolean array myImoteSys
boolean array frImoteSys
boolean array CharcterStat
boolean array IchigoSET
integer array Ichigointeger
string IchigoString
integer array SpecialArtSET
integer SpecialArtMax
integer array STRP
integer array MainSTP
integer array ALLP
integer array ArmorP
integer array AttackSpd
integer array MoveSpd
integer array DamageDec
integer array NormalP
real array DamageAmp
real array SkillD
real array BloodAbsolAD
real array BloodAbsolAP
real array ADcriP
real array APcriP
real array ADcriD
real array APcriD
real array NONE
real array FIRED
real array ICED
real array WINDD
real array ThunD
real array BOOSD
real array HealEF
real array HealEFfriend
real array Exp
real array Gold
real array CostH
real array CostM
real array Skrange
real array ArmorPenetrate
real array poisonPlus
real array fontPlus
real array fontSize
integer array CharacterColor
real array Ccooltime
sound LastEFVoice
sound LastBGM
sound array LastSound
string array Model
boolean array EX
group array MultyGroup
integer array skc
boolean GameChnag2=false
boolean Bossunable=false
boolean Bossstun=false
boolean array CriticalCheck
boolean array invenClick
real BossunableTime=1
unit Boss=null
unit BossAgro=null
timer BossWarningT=CreateTimer()
boolean bam
real array DashCool
boolean array ArtSkillBlock
boolean RyougiT=false
button array customDialogButton
string array OtinusText
string array ShuText
boolean array Articool
integer difficulty
integer array TowerStat
integer array ND_ID
integer array PP
integer array PR
real array ND_Size
timer GutsF=CreateTimer()
timer GutsFuse=CreateTimer()
timer RoundTimer=CreateTimer()
timer YoumuF=CreateTimer()
timer MikuRTimer=CreateTimer()
timer RBtimer=CreateTimer()
timer KazusaT=CreateTimer()
timer KazusaQ=CreateTimer()
timer array ReviveTimer
timer array SandbackkDPS
real array DPS
unit Youmu
timer array ShildTimer
timer array N035timer3
timer array N035timer2
timer array N035timer
timer array N031timer
timer array N031timer2
timer array N031timer3
timer array C005timer
timer array N001timer
timer array R029timer
timer array U037timer
timer array R031timer
timer array U040timer
timer array U044timer
timer array C0321timer
timer array C0322timer
timer array R034timer
timer array U047timer
timer array U068timer
timer array U074timer
timer U020timer=CreateTimer()
timer U045timer1=CreateTimer()
timer U045timer2=CreateTimer()
timer U061timer=CreateTimer()
timer array PhoenixGirl
timer array Latika
timer array Garom
timer array Aluzard
timer array Hackter
timer array Ann
timer array Tobari
timer array Mono
timer array Frig
timer array Room
timer array Elbira
timer array Luni
timer array Chubaki
timer array Walbert
timer array Nio
timer array YoumuNBT
timer array RedMist
unit array ShacullUnit
real array Kirie
rect array TraningRoom
real array Luck
real array Attack1
real array Attack2
unit AttackTar
unit AttackU
boolean array N008
boolean array C004
real array C004Max
real array C004sec
real array Range
boolean array US01
real array US01damage
boolean array Battle
real AtkDmg
real array ct
unit array chango
integer Playint
unit array Charcter
unit array Charcter1
unit array Charcter2
unit array Charcter3
unit array Charcter4
unit array Charcter5
unit array ArtPickProgress
unit array ArtPickUnit
unit array ArtChoice
unit array ArtRerollUnit
unit array ArtGiveup
integer array ArtRerollChance
integer array ArtRerollMaxChance
integer array ArtChoiceTicket
unit array ArtChoiceTicketU
integer array ArtSkillCode1
integer array ArtSkillCode2
integer array ArtSkillCode3
integer array ArtSkillCode4
integer array saveLV
integer array Art1slotLV
integer array Art2slotLV
integer array Art3slotLV
integer array Art4slotLV
integer array Art1
integer array Art2
integer array Art3
integer array Art4
integer array ArtpickSlot
integer array ChSkillD
integer array ChSkillQ
integer array ChSkillQQ
integer array ChSkillW
integer array ChSkillWW
integer array ChSkillE
integer array ChSkillEE
integer array ChSkillR
integer array ChSkillT
integer array STRup
integer array AGIup
integer array INTup
integer array ADup
integer array growthStone
real array UniqueDrop
real array RareDrop
real array UncarmonDrop
integer UniqueMax
integer RareMax
integer UncarmonMax
integer NormalMax
hashtable UniqueArt=InitHashtable()
hashtable RareArt=InitHashtable()
hashtable UncarmonArt=InitHashtable()
hashtable NormalArt=InitHashtable()
hashtable System=InitHashtable()
hashtable Hash_Stat=InitHashtable()
constant real MaxCameraRange__MAX_TARGET_DISTANCE=100000.00
constant real MaxCameraRange__MAX_TARGET_FAR=100000.00
unit array Hero
hashtable Hash=InitHashtable()
string array GradeName
string array ClassName
boolean RightClickEnable=true
boolean Inventory_Visility=false
boolean Inventory_AreYouPickUp=false
boolean Inventory_Drag=false
boolean Inventory_Snap=false
boolean array Inventory_FrameIn
integer Inventory_LastSelected=-1
integer Inventory_MaxEF=16
timer array Inventory___LineTimer
boolean Setting_Visility=false
boolean array Setting_FrameIn
boolean SkillUP_Visility=false
unit array unitselect___SelectedUnit
boolean array unitselect___SelectBol
integer array unitselect___SelectCount
boolean Sk2illUP_Visility=false
trigger l__library_init
constant integer si__Angle=1
constant integer si__Curve=2
real s__Curve_cX=0.0
real s__Curve_cY=0.0
real s__Curve_cZ=0.0
constant integer si__CustomStun__IN_INDEXER=3
integer si__CustomStun__IN_INDEXER_F=0
integer si__CustomStun__IN_INDEXER_I=0
integer array si__CustomStun__IN_INDEXER_V
constant integer si__CustomStun__EVENT=4
constant integer si__CustomStun__PROC=5
constant integer si__CustomStun=6
constant integer si__DamageEngine=7
constant integer si__Distance=8
constant integer si__party=9
integer si__party_F=0
integer si__party_I=0
integer array si__party_V
group array s__party_G
constant integer si__Polar=10
constant integer si__Polarangle2=11
constant integer si__Position=12
constant integer si__stash=13
integer si__TPTTSLinkedVariablesArray__alocationsA_I=0
integer si__TPTTSLinkedVariablesArray__alocationsA_F=0
location array s__TPTTSLinkedVariablesArray__alocationsA
constant integer s__TPTTSLinkedVariablesArray__alocationsA_size=51
integer array si__TPTTSLinkedVariablesArray__alocationsA_V
integer si__TPTTSLinkedVariablesArray__alocationsB_I=0
integer si__TPTTSLinkedVariablesArray__alocationsB_F=0
location array s__TPTTSLinkedVariablesArray__alocationsB
constant integer s__TPTTSLinkedVariablesArray__alocationsB_size=51
integer array si__TPTTSLinkedVariablesArray__alocationsB_V
integer si__TPTTSLinkedVariablesArray__alocationsC_I=0
integer si__TPTTSLinkedVariablesArray__alocationsC_F=0
location array s__TPTTSLinkedVariablesArray__alocationsC
constant integer s__TPTTSLinkedVariablesArray__alocationsC_size=51
integer array si__TPTTSLinkedVariablesArray__alocationsC_V
integer si__TPTTSLinkedVariablesArray__alocationsD_I=0
integer si__TPTTSLinkedVariablesArray__alocationsD_F=0
location array s__TPTTSLinkedVariablesArray__alocationsD
constant integer s__TPTTSLinkedVariablesArray__alocationsD_size=51
integer array si__TPTTSLinkedVariablesArray__alocationsD_V
integer si__TPTTSLinkedVariablesArray__alocationsE_I=0
integer si__TPTTSLinkedVariablesArray__alocationsE_F=0
location array s__TPTTSLinkedVariablesArray__alocationsE
constant integer s__TPTTSLinkedVariablesArray__alocationsE_size=51
integer array si__TPTTSLinkedVariablesArray__alocationsE_V
integer si__TPTTSLinkedVariablesArray__alocationsF_I=0
integer si__TPTTSLinkedVariablesArray__alocationsF_F=0
location array s__TPTTSLinkedVariablesArray__alocationsF
constant integer s__TPTTSLinkedVariablesArray__alocationsF_size=51
integer array si__TPTTSLinkedVariablesArray__alocationsF_V
integer si__TPTTSLinkedVariablesArray__alightningsA_I=0
integer si__TPTTSLinkedVariablesArray__alightningsA_F=0
lightning array s__TPTTSLinkedVariablesArray__alightningsA
constant integer s__TPTTSLinkedVariablesArray__alightningsA_size=51
integer array si__TPTTSLinkedVariablesArray__alightningsA_V
integer si__TPTTSLinkedVariablesArray__alightningsB_I=0
integer si__TPTTSLinkedVariablesArray__alightningsB_F=0
lightning array s__TPTTSLinkedVariablesArray__alightningsB
constant integer s__TPTTSLinkedVariablesArray__alightningsB_size=51
integer array si__TPTTSLinkedVariablesArray__alightningsB_V
integer si__TPTTSLinkedVariablesArray__alightningsC_I=0
integer si__TPTTSLinkedVariablesArray__alightningsC_F=0
lightning array s__TPTTSLinkedVariablesArray__alightningsC
constant integer s__TPTTSLinkedVariablesArray__alightningsC_size=51
integer array si__TPTTSLinkedVariablesArray__alightningsC_V
integer si__TPTTSLinkedVariablesArray__alightningsD_I=0
integer si__TPTTSLinkedVariablesArray__alightningsD_F=0
lightning array s__TPTTSLinkedVariablesArray__alightningsD
constant integer s__TPTTSLinkedVariablesArray__alightningsD_size=51
integer array si__TPTTSLinkedVariablesArray__alightningsD_V
integer si__TPTTSLinkedVariablesArray__alightningsE_I=0
integer si__TPTTSLinkedVariablesArray__alightningsE_F=0
lightning array s__TPTTSLinkedVariablesArray__alightningsE
constant integer s__TPTTSLinkedVariablesArray__alightningsE_size=51
integer array si__TPTTSLinkedVariablesArray__alightningsE_V
integer si__TPTTSLinkedVariablesArray__alightningsF_I=0
integer si__TPTTSLinkedVariablesArray__alightningsF_F=0
lightning array s__TPTTSLinkedVariablesArray__alightningsF
constant integer s__TPTTSLinkedVariablesArray__alightningsF_size=51
integer array si__TPTTSLinkedVariablesArray__alightningsF_V
integer si__TPTTSLinkedVariablesArray__abooleansA_I=0
integer si__TPTTSLinkedVariablesArray__abooleansA_F=0
boolean array s__TPTTSLinkedVariablesArray__abooleansA
constant integer s__TPTTSLinkedVariablesArray__abooleansA_size=51
integer array si__TPTTSLinkedVariablesArray__abooleansA_V
integer si__TPTTSLinkedVariablesArray__abooleansB_I=0
integer si__TPTTSLinkedVariablesArray__abooleansB_F=0
boolean array s__TPTTSLinkedVariablesArray__abooleansB
constant integer s__TPTTSLinkedVariablesArray__abooleansB_size=51
integer array si__TPTTSLinkedVariablesArray__abooleansB_V
integer si__TPTTSLinkedVariablesArray__abooleansC_I=0
integer si__TPTTSLinkedVariablesArray__abooleansC_F=0
boolean array s__TPTTSLinkedVariablesArray__abooleansC
constant integer s__TPTTSLinkedVariablesArray__abooleansC_size=51
integer array si__TPTTSLinkedVariablesArray__abooleansC_V
integer si__TPTTSLinkedVariablesArray__abooleansD_I=0
integer si__TPTTSLinkedVariablesArray__abooleansD_F=0
boolean array s__TPTTSLinkedVariablesArray__abooleansD
constant integer s__TPTTSLinkedVariablesArray__abooleansD_size=51
integer array si__TPTTSLinkedVariablesArray__abooleansD_V
integer si__TPTTSLinkedVariablesArray__abooleansE_I=0
integer si__TPTTSLinkedVariablesArray__abooleansE_F=0
boolean array s__TPTTSLinkedVariablesArray__abooleansE
constant integer s__TPTTSLinkedVariablesArray__abooleansE_size=51
integer array si__TPTTSLinkedVariablesArray__abooleansE_V
integer si__TPTTSLinkedVariablesArray__abooleansF_I=0
integer si__TPTTSLinkedVariablesArray__abooleansF_F=0
boolean array s__TPTTSLinkedVariablesArray__abooleansF
constant integer s__TPTTSLinkedVariablesArray__abooleansF_size=51
integer array si__TPTTSLinkedVariablesArray__abooleansF_V
integer si__TPTTSLinkedVariablesArray__aintegersA_I=0
integer si__TPTTSLinkedVariablesArray__aintegersA_F=0
integer array s__TPTTSLinkedVariablesArray__aintegersA
constant integer s__TPTTSLinkedVariablesArray__aintegersA_size=51
integer array si__TPTTSLinkedVariablesArray__aintegersA_V
integer si__TPTTSLinkedVariablesArray__aintegersB_I=0
integer si__TPTTSLinkedVariablesArray__aintegersB_F=0
integer array s__TPTTSLinkedVariablesArray__aintegersB
constant integer s__TPTTSLinkedVariablesArray__aintegersB_size=51
integer array si__TPTTSLinkedVariablesArray__aintegersB_V
integer si__TPTTSLinkedVariablesArray__aintegersC_I=0
integer si__TPTTSLinkedVariablesArray__aintegersC_F=0
integer array s__TPTTSLinkedVariablesArray__aintegersC
constant integer s__TPTTSLinkedVariablesArray__aintegersC_size=51
integer array si__TPTTSLinkedVariablesArray__aintegersC_V
integer si__TPTTSLinkedVariablesArray__aintegersD_I=0
integer si__TPTTSLinkedVariablesArray__aintegersD_F=0
integer array s__TPTTSLinkedVariablesArray__aintegersD
constant integer s__TPTTSLinkedVariablesArray__aintegersD_size=51
integer array si__TPTTSLinkedVariablesArray__aintegersD_V
integer si__TPTTSLinkedVariablesArray__aintegersE_I=0
integer si__TPTTSLinkedVariablesArray__aintegersE_F=0
integer array s__TPTTSLinkedVariablesArray__aintegersE
constant integer s__TPTTSLinkedVariablesArray__aintegersE_size=51
integer array si__TPTTSLinkedVariablesArray__aintegersE_V
integer si__TPTTSLinkedVariablesArray__aintegersF_I=0
integer si__TPTTSLinkedVariablesArray__aintegersF_F=0
integer array s__TPTTSLinkedVariablesArray__aintegersF
constant integer s__TPTTSLinkedVariablesArray__aintegersF_size=51
integer array si__TPTTSLinkedVariablesArray__aintegersF_V
integer si__TPTTSLinkedVariablesArray__arealsA_I=0
integer si__TPTTSLinkedVariablesArray__arealsA_F=0
real array s__TPTTSLinkedVariablesArray__arealsA
constant integer s__TPTTSLinkedVariablesArray__arealsA_size=51
integer array si__TPTTSLinkedVariablesArray__arealsA_V
integer si__TPTTSLinkedVariablesArray__arealsB_I=0
integer si__TPTTSLinkedVariablesArray__arealsB_F=0
real array s__TPTTSLinkedVariablesArray__arealsB
constant integer s__TPTTSLinkedVariablesArray__arealsB_size=51
integer array si__TPTTSLinkedVariablesArray__arealsB_V
integer si__TPTTSLinkedVariablesArray__arealsC_I=0
integer si__TPTTSLinkedVariablesArray__arealsC_F=0
real array s__TPTTSLinkedVariablesArray__arealsC
constant integer s__TPTTSLinkedVariablesArray__arealsC_size=51
integer array si__TPTTSLinkedVariablesArray__arealsC_V
integer si__TPTTSLinkedVariablesArray__arealsD_I=0
integer si__TPTTSLinkedVariablesArray__arealsD_F=0
real array s__TPTTSLinkedVariablesArray__arealsD
constant integer s__TPTTSLinkedVariablesArray__arealsD_size=51
integer array si__TPTTSLinkedVariablesArray__arealsD_V
integer si__TPTTSLinkedVariablesArray__arealsE_I=0
integer si__TPTTSLinkedVariablesArray__arealsE_F=0
real array s__TPTTSLinkedVariablesArray__arealsE
constant integer s__TPTTSLinkedVariablesArray__arealsE_size=51
integer array si__TPTTSLinkedVariablesArray__arealsE_V
integer si__TPTTSLinkedVariablesArray__arealsF_I=0
integer si__TPTTSLinkedVariablesArray__arealsF_F=0
real array s__TPTTSLinkedVariablesArray__arealsF
constant integer s__TPTTSLinkedVariablesArray__arealsF_size=51
integer array si__TPTTSLinkedVariablesArray__arealsF_V
integer si__TPTTSLinkedVariablesArray__aunitsA_I=0
integer si__TPTTSLinkedVariablesArray__aunitsA_F=0
unit array s__TPTTSLinkedVariablesArray__aunitsA
constant integer s__TPTTSLinkedVariablesArray__aunitsA_size=51
integer array si__TPTTSLinkedVariablesArray__aunitsA_V
integer si__TPTTSLinkedVariablesArray__aunitsB_I=0
integer si__TPTTSLinkedVariablesArray__aunitsB_F=0
unit array s__TPTTSLinkedVariablesArray__aunitsB
constant integer s__TPTTSLinkedVariablesArray__aunitsB_size=51
integer array si__TPTTSLinkedVariablesArray__aunitsB_V
integer si__TPTTSLinkedVariablesArray__aunitsC_I=0
integer si__TPTTSLinkedVariablesArray__aunitsC_F=0
unit array s__TPTTSLinkedVariablesArray__aunitsC
constant integer s__TPTTSLinkedVariablesArray__aunitsC_size=51
integer array si__TPTTSLinkedVariablesArray__aunitsC_V
integer si__TPTTSLinkedVariablesArray__aunitsD_I=0
integer si__TPTTSLinkedVariablesArray__aunitsD_F=0
unit array s__TPTTSLinkedVariablesArray__aunitsD
constant integer s__TPTTSLinkedVariablesArray__aunitsD_size=51
integer array si__TPTTSLinkedVariablesArray__aunitsD_V
integer si__TPTTSLinkedVariablesArray__aunitsE_I=0
integer si__TPTTSLinkedVariablesArray__aunitsE_F=0
unit array s__TPTTSLinkedVariablesArray__aunitsE
constant integer s__TPTTSLinkedVariablesArray__aunitsE_size=51
integer array si__TPTTSLinkedVariablesArray__aunitsE_V
integer si__TPTTSLinkedVariablesArray__aunitsF_I=0
integer si__TPTTSLinkedVariablesArray__aunitsF_F=0
unit array s__TPTTSLinkedVariablesArray__aunitsF
constant integer s__TPTTSLinkedVariablesArray__aunitsF_size=51
integer array si__TPTTSLinkedVariablesArray__aunitsF_V
integer si__TPTTSLinkedVariablesArray__aeffectsA_I=0
integer si__TPTTSLinkedVariablesArray__aeffectsA_F=0
effect array s__TPTTSLinkedVariablesArray__aeffectsA
constant integer s__TPTTSLinkedVariablesArray__aeffectsA_size=51
integer array si__TPTTSLinkedVariablesArray__aeffectsA_V
integer si__TPTTSLinkedVariablesArray__aeffectsB_I=0
integer si__TPTTSLinkedVariablesArray__aeffectsB_F=0
effect array s__TPTTSLinkedVariablesArray__aeffectsB
constant integer s__TPTTSLinkedVariablesArray__aeffectsB_size=51
integer array si__TPTTSLinkedVariablesArray__aeffectsB_V
integer si__TPTTSLinkedVariablesArray__aeffectsC_I=0
integer si__TPTTSLinkedVariablesArray__aeffectsC_F=0
effect array s__TPTTSLinkedVariablesArray__aeffectsC
constant integer s__TPTTSLinkedVariablesArray__aeffectsC_size=51
integer array si__TPTTSLinkedVariablesArray__aeffectsC_V
integer si__TPTTSLinkedVariablesArray__aeffectsD_I=0
integer si__TPTTSLinkedVariablesArray__aeffectsD_F=0
effect array s__TPTTSLinkedVariablesArray__aeffectsD
constant integer s__TPTTSLinkedVariablesArray__aeffectsD_size=51
integer array si__TPTTSLinkedVariablesArray__aeffectsD_V
integer si__TPTTSLinkedVariablesArray__aeffectsE_I=0
integer si__TPTTSLinkedVariablesArray__aeffectsE_F=0
effect array s__TPTTSLinkedVariablesArray__aeffectsE
constant integer s__TPTTSLinkedVariablesArray__aeffectsE_size=51
integer array si__TPTTSLinkedVariablesArray__aeffectsE_V
integer si__TPTTSLinkedVariablesArray__aeffectsF_I=0
integer si__TPTTSLinkedVariablesArray__aeffectsF_F=0
effect array s__TPTTSLinkedVariablesArray__aeffectsF
constant integer s__TPTTSLinkedVariablesArray__aeffectsF_size=51
integer array si__TPTTSLinkedVariablesArray__aeffectsF_V
integer si__TPTTSLinkedVariablesArray__aplayersA_I=0
integer si__TPTTSLinkedVariablesArray__aplayersA_F=0
player array s__TPTTSLinkedVariablesArray__aplayersA
constant integer s__TPTTSLinkedVariablesArray__aplayersA_size=51
integer array si__TPTTSLinkedVariablesArray__aplayersA_V
integer si__TPTTSLinkedVariablesArray__aplayersB_I=0
integer si__TPTTSLinkedVariablesArray__aplayersB_F=0
player array s__TPTTSLinkedVariablesArray__aplayersB
constant integer s__TPTTSLinkedVariablesArray__aplayersB_size=51
integer array si__TPTTSLinkedVariablesArray__aplayersB_V
integer si__TPTTSLinkedVariablesArray__aplayersC_I=0
integer si__TPTTSLinkedVariablesArray__aplayersC_F=0
player array s__TPTTSLinkedVariablesArray__aplayersC
constant integer s__TPTTSLinkedVariablesArray__aplayersC_size=51
integer array si__TPTTSLinkedVariablesArray__aplayersC_V
integer si__TPTTSLinkedVariablesArray__aplayersD_I=0
integer si__TPTTSLinkedVariablesArray__aplayersD_F=0
player array s__TPTTSLinkedVariablesArray__aplayersD
constant integer s__TPTTSLinkedVariablesArray__aplayersD_size=51
integer array si__TPTTSLinkedVariablesArray__aplayersD_V
integer si__TPTTSLinkedVariablesArray__aplayersE_I=0
integer si__TPTTSLinkedVariablesArray__aplayersE_F=0
player array s__TPTTSLinkedVariablesArray__aplayersE
constant integer s__TPTTSLinkedVariablesArray__aplayersE_size=51
integer array si__TPTTSLinkedVariablesArray__aplayersE_V
integer si__TPTTSLinkedVariablesArray__aplayersF_I=0
integer si__TPTTSLinkedVariablesArray__aplayersF_F=0
player array s__TPTTSLinkedVariablesArray__aplayersF
constant integer s__TPTTSLinkedVariablesArray__aplayersF_size=51
integer array si__TPTTSLinkedVariablesArray__aplayersF_V
integer si__TPTTSLinkedVariablesArray__aforcesA_I=0
integer si__TPTTSLinkedVariablesArray__aforcesA_F=0
force array s__TPTTSLinkedVariablesArray__aforcesA
constant integer s__TPTTSLinkedVariablesArray__aforcesA_size=51
integer array si__TPTTSLinkedVariablesArray__aforcesA_V
integer si__TPTTSLinkedVariablesArray__aforcesB_I=0
integer si__TPTTSLinkedVariablesArray__aforcesB_F=0
force array s__TPTTSLinkedVariablesArray__aforcesB
constant integer s__TPTTSLinkedVariablesArray__aforcesB_size=51
integer array si__TPTTSLinkedVariablesArray__aforcesB_V
integer si__TPTTSLinkedVariablesArray__aforcesC_I=0
integer si__TPTTSLinkedVariablesArray__aforcesC_F=0
force array s__TPTTSLinkedVariablesArray__aforcesC
constant integer s__TPTTSLinkedVariablesArray__aforcesC_size=51
integer array si__TPTTSLinkedVariablesArray__aforcesC_V
integer si__TPTTSLinkedVariablesArray__aforcesD_I=0
integer si__TPTTSLinkedVariablesArray__aforcesD_F=0
force array s__TPTTSLinkedVariablesArray__aforcesD
constant integer s__TPTTSLinkedVariablesArray__aforcesD_size=51
integer array si__TPTTSLinkedVariablesArray__aforcesD_V
integer si__TPTTSLinkedVariablesArray__aforcesE_I=0
integer si__TPTTSLinkedVariablesArray__aforcesE_F=0
force array s__TPTTSLinkedVariablesArray__aforcesE
constant integer s__TPTTSLinkedVariablesArray__aforcesE_size=51
integer array si__TPTTSLinkedVariablesArray__aforcesE_V
integer si__TPTTSLinkedVariablesArray__aforcesF_I=0
integer si__TPTTSLinkedVariablesArray__aforcesF_F=0
force array s__TPTTSLinkedVariablesArray__aforcesF
constant integer s__TPTTSLinkedVariablesArray__aforcesF_size=51
integer array si__TPTTSLinkedVariablesArray__aforcesF_V
integer si__TPTTSLinkedVariablesArray__agroupsA_I=0
integer si__TPTTSLinkedVariablesArray__agroupsA_F=0
group array s__TPTTSLinkedVariablesArray__agroupsA
constant integer s__TPTTSLinkedVariablesArray__agroupsA_size=51
integer array si__TPTTSLinkedVariablesArray__agroupsA_V
integer si__TPTTSLinkedVariablesArray__agroupsB_I=0
integer si__TPTTSLinkedVariablesArray__agroupsB_F=0
group array s__TPTTSLinkedVariablesArray__agroupsB
constant integer s__TPTTSLinkedVariablesArray__agroupsB_size=51
integer array si__TPTTSLinkedVariablesArray__agroupsB_V
integer si__TPTTSLinkedVariablesArray__agroupsC_I=0
integer si__TPTTSLinkedVariablesArray__agroupsC_F=0
group array s__TPTTSLinkedVariablesArray__agroupsC
constant integer s__TPTTSLinkedVariablesArray__agroupsC_size=51
integer array si__TPTTSLinkedVariablesArray__agroupsC_V
integer si__TPTTSLinkedVariablesArray__agroupsD_I=0
integer si__TPTTSLinkedVariablesArray__agroupsD_F=0
group array s__TPTTSLinkedVariablesArray__agroupsD
constant integer s__TPTTSLinkedVariablesArray__agroupsD_size=51
integer array si__TPTTSLinkedVariablesArray__agroupsD_V
integer si__TPTTSLinkedVariablesArray__agroupsE_I=0
integer si__TPTTSLinkedVariablesArray__agroupsE_F=0
group array s__TPTTSLinkedVariablesArray__agroupsE
constant integer s__TPTTSLinkedVariablesArray__agroupsE_size=51
integer array si__TPTTSLinkedVariablesArray__agroupsE_V
integer si__TPTTSLinkedVariablesArray__agroupsF_I=0
integer si__TPTTSLinkedVariablesArray__agroupsF_F=0
group array s__TPTTSLinkedVariablesArray__agroupsF
constant integer s__TPTTSLinkedVariablesArray__agroupsF_size=51
integer array si__TPTTSLinkedVariablesArray__agroupsF_V
integer si__TPTTSLinkedVariablesArray__aitemsA_I=0
integer si__TPTTSLinkedVariablesArray__aitemsA_F=0
item array s__TPTTSLinkedVariablesArray__aitemsA
constant integer s__TPTTSLinkedVariablesArray__aitemsA_size=51
integer array si__TPTTSLinkedVariablesArray__aitemsA_V
integer si__TPTTSLinkedVariablesArray__aitemsB_I=0
integer si__TPTTSLinkedVariablesArray__aitemsB_F=0
item array s__TPTTSLinkedVariablesArray__aitemsB
constant integer s__TPTTSLinkedVariablesArray__aitemsB_size=51
integer array si__TPTTSLinkedVariablesArray__aitemsB_V
integer si__TPTTSLinkedVariablesArray__aitemsC_I=0
integer si__TPTTSLinkedVariablesArray__aitemsC_F=0
item array s__TPTTSLinkedVariablesArray__aitemsC
constant integer s__TPTTSLinkedVariablesArray__aitemsC_size=51
integer array si__TPTTSLinkedVariablesArray__aitemsC_V
integer si__TPTTSLinkedVariablesArray__aitemsD_I=0
integer si__TPTTSLinkedVariablesArray__aitemsD_F=0
item array s__TPTTSLinkedVariablesArray__aitemsD
constant integer s__TPTTSLinkedVariablesArray__aitemsD_size=51
integer array si__TPTTSLinkedVariablesArray__aitemsD_V
integer si__TPTTSLinkedVariablesArray__aitemsE_I=0
integer si__TPTTSLinkedVariablesArray__aitemsE_F=0
item array s__TPTTSLinkedVariablesArray__aitemsE
constant integer s__TPTTSLinkedVariablesArray__aitemsE_size=51
integer array si__TPTTSLinkedVariablesArray__aitemsE_V
integer si__TPTTSLinkedVariablesArray__aitemsF_I=0
integer si__TPTTSLinkedVariablesArray__aitemsF_F=0
item array s__TPTTSLinkedVariablesArray__aitemsF
constant integer s__TPTTSLinkedVariablesArray__aitemsF_size=51
integer array si__TPTTSLinkedVariablesArray__aitemsF_V
integer si__TPTTSLinkedVariablesArray__atimersA_I=0
integer si__TPTTSLinkedVariablesArray__atimersA_F=0
timer array s__TPTTSLinkedVariablesArray__atimersA
constant integer s__TPTTSLinkedVariablesArray__atimersA_size=51
integer array si__TPTTSLinkedVariablesArray__atimersA_V
integer si__TPTTSLinkedVariablesArray__atimersB_I=0
integer si__TPTTSLinkedVariablesArray__atimersB_F=0
timer array s__TPTTSLinkedVariablesArray__atimersB
constant integer s__TPTTSLinkedVariablesArray__atimersB_size=51
integer array si__TPTTSLinkedVariablesArray__atimersB_V
integer si__TPTTSLinkedVariablesArray__atimersC_I=0
integer si__TPTTSLinkedVariablesArray__atimersC_F=0
timer array s__TPTTSLinkedVariablesArray__atimersC
constant integer s__TPTTSLinkedVariablesArray__atimersC_size=51
integer array si__TPTTSLinkedVariablesArray__atimersC_V
integer si__TPTTSLinkedVariablesArray__atimersD_I=0
integer si__TPTTSLinkedVariablesArray__atimersD_F=0
timer array s__TPTTSLinkedVariablesArray__atimersD
constant integer s__TPTTSLinkedVariablesArray__atimersD_size=51
integer array si__TPTTSLinkedVariablesArray__atimersD_V
integer si__TPTTSLinkedVariablesArray__atimersE_I=0
integer si__TPTTSLinkedVariablesArray__atimersE_F=0
timer array s__TPTTSLinkedVariablesArray__atimersE
constant integer s__TPTTSLinkedVariablesArray__atimersE_size=51
integer array si__TPTTSLinkedVariablesArray__atimersE_V
integer si__TPTTSLinkedVariablesArray__atimersF_I=0
integer si__TPTTSLinkedVariablesArray__atimersF_F=0
timer array s__TPTTSLinkedVariablesArray__atimersF
constant integer s__TPTTSLinkedVariablesArray__atimersF_size=51
integer array si__TPTTSLinkedVariablesArray__atimersF_V
constant integer si__Ptr=86
integer si__Ptr_F=0
integer si__Ptr_I=0
integer array si__Ptr_V
integer array si__Ptr_type
trigger array st__Ptr_onDestroy
constant integer si__TimerPutsTriggerToSleep__TrigInfo=87
integer si__TimerPutsTriggerToSleep__TrigInfo_F=0
integer si__TimerPutsTriggerToSleep__TrigInfo_I=0
integer array si__TimerPutsTriggerToSleep__TrigInfo_V
region array s__TimerPutsTriggerToSleep__TrigInfo_Reg
trigger array s__TimerPutsTriggerToSleep__TrigInfo_Trig
trigger array s__TimerPutsTriggerToSleep__TrigInfo_TrigForCond
integer array s__TimerPutsTriggerToSleep__TrigInfo_toStage
triggeraction array s__TimerPutsTriggerToSleep__TrigInfo_Action
integer array s__TimerPutsTriggerToSleep__TrigInfo_TV
integer array s__TimerPutsTriggerToSleep__TrigInfo_prev
integer array s__TimerPutsTriggerToSleep__TrigInfo_post
integer s__TimerPutsTriggerToSleep__TrigInfo_last
boolean array s__TimerPutsTriggerToSleep__TrigInfo_GoThrough
hashtable s__TimerPutsTriggerToSleep__TrigInfo_HASH=InitHashtable()
constant integer si__TrigVariables=88
integer si__TrigVariables_F=0
integer si__TrigVariables_I=0
integer array si__TrigVariables_V
boolean s__TrigVariables_ThroughTimer=false
constant integer s__TrigVariables_HELD=0x28829022
integer array s__TrigVariables_NextGlobalTV
integer array s__TrigVariables_Stage
integer array s__TrigVariables_NextStage
trigger array s__TrigVariables_CurrentTrigger
eventid array s__TrigVariables_EventId
timer array s__TrigVariables_t
integer array s__TrigVariables_UserData
boolean array s__TrigVariables_Destructable
integer array s__TrigVariables_LearnedSkillLevel
string array s__TrigVariables_EventPlayerChatString
string array s__TrigVariables_EventPlayerChatStringMatched
real array s__TrigVariables_OrderPointX
real array s__TrigVariables_OrderPointY
real array s__TrigVariables_SpellTargetX
real array s__TrigVariables_SpellTargetY
unit array s__TrigVariables_TriggerUnit
unit array s__TrigVariables_Attacker
unit array s__TrigVariables_AttackedUnit
unit array s__TrigVariables_BuyingUnit
unit array s__TrigVariables_CancelledStructure
unit array s__TrigVariables_SpellAbilityUnit
unit array s__TrigVariables_ConstructingStructure
unit array s__TrigVariables_ConstructedStructure
unit array s__TrigVariables_DecayingUnit
unit array s__TrigVariables_DyingUnit
unit array s__TrigVariables_EnteringUnit
unit array s__TrigVariables_ManipulatingUnit
unit array s__TrigVariables_KillingUnit
unit array s__TrigVariables_LearningUnit
unit array s__TrigVariables_LeavingUnit
unit array s__TrigVariables_LevelingUnit
unit array s__TrigVariables_LoadedUnit
unit array s__TrigVariables_OrderedUnit
unit array s__TrigVariables_ChangingUnit
unit array s__TrigVariables_ResearchingUnit
unit array s__TrigVariables_RevivableUnit
unit array s__TrigVariables_RevivingUnit
unit array s__TrigVariables_SellingUnit
unit array s__TrigVariables_SoldUnit
unit array s__TrigVariables_SummonedUnit
unit array s__TrigVariables_SummoningUnit
unit array s__TrigVariables_OrderTargetUnit
unit array s__TrigVariables_SpellTargetUnit
unit array s__TrigVariables_EventTargetUnit
unit array s__TrigVariables_TrainedUnit
unit array s__TrigVariables_TransportUnit
unit array s__TrigVariables_DetectedUnit
unit array s__TrigVariables_Rescuer
unitstate array s__TrigVariables_EventUnitState
playerstate array s__TrigVariables_EventPlayerState
gamestate array s__TrigVariables_EventGameState
integer array s__TrigVariables_TrainedUnitType
integer array s__TrigVariables_IssuedOrderId
destructable array s__TrigVariables_DyingDestructable
destructable array s__TrigVariables_OrderTargetDestructable
destructable array s__TrigVariables_SpellTargetDestructable
item array s__TrigVariables_ManipulatedItem
item array s__TrigVariables_SoldItem
item array s__TrigVariables_OrderTargetItem
item array s__TrigVariables_SpellTargetItem
integer array s__TrigVariables_Researched
integer array s__TrigVariables_SpellAbilityId
integer array s__TrigVariables_LearnedSkill
player array s__TrigVariables_ChangingUnitPrevOwner
player array s__TrigVariables_TriggerPlayer
player array s__TrigVariables_EventDetectingPlayer
player array s__TrigVariables_WinningPlayer
dialog array s__TrigVariables_ClickedDialog
button array s__TrigVariables_ClickedButton
timer array s__TrigVariables_ExpiredTimer
real array s__TrigVariables_EventDamage
unit array s__TrigVariables_EventDamageSource
region array s__TrigVariables_TriggeringRegion
timer s__TrigVariables_TimerForExecuteTrigger=CreateTimer()
trigger array s__TrigVariables_RegisteredTrigger
integer s__TrigVariables_RegisteredCnt=0
trigger s__TrigVariables_LastRgstTrig=null
boolean s__TrigVariables_RgstSeparately=false
hashtable s__TrigVariables_RgstHASH=InitHashtable()
integer array s__TrigVariables_last
integer s__TrigVariables_HiEveryone=0
integer s__TrigVariables_thisForVoid=0
trigger s__TrigVariables_trigForVoid=CreateTrigger()
constant integer s__TrigVariables_arraySize=500
constant integer s__TrigVariables_offset=s__TrigVariables_arraySize+2
constant integer s__TrigVariables_offsetplayer=s__TrigVariables_offset*0
constant integer s__TrigVariables_offsetforce=s__TrigVariables_offset*1
constant integer s__TrigVariables_offsetgroup=s__TrigVariables_offset*2
constant integer s__TrigVariables_offsetitem=s__TrigVariables_offset*3
constant integer s__TrigVariables_offseteffect=s__TrigVariables_offset*4
constant integer s__TrigVariables_offsettimer=s__TrigVariables_offset*5
constant integer s__TrigVariables_offsetunit=s__TrigVariables_offset*6
constant integer s__TrigVariables_offsetlocation=s__TrigVariables_offset*7
constant integer s__TrigVariables_offsetlightning=s__TrigVariables_offset*8
constant integer s__TrigVariables_offsetinteger=s__TrigVariables_offset*9
constant integer s__TrigVariables_offsetreal=s__TrigVariables_offset*10
constant integer s__TrigVariables_offsetboolean=s__TrigVariables_offset*11
constant integer s__TrigVariables_offsettexttag=s__TrigVariables_offset*12
constant integer s__TrigVariables_offsetstring=s__TrigVariables_offset*13
constant integer s__TrigVariables_offsetSize=s__TrigVariables_offset*14
constant hashtable s__TrigVariables_HashMain=InitHashtable()
constant boolean s__TrigVariables_autoRemoveforce=true
constant boolean s__TrigVariables_autoRemovegroup=true
constant boolean s__TrigVariables_autoRemoveeffect=true
constant boolean s__TrigVariables_autoRemovelocation=true
constant boolean s__TrigVariables_autoRemovelightning=true
constant boolean s__TrigVariables_tempdebugunit=true
integer s__TrigVariables_thisTemp=0
integer array s__TrigVariables_player
integer array s__TrigVariables_lastSetplayer
constant hashtable s__TrigVariables_Hashplayer=InitHashtable()
integer array s__TrigVariables_force
integer array s__TrigVariables_lastSetforce
constant hashtable s__TrigVariables_Hashforce=InitHashtable()
integer array s__TrigVariables_group
integer array s__TrigVariables_lastSetgroup
constant hashtable s__TrigVariables_Hashgroup=InitHashtable()
integer array s__TrigVariables_item
integer array s__TrigVariables_lastSetitem
constant hashtable s__TrigVariables_Hashitem=InitHashtable()
integer array s__TrigVariables_effect
integer array s__TrigVariables_lastSeteffect
constant hashtable s__TrigVariables_Hasheffect=InitHashtable()
integer array s__TrigVariables_timer
integer array s__TrigVariables_lastSettimer
constant hashtable s__TrigVariables_Hashtimer=InitHashtable()
integer array s__TrigVariables_unit
integer array s__TrigVariables_lastSetunit
constant hashtable s__TrigVariables_Hashunit=InitHashtable()
integer array s__TrigVariables_location
integer array s__TrigVariables_lastSetlocation
constant hashtable s__TrigVariables_Hashlocation=InitHashtable()
integer array s__TrigVariables_lightning
integer array s__TrigVariables_lastSetlightning
constant hashtable s__TrigVariables_Hashlightning=InitHashtable()
integer array s__TrigVariables_integer
integer array s__TrigVariables_lastSetinteger
constant hashtable s__TrigVariables_Hashinteger=InitHashtable()
integer array s__TrigVariables_real
integer array s__TrigVariables_lastSetreal
constant hashtable s__TrigVariables_Hashreal=InitHashtable()
integer array s__TrigVariables_boolean
integer array s__TrigVariables_lastSetboolean
constant hashtable s__TrigVariables_Hashboolean=InitHashtable()
integer array s__TrigVariables_texttag
integer array s__TrigVariables_lastSettexttag
constant hashtable s__TrigVariables_Hashtexttag=InitHashtable()
integer array s__TrigVariables_string
integer array s__TrigVariables_lastSetstring
constant hashtable s__TrigVariables_Hashstring=InitHashtable()
boolean array s__TrigVariables_INUSE_Avar
constant integer s__TrigVariables_A=1
constant integer s__TrigVariables_B=2
constant integer s__TrigVariables_C=3
constant integer s__TrigVariables_D=4
constant integer s__TrigVariables_E=5
constant integer s__TrigVariables_F=6
integer array s__TrigVariables_booleansA
integer array s__TrigVariables_booleansB
integer array s__TrigVariables_booleansC
integer array s__TrigVariables_booleansD
integer array s__TrigVariables_booleansE
integer array s__TrigVariables_booleansF
integer array s__TrigVariables_integersA
integer array s__TrigVariables_integersB
integer array s__TrigVariables_integersC
integer array s__TrigVariables_integersD
integer array s__TrigVariables_integersE
integer array s__TrigVariables_integersF
integer array s__TrigVariables_locationsA
integer array s__TrigVariables_locationsB
integer array s__TrigVariables_locationsC
integer array s__TrigVariables_locationsD
integer array s__TrigVariables_locationsE
integer array s__TrigVariables_locationsF
integer array s__TrigVariables_lightningsA
integer array s__TrigVariables_lightningsB
integer array s__TrigVariables_lightningsC
integer array s__TrigVariables_lightningsD
integer array s__TrigVariables_lightningsE
integer array s__TrigVariables_lightningsF
integer array s__TrigVariables_realsA
integer array s__TrigVariables_realsB
integer array s__TrigVariables_realsC
integer array s__TrigVariables_realsD
integer array s__TrigVariables_realsE
integer array s__TrigVariables_realsF
integer array s__TrigVariables_unitsA
integer array s__TrigVariables_unitsB
integer array s__TrigVariables_unitsC
integer array s__TrigVariables_unitsD
integer array s__TrigVariables_unitsE
integer array s__TrigVariables_unitsF
integer array s__TrigVariables_effectsA
integer array s__TrigVariables_effectsB
integer array s__TrigVariables_effectsC
integer array s__TrigVariables_effectsD
integer array s__TrigVariables_effectsE
integer array s__TrigVariables_effectsF
integer array s__TrigVariables_playersA
integer array s__TrigVariables_playersB
integer array s__TrigVariables_playersC
integer array s__TrigVariables_playersD
integer array s__TrigVariables_playersE
integer array s__TrigVariables_playersF
integer array s__TrigVariables_forcesA
integer array s__TrigVariables_forcesB
integer array s__TrigVariables_forcesC
integer array s__TrigVariables_forcesD
integer array s__TrigVariables_forcesE
integer array s__TrigVariables_forcesF
integer array s__TrigVariables_groupsA
integer array s__TrigVariables_groupsB
integer array s__TrigVariables_groupsC
integer array s__TrigVariables_groupsD
integer array s__TrigVariables_groupsE
integer array s__TrigVariables_groupsF
integer array s__TrigVariables_itemsA
integer array s__TrigVariables_itemsB
integer array s__TrigVariables_itemsC
integer array s__TrigVariables_itemsD
integer array s__TrigVariables_itemsE
integer array s__TrigVariables_itemsF
integer array s__TrigVariables_timersA
integer array s__TrigVariables_timersB
integer array s__TrigVariables_timersC
integer array s__TrigVariables_timersD
integer array s__TrigVariables_timersE
integer array s__TrigVariables_timersF
integer s__TrigVariables_Body=0
integer s__TrigVariables_Copy=0
constant integer si__BytePtr=89
constant integer si__IntPtr=90
constant integer si__RealPtr=91
constant integer si__PtrPtr=92
constant integer si__CommandButtonData=93
constant integer si__GameUI=94
constant integer si__CommandButton=95
constant integer si__EndGameHook___MemoryBlock=96
integer s__EndGameHook___MemoryBlock_pHead
integer s__EndGameHook___MemoryBlock_size
constant integer si__EndGameHook___AssemblyWriter=97
integer si__EndGameHook___AssemblyWriter_F=0
integer si__EndGameHook___AssemblyWriter_I=0
integer array si__EndGameHook___AssemblyWriter_V
integer array s__EndGameHook___AssemblyWriter_pCursor
constant integer si__SpecialEffectColor___MemoryBlock=98
integer s__SpecialEffectColor___MemoryBlock_pHead
integer s__SpecialEffectColor___MemoryBlock_size
constant integer si__playerforCall=99
constant integer si__forceforCall=100
constant integer si__groupforCall=101
constant integer si__itemforCall=102
constant integer si__effectforCall=103
constant integer si__timerforCall=104
constant integer si__unitforCall=105
constant integer si__locationforCall=106
constant integer si__lightningforCall=107
constant integer si__integerforCall=108
constant integer si__realforCall=109
constant integer si__booleanforCall=110
constant integer si__texttagforCall=111
constant integer si__stringforCall=112
constant integer si__FXCURVEDASH=113
integer si__FXCURVEDASH_F=0
integer si__FXCURVEDASH_I=0
integer array si__FXCURVEDASH_V
unit array s__FXCURVEDASH_Caster
real array s__FXCURVEDASH_X1
real array s__FXCURVEDASH_Y1
real array s__FXCURVEDASH_X2
real array s__FXCURVEDASH_Y2
real array s__FXCURVEDASH_X3
real array s__FXCURVEDASH_Y3
real array s__FXCURVEDASH_X4
real array s__FXCURVEDASH_Y4
real array s__FXCURVEDASH_Time
integer s__FXCURVEDASH_CFXLast=0
integer s__FXCURVEDASH_CFXCount=0
boolean array s__FXCURVEDASH_CFXexists
timer array s__FXCURVEDASH_CFXtimer
integer array s__FXCURVEDASH_CFXhandle
real array s__FXCURVEDASH_CFXelapsed
real array s__FXCURVEDASH_CFXtimeout
integer array s__FXCURVEDASH_Stage
real array s__MouseX
real array s__MouseY
integer array s__TimerUtils__data
timer array s__TimerUtils__tT
trigger array s__s__TrigVariables_tEventId
trigger array s__s__TrigVariables_tCopyByEventId
trigger array s__s__TrigVariables_tEmptyTrigVars
trigger st__TimerPutsTriggerToSleep__TrigInfo_onDestroy
trigger st__TimerPutsTriggerToSleep__TrigInfo_create
trigger st__TimerPutsTriggerToSleep__TrigInfo_destroy
trigger st__TrigVariables_ExecuteTrigger
trigger st__TrigVariables_onDestroy
trigger st__TrigVariables_DeleteAllTriggers
trigger st__TrigVariables_setVoid
trigger st__TrigVariables_LVforCreate
trigger st__TrigVariables_Setplayer
trigger st__TrigVariables_Getplayer
trigger st__TrigVariables_Setforce
trigger st__TrigVariables_Getforce
trigger st__TrigVariables_Setgroup
trigger st__TrigVariables_Getgroup
trigger st__TrigVariables_Setitem
trigger st__TrigVariables_Getitem
trigger st__TrigVariables_Seteffect
trigger st__TrigVariables_Geteffect
trigger st__TrigVariables_Settimer
trigger st__TrigVariables_Gettimer
trigger st__TrigVariables_Setunit
trigger st__TrigVariables_Getunit
trigger st__TrigVariables_Setlocation
trigger st__TrigVariables_Getlocation
trigger st__TrigVariables_Setlightning
trigger st__TrigVariables_Getlightning
trigger st__TrigVariables_Setinteger
trigger st__TrigVariables_Getinteger
trigger st__TrigVariables_Setreal
trigger st__TrigVariables_Getreal
trigger st__TrigVariables_Setboolean
trigger st__TrigVariables_Getboolean
trigger st__TrigVariables_Settexttag
trigger st__TrigVariables_Gettexttag
trigger st__TrigVariables_Setstring
trigger st__TrigVariables_Getstring
trigger st__TrigVariables_FlushAvars
trigger st__TrigVariables_destroy
trigger st__FXCURVEDASH__get_Elapsed
trigger st__FXCURVEDASH_Stop
trigger array st___prototype2
trigger array st___prototype47
real f__result_real
integer f__arg_integer1
integer f__arg_integer2
player f__arg_player1
force f__arg_force1
group f__arg_group1
item f__arg_item1
effect f__arg_effect1
timer f__arg_timer1
unit f__arg_unit1
location f__arg_location1
lightning f__arg_lightning1
real f__arg_real1
boolean f__arg_boolean1
texttag f__arg_texttag1
string f__arg_string1
integer f__arg_this
integer f__result_integer
player f__result_player
force f__result_force
group f__result_group
item f__result_item
effect f__result_effect
timer f__result_timer
unit f__result_unit
location f__result_location
lightning f__result_lightning
boolean f__result_boolean
texttag f__result_texttag
string f__result_string
endglobals
native DzFrameHideInterface takes nothing returns nothing
native DzFrameEditBlackBorders takes real upperHeight,real bottomHeight returns nothing
native DzFrameGetPortrait takes nothing returns integer
native DzFrameGetMinimap takes nothing returns integer
native DzFrameGetCommandBarButton takes integer row,integer column returns integer
native DzFrameGetHeroBarButton takes integer buttonId returns integer
native DzFrameGetHeroHPBar takes integer buttonId returns integer
native DzFrameGetHeroManaBar takes integer buttonId returns integer
native DzFrameGetItemBarButton takes integer buttonId returns integer
native DzFrameGetMinimapButton takes integer buttonId returns integer
native DzFrameGetUpperButtonBarButton takes integer buttonId returns integer
native DzFrameGetTooltip takes nothing returns integer
native DzFrameGetChatMessage takes nothing returns integer
native DzFrameGetUnitMessage takes nothing returns integer
native DzFrameGetTopMessage takes nothing returns integer
native DzGetColor takes integer a,integer r,integer g,integer b returns integer
native DzFrameSetUpdateCallback takes string func returns nothing
native DzFrameSetUpdateCallbackByCode takes code funcHandle returns nothing
native DzFrameShow takes integer frame,boolean enable returns nothing
native DzCreateFrame takes string frame,integer parent,integer id returns integer
native DzCreateSimpleFrame takes string frame,integer parent,integer id returns integer
native DzDestroyFrame takes integer frame returns nothing
native DzLoadToc takes string fileName returns nothing
native DzFrameSetPoint takes integer frame,integer point,integer relativeFrame,integer relativePoint,real x,real y returns nothing
native DzFrameSetAbsolutePoint takes integer frame,integer point,real x,real y returns nothing
native DzFrameClearAllPoints takes integer frame returns nothing
native DzFrameSetEnable takes integer name,boolean enable returns nothing
native DzFrameSetScript takes integer frame,integer eventId,string func,boolean sync returns nothing
native DzFrameSetScriptByCode takes integer frame,integer eventId,code funcHandle,boolean sync returns nothing
native DzGetTriggerUIEventPlayer takes nothing returns player
native DzGetTriggerUIEventFrame takes nothing returns integer
native DzFrameFindByName takes string name,integer id returns integer
native DzSimpleFrameFindByName takes string name,integer id returns integer
native DzSimpleFontStringFindByName takes string name,integer id returns integer
native DzSimpleTextureFindByName takes string name,integer id returns integer
native DzGetGameUI takes nothing returns integer
native DzClickFrame takes integer frame returns nothing
native DzSetCustomFovFix takes real value returns nothing
native DzEnableWideScreen takes boolean enable returns nothing
native DzFrameSetText takes integer frame,string text returns nothing
native DzFrameGetText takes integer frame returns string
native DzFrameSetTextSizeLimit takes integer frame,integer size returns nothing
native DzFrameGetTextSizeLimit takes integer frame returns integer
native DzFrameSetTextColor takes integer frame,integer color returns nothing
native DzGetMouseFocus takes nothing returns integer
native DzFrameSetAllPoints takes integer frame,integer relativeFrame returns boolean
native DzFrameSetFocus takes integer frame,boolean enable returns boolean
native DzFrameSetModel takes integer frame,string modelFile,integer modelType,integer flag returns nothing
native DzFrameGetEnable takes integer frame returns boolean
native DzFrameSetAlpha takes integer frame,integer alpha returns nothing
native DzFrameGetAlpha takes integer frame returns integer
native DzFrameSetAnimate takes integer frame,integer animId,boolean autocast returns nothing
native DzFrameSetAnimateOffset takes integer frame,real offset returns nothing
native DzFrameSetTexture takes integer frame,string texture,integer flag returns nothing
native DzFrameSetScale takes integer frame,real scale returns nothing
native DzFrameSetTooltip takes integer frame,integer tooltip returns nothing
native DzFrameCageMouse takes integer frame,boolean enable returns nothing
native DzFrameGetValue takes integer frame returns real
native DzFrameSetMinMaxValue takes integer frame,real minValue,real maxValue returns nothing
native DzFrameSetStepValue takes integer frame,real step returns nothing
native DzFrameSetValue takes integer frame,real value returns nothing
native DzFrameSetSize takes integer frame,real w,real h returns nothing
native DzCreateFrameByTagName takes string frameType,string name,integer parent,string template,integer id returns integer
native DzFrameSetVertexColor takes integer frame,integer color returns nothing
native DzFrameSetPriority takes integer frame,integer priority returns nothing
native DzFrameSetParent takes integer frame,integer parent returns nothing
native DzFrameGetHeight takes integer frame returns real
native DzFrameSetFont takes integer frame,string fileName,real height,integer flag returns nothing
native DzFrameGetParent takes integer frame returns integer
native DzFrameSetTextAlignment takes integer frame,integer align returns nothing
native DzFrameGetName takes integer frame returns string
native DzGetMouseTerrainX takes nothing returns real
native DzGetMouseTerrainY takes nothing returns real
native DzGetMouseTerrainZ takes nothing returns real
native DzIsMouseOverUI takes nothing returns boolean
native DzGetMouseX takes nothing returns integer
native DzGetMouseY takes nothing returns integer
native DzGetMouseXRelative takes nothing returns integer
native DzGetMouseYRelative takes nothing returns integer
native DzSetMousePos takes integer x,integer y returns nothing
native DzTriggerRegisterMouseEvent takes trigger trig,integer btn,integer status,boolean sync,string func returns nothing
native DzTriggerRegisterMouseEventByCode takes trigger trig,integer btn,integer status,boolean sync,code funcHandle returns nothing
native DzTriggerRegisterKeyEvent takes trigger trig,integer key,integer status,boolean sync,string func returns nothing
native DzTriggerRegisterKeyEventByCode takes trigger trig,integer key,integer status,boolean sync,code funcHandle returns nothing
native DzTriggerRegisterMouseWheelEvent takes trigger trig,boolean sync,string func returns nothing
native DzTriggerRegisterMouseWheelEventByCode takes trigger trig,boolean sync,code funcHandle returns nothing
native DzTriggerRegisterMouseMoveEvent takes trigger trig,boolean sync,string func returns nothing
native DzTriggerRegisterMouseMoveEventByCode takes trigger trig,boolean sync,code funcHandle returns nothing
native DzGetTriggerKey takes nothing returns integer
native DzGetWheelDelta takes nothing returns integer
native DzIsKeyDown takes integer iKey returns boolean
native DzGetTriggerKeyPlayer takes nothing returns player
native DzGetWindowWidth takes nothing returns integer
native DzGetWindowHeight takes nothing returns integer
native DzGetWindowX takes nothing returns integer
native DzGetWindowY takes nothing returns integer
native DzTriggerRegisterWindowResizeEvent takes trigger trig,boolean sync,string func returns nothing
native DzTriggerRegisterWindowResizeEventByCode takes trigger trig,boolean sync,code funcHandle returns nothing
native DzIsWindowActive takes nothing returns boolean
native DzDestructablePosition takes destructable d,real x,real y returns nothing
native DzSetUnitPosition takes unit whichUnit,real x,real y returns nothing
native DzExecuteFunc takes string funcName returns nothing
native DzGetUnitUnderMouse takes nothing returns unit
native DzSetUnitTexture takes unit whichUnit,string path,integer texId returns nothing
native DzSetMemory takes integer address,real value returns nothing
native DzSetUnitID takes unit whichUnit,integer id returns nothing
native DzSetUnitModel takes unit whichUnit,string path returns nothing
native DzSetWar3MapMap takes string map returns nothing
native DzGetLocale takes nothing returns string
native DzTriggerRegisterSyncData takes trigger trig,string prefix,boolean server returns nothing
native DzSyncData takes string prefix,string data returns nothing
native DzGetTriggerSyncData takes nothing returns string
native DzGetTriggerSyncPlayer takes nothing returns player
native EXGetUnitAbility takes unit u,integer abilcode returns ability
native EXGetUnitAbilityByIndex takes unit u,integer index returns ability
native EXGetAbilityId takes ability abil returns integer
native EXGetAbilityState takes ability abil,integer state_type returns real
native EXSetAbilityState takes ability abil,integer state_type,real value returns boolean
native EXGetAbilityDataReal takes ability abil,integer level,integer data_type returns real
native EXSetAbilityDataReal takes ability abil,integer level,integer data_type,real value returns boolean
native EXGetAbilityDataInteger takes ability abil,integer level,integer data_type returns integer
native EXSetAbilityDataInteger takes ability abil,integer level,integer data_type,integer value returns boolean
native EXGetAbilityDataString takes ability abil,integer level,integer data_type returns string
native EXSetAbilityDataString takes ability abil,integer level,integer data_type,string value returns boolean
native EXSetAbilityAEmeDataA takes ability abil,integer unitid returns boolean
native EXGetBuffDataString takes integer buffcode,integer data_type returns string
native EXSetBuffDataString takes integer buffcode,integer data_type,string value returns boolean
native EXGetAbilityString takes integer abilcode,integer level,integer data_type returns string
native EXSetAbilityString takes integer abilcode,integer level,integer data_type,string value returns boolean
native EXDisplayChat takes player p,integer chat_recipient,string message returns nothing
native EXSetEffectXY takes effect e,real x,real y returns nothing
native EXSetEffectZ takes effect e,real z returns nothing
native EXGetEffectX takes effect e returns real
native EXGetEffectY takes effect e returns real
native EXGetEffectZ takes effect e returns real
native EXSetEffectSize takes effect e,real size returns nothing
native EXGetEffectSize takes effect e returns real
native EXEffectMatRotateX takes effect e,real angle returns nothing
native EXEffectMatRotateY takes effect e,real angle returns nothing
native EXEffectMatRotateZ takes effect e,real angle returns nothing
native EXEffectMatScale takes effect e,real x,real y,real z returns nothing
native EXEffectMatReset takes effect e returns nothing
native EXSetEffectSpeed takes effect e,real speed returns nothing
native EXSetEventDamage takes real amount returns boolean
native EXGetEventDamageData takes integer edd_type returns integer
native EXGetUnitString takes integer unitcode,integer data_type returns string
native EXSetUnitString takes integer unitcode,integer data_type,string value returns boolean
native EXGetUnitReal takes integer unitcode,integer data_type returns real
native EXSetUnitReal takes integer unitcode,integer data_type,real value returns boolean
native EXGetUnitInteger takes integer unitcode,integer data_type returns integer
native EXSetUnitInteger takes integer unitcode,integer data_type,integer value returns boolean
native EXGetUnitArrayString takes integer unitcode,integer data_type,integer index returns string
native EXSetUnitArrayString takes integer unitcode,integer data_type,integer index,string value returns boolean
native EXPauseUnit takes unit u,boolean flag returns nothing
native EXSetUnitCollisionType takes boolean enable,unit u,integer t returns nothing
native EXSetUnitMoveType takes unit u,integer t returns nothing
native EXSetUnitFacing takes unit u,real angle returns nothing
native BitOr takes integer x,integer y returns integer
native BitAnd takes integer x,integer y returns integer
native BitXor takes integer x,integer y returns integer
native BitShiftL takes integer x,integer y returns integer
native BitShiftR takes integer x,integer y returns integer
native JNI2R takes integer i returns real
native JNR2I takes real r returns integer
native JNWriteLog takes string str returns nothing
native JNWriteLogReal takes real r returns nothing
native JNGetLocalDateTime takes nothing returns string
native JNGetLocalUnixTime takes nothing returns integer
native JNGetMaxAttackSpeed takes nothing returns real
native JNSetMaxAttackSpeed takes real speed returns nothing
native IsReplayMode takes nothing returns boolean
native IsHostPlayer takes nothing returns boolean
native JNGetSyncDelay takes nothing returns integer
native JNSetSyncDelay takes integer delay returns nothing
native JNGetConnectionState takes nothing returns integer
native JNProcessStart takes string fileName,string arguments returns boolean
native JNGetModuleHandle takes string moduleName returns integer
native JNFindModuleHandle takes integer offset,integer signature returns integer
native JNMemoryGetByte takes integer offset returns integer
native JNMemorySetByte takes integer offset,integer value returns nothing
native JNMemoryGetInteger takes integer offset returns integer
native JNMemorySetInteger takes integer offset,integer value returns nothing
native JNMemoryGetReal takes integer offset returns real
native JNMemorySetReal takes integer offset,real value returns nothing
native JNMemoryGetString takes integer offset,integer length returns string
native JNMemorySetString takes integer offset,string value returns nothing
native JNProcCall takes integer callConv,integer address,hashtable params returns boolean
native JNUse takes nothing returns boolean
native JNServerTime takes string Format returns string
native JNServerUnixTime takes nothing returns integer
native JNServerPluginVersion takes nothing returns integer
native JNOpenBrowser takes string Address returns nothing
native JNCheckNameHack takes string UserId returns boolean
native JNSetLog takes string MapId,string UserId,string SecretKey,string Character,string Version,string Loging returns string
native JNSetLogUseType takes string MapId,string UserId,string SecretKey,string Character,string Version,string Loging,string LogType returns string
native JNMapServerLog takes string MapId,string SecretKey,string Version,string Loging returns string
native JNMapServerLogUseType takes string MapId,string SecretKey,string Version,string Loging,string LogType returns string
native JNPublicMapServerLog takes string MapId,string SecretKey,string Version,string Loging returns string
native JNUseUserRoleItemInfo takes string MapId,string SecretKey,string UserId,string ItemName returns string
native JNScreenShotReg takes string MapId,string SecretKey,string UserId,string Character,string Loging returns boolean
native JNPublicScreenShotReg takes string MapId,string SecretKey,string UserId,string Character,string Tag,string Loging returns boolean
native JNReplayReg takes string MapId,string SecretKey,string UserId,string Character,string Loging returns nothing
native JNPushReg takes string MapId returns nothing
native JNGetPushMessage takes nothing returns string
native JNDailySave takes string MapId,string UserId,string SecretKey,string Character,string DailyType returns string
native JNDailyCheckToday takes string MapId,string UserId,string SecretKey,string Character,string DailyType returns string
native JNDailyCheckTodayList takes string MapId,string UserId,string SecretKey,string Character,string DailyType returns string
native JNDailyCountWeek takes string MapId,string UserId,string SecretKey,string Character,string DailyType,string WeekDay returns string
native JNDailyCountWeekList takes string MapId,string UserId,string SecretKey,string Character,string DailyType,string WeekDay returns string
native JNDailyCountMonth takes string MapId,string UserId,string SecretKey,string Character,string DailyType returns string
native JNDailyCountMonthList takes string MapId,string UserId,string SecretKey,string Character,string DailyType returns string
native JNObjectScoreInit takes string MapId,string SecretKey,string UserId,string Character returns integer
native JNObjectScoreSave takes string MapId,string SecretKey,string UserId,string Character returns string
native JNObjectScoreGet takes string UserId,string Field returns integer
native JNObjectScoreAdd takes string UserId,string Field,integer Value returns nothing
native JNObjectScoreSet takes string UserId,string Field,integer Value returns nothing
native JNSetSaveCode takes string MapId,string UserId,string SecretKey,string Character,string Code returns string
native JNGetLoadCode takes string MapId,string UserId,string SecretKey,string Character returns string
native JNRPGGetCharacterCount takes string MapId,string UserId,string SecretKey returns integer
native JNRPGGetCharacterNameByIndex takes string UserId,integer Index returns string
native JNObjectCharacterSave takes string MapId,string UserId,string SecretKey,string Character returns string
native JNObjectCharacterInit takes string MapId,string UserId,string SecretKey,string Character returns integer
native JNObjectCharacterResetCharacter takes string UserId returns nothing
native JNObjectCharacterServerConnectCheck takes nothing returns boolean
native JNObjectCharacterPopGlobalMessage takes nothing returns string
native JNObjectCharacterPopGlobalMessageFormat takes string Format returns string
native JNObjectCharacterSendGlobalMessage takes string message returns nothing
native JNObjectCharacterRemoveField takes string Userid,string Field returns nothing
native JNObjectCharacterClearField takes string UserId returns nothing
native JNObjectCharacterSetInt takes string UserId,string Field,integer Value returns nothing
native JNObjectCharacterGetInt takes string UserId,string Field returns integer
native JNObjectCharacterSetReal takes string UserId,string Field,real Value returns nothing
native JNObjectCharacterGetReal takes string UserId,string Field returns real
native JNObjectCharacterSetString takes string UserId,string Field,string Value returns nothing
native JNObjectCharacterGetString takes string UserId,string Field returns string
native JNObjectCharacterSetBoolean takes string UserId,string Field,boolean Value returns nothing
native JNObjectCharacterGetBoolean takes string UserId,string Field returns boolean
native JNObjectCharacterGetCharacterCount takes string MapId,string UserId,string SecretKey returns integer
native JNObjectCharacterGetCharacterNameByIndex takes string UserId,integer Index returns string
native JNObjectUserSave takes string MapId,string UserId,string SecretKey,string Character returns string
native JNObjectUserInit takes string MapId,string Userid,string SecretKey,string Character returns integer
native JNObjectUserResetCharacter takes string UserId returns nothing
native JNObjectUserRemoveField takes string UserId,string Field returns nothing
native JNObjectUserClearField takes string UserId returns nothing
native JNObjectUserSetInt takes string UserId,string Field,integer Value returns nothing
native JNObjectUserGetInt takes string UserId,string Field returns integer
native JNObjectUserSetReal takes string UserId,string Field,real Value returns nothing
native JNObjectUserGetReal takes string UserId,string Field returns real
native JNObjectUserSetString takes string UserId,string Field,string Value returns nothing
native JNObjectUserGetString takes string UserId,string Field returns string
native JNObjectUserSetBoolean takes string UserId,string Field,boolean Value returns nothing
native JNObjectUserGetBoolean takes string UserId,string Field returns boolean
native JNObjectMapInit takes string MapId,string SecretKey returns integer
native JNObjectMapGetInt takes string Field returns integer
native JNObjectMapGetReal takes string Field returns real
native JNObjectMapGetString takes string Field returns string
native JNObjectMapGetBoolean takes string Field returns boolean
native JNStopwatchCreate takes nothing returns integer
native JNStopwatchStart takes integer id returns nothing
native JNStopwatchPause takes integer id returns nothing
native JNStopwatchReset takes integer id returns nothing
native JNStopwatchDestroy takes integer id returns nothing
native JNStopwatchElapsedMS takes integer id returns integer
native JNStopwatchElapsedSecond takes integer id returns integer
native JNStopwatchElapsedMinute takes integer id returns integer
native JNStopwatchElapsedHour takes integer id returns integer
native JNStopwatchTick takes integer id returns real
native JNStringPos takes string str,string sub returns integer
native JNStringReverse takes string str returns string
native JNStringTrim takes string str returns string
native JNStringTrimStart takes string str returns string
native JNStringTrimEnd takes string str returns string
native JNStringRegex takes string str,string regex,integer index returns string
native JNStringCount takes string str,string sub returns integer
native JNStringContains takes string str,string sub returns boolean
native JNStringSplit takes string str,string sub,integer index returns string
native JNStringReplace takes string str,string old,string newstr returns string
native JNStringInsert takes string str,integer index,string val returns string
native JNStringSub takes string str,integer start,integer length returns string
native JNStringLength takes string str returns integer
native JNStringEncrypt takes string plainText,string key returns string
native JNStringDecrypt takes string cipherText,string key returns string
native JNStringFromBase64 takes string str returns string
native JNStringToBase64 takes string str returns string
native JNObjectUserInit2 takes string MapId,string UserId,string SecretKey,string Character returns integer
native EXExecuteScript takes string script returns string
native UnitAlive takes unit id returns boolean
function sc__FXCURVEDASH__get_Elapsed takes integer this returns real
return s__FXCURVEDASH_CFXelapsed[this]
endfunction
function sc__FXCURVEDASH_Stop takes integer this returns nothing
set f__arg_this=this
call TriggerEvaluate(st__FXCURVEDASH_Stop)
endfunction
function s__FXCURVEDASH__allocate takes nothing returns integer
local integer this=si__FXCURVEDASH_F
if(this!=0)then
set si__FXCURVEDASH_F=si__FXCURVEDASH_V[this]
else
set si__FXCURVEDASH_I=si__FXCURVEDASH_I+1
set this=si__FXCURVEDASH_I
endif
if(this>8190)then
return 0
endif
set si__FXCURVEDASH_V[this]=-1
return this
endfunction
function s__FXCURVEDASH_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__FXCURVEDASH_V[this]!=-1)then
return
endif
set si__FXCURVEDASH_V[this]=si__FXCURVEDASH_F
set si__FXCURVEDASH_F=this
endfunction
function s__EndGameHook___AssemblyWriter__allocate takes nothing returns integer
local integer this=si__EndGameHook___AssemblyWriter_F
if(this!=0)then
set si__EndGameHook___AssemblyWriter_F=si__EndGameHook___AssemblyWriter_V[this]
else
set si__EndGameHook___AssemblyWriter_I=si__EndGameHook___AssemblyWriter_I+1
set this=si__EndGameHook___AssemblyWriter_I
endif
if(this>8190)then
return 0
endif
set si__EndGameHook___AssemblyWriter_V[this]=-1
return this
endfunction
function s__EndGameHook___AssemblyWriter_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__EndGameHook___AssemblyWriter_V[this]!=-1)then
return
endif
set si__EndGameHook___AssemblyWriter_V[this]=si__EndGameHook___AssemblyWriter_F
set si__EndGameHook___AssemblyWriter_F=this
endfunction
function s__CustomStun__IN_INDEXER__allocate takes nothing returns integer
local integer this=si__CustomStun__IN_INDEXER_F
if(this!=0)then
set si__CustomStun__IN_INDEXER_F=si__CustomStun__IN_INDEXER_V[this]
else
set si__CustomStun__IN_INDEXER_I=si__CustomStun__IN_INDEXER_I+1
set this=si__CustomStun__IN_INDEXER_I
endif
if(this>8190)then
return 0
endif
set si__CustomStun__IN_INDEXER_V[this]=-1
return this
endfunction
function s__CustomStun__IN_INDEXER_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__CustomStun__IN_INDEXER_V[this]!=-1)then
return
endif
set si__CustomStun__IN_INDEXER_V[this]=si__CustomStun__IN_INDEXER_F
set si__CustomStun__IN_INDEXER_F=this
endfunction
function sc__TrigVariables_ExecuteTrigger takes integer this returns nothing
set f__arg_this=this
call TriggerEvaluate(st__TrigVariables_ExecuteTrigger)
endfunction
function sc__TrigVariables_onDestroy takes integer this returns nothing
set f__arg_this=this
call TriggerEvaluate(st__TrigVariables_onDestroy)
endfunction
function sc__TrigVariables_DeleteAllTriggers takes integer this returns nothing
set f__arg_this=this
call TriggerEvaluate(st__TrigVariables_DeleteAllTriggers)
endfunction
function sc__TrigVariables_setVoid takes integer this returns nothing
set s__TrigVariables_thisForVoid=this
call TriggerEvaluate(s__TrigVariables_trigForVoid)
endfunction
function sc__TrigVariables_LVforCreate takes integer this returns nothing
set s__TrigVariables_player[this]=this
set s__TrigVariables_force[this]=this
set s__TrigVariables_group[this]=this
set s__TrigVariables_item[this]=this
set s__TrigVariables_effect[this]=this
set s__TrigVariables_timer[this]=this
set s__TrigVariables_unit[this]=this
set s__TrigVariables_location[this]=this
set s__TrigVariables_lightning[this]=this
set s__TrigVariables_integer[this]=this
set s__TrigVariables_real[this]=this
set s__TrigVariables_boolean[this]=this
endfunction
function sc__TrigVariables_Setplayer takes integer this,integer i,player x returns nothing
set f__arg_this=this
set f__arg_integer1=i
set f__arg_player1=x
call TriggerEvaluate(st__TrigVariables_Setplayer)
endfunction
function sc__TrigVariables_Getplayer takes integer this,integer i returns player
return LoadPlayerHandle(s__TrigVariables_Hashplayer,0,this*s__TrigVariables_arraySize+i)
endfunction
function sc__TrigVariables_Setforce takes integer this,integer i,force x returns nothing
set f__arg_this=this
set f__arg_integer1=i
set f__arg_force1=x
call TriggerEvaluate(st__TrigVariables_Setforce)
endfunction
function sc__TrigVariables_Getforce takes integer this,integer i returns force
return LoadForceHandle(s__TrigVariables_Hashforce,0,this*s__TrigVariables_arraySize+i)
endfunction
function sc__TrigVariables_Setgroup takes integer this,integer i,group x returns nothing
set f__arg_this=this
set f__arg_integer1=i
set f__arg_group1=x
call TriggerEvaluate(st__TrigVariables_Setgroup)
endfunction
function sc__TrigVariables_Getgroup takes integer this,integer i returns group
return LoadGroupHandle(s__TrigVariables_Hashgroup,0,this*s__TrigVariables_arraySize+i)
endfunction
function sc__TrigVariables_Setitem takes integer this,integer i,item x returns nothing
set f__arg_this=this
set f__arg_integer1=i
set f__arg_item1=x
call TriggerEvaluate(st__TrigVariables_Setitem)
endfunction
function sc__TrigVariables_Getitem takes integer this,integer i returns item
return LoadItemHandle(s__TrigVariables_Hashitem,0,this*s__TrigVariables_arraySize+i)
endfunction
function sc__TrigVariables_Seteffect takes integer this,integer i,effect x returns nothing
set f__arg_this=this
set f__arg_integer1=i
set f__arg_effect1=x
call TriggerEvaluate(st__TrigVariables_Seteffect)
endfunction
function sc__TrigVariables_Geteffect takes integer this,integer i returns effect
return LoadEffectHandle(s__TrigVariables_Hasheffect,0,this*s__TrigVariables_arraySize+i)
endfunction
function sc__TrigVariables_Settimer takes integer this,integer i,timer x returns nothing
set f__arg_this=this
set f__arg_integer1=i
set f__arg_timer1=x
call TriggerEvaluate(st__TrigVariables_Settimer)
endfunction
function sc__TrigVariables_Gettimer takes integer this,integer i returns timer
return LoadTimerHandle(s__TrigVariables_Hashtimer,0,this*s__TrigVariables_arraySize+i)
endfunction
function sc__TrigVariables_Setunit takes integer this,integer i,unit x returns nothing
set f__arg_this=this
set f__arg_integer1=i
set f__arg_unit1=x
call TriggerEvaluate(st__TrigVariables_Setunit)
endfunction
function sc__TrigVariables_Getunit takes integer this,integer i returns unit
return LoadUnitHandle(s__TrigVariables_Hashunit,0,this*s__TrigVariables_arraySize+i)
endfunction
function sc__TrigVariables_Setlocation takes integer this,integer i,location x returns nothing
set f__arg_this=this
set f__arg_integer1=i
set f__arg_location1=x
call TriggerEvaluate(st__TrigVariables_Setlocation)
endfunction
function sc__TrigVariables_Getlocation takes integer this,integer i returns location
return LoadLocationHandle(s__TrigVariables_Hashlocation,0,this*s__TrigVariables_arraySize+i)
endfunction
function sc__TrigVariables_Setlightning takes integer this,integer i,lightning x returns nothing
set f__arg_this=this
set f__arg_integer1=i
set f__arg_lightning1=x
call TriggerEvaluate(st__TrigVariables_Setlightning)
endfunction
function sc__TrigVariables_Getlightning takes integer this,integer i returns lightning
return LoadLightningHandle(s__TrigVariables_Hashlightning,0,this*s__TrigVariables_arraySize+i)
endfunction
function sc__TrigVariables_Setinteger takes integer this,integer i,integer x returns nothing
set f__arg_this=this
set f__arg_integer1=i
set f__arg_integer2=x
call TriggerEvaluate(st__TrigVariables_Setinteger)
endfunction
function sc__TrigVariables_Getinteger takes integer this,integer i returns integer
return LoadInteger(s__TrigVariables_Hashinteger,0,this*s__TrigVariables_arraySize+i)
endfunction
function sc__TrigVariables_Setreal takes integer this,integer i,real x returns nothing
set f__arg_this=this
set f__arg_integer1=i
set f__arg_real1=x
call TriggerEvaluate(st__TrigVariables_Setreal)
endfunction
function sc__TrigVariables_Getreal takes integer this,integer i returns real
return LoadReal(s__TrigVariables_Hashreal,0,this*s__TrigVariables_arraySize+i)
endfunction
function sc__TrigVariables_Setboolean takes integer this,integer i,boolean x returns nothing
set f__arg_this=this
set f__arg_integer1=i
set f__arg_boolean1=x
call TriggerEvaluate(st__TrigVariables_Setboolean)
endfunction
function sc__TrigVariables_Getboolean takes integer this,integer i returns boolean
return LoadBoolean(s__TrigVariables_Hashboolean,0,this*s__TrigVariables_arraySize+i)
endfunction
function sc__TrigVariables_Settexttag takes integer this,integer i,texttag x returns nothing
set f__arg_this=this
set f__arg_integer1=i
set f__arg_texttag1=x
call TriggerEvaluate(st__TrigVariables_Settexttag)
endfunction
function sc__TrigVariables_Gettexttag takes integer this,integer i returns texttag
return LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,this*s__TrigVariables_arraySize+i)
endfunction
function sc__TrigVariables_Setstring takes integer this,integer i,string x returns nothing
set f__arg_this=this
set f__arg_integer1=i
set f__arg_string1=x
call TriggerEvaluate(st__TrigVariables_Setstring)
endfunction
function sc__TrigVariables_Getstring takes integer this,integer i returns string
return LoadStr(s__TrigVariables_Hashstring,0,this*s__TrigVariables_arraySize+i)
endfunction
function sc__TrigVariables_FlushAvars takes integer this returns nothing
set f__arg_this=this
call TriggerEvaluate(st__TrigVariables_FlushAvars)
endfunction
function s__TrigVariables__allocate takes nothing returns integer
local integer this=si__TrigVariables_F
if(this!=0)then
set si__TrigVariables_F=si__TrigVariables_V[this]
else
set si__TrigVariables_I=si__TrigVariables_I+1
set this=si__TrigVariables_I
endif
if(this>8190)then
return 0
endif
set s__TrigVariables_NextGlobalTV[this]=s__TrigVariables_HELD
set s__TrigVariables_Stage[this]=s__TrigVariables_HELD
set s__TrigVariables_last[this]=0
set s__TrigVariables_lastSetplayer[this]=-1
set s__TrigVariables_lastSetforce[this]=-1
set s__TrigVariables_lastSetgroup[this]=-1
set s__TrigVariables_lastSetitem[this]=-1
set s__TrigVariables_lastSeteffect[this]=-1
set s__TrigVariables_lastSettimer[this]=-1
set s__TrigVariables_lastSetunit[this]=-1
set s__TrigVariables_lastSetlocation[this]=-1
set s__TrigVariables_lastSetlightning[this]=-1
set s__TrigVariables_lastSetinteger[this]=-1
set s__TrigVariables_lastSetreal[this]=-1
set s__TrigVariables_lastSetboolean[this]=-1
set s__TrigVariables_lastSettexttag[this]=-1
set s__TrigVariables_lastSetstring[this]=-1
set s__TrigVariables_INUSE_Avar[this]=false
set si__TrigVariables_V[this]=-1
return this
endfunction
function sc__TrigVariables_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TrigVariables_V[this]!=-1)then
return
endif
set f__arg_this=this
call TriggerEvaluate(st__TrigVariables_onDestroy)
set si__TrigVariables_V[this]=si__TrigVariables_F
set si__TrigVariables_F=this
endfunction
function sc__TimerPutsTriggerToSleep__TrigInfo_onDestroy takes integer this returns nothing
call TriggerRemoveAction(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],s__TimerPutsTriggerToSleep__TrigInfo_Action[this])
if s__TimerPutsTriggerToSleep__TrigInfo_Reg[this]!=null then
call RemoveRegion(s__TimerPutsTriggerToSleep__TrigInfo_Reg[this])
endif
call RemoveSavedInteger(s__TimerPutsTriggerToSleep__TrigInfo_HASH,0,GetHandleId(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this]))
call DestroyTrigger(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this])
call DestroyTrigger(s__TimerPutsTriggerToSleep__TrigInfo_TrigForCond[this])
set s__TimerPutsTriggerToSleep__TrigInfo_post[s__TimerPutsTriggerToSleep__TrigInfo_prev[this]]=s__TimerPutsTriggerToSleep__TrigInfo_post[this]
set s__TimerPutsTriggerToSleep__TrigInfo_prev[s__TimerPutsTriggerToSleep__TrigInfo_post[this]]=s__TimerPutsTriggerToSleep__TrigInfo_prev[this]
set s__TimerPutsTriggerToSleep__TrigInfo_prev[this]=0
set s__TimerPutsTriggerToSleep__TrigInfo_post[this]=0
endfunction
function sc__TimerPutsTriggerToSleep__TrigInfo_create takes nothing returns integer
call TriggerEvaluate(st__TimerPutsTriggerToSleep__TrigInfo_create)
return f__result_integer
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo__allocate takes nothing returns integer
local integer this=si__TimerPutsTriggerToSleep__TrigInfo_F
if(this!=0)then
set si__TimerPutsTriggerToSleep__TrigInfo_F=si__TimerPutsTriggerToSleep__TrigInfo_V[this]
else
set si__TimerPutsTriggerToSleep__TrigInfo_I=si__TimerPutsTriggerToSleep__TrigInfo_I+1
set this=si__TimerPutsTriggerToSleep__TrigInfo_I
endif
if(this>8190)then
return 0
endif
set s__TimerPutsTriggerToSleep__TrigInfo_Reg[this]=null
set s__TimerPutsTriggerToSleep__TrigInfo_Trig[this]=CreateTrigger()
set s__TimerPutsTriggerToSleep__TrigInfo_TrigForCond[this]=CreateTrigger()
set si__TimerPutsTriggerToSleep__TrigInfo_V[this]=-1
return this
endfunction
function sc__TimerPutsTriggerToSleep__TrigInfo_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TimerPutsTriggerToSleep__TrigInfo_V[this]!=-1)then
return
endif
set f__arg_this=this
call TriggerEvaluate(st__TimerPutsTriggerToSleep__TrigInfo_onDestroy)
set si__TimerPutsTriggerToSleep__TrigInfo_V[this]=si__TimerPutsTriggerToSleep__TrigInfo_F
set si__TimerPutsTriggerToSleep__TrigInfo_F=this
endfunction
function sc__Ptr_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__Ptr_V[this]!=-1)then
return
endif
set f__arg_this=this
call TriggerEvaluate(st__Ptr_onDestroy[si__Ptr_type[this]])
set si__Ptr_V[this]=si__Ptr_F
set si__Ptr_F=this
endfunction
function s__TPTTSLinkedVariablesArray__atimersF__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__atimersF_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__atimersF_F=si__TPTTSLinkedVariablesArray__atimersF_V[this]
else
set si__TPTTSLinkedVariablesArray__atimersF_I=si__TPTTSLinkedVariablesArray__atimersF_I+51
set this=si__TPTTSLinkedVariablesArray__atimersF_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__atimersF_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__atimersF_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__atimersF_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__atimersF_V[this]=si__TPTTSLinkedVariablesArray__atimersF_F
set si__TPTTSLinkedVariablesArray__atimersF_F=this
endfunction
function s__TPTTSLinkedVariablesArray__atimersE__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__atimersE_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__atimersE_F=si__TPTTSLinkedVariablesArray__atimersE_V[this]
else
set si__TPTTSLinkedVariablesArray__atimersE_I=si__TPTTSLinkedVariablesArray__atimersE_I+51
set this=si__TPTTSLinkedVariablesArray__atimersE_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__atimersE_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__atimersE_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__atimersE_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__atimersE_V[this]=si__TPTTSLinkedVariablesArray__atimersE_F
set si__TPTTSLinkedVariablesArray__atimersE_F=this
endfunction
function s__TPTTSLinkedVariablesArray__atimersD__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__atimersD_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__atimersD_F=si__TPTTSLinkedVariablesArray__atimersD_V[this]
else
set si__TPTTSLinkedVariablesArray__atimersD_I=si__TPTTSLinkedVariablesArray__atimersD_I+51
set this=si__TPTTSLinkedVariablesArray__atimersD_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__atimersD_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__atimersD_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__atimersD_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__atimersD_V[this]=si__TPTTSLinkedVariablesArray__atimersD_F
set si__TPTTSLinkedVariablesArray__atimersD_F=this
endfunction
function s__TPTTSLinkedVariablesArray__atimersC__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__atimersC_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__atimersC_F=si__TPTTSLinkedVariablesArray__atimersC_V[this]
else
set si__TPTTSLinkedVariablesArray__atimersC_I=si__TPTTSLinkedVariablesArray__atimersC_I+51
set this=si__TPTTSLinkedVariablesArray__atimersC_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__atimersC_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__atimersC_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__atimersC_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__atimersC_V[this]=si__TPTTSLinkedVariablesArray__atimersC_F
set si__TPTTSLinkedVariablesArray__atimersC_F=this
endfunction
function s__TPTTSLinkedVariablesArray__atimersB__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__atimersB_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__atimersB_F=si__TPTTSLinkedVariablesArray__atimersB_V[this]
else
set si__TPTTSLinkedVariablesArray__atimersB_I=si__TPTTSLinkedVariablesArray__atimersB_I+51
set this=si__TPTTSLinkedVariablesArray__atimersB_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__atimersB_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__atimersB_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__atimersB_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__atimersB_V[this]=si__TPTTSLinkedVariablesArray__atimersB_F
set si__TPTTSLinkedVariablesArray__atimersB_F=this
endfunction
function s__TPTTSLinkedVariablesArray__atimersA__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__atimersA_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__atimersA_F=si__TPTTSLinkedVariablesArray__atimersA_V[this]
else
set si__TPTTSLinkedVariablesArray__atimersA_I=si__TPTTSLinkedVariablesArray__atimersA_I+51
set this=si__TPTTSLinkedVariablesArray__atimersA_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__atimersA_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__atimersA_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__atimersA_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__atimersA_V[this]=si__TPTTSLinkedVariablesArray__atimersA_F
set si__TPTTSLinkedVariablesArray__atimersA_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aitemsF__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aitemsF_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aitemsF_F=si__TPTTSLinkedVariablesArray__aitemsF_V[this]
else
set si__TPTTSLinkedVariablesArray__aitemsF_I=si__TPTTSLinkedVariablesArray__aitemsF_I+51
set this=si__TPTTSLinkedVariablesArray__aitemsF_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aitemsF_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aitemsF_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aitemsF_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aitemsF_V[this]=si__TPTTSLinkedVariablesArray__aitemsF_F
set si__TPTTSLinkedVariablesArray__aitemsF_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aitemsE__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aitemsE_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aitemsE_F=si__TPTTSLinkedVariablesArray__aitemsE_V[this]
else
set si__TPTTSLinkedVariablesArray__aitemsE_I=si__TPTTSLinkedVariablesArray__aitemsE_I+51
set this=si__TPTTSLinkedVariablesArray__aitemsE_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aitemsE_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aitemsE_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aitemsE_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aitemsE_V[this]=si__TPTTSLinkedVariablesArray__aitemsE_F
set si__TPTTSLinkedVariablesArray__aitemsE_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aitemsD__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aitemsD_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aitemsD_F=si__TPTTSLinkedVariablesArray__aitemsD_V[this]
else
set si__TPTTSLinkedVariablesArray__aitemsD_I=si__TPTTSLinkedVariablesArray__aitemsD_I+51
set this=si__TPTTSLinkedVariablesArray__aitemsD_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aitemsD_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aitemsD_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aitemsD_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aitemsD_V[this]=si__TPTTSLinkedVariablesArray__aitemsD_F
set si__TPTTSLinkedVariablesArray__aitemsD_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aitemsC__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aitemsC_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aitemsC_F=si__TPTTSLinkedVariablesArray__aitemsC_V[this]
else
set si__TPTTSLinkedVariablesArray__aitemsC_I=si__TPTTSLinkedVariablesArray__aitemsC_I+51
set this=si__TPTTSLinkedVariablesArray__aitemsC_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aitemsC_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aitemsC_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aitemsC_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aitemsC_V[this]=si__TPTTSLinkedVariablesArray__aitemsC_F
set si__TPTTSLinkedVariablesArray__aitemsC_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aitemsB__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aitemsB_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aitemsB_F=si__TPTTSLinkedVariablesArray__aitemsB_V[this]
else
set si__TPTTSLinkedVariablesArray__aitemsB_I=si__TPTTSLinkedVariablesArray__aitemsB_I+51
set this=si__TPTTSLinkedVariablesArray__aitemsB_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aitemsB_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aitemsB_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aitemsB_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aitemsB_V[this]=si__TPTTSLinkedVariablesArray__aitemsB_F
set si__TPTTSLinkedVariablesArray__aitemsB_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aitemsA__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aitemsA_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aitemsA_F=si__TPTTSLinkedVariablesArray__aitemsA_V[this]
else
set si__TPTTSLinkedVariablesArray__aitemsA_I=si__TPTTSLinkedVariablesArray__aitemsA_I+51
set this=si__TPTTSLinkedVariablesArray__aitemsA_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aitemsA_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aitemsA_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aitemsA_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aitemsA_V[this]=si__TPTTSLinkedVariablesArray__aitemsA_F
set si__TPTTSLinkedVariablesArray__aitemsA_F=this
endfunction
function s__TPTTSLinkedVariablesArray__agroupsF__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__agroupsF_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__agroupsF_F=si__TPTTSLinkedVariablesArray__agroupsF_V[this]
else
set si__TPTTSLinkedVariablesArray__agroupsF_I=si__TPTTSLinkedVariablesArray__agroupsF_I+51
set this=si__TPTTSLinkedVariablesArray__agroupsF_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__agroupsF_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__agroupsF_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__agroupsF_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__agroupsF_V[this]=si__TPTTSLinkedVariablesArray__agroupsF_F
set si__TPTTSLinkedVariablesArray__agroupsF_F=this
endfunction
function s__TPTTSLinkedVariablesArray__agroupsE__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__agroupsE_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__agroupsE_F=si__TPTTSLinkedVariablesArray__agroupsE_V[this]
else
set si__TPTTSLinkedVariablesArray__agroupsE_I=si__TPTTSLinkedVariablesArray__agroupsE_I+51
set this=si__TPTTSLinkedVariablesArray__agroupsE_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__agroupsE_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__agroupsE_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__agroupsE_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__agroupsE_V[this]=si__TPTTSLinkedVariablesArray__agroupsE_F
set si__TPTTSLinkedVariablesArray__agroupsE_F=this
endfunction
function s__TPTTSLinkedVariablesArray__agroupsD__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__agroupsD_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__agroupsD_F=si__TPTTSLinkedVariablesArray__agroupsD_V[this]
else
set si__TPTTSLinkedVariablesArray__agroupsD_I=si__TPTTSLinkedVariablesArray__agroupsD_I+51
set this=si__TPTTSLinkedVariablesArray__agroupsD_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__agroupsD_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__agroupsD_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__agroupsD_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__agroupsD_V[this]=si__TPTTSLinkedVariablesArray__agroupsD_F
set si__TPTTSLinkedVariablesArray__agroupsD_F=this
endfunction
function s__TPTTSLinkedVariablesArray__agroupsC__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__agroupsC_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__agroupsC_F=si__TPTTSLinkedVariablesArray__agroupsC_V[this]
else
set si__TPTTSLinkedVariablesArray__agroupsC_I=si__TPTTSLinkedVariablesArray__agroupsC_I+51
set this=si__TPTTSLinkedVariablesArray__agroupsC_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__agroupsC_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__agroupsC_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__agroupsC_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__agroupsC_V[this]=si__TPTTSLinkedVariablesArray__agroupsC_F
set si__TPTTSLinkedVariablesArray__agroupsC_F=this
endfunction
function s__TPTTSLinkedVariablesArray__agroupsB__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__agroupsB_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__agroupsB_F=si__TPTTSLinkedVariablesArray__agroupsB_V[this]
else
set si__TPTTSLinkedVariablesArray__agroupsB_I=si__TPTTSLinkedVariablesArray__agroupsB_I+51
set this=si__TPTTSLinkedVariablesArray__agroupsB_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__agroupsB_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__agroupsB_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__agroupsB_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__agroupsB_V[this]=si__TPTTSLinkedVariablesArray__agroupsB_F
set si__TPTTSLinkedVariablesArray__agroupsB_F=this
endfunction
function s__TPTTSLinkedVariablesArray__agroupsA__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__agroupsA_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__agroupsA_F=si__TPTTSLinkedVariablesArray__agroupsA_V[this]
else
set si__TPTTSLinkedVariablesArray__agroupsA_I=si__TPTTSLinkedVariablesArray__agroupsA_I+51
set this=si__TPTTSLinkedVariablesArray__agroupsA_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__agroupsA_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__agroupsA_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__agroupsA_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__agroupsA_V[this]=si__TPTTSLinkedVariablesArray__agroupsA_F
set si__TPTTSLinkedVariablesArray__agroupsA_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aforcesF__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aforcesF_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aforcesF_F=si__TPTTSLinkedVariablesArray__aforcesF_V[this]
else
set si__TPTTSLinkedVariablesArray__aforcesF_I=si__TPTTSLinkedVariablesArray__aforcesF_I+51
set this=si__TPTTSLinkedVariablesArray__aforcesF_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aforcesF_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aforcesF_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aforcesF_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aforcesF_V[this]=si__TPTTSLinkedVariablesArray__aforcesF_F
set si__TPTTSLinkedVariablesArray__aforcesF_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aforcesE__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aforcesE_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aforcesE_F=si__TPTTSLinkedVariablesArray__aforcesE_V[this]
else
set si__TPTTSLinkedVariablesArray__aforcesE_I=si__TPTTSLinkedVariablesArray__aforcesE_I+51
set this=si__TPTTSLinkedVariablesArray__aforcesE_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aforcesE_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aforcesE_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aforcesE_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aforcesE_V[this]=si__TPTTSLinkedVariablesArray__aforcesE_F
set si__TPTTSLinkedVariablesArray__aforcesE_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aforcesD__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aforcesD_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aforcesD_F=si__TPTTSLinkedVariablesArray__aforcesD_V[this]
else
set si__TPTTSLinkedVariablesArray__aforcesD_I=si__TPTTSLinkedVariablesArray__aforcesD_I+51
set this=si__TPTTSLinkedVariablesArray__aforcesD_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aforcesD_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aforcesD_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aforcesD_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aforcesD_V[this]=si__TPTTSLinkedVariablesArray__aforcesD_F
set si__TPTTSLinkedVariablesArray__aforcesD_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aforcesC__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aforcesC_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aforcesC_F=si__TPTTSLinkedVariablesArray__aforcesC_V[this]
else
set si__TPTTSLinkedVariablesArray__aforcesC_I=si__TPTTSLinkedVariablesArray__aforcesC_I+51
set this=si__TPTTSLinkedVariablesArray__aforcesC_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aforcesC_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aforcesC_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aforcesC_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aforcesC_V[this]=si__TPTTSLinkedVariablesArray__aforcesC_F
set si__TPTTSLinkedVariablesArray__aforcesC_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aforcesB__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aforcesB_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aforcesB_F=si__TPTTSLinkedVariablesArray__aforcesB_V[this]
else
set si__TPTTSLinkedVariablesArray__aforcesB_I=si__TPTTSLinkedVariablesArray__aforcesB_I+51
set this=si__TPTTSLinkedVariablesArray__aforcesB_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aforcesB_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aforcesB_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aforcesB_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aforcesB_V[this]=si__TPTTSLinkedVariablesArray__aforcesB_F
set si__TPTTSLinkedVariablesArray__aforcesB_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aforcesA__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aforcesA_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aforcesA_F=si__TPTTSLinkedVariablesArray__aforcesA_V[this]
else
set si__TPTTSLinkedVariablesArray__aforcesA_I=si__TPTTSLinkedVariablesArray__aforcesA_I+51
set this=si__TPTTSLinkedVariablesArray__aforcesA_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aforcesA_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aforcesA_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aforcesA_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aforcesA_V[this]=si__TPTTSLinkedVariablesArray__aforcesA_F
set si__TPTTSLinkedVariablesArray__aforcesA_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aplayersF__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aplayersF_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aplayersF_F=si__TPTTSLinkedVariablesArray__aplayersF_V[this]
else
set si__TPTTSLinkedVariablesArray__aplayersF_I=si__TPTTSLinkedVariablesArray__aplayersF_I+51
set this=si__TPTTSLinkedVariablesArray__aplayersF_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aplayersF_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aplayersF_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aplayersF_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aplayersF_V[this]=si__TPTTSLinkedVariablesArray__aplayersF_F
set si__TPTTSLinkedVariablesArray__aplayersF_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aplayersE__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aplayersE_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aplayersE_F=si__TPTTSLinkedVariablesArray__aplayersE_V[this]
else
set si__TPTTSLinkedVariablesArray__aplayersE_I=si__TPTTSLinkedVariablesArray__aplayersE_I+51
set this=si__TPTTSLinkedVariablesArray__aplayersE_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aplayersE_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aplayersE_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aplayersE_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aplayersE_V[this]=si__TPTTSLinkedVariablesArray__aplayersE_F
set si__TPTTSLinkedVariablesArray__aplayersE_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aplayersD__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aplayersD_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aplayersD_F=si__TPTTSLinkedVariablesArray__aplayersD_V[this]
else
set si__TPTTSLinkedVariablesArray__aplayersD_I=si__TPTTSLinkedVariablesArray__aplayersD_I+51
set this=si__TPTTSLinkedVariablesArray__aplayersD_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aplayersD_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aplayersD_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aplayersD_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aplayersD_V[this]=si__TPTTSLinkedVariablesArray__aplayersD_F
set si__TPTTSLinkedVariablesArray__aplayersD_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aplayersC__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aplayersC_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aplayersC_F=si__TPTTSLinkedVariablesArray__aplayersC_V[this]
else
set si__TPTTSLinkedVariablesArray__aplayersC_I=si__TPTTSLinkedVariablesArray__aplayersC_I+51
set this=si__TPTTSLinkedVariablesArray__aplayersC_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aplayersC_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aplayersC_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aplayersC_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aplayersC_V[this]=si__TPTTSLinkedVariablesArray__aplayersC_F
set si__TPTTSLinkedVariablesArray__aplayersC_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aplayersB__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aplayersB_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aplayersB_F=si__TPTTSLinkedVariablesArray__aplayersB_V[this]
else
set si__TPTTSLinkedVariablesArray__aplayersB_I=si__TPTTSLinkedVariablesArray__aplayersB_I+51
set this=si__TPTTSLinkedVariablesArray__aplayersB_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aplayersB_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aplayersB_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aplayersB_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aplayersB_V[this]=si__TPTTSLinkedVariablesArray__aplayersB_F
set si__TPTTSLinkedVariablesArray__aplayersB_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aplayersA__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aplayersA_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aplayersA_F=si__TPTTSLinkedVariablesArray__aplayersA_V[this]
else
set si__TPTTSLinkedVariablesArray__aplayersA_I=si__TPTTSLinkedVariablesArray__aplayersA_I+51
set this=si__TPTTSLinkedVariablesArray__aplayersA_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aplayersA_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aplayersA_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aplayersA_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aplayersA_V[this]=si__TPTTSLinkedVariablesArray__aplayersA_F
set si__TPTTSLinkedVariablesArray__aplayersA_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aeffectsF__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aeffectsF_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aeffectsF_F=si__TPTTSLinkedVariablesArray__aeffectsF_V[this]
else
set si__TPTTSLinkedVariablesArray__aeffectsF_I=si__TPTTSLinkedVariablesArray__aeffectsF_I+51
set this=si__TPTTSLinkedVariablesArray__aeffectsF_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aeffectsF_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aeffectsF_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aeffectsF_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aeffectsF_V[this]=si__TPTTSLinkedVariablesArray__aeffectsF_F
set si__TPTTSLinkedVariablesArray__aeffectsF_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aeffectsE__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aeffectsE_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aeffectsE_F=si__TPTTSLinkedVariablesArray__aeffectsE_V[this]
else
set si__TPTTSLinkedVariablesArray__aeffectsE_I=si__TPTTSLinkedVariablesArray__aeffectsE_I+51
set this=si__TPTTSLinkedVariablesArray__aeffectsE_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aeffectsE_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aeffectsE_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aeffectsE_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aeffectsE_V[this]=si__TPTTSLinkedVariablesArray__aeffectsE_F
set si__TPTTSLinkedVariablesArray__aeffectsE_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aeffectsD__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aeffectsD_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aeffectsD_F=si__TPTTSLinkedVariablesArray__aeffectsD_V[this]
else
set si__TPTTSLinkedVariablesArray__aeffectsD_I=si__TPTTSLinkedVariablesArray__aeffectsD_I+51
set this=si__TPTTSLinkedVariablesArray__aeffectsD_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aeffectsD_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aeffectsD_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aeffectsD_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aeffectsD_V[this]=si__TPTTSLinkedVariablesArray__aeffectsD_F
set si__TPTTSLinkedVariablesArray__aeffectsD_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aeffectsC__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aeffectsC_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aeffectsC_F=si__TPTTSLinkedVariablesArray__aeffectsC_V[this]
else
set si__TPTTSLinkedVariablesArray__aeffectsC_I=si__TPTTSLinkedVariablesArray__aeffectsC_I+51
set this=si__TPTTSLinkedVariablesArray__aeffectsC_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aeffectsC_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aeffectsC_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aeffectsC_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aeffectsC_V[this]=si__TPTTSLinkedVariablesArray__aeffectsC_F
set si__TPTTSLinkedVariablesArray__aeffectsC_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aeffectsB__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aeffectsB_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aeffectsB_F=si__TPTTSLinkedVariablesArray__aeffectsB_V[this]
else
set si__TPTTSLinkedVariablesArray__aeffectsB_I=si__TPTTSLinkedVariablesArray__aeffectsB_I+51
set this=si__TPTTSLinkedVariablesArray__aeffectsB_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aeffectsB_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aeffectsB_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aeffectsB_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aeffectsB_V[this]=si__TPTTSLinkedVariablesArray__aeffectsB_F
set si__TPTTSLinkedVariablesArray__aeffectsB_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aeffectsA__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aeffectsA_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aeffectsA_F=si__TPTTSLinkedVariablesArray__aeffectsA_V[this]
else
set si__TPTTSLinkedVariablesArray__aeffectsA_I=si__TPTTSLinkedVariablesArray__aeffectsA_I+51
set this=si__TPTTSLinkedVariablesArray__aeffectsA_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aeffectsA_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aeffectsA_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aeffectsA_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aeffectsA_V[this]=si__TPTTSLinkedVariablesArray__aeffectsA_F
set si__TPTTSLinkedVariablesArray__aeffectsA_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aunitsF__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aunitsF_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aunitsF_F=si__TPTTSLinkedVariablesArray__aunitsF_V[this]
else
set si__TPTTSLinkedVariablesArray__aunitsF_I=si__TPTTSLinkedVariablesArray__aunitsF_I+51
set this=si__TPTTSLinkedVariablesArray__aunitsF_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aunitsF_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aunitsF_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aunitsF_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aunitsF_V[this]=si__TPTTSLinkedVariablesArray__aunitsF_F
set si__TPTTSLinkedVariablesArray__aunitsF_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aunitsE__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aunitsE_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aunitsE_F=si__TPTTSLinkedVariablesArray__aunitsE_V[this]
else
set si__TPTTSLinkedVariablesArray__aunitsE_I=si__TPTTSLinkedVariablesArray__aunitsE_I+51
set this=si__TPTTSLinkedVariablesArray__aunitsE_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aunitsE_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aunitsE_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aunitsE_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aunitsE_V[this]=si__TPTTSLinkedVariablesArray__aunitsE_F
set si__TPTTSLinkedVariablesArray__aunitsE_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aunitsD__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aunitsD_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aunitsD_F=si__TPTTSLinkedVariablesArray__aunitsD_V[this]
else
set si__TPTTSLinkedVariablesArray__aunitsD_I=si__TPTTSLinkedVariablesArray__aunitsD_I+51
set this=si__TPTTSLinkedVariablesArray__aunitsD_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aunitsD_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aunitsD_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aunitsD_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aunitsD_V[this]=si__TPTTSLinkedVariablesArray__aunitsD_F
set si__TPTTSLinkedVariablesArray__aunitsD_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aunitsC__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aunitsC_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aunitsC_F=si__TPTTSLinkedVariablesArray__aunitsC_V[this]
else
set si__TPTTSLinkedVariablesArray__aunitsC_I=si__TPTTSLinkedVariablesArray__aunitsC_I+51
set this=si__TPTTSLinkedVariablesArray__aunitsC_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aunitsC_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aunitsC_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aunitsC_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aunitsC_V[this]=si__TPTTSLinkedVariablesArray__aunitsC_F
set si__TPTTSLinkedVariablesArray__aunitsC_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aunitsB__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aunitsB_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aunitsB_F=si__TPTTSLinkedVariablesArray__aunitsB_V[this]
else
set si__TPTTSLinkedVariablesArray__aunitsB_I=si__TPTTSLinkedVariablesArray__aunitsB_I+51
set this=si__TPTTSLinkedVariablesArray__aunitsB_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aunitsB_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aunitsB_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aunitsB_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aunitsB_V[this]=si__TPTTSLinkedVariablesArray__aunitsB_F
set si__TPTTSLinkedVariablesArray__aunitsB_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aunitsA__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aunitsA_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aunitsA_F=si__TPTTSLinkedVariablesArray__aunitsA_V[this]
else
set si__TPTTSLinkedVariablesArray__aunitsA_I=si__TPTTSLinkedVariablesArray__aunitsA_I+51
set this=si__TPTTSLinkedVariablesArray__aunitsA_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aunitsA_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aunitsA_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aunitsA_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aunitsA_V[this]=si__TPTTSLinkedVariablesArray__aunitsA_F
set si__TPTTSLinkedVariablesArray__aunitsA_F=this
endfunction
function s__TPTTSLinkedVariablesArray__arealsF__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__arealsF_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__arealsF_F=si__TPTTSLinkedVariablesArray__arealsF_V[this]
else
set si__TPTTSLinkedVariablesArray__arealsF_I=si__TPTTSLinkedVariablesArray__arealsF_I+51
set this=si__TPTTSLinkedVariablesArray__arealsF_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__arealsF_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__arealsF_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__arealsF_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__arealsF_V[this]=si__TPTTSLinkedVariablesArray__arealsF_F
set si__TPTTSLinkedVariablesArray__arealsF_F=this
endfunction
function s__TPTTSLinkedVariablesArray__arealsE__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__arealsE_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__arealsE_F=si__TPTTSLinkedVariablesArray__arealsE_V[this]
else
set si__TPTTSLinkedVariablesArray__arealsE_I=si__TPTTSLinkedVariablesArray__arealsE_I+51
set this=si__TPTTSLinkedVariablesArray__arealsE_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__arealsE_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__arealsE_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__arealsE_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__arealsE_V[this]=si__TPTTSLinkedVariablesArray__arealsE_F
set si__TPTTSLinkedVariablesArray__arealsE_F=this
endfunction
function s__TPTTSLinkedVariablesArray__arealsD__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__arealsD_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__arealsD_F=si__TPTTSLinkedVariablesArray__arealsD_V[this]
else
set si__TPTTSLinkedVariablesArray__arealsD_I=si__TPTTSLinkedVariablesArray__arealsD_I+51
set this=si__TPTTSLinkedVariablesArray__arealsD_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__arealsD_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__arealsD_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__arealsD_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__arealsD_V[this]=si__TPTTSLinkedVariablesArray__arealsD_F
set si__TPTTSLinkedVariablesArray__arealsD_F=this
endfunction
function s__TPTTSLinkedVariablesArray__arealsC__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__arealsC_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__arealsC_F=si__TPTTSLinkedVariablesArray__arealsC_V[this]
else
set si__TPTTSLinkedVariablesArray__arealsC_I=si__TPTTSLinkedVariablesArray__arealsC_I+51
set this=si__TPTTSLinkedVariablesArray__arealsC_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__arealsC_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__arealsC_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__arealsC_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__arealsC_V[this]=si__TPTTSLinkedVariablesArray__arealsC_F
set si__TPTTSLinkedVariablesArray__arealsC_F=this
endfunction
function s__TPTTSLinkedVariablesArray__arealsB__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__arealsB_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__arealsB_F=si__TPTTSLinkedVariablesArray__arealsB_V[this]
else
set si__TPTTSLinkedVariablesArray__arealsB_I=si__TPTTSLinkedVariablesArray__arealsB_I+51
set this=si__TPTTSLinkedVariablesArray__arealsB_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__arealsB_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__arealsB_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__arealsB_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__arealsB_V[this]=si__TPTTSLinkedVariablesArray__arealsB_F
set si__TPTTSLinkedVariablesArray__arealsB_F=this
endfunction
function s__TPTTSLinkedVariablesArray__arealsA__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__arealsA_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__arealsA_F=si__TPTTSLinkedVariablesArray__arealsA_V[this]
else
set si__TPTTSLinkedVariablesArray__arealsA_I=si__TPTTSLinkedVariablesArray__arealsA_I+51
set this=si__TPTTSLinkedVariablesArray__arealsA_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__arealsA_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__arealsA_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__arealsA_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__arealsA_V[this]=si__TPTTSLinkedVariablesArray__arealsA_F
set si__TPTTSLinkedVariablesArray__arealsA_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aintegersF__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aintegersF_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aintegersF_F=si__TPTTSLinkedVariablesArray__aintegersF_V[this]
else
set si__TPTTSLinkedVariablesArray__aintegersF_I=si__TPTTSLinkedVariablesArray__aintegersF_I+51
set this=si__TPTTSLinkedVariablesArray__aintegersF_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aintegersF_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aintegersF_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aintegersF_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aintegersF_V[this]=si__TPTTSLinkedVariablesArray__aintegersF_F
set si__TPTTSLinkedVariablesArray__aintegersF_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aintegersE__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aintegersE_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aintegersE_F=si__TPTTSLinkedVariablesArray__aintegersE_V[this]
else
set si__TPTTSLinkedVariablesArray__aintegersE_I=si__TPTTSLinkedVariablesArray__aintegersE_I+51
set this=si__TPTTSLinkedVariablesArray__aintegersE_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aintegersE_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aintegersE_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aintegersE_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aintegersE_V[this]=si__TPTTSLinkedVariablesArray__aintegersE_F
set si__TPTTSLinkedVariablesArray__aintegersE_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aintegersD__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aintegersD_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aintegersD_F=si__TPTTSLinkedVariablesArray__aintegersD_V[this]
else
set si__TPTTSLinkedVariablesArray__aintegersD_I=si__TPTTSLinkedVariablesArray__aintegersD_I+51
set this=si__TPTTSLinkedVariablesArray__aintegersD_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aintegersD_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aintegersD_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aintegersD_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aintegersD_V[this]=si__TPTTSLinkedVariablesArray__aintegersD_F
set si__TPTTSLinkedVariablesArray__aintegersD_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aintegersC__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aintegersC_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aintegersC_F=si__TPTTSLinkedVariablesArray__aintegersC_V[this]
else
set si__TPTTSLinkedVariablesArray__aintegersC_I=si__TPTTSLinkedVariablesArray__aintegersC_I+51
set this=si__TPTTSLinkedVariablesArray__aintegersC_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aintegersC_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aintegersC_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aintegersC_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aintegersC_V[this]=si__TPTTSLinkedVariablesArray__aintegersC_F
set si__TPTTSLinkedVariablesArray__aintegersC_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aintegersB__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aintegersB_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aintegersB_F=si__TPTTSLinkedVariablesArray__aintegersB_V[this]
else
set si__TPTTSLinkedVariablesArray__aintegersB_I=si__TPTTSLinkedVariablesArray__aintegersB_I+51
set this=si__TPTTSLinkedVariablesArray__aintegersB_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aintegersB_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aintegersB_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aintegersB_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aintegersB_V[this]=si__TPTTSLinkedVariablesArray__aintegersB_F
set si__TPTTSLinkedVariablesArray__aintegersB_F=this
endfunction
function s__TPTTSLinkedVariablesArray__aintegersA__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__aintegersA_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__aintegersA_F=si__TPTTSLinkedVariablesArray__aintegersA_V[this]
else
set si__TPTTSLinkedVariablesArray__aintegersA_I=si__TPTTSLinkedVariablesArray__aintegersA_I+51
set this=si__TPTTSLinkedVariablesArray__aintegersA_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__aintegersA_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__aintegersA_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__aintegersA_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__aintegersA_V[this]=si__TPTTSLinkedVariablesArray__aintegersA_F
set si__TPTTSLinkedVariablesArray__aintegersA_F=this
endfunction
function s__TPTTSLinkedVariablesArray__abooleansF__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__abooleansF_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__abooleansF_F=si__TPTTSLinkedVariablesArray__abooleansF_V[this]
else
set si__TPTTSLinkedVariablesArray__abooleansF_I=si__TPTTSLinkedVariablesArray__abooleansF_I+51
set this=si__TPTTSLinkedVariablesArray__abooleansF_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__abooleansF_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__abooleansF_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__abooleansF_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__abooleansF_V[this]=si__TPTTSLinkedVariablesArray__abooleansF_F
set si__TPTTSLinkedVariablesArray__abooleansF_F=this
endfunction
function s__TPTTSLinkedVariablesArray__abooleansE__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__abooleansE_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__abooleansE_F=si__TPTTSLinkedVariablesArray__abooleansE_V[this]
else
set si__TPTTSLinkedVariablesArray__abooleansE_I=si__TPTTSLinkedVariablesArray__abooleansE_I+51
set this=si__TPTTSLinkedVariablesArray__abooleansE_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__abooleansE_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__abooleansE_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__abooleansE_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__abooleansE_V[this]=si__TPTTSLinkedVariablesArray__abooleansE_F
set si__TPTTSLinkedVariablesArray__abooleansE_F=this
endfunction
function s__TPTTSLinkedVariablesArray__abooleansD__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__abooleansD_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__abooleansD_F=si__TPTTSLinkedVariablesArray__abooleansD_V[this]
else
set si__TPTTSLinkedVariablesArray__abooleansD_I=si__TPTTSLinkedVariablesArray__abooleansD_I+51
set this=si__TPTTSLinkedVariablesArray__abooleansD_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__abooleansD_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__abooleansD_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__abooleansD_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__abooleansD_V[this]=si__TPTTSLinkedVariablesArray__abooleansD_F
set si__TPTTSLinkedVariablesArray__abooleansD_F=this
endfunction
function s__TPTTSLinkedVariablesArray__abooleansC__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__abooleansC_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__abooleansC_F=si__TPTTSLinkedVariablesArray__abooleansC_V[this]
else
set si__TPTTSLinkedVariablesArray__abooleansC_I=si__TPTTSLinkedVariablesArray__abooleansC_I+51
set this=si__TPTTSLinkedVariablesArray__abooleansC_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__abooleansC_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__abooleansC_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__abooleansC_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__abooleansC_V[this]=si__TPTTSLinkedVariablesArray__abooleansC_F
set si__TPTTSLinkedVariablesArray__abooleansC_F=this
endfunction
function s__TPTTSLinkedVariablesArray__abooleansB__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__abooleansB_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__abooleansB_F=si__TPTTSLinkedVariablesArray__abooleansB_V[this]
else
set si__TPTTSLinkedVariablesArray__abooleansB_I=si__TPTTSLinkedVariablesArray__abooleansB_I+51
set this=si__TPTTSLinkedVariablesArray__abooleansB_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__abooleansB_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__abooleansB_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__abooleansB_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__abooleansB_V[this]=si__TPTTSLinkedVariablesArray__abooleansB_F
set si__TPTTSLinkedVariablesArray__abooleansB_F=this
endfunction
function s__TPTTSLinkedVariablesArray__abooleansA__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__abooleansA_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__abooleansA_F=si__TPTTSLinkedVariablesArray__abooleansA_V[this]
else
set si__TPTTSLinkedVariablesArray__abooleansA_I=si__TPTTSLinkedVariablesArray__abooleansA_I+51
set this=si__TPTTSLinkedVariablesArray__abooleansA_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__abooleansA_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__abooleansA_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__abooleansA_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__abooleansA_V[this]=si__TPTTSLinkedVariablesArray__abooleansA_F
set si__TPTTSLinkedVariablesArray__abooleansA_F=this
endfunction
function s__TPTTSLinkedVariablesArray__alightningsF__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__alightningsF_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__alightningsF_F=si__TPTTSLinkedVariablesArray__alightningsF_V[this]
else
set si__TPTTSLinkedVariablesArray__alightningsF_I=si__TPTTSLinkedVariablesArray__alightningsF_I+51
set this=si__TPTTSLinkedVariablesArray__alightningsF_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__alightningsF_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__alightningsF_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__alightningsF_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__alightningsF_V[this]=si__TPTTSLinkedVariablesArray__alightningsF_F
set si__TPTTSLinkedVariablesArray__alightningsF_F=this
endfunction
function s__TPTTSLinkedVariablesArray__alightningsE__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__alightningsE_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__alightningsE_F=si__TPTTSLinkedVariablesArray__alightningsE_V[this]
else
set si__TPTTSLinkedVariablesArray__alightningsE_I=si__TPTTSLinkedVariablesArray__alightningsE_I+51
set this=si__TPTTSLinkedVariablesArray__alightningsE_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__alightningsE_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__alightningsE_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__alightningsE_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__alightningsE_V[this]=si__TPTTSLinkedVariablesArray__alightningsE_F
set si__TPTTSLinkedVariablesArray__alightningsE_F=this
endfunction
function s__TPTTSLinkedVariablesArray__alightningsD__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__alightningsD_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__alightningsD_F=si__TPTTSLinkedVariablesArray__alightningsD_V[this]
else
set si__TPTTSLinkedVariablesArray__alightningsD_I=si__TPTTSLinkedVariablesArray__alightningsD_I+51
set this=si__TPTTSLinkedVariablesArray__alightningsD_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__alightningsD_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__alightningsD_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__alightningsD_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__alightningsD_V[this]=si__TPTTSLinkedVariablesArray__alightningsD_F
set si__TPTTSLinkedVariablesArray__alightningsD_F=this
endfunction
function s__TPTTSLinkedVariablesArray__alightningsC__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__alightningsC_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__alightningsC_F=si__TPTTSLinkedVariablesArray__alightningsC_V[this]
else
set si__TPTTSLinkedVariablesArray__alightningsC_I=si__TPTTSLinkedVariablesArray__alightningsC_I+51
set this=si__TPTTSLinkedVariablesArray__alightningsC_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__alightningsC_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__alightningsC_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__alightningsC_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__alightningsC_V[this]=si__TPTTSLinkedVariablesArray__alightningsC_F
set si__TPTTSLinkedVariablesArray__alightningsC_F=this
endfunction
function s__TPTTSLinkedVariablesArray__alightningsB__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__alightningsB_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__alightningsB_F=si__TPTTSLinkedVariablesArray__alightningsB_V[this]
else
set si__TPTTSLinkedVariablesArray__alightningsB_I=si__TPTTSLinkedVariablesArray__alightningsB_I+51
set this=si__TPTTSLinkedVariablesArray__alightningsB_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__alightningsB_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__alightningsB_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__alightningsB_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__alightningsB_V[this]=si__TPTTSLinkedVariablesArray__alightningsB_F
set si__TPTTSLinkedVariablesArray__alightningsB_F=this
endfunction
function s__TPTTSLinkedVariablesArray__alightningsA__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__alightningsA_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__alightningsA_F=si__TPTTSLinkedVariablesArray__alightningsA_V[this]
else
set si__TPTTSLinkedVariablesArray__alightningsA_I=si__TPTTSLinkedVariablesArray__alightningsA_I+51
set this=si__TPTTSLinkedVariablesArray__alightningsA_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__alightningsA_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__alightningsA_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__alightningsA_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__alightningsA_V[this]=si__TPTTSLinkedVariablesArray__alightningsA_F
set si__TPTTSLinkedVariablesArray__alightningsA_F=this
endfunction
function s__TPTTSLinkedVariablesArray__alocationsF__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__alocationsF_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__alocationsF_F=si__TPTTSLinkedVariablesArray__alocationsF_V[this]
else
set si__TPTTSLinkedVariablesArray__alocationsF_I=si__TPTTSLinkedVariablesArray__alocationsF_I+51
set this=si__TPTTSLinkedVariablesArray__alocationsF_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__alocationsF_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__alocationsF_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__alocationsF_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__alocationsF_V[this]=si__TPTTSLinkedVariablesArray__alocationsF_F
set si__TPTTSLinkedVariablesArray__alocationsF_F=this
endfunction
function s__TPTTSLinkedVariablesArray__alocationsE__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__alocationsE_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__alocationsE_F=si__TPTTSLinkedVariablesArray__alocationsE_V[this]
else
set si__TPTTSLinkedVariablesArray__alocationsE_I=si__TPTTSLinkedVariablesArray__alocationsE_I+51
set this=si__TPTTSLinkedVariablesArray__alocationsE_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__alocationsE_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__alocationsE_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__alocationsE_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__alocationsE_V[this]=si__TPTTSLinkedVariablesArray__alocationsE_F
set si__TPTTSLinkedVariablesArray__alocationsE_F=this
endfunction
function s__TPTTSLinkedVariablesArray__alocationsD__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__alocationsD_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__alocationsD_F=si__TPTTSLinkedVariablesArray__alocationsD_V[this]
else
set si__TPTTSLinkedVariablesArray__alocationsD_I=si__TPTTSLinkedVariablesArray__alocationsD_I+51
set this=si__TPTTSLinkedVariablesArray__alocationsD_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__alocationsD_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__alocationsD_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__alocationsD_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__alocationsD_V[this]=si__TPTTSLinkedVariablesArray__alocationsD_F
set si__TPTTSLinkedVariablesArray__alocationsD_F=this
endfunction
function s__TPTTSLinkedVariablesArray__alocationsC__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__alocationsC_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__alocationsC_F=si__TPTTSLinkedVariablesArray__alocationsC_V[this]
else
set si__TPTTSLinkedVariablesArray__alocationsC_I=si__TPTTSLinkedVariablesArray__alocationsC_I+51
set this=si__TPTTSLinkedVariablesArray__alocationsC_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__alocationsC_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__alocationsC_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__alocationsC_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__alocationsC_V[this]=si__TPTTSLinkedVariablesArray__alocationsC_F
set si__TPTTSLinkedVariablesArray__alocationsC_F=this
endfunction
function s__TPTTSLinkedVariablesArray__alocationsB__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__alocationsB_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__alocationsB_F=si__TPTTSLinkedVariablesArray__alocationsB_V[this]
else
set si__TPTTSLinkedVariablesArray__alocationsB_I=si__TPTTSLinkedVariablesArray__alocationsB_I+51
set this=si__TPTTSLinkedVariablesArray__alocationsB_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__alocationsB_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__alocationsB_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__alocationsB_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__alocationsB_V[this]=si__TPTTSLinkedVariablesArray__alocationsB_F
set si__TPTTSLinkedVariablesArray__alocationsB_F=this
endfunction
function s__TPTTSLinkedVariablesArray__alocationsA__allocate takes nothing returns integer
local integer this=si__TPTTSLinkedVariablesArray__alocationsA_F
if(this!=0)then
set si__TPTTSLinkedVariablesArray__alocationsA_F=si__TPTTSLinkedVariablesArray__alocationsA_V[this]
else
set si__TPTTSLinkedVariablesArray__alocationsA_I=si__TPTTSLinkedVariablesArray__alocationsA_I+51
set this=si__TPTTSLinkedVariablesArray__alocationsA_I
endif
if(this>8140)then
return 0
endif
set si__TPTTSLinkedVariablesArray__alocationsA_V[this]=-1
return this
endfunction
function s__TPTTSLinkedVariablesArray__alocationsA_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TPTTSLinkedVariablesArray__alocationsA_V[this]!=-1)then
return
endif
set si__TPTTSLinkedVariablesArray__alocationsA_V[this]=si__TPTTSLinkedVariablesArray__alocationsA_F
set si__TPTTSLinkedVariablesArray__alocationsA_F=this
endfunction
function s__party__allocate takes nothing returns integer
local integer this=si__party_F
if(this!=0)then
set si__party_F=si__party_V[this]
else
set si__party_I=si__party_I+1
set this=si__party_I
endif
if(this>8190)then
return 0
endif
set si__party_V[this]=-1
return this
endfunction
function s__party_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__party_V[this]!=-1)then
return
endif
set si__party_V[this]=si__party_F
set si__party_F=this
endfunction
function s__CommandButton__allocate takes nothing returns integer
local integer kthis
local integer this=si__Ptr_F
if(this!=0)then
set si__Ptr_F=si__Ptr_V[this]
else
set si__Ptr_I=si__Ptr_I+1
set this=si__Ptr_I
endif
if(this>8190)then
return 0
endif
set si__Ptr_type[this]=95
set kthis=this
set si__Ptr_V[this]=-1
return this
endfunction
function s__BytePtr__allocate takes nothing returns integer
local integer kthis
local integer this=si__Ptr_F
if(this!=0)then
set si__Ptr_F=si__Ptr_V[this]
else
set si__Ptr_I=si__Ptr_I+1
set this=si__Ptr_I
endif
if(this>8190)then
return 0
endif
set si__Ptr_type[this]=89
set kthis=this
set si__Ptr_V[this]=-1
return this
endfunction
function s__IntPtr__allocate takes nothing returns integer
local integer kthis
local integer this=si__Ptr_F
if(this!=0)then
set si__Ptr_F=si__Ptr_V[this]
else
set si__Ptr_I=si__Ptr_I+1
set this=si__Ptr_I
endif
if(this>8190)then
return 0
endif
set si__Ptr_type[this]=90
set kthis=this
set si__Ptr_V[this]=-1
return this
endfunction
function s__RealPtr__allocate takes nothing returns integer
local integer kthis
local integer this=si__Ptr_F
if(this!=0)then
set si__Ptr_F=si__Ptr_V[this]
else
set si__Ptr_I=si__Ptr_I+1
set this=si__Ptr_I
endif
if(this>8190)then
return 0
endif
set si__Ptr_type[this]=91
set kthis=this
set si__Ptr_V[this]=-1
return this
endfunction
function s__PtrPtr__allocate takes nothing returns integer
local integer kthis
local integer this=si__Ptr_F
if(this!=0)then
set si__Ptr_F=si__Ptr_V[this]
else
set si__Ptr_I=si__Ptr_I+1
set this=si__Ptr_I
endif
if(this>8190)then
return 0
endif
set si__Ptr_type[this]=92
set kthis=this
set si__Ptr_V[this]=-1
return this
endfunction
function s__CommandButtonData__allocate takes nothing returns integer
local integer kthis
local integer this=si__Ptr_F
if(this!=0)then
set si__Ptr_F=si__Ptr_V[this]
else
set si__Ptr_I=si__Ptr_I+1
set this=si__Ptr_I
endif
if(this>8190)then
return 0
endif
set si__Ptr_type[this]=93
set kthis=this
set si__Ptr_V[this]=-1
return this
endfunction
function s__GameUI__allocate takes nothing returns integer
local integer kthis
local integer this=si__Ptr_F
if(this!=0)then
set si__Ptr_F=si__Ptr_V[this]
else
set si__Ptr_I=si__Ptr_I+1
set this=si__Ptr_I
endif
if(this>8190)then
return 0
endif
set si__Ptr_type[this]=94
set kthis=this
set si__Ptr_V[this]=-1
return this
endfunction
function sc___prototype2_execute takes integer i returns nothing
call TriggerExecute(st___prototype2[i])
endfunction
function sc___prototype2_evaluate takes integer i returns nothing
call TriggerEvaluate(st___prototype2[i])
endfunction
function sc___prototype47_execute takes integer i returns nothing
call TriggerExecute(st___prototype47[i])
endfunction
function sc___prototype47_evaluate takes integer i returns real
call TriggerEvaluate(st___prototype47[i])
return f__result_real
endfunction
function s__Angle_Cycle takes real a,real b,real c returns real
local real d=c-b
local real v=ModuloReal(a-b,d)
if v<0 then
set v=v+d
endif
return b+v
endfunction
function s__Angle_trans takes real a,real t,real d returns real
return a+RMaxBJ(-d,RMinBJ(d,s__Angle_Cycle(t-a,-180,180)))
endfunction
function s__Angle_Random takes nothing returns real
return GetRandomReal(0.0,360.0)
endfunction
function s__Angle_RadRandom takes nothing returns real
return GetRandomReal(0.0,bj_PI*2)
endfunction
function s__Angle_PBP takes real x,real y,real tx,real ty returns real
local real dx=tx-x
local real dy=ty-y
return Atan2(dy,dx)*bj_RADTODEG
endfunction
function s__Angle_WBP takes widget w,real tx,real ty returns real
local real dx=tx-GetWidgetX(w)
local real dy=ty-GetWidgetY(w)
return Atan2(dy,dx)*bj_RADTODEG
endfunction
function s__Angle_WBW takes widget w,widget t returns real
local real dx=GetWidgetX(t)-GetWidgetX(w)
local real dy=GetWidgetY(t)-GetWidgetY(w)
return Atan2(dy,dx)*bj_RADTODEG
endfunction
function s__Angle_PBW takes real x,real y,widget t returns real
local real dx=GetWidgetX(t)-x
local real dy=GetWidgetY(t)-y
return Atan2(dy,dx)*bj_RADTODEG
endfunction
function s__Angle_RadPBP takes real x,real y,real tx,real ty returns real
local real dx=tx-x
local real dy=ty-y
return Atan2(dy,dx)
endfunction
function s__Angle_RadWBP takes widget w,real tx,real ty returns real
local real dx=tx-GetWidgetX(w)
local real dy=ty-GetWidgetY(w)
return Atan2(dy,dx)
endfunction
function s__Angle_RadWBW takes widget w,widget t returns real
local real dx=GetWidgetX(t)-GetWidgetX(w)
local real dy=GetWidgetY(t)-GetWidgetY(w)
return Atan2(dy,dx)
endfunction
function s__Angle_RadPBW takes real x,real y,widget t returns real
local real dx=GetWidgetX(t)-x
local real dy=GetWidgetY(t)-y
return Atan2(dy,dx)
endfunction
function s__Angle_RadUTA takes unit u,real angle2 returns nothing
call SetUnitFacing(u,angle2*bj_RADTODEG)
endfunction
function s__Angle_UTA takes unit u,real angle2 returns nothing
call SetUnitFacing(u,angle2)
endfunction
function s__Angle_UTP takes unit u,real x,real y returns nothing
local real angle2=Atan2(y-GetWidgetY(u),x-GetWidgetX(u))
call SetUnitFacing(u,angle2*bj_RADTODEG)
endfunction
function s__Angle_UTW takes unit u,widget t returns nothing
local real angle2=Atan2(GetWidgetY(t)-GetWidgetY(u),GetWidgetX(t)-GetWidgetX(u))
call SetUnitFacing(u,angle2*bj_RADTODEG)
endfunction
function ArtfectEF___RandomInteger2 takes integer n returns integer
local integer hi
local integer lo
local integer test
local integer a
local real temp1
local integer temp3
set temp1=GetRandomReal(1,100)
set temp3=R2I(temp1)
set temp1=(temp1-temp3)*100
set temp3=R2I(temp1)
set seedtimesec=seedtimesec+1
set ArtfectEF___seed=(randomSeed*temp3)+(seedtimesec*temp3)
set hi=ArtfectEF___seed/ArtfectEF___Q
set lo=ModuloInteger(ArtfectEF___seed,ArtfectEF___Q)
set test=ArtfectEF___A*lo-ArtfectEF___R*hi
if test>0 then
set ArtfectEF___seed=test
else
set ArtfectEF___seed=test+ArtfectEF___M
endif
set a=ModuloInteger(ArtfectEF___seed,n)+1
return a
endfunction
function ArtfectEF___StatChangeXT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer cod=LoadInteger(udg_Hash,GetHandleId(t),$CB4887A8)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer tempI
local real tempR
local integer tempI2
local real tempR2
local string c=LoadStr(udg_Hash,GetHandleId(t),$C42EE383)
local unit u=Charcter[p]
local real time=LoadReal(udg_Hash,GetHandleId(u),StringHash(c))
call SaveReal(udg_Hash,GetHandleId(u),StringHash(c),time-0.07)
if time<=0 then
call SaveReal(udg_Hash,GetHandleId(u),StringHash(c),0)
if cod==0 then
set tempI=LoadInteger(Hash_Stat,p,$B643E41C)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$B643E41C,tempI-tempI2)
endif
if cod==1 then
set tempI=LoadInteger(Hash_Stat,p,$9298D98F)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$9298D98F,tempI-tempI2)
endif
if cod==2 then
set tempI=LoadInteger(Hash_Stat,p,$753B4F2F)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$753B4F2F,tempI-tempI2)
endif
if cod==3 then
set tempI=LoadInteger(Hash_Stat,p,$D8C9D96B)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$D8C9D96B,tempI-tempI2)
endif
if cod==4 then
set tempI=LoadInteger(Hash_Stat,p,$C46B0D8B)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$C46B0D8B,tempI-tempI2)
endif
if cod==5 then
set tempI=LoadInteger(Hash_Stat,p,$5B2587EB)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$5B2587EB,tempI-tempI2)
endif
if cod==6 then
set tempI=LoadInteger(Hash_Stat,p,$ED314123)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$ED314123,tempI-tempI2)
endif
if cod==7 then
set tempI=LoadInteger(Hash_Stat,p,$C18D16A0)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$C18D16A0,tempI-tempI2)
endif
if cod==8 then
set tempI=LoadInteger(Hash_Stat,p,$924944F9)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$924944F9,tempI-tempI2)
endif
if cod==9 then
set tempI=LoadInteger(Hash_Stat,p,$8885555B)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$8885555B,tempI-tempI2)
endif
if cod==10 then
set tempR=LoadReal(Hash_Stat,p,$164C40C9)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$164C40C9,tempR-tempR2)
endif
if cod==11 then
set tempR=LoadReal(Hash_Stat,p,$8EB4E7D9)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$8EB4E7D9,tempR-tempR2)
endif
if cod==12 then
set tempR=LoadReal(Hash_Stat,p,$6DC36456)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$6DC36456,tempR-tempR2)
endif
if cod==13 then
set tempR=LoadReal(Hash_Stat,p,$34D9AB92)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$34D9AB92,tempR-tempR2)
endif
if cod==14 then
set tempR=LoadReal(Hash_Stat,p,$337F1BA1)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$337F1BA1,tempR-tempR2)
endif
if cod==15 then
set tempR=LoadReal(Hash_Stat,p,$540C61C7)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$540C61C7,tempR-tempR2)
endif
if cod==16 then
set tempR=LoadReal(Hash_Stat,p,$1486341)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$1486341,tempR-tempR2)
endif
if cod==39 then
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
set tempR=LoadReal(Hash_Stat,p,$34D9AB92)
call SaveReal(Hash_Stat,p,$34D9AB92,tempR-tempR2)
set tempR=LoadReal(Hash_Stat,p,$540C61C7)
call SaveReal(Hash_Stat,p,$540C61C7,tempR-tempR2)
endif
if cod==40 then
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
set tempR=LoadReal(Hash_Stat,p,$337F1BA1)
call SaveReal(Hash_Stat,p,$337F1BA1,tempR-tempR2)
set tempR=LoadReal(Hash_Stat,p,$1486341)
call SaveReal(Hash_Stat,p,$1486341,tempR-tempR2)
endif
if cod==17 then
set tempR=LoadReal(Hash_Stat,p,$45E22B52)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$45E22B52,tempR-tempR2)
endif
if cod==18 then
set tempR=LoadReal(Hash_Stat,p,$5C6093F2)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$5C6093F2,tempR-tempR2)
endif
if cod==19 then
set tempR=LoadReal(Hash_Stat,p,$BC3801A9)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$BC3801A9,tempR-tempR2)
endif
if cod==20 then
set tempR=LoadReal(Hash_Stat,p,$50B06B2)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$50B06B2,tempR-tempR2)
endif
if cod==21 then
set tempR=LoadReal(Hash_Stat,p,$2034A1E3)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$2034A1E3,tempR-tempR2)
endif
if cod==22 then
set tempR=LoadReal(Hash_Stat,p,$5FF1A35F)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$5FF1A35F,tempR-tempR2)
endif
if cod==23 then
set tempR=LoadReal(Hash_Stat,p,$2E182EFC)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$2E182EFC,tempR-tempR2)
endif
if cod==24 then
set tempI=LoadInteger(Hash_Stat,p,$B7E7C8AD)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$B7E7C8AD,tempI-tempI2)
endif
if cod==25 then
set tempR=LoadReal(Hash_Stat,p,$62BD2901)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$62BD2901,tempR-tempR2)
endif
if cod==26 then
set tempR=LoadReal(Hash_Stat,p,$3362B68D)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$3362B68D,tempR-tempR2)
endif
if cod==27 then
set tempR=LoadReal(Hash_Stat,p,$F3FDA8C9)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$F3FDA8C9,tempR-tempR2)
endif
if cod==28 then
set tempR=LoadReal(Hash_Stat,p,$10BA18C8)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$10BA18C8,tempR-tempR2)
endif
if cod==29 then
set tempR=LoadReal(Hash_Stat,p,$A7543052)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$A7543052,tempR-tempR2)
endif
if cod==30 then
set tempR=LoadReal(Hash_Stat,p,$9BC8E22B)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$9BC8E22B,tempR-tempR2)
endif
if cod==31 then
set tempR=LoadReal(Hash_Stat,p,$92D803F1)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$92D803F1,tempR-tempR2)
endif
if cod==32 then
set tempI=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
set ArtRerollMaxChance[p]=ArtRerollMaxChance[p]-tempI
endif
if cod==33 then
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SetHeroStr(u,GetHeroStr(u,false)-tempI2,true)
endif
if cod==34 then
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SetHeroAgi(u,GetHeroAgi(u,false)-tempI2,true)
if CharcterStat[p]then
set tempR=GetUnitState(u,ConvertUnitState(0x12))-tempI2
call SetUnitState(u,ConvertUnitState(0x12),tempR)
endif
endif
if cod==35 then
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SetHeroInt(u,GetHeroInt(u,false)-tempI2,true)
if not CharcterStat[p]then
set tempR=GetUnitState(u,ConvertUnitState(0x12))-tempI2
call SetUnitState(u,ConvertUnitState(0x12),tempR)
endif
endif
if cod==36 then
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
if CharcterStat[p]then
call SetHeroAgi(u,GetHeroAgi(u,false)-tempI2,true)
else
call SetHeroInt(u,GetHeroInt(u,false)-tempI2,true)
endif
set tempR=GetUnitState(u,ConvertUnitState(0x12))-tempI2
call SetUnitState(u,ConvertUnitState(0x12),tempR)
endif
if cod==37 then
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$1D90491F)
call SetHeroStr(u,GetHeroStr(u,false)-tempI2,true)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$AE4EAEDC)
call SetHeroAgi(u,GetHeroAgi(u,false)-tempI2,true)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$C2A3B8DC)
call SetHeroInt(u,GetHeroInt(u,false)-tempI2,true)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$1B9E80FE)
call SetUnitState(u,ConvertUnitState(0x12),GetUnitState(u,ConvertUnitState(0x12))-tempR)
endif
if cod==38 then
set tempR=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SetUnitState(u,ConvertUnitState(0x12),GetUnitState(u,ConvertUnitState(0x12))-tempR)
endif
if cod==41 then
set tempR=LoadReal(Hash_Stat,p,$20CA2916)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$20CA2916,tempR-tempR2)
endif
if cod==42 then
set tempR=LoadReal(udg_Hashtable,p,$46D2FE81)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SetUnitState(u,ConvertUnitState(0x25),tempR+tempR2)
call SaveReal(udg_Hashtable,p,$46D2FE81,tempR+tempR2)
endif
if cod==43 then
set tempR=LoadReal(Hash_Stat,p,$7FAFA384)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$7FAFA384,tempR-tempR2)
endif
if cod==44 then
set tempR=LoadReal(Hash_Stat,p,$A62A5B82)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$A62A5B82,tempR-tempR2)
endif
call TimerStart(udg_infoRe[p],0.0314,false,null)
if c=="H1121" then
call UnitRemoveAbility(u,'H116')
endif
if c=="eila" then
call UnitRemoveAbility(u,'A022')
endif
if c=="H2101" then
call UnitRemoveAbility(u,'A03H')
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call TimerStart(t,0.07,false,function ArtfectEF___StatChangeXT)
set u=null
set t=null
endfunction
function StatChangeX takes integer p,real a,string b,real time,string c returns nothing
local timer t
local unit u=Charcter[p]
local real tempR2=LoadReal(udg_Hash,GetHandleId(u),StringHash(c))
local integer tempI
local real tempR
call SaveReal(udg_Hash,GetHandleId(u),StringHash(c),time)
if tempR2==0 then
set t=CreateTimer()
if b=="체퍼" then
set tempI=LoadInteger(Hash_Stat,p,$B38BEB44)
call SaveInteger(Hash_Stat,p,$B38BEB44,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,0)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="주탯퍼" then
set tempI=LoadInteger(Hash_Stat,p,$9298D98F)
call SaveInteger(Hash_Stat,p,$9298D98F,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,1)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="올탯퍼" then
set tempI=LoadInteger(Hash_Stat,p,$753B4F2F)
call SaveInteger(Hash_Stat,p,$753B4F2F,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,2)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="일공증" then
set tempI=LoadInteger(Hash_Stat,p,$D8C9D96B)
call SaveInteger(Hash_Stat,p,$D8C9D96B,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,3)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="공퍼" then
set tempI=LoadInteger(Hash_Stat,p,$C46B0D8B)
call SaveInteger(Hash_Stat,p,$C46B0D8B,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,4)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="지퍼" then
set tempI=LoadInteger(Hash_Stat,p,$5B2587EB)
call SaveInteger(Hash_Stat,p,$5B2587EB,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,5)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="방퍼" then
set tempI=LoadInteger(Hash_Stat,p,$ED314123)
call SaveInteger(Hash_Stat,p,$ED314123,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,6)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="공속" then
set tempI=LoadInteger(Hash_Stat,p,$C18D16A0)
call SaveInteger(Hash_Stat,p,$C18D16A0,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,7)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="이속" then
set tempI=LoadInteger(Hash_Stat,p,$924944F9)
call SaveInteger(Hash_Stat,p,$924944F9,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,8)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="피감" then
set tempI=LoadInteger(Hash_Stat,p,$8885555B)
call SaveInteger(Hash_Stat,p,$8885555B,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,9)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="피증" then
set tempR=LoadReal(Hash_Stat,p,$164C40C9)
call SaveReal(Hash_Stat,p,$164C40C9,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,10)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="물리흡" then
set tempR=LoadReal(Hash_Stat,p,$8EB4E7D9)
call SaveReal(Hash_Stat,p,$8EB4E7D9,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,11)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="마법흡" then
set tempR=LoadReal(Hash_Stat,p,$6DC36456)
call SaveReal(Hash_Stat,p,$6DC36456,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,12)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="물치확" then
set tempR=LoadReal(Hash_Stat,p,$34D9AB92)
call SaveReal(Hash_Stat,p,$34D9AB92,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,13)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="물치피" then
set tempR=LoadReal(Hash_Stat,p,$337F1BA1)
call SaveReal(Hash_Stat,p,$337F1BA1,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,14)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="마치확" then
set tempR=LoadReal(Hash_Stat,p,$540C61C7)
call SaveReal(Hash_Stat,p,$540C61C7,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,15)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="마치피" then
set tempR=LoadReal(Hash_Stat,p,$1486341)
call SaveReal(Hash_Stat,p,$1486341,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,16)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="치확" then
set tempR=LoadReal(Hash_Stat,p,$34D9AB92)
call SaveReal(Hash_Stat,p,$34D9AB92,tempR+a)
set tempR=LoadReal(Hash_Stat,p,$540C61C7)
call SaveReal(Hash_Stat,p,$540C61C7,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,39)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="치피" then
set tempR=LoadReal(Hash_Stat,p,$337F1BA1)
call SaveReal(Hash_Stat,p,$337F1BA1,tempR+a)
set tempR=LoadReal(Hash_Stat,p,$1486341)
call SaveReal(Hash_Stat,p,$1486341,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,40)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="스증" then
set tempR=LoadReal(Hash_Stat,p,$45E22B52)
call SaveReal(Hash_Stat,p,$45E22B52,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,17)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="불뎀증" then
set tempR=LoadReal(Hash_Stat,p,$5C6093F2)
call SaveReal(Hash_Stat,p,$5C6093F2,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,18)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="얼뎀증" then
set tempR=LoadReal(Hash_Stat,p,$BC3801A9)
call SaveReal(Hash_Stat,p,$BC3801A9,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,19)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="바뎀증" then
set tempR=LoadReal(Hash_Stat,p,$50B06B2)
call SaveReal(Hash_Stat,p,$50B06B2,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,20)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="번뎀증" then
set tempR=LoadReal(Hash_Stat,p,$2034A1E3)
call SaveReal(Hash_Stat,p,$2034A1E3,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,21)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="보스추뎀" then
set tempR=LoadReal(Hash_Stat,p,$5FF1A35F)
call SaveReal(Hash_Stat,p,$5FF1A35F,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,22)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="회복효율" then
set tempR=LoadReal(Hash_Stat,p,$2E182EFC)
call SaveReal(Hash_Stat,p,$2E182EFC,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,23)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="쿨감" then
set tempI=LoadInteger(Hash_Stat,p,$B7E7C8AD)+R2I(a)
call SaveInteger(Hash_Stat,p,$B7E7C8AD,tempI)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,24)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="경험치" then
set tempR=LoadReal(Hash_Stat,p,$62BD2901)
call SaveReal(Hash_Stat,p,$62BD2901,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,25)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="골드" then
set tempR=LoadReal(Hash_Stat,p,$3362B68D)
call SaveReal(Hash_Stat,p,$3362B68D,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,26)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="방어관통" then
set tempR=LoadReal(Hash_Stat,p,$F3FDA8C9)
call SaveReal(Hash_Stat,p,$F3FDA8C9,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,27)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="스킬범위" then
set tempR=LoadReal(Hash_Stat,p,$10BA18C8)
call SaveReal(Hash_Stat,p,$10BA18C8,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,28)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="마나코스트" then
set tempR=LoadReal(Hash_Stat,p,$A7543052)
call SaveReal(Hash_Stat,p,$A7543052,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,29)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="체력코스트" then
set tempR=LoadReal(Hash_Stat,p,$9BC8E22B)
call SaveReal(Hash_Stat,p,$9BC8E22B,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,30)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="방어력" then
set tempR=LoadReal(Hash_Stat,p,$92D803F1)
call SaveReal(Hash_Stat,p,$92D803F1,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,31)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="리롤" then
set ArtRerollMaxChance[p]=ArtRerollMaxChance[p]+R2I(a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,32)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="체력" then
if a<0 and GetHeroStr(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroStr(Charcter[p],false)-a)
endif
call SetHeroStr(u,GetHeroStr(u,false)+R2I(a),true)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,33)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="공격력" then
if a<0 and GetHeroAgi(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroAgi(Charcter[p],false)-a)
endif
call SetHeroAgi(u,GetHeroAgi(u,false)+R2I(a),true)
if CharcterStat[p]then
set tempR=GetUnitState(u,ConvertUnitState(0x12))
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
endif
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,34)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="지능" then
if a<0 and GetHeroInt(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroInt(Charcter[p],false)-a)
endif
if not CharcterStat[p]then
set tempR=GetUnitState(u,ConvertUnitState(0x12))
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
endif
call SetHeroInt(u,GetHeroInt(u,false)+R2I(a),true)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,35)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="주스탯" then
if CharcterStat[p]then
if a<0 and GetHeroAgi(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroAgi(Charcter[p],false)-a)
endif
call SetHeroAgi(u,GetHeroAgi(u,false)+R2I(a),true)
set tempR=GetUnitState(u,ConvertUnitState(0x12))
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
else
if a<0 and GetHeroInt(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroInt(Charcter[p],false)-a)
endif
call SetHeroInt(u,GetHeroInt(u,false)+R2I(a),true)
set tempR=GetUnitState(u,ConvertUnitState(0x12))
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
endif
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,36)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="올스탯" then
set tempR=a
if a<0 and GetHeroStr(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroStr(Charcter[p],false)-a)
endif
call SetHeroStr(u,GetHeroStr(u,false)+R2I(a),true)
call SaveInteger(udg_Hash,GetHandleId(t),$1D90491F,R2I(a))
set a=tempR
if a<0 and GetHeroAgi(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroAgi(Charcter[p],false)-a)
endif
call SetHeroAgi(u,GetHeroAgi(u,false)+R2I(a),true)
call SaveInteger(udg_Hash,GetHandleId(t),$AE4EAEDC,R2I(a))
set a=tempR
if a<0 and GetHeroInt(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroInt(Charcter[p],false)-a)
endif
call SetHeroInt(u,GetHeroInt(u,false)+R2I(a),true)
call SaveInteger(udg_Hash,GetHandleId(t),$C2A3B8DC,R2I(a))
set tempR=GetUnitState(u,ConvertUnitState(0x12))
if a<0 and tempR<=R2I(a*-1)then
set a=a+(tempR-a)
endif
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,37)
call SaveReal(udg_Hash,GetHandleId(t),$1B9E80FE,a)
endif
if b=="일공" then
set tempR=GetUnitState(u,ConvertUnitState(0x12))
if a<0 and tempR<=R2I(a*-1)then
set a=a+(tempR-a)
endif
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,38)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="무뎀증" then
set tempR=LoadReal(Hash_Stat,p,$20CA2916)
call SaveReal(Hash_Stat,p,$20CA2916,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,41)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="공격간격" then
set tempR=LoadReal(udg_Hashtable,p,$46D2FE81)-a
call SetUnitState(u,ConvertUnitState(0x25),tempR)
call SaveReal(udg_Hashtable,p,$46D2FE81,tempR)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,42)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="HP리젠" then
set tempR=LoadReal(Hash_Stat,p,$7FAFA384)+a
call SaveReal(Hash_Stat,p,$7FAFA384,tempR)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,43)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="MP리젠" then
set tempR=LoadReal(Hash_Stat,p,$A62A5B82)+a
call SaveReal(Hash_Stat,p,$A62A5B82,tempR)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,44)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if c=="H1121" then
call UnitAddAbility(u,'H116')
endif
if c=="H2101" then
call UnitAddAbility(u,'A03H')
endif
call SaveStr(udg_Hash,GetHandleId(t),$C42EE383,c)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call TimerStart(udg_infoRe[p],0.0314,false,null)
call TimerStart(t,0.07,false,function ArtfectEF___StatChangeXT)
endif
set t=null
set u=null
endfunction
function ArtBoolean takes integer artID,integer p returns boolean
local integer loopA=0
loop
exitwhen loopA>30
if(LoadInteger(Hash,p-1,$DA437F80+loopA)==artID)then
return true
endif
set loopA=loopA+1
endloop
return false
endfunction
function ArtThrowCheck takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer loopA=0
local integer invenslot
local integer artID=LoadInteger(udg_Hash,GetHandleId(t),1)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
loop
exitwhen loopA>31
if LoadInteger(Hash,p-1,$DA437F80+loopA)==artID then
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",loopA),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",loopA),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzSyncData("RCT",I2S(loopA))
endif
exitwhen true
endif
set loopA=loopA+1
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function ArtThrow takes integer artID,integer p returns nothing
local integer loopA=0
local integer invenslot
local timer t=CreateTimer()
loop
exitwhen loopA>31
if LoadInteger(Hash,p-1,$DA437F80+loopA)==artID then
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",loopA),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",loopA),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzSyncData("RCT",I2S(loopA))
endif
exitwhen true
endif
set loopA=loopA+1
endloop
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call SaveInteger(udg_Hash,GetHandleId(t),1,artID)
call TimerStart(t,1,false,function ArtThrowCheck)
set t=null
endfunction
function ArtThrowTimerT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer loopA=0
local integer invenslot
local integer artID=LoadInteger(udg_Hash,GetHandleId(t),1)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),2)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),0)
loop
exitwhen loopA>31
if LoadInteger(Hash,p-1,$DA437F80+loopA)==artID then
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",loopA),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",loopA),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzSyncData("RCT",I2S(loopA))
endif
exitwhen true
endif
set loopA=loopA+1
endloop
if artID=='C016' then
set loopA=0
loop
exitwhen loopA==Playint
set loopA=loopA+1
call SaveBoolean(System,PP[loopA],$1F67FD0C,false)
endloop
endif
if stage==0 then
call SaveInteger(udg_Hash,GetHandleId(t),0,1)
call TimerStart(t,0.01,false,function ArtThrowTimerT)
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function ArtThrowTimer takes integer artID,integer p,real time returns nothing
local timer t=CreateTimer()
call TimerStart(t,time,false,function ArtThrowTimerT)
call SaveInteger(udg_Hash,GetHandleId(t),1,artID)
call SaveInteger(udg_Hash,GetHandleId(t),2,p)
set t=null
endfunction
function OnlyOnceCutT2 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer a
local integer b
local integer c
local integer cd=LoadInteger(udg_Hash,GetHandleId(t),$3B60835B)
set b=0
loop
exitwhen b>=Playint
set b=b+1
if Art1[PP[b]]==cd then
call SetPlayerAbilityAvailable(Player(PP[b]-1),ArtSkillCode1[PP[b]],false)
set Art1slotLV[PP[b]]=0
endif
if Art2[PP[b]]==cd then
call SetPlayerAbilityAvailable(Player(PP[b]-1),ArtSkillCode2[PP[b]],false)
set Art2slotLV[PP[b]]=0
endif
if Art3[PP[b]]==cd then
call SetPlayerAbilityAvailable(Player(PP[b]-1),ArtSkillCode3[PP[b]],false)
set Art3slotLV[PP[b]]=0
endif
if Art4[PP[b]]==cd then
call SetPlayerAbilityAvailable(Player(PP[b]-1),ArtSkillCode4[PP[b]],false)
set Art4slotLV[PP[b]]=0
endif
endloop
set b=0
loop
exitwhen b>=Playint
set b=b+1
if not LoadBoolean(udg_Hash,GetHandleId(t),$D76660F6+PP[b])then
set a=0
loop
exitwhen a==100
set a=a+1
set c=LoadInteger(NormalArt,PP[b],a)
if c==cd then
call SaveInteger(NormalArt,PP[b],a,0)
exitwhen true
endif
set c=LoadInteger(UncarmonArt,PP[b],a)
if c==cd then
call SaveInteger(UncarmonArt,PP[b],a,0)
exitwhen true
endif
set c=LoadInteger(RareArt,PP[b],a)
if c==cd then
call SaveInteger(RareArt,PP[b],a,0)
exitwhen true
endif
set c=LoadInteger(UniqueArt,PP[b],a)
if c==cd then
call SaveInteger(UniqueArt,PP[b],a,0)
exitwhen true
endif
endloop
else
set Check[PP[b]]=false
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function OnlyOnceCutT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer a
local integer b
local integer c
local integer cd=LoadInteger(udg_Hash,GetHandleId(t),$3B60835B)
call TimerStart(t,0.25,false,function OnlyOnceCutT2)
set b=0
loop
exitwhen b>=Playint
set b=b+1
if not LoadBoolean(udg_Hash,GetHandleId(t),$D76660F6+PP[b])then
set a=0
loop
exitwhen a==100
set a=a+1
set c=LoadInteger(NormalArt,PP[b],a)
if c==cd then
call SaveInteger(NormalArt,PP[b],a,0)
exitwhen true
endif
set c=LoadInteger(UncarmonArt,PP[b],a)
if c==cd then
call SaveInteger(UncarmonArt,PP[b],a,0)
exitwhen true
endif
set c=LoadInteger(RareArt,PP[b],a)
if c==cd then
call SaveInteger(RareArt,PP[b],a,0)
exitwhen true
endif
set c=LoadInteger(UniqueArt,PP[b],a)
if c==cd then
call SaveInteger(UniqueArt,PP[b],a,0)
exitwhen true
endif
endloop
else
set Check[PP[b]]=false
endif
endloop
set t=null
endfunction
function OnlyOnceCut takes integer p,integer Lv,integer cd returns nothing
local timer t
local integer a
local integer b
local integer c
set b=0
loop
exitwhen b>=Playint
set b=b+1
if Art1[b]==cd then
call SetPlayerAbilityAvailable(Player(PP[b]-1),ArtSkillCode1[PP[b]],false)
set Art1slotLV[PP[b]]=0
endif
if Art2[PP[b]]==cd then
call SetPlayerAbilityAvailable(Player(PP[b]-1),ArtSkillCode2[PP[b]],false)
set Art2slotLV[PP[b]]=0
endif
if Art3[PP[b]]==cd then
call SetPlayerAbilityAvailable(Player(PP[b]-1),ArtSkillCode3[PP[b]],false)
set Art3slotLV[PP[b]]=0
endif
if Art4[PP[b]]==cd then
call SetPlayerAbilityAvailable(Player(PP[b]-1),ArtSkillCode4[PP[b]],false)
set Art4slotLV[PP[b]]=0
endif
endloop
set t=null
endfunction
function ArtiCut takes integer p,integer Lv,integer cd returns nothing
local integer a
local integer b
if Art1[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode1[p],false)
set Art1slotLV[p]=0
set Check[p]=true
endif
if Art2[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode2[p],false)
set Art2slotLV[p]=0
set Check[p]=true
endif
if Art3[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode3[p],false)
set Art3slotLV[p]=0
set Check[p]=true
endif
if Art4[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode4[p],false)
set Art4slotLV[p]=0
set Check[p]=true
endif
if not Check[p]then
set a=0
loop
set a=a+1
set b=LoadInteger(NormalArt,p,a)
if b==cd then
call SaveInteger(NormalArt,p,a,0)
endif
set b=LoadInteger(UncarmonArt,p,a)
if b==cd then
call SaveInteger(UncarmonArt,p,a,0)
endif
set b=LoadInteger(RareArt,p,a)
if b==cd then
call SaveInteger(RareArt,p,a,0)
endif
set b=LoadInteger(UniqueArt,p,a)
if b==cd then
call SaveInteger(UniqueArt,p,a,0)
endif
exitwhen a==100
endloop
endif
set Check[p]=false
endfunction
function ArtiCutN takes integer p,integer cd returns nothing
local integer a
local integer b
if Art1[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode1[p],false)
set Art1slotLV[p]=0
set Check[p]=true
endif
if Art2[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode2[p],false)
set Art2slotLV[p]=0
set Check[p]=true
endif
if Art3[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode3[p],false)
set Art3slotLV[p]=0
set Check[p]=true
endif
if Art4[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode4[p],false)
set Art4slotLV[p]=0
set Check[p]=true
endif
if not Check[p]then
set a=0
loop
set a=a+1
set b=LoadInteger(NormalArt,p,a)
if b==cd then
call SaveInteger(NormalArt,p,a,0)
endif
exitwhen a==NormalMax
endloop
endif
set Check[p]=false
endfunction
function ArtiCutC takes integer p,integer cd returns nothing
local integer a
local integer b
if Art1[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode1[p],false)
set Art1slotLV[p]=0
set Check[p]=true
endif
if Art2[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode2[p],false)
set Art2slotLV[p]=0
set Check[p]=true
endif
if Art3[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode3[p],false)
set Art3slotLV[p]=0
set Check[p]=true
endif
if Art4[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode4[p],false)
set Art4slotLV[p]=0
set Check[p]=true
endif
if not Check[p]then
set a=0
loop
set a=a+1
set b=LoadInteger(UncarmonArt,p,a)
if b==cd then
call SaveInteger(UncarmonArt,p,a,0)
endif
exitwhen a==UncarmonMax
endloop
endif
set Check[p]=false
endfunction
function ArtiCutR takes integer p,integer cd returns nothing
local integer a
local integer b
if Art1[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode1[p],false)
set Art1slotLV[p]=0
set Check[p]=true
endif
if Art2[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode2[p],false)
set Art2slotLV[p]=0
set Check[p]=true
endif
if Art3[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode3[p],false)
set Art3slotLV[p]=0
set Check[p]=true
endif
if Art4[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode4[p],false)
set Art4slotLV[p]=0
set Check[p]=true
endif
if not Check[p]then
set a=0
loop
set a=a+1
set b=LoadInteger(RareArt,p,a)
if b==cd then
call SaveInteger(RareArt,p,a,0)
endif
exitwhen a==RareMax
endloop
endif
set Check[p]=false
endfunction
function ArtiCutU takes integer p,integer cd returns nothing
local integer a
local integer b
if Art1[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode1[p],false)
set Art1slotLV[p]=0
set Check[p]=true
endif
if Art2[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode2[p],false)
set Art2slotLV[p]=0
set Check[p]=true
endif
if Art3[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode3[p],false)
set Art3slotLV[p]=0
set Check[p]=true
endif
if Art4[p]==cd then
call SetPlayerAbilityAvailable(Player(p-1),ArtSkillCode4[p],false)
set Art4slotLV[p]=0
set Check[p]=true
endif
if not Check[p]then
set a=0
loop
set a=a+1
set b=LoadInteger(UniqueArt,p,a)
if b==cd then
call SaveInteger(UniqueArt,p,a,0)
endif
exitwhen a==UniqueMax
endloop
endif
set Check[p]=false
endfunction
function NArtADD takes integer artid,integer p returns nothing
local integer a
set a=1
loop
exitwhen LoadInteger(NormalArt,p,a)==0
set a=a+1
endloop
call SaveInteger(NormalArt,p,a,artid)
endfunction
function CArtADD takes integer artid,integer p returns nothing
local integer a
set a=1
loop
exitwhen LoadInteger(UncarmonArt,p,a)==0
set a=a+1
endloop
call SaveInteger(UncarmonArt,p,a,artid)
endfunction
function RArtADD takes integer artid,integer p returns nothing
local integer a
set a=1
loop
exitwhen LoadInteger(RareArt,p,a)==0
set a=a+1
endloop
call SaveInteger(RareArt,p,a,artid)
endfunction
function UArtADD takes integer artid,integer p returns nothing
local integer a
set a=1
loop
exitwhen LoadInteger(UniqueArt,p,a)==0
set a=a+1
endloop
call SaveInteger(UniqueArt,p,a,artid)
endfunction
function SArtADD takes integer artid,integer p returns nothing
local integer a
set SpecialArtSET[p]=SpecialArtSET[p]+1
set a=1
loop
exitwhen LoadInteger(System,p,$24020D5A+a)==0
set a=a+1
endloop
call SaveInteger(System,p,$24020D5A+a,artid)
endfunction
function HF takes integer p returns nothing
local integer a
set a=1
loop
exitwhen LoadInteger(UncarmonArt,p,a)==0
set a=a+1
endloop
call SaveInteger(UncarmonArt,p,a,'C005')
call SaveBoolean(System,$70739E58,4,true)
endfunction
function ArtfectEF___StatChangeEND takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer cod=LoadInteger(udg_Hash,GetHandleId(t),$CB4887A8)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer tempI
local real tempR
local integer tempI2
local real tempR2
local unit u=Charcter[p]
if cod==0 then
set tempI=LoadInteger(Hash_Stat,p,$B643E41C)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$B643E41C,tempI-tempI2)
endif
if cod==1 then
set tempI=LoadInteger(Hash_Stat,p,$9298D98F)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$9298D98F,tempI-tempI2)
endif
if cod==2 then
set tempI=LoadInteger(Hash_Stat,p,$753B4F2F)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$753B4F2F,tempI-tempI2)
endif
if cod==3 then
set tempI=LoadInteger(Hash_Stat,p,$85EC709A)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$85EC709A,tempI-tempI2)
endif
if cod==4 then
set tempI=LoadInteger(Hash_Stat,p,$5FFC130D)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$5FFC130D,tempI-tempI2)
endif
if cod==5 then
set tempI=LoadInteger(Hash_Stat,p,$422E7865)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$422E7865,tempI-tempI2)
endif
if cod==6 then
set tempI=LoadInteger(Hash_Stat,p,$4309A2D3)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$4309A2D3,tempI-tempI2)
endif
if cod==7 then
set tempI=LoadInteger(Hash_Stat,p,$C18D16A0)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$C18D16A0,tempI-tempI2)
endif
if cod==8 then
set tempI=LoadInteger(Hash_Stat,p,$924944F9)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$924944F9,tempI-tempI2)
endif
if cod==9 then
set tempI=LoadInteger(Hash_Stat,p,$8885555B)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$8885555B,tempI-tempI2)
endif
if cod==10 then
set tempR=LoadReal(Hash_Stat,p,$164C40C9)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$164C40C9,tempR-tempR2)
endif
if cod==11 then
set tempR=LoadReal(Hash_Stat,p,$8EB4E7D9)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$8EB4E7D9,tempR-tempR2)
endif
if cod==12 then
set tempR=LoadReal(Hash_Stat,p,$6DC36456)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$6DC36456,tempR-tempR2)
endif
if cod==13 then
set tempR=LoadReal(Hash_Stat,p,$34D9AB92)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$34D9AB92,tempR-tempR2)
endif
if cod==14 then
set tempR=LoadReal(Hash_Stat,p,$337F1BA1)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$337F1BA1,tempR-tempR2)
endif
if cod==15 then
set tempR=LoadReal(Hash_Stat,p,$540C61C7)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$540C61C7,tempR-tempR2)
endif
if cod==16 then
set tempR=LoadReal(Hash_Stat,p,$1486341)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$1486341,tempR-tempR2)
endif
if cod==39 then
set tempR=LoadReal(Hash_Stat,p,$34D9AB92)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$34D9AB92,tempR-tempR2)
set tempR=LoadReal(Hash_Stat,p,$540C61C7)
call SaveReal(Hash_Stat,p,$540C61C7,tempR-tempR2)
endif
if cod==40 then
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
set tempR=LoadReal(Hash_Stat,p,$337F1BA1)
call SaveReal(Hash_Stat,p,$337F1BA1,tempR-tempR2)
set tempR=LoadReal(Hash_Stat,p,$1486341)
call SaveReal(Hash_Stat,p,$1486341,tempR-tempR2)
endif
if cod==17 then
set tempR=LoadReal(Hash_Stat,p,$45E22B52)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$45E22B52,tempR-tempR2)
endif
if cod==18 then
set tempR=LoadReal(Hash_Stat,p,$5C6093F2)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$5C6093F2,tempR-tempR2)
endif
if cod==19 then
set tempR=LoadReal(Hash_Stat,p,$BC3801A9)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$BC3801A9,tempR-tempR2)
endif
if cod==20 then
set tempR=LoadReal(Hash_Stat,p,$50B06B2)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$50B06B2,tempR-tempR2)
endif
if cod==21 then
set tempR=LoadReal(Hash_Stat,p,$2034A1E3)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$2034A1E3,tempR-tempR2)
endif
if cod==22 then
set tempR=LoadReal(Hash_Stat,p,$5FF1A35F)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$5FF1A35F,tempR-tempR2)
endif
if cod==23 then
set tempR=LoadReal(Hash_Stat,p,$2E182EFC)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$2E182EFC,tempR-tempR2)
endif
if cod==24 then
set tempI=LoadInteger(Hash_Stat,p,$B7E7C8AD)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveInteger(Hash_Stat,p,$B7E7C8AD,tempI-tempI2)
endif
if cod==25 then
set tempR=LoadReal(Hash_Stat,p,$62BD2901)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$62BD2901,tempR-tempR2)
endif
if cod==26 then
set tempR=LoadReal(Hash_Stat,p,$3362B68D)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$3362B68D,tempR-tempR2)
endif
if cod==27 then
set tempR=LoadReal(Hash_Stat,p,$F3FDA8C9)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$F3FDA8C9,tempR-tempR2)
endif
if cod==28 then
set tempR=LoadReal(Hash_Stat,p,$10BA18C8)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$10BA18C8,tempR-tempR2)
endif
if cod==29 then
set tempR=LoadReal(Hash_Stat,p,$A7543052)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$A7543052,tempR-tempR2)
endif
if cod==30 then
set tempR=LoadReal(Hash_Stat,p,$9BC8E22B)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$9BC8E22B,tempR-tempR2)
endif
if cod==31 then
set tempR=LoadReal(Hash_Stat,p,$92D803F1)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$92D803F1,tempR-tempR2)
endif
if cod==32 then
set tempI=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
set ArtRerollMaxChance[p]=ArtRerollMaxChance[p]-tempI
endif
if cod==33 then
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SetHeroStr(u,GetHeroStr(u,false)-tempI2,true)
endif
if cod==34 then
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SetHeroAgi(u,GetHeroAgi(u,false)-tempI2,true)
if CharcterStat[p]then
set tempR=GetUnitState(u,ConvertUnitState(0x12))-tempI2
call SetUnitState(u,ConvertUnitState(0x12),tempR)
endif
endif
if cod==35 then
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
call SetHeroInt(u,GetHeroInt(u,false)-tempI2,true)
if not CharcterStat[p]then
set tempR=GetUnitState(u,ConvertUnitState(0x12))-tempI2
call SetUnitState(u,ConvertUnitState(0x12),tempR)
endif
endif
if cod==36 then
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$27F3D3EE)
if CharcterStat[p]then
call SetHeroAgi(u,GetHeroAgi(u,false)-tempI2,true)
else
call SetHeroInt(u,GetHeroInt(u,false)-tempI2,true)
endif
set tempR=GetUnitState(u,ConvertUnitState(0x12))-tempI2
call SetUnitState(u,ConvertUnitState(0x12),tempR)
endif
if cod==37 then
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$1D90491F)
call SetHeroStr(u,GetHeroStr(u,false)-tempI2,true)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$AE4EAEDC)
call SetHeroAgi(u,GetHeroAgi(u,false)-tempI2,true)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$C2A3B8DC)
call SetHeroInt(u,GetHeroInt(u,false)-tempI2,true)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$1B9E80FE)
call SetUnitState(u,ConvertUnitState(0x12),GetUnitState(u,ConvertUnitState(0x12))-tempR)
endif
if cod==38 then
set tempR=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SetUnitState(u,ConvertUnitState(0x12),GetUnitState(u,ConvertUnitState(0x12))-tempR)
endif
if cod==41 then
set tempR=LoadReal(Hash_Stat,p,$20CA2916)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$20CA2916,tempR-tempR2)
endif
if cod==42 then
set tempR=LoadReal(udg_Hashtable,p,$46D2FE81)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SetUnitState(u,ConvertUnitState(0x25),tempR+tempR2)
call SaveReal(udg_Hashtable,p,$46D2FE81,tempR+tempR2)
endif
if cod==43 then
set tempR=LoadReal(Hash_Stat,p,$7FAFA384)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$7FAFA384,tempR-tempR2)
endif
if cod==44 then
set tempR=LoadReal(Hash_Stat,p,$A62A5B82)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$27F3D3EE)
call SaveReal(Hash_Stat,p,$A62A5B82,tempR-tempR2)
endif
call TimerStart(udg_infoRe[p],0.0314,false,null)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function StatChange takes integer p,real a,string b,real time returns nothing
local timer t=CreateTimer()
local integer tempI
local real tempR
local unit u=Charcter[p]
if b=="체퍼" then
set tempI=LoadInteger(Hash_Stat,p,$B643E41C)
call SaveInteger(Hash_Stat,p,$B643E41C,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,0)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="주탯퍼" then
set tempI=LoadInteger(Hash_Stat,p,$9298D98F)
call SaveInteger(Hash_Stat,p,$9298D98F,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,1)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="올탯퍼" then
set tempI=LoadInteger(Hash_Stat,p,$753B4F2F)
call SaveInteger(Hash_Stat,p,$753B4F2F,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,2)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="일공증" then
set tempI=LoadInteger(Hash_Stat,p,$85EC709A)
call SaveInteger(Hash_Stat,p,$85EC709A,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,3)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="공퍼" then
set tempI=LoadInteger(Hash_Stat,p,$5FFC130D)
call SaveInteger(Hash_Stat,p,$5FFC130D,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,4)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="지퍼" then
set tempI=LoadInteger(Hash_Stat,p,$422E7865)
call SaveInteger(Hash_Stat,p,$422E7865,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,5)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="방퍼" then
set tempI=LoadInteger(Hash_Stat,p,$4309A2D3)
call SaveInteger(Hash_Stat,p,$4309A2D3,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,6)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="공속" then
set tempI=LoadInteger(Hash_Stat,p,$C18D16A0)
call SaveInteger(Hash_Stat,p,$C18D16A0,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,7)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="이속" then
set tempI=LoadInteger(Hash_Stat,p,$924944F9)
call SaveInteger(Hash_Stat,p,$924944F9,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,8)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="피감" then
set tempI=LoadInteger(Hash_Stat,p,$8885555B)
call SaveInteger(Hash_Stat,p,$8885555B,tempI+R2I(a))
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,9)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="피증" then
set tempR=LoadReal(Hash_Stat,p,$164C40C9)
call SaveReal(Hash_Stat,p,$164C40C9,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,10)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="물리흡" then
set tempR=LoadReal(Hash_Stat,p,$8EB4E7D9)
call SaveReal(Hash_Stat,p,$8EB4E7D9,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,11)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="마법흡" then
set tempR=LoadReal(Hash_Stat,p,$6DC36456)
call SaveReal(Hash_Stat,p,$6DC36456,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,12)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="물치확" then
set tempR=LoadReal(Hash_Stat,p,$34D9AB92)
call SaveReal(Hash_Stat,p,$34D9AB92,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,13)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="물치피" then
set tempR=LoadReal(Hash_Stat,p,$337F1BA1)
call SaveReal(Hash_Stat,p,$337F1BA1,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,14)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="마치확" then
set tempR=LoadReal(Hash_Stat,p,$540C61C7)
call SaveReal(Hash_Stat,p,$540C61C7,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,15)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="마치피" then
set tempR=LoadReal(Hash_Stat,p,$1486341)
call SaveReal(Hash_Stat,p,$1486341,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,16)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="치확" then
set tempR=LoadReal(Hash_Stat,p,$34D9AB92)
call SaveReal(Hash_Stat,p,$34D9AB92,tempR+a)
set tempR=LoadReal(Hash_Stat,p,$540C61C7)
call SaveReal(Hash_Stat,p,$540C61C7,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,39)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="치피" then
set tempR=LoadReal(Hash_Stat,p,$337F1BA1)
call SaveReal(Hash_Stat,p,$337F1BA1,tempR+a)
set tempR=LoadReal(Hash_Stat,p,$1486341)
call SaveReal(Hash_Stat,p,$1486341,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,40)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="스증" then
set tempR=LoadReal(Hash_Stat,p,$45E22B52)
call SaveReal(Hash_Stat,p,$45E22B52,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,17)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="불뎀증" then
set tempR=LoadReal(Hash_Stat,p,$5C6093F2)
call SaveReal(Hash_Stat,p,$5C6093F2,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,18)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="얼뎀증" then
set tempR=LoadReal(Hash_Stat,p,$BC3801A9)
call SaveReal(Hash_Stat,p,$BC3801A9,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,19)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="바뎀증" then
set tempR=LoadReal(Hash_Stat,p,$50B06B2)
call SaveReal(Hash_Stat,p,$50B06B2,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,20)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="번뎀증" then
set tempR=LoadReal(Hash_Stat,p,$2034A1E3)
call SaveReal(Hash_Stat,p,$2034A1E3,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,21)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="보스추뎀" then
set tempR=LoadReal(Hash_Stat,p,$5FF1A35F)
call SaveReal(Hash_Stat,p,$5FF1A35F,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,22)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="회복효율" then
set tempR=LoadReal(Hash_Stat,p,$2E182EFC)
call SaveReal(Hash_Stat,p,$2E182EFC,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,23)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="쿨감" then
set tempI=LoadInteger(Hash_Stat,p,$B7E7C8AD)+R2I(a)
call SaveInteger(Hash_Stat,p,$B7E7C8AD,tempI)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,24)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="경험치" then
set tempR=LoadReal(Hash_Stat,p,$62BD2901)
call SaveReal(Hash_Stat,p,$62BD2901,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,25)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="골드" then
set tempR=LoadReal(Hash_Stat,p,$3362B68D)
call SaveReal(Hash_Stat,p,$3362B68D,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,26)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="방어관통" then
set tempR=LoadReal(Hash_Stat,p,$F3FDA8C9)
call SaveReal(Hash_Stat,p,$F3FDA8C9,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,27)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="스킬범위" then
set tempR=LoadReal(Hash_Stat,p,$10BA18C8)
call SaveReal(Hash_Stat,p,$10BA18C8,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,28)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="마나코스트" then
set tempR=LoadReal(Hash_Stat,p,$A7543052)
call SaveReal(Hash_Stat,p,$A7543052,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,29)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="체력코스트" then
set tempR=LoadReal(Hash_Stat,p,$9BC8E22B)
call SaveReal(Hash_Stat,p,$9BC8E22B,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,30)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="방어력" then
set tempR=LoadReal(Hash_Stat,p,$92D803F1)
call SaveReal(Hash_Stat,p,$92D803F1,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,31)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="리롤" then
set ArtRerollMaxChance[p]=ArtRerollMaxChance[p]+R2I(a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,32)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="체력" then
if a<0 and GetHeroStr(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroStr(Charcter[p],false)-a)
endif
call SetHeroStr(u,GetHeroStr(u,false)+R2I(a),true)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,33)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="공격력" then
if a<0 and GetHeroAgi(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroAgi(Charcter[p],false)-a)
endif
call SetHeroAgi(u,GetHeroAgi(u,false)+R2I(a),true)
if CharcterStat[p]then
set tempR=GetUnitState(u,ConvertUnitState(0x12))
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
endif
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,34)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="지능" then
if a<0 and GetHeroInt(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroInt(Charcter[p],false)-a)
endif
if not CharcterStat[p]then
set tempR=GetUnitState(u,ConvertUnitState(0x12))
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
endif
call SetHeroInt(u,GetHeroInt(u,false)+R2I(a),true)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,35)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="주스탯" then
if CharcterStat[p]then
if a<0 and GetHeroAgi(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroAgi(Charcter[p],false)-a)
endif
call SetHeroAgi(u,GetHeroAgi(u,false)+R2I(a),true)
set tempR=GetUnitState(u,ConvertUnitState(0x12))
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
else
if a<0 and GetHeroInt(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroInt(Charcter[p],false)-a)
endif
call SetHeroInt(u,GetHeroInt(u,false)+R2I(a),true)
set tempR=GetUnitState(u,ConvertUnitState(0x12))
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
endif
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,36)
call SaveInteger(udg_Hash,GetHandleId(t),$27F3D3EE,R2I(a))
endif
if b=="올스탯" then
set tempR=a
if a<0 and GetHeroStr(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroStr(Charcter[p],false)-a)
endif
call SetHeroStr(u,GetHeroStr(u,false)+R2I(a),true)
call SaveInteger(udg_Hash,GetHandleId(t),$1D90491F,R2I(a))
set a=tempR
if a<0 and GetHeroAgi(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroAgi(Charcter[p],false)-a)
endif
call SetHeroAgi(u,GetHeroAgi(u,false)+R2I(a),true)
call SaveInteger(udg_Hash,GetHandleId(t),$AE4EAEDC,R2I(a))
set a=tempR
if a<0 and GetHeroInt(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroInt(Charcter[p],false)-a)
endif
call SetHeroInt(u,GetHeroInt(u,false)+R2I(a),true)
call SaveInteger(udg_Hash,GetHandleId(t),$C2A3B8DC,R2I(a))
set tempR=GetUnitState(u,ConvertUnitState(0x12))
if a<0 and tempR<=R2I(a*-1)then
set a=a+(tempR-a)
endif
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,37)
call SaveReal(udg_Hash,GetHandleId(t),$1B9E80FE,a)
endif
if b=="일공" then
set tempR=GetUnitState(u,ConvertUnitState(0x12))
if a<0 and tempR<=R2I(a*-1)then
set a=a+(tempR-a)
endif
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,38)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="무뎀증" then
set tempR=LoadReal(Hash_Stat,p,$20CA2916)
call SaveReal(Hash_Stat,p,$20CA2916,tempR+a)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,41)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="공격간격" then
set tempR=LoadReal(udg_Hashtable,p,$46D2FE81)-a
call SetUnitState(u,ConvertUnitState(0x25),tempR)
call SaveReal(udg_Hashtable,p,$46D2FE81,tempR)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,42)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="HP리젠" then
set tempR=LoadReal(Hash_Stat,p,$7FAFA384)+a
call SaveReal(Hash_Stat,p,$7FAFA384,tempR)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,43)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
if b=="MP리젠" then
set tempR=LoadReal(Hash_Stat,p,$A62A5B82)+a
call SaveReal(Hash_Stat,p,$A62A5B82,tempR)
call SaveInteger(udg_Hash,GetHandleId(t),$CB4887A8,44)
call SaveReal(udg_Hash,GetHandleId(t),$27F3D3EE,a)
endif
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call TimerStart(udg_infoRe[p],0.0314,false,null)
call TimerStart(t,time,false,function ArtfectEF___StatChangeEND)
set t=null
set u=null
endfunction
function StatUP takes integer p,real a,string b returns nothing
local integer tempI
local real tempR
local unit u=Charcter[p]
if b=="체력" then
if a<0 and GetHeroStr(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroStr(Charcter[p],false)-a)
endif
call SetHeroStr(u,GetHeroStr(u,false)+R2I(a),true)
endif
if b=="공격력" then
if a<0 and GetHeroAgi(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroAgi(Charcter[p],false)-a)
endif
call SetHeroAgi(u,GetHeroAgi(u,false)+R2I(a),true)
if CharcterStat[p]then
set tempR=GetUnitState(u,ConvertUnitState(0x12))
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
endif
endif
if b=="지능" then
if a<0 and GetHeroInt(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroInt(Charcter[p],false)-a)
endif
call SetHeroInt(u,GetHeroInt(u,false)+R2I(a),true)
if not CharcterStat[p]then
set tempR=GetUnitState(u,ConvertUnitState(0x12))
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
endif
endif
if b=="주스탯" then
if CharcterStat[p]then
if a<0 and GetHeroAgi(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroAgi(Charcter[p],false)-a)
endif
call SetHeroAgi(u,GetHeroAgi(u,false)+R2I(a),true)
set tempR=GetUnitState(u,ConvertUnitState(0x12))
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
else
if a<0 and GetHeroInt(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroInt(Charcter[p],false)-a)
endif
call SetHeroInt(u,GetHeroInt(u,false)+R2I(a),true)
set tempR=GetUnitState(u,ConvertUnitState(0x12))
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
endif
endif
if b=="올스탯" then
set tempR=a
if a<0 and GetHeroStr(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroStr(Charcter[p],false)-a)
endif
call SetHeroStr(u,GetHeroStr(u,false)+R2I(a),true)
set a=tempR
if a<0 and GetHeroAgi(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroAgi(Charcter[p],false)-a)
endif
call SetHeroAgi(u,GetHeroAgi(u,false)+R2I(a),true)
if a<0 and GetHeroInt(Charcter[p],false)<=R2I(a*-1)then
set a=a+(GetHeroInt(Charcter[p],false)-a)
endif
call SetHeroInt(u,GetHeroInt(u,false)+R2I(a),true)
set a=tempR
set tempR=GetUnitState(u,ConvertUnitState(0x12))
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
endif
if b=="일공" then
set tempR=GetUnitState(u,ConvertUnitState(0x12))
if a<0 and tempR<=R2I(a*-1)then
set a=a+(tempR-a)
endif
call SetUnitState(u,ConvertUnitState(0x12),tempR+a)
endif
if b=="방어력" then
set tempR=LoadReal(Hash_Stat,p,$92D803F1)
if a<0 and tempR<=R2I(a*-1)then
set a=a+(tempR-a)
endif
call SaveReal(Hash_Stat,p,$92D803F1,tempR+a)
endif
if b=="공격간격" then
set tempR=LoadReal(udg_Hashtable,p,$46D2FE81)-a
call SetUnitState(u,ConvertUnitState(0x25),tempR)
call SaveReal(udg_Hashtable,p,$46D2FE81,tempR)
endif
if b=="방어관통" then
set tempR=LoadReal(Hash_Stat,p,$F3FDA8C9)+a
call SaveReal(Hash_Stat,p,$F3FDA8C9,tempR)
set ArmorPenetrate[p]=tempR
endif
if b=="체퍼" then
set tempI=LoadInteger(Hash_Stat,p,$B38BEB44)
call SaveInteger(Hash_Stat,p,$B38BEB44,tempI+R2I(a))
endif
if b=="주탯퍼" then
set tempI=LoadInteger(Hash_Stat,p,$9298D98F)
call SaveInteger(Hash_Stat,p,$9298D98F,tempI+R2I(a))
endif
if b=="올탯퍼" then
set tempI=LoadInteger(Hash_Stat,p,$753B4F2F)
call SaveInteger(Hash_Stat,p,$753B4F2F,tempI+R2I(a))
endif
if b=="일공증" then
set tempI=LoadInteger(Hash_Stat,p,$D8C9D96B)
call SaveInteger(Hash_Stat,p,$D8C9D96B,tempI+R2I(a))
endif
if b=="공퍼" then
set tempI=LoadInteger(Hash_Stat,p,$C46B0D8B)
call SaveInteger(Hash_Stat,p,$C46B0D8B,tempI+R2I(a))
endif
if b=="지퍼" then
set tempI=LoadInteger(Hash_Stat,p,$5B2587EB)
call SaveInteger(Hash_Stat,p,$5B2587EB,tempI+R2I(a))
endif
if b=="방퍼" then
set tempI=LoadInteger(Hash_Stat,p,$ED314123)
call SaveInteger(Hash_Stat,p,$ED314123,tempI+R2I(a))
endif
if b=="공속" then
set tempI=LoadInteger(Hash_Stat,p,$C18D16A0)
call SaveInteger(Hash_Stat,p,$C18D16A0,tempI+R2I(a))
endif
if b=="이속" then
set tempI=LoadInteger(Hash_Stat,p,$924944F9)
call SaveInteger(Hash_Stat,p,$924944F9,tempI+R2I(a))
endif
if b=="피감" then
set tempI=LoadInteger(Hash_Stat,p,$8885555B)
call SaveInteger(Hash_Stat,p,$8885555B,tempI+R2I(a))
endif
if b=="피증" then
set tempR=LoadReal(Hash_Stat,p,$164C40C9)
call SaveReal(Hash_Stat,p,$164C40C9,tempR+a)
endif
if b=="물치확" then
set tempR=LoadReal(Hash_Stat,p,$34D9AB92)
call SaveReal(Hash_Stat,p,$34D9AB92,tempR+a)
endif
if b=="물치피" then
set tempR=LoadReal(Hash_Stat,p,$337F1BA1)
call SaveReal(Hash_Stat,p,$337F1BA1,tempR+a)
endif
if b=="마치확" then
set tempR=LoadReal(Hash_Stat,p,$540C61C7)
call SaveReal(Hash_Stat,p,$540C61C7,tempR+a)
endif
if b=="마치피" then
set tempR=LoadReal(Hash_Stat,p,$1486341)
call SaveReal(Hash_Stat,p,$1486341,tempR+a)
endif
if b=="치확" then
set tempR=LoadReal(Hash_Stat,p,$34D9AB92)
call SaveReal(Hash_Stat,p,$34D9AB92,tempR+a)
set tempR=LoadReal(Hash_Stat,p,$540C61C7)
call SaveReal(Hash_Stat,p,$540C61C7,tempR+a)
endif
if b=="치피" then
set tempR=LoadReal(Hash_Stat,p,$337F1BA1)
call SaveReal(Hash_Stat,p,$337F1BA1,tempR+a)
set tempR=LoadReal(Hash_Stat,p,$1486341)
call SaveReal(Hash_Stat,p,$1486341,tempR+a)
endif
if b=="무뎀증" then
set tempR=LoadReal(Hash_Stat,p,$20CA2916)
call SaveReal(Hash_Stat,p,$20CA2916,tempR+a)
endif
if b=="리롤" then
set ArtRerollMaxChance[p]=ArtRerollMaxChance[p]+R2I(a)
endif
if b=="스킬범위" then
set tempR=LoadReal(Hash_Stat,p,$10BA18C8)
call SaveReal(Hash_Stat,p,$10BA18C8,tempR+a)
endif
if b=="마나코스트" then
set tempR=LoadReal(Hash_Stat,p,$A7543052)
call SaveReal(Hash_Stat,p,$A7543052,tempR+a)
endif
if b=="체력코스트" then
set tempR=LoadReal(Hash_Stat,p,$9BC8E22B)
call SaveReal(Hash_Stat,p,$9BC8E22B,tempR+a)
endif
if b=="경험치" then
set tempR=LoadReal(Hash_Stat,p,$62BD2901)
call SaveReal(Hash_Stat,p,$62BD2901,tempR+a)
endif
if b=="골드" then
set tempR=LoadReal(Hash_Stat,p,$3362B68D)
call SaveReal(Hash_Stat,p,$3362B68D,tempR+a)
endif
if b=="불뎀증" then
set tempR=LoadReal(Hash_Stat,p,$5C6093F2)
call SaveReal(Hash_Stat,p,$5C6093F2,tempR+a)
endif
if b=="얼뎀증" then
set tempR=LoadReal(Hash_Stat,p,$BC3801A9)
call SaveReal(Hash_Stat,p,$BC3801A9,tempR+a)
endif
if b=="바뎀증" then
set tempR=LoadReal(Hash_Stat,p,$50B06B2)
call SaveReal(Hash_Stat,p,$50B06B2,tempR+a)
endif
if b=="번뎀증" then
set tempR=LoadReal(Hash_Stat,p,$2034A1E3)
call SaveReal(Hash_Stat,p,$2034A1E3,tempR+a)
endif
if b=="물리흡" then
set tempR=LoadReal(Hash_Stat,p,$8EB4E7D9)
call SaveReal(Hash_Stat,p,$8EB4E7D9,tempR+a)
endif
if b=="마법흡" then
set tempR=LoadReal(Hash_Stat,p,$6DC36456)
call SaveReal(Hash_Stat,p,$6DC36456,tempR+a)
endif
if b=="쿨감" then
set tempI=LoadInteger(Hash_Stat,p,$B7E7C8AD)+R2I(a)
call SaveInteger(Hash_Stat,p,$B7E7C8AD,tempI)
endif
if b=="보스추뎀" then
set tempR=LoadReal(Hash_Stat,p,$5FF1A35F)
call SaveReal(Hash_Stat,p,$5FF1A35F,tempR+a)
endif
if b=="스증" then
set tempR=LoadReal(Hash_Stat,p,$45E22B52)
call SaveReal(Hash_Stat,p,$45E22B52,tempR+a)
endif
if b=="회복효율" then
set tempR=LoadReal(Hash_Stat,p,$2E182EFC)
call SaveReal(Hash_Stat,p,$2E182EFC,tempR+a)
endif
call TimerStart(udg_infoRe[p],0.00314,false,null)
set u=null
endfunction
function Mujuk takes integer p,unit u returns nothing
call SetUnitInvulnerable(u,true)
call GroupAddUnit(udg_Mujuk,u)
if GetLocalPlayer()==Player(p-1)and LoadUnitHandle(udg_Hashtable,p,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n|cffFF0000무적")
endif
set u=null
endfunction
function endMujuk takes integer p,unit u returns nothing
call SetUnitInvulnerable(u,false)
call GroupRemoveUnit(udg_Mujuk,u)
if GetLocalPlayer()==Player(p-1)and LoadUnitHandle(udg_Hashtable,p,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n"+I2S(R2I(GetUnitState(u,ConvertUnitState(0x20))))+"")
endif
set u=null
endfunction
function Assets_UseSoundByPath__MakeSound takes string soundpath,string tag,integer vol,real pitch,boolean threeD,real minDis,real maxDis returns sound
local integer dur=GetSoundFileDuration(soundpath)
set udg_SND=LoadSoundHandle(udg_SoundHash,StringHash(tag),StringHash(soundpath))
if udg_SND==null then
if threeD==TRUE then
set udg_SND=CreateSound(soundpath,false,true,true,10,10,"DefaultEAXON")
call SetSoundDuration(udg_SND,dur)
call SetSoundChannel(udg_SND,0)
call SetSoundVolume(udg_SND,vol)
call SetSoundPitch(udg_SND,pitch)
call SetSoundDistances(udg_SND,minDis,maxDis)
call SetSoundDistanceCutoff(udg_SND,5000.0)
call SetSoundConeAngles(udg_SND,0.0,0.0,127)
call SetSoundConeOrientation(udg_SND,0.0,0.0,0.0)
else
set udg_SND=CreateSound(soundpath,false,false,false,10,10,"DefaultEAXON")
call SetSoundDuration(udg_SND,dur)
call SetSoundChannel(udg_SND,0)
call SetSoundVolume(udg_SND,vol)
call SetSoundPitch(udg_SND,pitch)
endif
call SaveSoundHandle(udg_SoundHash,StringHash(tag),StringHash(soundpath),udg_SND)
endif
return udg_SND
endfunction
function UseSound takes string soundpath,string tag,integer vol,real pitch returns sound
return Assets_UseSoundByPath__MakeSound(soundpath,tag,vol,pitch,false,0,0)
endfunction
function UseSound3D takes string soundpath,string tag,integer vol,real pitch,real minDis,real maxDis returns sound
return Assets_UseSoundByPath__MakeSound(soundpath,tag,vol,pitch,TRUE,minDis,maxDis)
endfunction
function BossBar_GetBossNum takes unit u returns integer
local integer i=0
loop
exitwhen i>BossBar__Cnt
if BossBar_Bos[i]==u then
return i
endif
set i=i+1
endloop
return 0
endfunction
function BossBar_End takes player p returns nothing
local integer i
set BossBar_Idx[GetPlayerId(p)]=0
if GetLocalPlayer()==p then
call DzFrameShow(DzFrameFindByName("BsBa_Back",0),true)
call DzFrameSetSize(DzFrameFindByName("BsBa_LineB",0),0.396,0.02)
call DzFrameSetTexture(DzFrameFindByName("BsBa_LineB",0),"Textures\\Black32.blp",0)
call DzFrameSetTexture(DzFrameFindByName("BsBa_MiniLine",0),"Textures\\Black32.blp",0)
call DzFrameSetSize(DzFrameFindByName("BsBa_MiniLine",0),0.396,0.006)
call DzFrameSetText(DzFrameFindByName("BsBa_TextP",0),"")
call DzFrameSetText(DzFrameFindByName("BsBa_TextL",0),"")
call DzFrameShow(BossBar__Bar,false)
endif
set i=0
loop
exitwhen i>BossBar__Dmx
if GetLocalPlayer()==p then
call SaveInteger(BossBar__hash,BossBar__Dmg[i],$25DAB820,0)
call DzFrameSetAlpha(BossBar__Dmg[i],0)
endif
set i=i+1
endloop
endfunction
function BossBar__CreateFrame takes nothing returns integer
local integer i=0
loop
if BossBar__Dmg[i]==0 then
set BossBar__Dmg[i]=DzCreateFrameByTagName("BACKDROP","Dmg",DzFrameFindByName("BsBa_Back",0),"",i)
call DzFrameSetTexture(BossBar__Dmg[i],"Textures\\white.blp",0)
set BossBar__Dmx=BossBar__Dmx+1
endif
if LoadInteger(BossBar__hash,BossBar__Dmg[i],$25DAB820)==0 then
call DzFrameClearAllPoints(BossBar__Dmg[i])
call SaveInteger(BossBar__hash,BossBar__Dmg[i],$25DAB820,255)
call DzFrameSetAlpha(BossBar__Dmg[i],255)
call DzFrameShow(BossBar__Dmg[i],false)
return BossBar__Dmg[i]
endif
set i=i+1
endloop
return 0
endfunction
function BossBar__Refresh takes nothing returns nothing
local integer pid
local real temp
local real temp2
local real temp3
local real temp4
local integer temp5
local integer f
local integer f2
local integer f3
local integer i=0
local integer i2
local boolean bol=true
local string l__str
loop
exitwhen i>BossBar__Cnt
if BossBar_Bos[i]!=null then
set temp=BossBar__Max[i]/BossBar__Lne[i]
set temp2=GetWidgetLife(BossBar_Bos[i])
set temp3=temp2-I2R(R2I(temp2/temp))*temp
if temp3==0 then
set temp3=temp
endif
set temp4=temp2/temp-0.00001
set temp5=R2I(temp4-I2R(R2I(temp4/7))*7)
if temp2<BossBar__Bfe2[i]then
if BossBar__Bfe[i]!=temp3 then
if BossBar__Bfe2[i]-temp2<temp then
if BossBar__Bfe[i]>temp3 then
set f=BossBar__CreateFrame()
set f2=0
call DzFrameSetSize(f,0.396*(BossBar__Bfe[i]-temp3)/temp,0.02)
call DzFrameSetPoint(f,JN_FRAMEPOINT_RIGHT,DzFrameFindByName("BsBa_LineA",0),JN_FRAMEPOINT_RIGHT,-0.396+0.396*BossBar__Bfe[i]/temp,0)
else
set f=BossBar__CreateFrame()
set f2=BossBar__CreateFrame()
call DzFrameSetSize(f,0.396*BossBar__Bfe[i]/temp,0.02)
call DzFrameSetSize(f2,0.396*(temp-temp3)/temp,0.02)
call DzFrameSetPoint(f,JN_FRAMEPOINT_LEFT,DzFrameFindByName("BsBa_LineA",0),JN_FRAMEPOINT_LEFT,0,0)
call DzFrameSetPoint(f2,JN_FRAMEPOINT_RIGHT,DzFrameFindByName("BsBa_LineA",0),JN_FRAMEPOINT_RIGHT,0,0)
endif
else
set f=BossBar__CreateFrame()
set f2=0
call DzFrameSetSize(f,0.396,0.02)
call DzFrameSetPoint(f,JN_FRAMEPOINT_CENTER,DzFrameFindByName("BsBa_LineA",0),JN_FRAMEPOINT_CENTER,0,0)
endif
set f3=BossBar__CreateFrame()
call DzFrameSetSize(f3,RMaxBJ(0.0005,0.396*(BossBar__Bfe2[i]-temp2)/BossBar__Max[i]),0.006)
call DzFrameSetPoint(f3,JN_FRAMEPOINT_TOPRIGHT,DzFrameFindByName("BsBa_MiniBack",0),JN_FRAMEPOINT_TOPRIGHT,-0.0015-0.396+0.396*BossBar__Bfe2[i]/BossBar__Max[i],0)
else
set f=0
set f2=0
set f3=0
endif
else
set f=0
set f2=0
set f3=0
endif
set BossBar__Bfe[i]=temp3
set BossBar__Bfe2[i]=temp2
set pid=0
loop
exitwhen pid>bj_MAX_PLAYERS
if BossBar_Idx[pid]==i then
if GetLocalPlayer()==Player(pid)then
call DzFrameSetSize(DzFrameFindByName("BsBa_LineB",0),0.396*temp3/temp,0.02)
call DzFrameSetSize(DzFrameFindByName("BsBa_MiniLine",0),0.396*temp2/BossBar__Max[i],0.006)
if f !=0 then
call DzFrameShow(f,true)
endif
if f2 !=0 then
call DzFrameShow(f2,true)
endif
if f3 !=0 then
call DzFrameShow(f3,true)
endif
if temp4>1 then
call DzFrameSetTexture(DzFrameFindByName("BsBa_LineA",0),BossBar__Str[temp5],0)
else
call DzFrameSetTexture(DzFrameFindByName("BsBa_LineA",0),"Textures\\Black32.blp",0)
endif
call DzFrameSetTexture(DzFrameFindByName("BsBa_LineB",0),BossBar__Str[temp5+1],0)
set l__str=R2S(temp2/BossBar__Max[i]*100)
call DzFrameSetText(DzFrameFindByName("BsBa_TextP",0),JNStringSub(l__str,0,JNStringLength(l__str)-2)+"%")
call DzFrameSetText(DzFrameFindByName("BsBa_TextL",0),"x"+I2S(R2I(temp4+1)))
endif
set bol=false
endif
set pid=pid+1
endloop
endif
set i=i+1
endloop
set i2=0
loop
exitwhen i2>BossBar__Dmx
set f=LoadInteger(BossBar__hash,BossBar__Dmg[i2],$25DAB820)
if f>0 then
set f=IMaxBJ(0,f-20)
call SaveInteger(BossBar__hash,BossBar__Dmg[i2],$25DAB820,f)
call DzFrameSetAlpha(BossBar__Dmg[i2],f)
endif
set i2=i2+1
endloop
if bol then
set BossBar__Cnt=BossBar__Cnt-1
if BossBar__Cnt==0 then
call PauseTimer(BossBar__Tme)
call DestroyTimer(BossBar__Tme)
set BossBar__Tme=null
endif
endif
endfunction
function BossBar_Setting takes unit boss,integer line returns nothing
set BossBar__Cnt=BossBar__Cnt+1
set BossBar_Bos[BossBar__Cnt]=boss
set BossBar__Lne[BossBar__Cnt]=line
set BossBar__Max[BossBar__Cnt]=GetUnitState(boss,UNIT_STATE_MAX_LIFE)
set BossBar__Bfe[BossBar__Cnt]=BossBar__Max[BossBar__Cnt]/BossBar__Lne[BossBar__Cnt]
if BossBar__Tme==null then
set BossBar__Tme=CreateTimer()
call TimerStart(BossBar__Tme,0.03125,true,function BossBar__Refresh)
endif
set boss=null
endfunction
function BossBar_Apply takes player p,unit boss returns nothing
set BossBar_Idx[GetPlayerId(p)]=BossBar_GetBossNum(boss)
if GetLocalPlayer()==p then
call DzFrameShow(DzFrameFindByName("BsBa_Back",0),true)
call DzFrameSetSize(DzFrameFindByName("BsBa_LineB",0),0.396,0.02)
call DzFrameSetSize(DzFrameFindByName("BsBa_MiniLine",0),0.396,0.006)
call DzFrameSetTexture(DzFrameFindByName("BsBa_MiniLine",0),"ReplaceableTextures\\TeamColor\\TeamColor00.blp",0)
endif
set p=null
set boss=null
endfunction
function BossBar__DelayedInit takes nothing returns nothing
local trigger trg
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call DzLoadToc("FDE Import.toc")
set BossBar__Bar=DzCreateFrame("BsBa_Back",DzGetGameUI(),0)
call DzFrameSetAbsolutePoint(BossBar__Bar,JN_FRAMEPOINT_CENTER,0.4,0.52)
call DzFrameSetTexture(DzFrameFindByName("BsBa_LineB",0),"Textures\\Black32.blp",0)
call DzFrameSetSize(DzFrameFindByName("BsBa_LineB",0),0.396,0.02)
call DzFrameShow(BossBar__Bar,false)
set BossBar__Str[0]="ReplaceableTextures\\TeamColor\\TeamColor03.blp"
set BossBar__Str[1]="ReplaceableTextures\\TeamColor\\TeamColor00.blp"
set BossBar__Str[2]="ReplaceableTextures\\TeamColor\\TeamColor05.blp"
set BossBar__Str[3]="ReplaceableTextures\\TeamColor\\TeamColor04.blp"
set BossBar__Str[4]="ReplaceableTextures\\TeamColor\\TeamColor06.blp"
set BossBar__Str[5]="ReplaceableTextures\\TeamColor\\TeamColor02.blp"
set BossBar__Str[6]="ReplaceableTextures\\TeamColor\\TeamColor01.blp"
set BossBar__Str[7]="ReplaceableTextures\\TeamColor\\TeamColor03.blp"
set BossBar__Str[8]="ReplaceableTextures\\TeamColor\\TeamColor00.blp"
endfunction
function BossBar__OnInit takes nothing returns nothing
call TimerStart(CreateTimer(),0,false,function BossBar__DelayedInit)
endfunction
function BoosTextT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer time=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveInteger(udg_Hash,GetHandleId(t),0,time-8)
if time>=1 and time<=255 then
call DzFrameSetAlpha(DzFrameFindByName("BossWarningBar",0),time)
call DzFrameSetAlpha(DzFrameFindByName("BossWarningBarImage",0),time)
elseif time<=0 then
call DzFrameShow(DzFrameFindByName("BossWarningBar",0),false)
call DzFrameShow(DzFrameFindByName("BossWarningBarImage",0),false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
endif
set t=null
endfunction
function BossText takes string txt,string blp returns nothing
local timer t=BossWarningT
call DzFrameShow(DzFrameFindByName("BossWarningBar",0),true)
call DzFrameShow(DzFrameFindByName("BossWarningBarImage",0),true)
call DzFrameSetTexture(DzFrameFindByName("BossWarningBarImage",0),blp,0)
call DzFrameSetText(DzFrameFindByName("BossWarningBarText",0),txt)
call DzFrameSetAlpha(DzFrameFindByName("BossWarningBar",0),255)
call DzFrameSetAlpha(DzFrameFindByName("BossWarningBarImage",0),255)
call TimerStart(t,0.08,true,function BoosTextT)
call SaveInteger(udg_Hash,GetHandleId(t),0,355)
set t=null
endfunction
function Buff__BuffTime takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),2)
local integer Num=LoadInteger(udg_Hash,GetHandleId(t),0)
local real time=LoadReal(udg_Hash,GetHandleId(u),$8ED5629E+Num)
local real Maxtime=LoadReal(udg_Hash,GetHandleId(u),$4AB1AA71+Num)
local integer buf=LoadInteger(udg_Hash,GetHandleId(u),$3E8527F6+Num)
local boolean battle=LoadBoolean(udg_Hash,GetHandleId(u),$7145653C+Num)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real tempR
local integer temp
if time<=0 then
if buf=='AT05' then
call SaveBoolean(System,p,$77EBFF9B,false)
set tempR=LoadReal(Hash_Stat,p,$164C40C9)
call SaveReal(Hash_Stat,p,$164C40C9,tempR-0.20)
set temp=LoadInteger(Hash_Stat,p,$6ACE3FD7)
call SaveInteger(Hash_Stat,p,$6ACE3FD7,temp-60)
set temp=LoadInteger(Hash_Stat,p,$488FEE02)
call SaveInteger(Hash_Stat,p,$488FEE02,temp-10)
set temp=LoadInteger(Hash_Stat,p,$8885555B)
call SaveInteger(Hash_Stat,p,$8885555B,temp-12)
call TimerStart(udg_infoRe[p],0.00,false,null)
endif
if buf=='BI06' then
call UnitRemoveAbility(u,'A021')
call SaveBoolean(Hash_Stat,p,$B26AA776,false)
call TimerStart(udg_infoRe[p],0.00,false,null)
endif
if buf=='B016' then
set temp=LoadInteger(udg_Hash,p,$323CB7AD)
call SaveInteger(udg_Hash,p,$323CB7AD,0)
if temp>=20 then
set tempR=LoadReal(Hash_Stat,p,$2034A1E3)
call SaveReal(Hash_Stat,p,$2034A1E3,tempR-0.1)
call TimerStart(udg_infoRe[p],0.00,false,null)
else
set tempR=LoadReal(Hash_Stat,p,$2034A1E3)
call SaveReal(Hash_Stat,p,$2034A1E3,tempR-(temp*0.01))
call TimerStart(udg_infoRe[p],0.00,false,null)
endif
endif
call SaveInteger(udg_Hash,GetHandleId(u),$3E8527F6+Num,0)
call RemoveSavedInteger(udg_Hash,GetHandleId(u),$3E8527F6+Num)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",Num),false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
if battle then
set time=TimerGetRemaining(udg_BattleEND[p])
set Maxtime=12
else
if time<=9998 then
set time=time-0.07
elseif time>=9999 and not UnitAlive(u)then
set time=0
endif
endif
call TimerStart(t,0.07,false,function Buff__BuffTime)
call SaveReal(udg_Hash,GetHandleId(u),$8ED5629E+Num,time)
set tempR=(time/Maxtime)
set temp=0
loop
set temp=temp+1
if GetLocalPlayer()==Player(PP[temp]-1)and LoadUnitHandle(udg_Hashtable,PP[temp],$C91F8651)==u then
if time<=9998 then
call DzFrameSetText(DzFrameFindByName("Stat_Mini_TIME",Num),"남은 지속시간 : "+R2S(time))
call DzFrameSetAnimateOffset(DzFrameFindByName("InVe_MiniIconCooldown",Num),tempR)
else
call DzFrameSetText(DzFrameFindByName("Stat_Mini_TIME",Num)," ")
call DzFrameSetAnimateOffset(DzFrameFindByName("InVe_MiniIconCooldown",Num),tempR)
endif
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",Num),true)
endif
exitwhen temp==Playint
endloop
if Num>=2 and LoadInteger(udg_Hash,GetHandleId(u),$3E8527F6+Num-1)==0 then
call SaveInteger(udg_Hash,GetHandleId(u),$3E8527F6+Num,0)
call RemoveSavedInteger(udg_Hash,GetHandleId(u),$3E8527F6+Num)
set Num=Num-1
set temp=0
loop
set temp=temp+1
if GetLocalPlayer()==Player(PP[temp]-1)and LoadUnitHandle(udg_Hashtable,PP[temp],$C91F8651)==u then
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",Num+1),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",Num),true)
call DzFrameSetTexture(DzFrameFindByName("Stat_Mini_Icon",Num),EXExecuteScript("(require'jass.slk').buff["+I2S(buf)+"].BuffArt"),0)
call DzFrameSetText(DzFrameFindByName("Stat_Mini_Title",Num),EXExecuteScript("(require'jass.slk').buff["+I2S(buf)+"].Bufftip"))
call DzFrameSetText(DzFrameFindByName("Stat_Mini_DesInf",Num),EXExecuteScript("(require'jass.slk').buff["+I2S(buf)+"].Buffubertip"))
set tempR=(time/Maxtime)
call DzFrameSetAnimateOffset(DzFrameFindByName("InVe_MiniIconCooldown",Num),tempR)
endif
exitwhen temp==Playint
endloop
call SaveInteger(udg_Hash,GetHandleId(u),$B15D72C5,Num)
call SaveInteger(udg_Hash,GetHandleId(u),$3E8527F6+Num,buf)
call SaveReal(udg_Hash,GetHandleId(u),$8ED5629E+Num,time)
call SaveReal(udg_Hash,GetHandleId(u),$4AB1AA71+Num,Maxtime)
call SaveBoolean(udg_Hash,GetHandleId(u),$7145653C+Num,battle)
call SaveInteger(udg_Hash,GetHandleId(t),0,Num)
endif
endif
set t=null
set u=null
endfunction
function BuffCall takes unit u,integer buf,real time,boolean plus,boolean battle returns nothing
local timer t
local integer buffNum=1
local real tempR
local integer temp
local integer temp2
set temp=LoadInteger(udg_Hash,GetHandleId(u),$3E8527F6+buffNum)
loop
exitwhen temp==0 or temp==buf
set buffNum=buffNum+1
set temp=LoadInteger(udg_Hash,GetHandleId(u),$3E8527F6+buffNum)
endloop
if temp==buf then
if plus then
set tempR=LoadReal(udg_Hash,GetHandleId(u),$8ED5629E+buffNum)
call SaveReal(udg_Hash,GetHandleId(u),$8ED5629E+buffNum,tempR+time)
call SaveReal(udg_Hash,GetHandleId(u),$4AB1AA71+buffNum,tempR+time)
else
call SaveReal(udg_Hash,GetHandleId(u),$8ED5629E+buffNum,time)
call SaveReal(udg_Hash,GetHandleId(u),$4AB1AA71+buffNum,time)
endif
else
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(u),$B15D72C5,buffNum)
call SaveInteger(udg_Hash,GetHandleId(u),$3E8527F6+buffNum,buf)
call SaveReal(udg_Hash,GetHandleId(u),$8ED5629E+buffNum,time)
call SaveReal(udg_Hash,GetHandleId(u),$4AB1AA71+buffNum,time)
call SaveBoolean(udg_Hash,GetHandleId(u),$7145653C+buffNum,battle)
call SaveUnitHandle(udg_Hash,GetHandleId(t),2,u)
call SaveInteger(udg_Hash,GetHandleId(t),0,buffNum)
if buffNum<=8 then
set temp2=0
loop
set temp2=temp2+1
if GetLocalPlayer()==Player(PP[temp2]-1)and LoadUnitHandle(udg_Hashtable,PP[temp2],$C91F8651)==u then
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",buffNum),true)
call DzFrameSetTexture(DzFrameFindByName("Stat_Mini_Icon",buffNum),EXExecuteScript("(require'jass.slk').buff["+I2S(buf)+"].BuffArt"),0)
call DzFrameSetText(DzFrameFindByName("Stat_Mini_Title",buffNum),EXExecuteScript("(require'jass.slk').buff["+I2S(buf)+"].Bufftip"))
call DzFrameSetText(DzFrameFindByName("Stat_Mini_DesInf",buffNum),EXExecuteScript("(require'jass.slk').buff["+I2S(buf)+"].Buffubertip"))
call DzFrameSetText(DzFrameFindByName("Stat_Mini_TIME",buffNum),"남은 지속시간 : "+R2S(time))
endif
exitwhen temp2==Playint
endloop
call TimerStart(t,0.03,false,function Buff__BuffTime)
endif
endif
set t=null
set u=null
endfunction
function s__Curve__get_X takes nothing returns real
return s__Curve_cX
endfunction
function s__Curve__get_Y takes nothing returns real
return s__Curve_cY
endfunction
function s__Curve__get_Z takes nothing returns real
return s__Curve_cZ
endfunction
function s__Curve_SetBezier1 takes real x1,real y1,real z1,real x2,real y2,real z2,real p returns nothing
set s__Curve_cX=x1+p*(x2-x1)
set s__Curve_cY=y1+p*(y2-y1)
set s__Curve_cZ=z1+p*(z2-z1)
endfunction
function s__Curve_SetBezier2 takes real x1,real y1,real z1,real x2,real y2,real z2,real x3,real y3,real z3,real p returns nothing
local real xa=x1+p*(x2-x1)
local real ya=y1+p*(y2-y1)
local real za=z1+p*(z2-z1)
local real xb=x2+p*(x3-x2)
local real yb=y2+p*(y3-y2)
local real zb=z2+p*(z3-z2)
set s__Curve_cX=xa+p*(xb-xa)
set s__Curve_cY=ya+p*(yb-ya)
set s__Curve_cZ=za+p*(zb-za)
endfunction
function s__Curve_SetBezier3 takes real x1,real y1,real z1,real x2,real y2,real z2,real x3,real y3,real z3,real x4,real y4,real z4,real p returns nothing
local real xi=x1+p*(x2-x1)
local real yi=y1+p*(y2-y1)
local real zi=z1+p*(z2-z1)
local real xj=x2+p*(x3-x2)
local real yj=y2+p*(y3-y2)
local real zj=z2+p*(z3-z2)
local real xk=x3+p*(x4-x3)
local real yk=y3+p*(y4-y3)
local real zk=z3+p*(z4-z3)
local real xa=xi+p*(xj-xi)
local real ya=yi+p*(yj-yi)
local real za=zi+p*(zj-zi)
local real xb=xj+p*(xk-xj)
local real yb=yj+p*(yk-yj)
local real zb=zj+p*(zk-zj)
set s__Curve_cX=xa+p*(xb-xa)
set s__Curve_cY=ya+p*(yb-ya)
set s__Curve_cZ=za+p*(zb-za)
endfunction
function s__Curve_SetSin takes real x1,real y1,real z1,real x2,real y2,real z2,real h,real p returns nothing
set s__Curve_cX=x1+p*(x2-x1)
set s__Curve_cY=y1+p*(y2-y1)
set s__Curve_cZ=z1+p*(z2-z1)+h*Sin(bj_PI*p)
endfunction
function s__CustomStun__EVENT_FireEx takes trigger t,integer obj returns nothing
local integer pobj=CustomStun__P_STUN
set CustomStun__P_STUN=obj
call TriggerEvaluate(t)
set CustomStun__P_STUN=pobj
endfunction
function s__CustomStun__PROC_OnStunTimeout takes nothing returns nothing
local integer data=LoadInteger(CustomStun__TABLE,CustomStun__IN_KEY,GetHandleId(GetExpiredTimer()))
local real timeout=CustomStun__M_FTIM[data]
local real elapsed=CustomStun__M_ELAP[data]+CustomStun__SYSTEM_TIMEOUT_DELAY
local real remaining=timeout-elapsed
set CustomStun__M_ELAP[data]=elapsed
if remaining<0.0 then
call s__CustomStun__EVENT_FireEx(CustomStun__E_STUN_END,data)
call UnitRemoveAbility(CustomStun__M_UTAR[data],CustomStun__SYSTEM_BUFF_ID)
call RemoveSavedInteger(CustomStun__TABLE,CustomStun__IN_KEY,GetHandleId(CustomStun__M_TIMR[data]))
call RemoveSavedInteger(CustomStun__TABLE,CustomStun__IN_KEY,CustomStun__M_HNDL[data])
set CustomStun__M_UCAS[data]=null
set CustomStun__M_UTAR[data]=null
call DestroyTimer(CustomStun__M_TIMR[data])
set CustomStun__M_TIMR[data]=null
call s__CustomStun__IN_INDEXER_deallocate(data)
return
endif
call s__CustomStun__EVENT_FireEx(CustomStun__E_STUN_TIMEOUT,data)
endfunction
function s__CustomStun__PROC_OnStun takes nothing returns boolean
local unit src=CustomStun__T_SRC
local unit dst=CustomStun__T_DST
local real timeout=CustomStun__T_TIMEOUT
local integer data=LoadInteger(CustomStun__TABLE,CustomStun__IN_KEY,GetHandleId(dst))
if data==0 then
set data=s__CustomStun__IN_INDEXER__allocate()
set CustomStun__M_UCAS[data]=src
set CustomStun__M_UTAR[data]=dst
set CustomStun__M_FTIM[data]=timeout
set CustomStun__M_DSDU[data]=0.0
set CustomStun__M_SDUR[data]=0.0
set CustomStun__M_ELAP[data]=0.0
set CustomStun__M_TIMR[data]=CreateTimer()
set CustomStun__M_HNDL[data]=GetHandleId(dst)
call SaveInteger(CustomStun__TABLE,CustomStun__IN_KEY,GetHandleId(CustomStun__M_TIMR[data]),data)
call SaveInteger(CustomStun__TABLE,CustomStun__IN_KEY,GetHandleId(dst),data)
call SetUnitX(CustomStun__SYSTEM_DUMMY,GetUnitX(dst))
call SetUnitY(CustomStun__SYSTEM_DUMMY,GetUnitY(dst))
call UnitAddAbility(CustomStun__SYSTEM_DUMMY,'A008')
call IssueTargetOrder(CustomStun__SYSTEM_DUMMY,CustomStun__SYSTEM_DUMMY_COMMAND,dst)
call SetUnitX(CustomStun__SYSTEM_DUMMY,GetRectCenterX(gg_rct_WisspZone))
call SetUnitY(CustomStun__SYSTEM_DUMMY,GetRectCenterY(gg_rct_WisspZone))
call s__CustomStun__EVENT_FireEx(CustomStun__E_STUN_NEW,data)
else
set CustomStun__M_DSDU[data]=timeout
set CustomStun__M_SDUR[data]=timeout
call s__CustomStun__EVENT_FireEx(CustomStun__E_STUN_BEFORE_STACK,data)
set CustomStun__M_FTIM[data]=CustomStun__M_FTIM[data]+CustomStun__M_SDUR[data]
call s__CustomStun__EVENT_FireEx(CustomStun__E_STUN_STACK,data)
endif
call s__CustomStun__EVENT_FireEx(CustomStun__E_STUN_START,data)
call TimerStart(CustomStun__M_TIMR[data],CustomStun__SYSTEM_TIMEOUT_DELAY,true,function s__CustomStun__PROC_OnStunTimeout)
set src=null
set dst=null
return false
endfunction
function s__CustomStun__PROC_onInit takes nothing returns nothing
call TriggerAddCondition(CustomStun__T_CALL,Condition(function s__CustomStun__PROC_OnStun))
endfunction
function s__CustomStun_RegisterStunNewEvent takes code c returns triggercondition
return TriggerAddCondition(CustomStun__E_STUN_NEW,Condition(c))
endfunction
function s__CustomStun_RegisterStunBeforeStackEvent takes code c returns triggercondition
return TriggerAddCondition(CustomStun__E_STUN_BEFORE_STACK,Condition(c))
endfunction
function s__CustomStun_RegisterStunStackEvent takes code c returns triggercondition
return TriggerAddCondition(CustomStun__E_STUN_STACK,Condition(c))
endfunction
function s__CustomStun_RegisterStunStartEvent takes code c returns triggercondition
return TriggerAddCondition(CustomStun__E_STUN_START,Condition(c))
endfunction
function s__CustomStun_RegisterStunTimeoutEvent takes code c returns triggercondition
return TriggerAddCondition(CustomStun__E_STUN_TIMEOUT,Condition(c))
endfunction
function s__CustomStun_RegisterStunEndEvent takes code c returns triggercondition
return TriggerAddCondition(CustomStun__E_STUN_END,Condition(c))
endfunction
function s__CustomStun_GetEventStunId takes nothing returns integer
return CustomStun__P_STUN
endfunction
function s__CustomStun_GetEventStunSource takes nothing returns unit
return CustomStun__M_UCAS[CustomStun__P_STUN]
endfunction
function s__CustomStun_GetTriggerUnit takes nothing returns unit
return CustomStun__M_UTAR[CustomStun__P_STUN]
endfunction
function s__CustomStun_GetStunnedUnit takes nothing returns unit
return CustomStun__M_UTAR[CustomStun__P_STUN]
endfunction
function s__CustomStun_GetTimeout takes nothing returns real
return CustomStun__M_FTIM[CustomStun__P_STUN]
endfunction
function s__CustomStun_GetElapsed takes nothing returns real
return CustomStun__M_ELAP[CustomStun__P_STUN]
endfunction
function s__CustomStun_GetRemaining takes nothing returns real
return CustomStun__M_FTIM[CustomStun__P_STUN]-CustomStun__M_ELAP[CustomStun__P_STUN]
endfunction
function s__CustomStun_GetDefaultStackDuration takes nothing returns real
return CustomStun__M_DSDU[CustomStun__P_STUN]
endfunction
function s__CustomStun_GetStackDuration takes nothing returns real
return CustomStun__M_SDUR[CustomStun__P_STUN]
endfunction
function s__CustomStun_SetStackDuration takes real dur returns nothing
set CustomStun__M_SDUR[CustomStun__P_STUN]=dur
endfunction
function s__CustomStun_Stun takes unit dst,real timeout returns nothing
if GetUnitTypeId(dst)==0 then
set dst=null
return
endif
set CustomStun__T_SRC=null
set CustomStun__T_DST=dst
set CustomStun__T_TIMEOUT=timeout
call TriggerEvaluate(CustomStun__T_CALL)
set dst=null
endfunction
function s__CustomStun_StunEx takes unit src,unit dst,real timeout returns nothing
if GetUnitTypeId(dst)==0 then
set src=null
set dst=null
return
endif
set CustomStun__T_SRC=src
set CustomStun__T_DST=dst
set CustomStun__T_TIMEOUT=timeout
call TriggerEvaluate(CustomStun__T_CALL)
set src=null
set dst=null
endfunction
function s__CustomStun_Clear takes unit dst returns nothing
local integer data=LoadInteger(CustomStun__TABLE,CustomStun__IN_KEY,GetHandleId(dst))
set dst=null
if data==0 then
return
endif
set CustomStun__M_ELAP[data]=0.0
set CustomStun__M_FTIM[data]=0.0
endfunction
function s__CustomStun_GetUnitStunRemaining takes unit dst returns real
local integer data=LoadInteger(CustomStun__TABLE,CustomStun__IN_KEY,GetHandleId(dst))
set dst=null
if data==0 then
return 0.0
endif
return CustomStun__M_FTIM[data]-CustomStun__M_ELAP[data]
endfunction
function s__CustomStun_SetUnitStunRemaining takes unit dst,real dur returns boolean
local integer data=LoadInteger(CustomStun__TABLE,CustomStun__IN_KEY,GetHandleId(dst))
set dst=null
if data==0 then
return false
endif
set CustomStun__M_FTIM[data]=CustomStun__M_ELAP[data]+dur
return true
endfunction
function s__CustomStun_AddUnitStunRemaining takes unit dst,real delta returns boolean
local integer data=LoadInteger(CustomStun__TABLE,CustomStun__IN_KEY,GetHandleId(dst))
set dst=null
if data==0 then
return false
endif
set CustomStun__M_FTIM[data]=CustomStun__M_FTIM[data]+delta
return true
endfunction
function CustomStun__OnMapLoad takes nothing returns nothing
set CustomStun__SYSTEM_DUMMY=CreateUnit(CustomStun__SYSTEM_DUMMY_OWNER,CustomStun__SYSTEM_DUMMY_ID,CustomStun__SYSTEM_DUMMY_X,CustomStun__SYSTEM_DUMMY_Y,270.0)
call UnitAddAbility(CustomStun__SYSTEM_DUMMY,'Avul')
call UnitAddAbility(CustomStun__SYSTEM_DUMMY,'Aloc')
endfunction
function DamageEngineDefensive__A1 takes unit src,unit dst returns nothing
local integer i
local item pt
call TriggerEvaluate(DamageEngineDefensive__EAA)
call TriggerEvaluate(LoadTriggerHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EUTA,GetUnitTypeId(src)))
if IsUnitType(src,UNIT_TYPE_HERO)then
set pt=DamageEngineDefensive__PT
set i=UnitInventorySize(src)
loop
exitwhen i==0
set i=i-1
set DamageEngineDefensive__PT=UnitItemInSlot(src,i)
call TriggerEvaluate(LoadTriggerHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EITA,GetItemTypeId(DamageEngineDefensive__PT)))
endloop
set DamageEngineDefensive__PT=pt
set pt=null
endif
if IsUnitType(dst,UNIT_TYPE_HERO)then
set pt=DamageEngineDefensive__PT
set i=UnitInventorySize(dst)
loop
exitwhen i==0
set i=i-1
set DamageEngineDefensive__PT=UnitItemInSlot(dst,i)
call TriggerEvaluate(LoadTriggerHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EITH,GetItemTypeId(DamageEngineDefensive__PT)))
endloop
set DamageEngineDefensive__PT=pt
set pt=null
endif
call TriggerEvaluate(LoadTriggerHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EUTH,GetUnitTypeId(dst)))
call TriggerEvaluate(DamageEngineDefensive__EAH)
endfunction
function DamageEngineDefensive__dA takes nothing returns boolean
if GetEventDamage()!=0 then
call DamageEngineDefensive__A1(GetEventDamageSource(),GetTriggerUnit())
endif
return false
endfunction
function rT takes nothing returns nothing
local unit u=GetEnumUnit()
if GetUnitTypeId(u)!=0 and u !=Charcter[1]and u !=Charcter[2]and u !=Charcter[3]and u !=Charcter[4]and u !=Charcter[5]and u !=Boss then
call TriggerRegisterUnitEvent(DamageEngineDefensive__dT,u,EVENT_UNIT_DAMAGED)
endif
set u=null
endfunction
function DamageEngineDefensive__RefreshAll takes nothing returns nothing
local group g=CreateGroup()
local code c=function DamageEngineDefensive__dA
call GroupEnumUnitsInRect(g,GetWorldBounds(),null)
call ResetTrigger(DamageEngineDefensive__dT)
call DestroyTrigger(DamageEngineDefensive__dT)
set DamageEngineDefensive__dT=CreateTrigger()
call TriggerAddCondition(DamageEngineDefensive__dT,Filter(DamageEngineDefensive__dC))
call ForGroup(g,function rT)
call TriggerRegisterUnitEvent(DamageEngineDefensive__dT,Charcter[1],EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(DamageEngineDefensive__dT,Charcter[2],EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(DamageEngineDefensive__dT,Charcter[3],EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(DamageEngineDefensive__dT,Charcter[4],EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(DamageEngineDefensive__dT,Charcter[5],EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(DamageEngineDefensive__dT,Boss,EVENT_UNIT_DAMAGED)
call GroupClear(g)
call DestroyGroup(g)
set g=null
set c=null
endfunction
function DamageEngineDefensive__RefreshInit takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerAddAction(t,function DamageEngineDefensive__RefreshAll)
call TriggerRegisterTimerEvent(t,DamageEngineDefensive__TRIGGER_REFRESH_PERIOD,true)
set t=null
endfunction
function DamageEngineDefensive__fR takes nothing returns nothing
local unit u=GetEnteringUnit()
if GetUnitAbilityLevel(u,DamageEngineDefensive__aI)<1 then
call UnitAddAbility(u,DamageEngineDefensive__aI)
call TriggerRegisterUnitEvent(DamageEngineDefensive__dT,u,EVENT_UNIT_DAMAGED)
endif
set u=null
endfunction
function DamageEngineDefensive__InitRegister takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerAddAction(t,function DamageEngineDefensive__fR)
call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
set t=null
endfunction
function DamageEngineDefensive__fE takes nothing returns boolean
call UnitAddAbility(GetFilterUnit(),DamageEngineDefensive__aI)
call TriggerRegisterUnitEvent(DamageEngineDefensive__dT,GetFilterUnit(),EVENT_UNIT_DAMAGED)
return false
endfunction
function DamageEngineDefensive__RegisterPlayerUnits takes player p returns nothing
call GroupEnumUnitsOfPlayer(DamageEngineDefensive__rG,p,DamageEngineDefensive__rF)
endfunction
function DamageEngineDefensive__RegisterAll takes nothing returns nothing
local integer i=0
set DamageEngineDefensive__rF=Filter(function DamageEngineDefensive__fE)
loop
exitwhen i==bj_MAX_PLAYER_SLOTS
call GroupEnumUnitsOfPlayer(DamageEngineDefensive__rG,(Player(i)),DamageEngineDefensive__rF)
set i=i+1
endloop
endfunction
function DamageEngineDefensive__OnMapLoad takes nothing returns nothing
set DamageEngineDefensive__aI=DamageEngineDefensive__DAMAGE_TYPE_DETECTOR
set DamageEngineDefensive__dC=function DamageEngineDefensive__dA
set DamageEngineDefensive__dT=CreateTrigger()
call DamageEngineDefensive__RefreshInit()
call DamageEngineDefensive__RegisterAll()
call DamageEngineDefensive__InitRegister()
call TriggerAddCondition(DamageEngineDefensive__dT,Filter(DamageEngineDefensive__dC))
endfunction
function s__DamageEngine_RegisterAnyUnitAttackEvent takes code trigAction returns triggercondition
return TriggerAddCondition(DamageEngineDefensive__EAA,Condition(trigAction))
endfunction
function s__DamageEngine_RegisterUnitTypeAttackEvent takes integer typeId,code trigAction returns triggercondition
if not HaveSavedHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EUTA,typeId)then
call SaveTriggerHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EUTA,typeId,CreateTrigger())
endif
return TriggerAddCondition(LoadTriggerHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EUTA,typeId),Condition(trigAction))
endfunction
function s__DamageEngine_RegisterAnyUnitHitEvent takes code trigAction returns triggercondition
return TriggerAddCondition(DamageEngineDefensive__EAH,Condition(trigAction))
endfunction
function s__DamageEngine_RegisterUnitTypeHitEvent takes integer typeId,code trigAction returns triggercondition
if not HaveSavedHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EUTH,typeId)then
call SaveTriggerHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EUTH,typeId,CreateTrigger())
endif
return TriggerAddCondition(LoadTriggerHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EUTH,typeId),Condition(trigAction))
endfunction
function s__DamageEngine_GetEventItem takes nothing returns item
return DamageEngineDefensive__PT
endfunction
function s__DamageEngine_RegisterItemTypeAttackEvent takes integer typeId,code trigAction returns triggercondition
if not HaveSavedHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EITA,typeId)then
call SaveTriggerHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EITA,typeId,CreateTrigger())
endif
return TriggerAddCondition(LoadTriggerHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EITA,typeId),Condition(trigAction))
endfunction
function s__DamageEngine_RegisterItemTypeHitEvent takes integer typeId,code trigAction returns triggercondition
if not HaveSavedHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EITH,typeId)then
call SaveTriggerHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EITH,typeId,CreateTrigger())
endif
return TriggerAddCondition(LoadTriggerHandle(DamageEngineDefensive__ET,DamageEngineDefensive__EITH,typeId),Condition(trigAction))
endfunction
function s__Distance_PBP takes real x,real y,real tx,real ty returns real
local real dx=tx-x
local real dy=ty-y
return SquareRoot(dx*dx+dy*dy)
endfunction
function s__Distance_WBP takes widget w,real tx,real ty returns real
local real dx=tx-GetWidgetX(w)
local real dy=ty-GetWidgetY(w)
return SquareRoot(dx*dx+dy*dy)
endfunction
function s__Distance_WBW takes widget w,widget t returns real
local real dx=GetWidgetX(t)-GetWidgetX(w)
local real dy=GetWidgetY(t)-GetWidgetY(w)
return SquareRoot(dx*dx+dy*dy)
endfunction
function s__Distance_PBW takes real x,real y,widget t returns real
local real dx=GetWidgetX(t)-x
local real dy=GetWidgetY(t)-y
return SquareRoot(dx*dx+dy*dy)
endfunction
function JNHideOriginFrames takes nothing returns nothing
call DzFrameHideInterface()
endfunction
function JNGetGameUI takes nothing returns integer
return DzGetGameUI()
endfunction
function JNFrameGetCommandBarButton takes integer x,integer y returns integer
return DzFrameGetCommandBarButton(y,x)
endfunction
function JNFrameGetHeroBarButton takes integer buttonId returns integer
return DzFrameGetHeroBarButton(buttonId)
endfunction
function JNFrameGetHeroHPBar takes integer buttonId returns integer
return DzFrameGetHeroHPBar(buttonId)
endfunction
function JNFrameGetHeroManaBar takes integer buttonId returns integer
return DzFrameGetHeroManaBar(buttonId)
endfunction
function JNFrameGetItemBarButton takes integer buttonId returns integer
return DzFrameGetItemBarButton(buttonId)
endfunction
function JNFrameGetMinimap takes nothing returns integer
return DzFrameGetMinimap()
endfunction
function JNFrameGetMinimapButton takes integer buttonId returns integer
return DzFrameGetMinimapButton(buttonId)
endfunction
function JNFrameGetUpperButtonBarButton takes integer buttonId returns integer
return DzFrameGetUpperButtonBarButton(buttonId)
endfunction
function JNFrameGetTooltip takes nothing returns integer
return DzFrameGetTooltip()
endfunction
function JNFrameGetChatMessage takes nothing returns integer
return DzFrameGetChatMessage()
endfunction
function JNFrameGetUnitMessage takes nothing returns integer
return DzFrameGetUnitMessage()
endfunction
function JNFrameGetTopMessage takes nothing returns integer
return DzFrameGetTopMessage()
endfunction
function JNFrameGetPortrait takes nothing returns integer
return DzFrameGetPortrait()
endfunction
function JNConvertColor takes integer a,integer r,integer g,integer b returns integer
return DzGetColor(a,r,g,b)
endfunction
function JNLoadTOCFile takes string TOCFile returns nothing
call DzLoadToc(TOCFile)
endfunction
function JNCreateFrame takes string name,integer owner,integer priority,integer createContext returns integer
local integer i=DzCreateFrame(name,owner,createContext)
call DzFrameSetPriority(i,priority)
return i
endfunction
function JNCreateSimpleFrame takes string name,integer owner,integer createContext returns integer
return DzCreateSimpleFrame(name,owner,createContext)
endfunction
function JNCreateFrameByType takes string typeName,string name,integer owner,string inherits,integer createContext returns integer
return DzCreateFrameByTagName(typeName,name,owner,inherits,createContext)
endfunction
function JNDestroyFrame takes integer frame returns nothing
call DzDestroyFrame(frame)
endfunction
function JNFrameSetPoint takes integer frame,integer point,integer relative,integer relativePoint,real x,real y returns nothing
call DzFrameSetPoint(frame,point,relative,relativePoint,x,y)
endfunction
function JNFrameSetAbsPoint takes integer frame,integer point,real x,real y returns nothing
call DzFrameSetAbsolutePoint(frame,point,x,y)
endfunction
function JNFrameClearAllPoints takes integer frame returns nothing
call DzFrameClearAllPoints(frame)
endfunction
function JNFrameSetAllPoints takes integer frame,integer relative returns nothing
call DzFrameSetAllPoints(frame,relative)
endfunction
function JNFrameSetVisible takes integer frame,boolean enable returns nothing
call DzFrameShow(frame,enable)
if enable then
if HaveSavedBoolean(DzAPIFrameHandle___Data,frame,0)then
call RemoveSavedBoolean(DzAPIFrameHandle___Data,frame,0)
endif
else
if not HaveSavedBoolean(DzAPIFrameHandle___Data,frame,0)then
call SaveBoolean(DzAPIFrameHandle___Data,frame,0,true)
endif
endif
endfunction
function JNFrameIsVisible takes integer frame returns boolean
return not HaveSavedBoolean(DzAPIFrameHandle___Data,frame,0)
endfunction
function DzAPIFrameHandle___I2H takes integer value returns string
local string ret=null
local integer mod
loop
exitwhen value<=0
set mod=ModuloInteger(value,16)
set ret=SubString("0123456789ABCDEF",mod,mod+1)+ret
set value=value/16
endloop
return ret
endfunction
function JNGetFrameByName takes string name,integer createContext returns integer
local integer frame=DzFrameFindByName(name,createContext)
if frame !=0 then
return frame
endif
set frame=DzSimpleFrameFindByName(name,createContext)
if frame !=0 then
return frame
endif
set frame=DzSimpleFontStringFindByName(name,createContext)
if frame !=0 then
return frame
endif
set frame=DzSimpleTextureFindByName(name,createContext)
if frame !=0 then
return frame
endif
return 0
endfunction
function JNFrameGetName takes integer frame returns string
return DzFrameGetName(frame)
endfunction
function JNFrameClick takes integer frame returns nothing
call DzClickFrame(frame)
endfunction
function JNFrameSetText takes integer frame,string text returns nothing
call DzFrameSetText(frame,text)
endfunction
function JNFrameGetText takes integer frame returns string
return DzFrameGetText(frame)
endfunction
function JNFrameAddText takes integer frame,string text returns nothing
call DzFrameSetText(frame,DzFrameGetText(frame)+text)
endfunction
function JNFrameSetTextSizeLimit takes integer frame,integer size returns nothing
call DzFrameSetTextSizeLimit(frame,size)
endfunction
function JNFrameGetTextSizeLimit takes integer frame returns integer
return DzFrameGetTextSizeLimit(frame)
endfunction
function JNFrameSetTextColor takes integer frame,integer color returns nothing
call DzFrameSetTextColor(frame,color)
endfunction
function JNFrameSetFocus takes integer frame,boolean flag returns nothing
call DzFrameSetFocus(frame,flag)
endfunction
function JNFrameSetModel takes integer frame,string modelFile,integer cameraIndex returns nothing
call DzFrameSetModel(frame,modelFile,cameraIndex,0)
endfunction
function JNFrameSetEnable takes integer frame,boolean enabled returns nothing
call DzFrameSetEnable(frame,enabled)
endfunction
function JNFrameGetEnable takes integer frame returns boolean
return DzFrameGetEnable(frame)
endfunction
function JNFrameSetAlpha takes integer frame,integer alpha returns nothing
call DzFrameSetAlpha(frame,alpha)
endfunction
function JNFrameGetAlpha takes integer frame returns integer
return DzFrameGetAlpha(frame)
endfunction
function JNFrameSetTexture takes integer frame,string texFile,integer flag returns nothing
call DzFrameSetTexture(frame,texFile,flag)
endfunction
function JNFrameSetScale takes integer frame,real scale returns nothing
call DzFrameSetScale(frame,scale)
endfunction
function JNFrameSetTooltip takes integer frame,integer tooltip returns nothing
call DzFrameSetTooltip(frame,tooltip)
endfunction
function JNFrameCageMouse takes integer frame,boolean enable returns nothing
call DzFrameCageMouse(frame,enable)
endfunction
function JNFrameSetValue takes integer frame,real value returns nothing
call DzFrameSetValue(frame,value)
endfunction
function JNFrameGetValue takes integer frame returns real
return DzFrameGetValue(frame)
endfunction
function JNFrameSetMinMaxValue takes integer frame,real minValue,real maxValue returns nothing
call DzFrameSetMinMaxValue(frame,minValue,maxValue)
endfunction
function JNFrameSetStepSize takes integer frame,real stepSize returns nothing
call DzFrameSetStepValue(frame,stepSize)
endfunction
function JNFrameSetSize takes integer frame,real width,real height returns nothing
call DzFrameSetSize(frame,width,height)
endfunction
function JNFrameSetVertexColor takes integer frame,integer color returns nothing
call DzFrameSetVertexColor(frame,color)
endfunction
function JNFrameSetLevel takes integer frame,integer level returns nothing
call DzFrameSetPriority(frame,level)
endfunction
function JNFrameSetParent takes integer frame,integer parent returns nothing
call DzFrameSetParent(frame,parent)
endfunction
function JNFrameGetParent takes integer frame returns integer
return DzFrameGetParent(frame)
endfunction
function JNFrameGetHeight takes integer frame returns real
return DzFrameGetHeight(frame)
endfunction
function JNFrameGetWidth takes integer frame returns real
return 0.
endfunction
function JNFrameSetFont takes integer frame,string fileName,real height,integer flags returns nothing
call DzFrameSetFont(frame,fileName,height,flags)
endfunction
function JNFrameSetTextAlignment takes integer frame,integer vert,integer horz returns nothing
local integer align=0
if vert==JN_TEXT_JUSTIFY_TOP then
set align=1
elseif vert==JN_TEXT_JUSTIFY_MIDDLE then
set align=2
elseif vert==JN_TEXT_JUSTIFY_BOTTOM then
set align=4
endif
if horz==JN_TEXT_JUSTIFY_LEFT then
set align=align+8
elseif horz==JN_TEXT_JUSTIFY_CENTER then
set align=align+16
elseif horz==JN_TEXT_JUSTIFY_RIGHT then
set align=align+32
endif
call DzFrameSetTextAlignment(frame,align)
endfunction
function JNFrameEditBlackBorders takes real upperHeight,real bottomHeight returns nothing
call DzFrameEditBlackBorders(upperHeight,bottomHeight)
endfunction
function JNTriggerRegisterFrameEvent takes trigger whichTrigger,integer frame,integer eventId returns nothing
endfunction
function JNFrameSetScript takes integer frame,integer eventId,code funcHandle,boolean sync returns nothing
call DzFrameSetScriptByCode(frame,eventId,funcHandle,sync)
endfunction
function JNEnableWideScreen takes boolean enable returns nothing
call DzEnableWideScreen(enable)
endfunction
function JNGetTriggerUIEventPlayer takes nothing returns player
return DzGetTriggerUIEventPlayer()
endfunction
function JNGetTriggerUIEventFrame takes nothing returns integer
return DzGetTriggerUIEventFrame()
endfunction
function JNGetTriggerPlayerMouseX takes nothing returns real
return DzGetMouseTerrainX()
endfunction
function JNGetTriggerPlayerMouseY takes nothing returns real
return DzGetMouseTerrainY()
endfunction
function JNGetTriggerPlayerMousePosition takes nothing returns location
return Location(DzGetMouseTerrainX(),DzGetMouseTerrainY())
endfunction
function JNTriggerRegisterPlayerKeyEvent takes trigger whichTrigger,player whichPlayer,integer key,integer metaKey,boolean keyDown,boolean sync returns nothing
local integer status=0
if keyDown then
set status=1
endif
if whichPlayer==null or whichPlayer==GetLocalPlayer()then
call DzTriggerRegisterKeyEvent(whichTrigger,key,status,sync,null)
endif
endfunction
function JNGetTriggerKey takes nothing returns integer
return DzGetTriggerKey()
endfunction
function JNGetTriggerIsKeyDown takes nothing returns boolean
return DzIsKeyDown(DzGetTriggerKey())
endfunction
function JNGetTriggerKeyPlayer takes nothing returns player
return DzGetTriggerKeyPlayer()
endfunction
function JNSetMousePos takes integer x,integer y returns nothing
call DzSetMousePos(x,y)
endfunction
function JNGetLocalClientWidth takes nothing returns integer
return DzGetWindowWidth()
endfunction
function JNGetLocalClientHeight takes nothing returns integer
return DzGetWindowHeight()
endfunction
function JNIsLocalClientActive takes nothing returns boolean
return DzIsWindowActive()
endfunction
function JNGetMouseFocusUnit takes nothing returns unit
return DzGetUnitUnderMouse()
endfunction
function JNChangeMinimapTerrainTex takes string texFile returns nothing
call DzSetWar3MapMap(texFile)
endfunction
function JNGetLocale takes nothing returns string
return DzGetLocale()
endfunction
function JNTriggerRegisterSyncData takes trigger whichTrigger,string prefix,boolean fromServer returns nothing
call DzTriggerRegisterSyncData(whichTrigger,prefix,fromServer)
endfunction
function JNSendSyncData takes string prefix,string data returns nothing
call DzSyncData(prefix,data)
endfunction
function JNGetTriggerSyncData takes nothing returns string
return DzGetTriggerSyncData()
endfunction
function JNGetTriggerSyncPlayer takes nothing returns player
return DzGetTriggerSyncPlayer()
endfunction
function JNSetAbilityTooltip takes integer abilCode,string tooltip,integer level returns nothing
call EXSetAbilityString(abilCode,level,ABILITY_DATA_TIP,tooltip)
endfunction
function JNSetAbilityActivatedTooltip takes integer abilCode,string tooltip,integer level returns nothing
call EXSetAbilityString(abilCode,level,ABILITY_DATA_UNTIP,tooltip)
endfunction
function JNSetAbilityExtendedTooltip takes integer abilCode,string extendedTooltip,integer level returns nothing
call EXSetAbilityString(abilCode,level,ABILITY_DATA_UBERTIP,extendedTooltip)
endfunction
function JNSetAbilityActivatedExtendedTooltip takes integer abilCode,string extendedTooltip,integer level returns nothing
call EXSetAbilityString(abilCode,level,ABILITY_DATA_UNUBERTIP,extendedTooltip)
endfunction
function JNSetAbilityResearchTooltip takes integer abilCode,string researchTooltip,integer level returns nothing
call EXSetAbilityString(abilCode,level,ABILITY_DATA_RESEARCH_TIP,researchTooltip)
endfunction
function JNSetAbilityResearchExtendedTooltip takes integer abilCode,string researchExtendedTooltip,integer level returns nothing
call EXSetAbilityString(abilCode,level,ABILITY_DATA_RESEARCH_UBERTIP,researchExtendedTooltip)
endfunction
function JNGetAbilityTooltip takes integer abilCode,integer level returns string
return EXGetAbilityString(abilCode,level,ABILITY_DATA_TIP)
endfunction
function JNGetAbilityActivatedTooltip takes integer abilCode,integer level returns string
return EXGetAbilityString(abilCode,level,ABILITY_DATA_UNTIP)
endfunction
function JNGetAbilityExtendedTooltip takes integer abilCode,integer level returns string
return EXGetAbilityString(abilCode,level,ABILITY_DATA_UBERTIP)
endfunction
function JNGetAbilityActivatedExtendedTooltip takes integer abilCode,integer level returns string
return EXGetAbilityString(abilCode,level,ABILITY_DATA_UNUBERTIP)
endfunction
function JNGetAbilityResearchTooltip takes integer abilCode,integer level returns string
return EXGetAbilityString(abilCode,level,ABILITY_DATA_RESEARCH_TIP)
endfunction
function JNGetAbilityResearchExtendedTooltip takes integer abilCode,integer level returns string
return EXGetAbilityString(abilCode,level,ABILITY_DATA_RESEARCH_UBERTIP)
endfunction
function JNSetAbilityIcon takes integer abilCode,string iconPath returns nothing
call EXSetAbilityString(abilCode,1,ABILITY_DATA_ART,iconPath)
endfunction
function JNGetAbilityIcon takes integer abilCode returns string
return EXGetAbilityString(abilCode,1,ABILITY_DATA_ART)
endfunction
function JNSetAbilityActivatedIcon takes integer abilCode,string iconPath returns nothing
call EXSetAbilityString(abilCode,1,ABILITY_DATA_UNART,iconPath)
endfunction
function JNGetAbilityActivatedIcon takes integer abilCode returns string
return EXGetAbilityString(abilCode,1,ABILITY_DATA_UNART)
endfunction
function JNSetUnitAbilityCooldown takes unit whichUnit,integer abilId,integer level,real cooldown returns nothing
call EXSetAbilityDataReal(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_COOL,cooldown)
endfunction
function JNGetUnitAbilityCooldown takes unit whichUnit,integer abilId,integer level returns real
return EXGetAbilityDataReal(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_COOL)
endfunction
function JNGetUnitAbilityCooldownRemaining takes unit whichUnit,integer abilId returns real
return EXGetAbilityState(EXGetUnitAbility(whichUnit,abilId),ABILITY_STATE_COOLDOWN)
endfunction
function JNEndUnitAbilityCooldown takes unit whichUnit,integer abilCode returns nothing
call EXSetAbilityState(EXGetUnitAbility(whichUnit,abilCode),ABILITY_STATE_COOLDOWN,0)
endfunction
function JNStartUnitAbilityCooldown takes unit whichUnit,integer abilCode,real cooldown returns nothing
call EXSetAbilityState(EXGetUnitAbility(whichUnit,abilCode),ABILITY_STATE_COOLDOWN,cooldown)
endfunction
function JNGetUnitAbilityManaCost takes unit whichUnit,integer abilId,integer level returns integer
return EXGetAbilityDataInteger(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_COST)
endfunction
function JNSetUnitAbilityManaCost takes unit whichUnit,integer abilId,integer level,integer manaCost returns nothing
call EXSetAbilityDataInteger(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_COST,manaCost)
endfunction
function JNGetUnitAbility takes unit whichUnit,integer abilId returns ability
return EXGetUnitAbility(whichUnit,abilId)
endfunction
function JNGetUnitAbilityByIndex takes unit whichUnit,integer index returns ability
return EXGetUnitAbilityByIndex(whichUnit,index)
endfunction
function JNGetUnitAbilityCastingTime takes unit whichUnit,integer abilId,integer level returns real
return EXGetAbilityDataReal(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_CAST)
endfunction
function JNGetUnitAbilityDurationByNormal takes unit whichUnit,integer abilId,integer level returns real
return EXGetAbilityDataReal(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_DUR)
endfunction
function JNGetUnitAbilityDurationByHero takes unit whichUnit,integer abilId,integer level returns real
return EXGetAbilityDataReal(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_HERODUR)
endfunction
function JNGetUnitAbilityAreaOfEffect takes unit whichUnit,integer abilId,integer level returns real
return EXGetAbilityDataReal(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_AREA)
endfunction
function JNGetUnitAbilityCastRange takes unit whichUnit,integer abilId,integer level returns real
return EXGetAbilityDataReal(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_RNG)
endfunction
function JNGetUnitAbilityName takes unit whichUnit,integer abilId returns string
return EXGetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),1,ABILITY_DATA_NAME)
endfunction
function JNGetUnitAbilityTargetArt takes unit whichUnit,integer abilId,integer level returns string
return EXGetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_TARGET_ART)
endfunction
function JNGetUnitAbilityCasterArt takes unit whichUnit,integer abilId,integer level returns string
return EXGetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_CASTER_ART)
endfunction
function JNGetUnitAbilityEffectArt takes unit whichUnit,integer abilId,integer level returns string
return EXGetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_EFFECT_ART)
endfunction
function JNGetUnitAbilityAreaEffectArt takes unit whichUnit,integer abilId,integer level returns string
return EXGetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_AREAEFFECT_ART)
endfunction
function JNGetUnitAbilityMissileArt takes unit whichUnit,integer abilId,integer level returns string
return EXGetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_MISSILE_ART)
endfunction
function JNGetUnitAbilitySpecialArt takes unit whichUnit,integer abilId,integer level returns string
return EXGetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_SPECIAL_ART)
endfunction
function JNGetUnitAbilityLightningEffect takes unit whichUnit,integer abilId,integer level returns string
return EXGetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_LIGHTNING_EFFECT)
endfunction
function JNSetUnitAbilityCastingTime takes unit whichUnit,integer abilId,integer level,real value returns nothing
call EXSetAbilityDataReal(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_CAST,value)
endfunction
function JNSetUnitAbilityDurationByNormal takes unit whichUnit,integer abilId,integer level,real value returns nothing
call EXSetAbilityDataReal(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_DUR,value)
endfunction
function JNSetUnitAbilityDurationByHero takes unit whichUnit,integer abilId,integer level,real value returns nothing
call EXSetAbilityDataReal(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_HERODUR,value)
endfunction
function JNSetUnitAbilityAreaOfEffect takes unit whichUnit,integer abilId,integer level,real value returns nothing
call EXSetAbilityDataReal(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_AREA,value)
endfunction
function JNSetUnitAbilityCastRange takes unit whichUnit,integer abilId,integer level,real value returns nothing
call EXSetAbilityDataReal(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_RNG,value)
endfunction
function JNSetUnitAbilityName takes unit whichUnit,integer abilId,string value returns nothing
call EXSetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),1,ABILITY_DATA_NAME,value)
endfunction
function JNSetUnitAbilityTargetArt takes unit whichUnit,integer abilId,integer level,string value returns nothing
call EXSetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_TARGET_ART,value)
endfunction
function JNSetUnitAbilityCasterArt takes unit whichUnit,integer abilId,integer level,string value returns nothing
call EXSetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_CASTER_ART,value)
endfunction
function JNSetUnitAbilityEffectArt takes unit whichUnit,integer abilId,integer level,string value returns nothing
call EXSetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_EFFECT_ART,value)
endfunction
function JNSetUnitAbilityAreaEffectArt takes unit whichUnit,integer abilId,integer level,string value returns nothing
call EXSetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_AREAEFFECT_ART,value)
endfunction
function JNSetUnitAbilityMissileArt takes unit whichUnit,integer abilId,integer level,string value returns nothing
call EXSetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_MISSILE_ART,value)
endfunction
function JNSetUnitAbilitySpecialArt takes unit whichUnit,integer abilId,integer level,string value returns nothing
call EXSetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_SPECIAL_ART,value)
endfunction
function JNSetUnitAbilityLightningEffect takes unit whichUnit,integer abilId,integer level,string value returns nothing
call EXSetAbilityDataString(EXGetUnitAbility(whichUnit,abilId),level,ABILITY_DATA_LIGHTNING_EFFECT,value)
endfunction
function JNDisplayChatMessage takes player whichPlayer,integer recipient,string message returns nothing
call EXDisplayChat(whichPlayer,recipient,message)
endfunction
function JNSetSpecialEffectScale takes effect whichEffect,real scale returns nothing
call EXSetEffectSize(whichEffect,scale)
endfunction
function JNSetSpecialEffectPosition takes effect whichEffect,real x,real y,real z returns nothing
call EXSetEffectXY(whichEffect,x,y)
call EXSetEffectZ(whichEffect,z)
endfunction
function JNSetSpecialEffectHeight takes effect whichEffect,real height returns nothing
call EXSetEffectZ(whichEffect,height)
endfunction
function JNSetSpecialEffectTimeScale takes effect whichEffect,real timeScale returns nothing
call EXSetEffectSpeed(whichEffect,timeScale)
endfunction
function JNSetSpecialEffectOrientation takes effect whichEffect,real yaw,real pitch,real roll returns nothing
call EXEffectMatRotateZ(whichEffect,yaw)
call EXEffectMatRotateY(whichEffect,pitch)
call EXEffectMatRotateX(whichEffect,roll)
endfunction
function JNSetSpecialEffectYaw takes effect whichEffect,real yaw returns nothing
call EXEffectMatRotateZ(whichEffect,yaw)
endfunction
function JNSetSpecialEffectPitch takes effect whichEffect,real pitch returns nothing
call EXEffectMatRotateY(whichEffect,pitch)
endfunction
function JNSetSpecialEffectRoll takes effect whichEffect,real roll returns nothing
call EXEffectMatRotateX(whichEffect,roll)
endfunction
function JNSetSpecialEffectX takes effect whichEffect,real x returns nothing
call EXSetEffectXY(whichEffect,x,EXGetEffectY(whichEffect))
endfunction
function JNSetSpecialEffectY takes effect whichEffect,real y returns nothing
call EXSetEffectXY(whichEffect,EXGetEffectX(whichEffect),y)
endfunction
function JNSetSpecialEffectZ takes effect whichEffect,real z returns nothing
call EXSetEffectZ(whichEffect,z)
endfunction
function JNSetSpecialEffectPositionLoc takes effect whichEffect,location loc returns nothing
call EXSetEffectXY(whichEffect,GetLocationX(loc),GetLocationY(loc))
endfunction
function JNGetLocalSpecialEffectX takes effect whichEffect returns real
return EXGetEffectX(whichEffect)
endfunction
function JNGetLocalSpecialEffectY takes effect whichEffect returns real
return EXGetEffectY(whichEffect)
endfunction
function JNGetLocalSpecialEffectZ takes effect whichEffect returns real
return EXGetEffectZ(whichEffect)
endfunction
function JNSetSpecialEffectMatrixScale takes effect whichEffect,real x,real y,real z returns nothing
call EXEffectMatScale(whichEffect,x,y,z)
endfunction
function JNResetSpecialEffectMatrix takes effect whichEffect returns nothing
call EXEffectMatReset(whichEffect)
endfunction
function JNSetEventDamage takes real amount returns nothing
call EXSetEventDamage(amount)
endfunction
function JNGetEventAttackType takes nothing returns attacktype
return ConvertAttackType(EXGetEventDamageData(EVENT_DAMAGE_DATA_ATTACK_TYPE))
endfunction
function JNGetEventDamageType takes nothing returns damagetype
return ConvertDamageType(EXGetEventDamageData(EVENT_DAMAGE_DATA_DAMAGE_TYPE))
endfunction
function JNGetEventWeaponType takes nothing returns weapontype
return ConvertWeaponType(EXGetEventDamageData(EVENT_DAMAGE_DATA_WEAPON_TYPE))
endfunction
function JNGetEventIsAttack takes nothing returns boolean
return 0 !=EXGetEventDamageData(EVENT_DAMAGE_DATA_IS_PHYSICAL)
endfunction
function JNGetUnitHP takes unit whichUnit returns real
return GetUnitState(whichUnit,UNIT_STATE_LIFE)
endfunction
function JNSetUnitHP takes unit whichUnit,real hp returns nothing
call SetUnitState(whichUnit,UNIT_STATE_LIFE,hp)
endfunction
function JNGetUnitMana takes unit whichUnit returns real
return GetUnitState(whichUnit,UNIT_STATE_MANA)
endfunction
function JNSetUnitMana takes unit whichUnit,real mana returns nothing
call SetUnitState(whichUnit,UNIT_STATE_MANA,mana)
endfunction
function JNGetUnitMaxHP takes unit whichUnit returns real
return GetUnitState(whichUnit,UNIT_STATE_MAX_LIFE)
endfunction
function JNSetUnitMaxHP takes unit whichUnit,real hp returns nothing
call SetUnitState(whichUnit,UNIT_STATE_MAX_LIFE,hp)
endfunction
function JNGetUnitMaxMana takes unit whichUnit returns real
return GetUnitState(whichUnit,UNIT_STATE_MAX_MANA)
endfunction
function JNSetUnitMaxMana takes unit whichUnit,real mana returns nothing
call SetUnitState(whichUnit,UNIT_STATE_MAX_MANA,mana)
endfunction
function JNGetUnitArmor takes unit whichUnit returns real
return GetUnitState(whichUnit,ConvertUnitState($20))
endfunction
function JNSetUnitArmor takes unit whichUnit,real armorAmount returns nothing
call SetUnitState(whichUnit,ConvertUnitState($20),armorAmount)
endfunction
function JNPauseUnit takes unit whichUnit,boolean flag returns nothing
call EXPauseUnit(whichUnit,flag)
endfunction
function JNSetUnitFacing takes unit whichUnit,real facingAngle returns nothing
call EXSetUnitFacing(whichUnit,facingAngle)
endfunction
function JNGetUnitDefenseType takes unit whichUnit returns integer
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($50))))
endfunction
function JNSetUnitDefenseType takes unit whichUnit,integer value returns nothing
call SetUnitState(whichUnit,ConvertUnitState($50),value)
endfunction
function JNGetUnitRateOfFire takes unit whichUnit returns real
return GetUnitState(whichUnit,ConvertUnitState($51))
endfunction
function JNSetUnitRateOfFire takes unit whichUnit,real value returns nothing
call SetUnitState(whichUnit,ConvertUnitState($51),value)
endfunction
function JNGetUnitAcquistionRange takes unit whichUnit returns real
return GetUnitState(whichUnit,ConvertUnitState($52))
endfunction
function JNSetUnitAcquistionRange takes unit whichUnit,real value returns nothing
call SetUnitState(whichUnit,ConvertUnitState($52),value)
endfunction
function JNGetUnitHPRegen takes unit whichUnit returns real
return GetUnitState(whichUnit,ConvertUnitState($53))
endfunction
function JNSetUnitHPRegen takes unit whichUnit,real value returns nothing
call SetUnitState(whichUnit,ConvertUnitState($53),value)
endfunction
function JNGetUnitManaRegen takes unit whichUnit returns real
return GetUnitState(whichUnit,ConvertUnitState($54))
endfunction
function JNSetUnitManaRegen takes unit whichUnit,real value returns nothing
call SetUnitState(whichUnit,ConvertUnitState($54),value)
endfunction
function JNGetUnitMinRange takes unit whichUnit returns real
return GetUnitState(whichUnit,ConvertUnitState($55))
endfunction
function JNSetUnitMinRange takes unit whichUnit,real value returns nothing
call SetUnitState(whichUnit,ConvertUnitState($55),value)
endfunction
function JNGetUnitTargetType takes unit whichUnit returns integer
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($60))))
endfunction
function JNSetUnitTargetType takes unit whichUnit,integer value returns nothing
call SetUnitState(whichUnit,ConvertUnitState($60),value)
endfunction
function JNGetUnitDiceNumber takes unit whichUnit,integer weaponIndex returns integer
if weaponIndex==1 then
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($10))))
elseif weaponIndex==2 then
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($30))))
endif
return 0
endfunction
function JNSetUnitDiceNumber takes unit whichUnit,integer diceNumber,integer weaponIndex returns nothing
if weaponIndex==1 then
call SetUnitState(whichUnit,ConvertUnitState($10),diceNumber)
elseif weaponIndex==2 then
call SetUnitState(whichUnit,ConvertUnitState($30),diceNumber)
endif
endfunction
function JNGetUnitDiceSides takes unit whichUnit,integer weaponIndex returns integer
if weaponIndex==1 then
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($11))))
elseif weaponIndex==2 then
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($31))))
endif
return 0
endfunction
function JNSetUnitDiceSides takes unit whichUnit,integer diceSides,integer weaponIndex returns nothing
if weaponIndex==1 then
call SetUnitState(whichUnit,ConvertUnitState($11),diceSides)
elseif weaponIndex==2 then
call SetUnitState(whichUnit,ConvertUnitState($31),diceSides)
endif
endfunction
function JNGetUnitBaseDamage takes unit whichUnit,integer weaponIndex returns integer
if weaponIndex==1 then
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($12))))
elseif weaponIndex==2 then
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($32))))
endif
return 0
endfunction
function JNSetUnitBaseDamage takes unit whichUnit,integer baseDamage,integer weaponIndex returns nothing
if weaponIndex==1 then
call SetUnitState(whichUnit,ConvertUnitState($12),baseDamage)
elseif weaponIndex==2 then
call SetUnitState(whichUnit,ConvertUnitState($32),baseDamage)
endif
endfunction
function JNGetUnitAttackCooldown takes unit whichUnit,integer weaponIndex returns real
if weaponIndex==1 then
return GetUnitState(whichUnit,ConvertUnitState($25))
elseif weaponIndex==2 then
return GetUnitState(whichUnit,ConvertUnitState($38))
endif
return 0.
endfunction
function JNSetUnitAttackCooldown takes unit whichUnit,real cooldown,integer weaponIndex returns nothing
if weaponIndex==1 then
call SetUnitState(whichUnit,ConvertUnitState($25),cooldown)
elseif weaponIndex==2 then
call SetUnitState(whichUnit,ConvertUnitState($38),cooldown)
endif
endfunction
function JNGetUnitAttackSound takes unit whichUnit,integer weaponIndex returns integer
if weaponIndex==1 then
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($22))))
elseif weaponIndex==2 then
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($35))))
endif
return 0
endfunction
function JNSetUnitAttackSound takes unit whichUnit,integer weaponIndex,integer value returns nothing
if weaponIndex==1 then
call SetUnitState(whichUnit,ConvertUnitState($22),value)
elseif weaponIndex==2 then
call SetUnitState(whichUnit,ConvertUnitState($35),value)
endif
endfunction
function JNGetUnitAttackType takes unit whichUnit,integer weaponIndex returns integer
if weaponIndex==1 then
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($23))))
elseif weaponIndex==2 then
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($36))))
endif
return 0
endfunction
function JNSetUnitAttackType takes unit whichUnit,integer weaponIndex,integer value returns nothing
if weaponIndex==1 then
call SetUnitState(whichUnit,ConvertUnitState($23),value)
elseif weaponIndex==2 then
call SetUnitState(whichUnit,ConvertUnitState($36),value)
endif
endfunction
function JNGetUnitAttackMaxTarget takes unit whichUnit,integer weaponIndex returns integer
if weaponIndex==1 then
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($24))))
elseif weaponIndex==2 then
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($37))))
endif
return 0
endfunction
function JNSetUnitAttackMaxTarget takes unit whichUnit,integer weaponIndex,integer value returns nothing
if weaponIndex==1 then
call SetUnitState(whichUnit,ConvertUnitState($24),value)
elseif weaponIndex==2 then
call SetUnitState(whichUnit,ConvertUnitState($37),value)
endif
endfunction
function JNGetUnitAttackTargetType takes unit whichUnit,integer weaponIndex returns integer
if weaponIndex==1 then
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($29))))
elseif weaponIndex==2 then
return S2I(R2S(GetUnitState(whichUnit,ConvertUnitState($45))))
endif
return 0
endfunction
function JNSetUnitAttackTargetType takes unit whichUnit,integer weaponIndex,integer value returns nothing
if weaponIndex==1 then
call SetUnitState(whichUnit,ConvertUnitState($29),value)
elseif weaponIndex==2 then
call SetUnitState(whichUnit,ConvertUnitState($45),value)
endif
endfunction
function JNGetUnitAttackLossDamage takes unit whichUnit,integer weaponIndex returns real
if weaponIndex==1 then
return GetUnitState(whichUnit,ConvertUnitState($21))
elseif weaponIndex==2 then
return GetUnitState(whichUnit,ConvertUnitState($34))
endif
return 0.
endfunction
function JNSetUnitAttackLossDamage takes unit whichUnit,integer weaponIndex,real value returns nothing
if weaponIndex==1 then
call SetUnitState(whichUnit,ConvertUnitState($21),value)
elseif weaponIndex==2 then
call SetUnitState(whichUnit,ConvertUnitState($34),value)
endif
endfunction
function JNGetUnitAttackRange takes unit whichUnit,integer weaponIndex returns real
if weaponIndex==1 then
return GetUnitState(whichUnit,ConvertUnitState($16))
elseif weaponIndex==2 then
return GetUnitState(whichUnit,ConvertUnitState($40))
endif
return 0.
endfunction
function JNSetUnitAttackRange takes unit whichUnit,integer weaponIndex,real value returns nothing
if weaponIndex==1 then
call SetUnitState(whichUnit,ConvertUnitState($16),value)
elseif weaponIndex==2 then
call SetUnitState(whichUnit,ConvertUnitState($40),value)
endif
endfunction
function JNGetUnitAttackSpillDistance takes unit whichUnit,integer weaponIndex returns real
if weaponIndex==1 then
return GetUnitState(whichUnit,ConvertUnitState($56))
elseif weaponIndex==2 then
return GetUnitState(whichUnit,ConvertUnitState($46))
endif
return 0.
endfunction
function JNSetUnitAttackSpillDistance takes unit whichUnit,integer weaponIndex,real value returns nothing
if weaponIndex==1 then
call SetUnitState(whichUnit,ConvertUnitState($56),value)
elseif weaponIndex==2 then
call SetUnitState(whichUnit,ConvertUnitState($46),value)
endif
endfunction
function JNGetUnitAttackSpillRadius takes unit whichUnit,integer weaponIndex returns real
if weaponIndex==1 then
return GetUnitState(whichUnit,ConvertUnitState($57))
elseif weaponIndex==2 then
return GetUnitState(whichUnit,ConvertUnitState($47))
endif
return 0.
endfunction
function JNSetUnitAttackSpillRadius takes unit whichUnit,integer weaponIndex,real value returns nothing
if weaponIndex==1 then
call SetUnitState(whichUnit,ConvertUnitState($57),value)
elseif weaponIndex==2 then
call SetUnitState(whichUnit,ConvertUnitState($47),value)
endif
endfunction
function JNGetUnitAttackBackswing takes unit whichUnit,integer weaponIndex returns real
if weaponIndex==1 then
return GetUnitState(whichUnit,ConvertUnitState($28))
elseif weaponIndex==2 then
return GetUnitState(whichUnit,ConvertUnitState($44))
endif
return 0.
endfunction
function JNSetUnitAttackBackswing takes unit whichUnit,integer weaponIndex,real value returns nothing
if weaponIndex==1 then
call SetUnitState(whichUnit,ConvertUnitState($28),value)
elseif weaponIndex==2 then
call SetUnitState(whichUnit,ConvertUnitState($44),value)
endif
endfunction
function JNGetUnitAttackDamagePoint takes unit whichUnit,integer weaponIndex returns real
if weaponIndex==1 then
return GetUnitState(whichUnit,ConvertUnitState($26))
elseif weaponIndex==2 then
return GetUnitState(whichUnit,ConvertUnitState($39))
endif
return 0.
endfunction
function JNSetUnitAttackDamagePoint takes unit whichUnit,integer weaponIndex,real value returns nothing
if weaponIndex==1 then
call SetUnitState(whichUnit,ConvertUnitState($26),value)
elseif weaponIndex==2 then
call SetUnitState(whichUnit,ConvertUnitState($39),value)
endif
endfunction
function JNBitOr takes integer x,integer y returns integer
return BitOr(x,y)
endfunction
function JNBitAnd takes integer x,integer y returns integer
return BitAnd(x,y)
endfunction
function JNBitXor takes integer x,integer y returns integer
return BitXor(x,y)
endfunction
function LinkFrame__Link_Discord_Clicked takes nothing returns nothing
call JNOpenBrowser("https://discord.com/invite/Cx8b9bWAjk")
endfunction
function LinkFrame__Link_Seat_Clicked takes nothing returns nothing
call JNOpenBrowser("https://drive.google.com/drive/folders/1J-WDgP0gAOAsA9xNs2V_22DychH27CFi")
endfunction
function LinkFrame__Link_Button_Clicked takes nothing returns nothing
if LinkFrame__isLink==true then
set LinkFrame__isLink=false
call DzFrameShow(LinkFrame__link_box,false)
else
set LinkFrame__isLink=true
call DzFrameShow(LinkFrame__link_box,true)
endif
endfunction
function LinkFrame__Link_Frame_Init takes nothing returns nothing
set LinkFrame__link_button=DzCreateFrameByTagName("GLUETEXTBUTTON","",DzGetGameUI(),"ScriptDialogButton",0)
call DzFrameSetPoint(LinkFrame__link_button,JN_FRAMEPOINT_CENTER,DzGetGameUI(),JN_FRAMEPOINT_CENTER,-0.336,0.22)
call DzFrameSetSize(LinkFrame__link_button,0.034,0.034)
call DzFrameSetText(LinkFrame__link_button,"링크")
call DzFrameSetScriptByCode(LinkFrame__link_button,JN_FRAMEEVENT_CONTROL_CLICK,function LinkFrame__Link_Button_Clicked,false)
set LinkFrame__link_box=DzCreateFrameByTagName("BACKDROP","",DzGetGameUI(),"EscMenuBackdrop",0)
call DzFrameSetSize(LinkFrame__link_box,0.117,0.08)
call DzFrameSetPoint(LinkFrame__link_box,JN_FRAMEPOINT_CENTER,DzGetGameUI(),JN_FRAMEPOINT_CENTER,-0.25,0.22)
call DzFrameShow(LinkFrame__link_box,false)
set LinkFrame__discord_back_drop=DzCreateFrameByTagName("BACKDROP","",LinkFrame__link_box,"",0)
call DzFrameSetSize(LinkFrame__discord_back_drop,0.035,0.035)
call DzFrameSetPoint(LinkFrame__discord_back_drop,JN_FRAMEPOINT_CENTER,LinkFrame__link_box,JN_FRAMEPOINT_CENTER,-0.021,0)
call DzFrameSetTexture(LinkFrame__discord_back_drop,"war3mapImported\\BTN_Discord.blp",0)
set LinkFrame__discord_button=DzCreateFrameByTagName("BUTTON","",LinkFrame__discord_back_drop,"ScoreScreenTabButtonTemplate",0)
call DzFrameSetPoint(LinkFrame__discord_button,JN_FRAMEPOINT_CENTER,LinkFrame__discord_back_drop,JN_FRAMEPOINT_CENTER,0,0)
call DzFrameSetSize(LinkFrame__discord_button,0.035,0.035)
call DzFrameSetScriptByCode(LinkFrame__discord_button,JN_FRAMEEVENT_CONTROL_CLICK,function LinkFrame__Link_Discord_Clicked,false)
set LinkFrame__seat_back_drop=DzCreateFrameByTagName("BACKDROP","",LinkFrame__link_box,"",0)
call DzFrameSetSize(LinkFrame__seat_back_drop,0.035,0.035)
call DzFrameSetPoint(LinkFrame__seat_back_drop,JN_FRAMEPOINT_CENTER,LinkFrame__link_box,JN_FRAMEPOINT_CENTER,0.021,0)
call DzFrameSetTexture(LinkFrame__seat_back_drop,"war3mapImported\\BTN_Seat.blp",0)
set LinkFrame__seat_button=DzCreateFrameByTagName("BUTTON","",LinkFrame__seat_back_drop,"ScoreScreenTabButtonTemplate",0)
call DzFrameSetPoint(LinkFrame__seat_button,JN_FRAMEPOINT_CENTER,LinkFrame__seat_back_drop,JN_FRAMEPOINT_CENTER,0,0)
call DzFrameSetSize(LinkFrame__seat_button,0.035,0.035)
call DzFrameSetScriptByCode(LinkFrame__seat_button,JN_FRAMEEVENT_CONTROL_CLICK,function LinkFrame__Link_Seat_Clicked,false)
endfunction
function LinkFrame__Init takes nothing returns nothing
call LinkFrame__Link_Frame_Init()
endfunction
function s__party_create takes nothing returns integer
local integer this=s__party__allocate()
if s__party_G[this]==null then
set s__party_G[this]=CreateGroup()
endif
call GroupClear(s__party_G[this])
return this
endfunction
function s__party__get_super takes integer this returns group
return s__party_G[this]
endfunction
function s__party_destroy takes integer this returns nothing
call s__party_deallocate(this)
endfunction
function s__Polar_RadX takes real dist,real angle2 returns real
return dist*Cos(angle2)
endfunction
function s__Polar_RadY takes real dist,real angle2 returns real
return dist*Sin(angle2)
endfunction
function s__Polar_X takes real dist,real angle2 returns real
return dist*Cos(angle2*bj_DEGTORAD)
endfunction
function s__Polar_Y takes real dist,real angle2 returns real
return dist*Sin(angle2*bj_DEGTORAD)
endfunction
function s__Polar_RadUTA takes unit u,real dist,real angle2 returns nothing
call SetUnitX(u,GetUnitX(u)+dist*Cos(angle2))
call SetUnitY(u,GetUnitY(u)+dist*Sin(angle2))
endfunction
function s__Polar_UTA takes unit u,real dist,real angle2 returns nothing
call SetUnitX(u,GetUnitX(u)+dist*Cos(angle2*bj_DEGTORAD))
call SetUnitY(u,GetUnitY(u)+dist*Sin(angle2*bj_DEGTORAD))
endfunction
function s__Polar_UTP takes unit u,real dist,real tx,real ty returns nothing
local real angle2=Atan2(ty-GetWidgetY(u),tx-GetWidgetX(u))
call SetUnitX(u,GetUnitX(u)+dist*Cos(angle2))
call SetUnitY(u,GetUnitY(u)+dist*Sin(angle2))
endfunction
function s__Polar_UTW takes unit u,real dist,widget t returns nothing
local real angle2=Atan2(GetWidgetY(t)-GetWidgetY(u),GetWidgetX(t)-GetWidgetX(u))
call SetUnitX(u,GetUnitX(u)+dist*Cos(angle2))
call SetUnitY(u,GetUnitY(u)+dist*Sin(angle2))
endfunction
function s__Polar_RadITA takes item i,real dist,real angle2 returns nothing
call SetItemPosition(i,GetWidgetX(i)+dist*Cos(angle2),GetWidgetY(i)+dist*Sin(angle2))
endfunction
function s__Polar_ITA takes item i,real dist,real angle2 returns nothing
call SetItemPosition(i,GetWidgetX(i)+dist*Cos(angle2*bj_DEGTORAD),GetWidgetY(i)+dist*Sin(angle2*bj_DEGTORAD))
endfunction
function s__Polar_ITW takes item i,real dist,widget t returns nothing
local real angle2=Atan2(GetWidgetY(t)-GetWidgetY(i),GetWidgetX(t)-GetWidgetX(i))
call SetItemPosition(i,GetWidgetX(i)+dist*Cos(angle2),GetWidgetY(i)+dist*Sin(angle2))
endfunction
function s__Polarangle2_RadUTA takes unit u,real dist,real angle2 returns nothing
call SetUnitX(u,GetUnitX(u)+dist*Cos(angle2))
call SetUnitY(u,GetUnitY(u)+dist*Sin(angle2))
call SetUnitFacing(u,angle2*bj_RADTODEG)
endfunction
function s__Polarangle2_UTA takes unit u,real dist,real angle2 returns nothing
call SetUnitX(u,GetUnitX(u)+dist*Cos(angle2*bj_DEGTORAD))
call SetUnitY(u,GetUnitY(u)+dist*Sin(angle2*bj_DEGTORAD))
call SetUnitFacing(u,angle2)
endfunction
function s__Polarangle2_UTP takes unit u,real dist,real tx,real ty returns nothing
local real angle2=Atan2(ty-GetWidgetY(u),tx-GetWidgetX(u))
call SetUnitX(u,GetUnitX(u)+dist*Cos(angle2))
call SetUnitY(u,GetUnitY(u)+dist*Sin(angle2))
call SetUnitFacing(u,angle2*bj_RADTODEG)
endfunction
function s__Polarangle2_UTW takes unit u,real dist,widget t returns nothing
local real angle2=Atan2(GetWidgetY(t)-GetWidgetY(u),GetWidgetX(t)-GetWidgetX(u))
call SetUnitX(u,GetUnitX(u)+dist*Cos(angle2))
call SetUnitY(u,GetUnitY(u)+dist*Sin(angle2))
call SetUnitFacing(u,angle2*bj_RADTODEG)
endfunction
function s__Position_UTP takes unit u,real x,real y returns nothing
call SetUnitX(u,x)
call SetUnitY(u,y)
endfunction
function s__Position_UTW takes unit u,widget t returns nothing
call SetUnitX(u,GetWidgetX(t))
call SetUnitY(u,GetWidgetY(t))
endfunction
function s__Position_ITW takes item i,widget t returns nothing
call SetItemPosition(i,GetWidgetX(t),GetWidgetY(t))
endfunction
function GetRandomint takes integer l__min,integer max returns integer
local real temp1
local integer temp3
set temp1=GetRandomReal(1,2)
set temp3=R2I(temp1)
set temp1=(temp1-temp3)*100
set temp3=R2I(temp1)
return temp3
endfunction
function RandomIntFinal takes integer o,integer p,string a,string b returns integer
local integer Deck
local integer DeckSize=LoadInteger(udg_Hash,p,StringHash(b))
local integer loopA
local integer loopB
if DeckSize<=0 then
call SaveInteger(udg_Hash,p,StringHash(b),o)
set DeckSize=o
set loopA=o
loop
exitwhen loopA<=0
set loopB=GetRandomInt(1,o)
if LoadInteger(udg_Hash,p,StringHash(a)+loopB)==0 then
call SaveInteger(udg_Hash,p,StringHash(a)+loopB,loopA)
set loopA=loopA-1
endif
endloop
set loopA=LoadInteger(udg_Hash,p,StringHash(a)+DeckSize)
call SaveInteger(udg_Hash,p,StringHash(a)+DeckSize,0)
call SaveInteger(udg_Hash,p,StringHash(b),DeckSize-1)
elseif DeckSize>=1 then
set loopA=LoadInteger(udg_Hash,p,StringHash(a)+DeckSize)
call SaveInteger(udg_Hash,p,StringHash(a)+DeckSize,0)
call SaveInteger(udg_Hash,p,StringHash(b),DeckSize-1)
endif
return loopA
endfunction
function infiniteArt takes integer cd returns boolean
if cd=='N005' or cd=='N006' or cd=='N011' or cd=='R010' or cd=='N062' then
return true
else
return false
endif
endfunction
function ArtefactSys2 takes integer p returns integer
local integer a=0
local integer max=0
local real b=0
local real c=0.25
local integer Hax
local integer loopA
local boolean exit=false
if LoadBoolean(System,p,$42D99B02)then
set c=0.6
endif
if SpecialArtSET[p]==0 then
set b=I2R(RandomIntFinal(100,0,"randomP","randomPM"))
if b<UniqueDrop[p]*(1+((Luck[p]-1)*c))then
set exit=true
set max=0
set a=RandomIntFinal(100,0,"random","randomM")
loop
exitwhen LoadInteger(UniqueArt,p,a)!=0 or max==100
set max=max+1
set a=RandomIntFinal(100,0,"random","randomM")
endloop
if max==100 then
set Hax='N011'
else
set Hax=LoadInteger(UniqueArt,p,a)
set saveLV[p]=4
call SaveInteger(UniqueArt,p,a,0)
if LoadBoolean(System,p,$19E2666D)then
set loopA=LoadInteger(System,p,$B449EC64)-1
call SaveInteger(System,p,$B449EC64,loopA)
if loopA==0 then
call SaveBoolean(System,p,$19E2666D,false)
set UniqueDrop[p]=6
endif
endif
endif
endif
if not exit then
set b=I2R(RandomIntFinal(100,0,"randomP","randomPM"))
if b<RareDrop[p]*(1+((Luck[p]-1)*c))then
set exit=true
set max=0
set a=RandomIntFinal(100,0,"random","randomM")
loop
exitwhen LoadInteger(RareArt,p,a)!=0 or max==100
set max=max+1
set a=RandomIntFinal(100,0,"random","randomM")
endloop
if max==100 then
set Hax='N011'
else
set Hax=LoadInteger(RareArt,p,a)
set saveLV[p]=3
if infiniteArt(Hax)then
else
if LoadBoolean(System,p,$F4D3AE1B)then
set loopA=LoadInteger(System,p,$D86AB0AD)-1
call SaveInteger(System,p,$D86AB0AD,loopA)
if loopA==0 then
call SaveBoolean(System,p,$F4D3AE1B,false)
set RareDrop[p]=20
set UniqueDrop[p]=6
endif
endif
call SaveInteger(RareArt,p,a,0)
endif
endif
endif
endif
if not exit then
set b=I2R(RandomIntFinal(100,0,"randomP","randomPM"))
if b<UncarmonDrop[p]*(1+((Luck[p]-1)*c))then
set exit=true
set max=0
set a=RandomIntFinal(100,0,"random","randomM")
loop
exitwhen LoadInteger(UncarmonArt,p,a)!=0 or max==100
set max=max+1
set a=RandomIntFinal(100,0,"random","randomM")
endloop
if max==100 then
set Hax='N011'
else
set Hax=LoadInteger(UncarmonArt,p,a)
set saveLV[p]=2
if infiniteArt(Hax)then
else
call SaveInteger(UncarmonArt,p,a,0)
endif
endif
endif
endif
if not exit then
set max=0
loop
exitwhen LoadInteger(NormalArt,p,a)!=0 or max==100
set max=max+1
set a=RandomIntFinal(100,0,"random","randomM")
endloop
if max==100 then
set Hax='N011'
else
set Hax=LoadInteger(NormalArt,p,a)
set saveLV[p]=1
if infiniteArt(Hax)then
else
call SaveInteger(NormalArt,p,a,0)
endif
endif
endif
else
set a=GetRandomInt(1,SpecialArtMax)
set max=0
loop
exitwhen LoadInteger(System,p,$24020D5A+a)!=0 or max==100
set a=GetRandomInt(1,SpecialArtMax)
endloop
if max==100 then
set Hax='N011'
else
set Hax=LoadInteger(System,p,$24020D5A+a)
set saveLV[p]=5
call SaveInteger(System,p,$24020D5A+a,0)
endif
set SpecialArtSET[p]=SpecialArtSET[p]-1
endif
return Hax
endfunction
function ShildSet__ShildText takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$C303079D)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real shild=LoadReal(udg_Hashtable,GetHandleId(u),$DC6A3962)
local texttag ttg=LoadTextTagHandle(udg_Hashtable,GetHandleId(u),$E66F8E3E)
local integer count=LoadInteger(udg_Hashtable,GetHandleId(u),$79FF9B13)
if ttg==null then
set ttg=CreateTextTag()
call SetTextTagText(ttg,I2S(R2I(shild)),TextTagSize2Height(12))
call SetTextTagPosUnit(ttg,u,0)
call SaveTextTagHandle(udg_Hashtable,GetHandleId(u),$E66F8E3E,ttg)
endif
if shild>=1 then
call SetTextTagText(ttg,I2S(R2I(shild)),TextTagSize2Height(12))
call SetTextTagPosUnit(ttg,u,0)
call TimerStart(t,0.0314,false,function ShildSet__ShildText)
else
call SaveReal(udg_Hashtable,GetHandleId(u),$525D985A,0)
call RemoveSavedReal(udg_Hashtable,GetHandleId(u),$525D985A)
call SaveReal(udg_Hashtable,GetHandleId(u),$DC6A3962,0)
call RemoveSavedReal(udg_Hashtable,GetHandleId(u),$DC6A3962)
call DestroyTextTag(ttg)
call SaveTextTagHandle(udg_Hashtable,GetHandleId(u),$E66F8E3E,null)
call SaveInteger(udg_Hashtable,GetHandleId(u),$79FF9B13,0)
call RemoveSavedInteger(udg_Hashtable,GetHandleId(u),$79FF9B13)
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set u=null
set t=null
set ttg=null
endfunction
function ShildSet__ShildSet_Inter takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer tid=GetHandleId(t)
local unit u=LoadUnitHandle(udg_Hashtable,tid,$C303079D)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real r=LoadReal(udg_Hashtable,tid,$2FC9F415)
local real tempR
local integer a
set tempR=LoadReal(udg_Hashtable,GetHandleId(u),$525D985A)
if tempR<=r then
set r=r-tempR
endif
set tempR=tempR-r
if tempR<=0 then
set tempR=0
endif
call SaveReal(udg_Hashtable,GetHandleId(u),$525D985A,tempR)
if r<=0 then
set r=0
endif
set tempR=LoadReal(udg_Hashtable,GetHandleId(u),$DC6A3962)-r
if tempR<=2 then
set tempR=0
endif
call SaveReal(udg_Hashtable,GetHandleId(u),$DC6A3962,tempR)
if tempR==0 then
call SaveReal(udg_Hashtable,GetHandleId(u),$525D985A,0)
call RemoveSavedReal(udg_Hashtable,GetHandleId(u),$525D985A)
if LoadBoolean(udg_Hash,p,$402AEB67)then
call ArtThrow('N011',p)
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='N011' then
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzSyncData("RCT",I2S(a))
endif
endif
set a=a+1
endloop
call SaveBoolean(udg_Hash,p,$402AEB67,false)
call RemoveSavedBoolean(udg_Hash,p,$402AEB67)
endif
endif
call FlushChildHashtable(udg_Hashtable,tid)
call PauseTimer(t)
call DestroyTimer(t)
set u=null
set t=null
endfunction
function ShildSet takes unit makeunit,unit u,real Time,real r returns nothing
local timer t=CreateTimer()
local timer t2
local integer i=0
local real pl=1.00
local real tempR
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer count=LoadInteger(udg_Hashtable,GetHandleId(u),$79FF9B13)
if LoadBoolean(System,p,$35361B7A)then
if LoadBoolean(udg_Hash,p,$664E8F23)then
set Time=Time*1.5
else
set Time=Time*1.3
endif
if LoadBoolean(udg_Hash,p,$664E8F23)then
set pl=pl*1.2
endif
endif
if UnitAlive(u)then
set r=r*pl
set tempR=LoadReal(udg_Hashtable,GetHandleId(u),$DC6A3962)
if tempR==0 then
call SaveReal(udg_Hashtable,GetHandleId(u),$525D985A,0)
endif
call SaveReal(udg_Hashtable,GetHandleId(u),$DC6A3962,tempR+r)
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$C303079D,u)
call SaveReal(udg_Hashtable,GetHandleId(t),$2FC9F415,r)
if LoadInteger(udg_Hashtable,GetHandleId(u),$79FF9B13)==0 then
set t2=CreateTimer()
call SaveUnitHandle(udg_Hashtable,GetHandleId(t2),$C303079D,u)
call TimerStart(t2,0.0314,false,function ShildSet__ShildText)
call SaveInteger(udg_Hashtable,GetHandleId(u),$79FF9B13,1)
endif
call TimerStart(t,Time,false,function ShildSet__ShildSet_Inter)
endif
set makeunit=null
set u=null
set t=null
set t2=null
endfunction
function Stash__warn takes string message returns nothing
call DisplayTimedTextToPlayer(GetLocalPlayer(),0.0,0.0,3600.0,"[경고] Stash - "+message)
endfunction
function Stash__error takes string message returns nothing
call DisplayTimedTextToPlayer(GetLocalPlayer(),0.0,0.0,3600.0,"[오류] Stash - "+message)
endfunction
function Stash__mogi takes integer this,string property returns nothing
local integer hash=StringHash(property)
local integer offset=1
local integer index
loop
if not HaveSavedString(Stash__HNAME_TABLE,this,hash)then
set index=LoadInteger(Stash__SCALE_TABLE,this,Stash__SCALE_SIZE)
call SaveStr(Stash__HNAME_TABLE,this,hash,property)
call SaveInteger(Stash__HINDX_TABLE,this,hash,index)
call SaveStr(Stash__PROPT_TABLE,this,index,property)
call SaveInteger(Stash__SCALE_TABLE,this,Stash__SCALE_SIZE,index+1)
set Stash__MK_INDEX=index
return
endif
if LoadStr(Stash__HNAME_TABLE,this,hash)==property then
set Stash__MK_INDEX=LoadInteger(Stash__HINDX_TABLE,this,hash)
return
endif
set hash=hash+offset
set offset=offset+2
endloop
endfunction
function Stash__mogiProxy takes nothing returns nothing
call Stash__mogi(Stash__MK_THIS,Stash__MK_PROPERTY)
endfunction
function Stash__gi takes integer this,string property returns nothing
local integer hash=StringHash(property)
local integer offset=1
loop
if not HaveSavedString(Stash__HNAME_TABLE,this,hash)then
return
endif
if LoadStr(Stash__HNAME_TABLE,this,hash)==property then
set Stash__MK_INDEX=LoadInteger(Stash__HINDX_TABLE,this,hash)
return
endif
set hash=hash+offset
set offset=offset+2
endloop
endfunction
function Stash__giProxy takes nothing returns nothing
call Stash__gi(Stash__MK_THIS,Stash__MK_PROPERTY)
endfunction
function Stash__makeOrGetIndex takes integer this,string property returns integer
set Stash__MK_THIS=this
set Stash__MK_PROPERTY=property
set Stash__MK_INDEX=-1
call ForForce(bj_FORCE_PLAYER[0],function Stash__mogiProxy)
return Stash__MK_INDEX
endfunction
function Stash__getIndex takes integer this,string property returns integer
set Stash__MK_THIS=this
set Stash__MK_PROPERTY=property
set Stash__MK_INDEX=-1
call ForForce(bj_FORCE_PLAYER[0],function Stash__giProxy)
return Stash__MK_INDEX
endfunction
function Stash__create takes nothing returns nothing
local integer this
set Stash__MAX_STASH=Stash__MAX_STASH+1
set this=Stash__MAX_STASH
call SaveInteger(Stash__STAMP_TABLE,this,0,1)
call SaveInteger(Stash__SCALE_TABLE,this,Stash__SCALE_SIZE,0)
call SaveInteger(Stash__SCALE_TABLE,this,Stash__SCALE_REMAINING,0)
call SaveBoolean(Stash__EXIST_TABLE,this,0,true)
set Stash__ALIVE_STASH=Stash__ALIVE_STASH+1
set Stash__ARG_STASH=this
endfunction
function Stash__createProxy takes nothing returns nothing
call Stash__create()
endfunction
function Stash__destroy takes integer this returns nothing
if this<=0 then
call Stash__warn("null 또는 유효하지 않은 개체 인덱스에 접근했습니다!")
return
endif
if this>Stash__MAX_STASH then
call Stash__warn("아직 할당되지 않은 영역의 개체 인덱스에 접근했습니다!")
return
endif
if not LoadBoolean(Stash__EXIST_TABLE,this,0)then
call Stash__warn("이미 파괴된 객체에 접근했습니다!")
return
endif
set Stash__ALIVE_STASH=Stash__ALIVE_STASH-1
call FlushChildHashtable(Stash__EXIST_TABLE,this)
call FlushChildHashtable(Stash__SCALE_TABLE,this)
call FlushChildHashtable(Stash__HNAME_TABLE,this)
call FlushChildHashtable(Stash__HINDX_TABLE,this)
call FlushChildHashtable(Stash__PROPT_TABLE,this)
call FlushChildHashtable(Stash__VALUE_TABLE,this)
call FlushChildHashtable(Stash__STAMP_TABLE,this)
set Stash__ARG_FLAG=true
endfunction
function Stash__destroyProxy takes nothing returns nothing
call Stash__destroy(Stash__ARG_STASH)
endfunction
function Stash__clear takes integer this returns nothing
if this<=0 then
call Stash__warn("null 또는 유효하지 않은 개체 인덱스에 접근했습니다!")
return
endif
if this>Stash__MAX_STASH then
call Stash__warn("아직 할당되지 않은 영역의 개체 인덱스에 접근했습니다!")
return
endif
if not LoadBoolean(Stash__EXIST_TABLE,this,0)then
call Stash__warn("이미 파괴된 객체에 접근했습니다!")
return
endif
call SaveInteger(Stash__SCALE_TABLE,this,Stash__SCALE_SIZE,0)
call SaveInteger(Stash__SCALE_TABLE,this,Stash__SCALE_REMAINING,0)
call FlushChildHashtable(Stash__HNAME_TABLE,this)
call FlushChildHashtable(Stash__HINDX_TABLE,this)
call FlushChildHashtable(Stash__PROPT_TABLE,this)
call FlushChildHashtable(Stash__VALUE_TABLE,this)
call SaveInteger(Stash__STAMP_TABLE,this,0,LoadInteger(Stash__STAMP_TABLE,this,0)+1)
set Stash__ARG_FLAG=true
endfunction
function Stash__clearProxy takes nothing returns nothing
call Stash__clear(Stash__ARG_STASH)
endfunction
function Stash__exists takes integer this returns nothing
if this<=0 then
return
endif
if this>Stash__MAX_STASH then
return
endif
if not LoadBoolean(Stash__EXIST_TABLE,this,0)then
return
endif
set Stash__ARG_FLAG=true
endfunction
function Stash__existsProxy takes nothing returns nothing
call Stash__exists(Stash__ARG_STASH)
endfunction
function Stash__getSize takes integer this returns nothing
if this<=0 then
return
endif
if this>Stash__MAX_STASH then
return
endif
if not LoadBoolean(Stash__EXIST_TABLE,this,0)then
return
endif
set Stash__ARG_SIGNAL=LoadInteger(Stash__SCALE_TABLE,this,Stash__SCALE_SIZE)
endfunction
function Stash__sizeProxy takes nothing returns nothing
call Stash__getSize(Stash__ARG_STASH)
endfunction
function Stash__getRemaining takes integer this returns nothing
if this<=0 then
return
endif
if this>Stash__MAX_STASH then
return
endif
if not LoadBoolean(Stash__EXIST_TABLE,this,0)then
return
endif
set Stash__ARG_SIGNAL=LoadInteger(Stash__SCALE_TABLE,this,Stash__SCALE_REMAINING)
endfunction
function Stash__remainingProxy takes nothing returns nothing
call Stash__getRemaining(Stash__ARG_STASH)
endfunction
function Stash__keyAt takes integer this,integer index returns nothing
if this<=0 then
call Stash__warn("null 또는 유효하지 않은 개체 인덱스에 접근했습니다!")
return
endif
if this>Stash__MAX_STASH then
call Stash__warn("아직 할당되지 않은 영역의 개체 인덱스에 접근했습니다!")
return
endif
if not LoadBoolean(Stash__EXIST_TABLE,this,0)then
call Stash__warn("이미 파괴된 객체에 접근했습니다!")
return
endif
if not HaveSavedString(Stash__PROPT_TABLE,this,index)then
call Stash__warn("유효하지 않은 스태쉬 인덱스에 접근했습니다!")
return
endif
set Stash__ARG_PROPERTY=LoadStr(Stash__PROPT_TABLE,this,index)
endfunction
function Stash__keyAtProxy takes nothing returns nothing
call Stash__keyAt(Stash__ARG_STASH,Stash__ARG_INDEX)
endfunction
function Stash__valueAt takes integer this,integer index returns nothing
if this<=0 then
call Stash__warn("null 또는 유효하지 않은 개체 인덱스에 접근했습니다!")
return
endif
if this>Stash__MAX_STASH then
call Stash__warn("아직 할당되지 않은 영역의 개체 인덱스에 접근했습니다!")
return
endif
if not LoadBoolean(Stash__EXIST_TABLE,this,0)then
call Stash__warn("이미 파괴된 객체에 접근했습니다!")
return
endif
if not HaveSavedString(Stash__PROPT_TABLE,this,index)then
call Stash__warn("유효하지 않은 스태쉬 인덱스에 접근했습니다!")
return
endif
if not HaveSavedString(Stash__VALUE_TABLE,this,index)then
return
endif
set Stash__ARG_VALUE=LoadStr(Stash__VALUE_TABLE,this,index)
endfunction
function Stash__valueAtProxy takes nothing returns nothing
call Stash__valueAt(Stash__ARG_STASH,Stash__ARG_INDEX)
endfunction
function Stash__save takes integer this,string property,string value returns nothing
local integer propertyIndex
if this<=0 then
call Stash__warn("null 또는 유효하지 않은 개체 인덱스에 접근했습니다!")
return
endif
if this>Stash__MAX_STASH then
call Stash__warn("아직 할당되지 않은 영역의 개체 인덱스에 접근했습니다!")
return
endif
if not LoadBoolean(Stash__EXIST_TABLE,this,0)then
call Stash__warn("이미 파괴된 객체에 접근했습니다!")
return
endif
if property==null then
call Stash__warn("스태쉬에 null 속성을 기록하려 시도했습니다!")
return
endif
if value==null then
call Stash__warn("스태쉬에 null 값을 기록하려 시도했습니다!")
return
endif
set propertyIndex=Stash__makeOrGetIndex(this,property)
if not HaveSavedString(Stash__VALUE_TABLE,this,propertyIndex)then
call SaveInteger(Stash__SCALE_TABLE,this,Stash__SCALE_REMAINING,LoadInteger(Stash__SCALE_TABLE,this,Stash__SCALE_REMAINING)+1)
endif
call SaveStr(Stash__VALUE_TABLE,this,propertyIndex,value)
call SaveInteger(Stash__STAMP_TABLE,this,0,LoadInteger(Stash__STAMP_TABLE,this,0)+1)
set Stash__ARG_FLAG=true
endfunction
function Stash__saveProxy takes nothing returns nothing
call Stash__save(Stash__ARG_STASH,Stash__ARG_PROPERTY,Stash__ARG_VALUE)
endfunction
function Stash__load takes integer this,string property returns nothing
local integer propertyIndex
if this<=0 then
call Stash__warn("null 또는 유효하지 않은 개체 인덱스에 접근했습니다!")
return
endif
if this>Stash__MAX_STASH then
call Stash__warn("아직 할당되지 않은 영역의 개체 인덱스에 접근했습니다!")
return
endif
if not LoadBoolean(Stash__EXIST_TABLE,this,0)then
call Stash__warn("이미 파괴된 객체에 접근했습니다!")
return
endif
if property==null then
call Stash__warn("스태쉬에 null 속성을 기록하려 시도했습니다!")
return
endif
set propertyIndex=Stash__getIndex(this,property)
if propertyIndex<0 then
return
endif
if not HaveSavedString(Stash__VALUE_TABLE,this,propertyIndex)then
return
endif
set Stash__ARG_VALUE=LoadStr(Stash__VALUE_TABLE,this,propertyIndex)
endfunction
function Stash__loadProxy takes nothing returns nothing
call Stash__load(Stash__ARG_STASH,Stash__ARG_PROPERTY)
endfunction
function Stash__contains takes integer this,string property returns nothing
local integer propertyIndex
if this<=0 then
call Stash__warn("null 또는 유효하지 않은 개체 인덱스에 접근했습니다!")
return
endif
if this>Stash__MAX_STASH then
call Stash__warn("아직 할당되지 않은 영역의 개체 인덱스에 접근했습니다!")
return
endif
if not LoadBoolean(Stash__EXIST_TABLE,this,0)then
call Stash__warn("이미 파괴된 객체에 접근했습니다!")
return
endif
if property==null then
call Stash__warn("스태쉬에 null 속성을 기록하려 시도했습니다!")
return
endif
set propertyIndex=Stash__getIndex(this,property)
if propertyIndex<0 then
return
endif
if not HaveSavedString(Stash__VALUE_TABLE,this,propertyIndex)then
return
endif
set Stash__ARG_FLAG=true
endfunction
function Stash__containsProxy takes nothing returns nothing
call Stash__contains(Stash__ARG_STASH,Stash__ARG_PROPERTY)
endfunction
function Stash__remove takes integer this,string property returns nothing
local integer propertyIndex
if this<=0 then
call Stash__warn("null 또는 유효하지 않은 개체 인덱스에 접근했습니다!")
return
endif
if this>Stash__MAX_STASH then
call Stash__warn("아직 할당되지 않은 영역의 개체 인덱스에 접근했습니다!")
return
endif
if not LoadBoolean(Stash__EXIST_TABLE,this,0)then
call Stash__warn("이미 파괴된 객체에 접근했습니다!")
return
endif
if property==null then
call Stash__warn("스태쉬에 null 속성을 기록하려 시도했습니다!")
return
endif
set propertyIndex=Stash__getIndex(this,property)
if propertyIndex<0 then
return
endif
if not HaveSavedString(Stash__VALUE_TABLE,this,propertyIndex)then
return
endif
call RemoveSavedString(Stash__VALUE_TABLE,this,propertyIndex)
call SaveInteger(Stash__SCALE_TABLE,this,Stash__SCALE_REMAINING,LoadInteger(Stash__SCALE_TABLE,this,Stash__SCALE_REMAINING)-1)
call SaveInteger(Stash__STAMP_TABLE,this,0,LoadInteger(Stash__STAMP_TABLE,this,0)+1)
set Stash__ARG_FLAG=true
endfunction
function Stash__removeProxy takes nothing returns nothing
call Stash__remove(Stash__ARG_STASH,Stash__ARG_PROPERTY)
endfunction
function Stash__copyPage takes nothing returns nothing
local integer this=Stash__COPY_THIS
local integer source=Stash__COPY_SOURCE
local integer sourceSize=IMinBJ(Stash__COPY_SORUCE_INDEX+Stash__COPY_PAGE,Stash__COPY_SORUCE_SIZE)
local integer sourceIndex=Stash__COPY_SORUCE_INDEX
local integer index=Stash__COPY_INDEX
local integer propertyIndex
loop
exitwhen sourceIndex==sourceSize
if HaveSavedString(Stash__VALUE_TABLE,source,sourceIndex)then
set propertyIndex=Stash__makeOrGetIndex(this,LoadStr(Stash__PROPT_TABLE,source,sourceIndex))
call SaveStr(Stash__VALUE_TABLE,this,index,LoadStr(Stash__VALUE_TABLE,source,sourceIndex))
set index=index+1
endif
set sourceIndex=sourceIndex+1
endloop
set Stash__COPY_INDEX=index
set Stash__COPY_SORUCE_INDEX=sourceSize
endfunction
function Stash__copy takes integer source returns nothing
local integer this
local integer sourceRemaining
local integer sourceSize
local integer sourceIndex
local integer index
local integer propertyIndex
if source<=0 then
call Stash__warn("null 또는 유효하지 않은 개체 인덱스에 접근했습니다!")
return
endif
if source>Stash__MAX_STASH then
call Stash__warn("아직 할당되지 않은 영역의 개체 인덱스에 접근했습니다!")
return
endif
if not LoadBoolean(Stash__EXIST_TABLE,source,0)then
call Stash__warn("이미 파괴된 객체에 접근했습니다!")
return
endif
set Stash__MAX_STASH=Stash__MAX_STASH+1
set this=Stash__MAX_STASH
call SaveInteger(Stash__STAMP_TABLE,this,0,1)
call SaveInteger(Stash__SCALE_TABLE,this,Stash__SCALE_SIZE,0)
call SaveInteger(Stash__SCALE_TABLE,this,Stash__SCALE_REMAINING,LoadInteger(Stash__SCALE_TABLE,source,Stash__SCALE_REMAINING))
call SaveBoolean(Stash__EXIST_TABLE,this,0,true)
set Stash__COPY_THIS=this
set Stash__COPY_SOURCE=source
set Stash__COPY_SORUCE_SIZE=LoadInteger(Stash__SCALE_TABLE,source,Stash__SCALE_SIZE)
set Stash__COPY_SORUCE_INDEX=0
set Stash__COPY_INDEX=0
loop
exitwhen Stash__COPY_SORUCE_INDEX>=Stash__COPY_SORUCE_SIZE
call ForForce(bj_FORCE_PLAYER[0],function Stash__copyPage)
endloop
set Stash__ALIVE_STASH=Stash__ALIVE_STASH+1
set Stash__ARG_STASH=this
endfunction
function Stash__copyProxy takes nothing returns nothing
call Stash__copy(Stash__ARG_INDEX)
endfunction
function Stash__printPage takes nothing returns nothing
local integer this=Stash__PRINT_STASH
local integer i=Stash__PRINT_INDEX
local integer imax=IMinBJ(i+Stash__PRINT_PAGE,Stash__PRINT_MAX)
local string property
loop
exitwhen i==imax
set property=LoadStr(Stash__PROPT_TABLE,this,i)
if HaveSavedString(Stash__VALUE_TABLE,this,i)then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0.0,0.0,3600.0," -"+property+"="+LoadStr(Stash__VALUE_TABLE,this,i))
else
call DisplayTimedTextToPlayer(GetLocalPlayer(),0.0,0.0,3600.0," -"+property+"(삭제됨)")
endif
set i=i+1
endloop
set Stash__PRINT_INDEX=imax
endfunction
function Stash__print takes integer this returns nothing
local integer size
local integer remaining
if this<=0 then
call Stash__warn("null 또는 유효하지 않은 개체 인덱스에 접근했습니다!")
return
endif
if this>Stash__MAX_STASH then
call Stash__warn("아직 할당되지 않은 영역의 개체 인덱스에 접근했습니다!")
return
endif
if not LoadBoolean(Stash__EXIST_TABLE,this,0)then
call Stash__warn("이미 파괴된 객체에 접근했습니다!")
return
endif
set size=LoadInteger(Stash__SCALE_TABLE,this,Stash__SCALE_SIZE)
set remaining=LoadInteger(Stash__SCALE_TABLE,this,Stash__SCALE_REMAINING)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0.0,0.0,3600.0,"[정보] Stash - 출력 ("+I2S(remaining)+"/"+I2S(size)+")")
set Stash__PRINT_STASH=this
set Stash__PRINT_INDEX=0
set Stash__PRINT_MAX=size
loop
exitwhen Stash__PRINT_INDEX>=Stash__PRINT_MAX
call ForForce(bj_FORCE_PLAYER[0],function Stash__printPage)
endloop
endfunction
function Stash__printProxy takes nothing returns nothing
call Stash__print(Stash__ARG_STASH)
endfunction
function Stash__age takes integer this returns nothing
if this<=0 then
call Stash__warn("null 또는 유효하지 않은 개체 인덱스에 접근했습니다!")
return
endif
if this>Stash__MAX_STASH then
call Stash__warn("아직 할당되지 않은 영역의 개체 인덱스에 접근했습니다!")
return
endif
if not LoadBoolean(Stash__EXIST_TABLE,this,0)then
call Stash__warn("이미 파괴된 객체에 접근했습니다!")
return
endif
set Stash__ARG_INDEX=LoadInteger(Stash__STAMP_TABLE,this,0)
endfunction
function Stash__ageProxy takes nothing returns nothing
call Stash__age(Stash__ARG_STASH)
endfunction
function MaxStashCount takes nothing returns integer
return Stash__MAX_STASH
endfunction
function AliveStashCount takes nothing returns integer
return Stash__ALIVE_STASH
endfunction
function CreateStash takes nothing returns integer
set Stash__ARG_STASH=0
call ForForce(bj_FORCE_PLAYER[0],function Stash__createProxy)
return Stash__ARG_STASH
endfunction
function DestroyStash takes integer whichStash returns boolean
set Stash__ARG_STASH=whichStash
set Stash__ARG_FLAG=false
call ForForce(bj_FORCE_PLAYER[0],function Stash__destroyProxy)
return Stash__ARG_FLAG
endfunction
function StashClear takes integer whichStash returns boolean
set Stash__ARG_STASH=whichStash
set Stash__ARG_FLAG=false
call ForForce(bj_FORCE_PLAYER[0],function Stash__clearProxy)
return Stash__ARG_FLAG
endfunction
function StashExists takes integer whichStash returns boolean
set Stash__ARG_STASH=whichStash
set Stash__ARG_FLAG=false
call ForForce(bj_FORCE_PLAYER[0],function Stash__existsProxy)
return Stash__ARG_FLAG
endfunction
function StashSave takes integer whichStash,string property,string value returns boolean
set Stash__ARG_STASH=whichStash
set Stash__ARG_PROPERTY=property
set Stash__ARG_VALUE=value
set Stash__ARG_FLAG=false
call ForForce(bj_FORCE_PLAYER[0],function Stash__saveProxy)
return Stash__ARG_FLAG
endfunction
function StashLoad takes integer whichStash,string property,string defaultValue returns string
set Stash__ARG_STASH=whichStash
set Stash__ARG_PROPERTY=property
set Stash__ARG_VALUE=defaultValue
call ForForce(bj_FORCE_PLAYER[0],function Stash__loadProxy)
return Stash__ARG_VALUE
endfunction
function StashContains takes integer whichStash,string property returns boolean
set Stash__ARG_STASH=whichStash
set Stash__ARG_PROPERTY=property
set Stash__ARG_FLAG=false
call ForForce(bj_FORCE_PLAYER[0],function Stash__containsProxy)
return Stash__ARG_FLAG
endfunction
function StashRemove takes integer whichStash,string property returns boolean
set Stash__ARG_STASH=whichStash
set Stash__ARG_PROPERTY=property
set Stash__ARG_FLAG=false
call ForForce(bj_FORCE_PLAYER[0],function Stash__removeProxy)
return Stash__ARG_FLAG
endfunction
function StashSize takes integer whichStash returns integer
set Stash__ARG_STASH=whichStash
set Stash__ARG_SIGNAL=0
call ForForce(bj_FORCE_PLAYER[0],function Stash__sizeProxy)
return Stash__ARG_SIGNAL
endfunction
function StashRemaining takes integer whichStash returns integer
set Stash__ARG_STASH=whichStash
set Stash__ARG_SIGNAL=0
call ForForce(bj_FORCE_PLAYER[0],function Stash__remainingProxy)
return Stash__ARG_SIGNAL
endfunction
function StashKeyAt takes integer whichStash,integer index returns string
set Stash__ARG_STASH=whichStash
set Stash__ARG_INDEX=index
set Stash__ARG_PROPERTY=null
call ForForce(bj_FORCE_PLAYER[0],function Stash__keyAtProxy)
return Stash__ARG_PROPERTY
endfunction
function StashValueAt takes integer whichStash,integer index,string defaultValue returns string
set Stash__ARG_STASH=whichStash
set Stash__ARG_INDEX=index
set Stash__ARG_VALUE=defaultValue
call ForForce(bj_FORCE_PLAYER[0],function Stash__valueAtProxy)
return Stash__ARG_VALUE
endfunction
function StashCopy takes integer whichStash returns integer
set Stash__ARG_INDEX=whichStash
set Stash__ARG_STASH=0
call ForForce(bj_FORCE_PLAYER[0],function Stash__copyProxy)
return Stash__ARG_STASH
endfunction
function StashPrint takes integer whichStash returns nothing
set Stash__ARG_STASH=whichStash
call ForForce(bj_FORCE_PLAYER[0],function Stash__printProxy)
endfunction
function StashAge takes integer whichStash returns integer
set Stash__ARG_STASH=whichStash
set Stash__ARG_INDEX=0
call ForForce(bj_FORCE_PLAYER[0],function Stash__ageProxy)
return Stash__ARG_INDEX
endfunction
function SetTimerData takes timer t,integer value returns nothing
call SaveInteger(TimerUtils__ht,0,GetHandleId(t),value)
endfunction
function GetTimerData takes timer t returns integer
return LoadInteger(TimerUtils__ht,0,GetHandleId(t))
endfunction
function NewTimerEx takes integer value returns timer
if(TimerUtils__tN==0)then
if(not TimerUtils__didinit)then
call TriggerEvaluate(st___prototype2[(1)])
set TimerUtils__tN=TimerUtils__tN-1
else
set s__TimerUtils__tT[0]=CreateTimer()
endif
else
set TimerUtils__tN=TimerUtils__tN-1
endif
call SaveInteger(TimerUtils__ht,0,GetHandleId((s__TimerUtils__tT[TimerUtils__tN])),(value))
return s__TimerUtils__tT[TimerUtils__tN]
endfunction
function NewTimer takes nothing returns timer
return NewTimerEx(0)
endfunction
function ReleaseTimer takes timer t returns nothing
if(t==null)then
return
endif
if(TimerUtils__tN==TimerUtils__ARRAY_SIZE)then
call DestroyTimer(t)
else
call PauseTimer(t)
if((LoadInteger(TimerUtils__ht,0,GetHandleId((t))))==TimerUtils__HELD)then
return
endif
call SaveInteger(TimerUtils__ht,0,GetHandleId((t)),(TimerUtils__HELD))
set s__TimerUtils__tT[TimerUtils__tN]=t
set TimerUtils__tN=TimerUtils__tN+1
endif
endfunction
function TimerUtils__init takes nothing returns nothing
local integer i=0
local integer o=-1
local boolean oops=false
if(TimerUtils__didinit)then
return
else
set TimerUtils__didinit=true
endif
set TimerUtils__ht=InitHashtable()
loop
exitwhen(i==TimerUtils__QUANTITY)
set s__TimerUtils__tT[i]=CreateTimer()
call SaveInteger(TimerUtils__ht,0,GetHandleId((s__TimerUtils__tT[i])),(TimerUtils__HELD))
set i=i+1
endloop
set TimerUtils__tN=TimerUtils__QUANTITY
endfunction
function setCode takes code c returns nothing
set l__Code=c
return
endfunction
function setInt takes integer i returns nothing
set l__Int=i
return
endfunction
function setStr takes string s returns nothing
set l__Str=s
return
endfunction
function setBool takes boolean b returns nothing
set l__Bool=b
return
endfunction
function Typecast___Typecast1 takes nothing returns nothing
local integer l__Str
local string l__Int
endfunction
function SH2I takes string s returns integer
call setStr(s)
return l__Str
endfunction
function I2SH takes integer i returns string
call setInt(i)
return l__Int
endfunction
function Typecast___Typecast2 takes nothing returns nothing
local integer l__Bool
local boolean l__Int
endfunction
function B2I takes boolean b returns integer
call setBool(b)
return l__Bool
endfunction
function I2B takes integer i returns boolean
call setInt(i)
return l__Int
endfunction
function Typecast___Typecast3 takes nothing returns nothing
local integer l__Code
local code l__Int
endfunction
function C2I takes code c returns integer
call setCode(c)
return l__Code
endfunction
function I2C takes integer i returns code
call setInt(i)
return l__Int
endfunction
function realToIndex takes real r returns integer
return r
endfunction
function cleanInt takes integer i returns integer
return i
endfunction
function indexToReal takes integer i returns real
return i
endfunction
function cleanReal takes real r returns real
return r
endfunction
function ArtReset takes integer artLV,integer Artcode,player pl returns nothing
local integer p=GetPlayerId(pl)+1
local integer a
local integer b
if not infiniteArt(Artcode)and Artcode !='none' then
if artLV==1 then
set a=1
loop
exitwhen LoadInteger(NormalArt,p,a)==0
set a=a+1
endloop
call SaveInteger(NormalArt,p,a,Artcode)
elseif artLV==2 then
set a=1
loop
exitwhen LoadInteger(UncarmonArt,p,a)==0
set a=a+1
endloop
call SaveInteger(UncarmonArt,p,a,Artcode)
elseif artLV==3 then
set a=1
loop
exitwhen LoadInteger(RareArt,p,a)==0
set a=a+1
endloop
call SaveInteger(RareArt,p,a,Artcode)
elseif artLV==4 then
set a=1
loop
exitwhen LoadInteger(UniqueArt,p,a)==0
set a=a+1
endloop
call SaveInteger(UniqueArt,p,a,Artcode)
elseif artLV==5 then
set SpecialArtSET[p]=SpecialArtSET[p]+1
set a=1
loop
exitwhen LoadInteger(System,p,$24020D5A+a)==0
set a=a+1
endloop
call SaveInteger(System,p,$24020D5A+a,Artcode)
elseif artLV==0 then
endif
endif
set pl=null
endfunction
function GetInventoryIndexOfItemType takes unit whichUnit,integer itemId returns integer
local integer index
local item indexItem
set index=0
loop
set indexItem=UnitItemInSlot(whichUnit,index)
if(indexItem !=null)and(GetItemTypeId(indexItem)==itemId)then
set whichUnit=null
set indexItem=null
return index+1
endif
set index=index+1
exitwhen index>=bj_MAX_INVENTORY
endloop
set whichUnit=null
set indexItem=null
return 0
endfunction
function GetItemOfTypeFromUnit takes unit whichUnit,integer itemId returns item
local integer index=GetInventoryIndexOfItemType(whichUnit,itemId)
local item tem=UnitItemInSlot(whichUnit,index-1)
if(index==0)then
set whichUnit=null
set tem=null
return null
else
set whichUnit=null
return tem
endif
endfunction
function itemCoolTimeT takes nothing returns nothing
local timer t=GetExpiredTimer()
local item itm=LoadItemHandle(udg_Hash,GetHandleId(t),$1769D332)
local integer time=LoadInteger(udg_Hash,GetHandleId(t),$6B54C545)-1
call SaveInteger(udg_Hash,GetHandleId(t),$6B54C545,time)
call SetItemCharges(itm,time)
if time==0 then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set itm=null
endfunction
function itemCoolTime takes item itm,integer time returns nothing
local timer t=CreateTimer()
local integer index=0
call SetItemCharges(itm,time)
call SaveItemHandle(udg_Hash,GetHandleId(t),$1769D332,itm)
call SaveInteger(udg_Hash,GetHandleId(t),$6B54C545,time)
call TimerStart(t,1,true,function itemCoolTimeT)
set t=null
set itm=null
endfunction
function WalbertT takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==Walbert[a]
set a=a+1
endloop
call SaveBoolean(udg_Hash,a,$DB203781,false)
endfunction
function Stun takes unit a,unit b,real time returns nothing
local boolean BosscleanSETUP=LoadBoolean(udg_Hash,$F61C5FD6,1)
local boolean c=true
local integer p=GetPlayerId(GetOwningPlayer(a))+1
if b==Boss and not BosscleanSETUP then
set time=time*0.5
elseif b==Boss and BosscleanSETUP then
set c=false
endif
if GetUnitTypeId(b)=='HR15' then
set time=time*0.7
endif
if GetUnitAbilityLevel(b,'A01A')==1 then
set c=false
endif
if c==true then
if s__CustomStun_GetUnitStunRemaining(b)<time then
call s__CustomStun_Clear(b)
call s__CustomStun_StunEx(a,b,time)
else
call s__CustomStun_Clear(b)
call s__CustomStun_StunEx(a,b,time)
endif
endif
if LoadBoolean(Hash_Stat,p,$8F595DEB)and LoadBoolean(udg_Hash,p,$DB203781)==false then
call SaveBoolean(udg_Hash,p,$DB203781,true)
call TimerStart(Walbert[p],8,false,function WalbertT)
call ShildSet(Charcter[p],Charcter[p],7.0,GetUnitState(Charcter[p],UNIT_STATE_MAX_LIFE)*0.2)
call itemCoolTime(GetItemOfTypeFromUnit(Charcter[p],'I652'),7)
endif
set a=null
set b=null
endfunction
function Stun2 takes unit a,unit b,real time returns nothing
if s__CustomStun_GetUnitStunRemaining(b)<time then
call s__CustomStun_Clear(b)
call s__CustomStun_StunEx(a,b,time)
else
call s__CustomStun_Clear(b)
call s__CustomStun_StunEx(a,b,time)
endif
set a=null
set b=null
endfunction
function EF__UnitRemoveTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$B6A6EBAA)
call RemoveUnit(u)
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set u=null
set t=null
endfunction
function UnitRemove takes unit u,real time returns nothing
local timer t=CreateTimer()
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$B6A6EBAA,u)
call TimerStart(t,time,false,function EF__UnitRemoveTimer)
set u=null
set t=null
endfunction
function IsPointPathableALL takes real a,real b returns boolean
local real tempX
local real tempY
call SetItemPosition(gg_item_I00K_0119,a,b)
set tempX=GetItemX(gg_item_I00K_0119)
set tempY=GetItemY(gg_item_I00K_0119)
call SetItemPosition(gg_item_I00K_0119,GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet))
if s__Distance_PBP(a,b,tempX,tempY)<=2.00 then
return true
else
return false
endif
endfunction
function IsPointPathableNB takes real a,real b returns boolean
local real tempX
local real tempY
local unit u=CreateUnit(Player(11),'oshm',0,0,270)
call SetUnitPosition(u,a,b)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call RemoveUnit(u)
set u=null
if s__Distance_PBP(a,b,tempX,tempY)<=30.00 then
return true
else
return false
endif
endfunction
function EF__ED2 takes nothing returns nothing
local timer t=GetExpiredTimer()
local effect source=LoadEffectHandle(udg_Hashtable,GetHandleId(t),$E9ECB0BE)
call DestroyEffect(source)
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set source=null
endfunction
function EDestroy takes effect a,real b returns nothing
local timer t=CreateTimer()
call SaveEffectHandle(udg_Hashtable,GetHandleId(t),$E9ECB0BE,a)
call TimerStart(t,b,false,function EF__ED2)
set t=null
set a=null
endfunction
function EFsettingU takes integer p,string a,real time,unit u,string s returns nothing
local timer t=CreateTimer()
local integer b=0
local effect c
local string ef=""
loop
exitwhen b==Playint
set b=b+1
if PP[b]==p and myEffectSys[p-1]then
if GetLocalPlayer()==Player(p-1)then
set ef=a
endif
endif
if PP[b]!=p and frEffectSys[PP[b]-1]then
if GetLocalPlayer()==Player(PP[b]-1)then
set ef=a
endif
endif
endloop
set c=AddSpecialEffectTarget(ef,u,s)
if time !=0 then
call SaveEffectHandle(udg_Hashtable,GetHandleId(t),$E9ECB0BE,c)
call TimerStart(t,time,false,function EF__ED2)
else
call SaveEffectHandle(udg_Hashtable,GetHandleId(t),$E9ECB0BE,c)
call TimerStart(t,0.01,false,function EF__ED2)
endif
set t=null
set u=null
set c=null
endfunction
function ImotesettingU takes integer p,string a,real time,unit u,string s returns nothing
local timer t=CreateTimer()
local integer b=0
local effect c
local string ef=""
loop
exitwhen b==Playint
set b=b+1
if PP[b]==p and myImoteSys[p-1]then
if GetLocalPlayer()==Player(p-1)then
set ef=a
endif
endif
if PP[b]!=p and frImoteSys[PP[b]-1]then
if GetLocalPlayer()==Player(PP[b]-1)then
set ef=a
endif
endif
endloop
set c=AddSpecialEffectTarget(ef,u,s)
if time !=0 then
call SaveEffectHandle(udg_Hashtable,GetHandleId(t),$E9ECB0BE,c)
call TimerStart(t,time,false,function EF__ED2)
else
call SaveEffectHandle(udg_Hashtable,GetHandleId(t),$E9ECB0BE,c)
call TimerStart(t,0.01,false,function EF__ED2)
endif
set t=null
set u=null
set c=null
endfunction
function EFsettingUcustom takes integer p,string a,unit u,string s returns effect
local integer b=0
local effect c
local string ef=""
loop
exitwhen b==Playint
set b=b+1
if PP[b]==p and myEffectSys[p-1]then
if GetLocalPlayer()==Player(p-1)then
set ef=a
endif
endif
if PP[b]!=p and frEffectSys[PP[b]-1]then
if GetLocalPlayer()==Player(PP[b]-1)then
set ef=a
endif
endif
endloop
set c=AddSpecialEffectTarget(ef,u,s)
set u=null
set bj_lastCreatedEffect=c
set c=null
return bj_lastCreatedEffect
endfunction
function EFsettingXYcustom takes integer p,string a,real x,real y returns effect
local integer b=0
local effect c
local string ef=""
loop
exitwhen b==Playint
set b=b+1
if PP[b]==p and myEffectSys[p-1]then
if GetLocalPlayer()==Player(p-1)then
set ef=a
endif
endif
if PP[b]!=p and frEffectSys[PP[b]-1]then
if GetLocalPlayer()==Player(PP[b]-1)then
set ef=a
endif
endif
endloop
set c=AddSpecialEffect(ef,x,y)
set bj_lastCreatedEffect=c
set c=null
return bj_lastCreatedEffect
endfunction
function EFsettingXY takes integer p,string a,real time,real x,real y,real size,real yaw,real speed,real pitch,real roll,real height returns nothing
local timer t=CreateTimer()
local integer b=0
local effect c
local string ef=""
loop
exitwhen b==Playint
set b=b+1
if PP[b]==p and myEffectSys[p-1]then
if GetLocalPlayer()==Player(p-1)then
set ef=a
endif
endif
if PP[b]!=p and frEffectSys[PP[b]-1]then
if GetLocalPlayer()==Player(PP[b]-1)then
set ef=a
endif
endif
endloop
set c=AddSpecialEffect(ef,x,y)
call EXSetEffectSize(c,size)
call EXSetEffectSpeed(c,speed)
call EXEffectMatRotateY(c,pitch)
call EXEffectMatRotateX(c,roll)
call EXEffectMatRotateZ(c,yaw)
call EXSetEffectZ(c,height)
if time==0 then
call SaveEffectHandle(udg_Hashtable,GetHandleId(t),$E9ECB0BE,c)
call TimerStart(t,0.01,false,function EF__ED2)
else
call SaveEffectHandle(udg_Hashtable,GetHandleId(t),$E9ECB0BE,c)
call TimerStart(t,time,false,function EF__ED2)
endif
set t=null
set c=null
endfunction
function KnockBackEF takes nothing returns nothing
local timer t=GetExpiredTimer()
local effect MoveUnit=LoadEffectHandle(udg_Hashtable,GetHandleId(t),$E9ECB0BE)
local real distance=LoadReal(udg_Hashtable,GetHandleId(t),$47527379)
local real SumDistance=LoadReal(udg_Hashtable,GetHandleId(t),$BFC6BD9B)
local real angle=LoadReal(udg_Hashtable,GetHandleId(t),$DCD57FAE)
local real x=EXGetEffectX(MoveUnit)
local real y=EXGetEffectY(MoveUnit)
local real SMoveLocationX=x+(((SumDistance)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
local real SMoveLocationY=y+(((SumDistance)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if(distance<=0)then
call DestroyEffect(MoveUnit)
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
set x=SMoveLocationX
set y=SMoveLocationY
call EXSetEffectXY(MoveUnit,x,y)
call SaveReal(udg_Hashtable,GetHandleId(t),$47527379,distance-SumDistance)
endif
set t=null
set MoveUnit=null
endfunction
function EFsettingLOCDD takes integer p,string a,real x,real y,real size,real yaw,real speed,real pitch,real height,real long,real d,real e returns nothing
local timer t=CreateTimer()
local real LocX=x+(((long)*1.0)*Cos(((yaw)*1.0)*bj_DEGTORAD))
local real LocY=y+(((long)*1.0)*Sin(((yaw)*1.0)*bj_DEGTORAD))
local real angle=s__Angle_PBP(x,y,LocX,LocY)
local real distance=s__Distance_PBP(x,y,LocX,LocY)
local real frequency=distance/(d/e)
local integer b
local effect c
local string ef=""
set b=0
loop
exitwhen b==Playint
set b=b+1
if PP[b]==p and myEffectSys[p-1]then
if GetLocalPlayer()==Player(p-1)then
set ef=a
endif
endif
if PP[b]!=p and frEffectSys[PP[b]-1]then
if GetLocalPlayer()==Player(PP[b]-1)then
set ef=a
endif
endif
endloop
set c=AddSpecialEffect(ef,x,y)
call EXSetEffectSize(c,size)
call EXEffectMatRotateZ(c,yaw)
call EXSetEffectSpeed(c,speed)
call EXEffectMatRotateY(c,pitch)
call EXSetEffectZ(c,height)
call SaveReal(udg_Hashtable,GetHandleId(t),$DCD57FAE,angle)
call SaveReal(udg_Hashtable,GetHandleId(t),$47527379,distance)
call SaveEffectHandle(udg_Hashtable,GetHandleId(t),$E9ECB0BE,c)
call SaveReal(udg_Hashtable,GetHandleId(t),$BFC6BD9B,frequency)
call TimerStart(t,e,true,function KnockBackEF)
set t=null
set c=null
endfunction
function EF__imagedummyT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$3B93A9D4)
call RemoveUnit(u)
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function imagedummy takes integer p,unit u,real time,real size,string l__str,string model returns nothing
local timer t=CreateTimer()
local string ef=""
local integer b
set b=0
loop
exitwhen b==Playint
set b=b+1
if PP[b]==p and myEffectSys[p-1]then
if GetLocalPlayer()==Player(p-1)then
set ef=model
endif
endif
if PP[b]!=p and frEffectSys[PP[b]-1]then
if GetLocalPlayer()==Player(PP[b]-1)then
set ef=model
endif
endif
endloop
call DzSetUnitModel(u,ef)
if l__str !=null then
if l__str=="walk" and LoadBoolean(udg_Hash,p,$AB91EED3)then
call SetUnitAnimation(u,"Alternate walk")
elseif LoadBoolean(udg_Hash,p,$AB91EED3)then
call SetUnitAnimation(u,"Alternate "+l__str)
else
call SetUnitAnimation(u,l__str)
endif
endif
call SetUnitScale(u,size,1,1)
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$3B93A9D4,u)
call TimerStart(t,time,false,function EF__imagedummyT)
set u=null
set t=null
endfunction
function imagedummySET takes integer p,unit u,string model returns nothing
local string ef=""
local integer b
set b=0
loop
exitwhen b==Playint
set b=b+1
if PP[b]==p and myEffectSys[p-1]then
if GetLocalPlayer()==Player(p-1)then
set ef=model
endif
endif
if PP[b]!=p and frEffectSys[PP[b]-1]then
if GetLocalPlayer()==Player(PP[b]-1)then
set ef=model
endif
endif
endloop
call DzSetUnitModel(u,ef)
set u=null
endfunction
function EF__vibration3 takes nothing returns nothing
local timer t=GetExpiredTimer()
local player p=LoadPlayerHandle(udg_Hashtable,GetHandleId(t),$ECC34823)
call CameraClearNoiseForPlayer(p)
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call FlushChildHashtable(udg_Hashtable,StringHash("Timer"+I2S(GetConvertedPlayerId(p))))
call PauseTimer(t)
call DestroyTimer(t)
set p=null
set t=null
endfunction
function vibration2 takes player p,real b,real c returns nothing
local timer t=CreateTimer()
if(LoadTimerHandle(udg_Hashtable,StringHash("Timer"+I2S(GetConvertedPlayerId(p))),0)==null)then
else
call CameraClearNoiseForPlayer(p)
call DestroyTimer(LoadTimerHandle(udg_Hashtable,StringHash("Timer"+I2S(GetConvertedPlayerId(p))),0))
call FlushChildHashtable(udg_Hashtable,StringHash("Timer"+I2S(GetConvertedPlayerId(p))))
endif
call CameraSetEQNoiseForPlayer(p,b)
call SavePlayerHandle(udg_Hashtable,GetHandleId(t),$ECC34823,p)
call SaveTimerHandle(udg_Hashtable,StringHash("Timer"+I2S(GetConvertedPlayerId(p))),0,t)
call TimerStart(t,c,false,function EF__vibration3)
set p=null
set t=null
endfunction
function Shacull takes integer p returns nothing
local unit u=Charcter[p]
local unit dummy
if GetUnitTypeId(ShacullUnit[p])=='sys8' then
call RemoveUnit(ShacullUnit[p])
endif
set dummy=CreateUnit(Player(11),'sys8',GetUnitX(u),GetUnitY(u),270)
call IssueTargetOrder(dummy,"magicleash",u)
set ShacullUnit[p]=dummy
set u=null
set dummy=null
endfunction
function RemoveShacull takes integer p returns nothing
call RemoveUnit(ShacullUnit[p])
set ShacullUnit[p]=null
endfunction
function invisibleroof takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit invisibleE=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$D28FDAB4)
local real invisiblePercentage=LoadReal(udg_Hashtable,GetHandleId(t),$D7056039)
local real cease=LoadReal(udg_Hashtable,GetHandleId(t),$ECC34823)
local real Start=LoadReal(udg_Hashtable,GetHandleId(t),$E6CF19C7)
local real invisibleconcentration=LoadReal(udg_Hashtable,GetHandleId(t),$E5862439)
if(cease>=invisibleconcentration-Start)then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
set cease=cease+invisiblePercentage
call SetUnitVertexColor(invisibleE,255,255,255,R2I((100-(Start+cease))*255*0.01))
call SaveReal(udg_Hashtable,GetHandleId(t),$ECC34823,cease)
endif
set invisibleE=null
set t=null
endfunction
function invisible takes unit a,real e,real d,real b,real c returns nothing
local timer t=CreateTimer()
local real cyclenumber=b/c
local real invisiblePercentage=(d-e)/cyclenumber
call SaveReal(udg_Hashtable,GetHandleId(t),$D7056039,invisiblePercentage)
call SaveReal(udg_Hashtable,GetHandleId(t),$E6CF19C7,e)
call SaveReal(udg_Hashtable,GetHandleId(t),$E5862439,d)
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$D28FDAB4,a)
call SaveReal(udg_Hashtable,GetHandleId(t),$ECC34823,0)
call TimerStart(t,c,true,function invisibleroof)
set t=null
set a=null
endfunction
function invisibleColorroof takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit invisibleE=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$D28FDAB4)
local real invisiblePercentage=LoadReal(udg_Hashtable,GetHandleId(t),$D7056039)
local real cease=LoadReal(udg_Hashtable,GetHandleId(t),$ECC34823)
local real Start=LoadReal(udg_Hashtable,GetHandleId(t),$E6CF19C7)
local integer red=R2I(LoadReal(udg_Hashtable,GetHandleId(t),$CF756CB1))
local integer green=R2I(LoadReal(udg_Hashtable,GetHandleId(t),$5AC6B753))
local integer blue=R2I(LoadReal(udg_Hashtable,GetHandleId(t),$E5E50BCA))
local real invisibleconcentration=LoadReal(udg_Hashtable,GetHandleId(t),$E5862439)
if(cease>=invisibleconcentration-Start)then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
set cease=cease+invisiblePercentage
call SetUnitVertexColor(invisibleE,red,green,blue,R2I((100-(Start+cease))*255*0.01))
call SaveReal(udg_Hashtable,GetHandleId(t),$ECC34823,cease)
endif
set invisibleE=null
set t=null
endfunction
function invisibleColor takes unit a,real e,real d,real r,real g,real blue,real b,real c returns nothing
local timer t=CreateTimer()
local real cyclenumber=b/c
local real invisiblePercentage=(d-e)/cyclenumber
call SaveReal(udg_Hashtable,GetHandleId(t),$D7056039,invisiblePercentage)
call SaveReal(udg_Hashtable,GetHandleId(t),$E6CF19C7,e)
call SaveReal(udg_Hashtable,GetHandleId(t),$E5862439,d)
call SaveReal(udg_Hashtable,GetHandleId(t),$CF756CB1,r)
call SaveReal(udg_Hashtable,GetHandleId(t),$5AC6B753,g)
call SaveReal(udg_Hashtable,GetHandleId(t),$E5E50BCA,blue)
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$D28FDAB4,a)
call SaveReal(udg_Hashtable,GetHandleId(t),$ECC34823,0)
call TimerStart(t,c,true,function invisibleColorroof)
set t=null
set a=null
endfunction
function visibleroof takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit invisibleU=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$D28FDAB4)
local real invisiblePercentage=LoadReal(udg_Hashtable,GetHandleId(t),$D7056039)
local real cease=LoadReal(udg_Hashtable,GetHandleId(t),$ECC34823)
local real Start=LoadReal(udg_Hashtable,GetHandleId(t),$E6CF19C7)
local real invisibleconcentration=LoadReal(udg_Hashtable,GetHandleId(t),$E5862439)
if(cease>=invisibleconcentration)then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
set cease=cease+invisiblePercentage
call SetUnitVertexColor(invisibleU,PercentTo255(100),PercentTo255(100),PercentTo255(100),PercentTo255(100-(Start-cease)))
call SaveReal(udg_Hashtable,GetHandleId(t),$ECC34823,cease)
endif
set invisibleU=null
set t=null
endfunction
function visible takes unit a,real e,real d,real b,real c returns nothing
local timer t=CreateTimer()
local real cyclenumber=b/c
local real invisiblePercentage=(e-d)/cyclenumber
set d=e-d
call SaveReal(udg_Hashtable,GetHandleId(t),$D7056039,invisiblePercentage)
call SaveReal(udg_Hashtable,GetHandleId(t),$E6CF19C7,e)
call SaveReal(udg_Hashtable,GetHandleId(t),$E5862439,d)
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$D28FDAB4,a)
call SaveReal(udg_Hashtable,GetHandleId(t),$ECC34823,0)
call TimerStart(t,c,true,function visibleroof)
set t=null
set a=null
endfunction
function KnockBackS takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit MoveUnit=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$B6A6EBAA)
local real distance=LoadReal(udg_Hashtable,GetHandleId(t),$47527379)
local real SumDistance=LoadReal(udg_Hashtable,GetHandleId(t),$BFC6BD9B)
local real angle=LoadReal(udg_Hashtable,GetHandleId(t),$DCD57FAE)
local real SMoveLocationX=GetUnitX(MoveUnit)+(((SumDistance)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
local real SMoveLocationY=GetUnitY(MoveUnit)+(((SumDistance)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if(distance<=0)then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
if IsPointPathableALL(SMoveLocationX,SMoveLocationY)then
call SetUnitX(MoveUnit,SMoveLocationX)
call SetUnitY(MoveUnit,SMoveLocationY)
endif
call SaveReal(udg_Hashtable,GetHandleId(t),$47527379,distance-SumDistance)
endif
if not UnitAlive(MoveUnit)then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set MoveUnit=null
endfunction
function KnockBackXY takes unit a,real x,real y,real d,real e returns nothing
local timer t=CreateTimer()
local real angle=s__Angle_PBP(GetUnitX(a),GetUnitY(a),x,y)
local real distance=s__Distance_PBP(GetUnitX(a),GetUnitY(a),x,y)
local real frequency=distance/(d/e)
call SaveReal(udg_Hashtable,GetHandleId(t),$DCD57FAE,angle)
call SaveReal(udg_Hashtable,GetHandleId(t),$47527379,distance)
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$B6A6EBAA,a)
call SaveReal(udg_Hashtable,GetHandleId(t),$BFC6BD9B,frequency)
call TimerStart(t,e,true,function KnockBackS)
set t=null
set a=null
endfunction
function KnockBackSef takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit MoveUnit=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$B6A6EBAA)
local real distance=LoadReal(udg_Hashtable,GetHandleId(t),$47527379)
local real SumDistance=LoadReal(udg_Hashtable,GetHandleId(t),$BFC6BD9B)
local real angle=LoadReal(udg_Hashtable,GetHandleId(t),$DCD57FAE)
local real SMoveLocationX=GetUnitX(MoveUnit)+(((SumDistance)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
local real SMoveLocationY=GetUnitY(MoveUnit)+(((SumDistance)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if(distance<=0)then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
if not IsTerrainPathable(SMoveLocationX,SMoveLocationY,ConvertPathingType(2))then
call SetUnitX(MoveUnit,SMoveLocationX)
call SetUnitY(MoveUnit,SMoveLocationY)
endif
call SaveReal(udg_Hashtable,GetHandleId(t),$47527379,distance-SumDistance)
endif
if not UnitAlive(MoveUnit)then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set MoveUnit=null
endfunction
function KnockBackXYef takes unit a,real x,real y,real d,real e returns nothing
local timer t=CreateTimer()
local real angle=s__Angle_PBP(GetUnitX(a),GetUnitY(a),x,y)
local real distance=s__Distance_PBP(GetUnitX(a),GetUnitY(a),x,y)
local real frequency=distance/(d/e)
call SaveReal(udg_Hashtable,GetHandleId(t),$DCD57FAE,angle)
call SaveReal(udg_Hashtable,GetHandleId(t),$47527379,distance)
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$B6A6EBAA,a)
call SaveReal(udg_Hashtable,GetHandleId(t),$BFC6BD9B,frequency)
call TimerStart(t,e,true,function KnockBackSef)
set t=null
set a=null
endfunction
function KnockBackS2 takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit MoveUnit=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$B6A6EBAA)
local real distance=LoadReal(udg_Hashtable,GetHandleId(t),$47527379)
local real SumDistance=LoadReal(udg_Hashtable,GetHandleId(t),$BFC6BD9B)
local real Angle2=LoadReal(udg_Hashtable,GetHandleId(t),$DCD57FAE)
local real SMoveLocationX=GetUnitX(MoveUnit)+(((SumDistance)*1.0)*Cos(((Angle2)*1.0)*bj_DEGTORAD))
local real SMoveLocationY=GetUnitY(MoveUnit)+(((SumDistance)*1.0)*Sin(((Angle2)*1.0)*bj_DEGTORAD))
local unit dummy
if(distance<=0)or GetUnitAbilityLevel(MoveUnit,'SY10')==1 then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
if IsPointPathableALL(SMoveLocationX,SMoveLocationY)then
call SetUnitX(MoveUnit,SMoveLocationX)
call SetUnitY(MoveUnit,SMoveLocationY)
else
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(MoveUnit),GetUnitY(MoveUnit),GetUnitFacing(MoveUnit)-180)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_WarStompCaster.mdl",dummy,"origin"))
call SetUnitAnimationByIndex(dummy,0)
call SetUnitFlyHeight(dummy,GetUnitFlyHeight(MoveUnit)+200.00,0.00)
call KillUnit(dummy)
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call SaveReal(udg_Hashtable,GetHandleId(t),$47527379,distance-SumDistance)
endif
if not UnitAlive(MoveUnit)then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set MoveUnit=null
set dummy=null
endfunction
function KnockBackEn takes unit a,real x,real y,real d,real e returns nothing
local timer t=CreateTimer()
local real angle=s__Angle_PBP(GetUnitX(a),GetUnitY(a),x,y)
local real distance=s__Distance_PBP(GetUnitX(a),GetUnitY(a),x,y)
local real frequency=distance/(d/e)
call SaveReal(udg_Hashtable,GetHandleId(t),$DCD57FAE,angle)
if a==Boss then
call SaveReal(udg_Hashtable,GetHandleId(t),$47527379,distance/2)
else
call SaveReal(udg_Hashtable,GetHandleId(t),$47527379,distance)
endif
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$B6A6EBAA,a)
call SaveReal(udg_Hashtable,GetHandleId(t),$BFC6BD9B,frequency)
call TimerStart(t,e,true,function KnockBackS2)
set t=null
set a=null
endfunction
function FadeFilterB takes real duration,blendmode bmode,string tex,real red0,real green0,real blue0,real trans0,real red1,real green1,real blue1,real trans1 returns nothing
call SetCineFilterTexture(tex)
call SetCineFilterBlendMode(bmode)
call SetCineFilterTexMapFlags(ConvertTexMapFlags(0))
call SetCineFilterStartUV(0,0,1,1)
call SetCineFilterEndUV(0,0,1,1)
call SetCineFilterStartColor(PercentTo255(red0),PercentTo255(green0),PercentTo255(blue0),PercentTo255(100-trans0))
call SetCineFilterEndColor(PercentTo255(red1),PercentTo255(green1),PercentTo255(blue1),PercentTo255(100-trans1))
call SetCineFilterDuration(duration)
call DisplayCineFilter(true)
set bmode=null
endfunction
function FilterBasic takes player a,real b,string c,real d,real e,real f,real g,real h,real i,real j,real k returns nothing
if(GetLocalPlayer()==a)then
call FadeFilterB(b,ConvertBlendMode(2),c,d,e,f,g,h,i,j,k)
endif
set a=null
endfunction
function jump1 takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit a=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$B6A6EBAA)
local real multiple=LoadReal(udg_Hashtable,GetHandleId(t),$41046ADF)
local real max=LoadReal(udg_Hashtable,GetHandleId(t),$A8E3A26B)
local real speed=LoadReal(udg_Hashtable,GetHandleId(t),$FB6E8B46)
local real distance=LoadReal(udg_Hashtable,GetHandleId(t),$47527379)
local real l__min=LoadReal(udg_Hashtable,GetHandleId(t),$13B436D5)
local real height=LoadReal(udg_Hashtable,GetHandleId(t),$BEFD8BE8)
local real end=0
if(l__min*2>=distance)then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call DestroyTimer(t)
call SetUnitFlyHeight(a,height,0)
else
set l__min=l__min+speed
if((height+-(Pow(l__min,2.00)/distance)*multiple)+max<=height)then
call SetUnitFlyHeight(a,0,0)
else
call SetUnitFlyHeight(a,height+-((Pow(l__min,2.00)/distance)*multiple)+max,0)
endif
if not UnitAlive(a)then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call SaveReal(udg_Hashtable,GetHandleId(t),$13B436D5,l__min)
endif
set a=null
set t=null
endfunction
function jump takes unit u,real d,real m,real g returns nothing
local timer t=CreateTimer()
local real height=GetUnitFlyHeight(u)
local real l__min=(300/2)*-1
local real r=(l__min*l__min)/300
local real multiple=m/r
local real w
set w=d/g
set w=300/w
set d=w
call UnitAddAbility(u,'Amrf')
call UnitRemoveAbility(u,'Amrf')
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hashtable,GetHandleId(t),$BEFD8BE8,height)
call SaveReal(udg_Hashtable,GetHandleId(t),$A8E3A26B,m)
call SaveReal(udg_Hashtable,GetHandleId(t),$41046ADF,multiple)
call SaveReal(udg_Hashtable,GetHandleId(t),$47527379,300)
call SaveReal(udg_Hashtable,GetHandleId(t),$FB6E8B46,d)
call SaveReal(udg_Hashtable,GetHandleId(t),$13B436D5,l__min)
call TimerStart(t,g,true,function jump1)
set t=null
set u=null
endfunction
function jumpEn takes unit u,real d,real m,real g returns nothing
local timer t=CreateTimer()
local real height=GetUnitFlyHeight(u)
local real l__min=(300/2)*-1
local real r=(l__min*l__min)/300
local real multiple=m/r
local real w
if u !=Boss then
set w=d/g
set w=300/w
set d=w
call UnitAddAbility(u,'Amrf')
call UnitRemoveAbility(u,'Amrf')
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hashtable,GetHandleId(t),$BEFD8BE8,height)
call SaveReal(udg_Hashtable,GetHandleId(t),$A8E3A26B,m)
call SaveReal(udg_Hashtable,GetHandleId(t),$41046ADF,multiple)
call SaveReal(udg_Hashtable,GetHandleId(t),$47527379,300)
call SaveReal(udg_Hashtable,GetHandleId(t),$FB6E8B46,d)
call SaveReal(udg_Hashtable,GetHandleId(t),$13B436D5,l__min)
call TimerStart(t,g,true,function jump1)
else
call DestroyTimer(t)
endif
set u=null
set t=null
endfunction
function AOEremove takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$E9ECB0BE)
call SetUnitVertexColor(u,0,0,0,0)
call RemoveUnit(u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function AOE takes real x,real y,real size,real speed,real time returns nothing
local timer t=CreateTimer()
local unit u
set u=CreateUnit(Player(11),'sys9',x,y,270)
call DzSetUnitModel(u,"war3mapImported\\@AOE_AOEIndicator.mdl")
call SetUnitTimeScale(u,speed)
call SetUnitScale(u,size,1,1)
call TimerStart(t,time,false,function AOEremove)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$E9ECB0BE,u)
set t=null
set u=null
endfunction
function AOEcustom takes string l__str,real x,real y,real angle,real time returns nothing
local unit u
local timer t=CreateTimer()
set u=CreateUnit(Player(11),'sys9',x,y,angle)
call DzSetUnitModel(u,l__str)
call TimerStart(t,time,false,function AOEremove)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$E9ECB0BE,u)
set u=null
set t=null
endfunction
function AOEoutT takes nothing returns nothing
local timer t=GetExpiredTimer()
local real time=LoadReal(udg_Hashtable,GetHandleId(t),$6B54C545)
local integer stage=LoadInteger(udg_Hashtable,GetHandleId(t),$62760798)
local unit u=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$C303079D)
call SaveInteger(udg_Hashtable,GetHandleId(t),$62760798,stage+1)
call SaveReal(udg_Hashtable,GetHandleId(t),$6B54C545,time-0.03)
if stage==10 then
call SaveInteger(udg_Hashtable,GetHandleId(t),$62760798,0)
endif
call SetUnitVertexColor(u,255,255,255,55+(stage*13))
call TimerStart(t,0.03,false,function AOEoutT)
if time<=0 then
call SetUnitVertexColor(u,0,0,0,0)
call KillUnit(u)
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
endfunction
function AOEout takes real x,real y,real size,real time returns nothing
local effect ef
local timer t=CreateTimer()
local unit u
set u=CreateUnit(Player(11),'sys8',x,y,270)
call DzSetUnitModel(u,"war3mapImported\\@AOE_AOEIndicator3.mdl")
call SetUnitScale(u,size,1,1)
call TimerStart(t,0.03,false,function AOEoutT)
call SaveReal(udg_Hashtable,GetHandleId(t),$6B54C545,time)
call SaveInteger(udg_Hashtable,GetHandleId(t),$62760798,7)
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$C303079D,u)
set ef=null
set t=null
set u=null
endfunction
function recovery1 takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit source=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$E9ECB0BE)
local unit caster=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$A6468E1C)
local real recover=LoadReal(udg_Hashtable,GetHandleId(t),$E13ED6E1)
local real frequency=LoadReal(udg_Hashtable,GetHandleId(t),$9378F386)
local real number=LoadReal(udg_Hashtable,GetHandleId(t),$FA4531C3)
local string impact=LoadStr(udg_Hashtable,GetHandleId(t),$192F86FC)
local string sticking=LoadStr(udg_Hashtable,GetHandleId(t),$786BD19C)
local integer p=GetPlayerId(GetOwningPlayer(source))+1
local integer p2=GetPlayerId(GetOwningPlayer(caster))+1
local real HealP=HealEF[p]
if(number>=frequency)then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call DestroyTimer(t)
else
if(UnitAlive(source)==true)then
call EFsettingU(p,impact,0,source,sticking)
if caster !=source then
set HealP=HealP+HealEFfriend[p2]
if LoadBoolean(Hash_Stat,p2,$76DA57E)then
call StatChangeX(p,20,"주탯퍼",12,"eila")
call BuffCall(source,'BI07',12,false,false)
if GetUnitAbilityLevel(source,'A022')==0 then
call UnitAddAbility(source,'A022')
endif
endif
endif
set recover=recover*HealEF[p]
call SetUnitState(source,ConvertUnitState(0),GetUnitState(source,ConvertUnitState(0))+recover)
else
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set number=number+1
call SaveReal(udg_Hashtable,GetHandleId(t),$FA4531C3,number)
endif
set source=null
set caster=null
set t=null
endfunction
function recovery takes unit a,unit b,real c,real d,real e,string f,string g returns nothing
local timer t=CreateTimer()
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$E9ECB0BE,b)
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$A6468E1C,a)
call SaveReal(udg_Hashtable,GetHandleId(t),$E13ED6E1,c)
call SaveReal(udg_Hashtable,GetHandleId(t),$9378F386,d)
call SaveReal(udg_Hashtable,GetHandleId(t),$FA4531C3,1)
call SaveStr(udg_Hashtable,GetHandleId(t),$192F86FC,f)
call SaveStr(udg_Hashtable,GetHandleId(t),$786BD19C,g)
call TimerStart(t,e,true,function recovery1)
set a=null
set b=null
set t=null
endfunction
function recoveryHP takes unit a,unit b,real c,string f,string g returns nothing
local integer p=GetPlayerId(GetOwningPlayer(b))+1
local integer p2=GetPlayerId(GetOwningPlayer(a))+1
local real HealP=HealEF[p]
call EFsettingU(p,f,0,b,g)
if a !=b then
set HealP=HealP+HealEFfriend[p2]
if LoadBoolean(Hash_Stat,p2,$76DA57E)then
call StatChangeX(p,30,"주탯퍼",12,"eila")
call BuffCall(b,'BI07',12,false,false)
if GetUnitAbilityLevel(b,'A022')==0 then
call UnitAddAbility(b,'A022')
endif
endif
endif
set c=c*HealEF[p]
call SetUnitState(b,ConvertUnitState(0),GetUnitState(b,ConvertUnitState(0))+c)
set a=null
set b=null
endfunction
function recoveryMP takes unit a,unit b,real c,string f,string g returns nothing
local integer p=GetPlayerId(GetOwningPlayer(b))+1
local integer p2=GetPlayerId(GetOwningPlayer(a))+1
local real HealP=HealEF[p]
call EFsettingU(p,f,0,b,g)
if a !=b then
set HealP=HealP+HealEFfriend[p2]
endif
set c=c*HealEF[p]
call SetUnitState(b,ConvertUnitState(2),GetUnitState(b,ConvertUnitState(2))+c)
set a=null
set b=null
endfunction
function Expand1 takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit expand=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$ED5EA1E7)
local real BaseSize=LoadReal(udg_Hashtable,GetHandleId(t),$B54F5BCB)
local real MaxSize=LoadReal(udg_Hashtable,GetHandleId(t),$8EBEB15B)
local real SumSize=LoadReal(udg_Hashtable,GetHandleId(t),$A1E69E62)
if(BaseSize>=MaxSize)then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call KillUnit(expand)
call PauseTimer(t)
call DestroyTimer(t)
else
set BaseSize=BaseSize+SumSize
call SetUnitScalePercent(expand,BaseSize,BaseSize,BaseSize)
call SaveReal(udg_Hashtable,GetHandleId(t),$B54F5BCB,BaseSize)
endif
set expand=null
set t=null
endfunction
function Expand takes unit a,real b,real c,real d,real e returns nothing
local timer t=CreateTimer()
local real allowed_Time=(c-b)/(e/d)
if(c<=b)then
call DestroyTimer(t)
else
set b=b+allowed_Time
call SetUnitScalePercent(a,b,b,b)
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$ED5EA1E7,a)
call SaveReal(udg_Hashtable,GetHandleId(t),$B54F5BCB,b)
call SaveReal(udg_Hashtable,GetHandleId(t),$A1E69E62,allowed_Time)
call SaveReal(udg_Hashtable,GetHandleId(t),$8EBEB15B,c)
call TimerStart(t,d,true,function Expand1)
endif
set t=null
set a=null
endfunction
function CharacterEXmodelSet takes unit u,string l__str returns nothing
local integer p=GetPlayerId(GetOwningPlayer(u))+1
call DzSetUnitModel(u,l__str)
if GetUnitAbilityLevel(u,'UE00')==1 then
call UnitMakeAbilityPermanent(u,false,'UE00')
call UnitRemoveAbility(u,'UE00')
call UnitAddAbility(u,'UE00')
call UnitMakeAbilityPermanent(u,true,'UE00')
endif
if GetUnitAbilityLevel(u,'UE01')==1 then
call UnitMakeAbilityPermanent(u,false,'UE01')
call UnitRemoveAbility(u,'UE01')
call UnitAddAbility(u,'UE01')
call UnitMakeAbilityPermanent(u,true,'UE01')
endif
if GetUnitAbilityLevel(u,'UE02')==1 then
call UnitMakeAbilityPermanent(u,false,'UE02')
call UnitRemoveAbility(u,'UE02')
call UnitAddAbility(u,'UE02')
call UnitMakeAbilityPermanent(u,true,'UE02')
endif
if GetUnitAbilityLevel(u,'UE03')==1 then
call UnitMakeAbilityPermanent(u,false,'UE03')
call UnitRemoveAbility(u,'UE03')
call UnitAddAbility(u,'UE03')
call UnitMakeAbilityPermanent(u,true,'UE03')
endif
if GetUnitAbilityLevel(u,'UE05')==1 then
call UnitMakeAbilityPermanent(u,false,'UE05')
call UnitRemoveAbility(u,'UE05')
call UnitAddAbility(u,'UE05')
call UnitMakeAbilityPermanent(u,true,'UE05')
endif
if GetUnitAbilityLevel(u,'UE06')==1 then
call UnitMakeAbilityPermanent(u,false,'UE06')
call UnitRemoveAbility(u,'UE06')
call UnitAddAbility(u,'UE06')
call UnitMakeAbilityPermanent(u,true,'UE06')
endif
if GetUnitAbilityLevel(u,'A02B')==1 then
call UnitMakeAbilityPermanent(u,false,'A02B')
call UnitRemoveAbility(u,'A02B')
call UnitAddAbility(u,'A02B')
call UnitMakeAbilityPermanent(u,true,'A02B')
endif
if GetUnitAbilityLevel(u,'A03G')==1 then
call UnitMakeAbilityPermanent(u,false,'A03G')
call UnitRemoveAbility(u,'A03G')
call UnitAddAbility(u,'A03G')
call UnitMakeAbilityPermanent(u,true,'A03G')
endif
if GetUnitAbilityLevel(u,'A04I')==1 then
call UnitMakeAbilityPermanent(u,false,'A04I')
call UnitRemoveAbility(u,'A04I')
call UnitAddAbility(u,'A04I')
call UnitMakeAbilityPermanent(u,true,'A04I')
endif
call UnitRemoveAbility(u,CharacterColor[p])
call UnitAddAbility(u,CharacterColor[p])
call UnitMakeAbilityPermanent(u,true,CharacterColor[p])
set u=null
endfunction
function CheckPlayerGroup takes unit u returns boolean
if UnitAlive(u)and IsUnitEnemy(u,Player(9))and not IsUnitType(u,ConvertUnitType(15))and not IsUnitInGroup(u,udg_Mujuk)then
set u=null
return true
else
set u=null
return false
endif
endfunction
function CheckPlayerGroupN takes unit u returns boolean
if UnitAlive(u)and IsUnitEnemy(u,Player(9))and not IsUnitType(u,ConvertUnitType(15))then
set u=null
return true
else
set u=null
return false
endif
endfunction
function CheckBossGroup takes unit u returns boolean
if UnitAlive(u)and IsUnitAlly(u,Player(9))and not IsUnitType(u,ConvertUnitType(15))and not IsUnitInGroup(u,udg_Mujuk)then
set u=null
return true
else
set u=null
return false
endif
endfunction
function CheckBossGroupN takes unit u returns boolean
if UnitAlive(u)and IsUnitAlly(u,Player(9))and not IsUnitType(u,ConvertUnitType(15))then
set u=null
return true
else
set u=null
return false
endif
endfunction
function CheckFBossGroupN takes unit u returns boolean
if UnitAlive(u)and IsUnitAlly(u,Player(9))and not IsUnitType(u,ConvertUnitType(15))then
set u=null
return true
else
set u=null
return false
endif
endfunction
function CheckFBossGroup takes unit u returns boolean
if UnitAlive(u)and IsUnitAlly(u,Player(9))and not IsUnitType(u,ConvertUnitType(15))and not IsUnitInGroup(u,udg_Mujuk)then
set u=null
return true
else
set u=null
return false
endif
endfunction
function itemTypeCheck takes unit whichUnit,integer style returns boolean
local integer index=0
local item indexItem
local integer index2=0
local boolean a=false
local integer p=GetPlayerId(GetOwningPlayer(whichUnit))+1
if Charcter[p]==whichUnit then
loop
set indexItem=UnitItemInSlot(whichUnit,index)
if style==1 then
if(indexItem !=null)and GetItemType(indexItem)==ConvertItemType(7)then
set a=true
exitwhen true
endif
elseif style==2 then
if(indexItem !=null)and GetItemType(indexItem)==ConvertItemType(5)then
set a=true
exitwhen true
endif
elseif style==3 then
if(indexItem !=null)and GetItemType(indexItem)==ConvertItemType(4)then
set index2=index2+1
if index2==3 then
set a=true
exitwhen true
endif
endif
endif
set index=index+1
exitwhen index>=6
endloop
endif
call FlushChildHashtable(udg_Hash,p+$DCC4F110)
set indexItem=null
set whichUnit=null
if a==true then
return true
else
return false
endif
endfunction
function itemNUMcheck takes integer cd,integer cd2 returns boolean
if(cd=='I211' or cd=='I311' or cd=='I411' or cd=='I511' or cd=='I611')and(cd2=='I211' or cd2=='I311' or cd2=='I411' or cd2=='I511' or cd2=='I611')then
return true
endif
if(cd=='I212' or cd=='I312' or cd=='I412' or cd=='I512' or cd=='I612')and(cd2=='I212' or cd2=='I312' or cd2=='I412' or cd2=='I512' or cd2=='I612')then
return true
endif
if(cd=='I213' or cd=='I313' or cd=='I413' or cd=='I513' or cd=='I613')and(cd2=='I213' or cd2=='I313' or cd2=='I413' or cd2=='I513' or cd2=='I613')then
return true
endif
if(cd=='I214' or cd=='I314' or cd=='I414' or cd=='I514' or cd=='I614')and(cd2=='I214' or cd2=='I314' or cd2=='I414' or cd2=='I514' or cd2=='I614')then
return true
endif
if(cd=='I215' or cd=='I315' or cd=='I415' or cd=='I515' or cd=='I615')and(cd2=='I215' or cd2=='I315' or cd2=='I415' or cd2=='I515' or cd2=='I615')then
return true
endif
if(cd=='I216' or cd=='I316' or cd=='I416' or cd=='I516' or cd=='I616')and(cd2=='I216' or cd2=='I316' or cd2=='I416' or cd2=='I516' or cd2=='I616')then
return true
endif
if(cd=='I217' or cd=='I317' or cd=='I417' or cd=='I517' or cd=='I617')and(cd2=='I217' or cd2=='I317' or cd2=='I417' or cd2=='I517' or cd2=='I617')then
return true
endif
if(cd=='I218' or cd=='I318' or cd=='I418' or cd=='I518' or cd=='I618')and(cd2=='I218' or cd2=='I318' or cd2=='I418' or cd2=='I518' or cd2=='I618')then
return true
endif
if(cd=='I219' or cd=='I319' or cd=='I419' or cd=='I519' or cd=='I619')and(cd2=='I219' or cd2=='I319' or cd2=='I419' or cd2=='I519' or cd2=='I619')then
return true
endif
if(cd=='I220' or cd=='I320' or cd=='I420' or cd=='I520' or cd=='I620')and(cd2=='I220' or cd2=='I320' or cd2=='I420' or cd2=='I520' or cd2=='I620')then
return true
endif
if(cd=='I221' or cd=='I321' or cd=='I421' or cd=='I521' or cd=='I621')and(cd2=='I221' or cd2=='I321' or cd2=='I421' or cd2=='I521' or cd2=='I621')then
return true
endif
if(cd=='I222' or cd=='I322' or cd=='I422' or cd=='I522' or cd=='I622')and(cd2=='I222' or cd2=='I322' or cd2=='I422' or cd2=='I522' or cd2=='I622')then
return true
endif
if(cd=='I223' or cd=='I323' or cd=='I423' or cd=='I523' or cd=='I623')and(cd2=='I223' or cd2=='I323' or cd2=='I423' or cd2=='I523' or cd2=='I623')then
return true
endif
if(cd=='I224' or cd=='I324' or cd=='I424' or cd=='I524' or cd=='I624')and(cd2=='I224' or cd2=='I324' or cd2=='I424' or cd2=='I524' or cd2=='I624')then
return true
endif
if(cd=='I225' or cd=='I325' or cd=='I425' or cd=='I525' or cd=='I625')and(cd2=='I225' or cd2=='I325' or cd2=='I425' or cd2=='I525' or cd2=='I625')then
return true
endif
if(cd=='I226' or cd=='I326' or cd=='I426' or cd=='I526' or cd=='I626')and(cd2=='I226' or cd2=='I326' or cd2=='I426' or cd2=='I526' or cd2=='I626')then
return true
endif
if(cd=='I227' or cd=='I327' or cd=='I427' or cd=='I527' or cd=='I627')and(cd2=='I227' or cd2=='I327' or cd2=='I427' or cd2=='I527' or cd2=='I627')then
return true
endif
if(cd=='I228' or cd=='I328' or cd=='I428' or cd=='I528' or cd=='I628')and(cd2=='I228' or cd2=='I328' or cd2=='I428' or cd2=='I528' or cd2=='I628')then
return true
endif
if(cd=='I229' or cd=='I329' or cd=='I429' or cd=='I529' or cd=='I629')and(cd2=='I229' or cd2=='I329' or cd2=='I429' or cd2=='I529' or cd2=='I629')then
return true
endif
if(cd=='I233' or cd=='I333' or cd=='I433' or cd=='I533' or cd=='I633')and(cd2=='I233' or cd2=='I333' or cd2=='I433' or cd2=='I533' or cd2=='I633')then
return true
endif
if(cd=='I251' or cd=='I351' or cd=='I451' or cd=='I551' or cd=='I651')and(cd2=='I251' or cd2=='I351' or cd2=='I451' or cd2=='I551' or cd2=='I651')then
return true
endif
return false
endfunction
function itemTypeCheck3 takes unit whichUnit,integer itemcd,item gettem returns boolean
local integer index=0
local item indexItem
local integer indexItem2=0
local integer index2=0
local boolean a=false
local integer p=GetPlayerId(GetOwningPlayer(whichUnit))+1
if Charcter[p]==whichUnit then
loop
exitwhen index>=7
set indexItem=UnitItemInSlot(whichUnit,index)
if(indexItem !=null)and GetItemType(indexItem)==ConvertItemType(4)and gettem !=indexItem then
set indexItem2=GetItemTypeId(indexItem)
set index2=index2+1
endif
if itemNUMcheck(itemcd,indexItem2)then
set a=true
exitwhen true
endif
if index2>=3 then
set a=true
exitwhen true
endif
set index=index+1
endloop
endif
call FlushChildHashtable(udg_Hash,p+$DCC4F110)
set indexItem=null
set whichUnit=null
set gettem=null
if a==true then
return true
else
return false
endif
endfunction
function itemCheckCharge takes integer p,integer itemid,integer itemid2,integer itemid3,integer want1,integer want2,integer want3 returns boolean
local integer index=0
local item indexItem
local integer indexA=0
local integer indexB=0
local integer indexC=0
local boolean a=false
local boolean b=false
local boolean c=false
local boolean d=false
if itemid3=='0000' then
set c=true
endif
loop
set indexItem=UnitItemInSlot(Charcter[p],index)
if GetItemTypeId(indexItem)==itemid or GetItemTypeId(indexItem)==itemid2 or GetItemTypeId(indexItem)==itemid3 then
if GetItemTypeId(indexItem)==itemid then
set indexA=indexA+GetItemCharges(indexItem)
if(indexA>=want1)then
set a=true
endif
elseif GetItemTypeId(indexItem)==itemid2 then
set indexB=indexB+GetItemCharges(indexItem)
if(indexB>=want2)then
set b=true
endif
elseif GetItemTypeId(indexItem)==itemid3 then
set indexC=indexC+GetItemCharges(indexItem)
if(indexC>=want3)then
set c=true
endif
if a and b and c then
set d=true
exitwhen true
endif
endif
endif
set index=index+1
exitwhen index>=6
endloop
if not d then
set index=0
loop
set indexItem=UnitItemInSlot(chango[p],index)
if GetItemTypeId(indexItem)==itemid or GetItemTypeId(indexItem)==itemid2 or GetItemTypeId(indexItem)==itemid3 then
if GetItemTypeId(indexItem)==itemid then
set indexA=indexA+GetItemCharges(indexItem)
if(indexA>=want1)then
set a=true
endif
elseif GetItemTypeId(indexItem)==itemid2 then
set indexB=indexB+GetItemCharges(indexItem)
if(indexB>=want2)then
set b=true
endif
elseif GetItemTypeId(indexItem)==itemid3 then
set indexC=indexC+GetItemCharges(indexItem)
if(indexC>=want3)then
set c=true
endif
if a and b and c then
exitwhen true
endif
endif
endif
set index=index+1
exitwhen index>=6
endloop
endif
if a and b and c then
set d=true
endif
set indexItem=null
if d==true then
return true
else
return false
endif
endfunction
function itemCheckChargeM takes integer p,integer itemid,integer minus returns nothing
local integer index=0
local item indexItem
local integer index2=0
local integer index3=minus
loop
set indexItem=UnitItemInSlot(Charcter[p],index)
if GetItemTypeId(indexItem)==itemid then
set index2=GetItemCharges(indexItem)
set index3=minus-index2
set index2=index2-minus
if index2>=1 then
call SetItemCharges(indexItem,index2)
else
call RemoveItem(indexItem)
endif
endif
set index=index+1
exitwhen index>=6
endloop
if(index3>=1)then
set index=0
loop
set indexItem=UnitItemInSlot(chango[p],index)
if GetItemTypeId(indexItem)==itemid then
set index2=GetItemCharges(indexItem)
set index3=minus-index2
set index2=index2-minus
if index2>=1 then
call SetItemCharges(indexItem,index2)
else
call RemoveItem(indexItem)
endif
endif
set index=index+1
exitwhen index>=6
endloop
endif
set indexItem=null
endfunction
function itemTypeCheckLv takes unit whichUnit,integer style returns item
local integer index=0
local item indexItem
local integer index2=0
local item a=null
loop
set indexItem=UnitItemInSlot(whichUnit,index)
if style==1 then
if(indexItem !=null)and GetItemType(indexItem)==ConvertItemType(7)then
set a=indexItem
exitwhen true
endif
elseif style==2 then
if(indexItem !=null)and GetItemType(indexItem)==ConvertItemType(5)then
set a=indexItem
exitwhen true
endif
endif
set index=index+1
exitwhen index>=6
endloop
set indexItem=null
set whichUnit=null
return a
endfunction
function itemTypeCheckLv2 takes unit whichUnit,integer wantLV returns item
local integer index=0
local item indexItem
local item a=null
local integer index2=0
loop
set indexItem=UnitItemInSlot(whichUnit,index)
if(indexItem !=null)and GetItemType(indexItem)==ConvertItemType(4)then
set index2=index2+1
if index2==wantLV then
set a=indexItem
exitwhen true
endif
endif
set index=index+1
exitwhen index>=6
endloop
set indexItem=null
set whichUnit=null
set bj_lastCreatedItem=a
set a=null
return bj_lastCreatedItem
endfunction
function itemTypeCheck2 takes unit whichUnit,integer style returns boolean
local integer index=0
local item indexItem
local integer index2=0
local boolean a=false
local integer p=GetPlayerId(GetOwningPlayer(whichUnit))+1
if Charcter[p]==whichUnit then
loop
set indexItem=UnitItemInSlot(whichUnit,index)
if style==1 then
if(indexItem !=null)and GetItemType(indexItem)==ConvertItemType(7)then
set index2=index2+1
if index2==2 then
set a=true
exitwhen true
endif
endif
elseif style==2 then
if(indexItem !=null)and GetItemType(indexItem)==ConvertItemType(5)then
set index2=index2+1
if index2==2 then
set a=true
exitwhen true
endif
endif
elseif style==3 then
if(indexItem !=null)and GetItemType(indexItem)==ConvertItemType(4)then
set index2=index2+1
if index2==4 then
set a=true
exitwhen true
endif
endif
endif
set index=index+1
exitwhen index>=6
endloop
endif
set indexItem=null
set whichUnit=null
if a==true then
return true
else
return false
endif
endfunction
function Animate1 takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit a=LoadUnitHandle(udg_Hash,GetHandleId(t),$CA08E606)
local integer b=LoadInteger(udg_Hash,GetHandleId(t),$10A2ECBF)
call SetUnitAnimationByIndex(a,b)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set a=null
set t=null
endfunction
function Animate takes unit Doer,integer Anime returns nothing
local timer t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),$CA08E606,Doer)
call SaveInteger(udg_Hash,GetHandleId(t),$10A2ECBF,Anime)
call TimerStart(t,0.01,false,function Animate1)
set Doer=null
set t=null
endfunction
function SlowApply takes unit giveunit,unit takeunit,real time,real slow returns nothing
if giveunit !=null and takeunit !=null and UnitAlive(takeunit)then
call SetUnitX(ApplyDM,GetUnitX(takeunit))
call SetUnitY(ApplyDM,GetUnitY(takeunit))
call UnitRemoveAbility(ApplyDM,'A015')
call UnitAddAbility(ApplyDM,'A015')
call EXSetAbilityDataReal(EXGetUnitAbility(ApplyDM,'A015'),1,108,slow)
call EXSetAbilityDataReal(EXGetUnitAbility(ApplyDM,'A015'),1,102,time)
call EXSetAbilityDataReal(EXGetUnitAbility(ApplyDM,'A015'),1,103,time)
call IncUnitAbilityLevel(ApplyDM,'A015')
call DecUnitAbilityLevel(ApplyDM,'A015')
call IssueTargetOrder(ApplyDM,"cripple",takeunit)
endif
set giveunit=null
set takeunit=null
endfunction
function SilenceApply takes unit giveunit,unit takeunit,real time,real slow,real ad returns nothing
if giveunit !=null and takeunit !=null and UnitAlive(takeunit)then
call SetUnitX(ApplyDM,GetUnitX(takeunit))
call SetUnitY(ApplyDM,GetUnitY(takeunit))
call UnitRemoveAbility(ApplyDM,'A01K')
call UnitAddAbility(ApplyDM,'A01K')
call EXSetAbilityDataReal(EXGetUnitAbility(ApplyDM,'A01K'),1,111,slow)
call EXSetAbilityDataReal(EXGetUnitAbility(ApplyDM,'A01K'),1,112,ad)
call EXSetAbilityDataReal(EXGetUnitAbility(ApplyDM,'A01K'),1,102,time)
call EXSetAbilityDataReal(EXGetUnitAbility(ApplyDM,'A01K'),1,103,time)
call IncUnitAbilityLevel(ApplyDM,'A01K')
call DecUnitAbilityLevel(ApplyDM,'A01K')
call IssueTargetOrder(ApplyDM,"soulburn",takeunit)
endif
set giveunit=null
set takeunit=null
endfunction
function ND_Find takes player p,integer max returns real
local integer i=0
local real degree=0
local real temp=0
loop
set i=i+1
exitwhen i>max
set temp=LoadReal(udg_Hash,GetHandleId(p),1000+i)
if temp>degree then
set degree=temp
endif
endloop
set p=null
return degree
endfunction
function ND_Func takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer id=GetHandleId(t)
local player p=LoadPlayerHandle(udg_Hash,id,0)
local integer current_ID=LoadInteger(udg_Hash,id,1)
local integer n=GetPlayerId(p)+1
set ND_Size[n]=ND_Size[n]-1
if ND_Size[n]==0 then
if(GetLocalPlayer()==p)then
call CameraSetSourceNoise(0,0)
call CameraSetTargetNoise(0,0)
endif
set ND_ID[n]=0
else
call SaveReal(udg_Hash,GetHandleId(p),1000+current_ID,0)
call CameraSetEQNoiseForPlayer(p,ND_Find(p,ND_ID[n]))
endif
call FlushChildHashtable(udg_Hash,id)
call DestroyTimer(t)
set p=null
set t=null
endfunction
function ND takes player p,real time,real degree returns nothing
local timer t=CreateTimer()
local integer id=GetHandleId(t)
local integer n=GetPlayerId(p)+1
set ND_Size[n]=ND_Size[n]+1
set ND_ID[n]=ND_ID[n]+1
call SaveReal(udg_Hash,GetHandleId(p),1000+ND_ID[n],degree)
call SavePlayerHandle(udg_Hash,id,0,p)
call SaveInteger(udg_Hash,id,1,ND_ID[n])
if degree+0.0001>=ND_Find(p,ND_ID[n])then
call CameraSetEQNoiseForPlayer(p,degree)
endif
call TimerStart(t,time,false,function ND_Func)
set t=null
set p=null
endfunction
function BOSSdifficulty takes unit c returns nothing
call SetUnitState(c,ConvertUnitState(0x20),GetUnitState(c,ConvertUnitState(0x20))+((Playint*10)))
call SetUnitState(c,ConvertUnitState(0x20),GetUnitState(c,ConvertUnitState(0x20))+((difficulty*35)))
call SetUnitState(c,ConvertUnitState(0x12),GetUnitState(c,ConvertUnitState(0x12))*(0.25+(difficulty*0.75)))
call SetUnitState(c,ConvertUnitState(0x20),GetUnitState(c,ConvertUnitState(0x20))*(0.5+(difficulty*0.55)))
call SetHeroStr(c,R2I(GetHeroStr(c,true)*(1+(Playint*0.6))),true)
if difficulty==4 then
call SetHeroStr(c,R2I(GetHeroStr(c,true)*10.5),true)
else
call SetHeroStr(c,R2I(GetHeroStr(c,true)*(-2.05+(3.05*difficulty))),true)
endif
call SetUnitState(c,UNIT_STATE_LIFE,GetUnitState(c,UNIT_STATE_MAX_LIFE))
if difficulty==2 then
call UnitAddAbility(c,'A01C')
call SetUnitAbilityLevel(c,'A01C',1)
elseif difficulty==3 then
call UnitAddAbility(c,'A01C')
call SetUnitAbilityLevel(c,'A01C',2)
elseif difficulty==4 then
call UnitAddAbility(c,'A01C')
call SetUnitAbilityLevel(c,'A01C',3)
endif
set c=null
endfunction
function BOSSdifficulty2 takes unit c returns nothing
call SetUnitState(c,ConvertUnitState(0x20),GetUnitState(c,ConvertUnitState(0x20))+((Playint*10)))
call SetUnitState(c,ConvertUnitState(0x20),GetUnitState(c,ConvertUnitState(0x20))+((difficulty*35)))
call SetUnitState(c,ConvertUnitState(0x12),GetUnitState(c,ConvertUnitState(0x12))*(0.2+(difficulty*0.85)))
if LoadInteger(udg_Hash,999,$3862CC76)>=20 and LoadInteger(udg_Hash,999,$3862CC76)<=29 then
call SetUnitState(c,ConvertUnitState(0x12),GetUnitState(c,ConvertUnitState(0x12))*4)
call SetUnitState(c,ConvertUnitState(0x20),GetUnitState(c,ConvertUnitState(0x20))*2.25)
call SetHeroStr(c,GetHeroStr(c,true)*(4+difficulty),true)
elseif LoadInteger(udg_Hash,999,$3862CC76)>=30 then
call SetUnitState(c,ConvertUnitState(0x12),GetUnitState(c,ConvertUnitState(0x12))*11.5)
call SetUnitState(c,ConvertUnitState(0x20),GetUnitState(c,ConvertUnitState(0x20))*4.5)
call SetHeroStr(c,GetHeroStr(c,true)*(11+difficulty),true)
endif
call SetUnitState(c,ConvertUnitState(0x12),GetUnitState(c,ConvertUnitState(0x12))*(0.8+(difficulty*0.25)))
call SetHeroStr(c,R2I(GetHeroStr(c,true)*(1+(Playint*0.6))),true)
call SetUnitState(c,ConvertUnitState(0x20),GetUnitState(c,ConvertUnitState(0x20))*(0.6+(difficulty*0.4)))
if difficulty==4 then
call SetHeroStr(c,R2I(GetHeroStr(c,true)*9.55),true)
else
call SetHeroStr(c,R2I(GetHeroStr(c,true)*(-1.85+(2.85*difficulty))),true)
endif
call SetUnitState(c,UNIT_STATE_LIFE,GetUnitState(c,UNIT_STATE_MAX_LIFE))
if difficulty==2 then
call UnitAddAbility(c,'A01C')
call SetUnitAbilityLevel(c,'A01C',1)
elseif difficulty==3 then
call UnitAddAbility(c,'A01C')
call SetUnitAbilityLevel(c,'A01C',2)
elseif difficulty==4 then
call UnitAddAbility(c,'A01C')
call SetUnitAbilityLevel(c,'A01C',3)
endif
set c=null
endfunction
function SkillLVUP takes integer p,integer skill,integer up returns nothing
local real mana
local integer i
if skill==1 then
set i=LoadInteger(udg_Hashtable,p,$FAFE5485)
call SaveInteger(udg_Hashtable,p,$FAFE5485,i+up)
set mana=LoadReal(udg_Hashtable,p,$9B58470C)
set mana=mana+(LoadReal(udg_Hashtable,p,$88E0F85F)*up)
call SaveReal(udg_Hashtable,p,$9B58470C,mana)
elseif skill==2 then
set i=LoadInteger(udg_Hashtable,p,$457BCFC0)
call SaveInteger(udg_Hashtable,p,$457BCFC0,i+up)
set mana=LoadReal(udg_Hashtable,p,$E755DDB8)
set mana=mana+(LoadReal(udg_Hashtable,p,$ABD3E955)*up)
call SaveReal(udg_Hashtable,p,$E755DDB8,mana)
elseif skill==3 then
set i=LoadInteger(udg_Hashtable,p,$6074AEF9)
call SaveInteger(udg_Hashtable,p,$6074AEF9,i+up)
set mana=LoadReal(udg_Hashtable,p,$A2229E00)
set mana=mana+(LoadReal(udg_Hashtable,p,$5E6EF8DA)*up)
call SaveReal(udg_Hashtable,p,$A2229E00,mana)
elseif skill==4 then
set i=LoadInteger(udg_Hashtable,p,$BB70E228)
call SaveInteger(udg_Hashtable,p,$BB70E228,i+up)
set mana=LoadReal(udg_Hashtable,p,$C3EA9E83)
set mana=mana+(LoadReal(udg_Hashtable,p,$A8D71652)*up)
call SaveReal(udg_Hashtable,p,$C3EA9E83,mana)
elseif skill==5 then
set i=LoadInteger(udg_Hashtable,p,$132FA1F5)
call SaveInteger(udg_Hashtable,p,$132FA1F5,i+up)
set mana=LoadReal(udg_Hashtable,p,$127510D2)
set mana=mana+(LoadReal(udg_Hashtable,p,$B491D29B)*up)
call SaveReal(udg_Hashtable,p,$127510D2,mana)
endif
endfunction
function itemgiven takes integer p,unit u,integer itemnum returns nothing
local item i
local integer loopA=0
set i=CreateItem(itemnum,GetUnitX(u),GetUnitY(u))
if u==Charcter[p]then
loop
exitwhen loopA>=6
if UnitItemInSlot(u,loopA)==null then
exitwhen true
elseif UnitItemInSlot(u,loopA)!=null and loopA==5 then
set u=chango[p]
endif
set loopA=loopA+1
endloop
elseif u==chango[p]then
loop
exitwhen loopA>=6
if UnitItemInSlot(u,loopA)==null then
exitwhen true
elseif UnitItemInSlot(u,loopA)!=null and loopA==5 then
set u=Charcter[p]
endif
set loopA=loopA+1
endloop
endif
call UnitAddItem(u,i)
set u=null
set i=null
endfunction
function RemoveItemTimerT takes nothing returns nothing
local timer t=GetExpiredTimer()
local item it=LoadItemHandle(udg_Hash,GetHandleId(t),0)
call RemoveItem(it)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set it=null
set t=null
endfunction
function RemoveItemTimer takes item it returns nothing
local timer t=CreateTimer()
call SaveItemHandle(udg_Hash,GetHandleId(t),0,it)
call TimerStart(t,0.01,false,function RemoveItemTimerT)
set it=null
set t=null
endfunction
function Artfect_gett takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer artid=LoadInteger(udg_Hash,GetHandleId(t),0)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),1)
set temp_integer=artid
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function Artfect_get takes integer artid,player p returns nothing
local timer t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,artid)
call SaveInteger(udg_Hash,GetHandleId(t),1,GetPlayerId(p)+1)
call TimerStart(t,0.45,false,function Artfect_gett)
set p=null
set t=null
endfunction
function Artfect_get2 takes integer artid,player p returns nothing
local timer t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,artid)
call SaveInteger(udg_Hash,GetHandleId(t),1,GetPlayerId(p)+1)
call TimerStart(t,1.2,false,function Artfect_gett)
set p=null
set t=null
endfunction
function UnitHasBuff takes unit whichUnit,integer buffcode returns boolean
if(GetUnitAbilityLevel(whichUnit,buffcode)>0)then
set whichUnit=null
return true
else
set whichUnit=null
return false
endif
endfunction
function PlaySoundOnUnit takes sound soundHandle,real volumePercent,unit whichUnit returns nothing
call AttachSoundToUnit(soundHandle,whichUnit)
call SetSoundVolume(soundHandle,R2I(volumePercent*I2R(127)*0.01))
call StartSound(soundHandle)
set soundHandle=null
set whichUnit=null
endfunction
function MultiboardSetItemValueBJ2 takes multiboard mb,integer col,integer row,string val returns nothing
local integer curRow=0
local integer curCol=0
local integer numRows=MultiboardGetRowCount(mb)
local integer numCols=MultiboardGetColumnCount(mb)
local multiboarditem mbitem=null
loop
set curRow=curRow+1
exitwhen curRow>numRows
if(row==0 or row==curRow)then
set curCol=0
loop
set curCol=curCol+1
exitwhen curCol>numCols
if(col==0 or col==curCol)then
set mbitem=MultiboardGetItem(mb,curRow-1,curCol-1)
call MultiboardSetItemValue(mbitem,val)
call MultiboardReleaseItem(mbitem)
endif
endloop
endif
endloop
set mb=null
set mbitem=null
endfunction
function SetTextTagVelocityBJ2 takes texttag tt,real speed,real angle returns nothing
local real vel=speed*0.071/128
local real xvel=vel*Cos(angle*bj_DEGTORAD)
local real yvel=vel*Sin(angle*bj_DEGTORAD)
call SetTextTagVelocity(tt,xvel,yvel)
set tt=null
endfunction
function CTset takes unit u,integer p,integer skillcode,real cooltime returns nothing
local real cot=cooltime
local integer temp
local real temp2
if cot==0 then
set cot=EXGetAbilityDataReal(EXGetUnitAbility(u,skillcode),1,ABILITY_DATA_COOL)
endif
call EXSetAbilityState(EXGetUnitAbility(u,skillcode),ABILITY_STATE_COOLDOWN,cot*ct[p])
if LoadBoolean(System,p,$E4CAF050)then
set temp=GetRandomint(1,2)
if temp<=12 then
set temp2=LoadInteger(Hash_Stat,p,$B7E7C8AD)+200
set temp2=R2I((100*200/(200+temp2)))
call EXSetAbilityState(EXGetUnitAbility(u,skillcode),ABILITY_STATE_COOLDOWN,cot*(temp2*0.01))
endif
if temp>=80 then
call EXSetAbilityState(EXGetUnitAbility(u,skillcode),ABILITY_STATE_COOLDOWN,cot*1.2)
endif
endif
set u=null
endfunction
function ProduTimeT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer pd=LoadInteger(udg_Hash,0,$8D0FE94E)
if pd==ProduceLV then
set ProduceLV=0
endif
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function ProduTime takes real time,integer pd returns nothing
local timer t=CreateTimer()
call SaveInteger(udg_Hash,0,$8D0FE94E,pd)
call TimerStart(t,time,false,function ProduTimeT)
set t=null
endfunction
function JNStashNet__trace takes string message returns nothing
call DisplayTimedTextToPlayer(GetLocalPlayer(),0.0,0.0,3600.0,"[추적] JNStashNet - "+message)
endfunction
function JNStashNet__warn takes string message returns nothing
call DisplayTimedTextToPlayer(GetLocalPlayer(),0.0,0.0,3600.0,"[경고] JNStashNet - "+message)
endfunction
function JNStashNet__error takes string message returns nothing
call DisplayTimedTextToPlayer(GetLocalPlayer(),0.0,0.0,3600.0,"[오류] JNStashNet - "+message)
endfunction
function JNStashNet__fireTrigger takes trigger trig,player user,integer whichStash,boolean finished,boolean result,string message,integer max,integer progress returns nothing
local player pUser=JNStashNet__EV_USER
local integer pStash=JNStashNet__EV_STASH
local boolean pFinished=JNStashNet__EV_FINISHED
local boolean pResult=JNStashNet__EV_RESULT
local string pMessage=JNStashNet__EV_MESSAGE
local integer pMax=JNStashNet__EV_MAX
local integer pProgress=JNStashNet__EV_PROGRESS
set JNStashNet__EV_USER=user
set JNStashNet__EV_STASH=whichStash
set JNStashNet__EV_FINISHED=finished
set JNStashNet__EV_RESULT=result
set JNStashNet__EV_MESSAGE=message
set JNStashNet__EV_MAX=max
set JNStashNet__EV_PROGRESS=progress
call TriggerExecute(trig)
set JNStashNet__EV_USER=pUser
set JNStashNet__EV_STASH=pStash
set JNStashNet__EV_FINISHED=pFinished
set JNStashNet__EV_RESULT=pResult
set JNStashNet__EV_MESSAGE=pMessage
set JNStashNet__EV_MAX=pMax
set JNStashNet__EV_PROGRESS=pProgress
set pUser=null
endfunction
function JNStashNet__createTask takes nothing returns integer
set JNStashNet__TASK_NEXT=JNStashNet__TASK_NEXT+1
return JNStashNet__TASK_NEXT
endfunction
function JNStashNet__flushTask takes integer task returns nothing
call FlushChildHashtable(JNStashNet__TASK_USER_TABLE,task)
call FlushChildHashtable(JNStashNet__TASK_STR_TABLE,task)
call FlushChildHashtable(JNStashNet__TASK_INT_TABLE,task)
call FlushChildHashtable(JNStashNet__TASK_TRIG_TABLE,task)
endfunction
function JNStashNet__queueTask takes integer task returns nothing
set JNStashNet__ACTIVE_TASKS[JNStashNet__ACTIVE_TASK_COUNT]=task
set JNStashNet__ACTIVE_TASK_COUNT=JNStashNet__ACTIVE_TASK_COUNT+1
if JNStashNet__ACTIVE_TASK_COUNT==1 then
call TimerStart(JNStashNet__TASK_ACTIVATOR,JNStashNet__CONNECTION_PROCESS_INTERVAL,true,null)
endif
endfunction
function JNStashNet__syncDownloadJNUse takes integer task,string data returns nothing
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_RES_JNUSE,S2I(data))
endfunction
function JNStashNet__syncDownloadUserInitResult takes integer task,string data returns nothing
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_RES_INIT,S2I(data))
endfunction
function JNStashNet__syncDownloadUserHeaderSizeResult takes integer task,string data returns nothing
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_RES_HEADER_SIZE,S2I(data))
endfunction
function JNStashNet__syncDownloadUserBody takes integer task,string data returns nothing
local string field=JNStringSplit(data,"/",0)
local string value=SubString(data,StringLength(field)+1,StringLength(data))
local integer whichStash=LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STASH)
local integer progress=LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_PROGRESS)
call StashSave(whichStash,field,value)
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_PROGRESS,progress+1)
endfunction
function JNStashNet__syncUploadUserSaveResult takes integer task,string data returns nothing
call SaveStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_RES_SAVE_RESULT,data)
endfunction
function JNStashNet__onTaskSync takes nothing returns nothing
local string packet=DzGetTriggerSyncData()
local string task=JNStringSplit(packet,"|",0)
local string header=JNStringSplit(SubString(packet,StringLength(task)+1,StringLength(packet)),"|",0)
local string data=SubString(packet,StringLength(task)+StringLength(header)+2,StringLength(packet))
if header=="DL_US_JN" then
call SaveInteger(JNStashNet__TASK_INT_TABLE,(S2I(task)),JNStashNet__TASK_RES_JNUSE,S2I((data)))
elseif header=="DL_US_INIT" then
call SaveInteger(JNStashNet__TASK_INT_TABLE,(S2I(task)),JNStashNet__TASK_RES_INIT,S2I((data)))
elseif header=="DL_US_SIZE" then
call SaveInteger(JNStashNet__TASK_INT_TABLE,(S2I(task)),JNStashNet__TASK_RES_HEADER_SIZE,S2I((data)))
elseif header=="DL_US_BODY" then
call JNStashNet__syncDownloadUserBody(S2I(task),data)
elseif header=="UP_US_SAVE" then
call SaveStr(JNStashNet__TASK_STR_TABLE,(S2I(task)),JNStashNet__TASK_RES_SAVE_RESULT,(data))
else
call JNStashNet__error("핸들링 불가능한 TASK SYNC 헤더를 수신했습니다.")
endif
endfunction
function JNStashNet__processDownloadJNUse takes integer task returns nothing
local player user=LoadPlayerHandle(JNStashNet__TASK_USER_TABLE,task,JNStashNet__TASK_USER)
local string jnOk=I2S(task)+"|DL_US_JN|1"
local string jnNo=I2S(task)+"|DL_US_JN|0"
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,false,false,"서버와 통신을 시도합니다.",0,0)
endif
if GetLocalPlayer()==user then
if JNUse()then
call DzSyncData(JNStashNet__TASK_SYNC_KEY,jnOk)
else
call DzSyncData(JNStashNet__TASK_SYNC_KEY,jnNo)
endif
endif
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STAGE,JNStashNet__TASK_DOWNLOAD_USER_JNUSE_WAIT)
set JNStashNet__RES_TASK=true
set user=null
endfunction
function JNStashNet__processDownloadJNUseWait takes integer task returns nothing
local player user=LoadPlayerHandle(JNStashNet__TASK_USER_TABLE,task,JNStashNet__TASK_USER)
if HaveSavedInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_RES_JNUSE)then
if LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_RES_JNUSE)==1 then
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,false,false,"서버와 연결했습니다.",0,0)
endif
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STAGE,JNStashNet__TASK_DOWNLOAD_USER_INIT)
else
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,true,false,"서버와 연결하지 못했습니다.",0,0)
endif
set user=null
return
endif
else
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,false,false,"서버와 연결 중입니다...",0,0)
endif
endif
set JNStashNet__RES_TASK=true
set user=null
endfunction
function JNStashNet__processDownloadInit takes integer task returns nothing
local player user=LoadPlayerHandle(JNStashNet__TASK_USER_TABLE,task,JNStashNet__TASK_USER)
local string mapId=LoadStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_MAPID)
local string userId=LoadStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_USERID)
local string secretKey=LoadStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_SECRETKEY)
local string charId="Default String"
local integer localResult=0
local string jnOk=I2S(task)+"|DL_US_INIT|0"
local string jnM1=I2S(task)+"|DL_US_INIT|-1"
local string jnM3=I2S(task)+"|DL_US_INIT|-3"
local string jnMX=I2S(task)+"|DL_US_INIT|9999"
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,false,false,"서버 데이터를 수신 시도합니다.",0,0)
endif
if GetLocalPlayer()==user then
set localResult=JNObjectUserInit(mapId,userId,secretKey,charId)
if localResult==0 then
call DzSyncData(JNStashNet__TASK_SYNC_KEY,jnOk)
elseif localResult==-1 then
call DzSyncData(JNStashNet__TASK_SYNC_KEY,jnM1)
elseif localResult==-3 then
call DzSyncData(JNStashNet__TASK_SYNC_KEY,jnM3)
else
call DzSyncData(JNStashNet__TASK_SYNC_KEY,jnMX)
endif
endif
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STAGE,JNStashNet__TASK_DOWNLOAD_USER_INIT_WAIT)
set JNStashNet__RES_TASK=true
set user=null
endfunction
function JNStashNet__processDownloadInitWait takes integer task returns nothing
local player user=LoadPlayerHandle(JNStashNet__TASK_USER_TABLE,task,JNStashNet__TASK_USER)
local integer initResult
if HaveSavedInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_RES_INIT)then
set initResult=LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_RES_INIT)
if initResult==0 then
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,false,false,"서버 데이터를 수신했습니다.",0,0)
endif
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STAGE,JNStashNet__TASK_DOWNLOAD_USER_HEADER)
elseif initResult==-1 then
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,true,false,"인증 실패했습니다.",0,0)
endif
set user=null
return
elseif initResult==-3 then
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,true,false,"중복 로드로 인해 통신이 중단되었습니다.",0,0)
endif
set user=null
return
elseif initResult==9999 then
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,true,false,"서버에서 알 수 없는 응답을 반환했습니다. 버전이 호환되지 않을 수 있습니다.",0,0)
endif
set user=null
return
else
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,true,false,"알 수 없는 내부 오류로 서버 데이터를 수신하지 못했습니다.",0,0)
endif
set user=null
return
endif
else
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,false,false,"서버 데이터를 수신 중입니다...",0,0)
endif
endif
set JNStashNet__RES_TASK=true
set user=null
endfunction
function JNStashNet__processDownloadUserHeader takes integer task returns nothing
local player user=LoadPlayerHandle(JNStashNet__TASK_USER_TABLE,task,JNStashNet__TASK_USER)
local string userId=LoadStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_USERID)
local integer localValue=-1
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,false,false,"데이터 헤더 동기화를 시도합니다.",0,0)
endif
if GetLocalPlayer()==user then
set localValue=JNObjectUserGetInt(userId,"stash.size")
call DzSyncData(JNStashNet__TASK_SYNC_KEY,I2S(task)+"|DL_US_SIZE|"+I2S(localValue))
endif
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STAGE,JNStashNet__TASK_DOWNLOAD_USER_HEADER_WAIT)
set JNStashNet__RES_TASK=true
set user=null
endfunction
function JNStashNet__processDownloadUserHeaderWait takes integer task returns nothing
local player user=LoadPlayerHandle(JNStashNet__TASK_USER_TABLE,task,JNStashNet__TASK_USER)
local integer size
if HaveSavedInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_RES_HEADER_SIZE)then
set size=LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_RES_HEADER_SIZE)
if size<0 then
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,true,false,"데이터 헤더가 손상되었습니다.",0,0)
endif
set user=null
return
endif
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_MAX,size)
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_RES_BODY_REQUEST,0)
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STASH,CreateStash())
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,false,false,"데이터 헤더를 동기화했습니다.",LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_MAX),LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_PROGRESS))
endif
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STAGE,JNStashNet__TASK_DOWNLOAD_USER_BODY)
else
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,false,false,"데이터 헤더 동기화 중입니다...",0,0)
endif
endif
set JNStashNet__RES_TASK=true
set user=null
endfunction
function JNStashNet__processDownloadUserBody takes integer task returns nothing
local player user=LoadPlayerHandle(JNStashNet__TASK_USER_TABLE,task,JNStashNet__TASK_USER)
local string userId=LoadStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_USERID)
local integer bodyRequest=LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_RES_BODY_REQUEST)
local integer bodyRequestMax=LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_RES_HEADER_SIZE)
local string bodyRequestKey
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,false,false,"데이터 동기화 중입니다.",LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_MAX),LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_PROGRESS))
endif
if bodyRequest>=bodyRequestMax then
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STAGE,JNStashNet__TASK_DOWNLOAD_USER_BODY_WAIT)
else
set bodyRequestKey="stash."+I2S(bodyRequest)
if GetLocalPlayer()==user then
call DzSyncData(JNStashNet__TASK_SYNC_KEY,I2S(task)+"|DL_US_BODY|"+JNObjectUserGetString(userId,bodyRequestKey))
endif
set bodyRequest=bodyRequest+1
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_RES_BODY_REQUEST,bodyRequest)
endif
set JNStashNet__RES_TASK=true
set user=null
endfunction
function JNStashNet__processDownloadUserBodyWait takes integer task returns nothing
local player user=LoadPlayerHandle(JNStashNet__TASK_USER_TABLE,task,JNStashNet__TASK_USER)
local integer progress=LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_PROGRESS)
local integer max=LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_MAX)
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,false,false,"데이터 동기화 중입니다.",max,progress)
endif
if progress>=max then
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STAGE,JNStashNet__TASK_DOWNLOAD_USER_FINALIZE)
endif
set JNStashNet__RES_TASK=true
set user=null
endfunction
function JNStashNet__processDownloadUserFinalize takes integer task returns nothing
local player user=LoadPlayerHandle(JNStashNet__TASK_USER_TABLE,task,JNStashNet__TASK_USER)
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STASH),true,true,"데이터가 동기화되었습니다.",LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_MAX),LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_PROGRESS))
endif
set user=null
endfunction
function JNStashNet__processUploadUserStoreData takes integer task returns nothing
local player user=LoadPlayerHandle(JNStashNet__TASK_USER_TABLE,task,JNStashNet__TASK_USER)
local string userId=LoadStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_USERID)
local integer whichStash=LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STASH)
local integer imax=StashSize(whichStash)
local integer i=0
local string field
local string value
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,false,false,"데이터 준비 중...",0,0)
endif
loop
exitwhen i>=imax
set field="stash."+I2S(i)
set value=StashKeyAt(whichStash,i)+"/"+StashValueAt(whichStash,i,"")
if GetLocalPlayer()==user then
call JNObjectUserSetString(userId,field,value)
endif
set i=i+1
endloop
set field="stash.size"
if GetLocalPlayer()==user then
call JNObjectUserSetInt(userId,field,imax)
endif
call DestroyStash(whichStash)
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STAGE,JNStashNet__TASK_UPLOAD_USER_SAVE)
set JNStashNet__RES_TASK=true
set user=null
endfunction
function JNStashNet__processUploadUserSave takes integer task returns nothing
local player user=LoadPlayerHandle(JNStashNet__TASK_USER_TABLE,task,JNStashNet__TASK_USER)
local string mapId=LoadStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_MAPID)
local string userId=LoadStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_USERID)
local string secretKey=LoadStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_SECRETKEY)
local string charId="Default String"
local string jnNo=I2S(task)+"|UP_US_SAVE|서버와 연결하지 못했습니다."
local string localResult=""
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,false,false,"데이터 업로드를 시작합니다.",0,0)
endif
if GetLocalPlayer()==user then
if JNUse()then
set localResult=JNObjectUserSave(mapId,userId,secretKey,charId)
call DzSyncData(JNStashNet__TASK_SYNC_KEY,I2S(task)+"|UP_US_SAVE|"+localResult)
else
call DzSyncData(JNStashNet__TASK_SYNC_KEY,jnNo)
endif
endif
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STAGE,JNStashNet__TASK_UPLOAD_USER_SAVE_WAIT)
set JNStashNet__RES_TASK=true
set user=null
endfunction
function JNStashNet__processUploadUserSaveWait takes integer task returns nothing
local player user=LoadPlayerHandle(JNStashNet__TASK_USER_TABLE,task,JNStashNet__TASK_USER)
local string saveResult
if HaveSavedString(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_RES_SAVE_RESULT)then
set saveResult=LoadStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_RES_SAVE_RESULT)
if saveResult=="저장이 성공적으로 되었습니다." then
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,true,true,saveResult,0,0)
endif
else
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,true,false,saveResult,0,0)
endif
endif
set user=null
return
else
if HaveSavedHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK)then
call JNStashNet__fireTrigger(LoadTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK),user,0,false,false,"데이터 업로드 중입니다...",0,0)
endif
endif
set JNStashNet__RES_TASK=true
set user=null
endfunction
function JNStashNet__processTaskSwitch takes nothing returns nothing
local integer task=JNStashNet__ARG_TASK
local integer stage=LoadInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STAGE)
if stage==JNStashNet__TASK_DOWNLOAD_USER_JNUSE then
call JNStashNet__processDownloadJNUse(task)
elseif stage==JNStashNet__TASK_DOWNLOAD_USER_JNUSE_WAIT then
call JNStashNet__processDownloadJNUseWait(task)
elseif stage==JNStashNet__TASK_DOWNLOAD_USER_INIT then
call JNStashNet__processDownloadInit(task)
elseif stage==JNStashNet__TASK_DOWNLOAD_USER_INIT_WAIT then
call JNStashNet__processDownloadInitWait(task)
elseif stage==JNStashNet__TASK_DOWNLOAD_USER_HEADER then
call JNStashNet__processDownloadUserHeader(task)
elseif stage==JNStashNet__TASK_DOWNLOAD_USER_HEADER_WAIT then
call JNStashNet__processDownloadUserHeaderWait(task)
elseif stage==JNStashNet__TASK_DOWNLOAD_USER_BODY then
call JNStashNet__processDownloadUserBody(task)
elseif stage==JNStashNet__TASK_DOWNLOAD_USER_BODY_WAIT then
call JNStashNet__processDownloadUserBodyWait(task)
elseif stage==JNStashNet__TASK_DOWNLOAD_USER_FINALIZE then
call JNStashNet__processDownloadUserFinalize(task)
elseif stage==JNStashNet__TASK_UPLOAD_USER_STORE_DATA then
call JNStashNet__processUploadUserStoreData(task)
elseif stage==JNStashNet__TASK_UPLOAD_USER_SAVE then
call JNStashNet__processUploadUserSave(task)
elseif stage==JNStashNet__TASK_UPLOAD_USER_SAVE_WAIT then
call JNStashNet__processUploadUserSaveWait(task)
else
call JNStashNet__error("핸들링 불가능한 TASK 상태에 도달했습니다.")
endif
endfunction
function JNStashNet__processTask takes integer task returns boolean
set JNStashNet__ARG_TASK=task
set JNStashNet__RES_TASK=false
call ForForce(bj_FORCE_PLAYER[0],function JNStashNet__processTaskSwitch)
return JNStashNet__RES_TASK
endfunction
function JNStashNet__queueAction takes nothing returns nothing
local integer i
local integer task
if JNStashNet__ACTIVE_TASK_COUNT==0 then
call PauseTimer(JNStashNet__TASK_ACTIVATOR)
return
endif
set i=0
loop
exitwhen i>=JNStashNet__ACTIVE_TASK_COUNT
if JNStashNet__processTask(JNStashNet__ACTIVE_TASKS[i])then
set i=i+1
else
call JNStashNet__flushTask(JNStashNet__ACTIVE_TASKS[i])
if i<JNStashNet__ACTIVE_TASK_COUNT-1 then
set JNStashNet__ACTIVE_TASKS[i]=JNStashNet__ACTIVE_TASKS[JNStashNet__ACTIVE_TASK_COUNT-1]
endif
set JNStashNet__ACTIVE_TASK_COUNT=JNStashNet__ACTIVE_TASK_COUNT-1
endif
endloop
endfunction
function JNStashNet__onInit takes nothing returns nothing
local trigger trig
set trig=CreateTrigger()
call TriggerRegisterTimerExpireEvent(trig,JNStashNet__TASK_ACTIVATOR)
call TriggerAddAction(trig,function JNStashNet__queueAction)
set trig=CreateTrigger()
call TriggerAddAction(trig,function JNStashNet__onTaskSync)
call DzTriggerRegisterSyncData(trig,JNStashNet__TASK_SYNC_KEY,false)
set trig=null
endfunction
function JNStashNet__downloadUser takes player user,string mapId,string userId,string secretKey,trigger callback returns nothing
local integer task
if user==null then
call JNStashNet__warn("null 플레이어가 전달되었습니다.")
return
endif
if GetPlayerController(user)!=MAP_CONTROL_USER then
call JNStashNet__warn("유저가 아닌 플레이어가 전달되었습니다.")
return
endif
if mapId==null then
call JNStashNet__error("null 맵 ID 가 전달되었습니다.")
return
endif
if userId==null then
call JNStashNet__error("null 유저 ID 가 전달되었습니다.")
return
endif
if secretKey==null then
call JNStashNet__error("null 맵 API 키가 전달되었습니다.")
return
endif
set task=JNStashNet__createTask()
call SavePlayerHandle(JNStashNet__TASK_USER_TABLE,task,JNStashNet__TASK_USER,user)
call SaveStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_MAPID,mapId)
call SaveStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_USERID,userId)
call SaveStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_SECRETKEY,secretKey)
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STAGE,JNStashNet__TASK_DOWNLOAD_USER_JNUSE)
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_MAX,0)
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_PROGRESS,0)
if callback !=null then
call SaveTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK,callback)
endif
call JNStashNet__queueTask(task)
set JNStashNet__RES_FLAG=true
endfunction
function JNStashNet__uploadUser takes player user,string mapId,string userId,string secretKey,integer whichStash,trigger callback returns nothing
local integer dupeStash
local integer task
if user==null then
call JNStashNet__warn("null 플레이어가 전달되었습니다.")
return
endif
if GetPlayerController(user)!=MAP_CONTROL_USER then
call JNStashNet__warn("유저가 아닌 플레이어가 전달되었습니다.")
return
endif
if mapId==null then
call JNStashNet__error("null 맵 ID 가 전달되었습니다.")
return
endif
if userId==null then
call JNStashNet__error("null 유저 ID 가 전달되었습니다.")
return
endif
if secretKey==null then
call JNStashNet__error("null 맵 API 키가 전달되었습니다.")
return
endif
if whichStash==0 then
call JNStashNet__error("null stash 가 전달되었습니다.")
return
endif
if not StashExists(whichStash)then
call JNStashNet__error("파괴되었거나, 생성에 실패한 stash 가 전달되었습니다.")
return
endif
set dupeStash=StashCopy(whichStash)
if not StashExists(dupeStash)then
call JNStashNet__error("stash 사본 생성에 실패했습니다.")
return
endif
set task=JNStashNet__createTask()
call SavePlayerHandle(JNStashNet__TASK_USER_TABLE,task,JNStashNet__TASK_USER,user)
call SaveStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_MAPID,mapId)
call SaveStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_USERID,userId)
call SaveStr(JNStashNet__TASK_STR_TABLE,task,JNStashNet__TASK_SECRETKEY,secretKey)
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STAGE,JNStashNet__TASK_UPLOAD_USER_STORE_DATA)
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_MAX,0)
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_PROGRESS,0)
call SaveInteger(JNStashNet__TASK_INT_TABLE,task,JNStashNet__TASK_STASH,dupeStash)
if callback !=null then
call SaveTriggerHandle(JNStashNet__TASK_TRIG_TABLE,task,JNStashNet__TASK_CALLBACK,callback)
endif
call JNStashNet__queueTask(task)
set JNStashNet__RES_FLAG=true
endfunction
function JNStashNet__downloadUserProxy takes nothing returns nothing
call JNStashNet__downloadUser(JNStashNet__ARG_USER,JNStashNet__ARG_MAPID,JNStashNet__ARG_USERID,JNStashNet__ARG_SECRETKEY,JNStashNet__ARG_CALLBACK)
endfunction
function JNStashNet__uploadUserProxy takes nothing returns nothing
call JNStashNet__uploadUser(JNStashNet__ARG_USER,JNStashNet__ARG_MAPID,JNStashNet__ARG_USERID,JNStashNet__ARG_SECRETKEY,JNStashNet__ARG_STASH,JNStashNet__ARG_CALLBACK)
endfunction
function JNStashNetDownloadUser takes player user,string mapId,string userId,string secretKey,trigger callback returns boolean
set JNStashNet__ARG_USER=user
set JNStashNet__ARG_MAPID=mapId
set JNStashNet__ARG_USERID=userId
set JNStashNet__ARG_SECRETKEY=secretKey
set JNStashNet__ARG_CALLBACK=callback
set JNStashNet__RES_FLAG=false
call ForForce(bj_FORCE_PLAYER[0],function JNStashNet__downloadUserProxy)
return JNStashNet__RES_FLAG
endfunction
function JNStashNetUploadUser takes player user,string mapId,string userId,string secretKey,integer whichStash,trigger callback returns boolean
set JNStashNet__ARG_USER=user
set JNStashNet__ARG_MAPID=mapId
set JNStashNet__ARG_USERID=userId
set JNStashNet__ARG_SECRETKEY=secretKey
set JNStashNet__ARG_STASH=whichStash
set JNStashNet__ARG_CALLBACK=callback
set JNStashNet__RES_FLAG=false
call ForForce(bj_FORCE_PLAYER[0],function JNStashNet__uploadUserProxy)
return JNStashNet__RES_FLAG
endfunction
function JNStashNetGetPlayer takes nothing returns player
return JNStashNet__EV_USER
endfunction
function JNStashNetGetResult takes nothing returns boolean
return JNStashNet__EV_RESULT
endfunction
function JNStashNetGetFinished takes nothing returns boolean
return JNStashNet__EV_FINISHED
endfunction
function JNStashNetGetMessage takes nothing returns string
return JNStashNet__EV_MESSAGE
endfunction
function JNStashNetGetMaximum takes nothing returns integer
return JNStashNet__EV_MAX
endfunction
function JNStashNetGetProgress takes nothing returns integer
return JNStashNet__EV_PROGRESS
endfunction
function JNStashNetGetStash takes nothing returns integer
return JNStashNet__EV_STASH
endfunction
function MemoryLibBase___Init takes nothing returns nothing
set pGameDll=JNGetModuleHandle("Game.dll")
endfunction
function SetMaxMoveSpeedLimit takes real msLimit returns nothing
local integer l__pGameDll=JNGetModuleHandle("game.dll")
call JNMemorySetReal(l__pGameDll+0xD38804,msLimit)
call JNMemorySetReal(JNMemoryGetInteger(l__pGameDll+0xD04438)+0x80,msLimit)
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_Actions takes integer this returns nothing
set s__TrigVariables_Stage[GlobalTV]=s__TimerPutsTriggerToSleep__TrigInfo_toStage[this]
if s__TrigVariables_last[GlobalTV]==this then
set s__TrigVariables_last[GlobalTV]=s__TimerPutsTriggerToSleep__TrigInfo_prev[this]
endif
call sc__TimerPutsTriggerToSleep__TrigInfo_deallocate(this)
call PauseTimer(s__TrigVariables_t[GlobalTV])
call sc__TrigVariables_ExecuteTrigger(GlobalTV)
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_APCondition takes nothing returns boolean
local integer this=LoadInteger(s__TimerPutsTriggerToSleep__TrigInfo_HASH,0,GetHandleId(GetTriggeringTrigger()))
local integer PreTV=GlobalTV
set GlobalTV=s__TimerPutsTriggerToSleep__TrigInfo_TV[this]
set Wait=GlobalTV
if TriggerEvaluate(s__TimerPutsTriggerToSleep__TrigInfo_TrigForCond[this])then
call s__TimerPutsTriggerToSleep__TrigInfo_Actions(this)
endif
set GlobalTV=PreTV
set Wait=GlobalTV
return true
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost takes integer this,boolexpr filter returns nothing
call TriggerAddCondition(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],Condition(function s__TimerPutsTriggerToSleep__TrigInfo_APCondition))
call TriggerAddCondition(s__TimerPutsTriggerToSleep__TrigInfo_TrigForCond[this],filter)
set s__TimerPutsTriggerToSleep__TrigInfo_prev[this]=s__TimerPutsTriggerToSleep__TrigInfo_last
set s__TimerPutsTriggerToSleep__TrigInfo_post[s__TimerPutsTriggerToSleep__TrigInfo_prev[this]]=this
set s__TimerPutsTriggerToSleep__TrigInfo_last=this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterEnterRect takes rect whichRect,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
set s__TimerPutsTriggerToSleep__TrigInfo_Reg[this]=CreateRegion()
call RegionAddRect(s__TimerPutsTriggerToSleep__TrigInfo_Reg[this],whichRect)
call TriggerRegisterEnterRegion(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],s__TimerPutsTriggerToSleep__TrigInfo_Reg[this],null)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterUnitEvent takes unit whichUnit,unitevent whichEvent,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterUnitEvent(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],whichUnit,whichEvent)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterLeaveRect takes rect whichRect,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
set s__TimerPutsTriggerToSleep__TrigInfo_Reg[this]=CreateRegion()
call RegionAddRect(s__TimerPutsTriggerToSleep__TrigInfo_Reg[this],whichRect)
call TriggerRegisterLeaveRegion(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],s__TimerPutsTriggerToSleep__TrigInfo_Reg[this],null)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterPlayerStateEvent takes player whichPlayer,playerstate whichState,limitop opcode,real limitval,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterPlayerStateEvent(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],whichPlayer,whichState,opcode,limitval)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterPlayerUnitEvent takes player whichPlayer,playerunitevent whichPlayerUnitEvent,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterPlayerUnitEvent(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],whichPlayer,whichPlayerUnitEvent,null)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterAnyUnitEvent takes playerunitevent whichPlayerUnitEvent,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
local integer i=0
loop
call TriggerRegisterPlayerUnitEvent(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],Player(i),whichPlayerUnitEvent,null)
set i=i+1
exitwhen i>=16
endloop
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterTimerExpireEvent takes timer t,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterTimerExpireEvent(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],t)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterUnitInRange takes unit whichUnit,real range,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterUnitInRange(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],whichUnit,range,null)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterUnitStateEvent takes unit whichUnit,unitstate whichState,limitop opcode,real limitval,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterUnitStateEvent(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],whichUnit,whichState,opcode,limitval)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterDialogEvent takes dialog whichDialog,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterDialogEvent(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],whichDialog)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterTrackableHitEvent takes trackable t,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterTrackableHitEvent(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],t)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterTrackableTrackEvent takes trackable t,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterTrackableTrackEvent(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],t)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterPlayerEvent takes player whichPlayer,playerevent whichPlayerEvent,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterPlayerEvent(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],whichPlayer,whichPlayerEvent)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterPlayerAllianceChange takes player whichPlayer,alliancetype whichAlliance,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterPlayerAllianceChange(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],whichPlayer,whichAlliance)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterPlayerChatEvent takes player whichPlayer,string chatMessageToDetect,boolean exactMatchOnly,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterPlayerChatEvent(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],whichPlayer,chatMessageToDetect,exactMatchOnly)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterEnterRegion takes region whichRegion,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterEnterRegion(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],whichRegion,null)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterLeaveRegion takes region whichRegion,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterLeaveRegion(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],whichRegion,null)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterPlayerSelectionEvent takes player whichPlayer,boolean selected,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterPlayerSelectionEventBJ(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],whichPlayer,selected)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterDeathEvent takes widget whichWidget,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterDeathEvent(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],whichWidget)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_RegisterGameStateEventTimeOfDay takes limitop opcode,real limitval,boolexpr filter returns integer
local integer this=sc__TimerPutsTriggerToSleep__TrigInfo_create()
call TriggerRegisterGameStateEventTimeOfDay(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],opcode,limitval)
call s__TimerPutsTriggerToSleep__TrigInfo_RegisterPost(this,filter)
return this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_SetInfo takes integer tv,integer tostage returns nothing
local integer this=s__TimerPutsTriggerToSleep__TrigInfo_last
set s__TimerPutsTriggerToSleep__TrigInfo_toStage[this]=tostage
set s__TimerPutsTriggerToSleep__TrigInfo_TV[this]=tv
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_DeleteAll takes integer fromWhat returns nothing
local integer this=fromWhat
local integer temp
loop
exitwhen this==0
set temp=s__TimerPutsTriggerToSleep__TrigInfo_prev[this]
call sc__TimerPutsTriggerToSleep__TrigInfo_deallocate(this)
set this=temp
endloop
set this=0
set s__TimerPutsTriggerToSleep__TrigInfo_prev[this]=0
set s__TimerPutsTriggerToSleep__TrigInfo_post[this]=0
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_onDestroy takes integer this returns nothing
call TriggerRemoveAction(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],s__TimerPutsTriggerToSleep__TrigInfo_Action[this])
if s__TimerPutsTriggerToSleep__TrigInfo_Reg[this]!=null then
call RemoveRegion(s__TimerPutsTriggerToSleep__TrigInfo_Reg[this])
endif
call RemoveSavedInteger(s__TimerPutsTriggerToSleep__TrigInfo_HASH,0,GetHandleId(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this]))
call DestroyTrigger(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this])
call DestroyTrigger(s__TimerPutsTriggerToSleep__TrigInfo_TrigForCond[this])
set s__TimerPutsTriggerToSleep__TrigInfo_post[s__TimerPutsTriggerToSleep__TrigInfo_prev[this]]=s__TimerPutsTriggerToSleep__TrigInfo_post[this]
set s__TimerPutsTriggerToSleep__TrigInfo_prev[s__TimerPutsTriggerToSleep__TrigInfo_post[this]]=s__TimerPutsTriggerToSleep__TrigInfo_prev[this]
set s__TimerPutsTriggerToSleep__TrigInfo_prev[this]=0
set s__TimerPutsTriggerToSleep__TrigInfo_post[this]=0
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TimerPutsTriggerToSleep__TrigInfo_V[this]!=-1)then
return
endif
call s__TimerPutsTriggerToSleep__TrigInfo_onDestroy(this)
set si__TimerPutsTriggerToSleep__TrigInfo_V[this]=si__TimerPutsTriggerToSleep__TrigInfo_F
set si__TimerPutsTriggerToSleep__TrigInfo_F=this
endfunction
function s__TimerPutsTriggerToSleep__TrigInfo_create takes nothing returns integer
local integer this=s__TimerPutsTriggerToSleep__TrigInfo__allocate()
call SaveInteger(s__TimerPutsTriggerToSleep__TrigInfo_HASH,0,GetHandleId(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this]),this)
return this
endfunction
function s__TrigVariables_OrderPointLoc takes integer this returns location
return Location(s__TrigVariables_OrderPointX[this],s__TrigVariables_OrderPointY[this])
endfunction
function s__TrigVariables_SpellTargetLoc takes integer this returns location
return Location(s__TrigVariables_SpellTargetX[this],s__TrigVariables_SpellTargetY[this])
endfunction
function s__TrigVariables_SetUserData takes integer this,integer i returns nothing
set s__TrigVariables_UserData[this]=i
endfunction
function s__TrigVariables_GetUserData takes integer this returns integer
return s__TrigVariables_UserData[this]
endfunction
function s__TrigVariables_Flush takes integer this returns nothing
if s__TrigVariables_t[this]==null then
return
endif
set s__TrigVariables_HiEveryone=this
call TriggerEvaluate(s__s__TrigVariables_tEmptyTrigVars[GetHandleId(s__TrigVariables_EventId[this])])
call sc__TrigVariables_FlushAvars(this)
call ReleaseTimer(s__TrigVariables_t[this])
set s__TrigVariables_t[this]=null
call sc__TrigVariables_DeleteAllTriggers(this)
call sc__TrigVariables_deallocate(this)
endfunction
function s__TrigVariables_TimerAutoFlush takes nothing returns nothing
local integer this=(LoadInteger(TimerUtils__ht,0,GetHandleId((GetExpiredTimer()))))
call s__TrigVariables_Flush(this)
endfunction
function s__TrigVariables_ExecuteTriggerResetGlobalTV takes nothing returns nothing
set GlobalTV=0
set Wait=GlobalTV
endfunction
function s__TrigVariables_ExecuteTrigger takes integer this returns nothing
local integer PreGlobalTV=GlobalTV
set s__TrigVariables_ThroughTimer=true
set GlobalTV=this
set Wait=GlobalTV
set s__TrigVariables_Destructable[this]=true
call TriggerExecute(s__TrigVariables_CurrentTrigger[this])
set s__TrigVariables_ThroughTimer=false
if s__TrigVariables_Destructable[this]then
call s__TrigVariables_Flush(this)
endif
set GlobalTV=PreGlobalTV
set Wait=GlobalTV
call TimerStart(s__TrigVariables_TimerForExecuteTrigger,0,false,function s__TrigVariables_ExecuteTriggerResetGlobalTV)
endfunction
function s__TrigVariables_TimerExecuteTrigger takes nothing returns nothing
local integer this=(LoadInteger(TimerUtils__ht,0,GetHandleId((GetExpiredTimer()))))
set s__TrigVariables_Stage[this]=s__TrigVariables_NextStage[this]
call s__TrigVariables_ExecuteTrigger(this)
endfunction
function s__TrigVariables_SleepForStage takes integer this,real dur,integer stage returns nothing
if s__TrigVariables_t[this]==null then
return
endif
set s__TrigVariables_NextStage[this]=stage
set s__TrigVariables_Destructable[this]=false
call TimerStart(s__TrigVariables_t[this],dur,false,function s__TrigVariables_TimerExecuteTrigger)
endfunction
function s__TrigVariables_SleepForStageNext takes integer this,real dur returns nothing
call s__TrigVariables_SleepForStage(this,dur,s__TrigVariables_Stage[this]+1)
endfunction
function s__TrigVariables_SleepForStagePrev takes integer this,real dur returns nothing
call s__TrigVariables_SleepForStage(this,dur,s__TrigVariables_Stage[this]-1)
endfunction
function s__TrigVariables_SleepForStageAdd takes integer this,real dur,integer add returns nothing
call s__TrigVariables_SleepForStage(this,dur,s__TrigVariables_Stage[this]+add)
endfunction
function s__TrigVariables_SettingVariables takes nothing returns integer
local integer this
local eventid EVENT
set s__TrigVariables_ThroughTimer=true
set this=s__TrigVariables__allocate()
set GlobalTV=this
set Wait=GlobalTV
set s__TrigVariables_EventId[this]=GetTriggerEventId()
set s__TrigVariables_t[this]=NewTimerEx(this)
set s__TrigVariables_CurrentTrigger[this]=GetTriggeringTrigger()
call TimerStart(s__TrigVariables_t[this],0,false,function s__TrigVariables_TimerAutoFlush)
set s__TrigVariables_HiEveryone=this
call TriggerEvaluate(s__s__TrigVariables_tEventId[GetHandleId(s__TrigVariables_EventId[this])])
call sc__TrigVariables_LVforCreate(this)
return this
endfunction
function s__TrigVariables_SettingEx takes integer stage returns nothing
local integer this
local eventid EVENT
if GlobalTV !=0 and s__TrigVariables_Stage[GlobalTV]==s__TrigVariables_HELD then
set s__TrigVariables_Stage[GlobalTV]=stage
return
elseif s__TrigVariables_ThroughTimer then
return
endif
set this=s__TrigVariables_SettingVariables()
set s__TrigVariables_Stage[this]=stage
endfunction
function s__TrigVariables_Setting takes nothing returns nothing
call s__TrigVariables_SettingEx(1)
endfunction
function s__TrigVariables_SettingIn takes nothing returns nothing
local integer TempGlobalTV
if GlobalTV==0 then
set TempGlobalTV=GlobalTV
call s__TrigVariables_SettingVariables()
set s__TrigVariables_NextGlobalTV[GlobalTV]=TempGlobalTV
elseif s__TrigVariables_CurrentTrigger[GlobalTV]!=GetTriggeringTrigger()then
set TempGlobalTV=GlobalTV
call s__TrigVariables_SettingVariables()
set s__TrigVariables_NextGlobalTV[GlobalTV]=TempGlobalTV
endif
endfunction
function s__TrigVariables_SettingOut takes nothing returns nothing
local integer temp
if s__TrigVariables_NextGlobalTV[GlobalTV]!=s__TrigVariables_HELD then
set temp=s__TrigVariables_NextGlobalTV[GlobalTV]
set s__TrigVariables_NextGlobalTV[GlobalTV]=s__TrigVariables_HELD
set GlobalTV=temp
set Wait=GlobalTV
else
set s__TrigVariables_ThroughTimer=false
endif
endfunction
function s__TrigVariables_RegisterSettingOutCallback takes nothing returns nothing
local timer tm=GetExpiredTimer()
local trigger trig=LoadTriggerHandle(s__TrigVariables_RgstHASH,0,GetHandleId(tm))
call TriggerAddAction(trig,function s__TrigVariables_SettingOut)
set trig=null
call RemoveSavedHandle(s__TrigVariables_RgstHASH,0,GetHandleId(tm))
call DestroyTimer(tm)
set tm=null
endfunction
function s__TrigVariables_RegisterTimerPutsTriggerToSleep takes trigger t returns nothing
local timer tm
if s__TrigVariables_LastRgstTrig==t then
return
endif
set s__TrigVariables_LastRgstTrig=t
call TriggerAddAction(t,function s__TrigVariables_SettingIn)
if s__TrigVariables_RgstSeparately then
set tm=CreateTimer()
call SaveTriggerHandle(s__TrigVariables_RgstHASH,0,GetHandleId(tm),t)
call TimerStart(tm,0,false,function s__TrigVariables_RegisterSettingOutCallback)
set tm=null
else
set s__TrigVariables_RegisteredTrigger[s__TrigVariables_RegisteredCnt]=t
set s__TrigVariables_RegisteredCnt=s__TrigVariables_RegisteredCnt+1
endif
endfunction
function s__TrigVariables_RegisterInitTimer takes nothing returns nothing
local integer i=0
loop
exitwhen i>=s__TrigVariables_RegisteredCnt
call TriggerAddAction(s__TrigVariables_RegisteredTrigger[i],function s__TrigVariables_SettingOut)
set s__TrigVariables_RegisteredTrigger[i]=null
set i=i+1
endloop
set s__TrigVariables_RegisteredCnt=0
set s__TrigVariables_LastRgstTrig=null
set s__TrigVariables_RgstSeparately=true
endfunction
function s__TrigVariables_InitTimer takes nothing returns nothing
call DestroyTimer(GetExpiredTimer())
call s__TrigVariables_RegisterInitTimer()
endfunction
function s__TrigVariables_onInit takes nothing returns nothing
call TimerStart(CreateTimer(),0,false,function s__TrigVariables_InitTimer)
endfunction
function s__TrigVariables_onDestroy takes integer this returns nothing
set s__TrigVariables_CurrentTrigger[this]=null
set s__TrigVariables_EventId[this]=null
set s__TrigVariables_UserData[this]=0
set s__TrigVariables_Destructable[this]=false
call sc__TrigVariables_setVoid(this)
endfunction
function s__TrigVariables_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TrigVariables_V[this]!=-1)then
return
endif
call s__TrigVariables_onDestroy(this)
set si__TrigVariables_V[this]=si__TrigVariables_F
set si__TrigVariables_F=this
endfunction
function s__TrigVariables_SleepTVForStage takes integer tv,real timeout,integer stage returns nothing
call s__TrigVariables_SleepForStage((tv),timeout,stage)
endfunction
function s__TrigVariables_RegisterEnterRect takes integer this,rect whichRect,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterEnterRect(whichRect,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterUnitEvent takes integer this,unit whichUnit,unitevent whichEvent,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterUnitEvent(whichUnit,whichEvent,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterLeaveRect takes integer this,rect whichRect,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterLeaveRect(whichRect,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterPlayerStateEvent takes integer this,player whichPlayer,playerstate whichState,limitop opcode,real limitval,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterPlayerStateEvent(whichPlayer,whichState,opcode,limitval,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterPlayerUnitEvent takes integer this,player whichPlayer,playerunitevent whichPlayerUnitEvent,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterPlayerUnitEvent(whichPlayer,whichPlayerUnitEvent,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterAnyUnitEvent takes integer this,playerunitevent whichPlayerUnitEvent,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterAnyUnitEvent(whichPlayerUnitEvent,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterTimerExpireEvent takes integer this,timer t,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterTimerExpireEvent(t,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterUnitInRange takes integer this,unit whichUnit,real range,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterUnitInRange(whichUnit,range,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterUnitStateEvent takes integer this,unit whichUnit,unitstate whichState,limitop opcode,real limitval,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterUnitStateEvent(whichUnit,whichState,opcode,limitval,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterDialogEvent takes integer this,dialog whichDialog,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterDialogEvent(whichDialog,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterTrackableHitEvent takes integer this,trackable t,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterTrackableHitEvent(t,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterTrackableTrackEvent takes integer this,trackable t,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterTrackableTrackEvent(t,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterPlayerEvent takes integer this,player whichPlayer,playerevent whichPlayerEvent,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterPlayerEvent(whichPlayer,whichPlayerEvent,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterPlayerAllianceChange takes integer this,player whichPlayer,alliancetype whichAlliance,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterPlayerAllianceChange(whichPlayer,whichAlliance,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterPlayerChatEvent takes integer this,player whichPlayer,string chatMessageToDetect,boolean exactMatchOnly,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterPlayerChatEvent(whichPlayer,chatMessageToDetect,exactMatchOnly,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterEnterRegion takes integer this,region whichRegion,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterEnterRegion(whichRegion,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterLeaveRegion takes integer this,region whichRegion,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterLeaveRegion(whichRegion,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterPlayerSelectionEvent takes integer this,player whichPlayer,boolean selected,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterPlayerSelectionEvent(whichPlayer,selected,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterDeathEvent takes integer this,widget whichWidget,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterDeathEvent(whichWidget,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_RegisterGameStateEventTimeOfDay takes integer this,limitop opcode,real limitval,boolexpr filter,integer tostage returns nothing
set s__TimerPutsTriggerToSleep__TrigInfo_last=s__TrigVariables_last[this]
set s__TrigVariables_last[this]=s__TimerPutsTriggerToSleep__TrigInfo_RegisterGameStateEventTimeOfDay(opcode,limitval,filter)
call s__TimerPutsTriggerToSleep__TrigInfo_SetInfo(this,tostage)
endfunction
function s__TrigVariables_DeleteAllTriggers takes integer this returns nothing
call s__TimerPutsTriggerToSleep__TrigInfo_DeleteAll(s__TrigVariables_last[this])
set s__TrigVariables_last[this]=0
endfunction
function s__TrigVariables_WhenEventId_0 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_WinningPlayer[this]=GetTriggerPlayer()
return false
endfunction
function s__TrigVariables_WhenEventId_4 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_ExpiredTimer[this]=GetExpiredTimer()
return false
endfunction
function s__TrigVariables_WhenEventId_5 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_TriggeringRegion[this]=GetTriggeringRegion()
set s__TrigVariables_EnteringUnit[this]=GetEnteringUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_6 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_TriggeringRegion[this]=GetTriggeringRegion()
set s__TrigVariables_LeavingUnit[this]=GetLeavingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_3 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_EventPlayerState[this]=GetEventPlayerState()
return false
endfunction
function s__TrigVariables_WhenEventId_G2 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
return false
endfunction
function s__TrigVariables_WhenEventId_16 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_EventPlayerChatString[this]=GetEventPlayerChatString()
set s__TrigVariables_EventPlayerChatStringMatched[this]=GetEventPlayerChatStringMatched()
return false
endfunction
function s__TrigVariables_WhenEventId_G1 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_18 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_Attacker[this]=GetAttacker()
set s__TrigVariables_AttackedUnit[this]=GetTriggerUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_19 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_Rescuer[this]=GetRescuer()
return false
endfunction
function s__TrigVariables_WhenEventId_20 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_KillingUnit[this]=GetKillingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_21 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_DecayingUnit[this]=GetDecayingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_22 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_DetectedUnit[this]=GetDetectedUnit()
set s__TrigVariables_EventDetectingPlayer[this]=GetEventDetectingPlayer()
return false
endfunction
function s__TrigVariables_WhenEventId_26 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_ConstructingStructure[this]=GetConstructingStructure()
return false
endfunction
function s__TrigVariables_WhenEventId_27 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_CancelledStructure[this]=GetCancelledStructure()
return false
endfunction
function s__TrigVariables_WhenEventId_28 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_ConstructedStructure[this]=GetConstructedStructure()
return false
endfunction
function s__TrigVariables_WhenEventId_32 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_TrainedUnitType[this]=GetTrainedUnitType()
return false
endfunction
function s__TrigVariables_WhenEventId_33 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_TrainedUnitType[this]=GetTrainedUnitType()
return false
endfunction
function s__TrigVariables_WhenEventId_34 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_TrainedUnit[this]=GetTrainedUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_35 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_Researched[this]=GetResearched()
set s__TrigVariables_ResearchingUnit[this]=GetResearchingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_36 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_Researched[this]=GetResearched()
set s__TrigVariables_ResearchingUnit[this]=GetResearchingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_37 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_Researched[this]=GetResearched()
set s__TrigVariables_ResearchingUnit[this]=GetResearchingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_38 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_IssuedOrderId[this]=GetIssuedOrderId()
set s__TrigVariables_OrderedUnit[this]=GetOrderedUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_39 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_IssuedOrderId[this]=GetIssuedOrderId()
set s__TrigVariables_OrderPointX[this]=GetOrderPointX()
set s__TrigVariables_OrderPointY[this]=GetOrderPointY()
set s__TrigVariables_OrderedUnit[this]=GetOrderedUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_40 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_IssuedOrderId[this]=GetIssuedOrderId()
set s__TrigVariables_OrderedUnit[this]=GetOrderedUnit()
set s__TrigVariables_OrderTargetUnit[this]=GetOrderTargetUnit()
set s__TrigVariables_OrderTargetDestructable[this]=GetOrderTargetDestructable()
set s__TrigVariables_OrderTargetItem[this]=GetOrderTargetItem()
return false
endfunction
function s__TrigVariables_WhenEventId_47 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_SummonedUnit[this]=GetSummonedUnit()
set s__TrigVariables_SummoningUnit[this]=GetSummoningUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_48 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_ManipulatedItem[this]=GetManipulatedItem()
set s__TrigVariables_ManipulatingUnit[this]=GetManipulatingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_49 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_ManipulatedItem[this]=GetManipulatedItem()
set s__TrigVariables_ManipulatingUnit[this]=GetManipulatingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_50 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_ManipulatedItem[this]=GetManipulatedItem()
set s__TrigVariables_ManipulatingUnit[this]=GetManipulatingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_277 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_ManipulatedItem[this]=GetManipulatedItem()
set s__TrigVariables_ManipulatingUnit[this]=GetManipulatingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_51 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_LoadedUnit[this]=GetLoadedUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_41 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_LevelingUnit[this]=GetLevelingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_42 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_LearnedSkill[this]=GetLearnedSkill()
set s__TrigVariables_LearnedSkillLevel[this]=GetLearnedSkillLevel()
set s__TrigVariables_LearningUnit[this]=GetLearningUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_43 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_RevivableUnit[this]=GetRevivableUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_44 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_RevivingUnit[this]=GetRevivingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_45 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_RevivingUnit[this]=GetRevivingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_46 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_RevivingUnit[this]=GetRevivingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_52 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_EventDamage[this]=GetEventDamage()
set s__TrigVariables_EventDamageSource[this]=GetEventDamageSource()
return false
endfunction
function s__TrigVariables_WhenEventId_60 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_EventTargetUnit[this]=GetEventTargetUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_61 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_92 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_ClickedButton[this]=GetClickedButton()
set s__TrigVariables_ClickedDialog[this]=GetClickedDialog()
return false
endfunction
function s__TrigVariables_WhenEventId_G3 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_SpellAbilityUnit[this]=GetSpellAbilityUnit()
set s__TrigVariables_SpellAbilityId[this]=GetSpellAbilityId()
set s__TrigVariables_SpellTargetX[this]=GetSpellTargetX()
set s__TrigVariables_SpellTargetY[this]=GetSpellTargetY()
set s__TrigVariables_SpellTargetDestructable[this]=GetSpellTargetDestructable()
set s__TrigVariables_SpellTargetItem[this]=GetSpellTargetItem()
set s__TrigVariables_SpellTargetUnit[this]=GetSpellTargetUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_G4 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
return false
endfunction
function s__TrigVariables_WhenEventId_270 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_ChangingUnitPrevOwner[this]=GetChangingUnitPrevOwner()
set s__TrigVariables_ChangingUnit[this]=GetChangingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_269 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_SellingUnit[this]=GetSellingUnit()
set s__TrigVariables_SoldUnit[this]=GetSoldUnit()
set s__TrigVariables_BuyingUnit[this]=GetBuyingUnit()
return false
endfunction
function s__TrigVariables_WhenEventId_271 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=GetTriggerPlayer()
set s__TrigVariables_TriggerUnit[this]=GetTriggerUnit()
set s__TrigVariables_SoldItem[this]=GetSoldItem()
return false
endfunction
function s__TrigVariables_InitWhenEventId takes nothing returns nothing
local trigger LastTrigger=null
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_0))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_GAME_VICTORY)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_4))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_GAME_TIMER_EXPIRED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_5))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_GAME_ENTER_REGION)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_6))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_GAME_LEAVE_REGION)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_3))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_STATE_LIMIT)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_16))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_CHAT)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_52))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_DAMAGED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_60))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_ACQUIRED_TARGET)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_61))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_TARGET_IN_RANGE)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_92))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_DIALOG_BUTTON_CLICK)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_26))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_START)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_270))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_CHANGE_OWNER)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_269))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_SELL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_271))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_SELL_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_18))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_ATTACKED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_19))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_RESCUED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_20))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_DEATH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_21))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_DECAY)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_22))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_DETECTED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_27))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_CANCEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_28))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_FINISH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_32))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_START)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_33))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_CANCEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_34))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_FINISH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_35))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_START)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_36))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_CANCEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_37))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_FINISH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_38))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_ORDER)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_39))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_40))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_47))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_SUMMON)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_48))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_DROP_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_49))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_PICKUP_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_50))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_USE_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_277))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_USE_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_51))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_LOADED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_41))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_HERO_LEVEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_42))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_HERO_SKILL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_43))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVABLE)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_44))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVE_START)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_45))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVE_CANCEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_46))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVE_FINISH)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_CHANGE_OWNER)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_CHANGE_OWNER)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_SELL)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_SELL)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_SELL_ITEM)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_SELL_ITEM)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_ATTACKED)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_ATTACKED)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_RESCUED)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_RESCUED)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_DEATH)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_DEATH)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_DECAY)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_DECAY)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_DETECTED)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_DETECTED)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_CONSTRUCT_CANCEL)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_CANCEL)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_CONSTRUCT_FINISH)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_FINISH)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_TRAIN_START)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_START)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_TRAIN_CANCEL)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_CANCEL)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_TRAIN_FINISH)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_FINISH)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_RESEARCH_START)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_START)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_RESEARCH_CANCEL)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_CANCEL)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_RESEARCH_FINISH)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_FINISH)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_ISSUED_ORDER)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_ORDER)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_ISSUED_POINT_ORDER)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_ISSUED_TARGET_ORDER)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_SUMMON)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_SUMMON)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_DROP_ITEM)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_DROP_ITEM)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_PICKUP_ITEM)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_PICKUP_ITEM)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_USE_ITEM)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_USE_ITEM)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_USE_ITEM)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_USE_ITEM)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_LOADED)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_LOADED)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_HERO_LEVEL)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_HERO_LEVEL)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_HERO_SKILL)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_HERO_SKILL)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_HERO_REVIVABLE)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVABLE)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_HERO_REVIVE_START)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVE_START)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_HERO_REVIVE_CANCEL)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVE_CANCEL)]
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_HERO_REVIVE_FINISH)]=s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVE_FINISH)]
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_G1))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_HIDDEN)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_SELECTED)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_DESELECTED)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_UPGRADE_START)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_UPGRADE_CANCEL)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_UPGRADE_FINISH)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_HIDDEN)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_SELECTED)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_DESELECTED)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_UPGRADE_START)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_UPGRADE_CANCEL)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_UPGRADE_FINISH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_G2))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_ALLIANCE_CHANGED)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_DEFEAT)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_VICTORY)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_LEAVE)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_END_CINEMATIC)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_G3))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_SPELL_CHANNEL)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_SPELL_CAST)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_SPELL_EFFECT)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_SPELL_FINISH)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_UNIT_SPELL_ENDCAST)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_SPELL_CHANNEL)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_SPELL_CAST)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_SPELL_EFFECT)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_SPELL_FINISH)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_UNIT_SPELL_ENDCAST)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_WhenEventId_G4))
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_ARROW_LEFT_DOWN)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_ARROW_LEFT_UP)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_ARROW_RIGHT_DOWN)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_ARROW_RIGHT_UP)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_ARROW_DOWN_DOWN)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_ARROW_DOWN_UP)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_ARROW_UP_DOWN)]=LastTrigger
set s__s__TrigVariables_tEventId[GetHandleId(EVENT_PLAYER_ARROW_UP_UP)]=LastTrigger
endfunction
function s__TrigVariables_TPTTS_WhenEventId__onInit takes nothing returns nothing
call s__TrigVariables_InitWhenEventId()
endfunction
function s__TrigVariables_addFuncForVoid takes code func returns nothing
local code dddd=func
call TriggerAddCondition(s__TrigVariables_trigForVoid,Condition(dddd))
endfunction
function s__TrigVariables_setVoid takes integer this returns nothing
set s__TrigVariables_thisForVoid=this
call TriggerEvaluate(s__TrigVariables_trigForVoid)
endfunction
function s__TrigVariables_LVforCreate takes integer this returns nothing
set s__TrigVariables_player[this]=this
set s__TrigVariables_force[this]=this
set s__TrigVariables_group[this]=this
set s__TrigVariables_item[this]=this
set s__TrigVariables_effect[this]=this
set s__TrigVariables_timer[this]=this
set s__TrigVariables_unit[this]=this
set s__TrigVariables_location[this]=this
set s__TrigVariables_lightning[this]=this
set s__TrigVariables_integer[this]=this
set s__TrigVariables_real[this]=this
set s__TrigVariables_boolean[this]=this
endfunction
constant function s__TrigVariables_I2I takes integer i returns integer
return i
endfunction
function s__TrigVariables_locationDelete takes location x returns nothing
call RemoveLocation(x)
endfunction
function s__TrigVariables_effectDelete takes effect x returns nothing
call DestroyEffect(x)
endfunction
function s__TrigVariables_lightningDelete takes lightning x returns nothing
if x !=null then
call DestroyLightning(x)
endif
endfunction
function s__TrigVariables_groupDelete takes group x returns nothing
call DestroyGroup(x)
endfunction
function s__TrigVariables_forceDelete takes force x returns nothing
call DestroyForce(x)
endfunction
function s__TrigVariables__get_playerA takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_playerB takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_playerC takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_playerD takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_playerE takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_playerF takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_playerG takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_playerH takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_playerI takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_playerJ takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_playerK takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_playerL takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_playerM takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_playerN takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_playerO takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_playerP takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__get_player0 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_player1 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_player2 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_player3 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_player4 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_player5 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_player6 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_player7 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_player8 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_player9 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_player10 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_player11 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_player12 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_player13 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_player14 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_player15 takes integer this returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__set_playerA takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,0,which)
endfunction
function s__TrigVariables__set_playerB takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,1,which)
endfunction
function s__TrigVariables__set_playerC takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,2,which)
endfunction
function s__TrigVariables__set_playerD takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,3,which)
endfunction
function s__TrigVariables__set_playerE takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,4,which)
endfunction
function s__TrigVariables__set_playerF takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,5,which)
endfunction
function s__TrigVariables__set_playerG takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,6,which)
endfunction
function s__TrigVariables__set_playerH takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,7,which)
endfunction
function s__TrigVariables__set_playerI takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,8,which)
endfunction
function s__TrigVariables__set_playerJ takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,9,which)
endfunction
function s__TrigVariables__set_playerK takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,10,which)
endfunction
function s__TrigVariables__set_playerL takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,11,which)
endfunction
function s__TrigVariables__set_playerM takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,12,which)
endfunction
function s__TrigVariables__set_playerN takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,13,which)
endfunction
function s__TrigVariables__set_playerO takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,14,which)
endfunction
function s__TrigVariables__set_playerP takes integer this,player which returns nothing
call sc__TrigVariables_Setplayer(this,15,which)
endfunction
function s__TrigVariables_getIndicatorplayer takes integer this,integer id returns integer
return LoadInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetplayer+id+2)-2
endfunction
function s__TrigVariables_setIndicatorplayer takes integer this,integer id,integer value returns nothing
call SaveInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetplayer+id+2,value+2)
endfunction
function s__TrigVariables_remIndicatorplayer takes integer this,integer id returns nothing
call RemoveSavedInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetplayer+id+2)
endfunction
function s__TrigVariables_LinkedVariables_player__StateSetUsedplayer takes integer this,integer id returns nothing
if(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetplayer+(id)+2)-2)==-2 then
call SaveInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetplayer+(id)+2,(s__TrigVariables_lastSetplayer[this])+2)
set s__TrigVariables_lastSetplayer[this]=id
endif
endfunction
function s__TrigVariables_SetplayerNaive takes integer this,integer i,player x returns nothing
call SavePlayerHandle(s__TrigVariables_Hashplayer,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Setplayer takes integer this,integer i,player x returns nothing
call s__TrigVariables_LinkedVariables_player__StateSetUsedplayer(this,i)
call RemoveSavedHandle(s__TrigVariables_Hashplayer,0,this*s__TrigVariables_arraySize+i)
call SavePlayerHandle(s__TrigVariables_Hashplayer,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Getplayer takes integer this,integer i returns player
return LoadPlayerHandle(s__TrigVariables_Hashplayer,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_Remplayer takes integer this,integer i returns nothing
call RemoveSavedHandle(s__TrigVariables_Hashplayer,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_SetplayerBy takes integer this,integer i,player x returns nothing
call s__TrigVariables_Setplayer(this,i,x)
endfunction
function s__TrigVariables_GetplayerBy takes integer this,integer i returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(i)))
endfunction
function s__TrigVariables_setVoidplayer takes nothing returns nothing
local integer this=s__TrigVariables_thisForVoid
local integer i
local integer k
if s__TrigVariables_lastSetplayer[this]==-1 then
return
endif
set i=s__TrigVariables_lastSetplayer[this]
loop
exitwhen i==-1
call RemoveSavedHandle(s__TrigVariables_Hashplayer,0,(this)*s__TrigVariables_arraySize+(i))
set k=(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetplayer+(i)+2)-2)
call RemoveSavedInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetplayer+(i)+2)
set i=k
endloop
endfunction
function s__TrigVariables_LinkedVariables_player__onInit takes nothing returns nothing
call s__TrigVariables_addFuncForVoid(function s__TrigVariables_setVoidplayer)
endfunction
function s__TrigVariables__get_forceA takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_forceB takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_forceC takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_forceD takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_forceE takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_forceF takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_forceG takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_forceH takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_forceI takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_forceJ takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_forceK takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_forceL takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_forceM takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_forceN takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_forceO takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_forceP takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__get_force0 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_force1 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_force2 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_force3 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_force4 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_force5 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_force6 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_force7 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_force8 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_force9 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_force10 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_force11 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_force12 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_force13 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_force14 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_force15 takes integer this returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__set_forceA takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,0,which)
endfunction
function s__TrigVariables__set_forceB takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,1,which)
endfunction
function s__TrigVariables__set_forceC takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,2,which)
endfunction
function s__TrigVariables__set_forceD takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,3,which)
endfunction
function s__TrigVariables__set_forceE takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,4,which)
endfunction
function s__TrigVariables__set_forceF takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,5,which)
endfunction
function s__TrigVariables__set_forceG takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,6,which)
endfunction
function s__TrigVariables__set_forceH takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,7,which)
endfunction
function s__TrigVariables__set_forceI takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,8,which)
endfunction
function s__TrigVariables__set_forceJ takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,9,which)
endfunction
function s__TrigVariables__set_forceK takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,10,which)
endfunction
function s__TrigVariables__set_forceL takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,11,which)
endfunction
function s__TrigVariables__set_forceM takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,12,which)
endfunction
function s__TrigVariables__set_forceN takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,13,which)
endfunction
function s__TrigVariables__set_forceO takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,14,which)
endfunction
function s__TrigVariables__set_forceP takes integer this,force which returns nothing
call sc__TrigVariables_Setforce(this,15,which)
endfunction
function s__TrigVariables_getIndicatorforce takes integer this,integer id returns integer
return LoadInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetforce+id+2)-2
endfunction
function s__TrigVariables_setIndicatorforce takes integer this,integer id,integer value returns nothing
call SaveInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetforce+id+2,value+2)
endfunction
function s__TrigVariables_remIndicatorforce takes integer this,integer id returns nothing
call RemoveSavedInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetforce+id+2)
endfunction
function s__TrigVariables_LinkedVariables_force__StateSetUsedforce takes integer this,integer id returns nothing
if(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetforce+(id)+2)-2)==-2 then
call SaveInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetforce+(id)+2,(s__TrigVariables_lastSetforce[this])+2)
set s__TrigVariables_lastSetforce[this]=id
endif
endfunction
function s__TrigVariables_SetforceNaive takes integer this,integer i,force x returns nothing
call SaveForceHandle(s__TrigVariables_Hashforce,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Setforce takes integer this,integer i,force x returns nothing
call s__TrigVariables_LinkedVariables_force__StateSetUsedforce(this,i)
call RemoveSavedHandle(s__TrigVariables_Hashforce,0,this*s__TrigVariables_arraySize+i)
call SaveForceHandle(s__TrigVariables_Hashforce,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Getforce takes integer this,integer i returns force
return LoadForceHandle(s__TrigVariables_Hashforce,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_Remforce takes integer this,integer i returns nothing
call RemoveSavedHandle(s__TrigVariables_Hashforce,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_SetforceAutoRemove takes integer this,integer i,force x returns nothing
call DestroyForce(((LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(i)))))
call s__TrigVariables_Setforce(this,i,x)
endfunction
function s__TrigVariables_SetforceBy takes integer this,integer i,force x returns nothing
call s__TrigVariables_SetforceAutoRemove(this,i,x)
endfunction
function s__TrigVariables_SetLLV2forceAutoRemove takes integer this,integer i,force x returns nothing
call s__TrigVariables_SetforceAutoRemove(this,i,x)
endfunction
function s__TrigVariables_GetforceBy takes integer this,integer i returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(i)))
endfunction
function s__TrigVariables_setVoidforce takes nothing returns nothing
local integer this=s__TrigVariables_thisForVoid
local integer i
local integer k
if s__TrigVariables_lastSetforce[this]==-1 then
return
endif
set i=s__TrigVariables_lastSetforce[this]
loop
exitwhen i==-1
call DestroyForce(((LoadForceHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(i)))))
call RemoveSavedHandle(s__TrigVariables_Hashforce,0,(this)*s__TrigVariables_arraySize+(i))
set k=(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetforce+(i)+2)-2)
call RemoveSavedInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetforce+(i)+2)
set i=k
endloop
endfunction
function s__TrigVariables_LinkedVariables_force__onInit takes nothing returns nothing
call s__TrigVariables_addFuncForVoid(function s__TrigVariables_setVoidforce)
endfunction
function s__TrigVariables__get_groupA takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_groupB takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_groupC takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_groupD takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_groupE takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_groupF takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_groupG takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_groupH takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_groupI takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_groupJ takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_groupK takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_groupL takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_groupM takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_groupN takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_groupO takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_groupP takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__get_group0 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_group1 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_group2 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_group3 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_group4 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_group5 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_group6 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_group7 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_group8 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_group9 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_group10 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_group11 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_group12 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_group13 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_group14 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_group15 takes integer this returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__set_groupA takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,0,which)
endfunction
function s__TrigVariables__set_groupB takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,1,which)
endfunction
function s__TrigVariables__set_groupC takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,2,which)
endfunction
function s__TrigVariables__set_groupD takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,3,which)
endfunction
function s__TrigVariables__set_groupE takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,4,which)
endfunction
function s__TrigVariables__set_groupF takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,5,which)
endfunction
function s__TrigVariables__set_groupG takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,6,which)
endfunction
function s__TrigVariables__set_groupH takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,7,which)
endfunction
function s__TrigVariables__set_groupI takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,8,which)
endfunction
function s__TrigVariables__set_groupJ takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,9,which)
endfunction
function s__TrigVariables__set_groupK takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,10,which)
endfunction
function s__TrigVariables__set_groupL takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,11,which)
endfunction
function s__TrigVariables__set_groupM takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,12,which)
endfunction
function s__TrigVariables__set_groupN takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,13,which)
endfunction
function s__TrigVariables__set_groupO takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,14,which)
endfunction
function s__TrigVariables__set_groupP takes integer this,group which returns nothing
call sc__TrigVariables_Setgroup(this,15,which)
endfunction
function s__TrigVariables_getIndicatorgroup takes integer this,integer id returns integer
return LoadInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetgroup+id+2)-2
endfunction
function s__TrigVariables_setIndicatorgroup takes integer this,integer id,integer value returns nothing
call SaveInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetgroup+id+2,value+2)
endfunction
function s__TrigVariables_remIndicatorgroup takes integer this,integer id returns nothing
call RemoveSavedInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetgroup+id+2)
endfunction
function s__TrigVariables_LinkedVariables_group__StateSetUsedgroup takes integer this,integer id returns nothing
if(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetgroup+(id)+2)-2)==-2 then
call SaveInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetgroup+(id)+2,(s__TrigVariables_lastSetgroup[this])+2)
set s__TrigVariables_lastSetgroup[this]=id
endif
endfunction
function s__TrigVariables_SetgroupNaive takes integer this,integer i,group x returns nothing
call SaveGroupHandle(s__TrigVariables_Hashgroup,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Setgroup takes integer this,integer i,group x returns nothing
call s__TrigVariables_LinkedVariables_group__StateSetUsedgroup(this,i)
call RemoveSavedHandle(s__TrigVariables_Hashgroup,0,this*s__TrigVariables_arraySize+i)
call SaveGroupHandle(s__TrigVariables_Hashgroup,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Getgroup takes integer this,integer i returns group
return LoadGroupHandle(s__TrigVariables_Hashgroup,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_Remgroup takes integer this,integer i returns nothing
call RemoveSavedHandle(s__TrigVariables_Hashgroup,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_SetgroupAutoRemove takes integer this,integer i,group x returns nothing
call DestroyGroup(((LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(i)))))
call s__TrigVariables_Setgroup(this,i,x)
endfunction
function s__TrigVariables_SetgroupBy takes integer this,integer i,group x returns nothing
call s__TrigVariables_SetgroupAutoRemove(this,i,x)
endfunction
function s__TrigVariables_SetLLV3groupAutoRemove takes integer this,integer i,group x returns nothing
call s__TrigVariables_SetgroupAutoRemove(this,i,x)
endfunction
function s__TrigVariables_GetgroupBy takes integer this,integer i returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(i)))
endfunction
function s__TrigVariables_setVoidgroup takes nothing returns nothing
local integer this=s__TrigVariables_thisForVoid
local integer i
local integer k
if s__TrigVariables_lastSetgroup[this]==-1 then
return
endif
set i=s__TrigVariables_lastSetgroup[this]
loop
exitwhen i==-1
call DestroyGroup(((LoadGroupHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(i)))))
call RemoveSavedHandle(s__TrigVariables_Hashgroup,0,(this)*s__TrigVariables_arraySize+(i))
set k=(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetgroup+(i)+2)-2)
call RemoveSavedInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetgroup+(i)+2)
set i=k
endloop
endfunction
function s__TrigVariables_LinkedVariables_group__onInit takes nothing returns nothing
call s__TrigVariables_addFuncForVoid(function s__TrigVariables_setVoidgroup)
endfunction
function s__TrigVariables__get_itemA takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_itemB takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_itemC takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_itemD takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_itemE takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_itemF takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_itemG takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_itemH takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_itemI takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_itemJ takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_itemK takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_itemL takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_itemM takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_itemN takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_itemO takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_itemP takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__get_item0 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_item1 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_item2 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_item3 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_item4 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_item5 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_item6 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_item7 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_item8 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_item9 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_item10 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_item11 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_item12 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_item13 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_item14 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_item15 takes integer this returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__set_itemA takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,0,which)
endfunction
function s__TrigVariables__set_itemB takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,1,which)
endfunction
function s__TrigVariables__set_itemC takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,2,which)
endfunction
function s__TrigVariables__set_itemD takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,3,which)
endfunction
function s__TrigVariables__set_itemE takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,4,which)
endfunction
function s__TrigVariables__set_itemF takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,5,which)
endfunction
function s__TrigVariables__set_itemG takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,6,which)
endfunction
function s__TrigVariables__set_itemH takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,7,which)
endfunction
function s__TrigVariables__set_itemI takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,8,which)
endfunction
function s__TrigVariables__set_itemJ takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,9,which)
endfunction
function s__TrigVariables__set_itemK takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,10,which)
endfunction
function s__TrigVariables__set_itemL takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,11,which)
endfunction
function s__TrigVariables__set_itemM takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,12,which)
endfunction
function s__TrigVariables__set_itemN takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,13,which)
endfunction
function s__TrigVariables__set_itemO takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,14,which)
endfunction
function s__TrigVariables__set_itemP takes integer this,item which returns nothing
call sc__TrigVariables_Setitem(this,15,which)
endfunction
function s__TrigVariables_getIndicatoritem takes integer this,integer id returns integer
return LoadInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetitem+id+2)-2
endfunction
function s__TrigVariables_setIndicatoritem takes integer this,integer id,integer value returns nothing
call SaveInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetitem+id+2,value+2)
endfunction
function s__TrigVariables_remIndicatoritem takes integer this,integer id returns nothing
call RemoveSavedInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetitem+id+2)
endfunction
function s__TrigVariables_LinkedVariables_item__StateSetUseditem takes integer this,integer id returns nothing
if(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetitem+(id)+2)-2)==-2 then
call SaveInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetitem+(id)+2,(s__TrigVariables_lastSetitem[this])+2)
set s__TrigVariables_lastSetitem[this]=id
endif
endfunction
function s__TrigVariables_SetitemNaive takes integer this,integer i,item x returns nothing
call SaveItemHandle(s__TrigVariables_Hashitem,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Setitem takes integer this,integer i,item x returns nothing
call s__TrigVariables_LinkedVariables_item__StateSetUseditem(this,i)
call RemoveSavedHandle(s__TrigVariables_Hashitem,0,this*s__TrigVariables_arraySize+i)
call SaveItemHandle(s__TrigVariables_Hashitem,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Getitem takes integer this,integer i returns item
return LoadItemHandle(s__TrigVariables_Hashitem,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_Remitem takes integer this,integer i returns nothing
call RemoveSavedHandle(s__TrigVariables_Hashitem,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_SetitemBy takes integer this,integer i,item x returns nothing
call s__TrigVariables_Setitem(this,i,x)
endfunction
function s__TrigVariables_GetitemBy takes integer this,integer i returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(i)))
endfunction
function s__TrigVariables_setVoiditem takes nothing returns nothing
local integer this=s__TrigVariables_thisForVoid
local integer i
local integer k
if s__TrigVariables_lastSetitem[this]==-1 then
return
endif
set i=s__TrigVariables_lastSetitem[this]
loop
exitwhen i==-1
call RemoveSavedHandle(s__TrigVariables_Hashitem,0,(this)*s__TrigVariables_arraySize+(i))
set k=(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetitem+(i)+2)-2)
call RemoveSavedInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetitem+(i)+2)
set i=k
endloop
endfunction
function s__TrigVariables_LinkedVariables_item__onInit takes nothing returns nothing
call s__TrigVariables_addFuncForVoid(function s__TrigVariables_setVoiditem)
endfunction
function s__TrigVariables__get_effectA takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_effectB takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_effectC takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_effectD takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_effectE takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_effectF takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_effectG takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_effectH takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_effectI takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_effectJ takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_effectK takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_effectL takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_effectM takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_effectN takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_effectO takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_effectP takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__get_effect0 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_effect1 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_effect2 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_effect3 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_effect4 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_effect5 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_effect6 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_effect7 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_effect8 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_effect9 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_effect10 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_effect11 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_effect12 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_effect13 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_effect14 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_effect15 takes integer this returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__set_effectA takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,0,which)
endfunction
function s__TrigVariables__set_effectB takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,1,which)
endfunction
function s__TrigVariables__set_effectC takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,2,which)
endfunction
function s__TrigVariables__set_effectD takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,3,which)
endfunction
function s__TrigVariables__set_effectE takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,4,which)
endfunction
function s__TrigVariables__set_effectF takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,5,which)
endfunction
function s__TrigVariables__set_effectG takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,6,which)
endfunction
function s__TrigVariables__set_effectH takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,7,which)
endfunction
function s__TrigVariables__set_effectI takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,8,which)
endfunction
function s__TrigVariables__set_effectJ takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,9,which)
endfunction
function s__TrigVariables__set_effectK takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,10,which)
endfunction
function s__TrigVariables__set_effectL takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,11,which)
endfunction
function s__TrigVariables__set_effectM takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,12,which)
endfunction
function s__TrigVariables__set_effectN takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,13,which)
endfunction
function s__TrigVariables__set_effectO takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,14,which)
endfunction
function s__TrigVariables__set_effectP takes integer this,effect which returns nothing
call sc__TrigVariables_Seteffect(this,15,which)
endfunction
function s__TrigVariables_getIndicatoreffect takes integer this,integer id returns integer
return LoadInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offseteffect+id+2)-2
endfunction
function s__TrigVariables_setIndicatoreffect takes integer this,integer id,integer value returns nothing
call SaveInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offseteffect+id+2,value+2)
endfunction
function s__TrigVariables_remIndicatoreffect takes integer this,integer id returns nothing
call RemoveSavedInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offseteffect+id+2)
endfunction
function s__TrigVariables_LinkedVariables_effect__StateSetUsedeffect takes integer this,integer id returns nothing
if(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offseteffect+(id)+2)-2)==-2 then
call SaveInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offseteffect+(id)+2,(s__TrigVariables_lastSeteffect[this])+2)
set s__TrigVariables_lastSeteffect[this]=id
endif
endfunction
function s__TrigVariables_SeteffectNaive takes integer this,integer i,effect x returns nothing
call SaveEffectHandle(s__TrigVariables_Hasheffect,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Seteffect takes integer this,integer i,effect x returns nothing
call s__TrigVariables_LinkedVariables_effect__StateSetUsedeffect(this,i)
call RemoveSavedHandle(s__TrigVariables_Hasheffect,0,this*s__TrigVariables_arraySize+i)
call SaveEffectHandle(s__TrigVariables_Hasheffect,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Geteffect takes integer this,integer i returns effect
return LoadEffectHandle(s__TrigVariables_Hasheffect,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_Remeffect takes integer this,integer i returns nothing
call RemoveSavedHandle(s__TrigVariables_Hasheffect,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_SeteffectAutoRemove takes integer this,integer i,effect x returns nothing
call DestroyEffect(((LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(i)))))
call s__TrigVariables_Seteffect(this,i,x)
endfunction
function s__TrigVariables_SeteffectBy takes integer this,integer i,effect x returns nothing
call s__TrigVariables_SeteffectAutoRemove(this,i,x)
endfunction
function s__TrigVariables_SetLLV3effectAutoRemove takes integer this,integer i,effect x returns nothing
call s__TrigVariables_SeteffectAutoRemove(this,i,x)
endfunction
function s__TrigVariables_GeteffectBy takes integer this,integer i returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(i)))
endfunction
function s__TrigVariables_setVoideffect takes nothing returns nothing
local integer this=s__TrigVariables_thisForVoid
local integer i
local integer k
if s__TrigVariables_lastSeteffect[this]==-1 then
return
endif
set i=s__TrigVariables_lastSeteffect[this]
loop
exitwhen i==-1
call DestroyEffect(((LoadEffectHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(i)))))
call RemoveSavedHandle(s__TrigVariables_Hasheffect,0,(this)*s__TrigVariables_arraySize+(i))
set k=(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offseteffect+(i)+2)-2)
call RemoveSavedInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offseteffect+(i)+2)
set i=k
endloop
endfunction
function s__TrigVariables_LinkedVariables_effect__onInit takes nothing returns nothing
call s__TrigVariables_addFuncForVoid(function s__TrigVariables_setVoideffect)
endfunction
function s__TrigVariables__get_timerA takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_timerB takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_timerC takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_timerD takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_timerE takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_timerF takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_timerG takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_timerH takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_timerI takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_timerJ takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_timerK takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_timerL takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_timerM takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_timerN takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_timerO takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_timerP takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__get_timer0 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_timer1 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_timer2 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_timer3 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_timer4 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_timer5 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_timer6 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_timer7 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_timer8 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_timer9 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_timer10 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_timer11 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_timer12 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_timer13 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_timer14 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_timer15 takes integer this returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__set_timerA takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,0,which)
endfunction
function s__TrigVariables__set_timerB takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,1,which)
endfunction
function s__TrigVariables__set_timerC takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,2,which)
endfunction
function s__TrigVariables__set_timerD takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,3,which)
endfunction
function s__TrigVariables__set_timerE takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,4,which)
endfunction
function s__TrigVariables__set_timerF takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,5,which)
endfunction
function s__TrigVariables__set_timerG takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,6,which)
endfunction
function s__TrigVariables__set_timerH takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,7,which)
endfunction
function s__TrigVariables__set_timerI takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,8,which)
endfunction
function s__TrigVariables__set_timerJ takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,9,which)
endfunction
function s__TrigVariables__set_timerK takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,10,which)
endfunction
function s__TrigVariables__set_timerL takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,11,which)
endfunction
function s__TrigVariables__set_timerM takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,12,which)
endfunction
function s__TrigVariables__set_timerN takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,13,which)
endfunction
function s__TrigVariables__set_timerO takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,14,which)
endfunction
function s__TrigVariables__set_timerP takes integer this,timer which returns nothing
call sc__TrigVariables_Settimer(this,15,which)
endfunction
function s__TrigVariables_getIndicatortimer takes integer this,integer id returns integer
return LoadInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsettimer+id+2)-2
endfunction
function s__TrigVariables_setIndicatortimer takes integer this,integer id,integer value returns nothing
call SaveInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsettimer+id+2,value+2)
endfunction
function s__TrigVariables_remIndicatortimer takes integer this,integer id returns nothing
call RemoveSavedInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsettimer+id+2)
endfunction
function s__TrigVariables_LinkedVariables_timer__StateSetUsedtimer takes integer this,integer id returns nothing
if(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsettimer+(id)+2)-2)==-2 then
call SaveInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsettimer+(id)+2,(s__TrigVariables_lastSettimer[this])+2)
set s__TrigVariables_lastSettimer[this]=id
endif
endfunction
function s__TrigVariables_SettimerNaive takes integer this,integer i,timer x returns nothing
call SaveTimerHandle(s__TrigVariables_Hashtimer,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Settimer takes integer this,integer i,timer x returns nothing
call s__TrigVariables_LinkedVariables_timer__StateSetUsedtimer(this,i)
call RemoveSavedHandle(s__TrigVariables_Hashtimer,0,this*s__TrigVariables_arraySize+i)
call SaveTimerHandle(s__TrigVariables_Hashtimer,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Gettimer takes integer this,integer i returns timer
return LoadTimerHandle(s__TrigVariables_Hashtimer,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_Remtimer takes integer this,integer i returns nothing
call RemoveSavedHandle(s__TrigVariables_Hashtimer,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_SettimerBy takes integer this,integer i,timer x returns nothing
call s__TrigVariables_Settimer(this,i,x)
endfunction
function s__TrigVariables_GettimerBy takes integer this,integer i returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(i)))
endfunction
function s__TrigVariables_setVoidtimer takes nothing returns nothing
local integer this=s__TrigVariables_thisForVoid
local integer i
local integer k
if s__TrigVariables_lastSettimer[this]==-1 then
return
endif
set i=s__TrigVariables_lastSettimer[this]
loop
exitwhen i==-1
call RemoveSavedHandle(s__TrigVariables_Hashtimer,0,(this)*s__TrigVariables_arraySize+(i))
set k=(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsettimer+(i)+2)-2)
call RemoveSavedInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsettimer+(i)+2)
set i=k
endloop
endfunction
function s__TrigVariables_LinkedVariables_timer__onInit takes nothing returns nothing
call s__TrigVariables_addFuncForVoid(function s__TrigVariables_setVoidtimer)
endfunction
function s__TrigVariables__get_unitA takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_unitB takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_unitC takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_unitD takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_unitE takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_unitF takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_unitG takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_unitH takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_unitI takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_unitJ takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_unitK takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_unitL takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_unitM takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_unitN takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_unitO takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_unitP takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__get_unit0 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_unit1 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_unit2 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_unit3 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_unit4 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_unit5 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_unit6 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_unit7 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_unit8 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_unit9 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_unit10 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_unit11 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_unit12 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_unit13 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_unit14 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_unit15 takes integer this returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__set_unitA takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,0,which)
endfunction
function s__TrigVariables__set_unitB takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,1,which)
endfunction
function s__TrigVariables__set_unitC takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,2,which)
endfunction
function s__TrigVariables__set_unitD takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,3,which)
endfunction
function s__TrigVariables__set_unitE takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,4,which)
endfunction
function s__TrigVariables__set_unitF takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,5,which)
endfunction
function s__TrigVariables__set_unitG takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,6,which)
endfunction
function s__TrigVariables__set_unitH takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,7,which)
endfunction
function s__TrigVariables__set_unitI takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,8,which)
endfunction
function s__TrigVariables__set_unitJ takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,9,which)
endfunction
function s__TrigVariables__set_unitK takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,10,which)
endfunction
function s__TrigVariables__set_unitL takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,11,which)
endfunction
function s__TrigVariables__set_unitM takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,12,which)
endfunction
function s__TrigVariables__set_unitN takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,13,which)
endfunction
function s__TrigVariables__set_unitO takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,14,which)
endfunction
function s__TrigVariables__set_unitP takes integer this,unit which returns nothing
call sc__TrigVariables_Setunit(this,15,which)
endfunction
function s__TrigVariables_getIndicatorunit takes integer this,integer id returns integer
return LoadInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetunit+id+2)-2
endfunction
function s__TrigVariables_setIndicatorunit takes integer this,integer id,integer value returns nothing
call SaveInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetunit+id+2,value+2)
endfunction
function s__TrigVariables_remIndicatorunit takes integer this,integer id returns nothing
call RemoveSavedInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetunit+id+2)
endfunction
function s__TrigVariables_LinkedVariables_unit__StateSetUsedunit takes integer this,integer id returns nothing
if(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetunit+(id)+2)-2)==-2 then
call SaveInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetunit+(id)+2,(s__TrigVariables_lastSetunit[this])+2)
set s__TrigVariables_lastSetunit[this]=id
endif
endfunction
function s__TrigVariables_SetunitNaive takes integer this,integer i,unit x returns nothing
call SaveUnitHandle(s__TrigVariables_Hashunit,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Setunit takes integer this,integer i,unit x returns nothing
call s__TrigVariables_LinkedVariables_unit__StateSetUsedunit(this,i)
call RemoveSavedHandle(s__TrigVariables_Hashunit,0,this*s__TrigVariables_arraySize+i)
call SaveUnitHandle(s__TrigVariables_Hashunit,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Getunit takes integer this,integer i returns unit
return LoadUnitHandle(s__TrigVariables_Hashunit,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_Remunit takes integer this,integer i returns nothing
call RemoveSavedHandle(s__TrigVariables_Hashunit,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_SetunitBy takes integer this,integer i,unit x returns nothing
call s__TrigVariables_Setunit(this,i,x)
endfunction
function s__TrigVariables_GetunitBy takes integer this,integer i returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(i)))
endfunction
function s__TrigVariables_setVoidunit takes nothing returns nothing
local integer this=s__TrigVariables_thisForVoid
local integer i
local integer k
if s__TrigVariables_lastSetunit[this]==-1 then
return
endif
set i=s__TrigVariables_lastSetunit[this]
loop
exitwhen i==-1
call RemoveSavedHandle(s__TrigVariables_Hashunit,0,(this)*s__TrigVariables_arraySize+(i))
set k=(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetunit+(i)+2)-2)
call RemoveSavedInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetunit+(i)+2)
set i=k
endloop
endfunction
function s__TrigVariables_LinkedVariables_unit__onInit takes nothing returns nothing
call s__TrigVariables_addFuncForVoid(function s__TrigVariables_setVoidunit)
endfunction
function s__TrigVariables__get_locationA takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_locationB takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_locationC takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_locationD takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_locationE takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_locationF takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_locationG takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_locationH takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_locationI takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_locationJ takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_locationK takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_locationL takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_locationM takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_locationN takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_locationO takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_locationP takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__get_location0 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_location1 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_location2 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_location3 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_location4 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_location5 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_location6 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_location7 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_location8 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_location9 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_location10 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_location11 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_location12 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_location13 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_location14 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_location15 takes integer this returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__set_locationA takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,0,which)
endfunction
function s__TrigVariables__set_locationB takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,1,which)
endfunction
function s__TrigVariables__set_locationC takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,2,which)
endfunction
function s__TrigVariables__set_locationD takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,3,which)
endfunction
function s__TrigVariables__set_locationE takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,4,which)
endfunction
function s__TrigVariables__set_locationF takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,5,which)
endfunction
function s__TrigVariables__set_locationG takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,6,which)
endfunction
function s__TrigVariables__set_locationH takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,7,which)
endfunction
function s__TrigVariables__set_locationI takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,8,which)
endfunction
function s__TrigVariables__set_locationJ takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,9,which)
endfunction
function s__TrigVariables__set_locationK takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,10,which)
endfunction
function s__TrigVariables__set_locationL takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,11,which)
endfunction
function s__TrigVariables__set_locationM takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,12,which)
endfunction
function s__TrigVariables__set_locationN takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,13,which)
endfunction
function s__TrigVariables__set_locationO takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,14,which)
endfunction
function s__TrigVariables__set_locationP takes integer this,location which returns nothing
call sc__TrigVariables_Setlocation(this,15,which)
endfunction
function s__TrigVariables_getIndicatorlocation takes integer this,integer id returns integer
return LoadInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetlocation+id+2)-2
endfunction
function s__TrigVariables_setIndicatorlocation takes integer this,integer id,integer value returns nothing
call SaveInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetlocation+id+2,value+2)
endfunction
function s__TrigVariables_remIndicatorlocation takes integer this,integer id returns nothing
call RemoveSavedInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetlocation+id+2)
endfunction
function s__TrigVariables_LinkedVariables_location__StateSetUsedlocation takes integer this,integer id returns nothing
if(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetlocation+(id)+2)-2)==-2 then
call SaveInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetlocation+(id)+2,(s__TrigVariables_lastSetlocation[this])+2)
set s__TrigVariables_lastSetlocation[this]=id
endif
endfunction
function s__TrigVariables_SetlocationNaive takes integer this,integer i,location x returns nothing
call SaveLocationHandle(s__TrigVariables_Hashlocation,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Setlocation takes integer this,integer i,location x returns nothing
call s__TrigVariables_LinkedVariables_location__StateSetUsedlocation(this,i)
call RemoveSavedHandle(s__TrigVariables_Hashlocation,0,this*s__TrigVariables_arraySize+i)
call SaveLocationHandle(s__TrigVariables_Hashlocation,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Getlocation takes integer this,integer i returns location
return LoadLocationHandle(s__TrigVariables_Hashlocation,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_Remlocation takes integer this,integer i returns nothing
call RemoveSavedHandle(s__TrigVariables_Hashlocation,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_SetlocationAutoRemove takes integer this,integer i,location x returns nothing
call RemoveLocation(((LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(i)))))
call s__TrigVariables_Setlocation(this,i,x)
endfunction
function s__TrigVariables_SetlocationBy takes integer this,integer i,location x returns nothing
call s__TrigVariables_SetlocationAutoRemove(this,i,x)
endfunction
function s__TrigVariables_SetLLV5locationAutoRemove takes integer this,integer i,location x returns nothing
call s__TrigVariables_SetlocationAutoRemove(this,i,x)
endfunction
function s__TrigVariables_GetlocationBy takes integer this,integer i returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(i)))
endfunction
function s__TrigVariables_setVoidlocation takes nothing returns nothing
local integer this=s__TrigVariables_thisForVoid
local integer i
local integer k
if s__TrigVariables_lastSetlocation[this]==-1 then
return
endif
set i=s__TrigVariables_lastSetlocation[this]
loop
exitwhen i==-1
call RemoveLocation(((LoadLocationHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(i)))))
call RemoveSavedHandle(s__TrigVariables_Hashlocation,0,(this)*s__TrigVariables_arraySize+(i))
set k=(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetlocation+(i)+2)-2)
call RemoveSavedInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetlocation+(i)+2)
set i=k
endloop
endfunction
function s__TrigVariables_LinkedVariables_location__onInit takes nothing returns nothing
call s__TrigVariables_addFuncForVoid(function s__TrigVariables_setVoidlocation)
endfunction
function s__TrigVariables__get_lightningA takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_lightningB takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_lightningC takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_lightningD takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_lightningE takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_lightningF takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_lightningG takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_lightningH takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_lightningI takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_lightningJ takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_lightningK takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_lightningL takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_lightningM takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_lightningN takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_lightningO takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_lightningP takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__get_lightning0 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_lightning1 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_lightning2 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_lightning3 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_lightning4 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_lightning5 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_lightning6 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_lightning7 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_lightning8 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_lightning9 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_lightning10 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_lightning11 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_lightning12 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_lightning13 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_lightning14 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_lightning15 takes integer this returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__set_lightningA takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,0,which)
endfunction
function s__TrigVariables__set_lightningB takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,1,which)
endfunction
function s__TrigVariables__set_lightningC takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,2,which)
endfunction
function s__TrigVariables__set_lightningD takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,3,which)
endfunction
function s__TrigVariables__set_lightningE takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,4,which)
endfunction
function s__TrigVariables__set_lightningF takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,5,which)
endfunction
function s__TrigVariables__set_lightningG takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,6,which)
endfunction
function s__TrigVariables__set_lightningH takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,7,which)
endfunction
function s__TrigVariables__set_lightningI takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,8,which)
endfunction
function s__TrigVariables__set_lightningJ takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,9,which)
endfunction
function s__TrigVariables__set_lightningK takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,10,which)
endfunction
function s__TrigVariables__set_lightningL takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,11,which)
endfunction
function s__TrigVariables__set_lightningM takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,12,which)
endfunction
function s__TrigVariables__set_lightningN takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,13,which)
endfunction
function s__TrigVariables__set_lightningO takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,14,which)
endfunction
function s__TrigVariables__set_lightningP takes integer this,lightning which returns nothing
call sc__TrigVariables_Setlightning(this,15,which)
endfunction
function s__TrigVariables_getIndicatorlightning takes integer this,integer id returns integer
return LoadInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetlightning+id+2)-2
endfunction
function s__TrigVariables_setIndicatorlightning takes integer this,integer id,integer value returns nothing
call SaveInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetlightning+id+2,value+2)
endfunction
function s__TrigVariables_remIndicatorlightning takes integer this,integer id returns nothing
call RemoveSavedInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetlightning+id+2)
endfunction
function s__TrigVariables_LinkedVariables_lightning__StateSetUsedlightning takes integer this,integer id returns nothing
if(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetlightning+(id)+2)-2)==-2 then
call SaveInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetlightning+(id)+2,(s__TrigVariables_lastSetlightning[this])+2)
set s__TrigVariables_lastSetlightning[this]=id
endif
endfunction
function s__TrigVariables_SetlightningNaive takes integer this,integer i,lightning x returns nothing
call SaveLightningHandle(s__TrigVariables_Hashlightning,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Setlightning takes integer this,integer i,lightning x returns nothing
call s__TrigVariables_LinkedVariables_lightning__StateSetUsedlightning(this,i)
call RemoveSavedHandle(s__TrigVariables_Hashlightning,0,this*s__TrigVariables_arraySize+i)
call SaveLightningHandle(s__TrigVariables_Hashlightning,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Getlightning takes integer this,integer i returns lightning
return LoadLightningHandle(s__TrigVariables_Hashlightning,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_Remlightning takes integer this,integer i returns nothing
call RemoveSavedHandle(s__TrigVariables_Hashlightning,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_SetlightningAutoRemove takes integer this,integer i,lightning x returns nothing
call s__TrigVariables_lightningDelete((LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(i))))
call s__TrigVariables_Setlightning(this,i,x)
endfunction
function s__TrigVariables_SetlightningBy takes integer this,integer i,lightning x returns nothing
call s__TrigVariables_SetlightningAutoRemove(this,i,x)
endfunction
function s__TrigVariables_SetLLV5lightningAutoRemove takes integer this,integer i,lightning x returns nothing
call s__TrigVariables_SetlightningAutoRemove(this,i,x)
endfunction
function s__TrigVariables_GetlightningBy takes integer this,integer i returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(i)))
endfunction
function s__TrigVariables_setVoidlightning takes nothing returns nothing
local integer this=s__TrigVariables_thisForVoid
local integer i
local integer k
if s__TrigVariables_lastSetlightning[this]==-1 then
return
endif
set i=s__TrigVariables_lastSetlightning[this]
loop
exitwhen i==-1
call s__TrigVariables_lightningDelete((LoadLightningHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(i))))
call RemoveSavedHandle(s__TrigVariables_Hashlightning,0,(this)*s__TrigVariables_arraySize+(i))
set k=(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetlightning+(i)+2)-2)
call RemoveSavedInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetlightning+(i)+2)
set i=k
endloop
endfunction
function s__TrigVariables_LinkedVariables_lightning__onInit takes nothing returns nothing
call s__TrigVariables_addFuncForVoid(function s__TrigVariables_setVoidlightning)
endfunction
function s__TrigVariables__get_integerA takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_integerB takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_integerC takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_integerD takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_integerE takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_integerF takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_integerG takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_integerH takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_integerI takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_integerJ takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_integerK takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_integerL takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_integerM takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_integerN takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_integerO takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_integerP takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__get_integer0 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_integer1 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_integer2 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_integer3 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_integer4 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_integer5 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_integer6 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_integer7 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_integer8 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_integer9 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_integer10 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_integer11 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_integer12 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_integer13 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_integer14 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_integer15 takes integer this returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__set_integerA takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,0,which)
endfunction
function s__TrigVariables__set_integerB takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,1,which)
endfunction
function s__TrigVariables__set_integerC takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,2,which)
endfunction
function s__TrigVariables__set_integerD takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,3,which)
endfunction
function s__TrigVariables__set_integerE takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,4,which)
endfunction
function s__TrigVariables__set_integerF takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,5,which)
endfunction
function s__TrigVariables__set_integerG takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,6,which)
endfunction
function s__TrigVariables__set_integerH takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,7,which)
endfunction
function s__TrigVariables__set_integerI takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,8,which)
endfunction
function s__TrigVariables__set_integerJ takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,9,which)
endfunction
function s__TrigVariables__set_integerK takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,10,which)
endfunction
function s__TrigVariables__set_integerL takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,11,which)
endfunction
function s__TrigVariables__set_integerM takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,12,which)
endfunction
function s__TrigVariables__set_integerN takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,13,which)
endfunction
function s__TrigVariables__set_integerO takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,14,which)
endfunction
function s__TrigVariables__set_integerP takes integer this,integer which returns nothing
call sc__TrigVariables_Setinteger(this,15,which)
endfunction
function s__TrigVariables_getIndicatorinteger takes integer this,integer id returns integer
return LoadInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetinteger+id+2)-2
endfunction
function s__TrigVariables_setIndicatorinteger takes integer this,integer id,integer value returns nothing
call SaveInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetinteger+id+2,value+2)
endfunction
function s__TrigVariables_remIndicatorinteger takes integer this,integer id returns nothing
call RemoveSavedInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetinteger+id+2)
endfunction
function s__TrigVariables_LinkedVariables_integer__StateSetUsedinteger takes integer this,integer id returns nothing
if(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetinteger+(id)+2)-2)==-2 then
call SaveInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetinteger+(id)+2,(s__TrigVariables_lastSetinteger[this])+2)
set s__TrigVariables_lastSetinteger[this]=id
endif
endfunction
function s__TrigVariables_SetintegerNaive takes integer this,integer i,integer x returns nothing
call SaveInteger(s__TrigVariables_Hashinteger,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Setinteger takes integer this,integer i,integer x returns nothing
call s__TrigVariables_LinkedVariables_integer__StateSetUsedinteger(this,i)
call RemoveSavedInteger(s__TrigVariables_Hashinteger,0,this*s__TrigVariables_arraySize+i)
call SaveInteger(s__TrigVariables_Hashinteger,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Getinteger takes integer this,integer i returns integer
return LoadInteger(s__TrigVariables_Hashinteger,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_Reminteger takes integer this,integer i returns nothing
call RemoveSavedInteger(s__TrigVariables_Hashinteger,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_SetintegerBy takes integer this,integer i,integer x returns nothing
call s__TrigVariables_Setinteger(this,i,x)
endfunction
function s__TrigVariables_GetintegerBy takes integer this,integer i returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(i)))
endfunction
function s__TrigVariables_setVoidinteger takes nothing returns nothing
local integer this=s__TrigVariables_thisForVoid
local integer i
local integer k
if s__TrigVariables_lastSetinteger[this]==-1 then
return
endif
set i=s__TrigVariables_lastSetinteger[this]
loop
exitwhen i==-1
call RemoveSavedInteger(s__TrigVariables_Hashinteger,0,(this)*s__TrigVariables_arraySize+(i))
set k=(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetinteger+(i)+2)-2)
call RemoveSavedInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetinteger+(i)+2)
set i=k
endloop
endfunction
function s__TrigVariables_LinkedVariables_integer__onInit takes nothing returns nothing
call s__TrigVariables_addFuncForVoid(function s__TrigVariables_setVoidinteger)
endfunction
function s__TrigVariables__get_realA takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_realB takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_realC takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_realD takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_realE takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_realF takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_realG takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_realH takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_realI takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_realJ takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_realK takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_realL takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_realM takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_realN takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_realO takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_realP takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__get_real0 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_real1 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_real2 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_real3 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_real4 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_real5 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_real6 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_real7 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_real8 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_real9 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_real10 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_real11 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_real12 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_real13 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_real14 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_real15 takes integer this returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__set_realA takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,0,which)
endfunction
function s__TrigVariables__set_realB takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,1,which)
endfunction
function s__TrigVariables__set_realC takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,2,which)
endfunction
function s__TrigVariables__set_realD takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,3,which)
endfunction
function s__TrigVariables__set_realE takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,4,which)
endfunction
function s__TrigVariables__set_realF takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,5,which)
endfunction
function s__TrigVariables__set_realG takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,6,which)
endfunction
function s__TrigVariables__set_realH takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,7,which)
endfunction
function s__TrigVariables__set_realI takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,8,which)
endfunction
function s__TrigVariables__set_realJ takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,9,which)
endfunction
function s__TrigVariables__set_realK takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,10,which)
endfunction
function s__TrigVariables__set_realL takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,11,which)
endfunction
function s__TrigVariables__set_realM takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,12,which)
endfunction
function s__TrigVariables__set_realN takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,13,which)
endfunction
function s__TrigVariables__set_realO takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,14,which)
endfunction
function s__TrigVariables__set_realP takes integer this,real which returns nothing
call sc__TrigVariables_Setreal(this,15,which)
endfunction
function s__TrigVariables_getIndicatorreal takes integer this,integer id returns integer
return LoadInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetreal+id+2)-2
endfunction
function s__TrigVariables_setIndicatorreal takes integer this,integer id,integer value returns nothing
call SaveInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetreal+id+2,value+2)
endfunction
function s__TrigVariables_remIndicatorreal takes integer this,integer id returns nothing
call RemoveSavedInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetreal+id+2)
endfunction
function s__TrigVariables_LinkedVariables_real__StateSetUsedreal takes integer this,integer id returns nothing
if(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetreal+(id)+2)-2)==-2 then
call SaveInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetreal+(id)+2,(s__TrigVariables_lastSetreal[this])+2)
set s__TrigVariables_lastSetreal[this]=id
endif
endfunction
function s__TrigVariables_SetrealNaive takes integer this,integer i,real x returns nothing
call SaveReal(s__TrigVariables_Hashreal,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Setreal takes integer this,integer i,real x returns nothing
call s__TrigVariables_LinkedVariables_real__StateSetUsedreal(this,i)
call RemoveSavedReal(s__TrigVariables_Hashreal,0,this*s__TrigVariables_arraySize+i)
call SaveReal(s__TrigVariables_Hashreal,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Getreal takes integer this,integer i returns real
return LoadReal(s__TrigVariables_Hashreal,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_Remreal takes integer this,integer i returns nothing
call RemoveSavedReal(s__TrigVariables_Hashreal,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_SetrealBy takes integer this,integer i,real x returns nothing
call s__TrigVariables_Setreal(this,i,x)
endfunction
function s__TrigVariables_GetrealBy takes integer this,integer i returns real
return(LoadReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(i)))
endfunction
function s__TrigVariables_setVoidreal takes nothing returns nothing
local integer this=s__TrigVariables_thisForVoid
local integer i
local integer k
if s__TrigVariables_lastSetreal[this]==-1 then
return
endif
set i=s__TrigVariables_lastSetreal[this]
loop
exitwhen i==-1
call RemoveSavedReal(s__TrigVariables_Hashreal,0,(this)*s__TrigVariables_arraySize+(i))
set k=(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetreal+(i)+2)-2)
call RemoveSavedInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetreal+(i)+2)
set i=k
endloop
endfunction
function s__TrigVariables_LinkedVariables_real__onInit takes nothing returns nothing
call s__TrigVariables_addFuncForVoid(function s__TrigVariables_setVoidreal)
endfunction
function s__TrigVariables__get_booleanA takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_booleanB takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_booleanC takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_booleanD takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_booleanE takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_booleanF takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_booleanG takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_booleanH takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_booleanI takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_booleanJ takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_booleanK takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_booleanL takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_booleanM takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_booleanN takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_booleanO takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_booleanP takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__get_boolean0 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_boolean1 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_boolean2 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_boolean3 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_boolean4 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_boolean5 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_boolean6 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_boolean7 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_boolean8 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_boolean9 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_boolean10 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_boolean11 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_boolean12 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_boolean13 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_boolean14 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_boolean15 takes integer this returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__set_booleanA takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,0,which)
endfunction
function s__TrigVariables__set_booleanB takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,1,which)
endfunction
function s__TrigVariables__set_booleanC takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,2,which)
endfunction
function s__TrigVariables__set_booleanD takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,3,which)
endfunction
function s__TrigVariables__set_booleanE takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,4,which)
endfunction
function s__TrigVariables__set_booleanF takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,5,which)
endfunction
function s__TrigVariables__set_booleanG takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,6,which)
endfunction
function s__TrigVariables__set_booleanH takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,7,which)
endfunction
function s__TrigVariables__set_booleanI takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,8,which)
endfunction
function s__TrigVariables__set_booleanJ takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,9,which)
endfunction
function s__TrigVariables__set_booleanK takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,10,which)
endfunction
function s__TrigVariables__set_booleanL takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,11,which)
endfunction
function s__TrigVariables__set_booleanM takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,12,which)
endfunction
function s__TrigVariables__set_booleanN takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,13,which)
endfunction
function s__TrigVariables__set_booleanO takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,14,which)
endfunction
function s__TrigVariables__set_booleanP takes integer this,boolean which returns nothing
call sc__TrigVariables_Setboolean(this,15,which)
endfunction
function s__TrigVariables_getIndicatorboolean takes integer this,integer id returns integer
return LoadInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetboolean+id+2)-2
endfunction
function s__TrigVariables_setIndicatorboolean takes integer this,integer id,integer value returns nothing
call SaveInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetboolean+id+2,value+2)
endfunction
function s__TrigVariables_remIndicatorboolean takes integer this,integer id returns nothing
call RemoveSavedInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetboolean+id+2)
endfunction
function s__TrigVariables_LinkedVariables_boolean__StateSetUsedboolean takes integer this,integer id returns nothing
if(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetboolean+(id)+2)-2)==-2 then
call SaveInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetboolean+(id)+2,(s__TrigVariables_lastSetboolean[this])+2)
set s__TrigVariables_lastSetboolean[this]=id
endif
endfunction
function s__TrigVariables_SetbooleanNaive takes integer this,integer i,boolean x returns nothing
call SaveBoolean(s__TrigVariables_Hashboolean,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Setboolean takes integer this,integer i,boolean x returns nothing
call s__TrigVariables_LinkedVariables_boolean__StateSetUsedboolean(this,i)
call RemoveSavedBoolean(s__TrigVariables_Hashboolean,0,this*s__TrigVariables_arraySize+i)
call SaveBoolean(s__TrigVariables_Hashboolean,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Getboolean takes integer this,integer i returns boolean
return LoadBoolean(s__TrigVariables_Hashboolean,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_Remboolean takes integer this,integer i returns nothing
call RemoveSavedBoolean(s__TrigVariables_Hashboolean,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_SetbooleanBy takes integer this,integer i,boolean x returns nothing
call s__TrigVariables_Setboolean(this,i,x)
endfunction
function s__TrigVariables_GetbooleanBy takes integer this,integer i returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(i)))
endfunction
function s__TrigVariables_setVoidboolean takes nothing returns nothing
local integer this=s__TrigVariables_thisForVoid
local integer i
local integer k
if s__TrigVariables_lastSetboolean[this]==-1 then
return
endif
set i=s__TrigVariables_lastSetboolean[this]
loop
exitwhen i==-1
call RemoveSavedBoolean(s__TrigVariables_Hashboolean,0,(this)*s__TrigVariables_arraySize+(i))
set k=(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetboolean+(i)+2)-2)
call RemoveSavedInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetboolean+(i)+2)
set i=k
endloop
endfunction
function s__TrigVariables_LinkedVariables_boolean__onInit takes nothing returns nothing
call s__TrigVariables_addFuncForVoid(function s__TrigVariables_setVoidboolean)
endfunction
function s__TrigVariables__get_texttagA takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_texttagB takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_texttagC takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_texttagD takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_texttagE takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_texttagF takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_texttagG takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_texttagH takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_texttagI takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_texttagJ takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_texttagK takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_texttagL takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_texttagM takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_texttagN takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_texttagO takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_texttagP takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__get_texttag0 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_texttag1 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_texttag2 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_texttag3 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_texttag4 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_texttag5 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_texttag6 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_texttag7 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_texttag8 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_texttag9 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_texttag10 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_texttag11 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_texttag12 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_texttag13 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_texttag14 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_texttag15 takes integer this returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__set_texttagA takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,0,which)
endfunction
function s__TrigVariables__set_texttagB takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,1,which)
endfunction
function s__TrigVariables__set_texttagC takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,2,which)
endfunction
function s__TrigVariables__set_texttagD takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,3,which)
endfunction
function s__TrigVariables__set_texttagE takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,4,which)
endfunction
function s__TrigVariables__set_texttagF takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,5,which)
endfunction
function s__TrigVariables__set_texttagG takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,6,which)
endfunction
function s__TrigVariables__set_texttagH takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,7,which)
endfunction
function s__TrigVariables__set_texttagI takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,8,which)
endfunction
function s__TrigVariables__set_texttagJ takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,9,which)
endfunction
function s__TrigVariables__set_texttagK takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,10,which)
endfunction
function s__TrigVariables__set_texttagL takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,11,which)
endfunction
function s__TrigVariables__set_texttagM takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,12,which)
endfunction
function s__TrigVariables__set_texttagN takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,13,which)
endfunction
function s__TrigVariables__set_texttagO takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,14,which)
endfunction
function s__TrigVariables__set_texttagP takes integer this,texttag which returns nothing
call sc__TrigVariables_Settexttag(this,15,which)
endfunction
function s__TrigVariables_getIndicatortexttag takes integer this,integer id returns integer
return LoadInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsettexttag+id+2)-2
endfunction
function s__TrigVariables_setIndicatortexttag takes integer this,integer id,integer value returns nothing
call SaveInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsettexttag+id+2,value+2)
endfunction
function s__TrigVariables_remIndicatortexttag takes integer this,integer id returns nothing
call RemoveSavedInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsettexttag+id+2)
endfunction
function s__TrigVariables_LinkedVariables_texttag__StateSetUsedtexttag takes integer this,integer id returns nothing
if(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsettexttag+(id)+2)-2)==-2 then
call SaveInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsettexttag+(id)+2,(s__TrigVariables_lastSettexttag[this])+2)
set s__TrigVariables_lastSettexttag[this]=id
endif
endfunction
function s__TrigVariables_SettexttagNaive takes integer this,integer i,texttag x returns nothing
call SaveTextTagHandle(s__TrigVariables_Hashtexttag,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Settexttag takes integer this,integer i,texttag x returns nothing
call s__TrigVariables_LinkedVariables_texttag__StateSetUsedtexttag(this,i)
call RemoveSavedHandle(s__TrigVariables_Hashtexttag,0,this*s__TrigVariables_arraySize+i)
call SaveTextTagHandle(s__TrigVariables_Hashtexttag,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Gettexttag takes integer this,integer i returns texttag
return LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_Remtexttag takes integer this,integer i returns nothing
call RemoveSavedHandle(s__TrigVariables_Hashtexttag,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_SettexttagBy takes integer this,integer i,texttag x returns nothing
call s__TrigVariables_Settexttag(this,i,x)
endfunction
function s__TrigVariables_GettexttagBy takes integer this,integer i returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(i)))
endfunction
function s__TrigVariables_setVoidtexttag takes nothing returns nothing
local integer this=s__TrigVariables_thisForVoid
local integer i
local integer k
if s__TrigVariables_lastSettexttag[this]==-1 then
return
endif
set i=s__TrigVariables_lastSettexttag[this]
loop
exitwhen i==-1
call RemoveSavedHandle(s__TrigVariables_Hashtexttag,0,(this)*s__TrigVariables_arraySize+(i))
set k=(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsettexttag+(i)+2)-2)
call RemoveSavedInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsettexttag+(i)+2)
set i=k
endloop
endfunction
function s__TrigVariables_LinkedVariables_texttag__onInit takes nothing returns nothing
call s__TrigVariables_addFuncForVoid(function s__TrigVariables_setVoidtexttag)
endfunction
function s__TrigVariables__get_stringA takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_stringB takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_stringC takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_stringD takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_stringE takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_stringF takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_stringG takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_stringH takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_stringI takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_stringJ takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_stringK takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_stringL takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_stringM takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_stringN takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_stringO takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_stringP takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__get_string0 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(0)))
endfunction
function s__TrigVariables__get_string1 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(1)))
endfunction
function s__TrigVariables__get_string2 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(2)))
endfunction
function s__TrigVariables__get_string3 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(3)))
endfunction
function s__TrigVariables__get_string4 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(4)))
endfunction
function s__TrigVariables__get_string5 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(5)))
endfunction
function s__TrigVariables__get_string6 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(6)))
endfunction
function s__TrigVariables__get_string7 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(7)))
endfunction
function s__TrigVariables__get_string8 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(8)))
endfunction
function s__TrigVariables__get_string9 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(9)))
endfunction
function s__TrigVariables__get_string10 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(10)))
endfunction
function s__TrigVariables__get_string11 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(11)))
endfunction
function s__TrigVariables__get_string12 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(12)))
endfunction
function s__TrigVariables__get_string13 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(13)))
endfunction
function s__TrigVariables__get_string14 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(14)))
endfunction
function s__TrigVariables__get_string15 takes integer this returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(15)))
endfunction
function s__TrigVariables__set_stringA takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,0,which)
endfunction
function s__TrigVariables__set_stringB takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,1,which)
endfunction
function s__TrigVariables__set_stringC takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,2,which)
endfunction
function s__TrigVariables__set_stringD takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,3,which)
endfunction
function s__TrigVariables__set_stringE takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,4,which)
endfunction
function s__TrigVariables__set_stringF takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,5,which)
endfunction
function s__TrigVariables__set_stringG takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,6,which)
endfunction
function s__TrigVariables__set_stringH takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,7,which)
endfunction
function s__TrigVariables__set_stringI takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,8,which)
endfunction
function s__TrigVariables__set_stringJ takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,9,which)
endfunction
function s__TrigVariables__set_stringK takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,10,which)
endfunction
function s__TrigVariables__set_stringL takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,11,which)
endfunction
function s__TrigVariables__set_stringM takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,12,which)
endfunction
function s__TrigVariables__set_stringN takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,13,which)
endfunction
function s__TrigVariables__set_stringO takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,14,which)
endfunction
function s__TrigVariables__set_stringP takes integer this,string which returns nothing
call sc__TrigVariables_Setstring(this,15,which)
endfunction
function s__TrigVariables_getIndicatorstring takes integer this,integer id returns integer
return LoadInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetstring+id+2)-2
endfunction
function s__TrigVariables_setIndicatorstring takes integer this,integer id,integer value returns nothing
call SaveInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetstring+id+2,value+2)
endfunction
function s__TrigVariables_remIndicatorstring takes integer this,integer id returns nothing
call RemoveSavedInteger(s__TrigVariables_HashMain,0,this*s__TrigVariables_offsetSize+s__TrigVariables_offsetstring+id+2)
endfunction
function s__TrigVariables_LinkedVariables_string__StateSetUsedstring takes integer this,integer id returns nothing
if(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetstring+(id)+2)-2)==-2 then
call SaveInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetstring+(id)+2,(s__TrigVariables_lastSetstring[this])+2)
set s__TrigVariables_lastSetstring[this]=id
endif
endfunction
function s__TrigVariables_SetstringNaive takes integer this,integer i,string x returns nothing
call SaveStr(s__TrigVariables_Hashstring,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Setstring takes integer this,integer i,string x returns nothing
call s__TrigVariables_LinkedVariables_string__StateSetUsedstring(this,i)
call RemoveSavedString(s__TrigVariables_Hashstring,0,this*s__TrigVariables_arraySize+i)
call SaveStr(s__TrigVariables_Hashstring,0,this*s__TrigVariables_arraySize+i,x)
endfunction
function s__TrigVariables_Getstring takes integer this,integer i returns string
return LoadStr(s__TrigVariables_Hashstring,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_Remstring takes integer this,integer i returns nothing
call RemoveSavedString(s__TrigVariables_Hashstring,0,this*s__TrigVariables_arraySize+i)
endfunction
function s__TrigVariables_SetstringBy takes integer this,integer i,string x returns nothing
call s__TrigVariables_Setstring(this,i,x)
endfunction
function s__TrigVariables_GetstringBy takes integer this,integer i returns string
return(LoadStr(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(i)))
endfunction
function s__TrigVariables_setVoidstring takes nothing returns nothing
local integer this=s__TrigVariables_thisForVoid
local integer i
local integer k
if s__TrigVariables_lastSetstring[this]==-1 then
return
endif
set i=s__TrigVariables_lastSetstring[this]
loop
exitwhen i==-1
call RemoveSavedString(s__TrigVariables_Hashstring,0,(this)*s__TrigVariables_arraySize+(i))
set k=(LoadInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetstring+(i)+2)-2)
call RemoveSavedInteger(s__TrigVariables_HashMain,0,(this)*s__TrigVariables_offsetSize+s__TrigVariables_offsetstring+(i)+2)
set i=k
endloop
endfunction
function s__TrigVariables_LinkedVariables_string__onInit takes nothing returns nothing
call s__TrigVariables_addFuncForVoid(function s__TrigVariables_setVoidstring)
endfunction
function s__TrigVariables_Setbooleans takes integer this,integer arr,integer i,boolean x returns nothing
if arr==s__TrigVariables_A then
set s__TPTTSLinkedVariablesArray__abooleansA[s__TrigVariables_booleansA[this]+i]=x
elseif arr==s__TrigVariables_B then
set s__TPTTSLinkedVariablesArray__abooleansB[s__TrigVariables_booleansB[this]+i]=x
elseif arr==s__TrigVariables_C then
set s__TPTTSLinkedVariablesArray__abooleansC[s__TrigVariables_booleansC[this]+i]=x
elseif arr==s__TrigVariables_D then
set s__TPTTSLinkedVariablesArray__abooleansD[s__TrigVariables_booleansD[this]+i]=x
elseif arr==s__TrigVariables_E then
set s__TPTTSLinkedVariablesArray__abooleansE[s__TrigVariables_booleansE[this]+i]=x
elseif arr==s__TrigVariables_F then
set s__TPTTSLinkedVariablesArray__abooleansF[s__TrigVariables_booleansF[this]+i]=x
endif
endfunction
function s__TrigVariables_Getbooleans takes integer this,integer arr,integer i returns boolean
if arr==s__TrigVariables_A then
return s__TPTTSLinkedVariablesArray__abooleansA[s__TrigVariables_booleansA[this]+i]
elseif arr==s__TrigVariables_B then
return s__TPTTSLinkedVariablesArray__abooleansB[s__TrigVariables_booleansB[this]+i]
elseif arr==s__TrigVariables_C then
return s__TPTTSLinkedVariablesArray__abooleansC[s__TrigVariables_booleansC[this]+i]
elseif arr==s__TrigVariables_D then
return s__TPTTSLinkedVariablesArray__abooleansD[s__TrigVariables_booleansD[this]+i]
elseif arr==s__TrigVariables_E then
return s__TPTTSLinkedVariablesArray__abooleansE[s__TrigVariables_booleansE[this]+i]
elseif arr==s__TrigVariables_F then
return s__TPTTSLinkedVariablesArray__abooleansF[s__TrigVariables_booleansF[this]+i]
else
return false
endif
endfunction
function s__TrigVariables_Setintegers takes integer this,integer arr,integer i,integer x returns nothing
if arr==s__TrigVariables_A then
set s__TPTTSLinkedVariablesArray__aintegersA[s__TrigVariables_integersA[this]+i]=x
elseif arr==s__TrigVariables_B then
set s__TPTTSLinkedVariablesArray__aintegersB[s__TrigVariables_integersB[this]+i]=x
elseif arr==s__TrigVariables_C then
set s__TPTTSLinkedVariablesArray__aintegersC[s__TrigVariables_integersC[this]+i]=x
elseif arr==s__TrigVariables_D then
set s__TPTTSLinkedVariablesArray__aintegersD[s__TrigVariables_integersD[this]+i]=x
elseif arr==s__TrigVariables_E then
set s__TPTTSLinkedVariablesArray__aintegersE[s__TrigVariables_integersE[this]+i]=x
elseif arr==s__TrigVariables_F then
set s__TPTTSLinkedVariablesArray__aintegersF[s__TrigVariables_integersF[this]+i]=x
endif
endfunction
function s__TrigVariables_Getintegers takes integer this,integer arr,integer i returns integer
if arr==s__TrigVariables_A then
return s__TPTTSLinkedVariablesArray__aintegersA[s__TrigVariables_integersA[this]+i]
elseif arr==s__TrigVariables_B then
return s__TPTTSLinkedVariablesArray__aintegersB[s__TrigVariables_integersB[this]+i]
elseif arr==s__TrigVariables_C then
return s__TPTTSLinkedVariablesArray__aintegersC[s__TrigVariables_integersC[this]+i]
elseif arr==s__TrigVariables_D then
return s__TPTTSLinkedVariablesArray__aintegersD[s__TrigVariables_integersD[this]+i]
elseif arr==s__TrigVariables_E then
return s__TPTTSLinkedVariablesArray__aintegersE[s__TrigVariables_integersE[this]+i]
elseif arr==s__TrigVariables_F then
return s__TPTTSLinkedVariablesArray__aintegersF[s__TrigVariables_integersF[this]+i]
else
return 0
endif
endfunction
function s__TrigVariables_Setlocations takes integer this,integer arr,integer i,location x returns nothing
if arr==s__TrigVariables_A then
set s__TPTTSLinkedVariablesArray__alocationsA[s__TrigVariables_locationsA[this]+i]=x
elseif arr==s__TrigVariables_B then
set s__TPTTSLinkedVariablesArray__alocationsB[s__TrigVariables_locationsB[this]+i]=x
elseif arr==s__TrigVariables_C then
set s__TPTTSLinkedVariablesArray__alocationsC[s__TrigVariables_locationsC[this]+i]=x
elseif arr==s__TrigVariables_D then
set s__TPTTSLinkedVariablesArray__alocationsD[s__TrigVariables_locationsD[this]+i]=x
elseif arr==s__TrigVariables_E then
set s__TPTTSLinkedVariablesArray__alocationsE[s__TrigVariables_locationsE[this]+i]=x
elseif arr==s__TrigVariables_F then
set s__TPTTSLinkedVariablesArray__alocationsF[s__TrigVariables_locationsF[this]+i]=x
endif
endfunction
function s__TrigVariables_Getlocations takes integer this,integer arr,integer i returns location
if arr==s__TrigVariables_A then
return s__TPTTSLinkedVariablesArray__alocationsA[s__TrigVariables_locationsA[this]+i]
elseif arr==s__TrigVariables_B then
return s__TPTTSLinkedVariablesArray__alocationsB[s__TrigVariables_locationsB[this]+i]
elseif arr==s__TrigVariables_C then
return s__TPTTSLinkedVariablesArray__alocationsC[s__TrigVariables_locationsC[this]+i]
elseif arr==s__TrigVariables_D then
return s__TPTTSLinkedVariablesArray__alocationsD[s__TrigVariables_locationsD[this]+i]
elseif arr==s__TrigVariables_E then
return s__TPTTSLinkedVariablesArray__alocationsE[s__TrigVariables_locationsE[this]+i]
elseif arr==s__TrigVariables_F then
return s__TPTTSLinkedVariablesArray__alocationsF[s__TrigVariables_locationsF[this]+i]
else
return null
endif
endfunction
function s__TrigVariables_Setlightnings takes integer this,integer arr,integer i,lightning x returns nothing
if arr==s__TrigVariables_A then
set s__TPTTSLinkedVariablesArray__alightningsA[s__TrigVariables_lightningsA[this]+i]=x
elseif arr==s__TrigVariables_B then
set s__TPTTSLinkedVariablesArray__alightningsB[s__TrigVariables_lightningsB[this]+i]=x
elseif arr==s__TrigVariables_C then
set s__TPTTSLinkedVariablesArray__alightningsC[s__TrigVariables_lightningsC[this]+i]=x
elseif arr==s__TrigVariables_D then
set s__TPTTSLinkedVariablesArray__alightningsD[s__TrigVariables_lightningsD[this]+i]=x
elseif arr==s__TrigVariables_E then
set s__TPTTSLinkedVariablesArray__alightningsE[s__TrigVariables_lightningsE[this]+i]=x
elseif arr==s__TrigVariables_F then
set s__TPTTSLinkedVariablesArray__alightningsF[s__TrigVariables_lightningsF[this]+i]=x
endif
endfunction
function s__TrigVariables_Getlightnings takes integer this,integer arr,integer i returns lightning
if arr==s__TrigVariables_A then
return s__TPTTSLinkedVariablesArray__alightningsA[s__TrigVariables_lightningsA[this]+i]
elseif arr==s__TrigVariables_B then
return s__TPTTSLinkedVariablesArray__alightningsB[s__TrigVariables_lightningsB[this]+i]
elseif arr==s__TrigVariables_C then
return s__TPTTSLinkedVariablesArray__alightningsC[s__TrigVariables_lightningsC[this]+i]
elseif arr==s__TrigVariables_D then
return s__TPTTSLinkedVariablesArray__alightningsD[s__TrigVariables_lightningsD[this]+i]
elseif arr==s__TrigVariables_E then
return s__TPTTSLinkedVariablesArray__alightningsE[s__TrigVariables_lightningsE[this]+i]
elseif arr==s__TrigVariables_F then
return s__TPTTSLinkedVariablesArray__alightningsF[s__TrigVariables_lightningsF[this]+i]
else
return null
endif
endfunction
function s__TrigVariables_Setreals takes integer this,integer arr,integer i,real x returns nothing
if arr==s__TrigVariables_A then
set s__TPTTSLinkedVariablesArray__arealsA[s__TrigVariables_realsA[this]+i]=x
elseif arr==s__TrigVariables_B then
set s__TPTTSLinkedVariablesArray__arealsB[s__TrigVariables_realsB[this]+i]=x
elseif arr==s__TrigVariables_C then
set s__TPTTSLinkedVariablesArray__arealsC[s__TrigVariables_realsC[this]+i]=x
elseif arr==s__TrigVariables_D then
set s__TPTTSLinkedVariablesArray__arealsD[s__TrigVariables_realsD[this]+i]=x
elseif arr==s__TrigVariables_E then
set s__TPTTSLinkedVariablesArray__arealsE[s__TrigVariables_realsE[this]+i]=x
elseif arr==s__TrigVariables_F then
set s__TPTTSLinkedVariablesArray__arealsF[s__TrigVariables_realsF[this]+i]=x
endif
endfunction
function s__TrigVariables_Getreals takes integer this,integer arr,integer i returns real
if arr==s__TrigVariables_A then
return s__TPTTSLinkedVariablesArray__arealsA[s__TrigVariables_realsA[this]+i]
elseif arr==s__TrigVariables_B then
return s__TPTTSLinkedVariablesArray__arealsB[s__TrigVariables_realsB[this]+i]
elseif arr==s__TrigVariables_C then
return s__TPTTSLinkedVariablesArray__arealsC[s__TrigVariables_realsC[this]+i]
elseif arr==s__TrigVariables_D then
return s__TPTTSLinkedVariablesArray__arealsD[s__TrigVariables_realsD[this]+i]
elseif arr==s__TrigVariables_E then
return s__TPTTSLinkedVariablesArray__arealsE[s__TrigVariables_realsE[this]+i]
elseif arr==s__TrigVariables_F then
return s__TPTTSLinkedVariablesArray__arealsF[s__TrigVariables_realsF[this]+i]
else
return 0.
endif
endfunction
function s__TrigVariables_Setunits takes integer this,integer arr,integer i,unit x returns nothing
if arr==s__TrigVariables_A then
set s__TPTTSLinkedVariablesArray__aunitsA[s__TrigVariables_unitsA[this]+i]=x
elseif arr==s__TrigVariables_B then
set s__TPTTSLinkedVariablesArray__aunitsB[s__TrigVariables_unitsB[this]+i]=x
elseif arr==s__TrigVariables_C then
set s__TPTTSLinkedVariablesArray__aunitsC[s__TrigVariables_unitsC[this]+i]=x
elseif arr==s__TrigVariables_D then
set s__TPTTSLinkedVariablesArray__aunitsD[s__TrigVariables_unitsD[this]+i]=x
elseif arr==s__TrigVariables_E then
set s__TPTTSLinkedVariablesArray__aunitsE[s__TrigVariables_unitsE[this]+i]=x
elseif arr==s__TrigVariables_F then
set s__TPTTSLinkedVariablesArray__aunitsF[s__TrigVariables_unitsF[this]+i]=x
endif
endfunction
function s__TrigVariables_Getunits takes integer this,integer arr,integer i returns unit
if arr==s__TrigVariables_A then
return s__TPTTSLinkedVariablesArray__aunitsA[s__TrigVariables_unitsA[this]+i]
elseif arr==s__TrigVariables_B then
return s__TPTTSLinkedVariablesArray__aunitsB[s__TrigVariables_unitsB[this]+i]
elseif arr==s__TrigVariables_C then
return s__TPTTSLinkedVariablesArray__aunitsC[s__TrigVariables_unitsC[this]+i]
elseif arr==s__TrigVariables_D then
return s__TPTTSLinkedVariablesArray__aunitsD[s__TrigVariables_unitsD[this]+i]
elseif arr==s__TrigVariables_E then
return s__TPTTSLinkedVariablesArray__aunitsE[s__TrigVariables_unitsE[this]+i]
elseif arr==s__TrigVariables_F then
return s__TPTTSLinkedVariablesArray__aunitsF[s__TrigVariables_unitsF[this]+i]
else
return null
endif
endfunction
function s__TrigVariables_Seteffects takes integer this,integer arr,integer i,effect x returns nothing
if arr==s__TrigVariables_A then
set s__TPTTSLinkedVariablesArray__aeffectsA[s__TrigVariables_effectsA[this]+i]=x
elseif arr==s__TrigVariables_B then
set s__TPTTSLinkedVariablesArray__aeffectsB[s__TrigVariables_effectsB[this]+i]=x
elseif arr==s__TrigVariables_C then
set s__TPTTSLinkedVariablesArray__aeffectsC[s__TrigVariables_effectsC[this]+i]=x
elseif arr==s__TrigVariables_D then
set s__TPTTSLinkedVariablesArray__aeffectsD[s__TrigVariables_effectsD[this]+i]=x
elseif arr==s__TrigVariables_E then
set s__TPTTSLinkedVariablesArray__aeffectsE[s__TrigVariables_effectsE[this]+i]=x
elseif arr==s__TrigVariables_F then
set s__TPTTSLinkedVariablesArray__aeffectsF[s__TrigVariables_effectsF[this]+i]=x
endif
endfunction
function s__TrigVariables_Geteffects takes integer this,integer arr,integer i returns effect
if arr==s__TrigVariables_A then
return s__TPTTSLinkedVariablesArray__aeffectsA[s__TrigVariables_effectsA[this]+i]
elseif arr==s__TrigVariables_B then
return s__TPTTSLinkedVariablesArray__aeffectsB[s__TrigVariables_effectsB[this]+i]
elseif arr==s__TrigVariables_C then
return s__TPTTSLinkedVariablesArray__aeffectsC[s__TrigVariables_effectsC[this]+i]
elseif arr==s__TrigVariables_D then
return s__TPTTSLinkedVariablesArray__aeffectsD[s__TrigVariables_effectsD[this]+i]
elseif arr==s__TrigVariables_E then
return s__TPTTSLinkedVariablesArray__aeffectsE[s__TrigVariables_effectsE[this]+i]
elseif arr==s__TrigVariables_F then
return s__TPTTSLinkedVariablesArray__aeffectsF[s__TrigVariables_effectsF[this]+i]
else
return null
endif
endfunction
function s__TrigVariables_Setplayers takes integer this,integer arr,integer i,player x returns nothing
if arr==s__TrigVariables_A then
set s__TPTTSLinkedVariablesArray__aplayersA[s__TrigVariables_playersA[this]+i]=x
elseif arr==s__TrigVariables_B then
set s__TPTTSLinkedVariablesArray__aplayersB[s__TrigVariables_playersB[this]+i]=x
elseif arr==s__TrigVariables_C then
set s__TPTTSLinkedVariablesArray__aplayersC[s__TrigVariables_playersC[this]+i]=x
elseif arr==s__TrigVariables_D then
set s__TPTTSLinkedVariablesArray__aplayersD[s__TrigVariables_playersD[this]+i]=x
elseif arr==s__TrigVariables_E then
set s__TPTTSLinkedVariablesArray__aplayersE[s__TrigVariables_playersE[this]+i]=x
elseif arr==s__TrigVariables_F then
set s__TPTTSLinkedVariablesArray__aplayersF[s__TrigVariables_playersF[this]+i]=x
endif
endfunction
function s__TrigVariables_Getplayers takes integer this,integer arr,integer i returns player
if arr==s__TrigVariables_A then
return s__TPTTSLinkedVariablesArray__aplayersA[s__TrigVariables_playersA[this]+i]
elseif arr==s__TrigVariables_B then
return s__TPTTSLinkedVariablesArray__aplayersB[s__TrigVariables_playersB[this]+i]
elseif arr==s__TrigVariables_C then
return s__TPTTSLinkedVariablesArray__aplayersC[s__TrigVariables_playersC[this]+i]
elseif arr==s__TrigVariables_D then
return s__TPTTSLinkedVariablesArray__aplayersD[s__TrigVariables_playersD[this]+i]
elseif arr==s__TrigVariables_E then
return s__TPTTSLinkedVariablesArray__aplayersE[s__TrigVariables_playersE[this]+i]
elseif arr==s__TrigVariables_F then
return s__TPTTSLinkedVariablesArray__aplayersF[s__TrigVariables_playersF[this]+i]
else
return null
endif
endfunction
function s__TrigVariables_Setforces takes integer this,integer arr,integer i,force x returns nothing
if arr==s__TrigVariables_A then
set s__TPTTSLinkedVariablesArray__aforcesA[s__TrigVariables_forcesA[this]+i]=x
elseif arr==s__TrigVariables_B then
set s__TPTTSLinkedVariablesArray__aforcesB[s__TrigVariables_forcesB[this]+i]=x
elseif arr==s__TrigVariables_C then
set s__TPTTSLinkedVariablesArray__aforcesC[s__TrigVariables_forcesC[this]+i]=x
elseif arr==s__TrigVariables_D then
set s__TPTTSLinkedVariablesArray__aforcesD[s__TrigVariables_forcesD[this]+i]=x
elseif arr==s__TrigVariables_E then
set s__TPTTSLinkedVariablesArray__aforcesE[s__TrigVariables_forcesE[this]+i]=x
elseif arr==s__TrigVariables_F then
set s__TPTTSLinkedVariablesArray__aforcesF[s__TrigVariables_forcesF[this]+i]=x
endif
endfunction
function s__TrigVariables_Getforces takes integer this,integer arr,integer i returns force
if arr==s__TrigVariables_A then
return s__TPTTSLinkedVariablesArray__aforcesA[s__TrigVariables_forcesA[this]+i]
elseif arr==s__TrigVariables_B then
return s__TPTTSLinkedVariablesArray__aforcesB[s__TrigVariables_forcesB[this]+i]
elseif arr==s__TrigVariables_C then
return s__TPTTSLinkedVariablesArray__aforcesC[s__TrigVariables_forcesC[this]+i]
elseif arr==s__TrigVariables_D then
return s__TPTTSLinkedVariablesArray__aforcesD[s__TrigVariables_forcesD[this]+i]
elseif arr==s__TrigVariables_E then
return s__TPTTSLinkedVariablesArray__aforcesE[s__TrigVariables_forcesE[this]+i]
elseif arr==s__TrigVariables_F then
return s__TPTTSLinkedVariablesArray__aforcesF[s__TrigVariables_forcesF[this]+i]
else
return null
endif
endfunction
function s__TrigVariables_Setgroups takes integer this,integer arr,integer i,group x returns nothing
if arr==s__TrigVariables_A then
set s__TPTTSLinkedVariablesArray__agroupsA[s__TrigVariables_groupsA[this]+i]=x
elseif arr==s__TrigVariables_B then
set s__TPTTSLinkedVariablesArray__agroupsB[s__TrigVariables_groupsB[this]+i]=x
elseif arr==s__TrigVariables_C then
set s__TPTTSLinkedVariablesArray__agroupsC[s__TrigVariables_groupsC[this]+i]=x
elseif arr==s__TrigVariables_D then
set s__TPTTSLinkedVariablesArray__agroupsD[s__TrigVariables_groupsD[this]+i]=x
elseif arr==s__TrigVariables_E then
set s__TPTTSLinkedVariablesArray__agroupsE[s__TrigVariables_groupsE[this]+i]=x
elseif arr==s__TrigVariables_F then
set s__TPTTSLinkedVariablesArray__agroupsF[s__TrigVariables_groupsF[this]+i]=x
endif
endfunction
function s__TrigVariables_Getgroups takes integer this,integer arr,integer i returns group
if arr==s__TrigVariables_A then
return s__TPTTSLinkedVariablesArray__agroupsA[s__TrigVariables_groupsA[this]+i]
elseif arr==s__TrigVariables_B then
return s__TPTTSLinkedVariablesArray__agroupsB[s__TrigVariables_groupsB[this]+i]
elseif arr==s__TrigVariables_C then
return s__TPTTSLinkedVariablesArray__agroupsC[s__TrigVariables_groupsC[this]+i]
elseif arr==s__TrigVariables_D then
return s__TPTTSLinkedVariablesArray__agroupsD[s__TrigVariables_groupsD[this]+i]
elseif arr==s__TrigVariables_E then
return s__TPTTSLinkedVariablesArray__agroupsE[s__TrigVariables_groupsE[this]+i]
elseif arr==s__TrigVariables_F then
return s__TPTTSLinkedVariablesArray__agroupsF[s__TrigVariables_groupsF[this]+i]
else
return null
endif
endfunction
function s__TrigVariables_Setitems takes integer this,integer arr,integer i,item x returns nothing
if arr==s__TrigVariables_A then
set s__TPTTSLinkedVariablesArray__aitemsA[s__TrigVariables_itemsA[this]+i]=x
elseif arr==s__TrigVariables_B then
set s__TPTTSLinkedVariablesArray__aitemsB[s__TrigVariables_itemsB[this]+i]=x
elseif arr==s__TrigVariables_C then
set s__TPTTSLinkedVariablesArray__aitemsC[s__TrigVariables_itemsC[this]+i]=x
elseif arr==s__TrigVariables_D then
set s__TPTTSLinkedVariablesArray__aitemsD[s__TrigVariables_itemsD[this]+i]=x
elseif arr==s__TrigVariables_E then
set s__TPTTSLinkedVariablesArray__aitemsE[s__TrigVariables_itemsE[this]+i]=x
elseif arr==s__TrigVariables_F then
set s__TPTTSLinkedVariablesArray__aitemsF[s__TrigVariables_itemsF[this]+i]=x
endif
endfunction
function s__TrigVariables_Getitems takes integer this,integer arr,integer i returns item
if arr==s__TrigVariables_A then
return s__TPTTSLinkedVariablesArray__aitemsA[s__TrigVariables_itemsA[this]+i]
elseif arr==s__TrigVariables_B then
return s__TPTTSLinkedVariablesArray__aitemsB[s__TrigVariables_itemsB[this]+i]
elseif arr==s__TrigVariables_C then
return s__TPTTSLinkedVariablesArray__aitemsC[s__TrigVariables_itemsC[this]+i]
elseif arr==s__TrigVariables_D then
return s__TPTTSLinkedVariablesArray__aitemsD[s__TrigVariables_itemsD[this]+i]
elseif arr==s__TrigVariables_E then
return s__TPTTSLinkedVariablesArray__aitemsE[s__TrigVariables_itemsE[this]+i]
elseif arr==s__TrigVariables_F then
return s__TPTTSLinkedVariablesArray__aitemsF[s__TrigVariables_itemsF[this]+i]
else
return null
endif
endfunction
function s__TrigVariables_Settimers takes integer this,integer arr,integer i,timer x returns nothing
if arr==s__TrigVariables_A then
set s__TPTTSLinkedVariablesArray__atimersA[s__TrigVariables_timersA[this]+i]=x
elseif arr==s__TrigVariables_B then
set s__TPTTSLinkedVariablesArray__atimersB[s__TrigVariables_timersB[this]+i]=x
elseif arr==s__TrigVariables_C then
set s__TPTTSLinkedVariablesArray__atimersC[s__TrigVariables_timersC[this]+i]=x
elseif arr==s__TrigVariables_D then
set s__TPTTSLinkedVariablesArray__atimersD[s__TrigVariables_timersD[this]+i]=x
elseif arr==s__TrigVariables_E then
set s__TPTTSLinkedVariablesArray__atimersE[s__TrigVariables_timersE[this]+i]=x
elseif arr==s__TrigVariables_F then
set s__TPTTSLinkedVariablesArray__atimersF[s__TrigVariables_timersF[this]+i]=x
endif
endfunction
function s__TrigVariables_Gettimers takes integer this,integer arr,integer i returns timer
if arr==s__TrigVariables_A then
return s__TPTTSLinkedVariablesArray__atimersA[s__TrigVariables_timersA[this]+i]
elseif arr==s__TrigVariables_B then
return s__TPTTSLinkedVariablesArray__atimersB[s__TrigVariables_timersB[this]+i]
elseif arr==s__TrigVariables_C then
return s__TPTTSLinkedVariablesArray__atimersC[s__TrigVariables_timersC[this]+i]
elseif arr==s__TrigVariables_D then
return s__TPTTSLinkedVariablesArray__atimersD[s__TrigVariables_timersD[this]+i]
elseif arr==s__TrigVariables_E then
return s__TPTTSLinkedVariablesArray__atimersE[s__TrigVariables_timersE[this]+i]
elseif arr==s__TrigVariables_F then
return s__TPTTSLinkedVariablesArray__atimersF[s__TrigVariables_timersF[this]+i]
else
return null
endif
endfunction
function s__TrigVariables_SetlocationsAutoRemove takes integer this,integer arr,integer i,location x returns nothing
if arr==s__TrigVariables_A then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsA[s__TrigVariables_locationsA[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsA[s__TrigVariables_locationsA[this]+i]=x
elseif arr==s__TrigVariables_B then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsB[s__TrigVariables_locationsB[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsB[s__TrigVariables_locationsB[this]+i]=x
elseif arr==s__TrigVariables_C then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsC[s__TrigVariables_locationsC[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsC[s__TrigVariables_locationsC[this]+i]=x
elseif arr==s__TrigVariables_D then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsD[s__TrigVariables_locationsD[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsD[s__TrigVariables_locationsD[this]+i]=x
elseif arr==s__TrigVariables_E then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsE[s__TrigVariables_locationsE[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsE[s__TrigVariables_locationsE[this]+i]=x
elseif arr==s__TrigVariables_F then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsF[s__TrigVariables_locationsF[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsF[s__TrigVariables_locationsF[this]+i]=x
endif
endfunction
function s__TrigVariables_FlushAvars takes integer this returns nothing
local integer i=0
if not s__TrigVariables_INUSE_Avar[this]then
return
endif
loop
if s__TPTTSLinkedVariablesArray__alocationsA[s__TrigVariables_locationsA[this]+i]!=null then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsA[s__TrigVariables_locationsA[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsA[s__TrigVariables_locationsA[this]+i]=null
endif
if s__TPTTSLinkedVariablesArray__alocationsB[s__TrigVariables_locationsB[this]+i]!=null then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsB[s__TrigVariables_locationsB[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsB[s__TrigVariables_locationsB[this]+i]=null
endif
if s__TPTTSLinkedVariablesArray__alocationsC[s__TrigVariables_locationsC[this]+i]!=null then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsC[s__TrigVariables_locationsC[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsC[s__TrigVariables_locationsC[this]+i]=null
endif
if s__TPTTSLinkedVariablesArray__alocationsD[s__TrigVariables_locationsD[this]+i]!=null then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsD[s__TrigVariables_locationsD[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsD[s__TrigVariables_locationsD[this]+i]=null
endif
if s__TPTTSLinkedVariablesArray__alocationsE[s__TrigVariables_locationsE[this]+i]!=null then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsE[s__TrigVariables_locationsE[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsE[s__TrigVariables_locationsE[this]+i]=null
endif
if s__TPTTSLinkedVariablesArray__alocationsF[s__TrigVariables_locationsF[this]+i]!=null then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsF[s__TrigVariables_locationsF[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsF[s__TrigVariables_locationsF[this]+i]=null
endif
set s__TPTTSLinkedVariablesArray__abooleansA[s__TrigVariables_booleansA[this]+i]=false
set s__TPTTSLinkedVariablesArray__abooleansB[s__TrigVariables_booleansB[this]+i]=false
set s__TPTTSLinkedVariablesArray__abooleansC[s__TrigVariables_booleansC[this]+i]=false
set s__TPTTSLinkedVariablesArray__abooleansD[s__TrigVariables_booleansD[this]+i]=false
set s__TPTTSLinkedVariablesArray__abooleansE[s__TrigVariables_booleansE[this]+i]=false
set s__TPTTSLinkedVariablesArray__abooleansF[s__TrigVariables_booleansF[this]+i]=false
set s__TPTTSLinkedVariablesArray__aintegersA[s__TrigVariables_integersA[this]+i]=0
set s__TPTTSLinkedVariablesArray__aintegersB[s__TrigVariables_integersB[this]+i]=0
set s__TPTTSLinkedVariablesArray__aintegersC[s__TrigVariables_integersC[this]+i]=0
set s__TPTTSLinkedVariablesArray__aintegersD[s__TrigVariables_integersD[this]+i]=0
set s__TPTTSLinkedVariablesArray__aintegersE[s__TrigVariables_integersE[this]+i]=0
set s__TPTTSLinkedVariablesArray__aintegersF[s__TrigVariables_integersF[this]+i]=0
set s__TPTTSLinkedVariablesArray__arealsA[s__TrigVariables_realsA[this]+i]=0.
set s__TPTTSLinkedVariablesArray__arealsB[s__TrigVariables_realsB[this]+i]=0.
set s__TPTTSLinkedVariablesArray__arealsC[s__TrigVariables_realsC[this]+i]=0.
set s__TPTTSLinkedVariablesArray__arealsD[s__TrigVariables_realsD[this]+i]=0.
set s__TPTTSLinkedVariablesArray__arealsE[s__TrigVariables_realsE[this]+i]=0.
set s__TPTTSLinkedVariablesArray__arealsF[s__TrigVariables_realsF[this]+i]=0.
set s__TPTTSLinkedVariablesArray__aunitsA[s__TrigVariables_unitsA[this]+i]=null
set s__TPTTSLinkedVariablesArray__aunitsB[s__TrigVariables_unitsB[this]+i]=null
set s__TPTTSLinkedVariablesArray__aunitsC[s__TrigVariables_unitsC[this]+i]=null
set s__TPTTSLinkedVariablesArray__aunitsD[s__TrigVariables_unitsD[this]+i]=null
set s__TPTTSLinkedVariablesArray__aunitsE[s__TrigVariables_unitsE[this]+i]=null
set s__TPTTSLinkedVariablesArray__aunitsF[s__TrigVariables_unitsF[this]+i]=null
set s__TPTTSLinkedVariablesArray__aeffectsA[s__TrigVariables_effectsA[this]+i]=null
set s__TPTTSLinkedVariablesArray__aeffectsB[s__TrigVariables_effectsB[this]+i]=null
set s__TPTTSLinkedVariablesArray__aeffectsC[s__TrigVariables_effectsC[this]+i]=null
set s__TPTTSLinkedVariablesArray__aeffectsD[s__TrigVariables_effectsD[this]+i]=null
set s__TPTTSLinkedVariablesArray__aeffectsE[s__TrigVariables_effectsE[this]+i]=null
set s__TPTTSLinkedVariablesArray__aeffectsF[s__TrigVariables_effectsF[this]+i]=null
set s__TPTTSLinkedVariablesArray__alightningsA[s__TrigVariables_lightningsA[this]+i]=null
set s__TPTTSLinkedVariablesArray__alightningsB[s__TrigVariables_lightningsB[this]+i]=null
set s__TPTTSLinkedVariablesArray__alightningsC[s__TrigVariables_lightningsC[this]+i]=null
set s__TPTTSLinkedVariablesArray__alightningsD[s__TrigVariables_lightningsD[this]+i]=null
set s__TPTTSLinkedVariablesArray__alightningsE[s__TrigVariables_lightningsE[this]+i]=null
set s__TPTTSLinkedVariablesArray__alightningsF[s__TrigVariables_lightningsF[this]+i]=null
set s__TPTTSLinkedVariablesArray__aplayersA[s__TrigVariables_playersA[this]+i]=null
set s__TPTTSLinkedVariablesArray__aplayersB[s__TrigVariables_playersB[this]+i]=null
set s__TPTTSLinkedVariablesArray__aplayersC[s__TrigVariables_playersC[this]+i]=null
set s__TPTTSLinkedVariablesArray__aplayersD[s__TrigVariables_playersD[this]+i]=null
set s__TPTTSLinkedVariablesArray__aplayersE[s__TrigVariables_playersE[this]+i]=null
set s__TPTTSLinkedVariablesArray__aplayersF[s__TrigVariables_playersF[this]+i]=null
set s__TPTTSLinkedVariablesArray__aforcesA[s__TrigVariables_forcesA[this]+i]=null
set s__TPTTSLinkedVariablesArray__aforcesB[s__TrigVariables_forcesB[this]+i]=null
set s__TPTTSLinkedVariablesArray__aforcesC[s__TrigVariables_forcesC[this]+i]=null
set s__TPTTSLinkedVariablesArray__aforcesD[s__TrigVariables_forcesD[this]+i]=null
set s__TPTTSLinkedVariablesArray__aforcesE[s__TrigVariables_forcesE[this]+i]=null
set s__TPTTSLinkedVariablesArray__aforcesF[s__TrigVariables_forcesF[this]+i]=null
set s__TPTTSLinkedVariablesArray__agroupsA[s__TrigVariables_groupsA[this]+i]=null
set s__TPTTSLinkedVariablesArray__agroupsB[s__TrigVariables_groupsB[this]+i]=null
set s__TPTTSLinkedVariablesArray__agroupsC[s__TrigVariables_groupsC[this]+i]=null
set s__TPTTSLinkedVariablesArray__agroupsD[s__TrigVariables_groupsD[this]+i]=null
set s__TPTTSLinkedVariablesArray__agroupsE[s__TrigVariables_groupsE[this]+i]=null
set s__TPTTSLinkedVariablesArray__agroupsF[s__TrigVariables_groupsF[this]+i]=null
set s__TPTTSLinkedVariablesArray__aitemsA[s__TrigVariables_itemsA[this]+i]=null
set s__TPTTSLinkedVariablesArray__aitemsB[s__TrigVariables_itemsB[this]+i]=null
set s__TPTTSLinkedVariablesArray__aitemsC[s__TrigVariables_itemsC[this]+i]=null
set s__TPTTSLinkedVariablesArray__aitemsD[s__TrigVariables_itemsD[this]+i]=null
set s__TPTTSLinkedVariablesArray__aitemsE[s__TrigVariables_itemsE[this]+i]=null
set s__TPTTSLinkedVariablesArray__aitemsF[s__TrigVariables_itemsF[this]+i]=null
set s__TPTTSLinkedVariablesArray__atimersA[s__TrigVariables_timersA[this]+i]=null
set s__TPTTSLinkedVariablesArray__atimersB[s__TrigVariables_timersB[this]+i]=null
set s__TPTTSLinkedVariablesArray__atimersC[s__TrigVariables_timersC[this]+i]=null
set s__TPTTSLinkedVariablesArray__atimersD[s__TrigVariables_timersD[this]+i]=null
set s__TPTTSLinkedVariablesArray__atimersE[s__TrigVariables_timersE[this]+i]=null
set s__TPTTSLinkedVariablesArray__atimersF[s__TrigVariables_timersF[this]+i]=null
set i=i+1
exitwhen i>=TPTTSLinkedVariablesArray__ARRAY_MAX
endloop
call s__TPTTSLinkedVariablesArray__abooleansA_deallocate(s__TrigVariables_booleansA[this])
call s__TPTTSLinkedVariablesArray__abooleansB_deallocate(s__TrigVariables_booleansB[this])
call s__TPTTSLinkedVariablesArray__abooleansC_deallocate(s__TrigVariables_booleansC[this])
call s__TPTTSLinkedVariablesArray__abooleansD_deallocate(s__TrigVariables_booleansD[this])
call s__TPTTSLinkedVariablesArray__abooleansE_deallocate(s__TrigVariables_booleansE[this])
call s__TPTTSLinkedVariablesArray__abooleansF_deallocate(s__TrigVariables_booleansF[this])
call s__TPTTSLinkedVariablesArray__aintegersA_deallocate(s__TrigVariables_integersA[this])
call s__TPTTSLinkedVariablesArray__aintegersB_deallocate(s__TrigVariables_integersB[this])
call s__TPTTSLinkedVariablesArray__aintegersC_deallocate(s__TrigVariables_integersC[this])
call s__TPTTSLinkedVariablesArray__aintegersD_deallocate(s__TrigVariables_integersD[this])
call s__TPTTSLinkedVariablesArray__aintegersE_deallocate(s__TrigVariables_integersE[this])
call s__TPTTSLinkedVariablesArray__aintegersF_deallocate(s__TrigVariables_integersF[this])
call s__TPTTSLinkedVariablesArray__arealsA_deallocate(s__TrigVariables_realsA[this])
call s__TPTTSLinkedVariablesArray__arealsB_deallocate(s__TrigVariables_realsB[this])
call s__TPTTSLinkedVariablesArray__arealsC_deallocate(s__TrigVariables_realsC[this])
call s__TPTTSLinkedVariablesArray__arealsD_deallocate(s__TrigVariables_realsD[this])
call s__TPTTSLinkedVariablesArray__arealsE_deallocate(s__TrigVariables_realsE[this])
call s__TPTTSLinkedVariablesArray__arealsF_deallocate(s__TrigVariables_realsF[this])
call s__TPTTSLinkedVariablesArray__alocationsA_deallocate(s__TrigVariables_locationsA[this])
call s__TPTTSLinkedVariablesArray__alocationsB_deallocate(s__TrigVariables_locationsB[this])
call s__TPTTSLinkedVariablesArray__alocationsC_deallocate(s__TrigVariables_locationsC[this])
call s__TPTTSLinkedVariablesArray__alocationsD_deallocate(s__TrigVariables_locationsD[this])
call s__TPTTSLinkedVariablesArray__alocationsE_deallocate(s__TrigVariables_locationsE[this])
call s__TPTTSLinkedVariablesArray__alocationsF_deallocate(s__TrigVariables_locationsF[this])
call s__TPTTSLinkedVariablesArray__aunitsA_deallocate(s__TrigVariables_unitsA[this])
call s__TPTTSLinkedVariablesArray__aunitsB_deallocate(s__TrigVariables_unitsB[this])
call s__TPTTSLinkedVariablesArray__aunitsC_deallocate(s__TrigVariables_unitsC[this])
call s__TPTTSLinkedVariablesArray__aunitsD_deallocate(s__TrigVariables_unitsD[this])
call s__TPTTSLinkedVariablesArray__aunitsE_deallocate(s__TrigVariables_unitsE[this])
call s__TPTTSLinkedVariablesArray__aunitsF_deallocate(s__TrigVariables_unitsF[this])
call s__TPTTSLinkedVariablesArray__aeffectsA_deallocate(s__TrigVariables_effectsA[this])
call s__TPTTSLinkedVariablesArray__aeffectsB_deallocate(s__TrigVariables_effectsB[this])
call s__TPTTSLinkedVariablesArray__aeffectsC_deallocate(s__TrigVariables_effectsC[this])
call s__TPTTSLinkedVariablesArray__aeffectsD_deallocate(s__TrigVariables_effectsD[this])
call s__TPTTSLinkedVariablesArray__aeffectsE_deallocate(s__TrigVariables_effectsE[this])
call s__TPTTSLinkedVariablesArray__aeffectsF_deallocate(s__TrigVariables_effectsF[this])
call s__TPTTSLinkedVariablesArray__alightningsA_deallocate(s__TrigVariables_lightningsA[this])
call s__TPTTSLinkedVariablesArray__alightningsB_deallocate(s__TrigVariables_lightningsB[this])
call s__TPTTSLinkedVariablesArray__alightningsC_deallocate(s__TrigVariables_lightningsC[this])
call s__TPTTSLinkedVariablesArray__alightningsD_deallocate(s__TrigVariables_lightningsD[this])
call s__TPTTSLinkedVariablesArray__alightningsE_deallocate(s__TrigVariables_lightningsE[this])
call s__TPTTSLinkedVariablesArray__alightningsF_deallocate(s__TrigVariables_lightningsF[this])
call s__TPTTSLinkedVariablesArray__aplayersA_deallocate(s__TrigVariables_playersA[this])
call s__TPTTSLinkedVariablesArray__aplayersB_deallocate(s__TrigVariables_playersB[this])
call s__TPTTSLinkedVariablesArray__aplayersC_deallocate(s__TrigVariables_playersC[this])
call s__TPTTSLinkedVariablesArray__aplayersD_deallocate(s__TrigVariables_playersD[this])
call s__TPTTSLinkedVariablesArray__aplayersE_deallocate(s__TrigVariables_playersE[this])
call s__TPTTSLinkedVariablesArray__aplayersF_deallocate(s__TrigVariables_playersF[this])
call s__TPTTSLinkedVariablesArray__aforcesA_deallocate(s__TrigVariables_forcesA[this])
call s__TPTTSLinkedVariablesArray__aforcesB_deallocate(s__TrigVariables_forcesB[this])
call s__TPTTSLinkedVariablesArray__aforcesC_deallocate(s__TrigVariables_forcesC[this])
call s__TPTTSLinkedVariablesArray__aforcesD_deallocate(s__TrigVariables_forcesD[this])
call s__TPTTSLinkedVariablesArray__aforcesE_deallocate(s__TrigVariables_forcesE[this])
call s__TPTTSLinkedVariablesArray__aforcesF_deallocate(s__TrigVariables_forcesF[this])
call s__TPTTSLinkedVariablesArray__agroupsA_deallocate(s__TrigVariables_groupsA[this])
call s__TPTTSLinkedVariablesArray__agroupsB_deallocate(s__TrigVariables_groupsB[this])
call s__TPTTSLinkedVariablesArray__agroupsC_deallocate(s__TrigVariables_groupsC[this])
call s__TPTTSLinkedVariablesArray__agroupsD_deallocate(s__TrigVariables_groupsD[this])
call s__TPTTSLinkedVariablesArray__agroupsE_deallocate(s__TrigVariables_groupsE[this])
call s__TPTTSLinkedVariablesArray__agroupsF_deallocate(s__TrigVariables_groupsF[this])
call s__TPTTSLinkedVariablesArray__aitemsA_deallocate(s__TrigVariables_itemsA[this])
call s__TPTTSLinkedVariablesArray__aitemsB_deallocate(s__TrigVariables_itemsB[this])
call s__TPTTSLinkedVariablesArray__aitemsC_deallocate(s__TrigVariables_itemsC[this])
call s__TPTTSLinkedVariablesArray__aitemsD_deallocate(s__TrigVariables_itemsD[this])
call s__TPTTSLinkedVariablesArray__aitemsE_deallocate(s__TrigVariables_itemsE[this])
call s__TPTTSLinkedVariablesArray__aitemsF_deallocate(s__TrigVariables_itemsF[this])
call s__TPTTSLinkedVariablesArray__atimersA_deallocate(s__TrigVariables_timersA[this])
call s__TPTTSLinkedVariablesArray__atimersB_deallocate(s__TrigVariables_timersB[this])
call s__TPTTSLinkedVariablesArray__atimersC_deallocate(s__TrigVariables_timersC[this])
call s__TPTTSLinkedVariablesArray__atimersD_deallocate(s__TrigVariables_timersD[this])
call s__TPTTSLinkedVariablesArray__atimersE_deallocate(s__TrigVariables_timersE[this])
call s__TPTTSLinkedVariablesArray__atimersF_deallocate(s__TrigVariables_timersF[this])
endfunction
function s__TrigVariables_InitAvars takes integer this returns nothing
if s__TrigVariables_INUSE_Avar[this]then
return
endif
set s__TrigVariables_booleansA[this]=s__TPTTSLinkedVariablesArray__abooleansA__allocate()
set s__TrigVariables_booleansB[this]=s__TPTTSLinkedVariablesArray__abooleansB__allocate()
set s__TrigVariables_booleansC[this]=s__TPTTSLinkedVariablesArray__abooleansC__allocate()
set s__TrigVariables_booleansD[this]=s__TPTTSLinkedVariablesArray__abooleansD__allocate()
set s__TrigVariables_booleansE[this]=s__TPTTSLinkedVariablesArray__abooleansE__allocate()
set s__TrigVariables_booleansF[this]=s__TPTTSLinkedVariablesArray__abooleansF__allocate()
set s__TrigVariables_integersA[this]=s__TPTTSLinkedVariablesArray__aintegersA__allocate()
set s__TrigVariables_integersB[this]=s__TPTTSLinkedVariablesArray__aintegersB__allocate()
set s__TrigVariables_integersC[this]=s__TPTTSLinkedVariablesArray__aintegersC__allocate()
set s__TrigVariables_integersD[this]=s__TPTTSLinkedVariablesArray__aintegersD__allocate()
set s__TrigVariables_integersE[this]=s__TPTTSLinkedVariablesArray__aintegersE__allocate()
set s__TrigVariables_integersF[this]=s__TPTTSLinkedVariablesArray__aintegersF__allocate()
set s__TrigVariables_realsA[this]=s__TPTTSLinkedVariablesArray__arealsA__allocate()
set s__TrigVariables_realsB[this]=s__TPTTSLinkedVariablesArray__arealsB__allocate()
set s__TrigVariables_realsC[this]=s__TPTTSLinkedVariablesArray__arealsC__allocate()
set s__TrigVariables_realsD[this]=s__TPTTSLinkedVariablesArray__arealsD__allocate()
set s__TrigVariables_realsE[this]=s__TPTTSLinkedVariablesArray__arealsE__allocate()
set s__TrigVariables_realsF[this]=s__TPTTSLinkedVariablesArray__arealsF__allocate()
set s__TrigVariables_locationsA[this]=s__TPTTSLinkedVariablesArray__alocationsA__allocate()
set s__TrigVariables_locationsB[this]=s__TPTTSLinkedVariablesArray__alocationsB__allocate()
set s__TrigVariables_locationsC[this]=s__TPTTSLinkedVariablesArray__alocationsC__allocate()
set s__TrigVariables_locationsD[this]=s__TPTTSLinkedVariablesArray__alocationsD__allocate()
set s__TrigVariables_locationsE[this]=s__TPTTSLinkedVariablesArray__alocationsE__allocate()
set s__TrigVariables_locationsF[this]=s__TPTTSLinkedVariablesArray__alocationsF__allocate()
set s__TrigVariables_unitsA[this]=s__TPTTSLinkedVariablesArray__aunitsA__allocate()
set s__TrigVariables_unitsB[this]=s__TPTTSLinkedVariablesArray__aunitsB__allocate()
set s__TrigVariables_unitsC[this]=s__TPTTSLinkedVariablesArray__aunitsC__allocate()
set s__TrigVariables_unitsD[this]=s__TPTTSLinkedVariablesArray__aunitsD__allocate()
set s__TrigVariables_unitsE[this]=s__TPTTSLinkedVariablesArray__aunitsE__allocate()
set s__TrigVariables_unitsF[this]=s__TPTTSLinkedVariablesArray__aunitsF__allocate()
set s__TrigVariables_effectsA[this]=s__TPTTSLinkedVariablesArray__aeffectsA__allocate()
set s__TrigVariables_effectsB[this]=s__TPTTSLinkedVariablesArray__aeffectsB__allocate()
set s__TrigVariables_effectsC[this]=s__TPTTSLinkedVariablesArray__aeffectsC__allocate()
set s__TrigVariables_effectsD[this]=s__TPTTSLinkedVariablesArray__aeffectsD__allocate()
set s__TrigVariables_effectsE[this]=s__TPTTSLinkedVariablesArray__aeffectsE__allocate()
set s__TrigVariables_effectsF[this]=s__TPTTSLinkedVariablesArray__aeffectsF__allocate()
set s__TrigVariables_lightningsA[this]=s__TPTTSLinkedVariablesArray__alightningsA__allocate()
set s__TrigVariables_lightningsB[this]=s__TPTTSLinkedVariablesArray__alightningsB__allocate()
set s__TrigVariables_lightningsC[this]=s__TPTTSLinkedVariablesArray__alightningsC__allocate()
set s__TrigVariables_lightningsD[this]=s__TPTTSLinkedVariablesArray__alightningsD__allocate()
set s__TrigVariables_lightningsE[this]=s__TPTTSLinkedVariablesArray__alightningsE__allocate()
set s__TrigVariables_lightningsF[this]=s__TPTTSLinkedVariablesArray__alightningsF__allocate()
set s__TrigVariables_playersA[this]=s__TPTTSLinkedVariablesArray__aplayersA__allocate()
set s__TrigVariables_playersB[this]=s__TPTTSLinkedVariablesArray__aplayersB__allocate()
set s__TrigVariables_playersC[this]=s__TPTTSLinkedVariablesArray__aplayersC__allocate()
set s__TrigVariables_playersD[this]=s__TPTTSLinkedVariablesArray__aplayersD__allocate()
set s__TrigVariables_playersE[this]=s__TPTTSLinkedVariablesArray__aplayersE__allocate()
set s__TrigVariables_playersF[this]=s__TPTTSLinkedVariablesArray__aplayersF__allocate()
set s__TrigVariables_forcesA[this]=s__TPTTSLinkedVariablesArray__aforcesA__allocate()
set s__TrigVariables_forcesB[this]=s__TPTTSLinkedVariablesArray__aforcesB__allocate()
set s__TrigVariables_forcesC[this]=s__TPTTSLinkedVariablesArray__aforcesC__allocate()
set s__TrigVariables_forcesD[this]=s__TPTTSLinkedVariablesArray__aforcesD__allocate()
set s__TrigVariables_forcesE[this]=s__TPTTSLinkedVariablesArray__aforcesE__allocate()
set s__TrigVariables_forcesF[this]=s__TPTTSLinkedVariablesArray__aforcesF__allocate()
set s__TrigVariables_groupsA[this]=s__TPTTSLinkedVariablesArray__agroupsA__allocate()
set s__TrigVariables_groupsB[this]=s__TPTTSLinkedVariablesArray__agroupsB__allocate()
set s__TrigVariables_groupsC[this]=s__TPTTSLinkedVariablesArray__agroupsC__allocate()
set s__TrigVariables_groupsD[this]=s__TPTTSLinkedVariablesArray__agroupsD__allocate()
set s__TrigVariables_groupsE[this]=s__TPTTSLinkedVariablesArray__agroupsE__allocate()
set s__TrigVariables_groupsF[this]=s__TPTTSLinkedVariablesArray__agroupsF__allocate()
set s__TrigVariables_itemsA[this]=s__TPTTSLinkedVariablesArray__aitemsA__allocate()
set s__TrigVariables_itemsB[this]=s__TPTTSLinkedVariablesArray__aitemsB__allocate()
set s__TrigVariables_itemsC[this]=s__TPTTSLinkedVariablesArray__aitemsC__allocate()
set s__TrigVariables_itemsD[this]=s__TPTTSLinkedVariablesArray__aitemsD__allocate()
set s__TrigVariables_itemsE[this]=s__TPTTSLinkedVariablesArray__aitemsE__allocate()
set s__TrigVariables_itemsF[this]=s__TPTTSLinkedVariablesArray__aitemsF__allocate()
set s__TrigVariables_timersA[this]=s__TPTTSLinkedVariablesArray__atimersA__allocate()
set s__TrigVariables_timersB[this]=s__TPTTSLinkedVariablesArray__atimersB__allocate()
set s__TrigVariables_timersC[this]=s__TPTTSLinkedVariablesArray__atimersC__allocate()
set s__TrigVariables_timersD[this]=s__TPTTSLinkedVariablesArray__atimersD__allocate()
set s__TrigVariables_timersE[this]=s__TPTTSLinkedVariablesArray__atimersE__allocate()
set s__TrigVariables_timersF[this]=s__TPTTSLinkedVariablesArray__atimersF__allocate()
set s__TrigVariables_INUSE_Avar[this]=true
endfunction
function s__TrigVariables_CopyByEventId_0 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_WinningPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_4 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_ExpiredTimer[this]=s__TrigVariables_ExpiredTimer[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_5 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_TriggeringRegion[this]=s__TrigVariables_TriggeringRegion[s__TrigVariables_Body]
set s__TrigVariables_EnteringUnit[this]=s__TrigVariables_EnteringUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_6 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_TriggeringRegion[this]=s__TrigVariables_TriggeringRegion[s__TrigVariables_Body]
set s__TrigVariables_LeavingUnit[this]=s__TrigVariables_LeavingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_3 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_EventPlayerState[this]=s__TrigVariables_EventPlayerState[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_G2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_16 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_EventPlayerChatString[this]=s__TrigVariables_EventPlayerChatString[s__TrigVariables_Body]
set s__TrigVariables_EventPlayerChatStringMatched[this]=s__TrigVariables_EventPlayerChatStringMatched[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_G1 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_18 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_Attacker[this]=s__TrigVariables_Attacker[s__TrigVariables_Body]
set s__TrigVariables_AttackedUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_19 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_Rescuer[this]=s__TrigVariables_Rescuer[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_20 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_KillingUnit[this]=s__TrigVariables_KillingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_21 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_DecayingUnit[this]=s__TrigVariables_DecayingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_22 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_DetectedUnit[this]=s__TrigVariables_DetectedUnit[s__TrigVariables_Body]
set s__TrigVariables_EventDetectingPlayer[this]=s__TrigVariables_EventDetectingPlayer[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_26 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_ConstructingStructure[this]=s__TrigVariables_ConstructingStructure[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_27 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_CancelledStructure[this]=s__TrigVariables_CancelledStructure[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_28 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_ConstructedStructure[this]=s__TrigVariables_ConstructedStructure[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_32 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_TrainedUnitType[this]=s__TrigVariables_TrainedUnitType[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_33 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_TrainedUnitType[this]=s__TrigVariables_TrainedUnitType[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_34 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_TrainedUnit[this]=s__TrigVariables_TrainedUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_35 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_Researched[this]=s__TrigVariables_Researched[s__TrigVariables_Body]
set s__TrigVariables_ResearchingUnit[this]=s__TrigVariables_ResearchingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_36 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_Researched[this]=s__TrigVariables_Researched[s__TrigVariables_Body]
set s__TrigVariables_ResearchingUnit[this]=s__TrigVariables_ResearchingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_37 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_Researched[this]=s__TrigVariables_Researched[s__TrigVariables_Body]
set s__TrigVariables_ResearchingUnit[this]=s__TrigVariables_ResearchingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_38 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_IssuedOrderId[this]=s__TrigVariables_IssuedOrderId[s__TrigVariables_Body]
set s__TrigVariables_OrderedUnit[this]=s__TrigVariables_OrderedUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_39 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_IssuedOrderId[this]=s__TrigVariables_IssuedOrderId[s__TrigVariables_Body]
set s__TrigVariables_OrderPointX[this]=s__TrigVariables_OrderPointX[s__TrigVariables_Body]
set s__TrigVariables_OrderPointY[this]=s__TrigVariables_OrderPointY[s__TrigVariables_Body]
set s__TrigVariables_OrderedUnit[this]=s__TrigVariables_OrderedUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_40 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_IssuedOrderId[this]=s__TrigVariables_IssuedOrderId[s__TrigVariables_Body]
set s__TrigVariables_OrderedUnit[this]=s__TrigVariables_OrderedUnit[s__TrigVariables_Body]
set s__TrigVariables_OrderTargetUnit[this]=s__TrigVariables_OrderTargetUnit[s__TrigVariables_Body]
set s__TrigVariables_OrderTargetDestructable[this]=s__TrigVariables_OrderTargetDestructable[s__TrigVariables_Body]
set s__TrigVariables_OrderTargetItem[this]=s__TrigVariables_OrderTargetItem[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_47 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_SummonedUnit[this]=s__TrigVariables_SummonedUnit[s__TrigVariables_Body]
set s__TrigVariables_SummoningUnit[this]=s__TrigVariables_SummoningUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_48 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_ManipulatedItem[this]=s__TrigVariables_ManipulatedItem[s__TrigVariables_Body]
set s__TrigVariables_ManipulatingUnit[this]=s__TrigVariables_ManipulatingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_49 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_ManipulatedItem[this]=s__TrigVariables_ManipulatedItem[s__TrigVariables_Body]
set s__TrigVariables_ManipulatingUnit[this]=s__TrigVariables_ManipulatingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_50 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_ManipulatedItem[this]=s__TrigVariables_ManipulatedItem[s__TrigVariables_Body]
set s__TrigVariables_ManipulatingUnit[this]=s__TrigVariables_ManipulatingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_277 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_ManipulatedItem[this]=s__TrigVariables_ManipulatedItem[s__TrigVariables_Body]
set s__TrigVariables_ManipulatingUnit[this]=s__TrigVariables_ManipulatingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_51 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_LoadedUnit[this]=s__TrigVariables_LoadedUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_41 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_LevelingUnit[this]=s__TrigVariables_LevelingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_42 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_LearnedSkill[this]=s__TrigVariables_LearnedSkill[s__TrigVariables_Body]
set s__TrigVariables_LearnedSkillLevel[this]=s__TrigVariables_LearnedSkillLevel[s__TrigVariables_Body]
set s__TrigVariables_LearningUnit[this]=s__TrigVariables_LearningUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_43 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_RevivableUnit[this]=s__TrigVariables_RevivableUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_44 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_RevivingUnit[this]=s__TrigVariables_RevivingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_45 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_RevivingUnit[this]=s__TrigVariables_RevivingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_46 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_RevivingUnit[this]=s__TrigVariables_RevivingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_52 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_EventDamage[this]=s__TrigVariables_EventDamage[s__TrigVariables_Body]
set s__TrigVariables_EventDamageSource[this]=s__TrigVariables_EventDamageSource[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_60 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_EventTargetUnit[this]=s__TrigVariables_EventTargetUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_61 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_92 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_ClickedButton[this]=s__TrigVariables_ClickedButton[s__TrigVariables_Body]
set s__TrigVariables_ClickedDialog[this]=s__TrigVariables_ClickedDialog[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_G3 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_SpellAbilityUnit[this]=s__TrigVariables_SpellAbilityUnit[s__TrigVariables_Body]
set s__TrigVariables_SpellAbilityId[this]=s__TrigVariables_SpellAbilityId[s__TrigVariables_Body]
set s__TrigVariables_SpellTargetX[this]=s__TrigVariables_SpellTargetX[s__TrigVariables_Body]
set s__TrigVariables_SpellTargetY[this]=s__TrigVariables_SpellTargetY[s__TrigVariables_Body]
set s__TrigVariables_SpellTargetDestructable[this]=s__TrigVariables_SpellTargetDestructable[s__TrigVariables_Body]
set s__TrigVariables_SpellTargetItem[this]=s__TrigVariables_SpellTargetItem[s__TrigVariables_Body]
set s__TrigVariables_SpellTargetUnit[this]=s__TrigVariables_SpellTargetUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_G4 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_270 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_ChangingUnitPrevOwner[this]=s__TrigVariables_ChangingUnitPrevOwner[s__TrigVariables_Body]
set s__TrigVariables_ChangingUnit[this]=s__TrigVariables_ChangingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_269 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_SellingUnit[this]=s__TrigVariables_SellingUnit[s__TrigVariables_Body]
set s__TrigVariables_SoldUnit[this]=s__TrigVariables_SoldUnit[s__TrigVariables_Body]
set s__TrigVariables_BuyingUnit[this]=s__TrigVariables_BuyingUnit[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyByEventId_271 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_TriggerPlayer[this]=s__TrigVariables_TriggerPlayer[s__TrigVariables_Body]
set s__TrigVariables_TriggerUnit[this]=s__TrigVariables_TriggerUnit[s__TrigVariables_Body]
set s__TrigVariables_SoldItem[this]=s__TrigVariables_SoldItem[s__TrigVariables_Body]
return false
endfunction
function s__TrigVariables_CopyDataByEventId takes boolean bb returns boolean
local integer this=s__TrigVariables_Copy
set s__TrigVariables_EventId[this]=s__TrigVariables_EventId[s__TrigVariables_Body]
call TriggerEvaluate(s__s__TrigVariables_tCopyByEventId[GetHandleId(s__TrigVariables_EventId[s__TrigVariables_Body])])
return false
endfunction
function s__TrigVariables_InitCopyByEventId takes nothing returns nothing
local trigger LastTrigger=null
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_0))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_GAME_VICTORY)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_4))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_GAME_TIMER_EXPIRED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_5))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_GAME_ENTER_REGION)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_6))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_GAME_LEAVE_REGION)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_3))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_STATE_LIMIT)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_16))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_CHAT)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_52))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_DAMAGED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_60))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_ACQUIRED_TARGET)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_61))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_TARGET_IN_RANGE)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_92))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_DIALOG_BUTTON_CLICK)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_26))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_START)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_270))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_CHANGE_OWNER)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_269))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_SELL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_271))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_SELL_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_18))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_ATTACKED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_19))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_RESCUED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_20))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_DEATH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_21))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_DECAY)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_22))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_DETECTED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_27))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_CANCEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_28))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_FINISH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_32))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_START)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_33))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_CANCEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_34))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_FINISH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_35))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_START)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_36))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_CANCEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_37))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_FINISH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_38))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_ORDER)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_39))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_40))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_47))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_SUMMON)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_48))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_DROP_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_49))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_PICKUP_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_50))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_USE_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_277))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_USE_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_51))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_LOADED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_41))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_HERO_LEVEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_42))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_HERO_SKILL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_43))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVABLE)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_44))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVE_START)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_45))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVE_CANCEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_46))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVE_FINISH)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_CHANGE_OWNER)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_CHANGE_OWNER)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_SELL)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_SELL)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_SELL_ITEM)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_SELL_ITEM)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_ATTACKED)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_ATTACKED)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_RESCUED)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_RESCUED)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_DEATH)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_DEATH)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_DECAY)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_DECAY)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_DETECTED)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_DETECTED)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_CONSTRUCT_CANCEL)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_CANCEL)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_CONSTRUCT_FINISH)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_FINISH)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_TRAIN_START)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_START)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_TRAIN_CANCEL)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_CANCEL)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_TRAIN_FINISH)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_FINISH)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_RESEARCH_START)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_START)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_RESEARCH_CANCEL)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_CANCEL)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_RESEARCH_FINISH)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_FINISH)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_ISSUED_ORDER)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_ORDER)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_ISSUED_POINT_ORDER)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_ISSUED_TARGET_ORDER)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_SUMMON)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_SUMMON)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_DROP_ITEM)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_DROP_ITEM)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_PICKUP_ITEM)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_PICKUP_ITEM)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_USE_ITEM)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_USE_ITEM)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_USE_ITEM)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_USE_ITEM)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_LOADED)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_LOADED)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_HERO_LEVEL)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_HERO_LEVEL)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_HERO_SKILL)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_HERO_SKILL)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_HERO_REVIVABLE)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVABLE)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_HERO_REVIVE_START)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVE_START)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_HERO_REVIVE_CANCEL)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVE_CANCEL)]
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_HERO_REVIVE_FINISH)]=s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_HERO_REVIVE_FINISH)]
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_G1))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_HIDDEN)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_SELECTED)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_DESELECTED)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_UPGRADE_START)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_UPGRADE_CANCEL)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_UPGRADE_FINISH)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_HIDDEN)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_SELECTED)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_DESELECTED)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_UPGRADE_START)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_UPGRADE_CANCEL)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_UPGRADE_FINISH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_G2))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_ALLIANCE_CHANGED)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_DEFEAT)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_VICTORY)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_LEAVE)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_END_CINEMATIC)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_G3))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_SPELL_CHANNEL)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_SPELL_CAST)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_SPELL_EFFECT)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_SPELL_FINISH)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_UNIT_SPELL_ENDCAST)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_SPELL_CHANNEL)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_SPELL_CAST)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_SPELL_EFFECT)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_SPELL_FINISH)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_UNIT_SPELL_ENDCAST)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_CopyByEventId_G4))
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_ARROW_LEFT_DOWN)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_ARROW_LEFT_UP)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_ARROW_RIGHT_DOWN)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_ARROW_RIGHT_UP)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_ARROW_DOWN_DOWN)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_ARROW_DOWN_UP)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_ARROW_UP_DOWN)]=LastTrigger
set s__s__TrigVariables_tCopyByEventId[GetHandleId(EVENT_PLAYER_ARROW_UP_UP)]=LastTrigger
endfunction
function s__TrigVariables_TPTTS_CopyByEventId__onInit takes nothing returns nothing
call s__TrigVariables_InitCopyByEventId()
endfunction
function s__TrigVariables_CopyDataplayer2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
local integer i
local integer k
if s__TrigVariables_lastSetplayer[s__TrigVariables_Body]==-1 then
return false
endif
set i=s__TrigVariables_lastSetplayer[s__TrigVariables_Body]
loop
exitwhen i==-1
call s__TrigVariables_Setplayer(this,i,(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,((s__TrigVariables_Body))*s__TrigVariables_arraySize+((i)))))
set i=(LoadInteger(s__TrigVariables_HashMain,0,((s__TrigVariables_Body))*s__TrigVariables_offsetSize+s__TrigVariables_offsetplayer+(i)+2)-2)
endloop
return false
endfunction
function s__TrigVariables_CopyDataplayer takes boolean bb returns boolean
call ForForce(bj_FORCE_PLAYER[0],function s__TrigVariables_CopyDataplayer2)
return false
endfunction
function s__TrigVariables_CopyDataforce2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
local integer i
local integer k
if s__TrigVariables_lastSetforce[s__TrigVariables_Body]==-1 then
return false
endif
set i=s__TrigVariables_lastSetforce[s__TrigVariables_Body]
loop
exitwhen i==-1
call s__TrigVariables_Setforce(this,i,(LoadForceHandle(s__TrigVariables_Hashforce,0,((s__TrigVariables_Body))*s__TrigVariables_arraySize+((i)))))
set i=(LoadInteger(s__TrigVariables_HashMain,0,((s__TrigVariables_Body))*s__TrigVariables_offsetSize+s__TrigVariables_offsetforce+(i)+2)-2)
endloop
return false
endfunction
function s__TrigVariables_CopyDataforce takes boolean bb returns boolean
call ForForce(bj_FORCE_PLAYER[0],function s__TrigVariables_CopyDataforce2)
return false
endfunction
function s__TrigVariables_CopyDatagroup2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
local integer i
local integer k
if s__TrigVariables_lastSetgroup[s__TrigVariables_Body]==-1 then
return false
endif
set i=s__TrigVariables_lastSetgroup[s__TrigVariables_Body]
loop
exitwhen i==-1
call s__TrigVariables_Setgroup(this,i,(LoadGroupHandle(s__TrigVariables_Hashgroup,0,((s__TrigVariables_Body))*s__TrigVariables_arraySize+((i)))))
set i=(LoadInteger(s__TrigVariables_HashMain,0,((s__TrigVariables_Body))*s__TrigVariables_offsetSize+s__TrigVariables_offsetgroup+(i)+2)-2)
endloop
return false
endfunction
function s__TrigVariables_CopyDatagroup takes boolean bb returns boolean
call ForForce(bj_FORCE_PLAYER[0],function s__TrigVariables_CopyDatagroup2)
return false
endfunction
function s__TrigVariables_CopyDataitem2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
local integer i
local integer k
if s__TrigVariables_lastSetitem[s__TrigVariables_Body]==-1 then
return false
endif
set i=s__TrigVariables_lastSetitem[s__TrigVariables_Body]
loop
exitwhen i==-1
call s__TrigVariables_Setitem(this,i,(LoadItemHandle(s__TrigVariables_Hashitem,0,((s__TrigVariables_Body))*s__TrigVariables_arraySize+((i)))))
set i=(LoadInteger(s__TrigVariables_HashMain,0,((s__TrigVariables_Body))*s__TrigVariables_offsetSize+s__TrigVariables_offsetitem+(i)+2)-2)
endloop
return false
endfunction
function s__TrigVariables_CopyDataitem takes boolean bb returns boolean
call ForForce(bj_FORCE_PLAYER[0],function s__TrigVariables_CopyDataitem2)
return false
endfunction
function s__TrigVariables_CopyDataeffect2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
local integer i
local integer k
if s__TrigVariables_lastSeteffect[s__TrigVariables_Body]==-1 then
return false
endif
set i=s__TrigVariables_lastSeteffect[s__TrigVariables_Body]
loop
exitwhen i==-1
call s__TrigVariables_Seteffect(this,i,(LoadEffectHandle(s__TrigVariables_Hasheffect,0,((s__TrigVariables_Body))*s__TrigVariables_arraySize+((i)))))
set i=(LoadInteger(s__TrigVariables_HashMain,0,((s__TrigVariables_Body))*s__TrigVariables_offsetSize+s__TrigVariables_offseteffect+(i)+2)-2)
endloop
return false
endfunction
function s__TrigVariables_CopyDataeffect takes boolean bb returns boolean
call ForForce(bj_FORCE_PLAYER[0],function s__TrigVariables_CopyDataeffect2)
return false
endfunction
function s__TrigVariables_CopyDatatimer2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
local integer i
local integer k
if s__TrigVariables_lastSettimer[s__TrigVariables_Body]==-1 then
return false
endif
set i=s__TrigVariables_lastSettimer[s__TrigVariables_Body]
loop
exitwhen i==-1
call s__TrigVariables_Settimer(this,i,(LoadTimerHandle(s__TrigVariables_Hashtimer,0,((s__TrigVariables_Body))*s__TrigVariables_arraySize+((i)))))
set i=(LoadInteger(s__TrigVariables_HashMain,0,((s__TrigVariables_Body))*s__TrigVariables_offsetSize+s__TrigVariables_offsettimer+(i)+2)-2)
endloop
return false
endfunction
function s__TrigVariables_CopyDatatimer takes boolean bb returns boolean
call ForForce(bj_FORCE_PLAYER[0],function s__TrigVariables_CopyDatatimer2)
return false
endfunction
function s__TrigVariables_CopyDataunit2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
local integer i
local integer k
if s__TrigVariables_lastSetunit[s__TrigVariables_Body]==-1 then
return false
endif
set i=s__TrigVariables_lastSetunit[s__TrigVariables_Body]
loop
exitwhen i==-1
call s__TrigVariables_Setunit(this,i,(LoadUnitHandle(s__TrigVariables_Hashunit,0,((s__TrigVariables_Body))*s__TrigVariables_arraySize+((i)))))
set i=(LoadInteger(s__TrigVariables_HashMain,0,((s__TrigVariables_Body))*s__TrigVariables_offsetSize+s__TrigVariables_offsetunit+(i)+2)-2)
endloop
return false
endfunction
function s__TrigVariables_CopyDataunit takes boolean bb returns boolean
call ForForce(bj_FORCE_PLAYER[0],function s__TrigVariables_CopyDataunit2)
return false
endfunction
function s__TrigVariables_CopyDatalocation2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
local integer i
local integer k
if s__TrigVariables_lastSetlocation[s__TrigVariables_Body]==-1 then
return false
endif
set i=s__TrigVariables_lastSetlocation[s__TrigVariables_Body]
loop
exitwhen i==-1
call s__TrigVariables_Setlocation(this,i,(LoadLocationHandle(s__TrigVariables_Hashlocation,0,((s__TrigVariables_Body))*s__TrigVariables_arraySize+((i)))))
set i=(LoadInteger(s__TrigVariables_HashMain,0,((s__TrigVariables_Body))*s__TrigVariables_offsetSize+s__TrigVariables_offsetlocation+(i)+2)-2)
endloop
return false
endfunction
function s__TrigVariables_CopyDatalocation takes boolean bb returns boolean
call ForForce(bj_FORCE_PLAYER[0],function s__TrigVariables_CopyDatalocation2)
return false
endfunction
function s__TrigVariables_CopyDatalightning2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
local integer i
local integer k
if s__TrigVariables_lastSetlightning[s__TrigVariables_Body]==-1 then
return false
endif
set i=s__TrigVariables_lastSetlightning[s__TrigVariables_Body]
loop
exitwhen i==-1
call s__TrigVariables_Setlightning(this,i,(LoadLightningHandle(s__TrigVariables_Hashlightning,0,((s__TrigVariables_Body))*s__TrigVariables_arraySize+((i)))))
set i=(LoadInteger(s__TrigVariables_HashMain,0,((s__TrigVariables_Body))*s__TrigVariables_offsetSize+s__TrigVariables_offsetlightning+(i)+2)-2)
endloop
return false
endfunction
function s__TrigVariables_CopyDatalightning takes boolean bb returns boolean
call ForForce(bj_FORCE_PLAYER[0],function s__TrigVariables_CopyDatalightning2)
return false
endfunction
function s__TrigVariables_CopyDatainteger2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
local integer i
local integer k
if s__TrigVariables_lastSetinteger[s__TrigVariables_Body]==-1 then
return false
endif
set i=s__TrigVariables_lastSetinteger[s__TrigVariables_Body]
loop
exitwhen i==-1
call s__TrigVariables_Setinteger(this,i,(LoadInteger(s__TrigVariables_Hashinteger,0,((s__TrigVariables_Body))*s__TrigVariables_arraySize+((i)))))
set i=(LoadInteger(s__TrigVariables_HashMain,0,((s__TrigVariables_Body))*s__TrigVariables_offsetSize+s__TrigVariables_offsetinteger+(i)+2)-2)
endloop
return false
endfunction
function s__TrigVariables_CopyDatainteger takes boolean bb returns boolean
call ForForce(bj_FORCE_PLAYER[0],function s__TrigVariables_CopyDatainteger2)
return false
endfunction
function s__TrigVariables_CopyDatareal2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
local integer i
local integer k
if s__TrigVariables_lastSetreal[s__TrigVariables_Body]==-1 then
return false
endif
set i=s__TrigVariables_lastSetreal[s__TrigVariables_Body]
loop
exitwhen i==-1
call s__TrigVariables_Setreal(this,i,(LoadReal(s__TrigVariables_Hashreal,0,((s__TrigVariables_Body))*s__TrigVariables_arraySize+((i)))))
set i=(LoadInteger(s__TrigVariables_HashMain,0,((s__TrigVariables_Body))*s__TrigVariables_offsetSize+s__TrigVariables_offsetreal+(i)+2)-2)
endloop
return false
endfunction
function s__TrigVariables_CopyDatareal takes boolean bb returns boolean
call ForForce(bj_FORCE_PLAYER[0],function s__TrigVariables_CopyDatareal2)
return false
endfunction
function s__TrigVariables_CopyDataboolean2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
local integer i
local integer k
if s__TrigVariables_lastSetboolean[s__TrigVariables_Body]==-1 then
return false
endif
set i=s__TrigVariables_lastSetboolean[s__TrigVariables_Body]
loop
exitwhen i==-1
call s__TrigVariables_Setboolean(this,i,(LoadBoolean(s__TrigVariables_Hashboolean,0,((s__TrigVariables_Body))*s__TrigVariables_arraySize+((i)))))
set i=(LoadInteger(s__TrigVariables_HashMain,0,((s__TrigVariables_Body))*s__TrigVariables_offsetSize+s__TrigVariables_offsetboolean+(i)+2)-2)
endloop
return false
endfunction
function s__TrigVariables_CopyDataboolean takes boolean bb returns boolean
call ForForce(bj_FORCE_PLAYER[0],function s__TrigVariables_CopyDataboolean2)
return false
endfunction
function s__TrigVariables_CopyDatatexttag2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
local integer i
local integer k
if s__TrigVariables_lastSettexttag[s__TrigVariables_Body]==-1 then
return false
endif
set i=s__TrigVariables_lastSettexttag[s__TrigVariables_Body]
loop
exitwhen i==-1
call s__TrigVariables_Settexttag(this,i,(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,((s__TrigVariables_Body))*s__TrigVariables_arraySize+((i)))))
set i=(LoadInteger(s__TrigVariables_HashMain,0,((s__TrigVariables_Body))*s__TrigVariables_offsetSize+s__TrigVariables_offsettexttag+(i)+2)-2)
endloop
return false
endfunction
function s__TrigVariables_CopyDatatexttag takes boolean bb returns boolean
call ForForce(bj_FORCE_PLAYER[0],function s__TrigVariables_CopyDatatexttag2)
return false
endfunction
function s__TrigVariables_CopyDatastring2 takes nothing returns boolean
local integer this=s__TrigVariables_Copy
local integer i
local integer k
if s__TrigVariables_lastSetstring[s__TrigVariables_Body]==-1 then
return false
endif
set i=s__TrigVariables_lastSetstring[s__TrigVariables_Body]
loop
exitwhen i==-1
call s__TrigVariables_Setstring(this,i,(LoadStr(s__TrigVariables_Hashstring,0,((s__TrigVariables_Body))*s__TrigVariables_arraySize+((i)))))
set i=(LoadInteger(s__TrigVariables_HashMain,0,((s__TrigVariables_Body))*s__TrigVariables_offsetSize+s__TrigVariables_offsetstring+(i)+2)-2)
endloop
return false
endfunction
function s__TrigVariables_CopyDatastring takes boolean bb returns boolean
call ForForce(bj_FORCE_PLAYER[0],function s__TrigVariables_CopyDatastring2)
return false
endfunction
function s__TrigVariables_CopyDataAll takes integer this,boolean bb returns boolean
call s__TrigVariables_CopyDataplayer(false)
call s__TrigVariables_CopyDataforce(false)
call s__TrigVariables_CopyDatagroup(false)
call s__TrigVariables_CopyDataitem(false)
call s__TrigVariables_CopyDataeffect(false)
call s__TrigVariables_CopyDatatimer(false)
call s__TrigVariables_CopyDataunit(false)
call s__TrigVariables_CopyDatalocation(false)
call s__TrigVariables_CopyDatalightning(false)
call s__TrigVariables_CopyDatainteger(false)
call s__TrigVariables_CopyDatareal(false)
call s__TrigVariables_CopyDataboolean(false)
call s__TrigVariables_CopyDatatexttag(false)
call s__TrigVariables_CopyDatastring(false)
call s__TrigVariables_CopyDataByEventId(false)
return false
endfunction
function s__TrigVariables_CopyCreate takes integer this returns boolean
local integer temp=GlobalTV
if s__TrigVariables_Copy !=0 then
call s__TrigVariables_Flush(s__TrigVariables_Copy)
endif
set s__TrigVariables_Copy=s__TrigVariables_SettingVariables()
set GlobalTV=temp
set Wait=GlobalTV
set s__TrigVariables_Body=this
return false
endfunction
function s__TrigVariables_CopyDataOptions takes boolean bb returns nothing
endfunction
function s__TrigVariables_CopyExecuteTrigger takes integer this,trigger tTemp returns nothing
local integer temp
if s__TrigVariables_Copy==0 then
return
endif
set temp=GlobalTV
set GlobalTV=s__TrigVariables_Copy
set Wait=GlobalTV
set s__TrigVariables_CurrentTrigger[GlobalTV]=tTemp
call s__TrigVariables_ExecuteTrigger(GlobalTV)
set s__TrigVariables_Copy=0
set GlobalTV=temp
set Wait=GlobalTV
set s__TrigVariables_ThroughTimer=true
endfunction
function s__TrigVariables_EmptyTrigVars_0 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_WinningPlayer[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_4 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_ExpiredTimer[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_5 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_TriggeringRegion[this]=null
set s__TrigVariables_EnteringUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_6 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_TriggeringRegion[this]=null
set s__TrigVariables_LeavingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_3 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_EventPlayerState[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_G2 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_16 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_EventPlayerChatString[this]=null
set s__TrigVariables_EventPlayerChatStringMatched[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_G1 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_18 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_Attacker[this]=null
set s__TrigVariables_AttackedUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_19 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_Rescuer[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_20 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_KillingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_21 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_DecayingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_22 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_DetectedUnit[this]=null
set s__TrigVariables_EventDetectingPlayer[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_26 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_ConstructingStructure[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_27 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_CancelledStructure[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_28 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_ConstructedStructure[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_32 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_TrainedUnitType[this]=0
return false
endfunction
function s__TrigVariables_EmptyTrigVars_33 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_TrainedUnitType[this]=0
return false
endfunction
function s__TrigVariables_EmptyTrigVars_34 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_TrainedUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_35 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_Researched[this]=0
set s__TrigVariables_ResearchingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_36 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_Researched[this]=0
set s__TrigVariables_ResearchingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_37 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_Researched[this]=0
set s__TrigVariables_ResearchingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_38 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_IssuedOrderId[this]=0
set s__TrigVariables_OrderedUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_39 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_IssuedOrderId[this]=0
set s__TrigVariables_OrderPointX[this]=0.
set s__TrigVariables_OrderPointY[this]=0.
set s__TrigVariables_OrderedUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_40 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_IssuedOrderId[this]=0
set s__TrigVariables_OrderedUnit[this]=null
set s__TrigVariables_OrderTargetUnit[this]=null
set s__TrigVariables_OrderTargetDestructable[this]=null
set s__TrigVariables_OrderTargetItem[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_47 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_SummonedUnit[this]=null
set s__TrigVariables_SummoningUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_48 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_ManipulatedItem[this]=null
set s__TrigVariables_ManipulatingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_49 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_ManipulatedItem[this]=null
set s__TrigVariables_ManipulatingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_50 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_ManipulatedItem[this]=null
set s__TrigVariables_ManipulatingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_277 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_ManipulatedItem[this]=null
set s__TrigVariables_ManipulatingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_51 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_LoadedUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_41 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_LevelingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_42 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_LearnedSkill[this]=0
set s__TrigVariables_LearnedSkillLevel[this]=0
set s__TrigVariables_LearningUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_43 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_RevivableUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_44 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_RevivingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_45 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_RevivingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_46 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_RevivingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_52 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_EventDamage[this]=0.
set s__TrigVariables_EventDamageSource[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_60 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_EventTargetUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_61 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_92 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_ClickedButton[this]=null
set s__TrigVariables_ClickedDialog[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_G3 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_SpellAbilityUnit[this]=null
set s__TrigVariables_SpellAbilityId[this]=0
set s__TrigVariables_SpellTargetX[this]=0.
set s__TrigVariables_SpellTargetY[this]=0.
set s__TrigVariables_SpellTargetDestructable[this]=null
set s__TrigVariables_SpellTargetItem[this]=null
set s__TrigVariables_SpellTargetUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_G4 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_270 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_ChangingUnitPrevOwner[this]=null
set s__TrigVariables_ChangingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_269 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_SellingUnit[this]=null
set s__TrigVariables_SoldUnit[this]=null
set s__TrigVariables_BuyingUnit[this]=null
return false
endfunction
function s__TrigVariables_EmptyTrigVars_271 takes nothing returns boolean
local integer this=s__TrigVariables_HiEveryone
set s__TrigVariables_TriggerPlayer[this]=null
set s__TrigVariables_TriggerUnit[this]=null
set s__TrigVariables_SoldItem[this]=null
return false
endfunction
function s__TrigVariables_InitEmptyTrigVars takes nothing returns nothing
local trigger LastTrigger=null
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_0))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_GAME_VICTORY)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_4))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_GAME_TIMER_EXPIRED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_5))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_GAME_ENTER_REGION)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_6))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_GAME_LEAVE_REGION)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_3))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_STATE_LIMIT)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_16))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_CHAT)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_52))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_DAMAGED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_60))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_ACQUIRED_TARGET)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_61))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_TARGET_IN_RANGE)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_92))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_DIALOG_BUTTON_CLICK)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_26))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_START)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_270))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_CHANGE_OWNER)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_269))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_SELL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_271))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_SELL_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_18))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_ATTACKED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_19))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_RESCUED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_20))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_DEATH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_21))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_DECAY)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_22))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_DETECTED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_27))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_CANCEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_28))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_FINISH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_32))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_START)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_33))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_CANCEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_34))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_FINISH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_35))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_START)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_36))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_CANCEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_37))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_FINISH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_38))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_ORDER)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_39))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_40))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_47))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_SUMMON)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_48))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_DROP_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_49))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_PICKUP_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_50))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_USE_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_277))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_USE_ITEM)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_51))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_LOADED)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_41))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_HERO_LEVEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_42))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_HERO_SKILL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_43))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_HERO_REVIVABLE)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_44))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_HERO_REVIVE_START)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_45))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_HERO_REVIVE_CANCEL)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_46))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_HERO_REVIVE_FINISH)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_CHANGE_OWNER)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_CHANGE_OWNER)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_SELL)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_SELL)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_SELL_ITEM)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_SELL_ITEM)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_ATTACKED)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_ATTACKED)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_RESCUED)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_RESCUED)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_DEATH)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_DEATH)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_DECAY)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_DECAY)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_DETECTED)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_DETECTED)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_CONSTRUCT_CANCEL)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_CANCEL)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_CONSTRUCT_FINISH)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_CONSTRUCT_FINISH)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_TRAIN_START)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_START)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_TRAIN_CANCEL)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_CANCEL)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_TRAIN_FINISH)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_TRAIN_FINISH)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_RESEARCH_START)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_START)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_RESEARCH_CANCEL)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_CANCEL)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_RESEARCH_FINISH)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_RESEARCH_FINISH)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_ISSUED_ORDER)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_ORDER)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_ISSUED_POINT_ORDER)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_ISSUED_TARGET_ORDER)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_SUMMON)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_SUMMON)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_DROP_ITEM)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_DROP_ITEM)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_PICKUP_ITEM)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_PICKUP_ITEM)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_USE_ITEM)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_USE_ITEM)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_USE_ITEM)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_USE_ITEM)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_LOADED)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_LOADED)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_HERO_LEVEL)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_HERO_LEVEL)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_HERO_SKILL)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_HERO_SKILL)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_HERO_REVIVABLE)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_HERO_REVIVABLE)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_HERO_REVIVE_START)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_HERO_REVIVE_START)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_HERO_REVIVE_CANCEL)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_HERO_REVIVE_CANCEL)]
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_HERO_REVIVE_FINISH)]=s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_HERO_REVIVE_FINISH)]
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_G1))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_HIDDEN)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_SELECTED)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_DESELECTED)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_UPGRADE_START)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_UPGRADE_CANCEL)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_UPGRADE_FINISH)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_HIDDEN)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_SELECTED)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_DESELECTED)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_UPGRADE_START)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_UPGRADE_CANCEL)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_UPGRADE_FINISH)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_G2))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_ALLIANCE_CHANGED)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_DEFEAT)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_VICTORY)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_LEAVE)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_END_CINEMATIC)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_G3))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_SPELL_CHANNEL)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_SPELL_CAST)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_SPELL_EFFECT)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_SPELL_FINISH)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_UNIT_SPELL_ENDCAST)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_SPELL_CHANNEL)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_SPELL_CAST)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_SPELL_EFFECT)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_SPELL_FINISH)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_UNIT_SPELL_ENDCAST)]=LastTrigger
set LastTrigger=CreateTrigger()
call TriggerAddCondition(LastTrigger,Condition(function s__TrigVariables_EmptyTrigVars_G4))
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_ARROW_LEFT_DOWN)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_ARROW_LEFT_UP)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_ARROW_RIGHT_DOWN)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_ARROW_RIGHT_UP)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_ARROW_DOWN_DOWN)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_ARROW_DOWN_UP)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_ARROW_UP_DOWN)]=LastTrigger
set s__s__TrigVariables_tEmptyTrigVars[GetHandleId(EVENT_PLAYER_ARROW_UP_UP)]=LastTrigger
endfunction
function s__TrigVariables_TPTTS_EmptyTrigVars__onInit takes nothing returns nothing
call s__TrigVariables_InitEmptyTrigVars()
endfunction
constant function CurrentTV takes nothing returns integer
return GlobalTV
endfunction
constant function NullCondition takes nothing returns boolean
return true
endfunction
function itemGet takes integer p returns nothing
local integer array tempI
local real array tempR
local integer tempI2
local real tempR2
local integer a=0
local unit u=Charcter[p]
local item i=LoadItemHandle(udg_Hash,p,$C51B137D)
set tempI[a]=0
loop
exitwhen a==19
set a=a+1
set tempI[a]=0
endloop
set a=0
set tempR[a]=0
loop
exitwhen a==25
set a=a+1
set tempR[a]=0
endloop
set tempI[0]=tempI[0]+LoadInteger(Hash_Stat,GetItemTypeId(i),$FCD961C9)
set tempI[1]=tempI[1]+LoadInteger(Hash_Stat,GetItemTypeId(i),$4203D9C2)
set tempI[2]=tempI[2]+LoadInteger(Hash_Stat,GetItemTypeId(i),$D20F099)
set tempI[3]=tempI[3]+LoadInteger(Hash_Stat,GetItemTypeId(i),$B38BEB44)
set tempI[4]=tempI[4]+LoadInteger(Hash_Stat,GetItemTypeId(i),$22601A7A)
set tempI[5]=tempI[5]+LoadInteger(Hash_Stat,GetItemTypeId(i),$9298D98F)
set tempI[6]=tempI[6]+LoadInteger(Hash_Stat,GetItemTypeId(i),$EFFA2021)
set tempI[7]=tempI[7]+LoadInteger(Hash_Stat,GetItemTypeId(i),$753B4F2F)
set tempI[8]=tempI[8]+LoadInteger(Hash_Stat,GetItemTypeId(i),$3181F127)
set tempI[9]=tempI[9]+LoadInteger(Hash_Stat,GetItemTypeId(i),$D8C9D96B)
set tempI[10]=tempI[10]+LoadInteger(Hash_Stat,GetItemTypeId(i),$A3A34F6C)
set tempI[11]=tempI[11]+LoadInteger(Hash_Stat,GetItemTypeId(i),$C46B0D8B)
set tempI[12]=tempI[12]+LoadInteger(Hash_Stat,GetItemTypeId(i),$1D27E6A1)
set tempI[13]=tempI[13]+LoadInteger(Hash_Stat,GetItemTypeId(i),$5B2587EB)
set tempI[15]=tempI[15]+LoadInteger(Hash_Stat,GetItemTypeId(i),$ED314123)
set tempI[16]=tempI[16]+LoadInteger(Hash_Stat,GetItemTypeId(i),$C18D16A0)
set tempI[17]=tempI[17]+LoadInteger(Hash_Stat,GetItemTypeId(i),$924944F9)
set tempI[18]=tempI[18]+LoadInteger(Hash_Stat,GetItemTypeId(i),$8885555B)
set tempI[19]=tempI[19]+LoadInteger(Hash_Stat,GetItemTypeId(i),$B7E7C8AD)
set tempR[0]=tempR[0]+LoadReal(Hash_Stat,GetItemTypeId(i),$7FAFA384)
set tempR[1]=tempR[1]+LoadReal(Hash_Stat,GetItemTypeId(i),$A62A5B82)
set tempR[2]=tempR[2]+LoadReal(Hash_Stat,GetItemTypeId(i),$164C40C9)
set tempR[3]=tempR[3]+LoadReal(Hash_Stat,GetItemTypeId(i),$8EB4E7D9)
set tempR[4]=tempR[4]+LoadReal(Hash_Stat,GetItemTypeId(i),$6DC36456)
set tempR[5]=tempR[5]+LoadReal(Hash_Stat,GetItemTypeId(i),$34D9AB92)
set tempR[6]=tempR[6]+LoadReal(Hash_Stat,GetItemTypeId(i),$337F1BA1)
set tempR[7]=tempR[7]+LoadReal(Hash_Stat,GetItemTypeId(i),$540C61C7)
set tempR[8]=tempR[8]+LoadReal(Hash_Stat,GetItemTypeId(i),$1486341)
set tempR[9]=tempR[9]+LoadReal(Hash_Stat,GetItemTypeId(i),$45E22B52)
set tempR[10]=tempR[10]+LoadReal(Hash_Stat,GetItemTypeId(i),$5C6093F2)
set tempR[11]=tempR[11]+LoadReal(Hash_Stat,GetItemTypeId(i),$BC3801A9)
set tempR[12]=tempR[12]+LoadReal(Hash_Stat,GetItemTypeId(i),$50B06B2)
set tempR[13]=tempR[13]+LoadReal(Hash_Stat,GetItemTypeId(i),$2034A1E3)
set tempR[14]=tempR[14]+LoadReal(Hash_Stat,GetItemTypeId(i),$5FF1A35F)
set tempR[15]=tempR[15]+LoadReal(Hash_Stat,GetItemTypeId(i),$2E182EFC)
set tempR[16]=tempR[16]+LoadReal(Hash_Stat,GetItemTypeId(i),$9AB1A577)
set tempR[18]=tempR[18]+LoadReal(Hash_Stat,GetItemTypeId(i),$62BD2901)
set tempR[19]=tempR[19]+LoadReal(Hash_Stat,GetItemTypeId(i),$3362B68D)
set tempR[20]=tempR[20]+LoadReal(Hash_Stat,GetItemTypeId(i),$F3FDA8C9)
set tempR[21]=tempR[21]+LoadReal(Hash_Stat,GetItemTypeId(i),$10BA18C8)
set tempR[22]=tempR[22]+LoadReal(Hash_Stat,GetItemTypeId(i),$A7543052)
set tempR[23]=tempR[23]+LoadReal(Hash_Stat,GetItemTypeId(i),$9BC8E22B)
set tempR[24]=tempR[24]+LoadReal(Hash_Stat,GetItemTypeId(i),$A053013A)
set tempR[25]=tempR[25]+LoadReal(Hash_Stat,GetItemTypeId(i),$92D803F1)
if tempI[0]!=0 then
call SetUnitState(u,UNIT_STATE_MAX_LIFE,GetUnitState(u,UNIT_STATE_MAX_LIFE)+tempI[0])
endif
if tempI[1]!=0 then
call SetUnitState(u,UNIT_STATE_MAX_MANA,GetUnitState(u,UNIT_STATE_MAX_MANA)+tempI[1])
endif
if tempI[2]!=0 then
call SetHeroStr(u,GetHeroStr(u,false)+tempI[2],true)
endif
if tempI[3]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$B38BEB44)+tempI[3]
call SaveInteger(Hash_Stat,p,$B38BEB44,tempI2)
endif
if tempI[4]!=0 then
set tempR2=GetUnitState(u,ConvertUnitState(0x12))+tempI[4]
call SetUnitState(u,ConvertUnitState(0x12),tempR2)
if CharcterStat[p]then
call SetHeroAgi(u,GetHeroAgi(u,false)+tempI[4],true)
else
call SetHeroInt(u,GetHeroInt(u,false)+tempI[4],true)
endif
endif
if tempI[5]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$9298D98F)+tempI[5]
call SaveInteger(Hash_Stat,p,$9298D98F,tempI2)
endif
if tempI[6]!=0 then
set tempR2=GetUnitState(u,ConvertUnitState(0x12))+tempI[6]
call SetUnitState(u,ConvertUnitState(0x12),tempR2)
call SetHeroStr(u,GetHeroStr(u,false)+tempI[6],true)
call SetHeroAgi(u,GetHeroAgi(u,false)+tempI[6],true)
call SetHeroInt(u,GetHeroInt(u,false)+tempI[6],true)
endif
if tempI[7]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$753B4F2F)+tempI[7]
call SaveInteger(Hash_Stat,p,$753B4F2F,tempI2)
endif
if tempI[8]!=0 then
set tempR2=GetUnitState(u,ConvertUnitState(0x12))+tempI[8]
call SetUnitState(u,ConvertUnitState(0x12),tempR2)
endif
if tempI[9]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$D8C9D96B)+tempI[9]
call SaveInteger(Hash_Stat,p,$D8C9D96B,tempI2)
endif
if tempI[10]!=0 then
call SetHeroAgi(u,GetHeroAgi(u,false)+tempI[10],true)
if CharcterStat[p]then
set tempR2=GetUnitState(u,ConvertUnitState(0x12))+tempI[10]
call SetUnitState(u,ConvertUnitState(0x12),tempR2)
endif
endif
if tempI[11]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$C46B0D8B)+tempI[11]
call SaveInteger(Hash_Stat,p,$C46B0D8B,tempI2)
endif
if tempI[12]!=0 then
call SetHeroInt(u,GetHeroInt(u,false)+tempI[12],true)
if not CharcterStat[p]then
set tempR2=GetUnitState(u,ConvertUnitState(0x12))+tempI[12]
call SetUnitState(u,ConvertUnitState(0x12),tempR2)
endif
endif
if tempI[13]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$5B2587EB)+tempI[13]
call SaveInteger(Hash_Stat,p,$5B2587EB,tempI2)
endif
if tempI[15]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$ED314123)+tempI[15]
call SaveInteger(Hash_Stat,p,$ED314123,tempI2)
endif
if tempI[16]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$C18D16A0)+tempI[16]
call SaveInteger(Hash_Stat,p,$C18D16A0,tempI2)
endif
if tempI[17]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$924944F9)+tempI[17]
call SaveInteger(Hash_Stat,p,$924944F9,tempI2)
endif
if tempI[18]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$8885555B)+tempI[18]
call SaveInteger(Hash_Stat,p,$8885555B,tempI2)
endif
if tempI[19]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$B7E7C8AD)+tempI[19]
call SaveInteger(Hash_Stat,p,$B7E7C8AD,tempI2)
endif
if tempR[0]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$7FAFA384)+tempR[0]
call SaveReal(Hash_Stat,p,$7FAFA384,tempR2)
endif
if tempR[1]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$A62A5B82)+tempR[1]
call SaveReal(Hash_Stat,p,$A62A5B82,tempR2)
endif
if tempR[2]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$164C40C9)+tempR[2]
call SaveReal(Hash_Stat,p,$164C40C9,tempR2)
endif
if tempR[3]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$8EB4E7D9)+tempR[3]
call SaveReal(Hash_Stat,p,$8EB4E7D9,tempR2)
endif
if tempR[4]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$6DC36456)+tempR[4]
call SaveReal(Hash_Stat,p,$6DC36456,tempR2)
endif
if tempR[5]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$34D9AB92)+tempR[5]
call SaveReal(Hash_Stat,p,$34D9AB92,tempR2)
endif
if tempR[6]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$337F1BA1)+tempR[6]
call SaveReal(Hash_Stat,p,$337F1BA1,tempR2)
endif
if tempR[7]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$540C61C7)+tempR[7]
call SaveReal(Hash_Stat,p,$540C61C7,tempR2)
endif
if tempR[8]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$1486341)+tempR[8]
call SaveReal(Hash_Stat,p,$1486341,tempR2)
endif
if tempR[9]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$45E22B52)+tempR[9]
call SaveReal(Hash_Stat,p,$45E22B52,tempR2)
endif
if tempR[10]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$5C6093F2)+tempR[10]
call SaveReal(Hash_Stat,p,$5C6093F2,tempR2)
endif
if tempR[11]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$BC3801A9)+tempR[11]
call SaveReal(Hash_Stat,p,$BC3801A9,tempR2)
endif
if tempR[12]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$50B06B2)+tempR[12]
call SaveReal(Hash_Stat,p,$50B06B2,tempR2)
endif
if tempR[13]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$2034A1E3)+tempR[13]
call SaveReal(Hash_Stat,p,$2034A1E3,tempR2)
endif
if tempR[14]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$5FF1A35F)+tempR[14]
call SaveReal(Hash_Stat,p,$5FF1A35F,tempR2)
endif
if tempR[15]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$2E182EFC)+tempR[15]
call SaveReal(Hash_Stat,p,$2E182EFC,tempR2)
endif
if tempR[16]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$9AB1A577)+tempR[16]
call SaveReal(Hash_Stat,p,$9AB1A577,tempR2)
endif
if tempR[18]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$62BD2901)+tempR[18]
call SaveReal(Hash_Stat,p,$62BD2901,tempR2)
endif
if tempR[19]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$3362B68D)+tempR[19]
call SaveReal(Hash_Stat,p,$3362B68D,tempR2)
endif
if tempR[20]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$F3FDA8C9)+tempR[20]
call SaveReal(Hash_Stat,p,$F3FDA8C9,tempR2)
endif
if tempR[21]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$10BA18C8)+tempR[21]
call SaveReal(Hash_Stat,p,$10BA18C8,tempR2)
endif
if tempR[22]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$A7543052)+tempR[22]
call SaveReal(Hash_Stat,p,$A7543052,tempR2)
endif
if tempR[23]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$9BC8E22B)+tempR[23]
call SaveReal(Hash_Stat,p,$9BC8E22B,tempR2)
endif
if tempR[24]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$A053013A)+tempR[24]
call SaveReal(Hash_Stat,p,$A053013A,tempR2)
set Luck[p]=tempR2
endif
if tempR[25]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$92D803F1)+tempR[25]
call SaveReal(Hash_Stat,p,$92D803F1,tempR2)
call SetUnitState(u,ConvertUnitState(0x20),tempR2)
set tempI2=LoadInteger(Hash_Stat,p,$ED314123)
set tempI2=tempI2+LoadInteger(Hash_Stat,p,$4309A2D3)
set ArmorP[p]=tempI2
set tempR2=LoadReal(Hash_Stat,p,$92D803F1)*(I2R(tempI2)*0.01)
set tempR2=LoadReal(Hash_Stat,p,$92D803F1)+tempR2
call SetUnitState(Charcter[p],ConvertUnitState(0x20),tempR2)
endif
if GetItemTypeId(i)=='I600' then
call SaveBoolean(Hash_Stat,p,$6AF32C8D,true)
endif
if GetItemTypeId(i)=='I601' then
call SaveBoolean(Hash_Stat,p,$C071F35D,true)
call SaveBoolean(Hash_Stat,p,$74372AE4,true)
call SaveInteger(Hash_Stat,p,$B473C9F,5)
endif
if GetItemTypeId(i)=='I201' then
call SaveBoolean(Hash_Stat,p,$74372AE4,true)
call SaveInteger(Hash_Stat,p,$B473C9F,1)
elseif GetItemTypeId(i)=='I301' then
call SaveBoolean(Hash_Stat,p,$74372AE4,true)
call SaveInteger(Hash_Stat,p,$B473C9F,2)
elseif GetItemTypeId(i)=='I401' then
call SaveBoolean(Hash_Stat,p,$74372AE4,true)
call SaveInteger(Hash_Stat,p,$B473C9F,3)
elseif GetItemTypeId(i)=='I501' then
call SaveBoolean(Hash_Stat,p,$74372AE4,true)
call SaveInteger(Hash_Stat,p,$B473C9F,4)
endif
if GetItemTypeId(i)=='I635' then
call SaveBoolean(Hash_Stat,p,$AA426FEF,true)
call SaveBoolean(Hash_Stat,p,$32786EE6,true)
call SaveInteger(Hash_Stat,p,$ADEC9AD7,5)
call SaveInteger(Hash_Stat,p,$53858E4A,GetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I635')))
set tempI2=LoadInteger(Hash_Stat,p,$53858E4A)
call StatUP(p,5*tempI2,"공격력")
endif
if GetItemTypeId(i)=='I235' then
call SaveBoolean(Hash_Stat,p,$32786EE6,true)
call SaveInteger(Hash_Stat,p,$ADEC9AD7,1)
elseif GetItemTypeId(i)=='I335' then
call SaveBoolean(Hash_Stat,p,$32786EE6,true)
call SaveInteger(Hash_Stat,p,$ADEC9AD7,2)
elseif GetItemTypeId(i)=='I435' then
call SaveBoolean(Hash_Stat,p,$32786EE6,true)
call SaveInteger(Hash_Stat,p,$ADEC9AD7,3)
elseif GetItemTypeId(i)=='I535' then
call SaveBoolean(Hash_Stat,p,$32786EE6,true)
call SaveInteger(Hash_Stat,p,$ADEC9AD7,4)
endif
if GetItemTypeId(i)=='I636' then
call SaveBoolean(Hash_Stat,p,$60333C98,true)
set tempI2=LoadInteger(udg_Hashtable,p,$132FA1F5)
call SaveInteger(udg_Hashtable,p,$132FA1F5,tempI2+1)
set tempR2=LoadReal(udg_Hashtable,p,$127510D2)
set tempR2=tempR2+(LoadReal(udg_Hashtable,p,$B491D29B))
call SaveReal(udg_Hashtable,p,$127510D2,tempR2)
endif
if GetItemTypeId(i)=='I604' then
call SaveBoolean(Hash_Stat,p,$50350C1D,true)
endif
if GetItemTypeId(i)=='I638' then
call SaveBoolean(Hash_Stat,p,$1BEB77C2,true)
endif
if GetItemTypeId(i)=='I624' then
call SaveBoolean(Hash_Stat,p,$560F1AB5,true)
endif
if GetItemTypeId(i)=='I602' then
call SaveBoolean(Hash_Stat,p,$52FAA289,true)
endif
if GetItemTypeId(i)=='I603' then
call SaveBoolean(Hash_Stat,p,$4F540F4D,true)
endif
if GetItemTypeId(i)=='I606' then
call SaveBoolean(Hash_Stat,p,$215416C9,true)
endif
if GetItemTypeId(i)=='I608' then
call SaveBoolean(Hash_Stat,p,$799EDCD1,true)
endif
if GetItemTypeId(i)=='I610' then
call SaveBoolean(Hash_Stat,p,$BE623654,true)
endif
if GetItemTypeId(i)=='I611' then
call SaveBoolean(Hash_Stat,p,$6BF8E68,true)
endif
if GetItemTypeId(i)=='I212' or GetItemTypeId(i)=='I312' or GetItemTypeId(i)=='I412' or GetItemTypeId(i)=='I512' or GetItemTypeId(i)=='I612' then
call SaveBoolean(Hash_Stat,p,$EDD69FA9,true)
if GetItemTypeId(i)=='I212' then
call SaveReal(Hash_Stat,p,$DEF8CE75,0.06)
elseif GetItemTypeId(i)=='I312' then
call SaveReal(Hash_Stat,p,$DEF8CE75,0.12)
elseif GetItemTypeId(i)=='I412' then
call SaveReal(Hash_Stat,p,$DEF8CE75,0.18)
elseif GetItemTypeId(i)=='I512' then
call SaveReal(Hash_Stat,p,$DEF8CE75,0.24)
elseif GetItemTypeId(i)=='I612' then
call SaveReal(Hash_Stat,p,$DEF8CE75,0.3)
set tempI2=LoadInteger(udg_Hashtable,p,$BB70E228)
call SaveInteger(udg_Hashtable,p,$BB70E228,tempI2+1)
set tempR2=LoadReal(udg_Hashtable,p,$C3EA9E83)
set tempR2=tempR2+(LoadReal(udg_Hashtable,p,$A8D71652))
call SaveReal(udg_Hashtable,p,$C3EA9E83,tempR2)
set tempI2=LoadInteger(udg_Hashtable,p,$132FA1F5)
call SaveInteger(udg_Hashtable,p,$132FA1F5,tempI2+1)
set tempR2=LoadReal(udg_Hashtable,p,$127510D2)
set tempR2=tempR2+(LoadReal(udg_Hashtable,p,$B491D29B))
call SaveReal(udg_Hashtable,p,$127510D2,tempR2)
endif
endif
if GetItemTypeId(i)=='I613' then
call SaveBoolean(Hash_Stat,p,$D70C6EE6,true)
endif
if GetItemTypeId(i)=='I214' or GetItemTypeId(i)=='I314' or GetItemTypeId(i)=='I414' or GetItemTypeId(i)=='I514' or GetItemTypeId(i)=='I614' then
call SaveBoolean(Hash_Stat,p,$2EB56588,true)
if GetItemTypeId(i)=='I214' then
call SaveReal(Hash_Stat,p,$56897A91,0.8)
elseif GetItemTypeId(i)=='I314' then
call SaveReal(Hash_Stat,p,$56897A91,0.16)
elseif GetItemTypeId(i)=='I414' then
call SaveReal(Hash_Stat,p,$56897A91,0.24)
elseif GetItemTypeId(i)=='I514' then
call SaveReal(Hash_Stat,p,$56897A91,0.32)
elseif GetItemTypeId(i)=='I614' then
call SaveReal(Hash_Stat,p,$56897A91,0.4)
set tempI2=LoadInteger(udg_Hashtable,p,$FAFE5485)
call SaveInteger(udg_Hashtable,p,$FAFE5485,tempI2+1)
set tempR2=LoadReal(udg_Hashtable,p,$9B58470C)
set tempR2=tempR2+(LoadReal(udg_Hashtable,p,$88E0F85F))
call SaveReal(udg_Hashtable,p,$9B58470C,tempR2)
set tempI2=LoadInteger(udg_Hashtable,p,$457BCFC0)
call SaveInteger(udg_Hashtable,p,$457BCFC0,tempI2+1)
set tempR2=LoadReal(udg_Hashtable,p,$E755DDB8)
set tempR2=tempR2+(LoadReal(udg_Hashtable,p,$ABD3E955))
call SaveReal(udg_Hashtable,p,$E755DDB8,tempR2)
set tempI2=LoadInteger(udg_Hashtable,p,$6074AEF9)
call SaveInteger(udg_Hashtable,p,$6074AEF9,tempI2+1)
set tempR2=LoadReal(udg_Hashtable,p,$A2229E00)
set tempR2=tempR2+(LoadReal(udg_Hashtable,p,$5E6EF8DA))
call SaveReal(udg_Hashtable,p,$A2229E00,tempR2)
endif
endif
if GetItemTypeId(i)=='I615' then
call SaveBoolean(Hash_Stat,p,$A5B678FE,true)
endif
if GetItemTypeId(i)=='I616' then
set tempR2=LoadReal(udg_Hashtable,p,$46D2FE81)-0.1
call SetUnitState(u,ConvertUnitState(0x25),tempR2)
call SaveReal(udg_Hashtable,p,$46D2FE81,tempR2)
endif
if GetItemTypeId(i)=='I217' or GetItemTypeId(i)=='I317' or GetItemTypeId(i)=='I417' or GetItemTypeId(i)=='I517' or GetItemTypeId(i)=='I617' then
if GetItemTypeId(i)=='I217' then
set DashCool[p]=DashCool[p]-0.1
elseif GetItemTypeId(i)=='I317' then
set DashCool[p]=DashCool[p]-0.2
elseif GetItemTypeId(i)=='I417' then
set DashCool[p]=DashCool[p]-0.3
elseif GetItemTypeId(i)=='I517' then
set DashCool[p]=DashCool[p]-0.4
elseif GetItemTypeId(i)=='I617' then
set DashCool[p]=DashCool[p]-0.5
call SaveBoolean(Hash_Stat,p,$EE4F1B3F,true)
endif
endif
if GetItemTypeId(i)=='I219' or GetItemTypeId(i)=='I319' or GetItemTypeId(i)=='I419' or GetItemTypeId(i)=='I519' or GetItemTypeId(i)=='I619' then
call SaveBoolean(Hash_Stat,p,$616BEE59,true)
if GetItemTypeId(i)=='I219' then
call SaveReal(Hash_Stat,p,$C8FBFF24,0.06)
elseif GetItemTypeId(i)=='I319' then
call SaveReal(Hash_Stat,p,$C8FBFF24,0.02)
elseif GetItemTypeId(i)=='I419' then
call SaveReal(Hash_Stat,p,$C8FBFF24,0.18)
elseif GetItemTypeId(i)=='I519' then
call SaveReal(Hash_Stat,p,$C8FBFF24,0.24)
elseif GetItemTypeId(i)=='I619' then
call SaveReal(Hash_Stat,p,$C8FBFF24,0.3)
call SaveBoolean(Hash_Stat,p,$B00807CF,true)
endif
endif
if GetItemTypeId(i)=='I620' then
call SaveBoolean(Hash_Stat,p,$BDBC23D6,true)
endif
if GetItemTypeId(i)=='I621' then
call SaveBoolean(Hash_Stat,p,$5F87D772,true)
endif
if GetItemTypeId(i)=='I623' then
call SaveBoolean(Hash_Stat,p,$869F214D,true)
endif
if GetItemTypeId(i)=='I626' then
call SaveBoolean(Hash_Stat,p,$97477F7C,true)
endif
if GetItemTypeId(i)=='I627' then
call SaveBoolean(Hash_Stat,p,$B3E72325,true)
endif
if GetItemTypeId(i)=='I628' then
call SaveBoolean(Hash_Stat,p,$7F82C721,true)
endif
if GetItemTypeId(i)=='I629' then
call SaveBoolean(Hash_Stat,p,$E9E2B5AE,true)
endif
if GetItemTypeId(i)=='I630' then
call TimerStart(Mono[p],3,true,null)
endif
if GetItemTypeId(i)=='I234' or GetItemTypeId(i)=='I334' or GetItemTypeId(i)=='I434' or GetItemTypeId(i)=='I534' or GetItemTypeId(i)=='I634' then
if GetItemTypeId(i)=='I234' then
call SaveInteger(Hash_Stat,p,$5521A0C,3)
call SaveInteger(Hash_Stat,p,$82EB3EEE,10)
elseif GetItemTypeId(i)=='I334' then
call SaveInteger(Hash_Stat,p,$5521A0C,6)
call SaveInteger(Hash_Stat,p,$82EB3EEE,20)
elseif GetItemTypeId(i)=='I434' then
call SaveInteger(Hash_Stat,p,$5521A0C,9)
call SaveInteger(Hash_Stat,p,$82EB3EEE,30)
elseif GetItemTypeId(i)=='I534' then
call SaveInteger(Hash_Stat,p,$5521A0C,12)
call SaveInteger(Hash_Stat,p,$82EB3EEE,40)
elseif GetItemTypeId(i)=='I634' then
call SaveInteger(Hash_Stat,p,$5521A0C,20)
call SaveInteger(Hash_Stat,p,$82EB3EEE,50)
endif
endif
if GetItemTypeId(i)=='I633' then
call SaveBoolean(Hash_Stat,p,$9B5D7717,true)
endif
if GetItemTypeId(i)=='I640' then
call SaveBoolean(Hash_Stat,p,$33EA6442,true)
endif
if GetItemTypeId(i)=='I641' then
call SaveBoolean(Hash_Stat,p,$9D41BD23,true)
endif
if GetItemTypeId(i)=='I642' then
call SaveBoolean(Hash_Stat,p,$76DA57E,true)
endif
if GetItemTypeId(i)=='I643' or GetItemTypeId(i)=='I743' or GetItemTypeId(i)=='I843' or GetItemTypeId(i)=='I943' then
if GetItemTypeId(i)=='I643' then
call SaveReal(Hash_Stat,p,$6FC2025B,1)
endif
if GetItemTypeId(i)=='I743' then
call SaveReal(Hash_Stat,p,$6FC2025B,2)
endif
if GetItemTypeId(i)=='I843' then
call SaveReal(Hash_Stat,p,$6FC2025B,3)
endif
if GetItemTypeId(i)=='I943' then
call SaveReal(Hash_Stat,p,$6FC2025B,5)
endif
call SaveBoolean(Hash_Stat,p,$9BB9078A,true)
endif
if GetItemTypeId(i)=='I645' then
call SaveBoolean(Hash_Stat,p,$6093226A,true)
set Range[p]=Range[p]+200
endif
if GetItemTypeId(i)=='I245' then
set Range[p]=Range[p]+40
elseif GetItemTypeId(i)=='I345' then
set Range[p]=Range[p]+80
elseif GetItemTypeId(i)=='I445' then
set Range[p]=Range[p]+120
elseif GetItemTypeId(i)=='I545' then
set Range[p]=Range[p]+160
endif
if GetItemTypeId(i)=='I205' then
call SaveInteger(Hash_Stat,p,$10EACD89,1)
elseif GetItemTypeId(i)=='I305' then
call SaveInteger(Hash_Stat,p,$10EACD89,2)
elseif GetItemTypeId(i)=='I405' then
call SaveInteger(Hash_Stat,p,$10EACD89,3)
elseif GetItemTypeId(i)=='I505' then
call SaveInteger(Hash_Stat,p,$10EACD89,4)
elseif GetItemTypeId(i)=='I605' then
call SaveInteger(Hash_Stat,p,$10EACD89,5)
set bj_lastCreatedUnit=CreateUnit(Player(p-1),'idm1',GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),270)
call SaveUnitHandle(udg_Hash,p,$A3CE90DF,bj_lastCreatedUnit)
call TriggerRegisterTimerExpireEvent(gg_trg_dron_move,udg_n007timer[p])
call TimerStart(udg_n007timer[p],1.00,true,null)
endif
if GetItemTypeId(i)=='I646' then
call SaveBoolean(Hash_Stat,p,$75CEA0EA,true)
endif
if GetItemTypeId(i)=='I647' then
call SaveBoolean(Hash_Stat,p,$67D62E74,true)
call SaveInteger(Hash_Stat,p,$E3F19892,GetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I647')))
set tempI2=LoadInteger(Hash_Stat,p,$E3F19892)
call StatUP(p,100*tempI2,"공격력")
if tempI2==10 then
call StatUP(p,10,"피감")
endif
endif
if GetItemTypeId(i)=='I648' then
call SaveBoolean(Hash_Stat,p,$E326DCAD,true)
endif
if GetItemTypeId(i)=='I649' then
call SaveBoolean(Hash_Stat,p,$FA682A40,true)
endif
if GetItemTypeId(i)=='I650' then
call SaveBoolean(Hash_Stat,p,$3E532493,true)
endif
if GetItemTypeId(i)=='I251' then
set Range[p]=Range[p]+40
elseif GetItemTypeId(i)=='I351' then
set Range[p]=Range[p]+80
elseif GetItemTypeId(i)=='I451' then
set Range[p]=Range[p]+120
elseif GetItemTypeId(i)=='I551' then
set Range[p]=Range[p]+160
elseif GetItemTypeId(i)=='I651' then
set Range[p]=Range[p]+200
call SaveBoolean(Hash_Stat,p,$F89AADC1,true)
endif
if GetItemTypeId(i)=='I652' then
call SaveBoolean(Hash_Stat,p,$8F595DEB,true)
endif
if GetItemTypeId(i)=='I254' then
set DashCool[p]=DashCool[p]-0.1
set DashMove[p]=DashMove[p]+4
elseif GetItemTypeId(i)=='I354' then
set DashCool[p]=DashCool[p]-0.2
set DashMove[p]=DashMove[p]+8
elseif GetItemTypeId(i)=='I454' then
set DashCool[p]=DashCool[p]-0.3
set DashMove[p]=DashMove[p]+12
elseif GetItemTypeId(i)=='I554' then
set DashCool[p]=DashCool[p]-0.4
set DashMove[p]=DashMove[p]+16
elseif GetItemTypeId(i)=='I654' then
set DashCool[p]=DashCool[p]-0.5
set DashMove[p]=DashMove[p]+20
elseif GetItemTypeId(i)=='I754' then
set DashCool[p]=DashCool[p]-1.0
set DashMove[p]=DashMove[p]+30
endif
if GetItemTypeId(i)=='I654' then
call SaveBoolean(Hash_Stat,p,$3B76FF1A,true)
call SaveInteger(Hash_Stat,p,$929FD517,GetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I654')))
endif
if GetItemTypeId(i)=='I754' then
call SaveBoolean(Hash_Stat,p,$4D0EA1A1,true)
endif
call TimerStart(udg_infoRe[p],0.01,false,null)
set u=null
set i=null
endfunction
function itemLost takes integer p returns nothing
local integer array tempI
local real array tempR
local integer tempI2
local real tempR2
local integer a=0
local unit u=Charcter[p]
local item i=LoadItemHandle(udg_Hash,p,$C51B137D)
local effect ef=null
set tempI[a]=0
loop
exitwhen a==19
set a=a+1
set tempI[a]=0
endloop
set a=0
set tempR[a]=0
loop
exitwhen a==25
set a=a+1
set tempR[a]=0
endloop
set tempI[0]=tempI[0]+LoadInteger(Hash_Stat,GetItemTypeId(i),$FCD961C9)
set tempI[1]=tempI[1]+LoadInteger(Hash_Stat,GetItemTypeId(i),$4203D9C2)
set tempI[2]=tempI[2]+LoadInteger(Hash_Stat,GetItemTypeId(i),$D20F099)
set tempI[3]=tempI[3]+LoadInteger(Hash_Stat,GetItemTypeId(i),$B38BEB44)
set tempI[4]=tempI[4]+LoadInteger(Hash_Stat,GetItemTypeId(i),$22601A7A)
set tempI[5]=tempI[5]+LoadInteger(Hash_Stat,GetItemTypeId(i),$9298D98F)
set tempI[6]=tempI[6]+LoadInteger(Hash_Stat,GetItemTypeId(i),$EFFA2021)
set tempI[7]=tempI[7]+LoadInteger(Hash_Stat,GetItemTypeId(i),$753B4F2F)
set tempI[8]=tempI[8]+LoadInteger(Hash_Stat,GetItemTypeId(i),$3181F127)
set tempI[9]=tempI[9]+LoadInteger(Hash_Stat,GetItemTypeId(i),$D8C9D96B)
set tempI[10]=tempI[10]+LoadInteger(Hash_Stat,GetItemTypeId(i),$A3A34F6C)
set tempI[11]=tempI[11]+LoadInteger(Hash_Stat,GetItemTypeId(i),$C46B0D8B)
set tempI[12]=tempI[12]+LoadInteger(Hash_Stat,GetItemTypeId(i),$1D27E6A1)
set tempI[13]=tempI[13]+LoadInteger(Hash_Stat,GetItemTypeId(i),$5B2587EB)
set tempI[15]=tempI[15]+LoadInteger(Hash_Stat,GetItemTypeId(i),$ED314123)
set tempI[16]=tempI[16]+LoadInteger(Hash_Stat,GetItemTypeId(i),$C18D16A0)
set tempI[17]=tempI[17]+LoadInteger(Hash_Stat,GetItemTypeId(i),$924944F9)
set tempI[18]=tempI[18]+LoadInteger(Hash_Stat,GetItemTypeId(i),$8885555B)
set tempI[19]=tempI[19]+LoadInteger(Hash_Stat,GetItemTypeId(i),$B7E7C8AD)
set tempR[0]=tempR[0]+LoadReal(Hash_Stat,GetItemTypeId(i),$7FAFA384)
set tempR[1]=tempR[1]+LoadReal(Hash_Stat,GetItemTypeId(i),$A62A5B82)
set tempR[2]=tempR[2]+LoadReal(Hash_Stat,GetItemTypeId(i),$164C40C9)
set tempR[3]=tempR[3]+LoadReal(Hash_Stat,GetItemTypeId(i),$8EB4E7D9)
set tempR[4]=tempR[4]+LoadReal(Hash_Stat,GetItemTypeId(i),$6DC36456)
set tempR[5]=tempR[5]+LoadReal(Hash_Stat,GetItemTypeId(i),$34D9AB92)
set tempR[6]=tempR[6]+LoadReal(Hash_Stat,GetItemTypeId(i),$337F1BA1)
set tempR[7]=tempR[7]+LoadReal(Hash_Stat,GetItemTypeId(i),$540C61C7)
set tempR[8]=tempR[8]+LoadReal(Hash_Stat,GetItemTypeId(i),$1486341)
set tempR[9]=tempR[9]+LoadReal(Hash_Stat,GetItemTypeId(i),$45E22B52)
set tempR[10]=tempR[10]+LoadReal(Hash_Stat,GetItemTypeId(i),$5C6093F2)
set tempR[11]=tempR[11]+LoadReal(Hash_Stat,GetItemTypeId(i),$BC3801A9)
set tempR[12]=tempR[12]+LoadReal(Hash_Stat,GetItemTypeId(i),$50B06B2)
set tempR[13]=tempR[13]+LoadReal(Hash_Stat,GetItemTypeId(i),$2034A1E3)
set tempR[14]=tempR[14]+LoadReal(Hash_Stat,GetItemTypeId(i),$5FF1A35F)
set tempR[15]=tempR[15]+LoadReal(Hash_Stat,GetItemTypeId(i),$2E182EFC)
set tempR[16]=tempR[16]+LoadReal(Hash_Stat,GetItemTypeId(i),$9AB1A577)
set tempR[18]=tempR[18]+LoadReal(Hash_Stat,GetItemTypeId(i),$62BD2901)
set tempR[19]=tempR[19]+LoadReal(Hash_Stat,GetItemTypeId(i),$3362B68D)
set tempR[20]=tempR[20]+LoadReal(Hash_Stat,GetItemTypeId(i),$F3FDA8C9)
set tempR[21]=tempR[21]+LoadReal(Hash_Stat,GetItemTypeId(i),$10BA18C8)
set tempR[22]=tempR[22]+LoadReal(Hash_Stat,GetItemTypeId(i),$A7543052)
set tempR[23]=tempR[23]+LoadReal(Hash_Stat,GetItemTypeId(i),$9BC8E22B)
set tempR[24]=tempR[24]+LoadReal(Hash_Stat,GetItemTypeId(i),$A053013A)
set tempR[25]=tempR[25]+LoadReal(Hash_Stat,GetItemTypeId(i),$92D803F1)
if tempI[0]!=0 then
call SetUnitState(u,UNIT_STATE_MAX_LIFE,GetUnitState(u,UNIT_STATE_MAX_LIFE)-tempI[0])
endif
if tempI[1]!=0 then
call SetUnitState(u,UNIT_STATE_MAX_MANA,GetUnitState(u,UNIT_STATE_MAX_MANA)-tempI[1])
endif
if tempI[2]!=0 then
call SetHeroStr(u,GetHeroStr(u,false)-tempI[2],true)
endif
if tempI[3]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$B38BEB44)-tempI[3]
call SaveInteger(Hash_Stat,p,$B38BEB44,tempI2)
endif
if tempI[4]!=0 then
set tempR2=GetUnitState(u,ConvertUnitState(0x12))-tempI[4]
call SetUnitState(u,ConvertUnitState(0x12),tempR2)
if CharcterStat[p]then
call SetHeroAgi(u,GetHeroAgi(u,false)-tempI[4],true)
else
call SetHeroInt(u,GetHeroInt(u,false)-tempI[4],true)
endif
endif
if tempI[5]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$9298D98F)-tempI[5]
call SaveInteger(Hash_Stat,p,$9298D98F,tempI2)
endif
if tempI[6]!=0 then
set tempR2=GetUnitState(u,ConvertUnitState(0x12))-tempI[6]
call SetUnitState(u,ConvertUnitState(0x12),tempR2)
call SetHeroStr(u,GetHeroStr(u,false)-tempI[6],true)
call SetHeroAgi(u,GetHeroAgi(u,false)-tempI[6],true)
call SetHeroInt(u,GetHeroInt(u,false)-tempI[6],true)
endif
if tempI[7]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$753B4F2F)-tempI[7]
call SaveInteger(Hash_Stat,p,$753B4F2F,tempI2)
endif
if tempI[8]!=0 then
set tempR2=GetUnitState(u,ConvertUnitState(0x12))-tempI[8]
call SetUnitState(u,ConvertUnitState(0x12),tempR2)
endif
if tempI[9]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$D8C9D96B)-tempI[9]
call SaveInteger(Hash_Stat,p,$D8C9D96B,tempI2)
endif
if tempI[10]!=0 then
call SetHeroAgi(u,GetHeroAgi(u,false)-tempI[10],true)
if CharcterStat[p]then
set tempR2=GetUnitState(u,ConvertUnitState(0x12))-tempI[10]
call SetUnitState(u,ConvertUnitState(0x12),tempR2)
endif
endif
if tempI[11]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$C46B0D8B)-tempI[11]
call SaveInteger(Hash_Stat,p,$C46B0D8B,tempI2)
endif
if tempI[12]!=0 then
call SetHeroInt(u,GetHeroInt(u,false)-tempI[12],true)
if not CharcterStat[p]then
set tempR2=GetUnitState(u,ConvertUnitState(0x12))-tempI[12]
call SetUnitState(u,ConvertUnitState(0x12),tempR2)
endif
endif
if tempI[13]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$5B2587EB)-tempI[13]
call SaveInteger(Hash_Stat,p,$5B2587EB,tempI2)
endif
if tempI[15]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$ED314123)-tempI[15]
call SaveInteger(Hash_Stat,p,$ED314123,tempI2)
endif
if tempI[16]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$C18D16A0)-tempI[16]
call SaveInteger(Hash_Stat,p,$C18D16A0,tempI2)
endif
if tempI[17]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$924944F9)-tempI[17]
call SaveInteger(Hash_Stat,p,$924944F9,tempI2)
endif
if tempI[18]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$8885555B)-tempI[18]
call SaveInteger(Hash_Stat,p,$8885555B,tempI2)
endif
if tempI[19]!=0 then
set tempI2=LoadInteger(Hash_Stat,p,$B7E7C8AD)-tempI[19]
call SaveInteger(Hash_Stat,p,$B7E7C8AD,tempI2)
endif
if tempR[0]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$7FAFA384)-tempR[0]
call SaveReal(Hash_Stat,p,$7FAFA384,tempR2)
endif
if tempR[1]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$A62A5B82)-tempR[1]
call SaveReal(Hash_Stat,p,$A62A5B82,tempR2)
endif
if tempR[2]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$164C40C9)-tempR[2]
call SaveReal(Hash_Stat,p,$164C40C9,tempR2)
endif
if tempR[3]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$8EB4E7D9)-tempR[3]
call SaveReal(Hash_Stat,p,$8EB4E7D9,tempR2)
endif
if tempR[4]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$6DC36456)-tempR[4]
call SaveReal(Hash_Stat,p,$6DC36456,tempR2)
endif
if tempR[5]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$34D9AB92)-tempR[5]
call SaveReal(Hash_Stat,p,$34D9AB92,tempR2)
endif
if tempR[6]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$337F1BA1)-tempR[6]
call SaveReal(Hash_Stat,p,$337F1BA1,tempR2)
endif
if tempR[7]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$540C61C7)-tempR[7]
call SaveReal(Hash_Stat,p,$540C61C7,tempR2)
endif
if tempR[8]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$1486341)-tempR[8]
call SaveReal(Hash_Stat,p,$1486341,tempR2)
endif
if tempR[9]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$45E22B52)-tempR[9]
call SaveReal(Hash_Stat,p,$45E22B52,tempR2)
endif
if tempR[10]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$5C6093F2)-tempR[10]
call SaveReal(Hash_Stat,p,$5C6093F2,tempR2)
endif
if tempR[11]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$BC3801A9)-tempR[11]
call SaveReal(Hash_Stat,p,$BC3801A9,tempR2)
endif
if tempR[12]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$50B06B2)-tempR[12]
call SaveReal(Hash_Stat,p,$50B06B2,tempR2)
endif
if tempR[13]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$2034A1E3)-tempR[13]
call SaveReal(Hash_Stat,p,$2034A1E3,tempR2)
endif
if tempR[14]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$5FF1A35F)-tempR[14]
call SaveReal(Hash_Stat,p,$5FF1A35F,tempR2)
endif
if tempR[15]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$2E182EFC)-tempR[15]
call SaveReal(Hash_Stat,p,$2E182EFC,tempR2)
endif
if tempR[16]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$9AB1A577)-tempR[16]
call SaveReal(Hash_Stat,p,$9AB1A577,tempR2)
endif
if tempR[18]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$62BD2901)-tempR[18]
call SaveReal(Hash_Stat,p,$62BD2901,tempR2)
endif
if tempR[19]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$3362B68D)-tempR[19]
call SaveReal(Hash_Stat,p,$3362B68D,tempR2)
endif
if tempR[20]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$F3FDA8C9)-tempR[20]
call SaveReal(Hash_Stat,p,$F3FDA8C9,tempR2)
endif
if tempR[21]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$10BA18C8)-tempR[21]
call SaveReal(Hash_Stat,p,$10BA18C8,tempR2)
endif
if tempR[22]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$A7543052)-tempR[22]
call SaveReal(Hash_Stat,p,$A7543052,tempR2)
endif
if tempR[23]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$9BC8E22B)-tempR[23]
call SaveReal(Hash_Stat,p,$9BC8E22B,tempR2)
endif
if tempR[24]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$A053013A)-tempR[24]
call SaveReal(Hash_Stat,p,$A053013A,tempR2)
set Luck[p]=tempR2
endif
if tempR[25]!=0 then
set tempR2=LoadReal(Hash_Stat,p,$92D803F1)-tempR[25]
call SaveReal(Hash_Stat,p,$92D803F1,tempR2)
call SetUnitState(u,ConvertUnitState(0x20),tempR2)
set tempI2=LoadInteger(Hash_Stat,p,$ED314123)
set tempI2=tempI2+LoadInteger(Hash_Stat,p,$4309A2D3)
set ArmorP[p]=tempI2
set tempR2=LoadReal(Hash_Stat,p,$92D803F1)*(I2R(tempI2)*0.01)
set tempR2=LoadReal(Hash_Stat,p,$92D803F1)+tempR2
call SetUnitState(Charcter[p],ConvertUnitState(0x20),tempR2)
endif
if GetItemTypeId(i)=='I600' then
call SaveBoolean(Hash_Stat,p,$6AF32C8D,false)
endif
if GetItemTypeId(i)=='I601' then
call SaveBoolean(Hash_Stat,p,$C071F35D,false)
call SaveBoolean(Hash_Stat,p,$74372AE4,false)
endif
if GetItemTypeId(i)=='I206' or GetItemTypeId(i)=='I306' or GetItemTypeId(i)=='I406' or GetItemTypeId(i)=='I506' then
if u==BossAgro then
set BossAgro=null
endif
endif
if GetItemTypeId(i)=='I606' then
call SaveBoolean(Hash_Stat,p,$215416C9,false)
if u==BossAgro then
set BossAgro=null
endif
endif
if GetItemTypeId(i)=='I201' or GetItemTypeId(i)=='I301' or GetItemTypeId(i)=='I401' or GetItemTypeId(i)=='I501' then
call SaveBoolean(Hash_Stat,p,$74372AE4,false)
endif
if GetItemTypeId(i)=='I635' then
call SaveBoolean(Hash_Stat,p,$AA426FEF,false)
call SaveBoolean(Hash_Stat,p,$32786EE6,false)
set tempI2=LoadInteger(Hash_Stat,p,$53858E4A)
call StatUP(p,-5*tempI2,"공격력")
endif
if GetItemTypeId(i)=='I235' or GetItemTypeId(i)=='I335' or GetItemTypeId(i)=='I435' or GetItemTypeId(i)=='I535' then
call SaveBoolean(Hash_Stat,p,$32786EE6,false)
endif
if GetItemTypeId(i)=='I636' then
call SaveBoolean(Hash_Stat,p,$60333C98,false)
set tempI2=LoadInteger(udg_Hashtable,p,$132FA1F5)
call SaveInteger(udg_Hashtable,p,$132FA1F5,tempI2-1)
set tempR2=LoadReal(udg_Hashtable,p,$127510D2)
set tempR2=tempR2+(LoadReal(udg_Hashtable,p,$B491D29B))
call SaveReal(udg_Hashtable,p,$127510D2,tempR2)
endif
if GetItemTypeId(i)=='I604' then
call SaveBoolean(Hash_Stat,p,$50350C1D,false)
endif
if GetItemTypeId(i)=='I638' then
call SaveBoolean(Hash_Stat,p,$1BEB77C2,false)
endif
if GetItemTypeId(i)=='I624' then
if LoadBoolean(Hash_Stat,p,$B8531136)==true then
call SaveBoolean(Hash_Stat,p,$560F1AB5,false)
call SaveReal(Hash_Stat,p,$21C5A944,0)
call SaveBoolean(Hash_Stat,p,$B8531136,false)
call StatUP(p,-0.05,"물리흡")
call PauseTimer(Aluzard[p])
set ef=LoadEffectHandle(udg_Hash,p,$858BC781)
call DestroyEffect(ef)
endif
endif
if GetItemTypeId(i)=='I602' then
call SaveBoolean(Hash_Stat,p,$52FAA289,false)
endif
if GetItemTypeId(i)=='I603' then
call SaveBoolean(Hash_Stat,p,$4F540F4D,false)
endif
if GetItemTypeId(i)=='I608' then
call SaveBoolean(Hash_Stat,p,$799EDCD1,false)
endif
if GetItemTypeId(i)=='I610' then
call SaveBoolean(Hash_Stat,p,$BE623654,false)
endif
if GetItemTypeId(i)=='I611' then
call SaveBoolean(Hash_Stat,p,$6BF8E68,false)
endif
if GetItemTypeId(i)=='I212' or GetItemTypeId(i)=='I312' or GetItemTypeId(i)=='I412' or GetItemTypeId(i)=='I512' or GetItemTypeId(i)=='I612' then
call SaveBoolean(Hash_Stat,p,$EDD69FA9,true)
call SaveReal(Hash_Stat,p,$DEF8CE75,0.0)
if GetItemTypeId(i)=='I612' then
set tempI2=LoadInteger(udg_Hashtable,p,$BB70E228)
call SaveInteger(udg_Hashtable,p,$BB70E228,tempI2-1)
set tempR2=LoadReal(udg_Hashtable,p,$C3EA9E83)
set tempR2=tempR2-(LoadReal(udg_Hashtable,p,$A8D71652))
call SaveReal(udg_Hashtable,p,$C3EA9E83,tempR2)
set tempI2=LoadInteger(udg_Hashtable,p,$132FA1F5)
call SaveInteger(udg_Hashtable,p,$132FA1F5,tempI2-1)
set tempR2=LoadReal(udg_Hashtable,p,$127510D2)
set tempR2=tempR2-(LoadReal(udg_Hashtable,p,$B491D29B))
call SaveReal(udg_Hashtable,p,$127510D2,tempR2)
endif
endif
if GetItemTypeId(i)=='I613' then
call SaveBoolean(Hash_Stat,p,$D70C6EE6,false)
endif
if GetItemTypeId(i)=='I214' or GetItemTypeId(i)=='I314' or GetItemTypeId(i)=='I414' or GetItemTypeId(i)=='I514' or GetItemTypeId(i)=='I614' then
call SaveBoolean(Hash_Stat,p,$2EB56588,false)
call SaveReal(Hash_Stat,p,$56897A91,0)
if GetItemTypeId(i)=='I614' then
set tempI2=LoadInteger(udg_Hashtable,p,$FAFE5485)
call SaveInteger(udg_Hashtable,p,$FAFE5485,tempI2-1)
set tempR2=LoadReal(udg_Hashtable,p,$9B58470C)
set tempR2=tempR2-(LoadReal(udg_Hashtable,p,$88E0F85F))
call SaveReal(udg_Hashtable,p,$9B58470C,tempR2)
set tempI2=LoadInteger(udg_Hashtable,p,$457BCFC0)
call SaveInteger(udg_Hashtable,p,$457BCFC0,tempI2-1)
set tempR2=LoadReal(udg_Hashtable,p,$E755DDB8)
set tempR2=tempR2-(LoadReal(udg_Hashtable,p,$ABD3E955))
call SaveReal(udg_Hashtable,p,$E755DDB8,tempR2)
set tempI2=LoadInteger(udg_Hashtable,p,$6074AEF9)
call SaveInteger(udg_Hashtable,p,$6074AEF9,tempI2-1)
set tempR2=LoadReal(udg_Hashtable,p,$A2229E00)
set tempR2=tempR2-(LoadReal(udg_Hashtable,p,$5E6EF8DA))
call SaveReal(udg_Hashtable,p,$A2229E00,tempR2)
endif
endif
if GetItemTypeId(i)=='I615' then
call SaveBoolean(Hash_Stat,p,$A5B678FE,false)
endif
if GetItemTypeId(i)=='I616' then
set tempR2=LoadReal(udg_Hashtable,p,$46D2FE81)+0.1
call SetUnitState(u,ConvertUnitState(0x25),tempR2)
call SaveReal(udg_Hashtable,p,$46D2FE81,tempR2)
endif
if GetItemTypeId(i)=='I217' or GetItemTypeId(i)=='I317' or GetItemTypeId(i)=='I417' or GetItemTypeId(i)=='I517' or GetItemTypeId(i)=='I617' then
if GetItemTypeId(i)=='I217' then
set DashCool[p]=DashCool[p]+0.1
elseif GetItemTypeId(i)=='I317' then
set DashCool[p]=DashCool[p]+0.2
elseif GetItemTypeId(i)=='I417' then
set DashCool[p]=DashCool[p]+0.3
elseif GetItemTypeId(i)=='I517' then
set DashCool[p]=DashCool[p]+0.4
elseif GetItemTypeId(i)=='I617' then
set DashCool[p]=DashCool[p]+0.5
call SaveBoolean(Hash_Stat,p,$EE4F1B3F,false)
endif
endif
if GetItemTypeId(i)=='I219' or GetItemTypeId(i)=='I319' or GetItemTypeId(i)=='I419' or GetItemTypeId(i)=='I519' or GetItemTypeId(i)=='I619' then
call SaveBoolean(Hash_Stat,p,$616BEE59,false)
call SaveReal(Hash_Stat,p,$C8FBFF24,0)
if GetItemTypeId(i)=='I619' then
call SaveBoolean(Hash_Stat,p,$B00807CF,false)
endif
endif
if GetItemTypeId(i)=='I621' then
call SaveBoolean(Hash_Stat,p,$5F87D772,false)
endif
if GetItemTypeId(i)=='I626' then
call SaveBoolean(Hash_Stat,p,$97477F7C,false)
endif
if GetItemTypeId(i)=='I627' then
call SaveBoolean(Hash_Stat,p,$B3E72325,false)
endif
if GetItemTypeId(i)=='I628' then
call SaveBoolean(Hash_Stat,p,$7F82C721,false)
endif
if GetItemTypeId(i)=='I629' then
call SaveBoolean(Hash_Stat,p,$E9E2B5AE,false)
endif
if GetItemTypeId(i)=='I234' or GetItemTypeId(i)=='I334' or GetItemTypeId(i)=='I434' or GetItemTypeId(i)=='I534' or GetItemTypeId(i)=='I634' then
call SaveInteger(Hash_Stat,p,$5521A0C,0)
call SaveInteger(Hash_Stat,p,$82EB3EEE,0)
endif
if GetItemTypeId(i)=='I630' then
call PauseTimer(Mono[p])
endif
if GetItemTypeId(i)=='I633' then
call SaveBoolean(Hash_Stat,p,$9B5D7717,false)
endif
if GetItemTypeId(i)=='I640' then
call SaveBoolean(Hash_Stat,p,$33EA6442,false)
endif
if GetItemTypeId(i)=='I641' then
call SaveBoolean(Hash_Stat,p,$9D41BD23,false)
endif
if GetItemTypeId(i)=='I642' then
call SaveBoolean(Hash_Stat,p,$76DA57E,false)
endif
if GetItemTypeId(i)=='I643' or GetItemTypeId(i)=='I743' or GetItemTypeId(i)=='I843' or GetItemTypeId(i)=='I943' then
call SaveBoolean(Hash_Stat,p,$9BB9078A,false)
endif
if GetItemTypeId(i)=='I645' then
call SaveBoolean(Hash_Stat,p,$6093226A,false)
set Range[p]=Range[p]-200
endif
if GetItemTypeId(i)=='I245' then
set Range[p]=Range[p]-40
elseif GetItemTypeId(i)=='I345' then
set Range[p]=Range[p]-80
elseif GetItemTypeId(i)=='I445' then
set Range[p]=Range[p]-120
elseif GetItemTypeId(i)=='I545' then
set Range[p]=Range[p]-160
endif
if GetItemTypeId(i)=='I205' or GetItemTypeId(i)=='I305' or GetItemTypeId(i)=='I405' or GetItemTypeId(i)=='I505' or GetItemTypeId(i)=='I605' then
call SaveInteger(Hash_Stat,p,$10EACD89,0)
if GetItemTypeId(i)=='I605' then
call RemoveUnit(LoadUnitHandle(udg_Hash,p,$A3CE90DF))
endif
endif
if GetItemTypeId(i)=='I646' then
call SaveBoolean(Hash_Stat,p,$75CEA0EA,false)
endif
if GetItemTypeId(i)=='I647' then
call SaveBoolean(Hash_Stat,p,$67D62E74,false)
set tempI2=LoadInteger(Hash_Stat,p,$E3F19892)
call StatUP(p,-100*tempI2,"공격력")
if tempI2==10 then
call StatUP(p,-10,"피감")
endif
call SaveInteger(Hash_Stat,p,$E3F19892,0)
endif
if GetItemTypeId(i)=='I648' then
call SaveBoolean(Hash_Stat,p,$E326DCAD,false)
endif
if GetItemTypeId(i)=='I649' then
call SaveBoolean(Hash_Stat,p,$FA682A40,false)
endif
if GetItemTypeId(i)=='I650' then
call SaveBoolean(Hash_Stat,p,$3E532493,false)
endif
if GetItemTypeId(i)=='I251' then
set Range[p]=Range[p]-40
elseif GetItemTypeId(i)=='I351' then
set Range[p]=Range[p]-80
elseif GetItemTypeId(i)=='I451' then
set Range[p]=Range[p]-120
elseif GetItemTypeId(i)=='I551' then
set Range[p]=Range[p]-160
elseif GetItemTypeId(i)=='I651' then
set Range[p]=Range[p]-200
call SaveBoolean(Hash_Stat,p,$F89AADC1,false)
endif
if GetItemTypeId(i)=='I652' then
call SaveBoolean(Hash_Stat,p,$8F595DEB,false)
endif
if GetItemTypeId(i)=='I254' then
set DashCool[p]=DashCool[p]+0.1
set DashMove[p]=DashMove[p]-4
elseif GetItemTypeId(i)=='I354' then
set DashCool[p]=DashCool[p]+0.2
set DashMove[p]=DashMove[p]-8
elseif GetItemTypeId(i)=='I454' then
set DashCool[p]=DashCool[p]+0.3
set DashMove[p]=DashMove[p]-12
elseif GetItemTypeId(i)=='I554' then
set DashCool[p]=DashCool[p]+0.4
set DashMove[p]=DashMove[p]-16
elseif GetItemTypeId(i)=='I654' then
set DashCool[p]=DashCool[p]+0.5
set DashMove[p]=DashMove[p]-20
elseif GetItemTypeId(i)=='I754' then
set DashCool[p]=DashCool[p]+1.0
set DashMove[p]=DashMove[p]-30
endif
if GetItemTypeId(i)=='I654' then
call SaveBoolean(Hash_Stat,p,$3B76FF1A,false)
call SaveInteger(Hash_Stat,p,$929FD517,0)
endif
if GetItemTypeId(i)=='I754' then
call SaveBoolean(Hash_Stat,p,$4D0EA1A1,false)
endif
call TimerStart(udg_infoRe[p],0.01,false,null)
set u=null
set i=null
set ef=null
endfunction
function AnythingOPTION__DecreaseHeal_Inter takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer tid=GetHandleId(t)
local unit u=LoadUnitHandle(udg_Hash,tid,$C303079D)
local integer uid=GetHandleId(u)
local integer abid=LoadInteger(udg_Hash,tid,$7F96F6DD)
local integer Count=LoadInteger(udg_Hash,uid,abid)
if not IsUnitType(u,UNIT_TYPE_DEAD)then
set Count=Count-1
call SaveInteger(udg_Hash,uid,abid,Count)
if Count==0 then
call UnitMakeAbilityPermanent(u,false,abid)
call UnitRemoveAbility(u,abid)
endif
else
call UnitMakeAbilityPermanent(u,false,abid)
call UnitRemoveAbility(u,abid)
call FlushChildHashtable(udg_Hash,uid)
endif
call FlushChildHashtable(udg_Hash,tid)
call PauseTimer(t)
call DestroyTimer(t)
set u=null
set t=null
endfunction
function TimerABILL takes unit u,real Time,integer abid returns nothing
local timer t=CreateTimer()
local integer Count=LoadInteger(udg_Hash,GetHandleId(u),abid)
if Count<=0 then
set Count=0
endif
if Count==0 then
call UnitAddAbility(u,abid)
call UnitMakeAbilityPermanent(u,true,abid)
call SetPlayerAbilityAvailableBJ(false,'abid',GetOwningPlayer(u))
endif
call SaveInteger(udg_Hash,GetHandleId(u),abid,Count+1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t),$7F96F6DD,abid)
call TimerStart(t,Time,false,function AnythingOPTION__DecreaseHeal_Inter)
set t=null
set u=null
endfunction
function AnythingOPTION__InvTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer tid=GetHandleId(t)
local unit u=LoadUnitHandle(udg_Hash,tid,$C303079D)
local integer uid=GetHandleId(u)
local integer c=LoadInteger(udg_Hash,uid,$73A8BC8F)
local real time=LoadReal(udg_Hash,tid,$6B54C545)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
call SaveReal(udg_Hash,tid,$6B54C545,time-0.08)
call SetUnitInvulnerable(u,true)
call GroupAddUnit(udg_Mujuk,u)
if GetLocalPlayer()==Player(p-1)and LoadUnitHandle(udg_Hashtable,p,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n|cffFF0000무적")
endif
if time<=0 then
set c=c-1
call SaveInteger(udg_Hash,uid,$73A8BC8F,c)
if c==0 then
call RemoveSavedInteger(udg_Hash,uid,$73A8BC8F)
call SetUnitInvulnerable(u,false)
call GroupRemoveUnit(udg_Mujuk,u)
if GetLocalPlayer()==Player(p-1)and LoadUnitHandle(udg_Hashtable,p,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n"+I2S(R2I(GetUnitState(u,ConvertUnitState(0x20))))+"")
endif
endif
call FlushChildHashtable(udg_Hash,tid)
call PauseTimer(t)
call DestroyTimer(t)
endif
set u=null
set t=null
endfunction
function Inv takes unit u,real i returns nothing
local timer t=CreateTimer()
local integer tid=GetHandleId(t)
local integer uid=GetHandleId(u)
local integer c=LoadInteger(udg_Hash,uid,$73A8BC8F)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
if c==0 then
call RemoveSavedInteger(udg_Hash,uid,$73A8BC8F)
call SetUnitInvulnerable(u,true)
call GroupAddUnit(udg_Mujuk,u)
if GetLocalPlayer()==Player(p-1)and LoadUnitHandle(udg_Hashtable,p,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n|cffFF0000무적")
endif
endif
call SaveInteger(udg_Hash,uid,$73A8BC8F,c+1)
call SaveReal(udg_Hash,tid,$6B54C545,i)
call SaveInteger(udg_Hash,tid,$73A8BC8F,c+1)
call SaveUnitHandle(udg_Hash,tid,$C303079D,u)
call TimerStart(t,0.08,true,function AnythingOPTION__InvTimer)
set t=null
set u=null
endfunction
function AnythingOPTION__InSTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer tid=GetHandleId(t)
local unit u=LoadUnitHandle(udg_Hash,tid,$20CD7CD7)
local integer uid=GetHandleId(u)
local integer c=LoadInteger(udg_Hash,uid,$A52BA38F)
local real time=LoadReal(udg_Hash,tid,$6B54C545)
call SaveReal(udg_Hash,tid,$6B54C545,time-0.08)
call PauseUnit(u,true)
if time<=0 then
set c=c-1
call SaveInteger(udg_Hash,uid,$A52BA38F,c)
if c==0 then
call PauseUnit(u,false)
endif
call FlushChildHashtable(udg_Hash,tid)
call PauseTimer(t)
call DestroyTimer(t)
endif
set u=null
set t=null
endfunction
function InS takes unit u,real i returns nothing
local timer t=CreateTimer()
local integer tid=GetHandleId(t)
local integer uid=GetHandleId(u)
local integer c=LoadInteger(udg_Hash,uid,$A52BA38F)
if c==0 then
call RemoveSavedInteger(udg_Hash,uid,$A52BA38F)
call PauseUnit(u,true)
endif
call SaveInteger(udg_Hash,uid,$A52BA38F,c+1)
call SaveReal(udg_Hash,tid,$6B54C545,i)
call SaveInteger(udg_Hash,tid,$A52BA38F,c+1)
call SaveUnitHandle(udg_Hash,tid,$20CD7CD7,u)
call TimerStart(t,0.08,true,function AnythingOPTION__InSTimer)
set t=null
set u=null
endfunction
function BossEND takes nothing returns nothing
local string l__str
local integer loopB
local integer loopC
local integer difN
local integer difP
if difficulty==1 then
set l__str="|cff00ff7f쉬움"
set difN=10
elseif difficulty==2 then
set l__str="|cffff7f50어려움"
set difN=20
elseif difficulty==3 then
set l__str="|cffff0000지옥"
set difN=30
elseif difficulty==4 then
set l__str="|cffb22222악|cff8b4513몽"
set difN=50
endif
set loopB=0
loop
exitwhen loopB==Playint
set loopB=loopB+1
set loopC=PP[loopB]-1
set difP=S2I(StashLoad(PLAYER_DATA[loopC],"Playint","0"))+difN
call StashSave(PLAYER_DATA[loopC],"Playint",I2S(difP))
set difP=S2I(StashLoad(PLAYER_DATA[loopC],GetUnitName(Charcter[PP[loopB]]),"0"))+difN
call StashSave(PLAYER_DATA[loopC],GetUnitName(Charcter[PP[loopB]]),I2S(difP))
call DisplayTimedTextToPlayer(Player(loopC),0,0,300,"|cfff4a460[ 시스템 ] - |cffff0000클리어! |cfff4a460플레이 해주셔서 감사합니다.\n|cfff4a460플레이한 캐릭터 : |cff6a5acd"+GetUnitName(Charcter[PP[loopB]])+"\n|cfff4a460진행 난이도 : "+l__str+"\n|cfff4a460플레이 타임 : 경과한 시간 : "+I2S(min)+"분 "+I2S(sec)+"초\n|cfff4a460당신의 캐릭터 숙련도 : "+I2S(difP)+"")
set difP=S2I(StashLoad(PLAYER_DATA[loopC],"MapLevel","0"))+difN
call StashSave(PLAYER_DATA[loopC],"MapLevel",I2S(difP))
call JNStashNetUploadUser(Player(PP[loopB]-1),MapId,LoadStr(udg_Hash,PP[loopB],$AC6659BB),SecretKey,PLAYER_DATA[loopC],UPLOAD_CALLBACK)
endloop
endfunction
function BossDPStimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=Boss
local integer loopA=0
local integer loopB=0
local integer a
local real FullD=1
local real dmgp=0
loop
exitwhen loopA==Playint
set loopA=loopA+1
set FullD=FullD+LoadReal(udg_Hash,PP[loopA],$190C4819)
endloop
set loopA=0
loop
exitwhen loopA==Playint
set loopA=loopA+1
set dmgp=(LoadReal(udg_Hash,PP[loopA],$190C4819)/FullD)-0.00001
if dmgp<=0 then
set dmgp=0
endif
if Charcter[PP[loopA]]==BossAgro then
call DzFrameSetText(DzFrameFindByName("DPS_PlayerName",loopA),"|cffff0000"+LoadStr(udg_Hash,PP[loopA],$78BD9BC9))
else
call DzFrameSetText(DzFrameFindByName("DPS_PlayerName",loopA),"|cffFFFFFF"+LoadStr(udg_Hash,PP[loopA],$78BD9BC9))
endif
call DzFrameSetAnimateOffset(DzFrameFindByName("DPS_Gage",loopA),dmgp)
endloop
if not UnitAlive(u)then
call ResumeTimer(RoundTimer)
set loopA=0
loop
exitwhen loopA==Playint
set loopA=loopA+1
call DisplayTimedTextToPlayer(Player(PP[loopA]-1),0,0,30,"|cff4169e1[시스템] - |cffffa500보스전 종료")
if GetLocalPlayer()==Player(PP[loopA]-1)then
if LoadInteger(udg_Hash,PP[loopA],$D9CFDBAB)==5 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack5.blp",0)
elseif LoadInteger(udg_Hash,PP[loopA],$D9CFDBAB)==4 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack4.blp",0)
elseif LoadInteger(udg_Hash,PP[loopA],$D9CFDBAB)==3 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack3.blp",0)
endif
call DzFrameSetTexture(DzFrameFindByName("GloryWater_Back",0),"ReplaceableTextures\\CommandButtons\\BTNGloryWater.blp",0)
endif
call SaveInteger(udg_Hash,PP[loopA],$254000DE,LoadInteger(udg_Hash,PP[loopA],$D9CFDBAB))
endloop
set loopA=0
loop
exitwhen loopA==Playint
set loopA=loopA+1
if LoadBoolean(udg_Hash,PP[loopA],$64A710AD)then
call StatUP(PP[loopA],500,"주스탯")
endif
set loopB=0
loop
exitwhen loopB==Playint
set loopB=loopB+1
call DisplayTimedTextToPlayer(Player(PP[loopB]-1),0,0,30,"|cff4169e1["+GetUnitName(Charcter[PP[loopA]])+"] - |cffffa500"+I2S(R2I(LoadReal(udg_Hash,PP[loopA],$190C4819)))+" ("+I2S(R2I((LoadReal(udg_Hash,PP[loopA],$190C4819)/FullD)*100))+"%)")
endloop
call DzFrameSetAnimateOffset(DzFrameFindByName("DPS_Gage",PP[loopA]),0)
set a=LoadInteger(udg_Hash,PP[loopA],$39F717C6)
call SaveInteger(udg_Hash,GetHandleId(Charcter[PP[loopA]]),$AD509D80,a)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),5,PR[loopA]+1,I2S(a))
endloop
call ResumeTimer(RoundTimer)
call DzFrameShow(DzFrameFindByName("DPS_Fahter",0),false)
call PauseTimer(t)
call DestroyTimer(t)
endif
set u=null
set t=null
endfunction
function DPSstart takes nothing returns nothing
local timer t=CreateTimer()
local integer loopA=0
loop
exitwhen loopA==Playint
set loopA=loopA+1
if GetLocalPlayer()==Player(PP[loopA]-1)then
if LoadInteger(udg_Hash,PP[loopA],$D9CFDBAB)==5 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack5.blp",0)
elseif LoadInteger(udg_Hash,PP[loopA],$D9CFDBAB)==4 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack4.blp",0)
elseif LoadInteger(udg_Hash,PP[loopA],$D9CFDBAB)==3 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack3.blp",0)
endif
endif
call SaveInteger(udg_Hash,PP[loopA],$254000DE,LoadInteger(udg_Hash,PP[loopA],$D9CFDBAB))
call SaveReal(udg_Hash,PP[loopA],$190C4819,0)
endloop
call SaveReal(udg_Hash,$F61C5FD6,0,0)
call DzFrameShow(DzFrameFindByName("DPS_Fahter",0),true)
call TimerStart(t,0.07,true,function BossDPStimer)
set t=null
endfunction
function DamageLib__LuckySystem takes real WantP,integer p returns boolean
local integer a
local real b
local integer c
local real d
local integer e
local integer o
set a=GetRandomInt(0,1000)
set b=I2R(a)/100.00
set c=a/100
set d=b-I2R(c)
set d=d*100.00
if Luck[p]>=1.01 then
set WantP=WantP*Luck[p]
endif
set o=GetRandomint(0,100)
if inaba[p]==true and d>WantP and o>70 then
set a=GetRandomInt(0,1000)
set b=I2R(a)/100.00
set c=a/100
set d=b-I2R(c)
set d=d*100.00
if d<=WantP then
return true
else
return false
endif
elseif d<=WantP then
return true
else
return false
endif
endfunction
function PrenaC048 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveBoolean(System,p,$224E7B1B,true)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function GlovesT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveBoolean(System,p,$5C08BDDA,true)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function ChubakiT takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==Chubaki[a]
set a=a+1
endloop
call SaveBoolean(udg_Hash,a,$CCBB5E7,false)
endfunction
function C060ct takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),p)
call RemoveSavedBoolean(udg_Hash,GetHandleId(u),$B69E2FDC+p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function AngleTrue takes real A,real A2,real R returns boolean
local boolean n
if RAbsBJ(A-A2)>180 then
if A<0 then
set A=A+360
endif
if A2<0 then
set A2=A2+360
endif
endif
if A-A2>R*-1 and A-A2<R*1 then
set n=true
else
set n=false
endif
return n
endfunction
function Critical takes integer WantP returns boolean
local integer a
local real b
local integer c
local real d
local integer e
local integer o
set a=GetRandomInt(0,1000)
set b=I2R(a)/100.00
set c=a/100
set d=b-I2R(c)
set d=d*100.00
set o=R2I(d)
if d<=WantP then
return true
else
return false
endif
endfunction
function chamcullAS takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
set temp_integer=LoadInteger(Hash_Stat,p,$C18D16A0)-25
call SaveInteger(Hash_Stat,p,$C18D16A0,temp_integer)
call TimerStart(udg_infoRe[p],0,false,null)
call UnitRemoveAbility(Charcter[p],'AC00')
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function LatikaNewUnit takes nothing returns nothing
local timer t=GetExpiredTimer()
local real time=LoadReal(Hash_Stat,GetHandleId(t),$6B54C545)
local integer tempI=LoadInteger(Hash_Stat,GetHandleId(t),$76C18425)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local unit u
if time<=0 or LoadBoolean(Hash_Stat,p,$A5435A9D)==true then
set u=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(Hash_Stat,p,$5CA95262+tempI,u)
call RemoveUnit(u)
call SaveInteger(Hash_Stat,p,$F926F8E2+tempI,0)
call SaveInteger(Hash_Stat,p,$6E7CF101+tempI,0)
if time<=0 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagTextBJ(bj_lastCreatedTextTag,"|cffff0000Latika Reset|r",15)
call SetTextTagPosUnit(bj_lastCreatedTextTag,Charcter[p],0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.0)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag,30,85)
call SetTextTagFadepointBJ(bj_lastCreatedTextTag,0.8)
endif
call FlushChildHashtable(Hash_Stat,GetHandleId(t))
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call SaveReal(Hash_Stat,GetHandleId(t),$6B54C545,time-0.04)
call TimerStart(t,0.04,false,function LatikaNewUnit)
endif
set t=null
set u=null
endfunction
function dmgPlus takes unit tar,integer typ1,integer typ2,boolean conti,integer p,integer skill,integer ftyp returns real
local real tempR=0
local real angle=0
local real tempR2=0
local real dmgP=0
local timer t
local unit c
if conti then
set dmgP=dmgP+poisonPlus[p]
endif
if tar==Boss or GetUnitTypeId(tar)=='DM01' then
set dmgP=dmgP+BOOSD[p]
endif
if skill !=0 then
if LoadBoolean(udg_Hashtable,p,$2AB47070)and EXGetAbilityDataReal(EXGetUnitAbility(Charcter[p],skill),1,ABILITY_DATA_COOL)>=5 then
set tempR=LoadReal(udg_Hashtable,p,$89215390)
set dmgP=dmgP+tempR
endif
endif
if LoadBoolean(Hash_Stat,p,$74372AE4)and LoadBoolean(udg_Hashtable,skill,$FC4D8276)then
set dmgP=dmgP+0.04*LoadInteger(Hash_Stat,p,$B473C9F)
endif
if LoadBoolean(Hash_Stat,p,$616BEE59)and LoadBoolean(udg_Hashtable,skill,$FC4D8276)then
set dmgP=dmgP+LoadReal(Hash_Stat,p,$C8FBFF24)
endif
if LoadBoolean(Hash_Stat,p,$A5B678FE)and LoadBoolean(udg_Hashtable,skill,$E6BB3831)then
set dmgP=dmgP+(Skrange[p]-1.0)
endif
if LoadBoolean(udg_Hash,p,$E9840BCF)and LoadBoolean(udg_Hashtable,skill,$E6BB3831)then
if GameChnag2 then
set dmgP=dmgP+0.25
else
set dmgP=dmgP+0.15
endif
endif
if GetUnitTypeId(Charcter[p])=='HR06' then
set tempR=GetUnitState(tar,ConvertUnitState(0))/GetUnitState(tar,ConvertUnitState(1))*100
set tempR=((tempR-100)*-1)*0.002
set dmgP=dmgP+tempR
endif
if GetUnitTypeId(Charcter[p])=='HR08' then
set tempR=GetUnitState(tar,ConvertUnitState(0))/GetUnitState(tar,ConvertUnitState(1))*100
if tempR>0.6 then
set tempR=0.12
elseif tempR<=0.6 and tempR>0.3 then
set tempR=0.08
elseif tempR<=0.3 then
set tempR=0.04
endif
if RyougiT and LoadBoolean(udg_Hash,p,$205D9389)then
set tempR=tempR*2
endif
set dmgP=dmgP+tempR
endif
if typ1==1 then
if LoadBoolean(Hash_Stat,p,$BDBC23D6)then
set dmgP=dmgP+0.2
endif
set tempR=ADcriP[p]
if LoadBoolean(Hash_Stat,p,$75CEA0EA)==true and ftyp==5 then
set tempR=ADcriP[p]/4.0
endif
if Critical(R2I(tempR))then
if LoadBoolean(Hash_Stat,p,$75CEA0EA)==true and ftyp==5 then
set dmgP=dmgP+(ADcriD[p]*3.0)
else
set dmgP=dmgP+ADcriD[p]
endif
set CriticalCheck[p]=true
if LoadBoolean(System,p,$C4A612DF)and GetUnitAbilityLevel(Charcter[p],'AC00')==0 then
set t=CreateTimer()
set temp_integer=LoadInteger(Hash_Stat,p,$C18D16A0)+25
call SaveInteger(Hash_Stat,p,$C18D16A0,temp_integer)
call TimerStart(udg_infoRe[p],0,false,null)
call TimerStart(t,5,false,function chamcullAS)
call UnitAddAbility(Charcter[p],'AC00')
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
endif
endif
elseif typ1==2 then
set tempR=APcriP[p]
if LoadBoolean(Hash_Stat,p,$75CEA0EA)==true and ftyp==5 then
set tempR=APcriP[p]/4.0
endif
if Critical(R2I(tempR))then
if LoadBoolean(Hash_Stat,p,$75CEA0EA)==true and ftyp==5 then
set dmgP=dmgP+(APcriD[p]*3.0)
else
set dmgP=dmgP+APcriD[p]
endif
set CriticalCheck[p]=true
endif
if LoadBoolean(Hash_Stat,p,$869F214D)then
set dmgP=dmgP+0.2
endif
if UnitHasBuff(tar,'BI09')then
set dmgP=dmgP+0.15
endif
endif
if CriticalCheck[p]and LoadBoolean(System,p,$95A9830D)and LoadBoolean(System,p,$40587CED)==false then
call StatChange(p,5,"쿨감",4.0)
call SaveBoolean(System,p,$40587CED,true)
call TimerStart(U044timer[p],1.0,false,null)
endif
if CriticalCheck[p]and LoadBoolean(udg_Hash,p,$F61FF70C)then
if LoadBoolean(udg_Hash,p,$DEEC8F75)then
call StatChangeX(p,0.2,"피증",5,"R062")
call BuffCall(Charcter[p],'AT19',5,false,false)
elseif LoadBoolean(System,p,$A222B918)and Luck[p]<=2.49 then
call StatChangeX(p,0.3,"피증",5,"US15")
call StatChangeX(p,0.1,"이속",5,"US151")
call BuffCall(Charcter[p],'AT32',5,false,false)
elseif LoadBoolean(System,p,$A222B918)and Luck[p]>=2.5 then
call StatChangeX(p,0.4,"피증",5,"US15")
call StatChangeX(p,0.2,"이속",5,"US151")
call BuffCall(Charcter[p],'AT32',5,false,false)
else
call StatChangeX(p,0.1,"피증",5,"R062")
call BuffCall(Charcter[p],'AT19',5,false,false)
endif
endif
if GetUnitTypeId(Charcter[p])=='HR16' and(UnitHasBuff(tar,'Bcri')or UnitHasBuff(tar,'BPSE'))then
set dmgP=dmgP+0.1
endif
if typ2==1 then
set dmgP=dmgP+FIRED[p]
elseif typ2==0 then
set dmgP=dmgP+NONE[p]
elseif typ2==2 then
set dmgP=dmgP+ICED[p]
if LoadBoolean(Hash_Stat,p,$B3E72325)and UnitHasBuff(tar,'Bcri')then
set dmgP=dmgP+0.2
endif
elseif typ2==3 then
set dmgP=dmgP+WINDD[p]
elseif typ2==4 then
set dmgP=dmgP+ThunD[p]
elseif typ2==5 then
set dmgP=dmgP+FIRED[p]
set dmgP=dmgP+ICED[p]
set dmgP=dmgP+WINDD[p]
set dmgP=dmgP+ThunD[p]
endif
if LoadBoolean(udg_Hash,p,$31F10326)and WINDD[p]>=0.5 then
set dmgP=dmgP+0.1
endif
if LoadBoolean(udg_Hashtable,p,$6148D9B2)then
set tempR=GetRandomReal(-0.5,0.5)
set dmgP=dmgP+tempR
endif
if LoadBoolean(udg_Hashtable,p,$516BEBC3)then
set tempR=GetRandomReal(0,0.5)
set dmgP=dmgP+tempR
endif
if LoadInteger(System,p,$DA550BF7)==1 and not IsUnitType(tar,UNIT_TYPE_HERO)then
set dmgP=dmgP+0.1
endif
if LoadBoolean(Hash_Stat,p,$32786EE6)and not IsUnitType(tar,UNIT_TYPE_HERO)then
set dmgP=dmgP+0.04*LoadInteger(Hash_Stat,p,$ADEC9AD7)
endif
if LoadBoolean(Hash_Stat,p,$EDD69FA9)and(skill==ChSkillR[p]or skill==ChSkillT[p])then
set dmgP=dmgP+LoadReal(Hash_Stat,p,$DEF8CE75)
endif
if LoadBoolean(Hash_Stat,p,$2EB56588)and(skill==ChSkillQ[p]or skill==ChSkillW[p]or skill==ChSkillE[p])then
set dmgP=dmgP+LoadReal(Hash_Stat,p,$56897A91)
endif
if LoadBoolean(System,p,$30CF6E3)and(GetUnitTypeId(tar)=='wv00' or GetUnitUserData(tar)>=90)then
set dmgP=dmgP+0.2
endif
set dmgP=dmgP+DamageAmp[p]
set t=null
set tar=null
set c=null
return dmgP
endfunction
function poisonattack takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit source=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$E9ECB0BE)
local unit l__target=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$FC4D8276)
local real damage=LoadReal(udg_Hashtable,GetHandleId(t),$C0ABED4A)
local real frequency=LoadReal(udg_Hashtable,GetHandleId(t),$9378F386)
local real number=LoadReal(udg_Hashtable,GetHandleId(t),$FA4531C3)
local integer typ1=LoadInteger(udg_Hashtable,GetHandleId(t),$F8672CE)
local integer typ2=LoadInteger(udg_Hashtable,GetHandleId(t),$6CE65119)
local integer skillcode=LoadInteger(udg_Hashtable,GetHandleId(t),$9B55BE3B)
local integer p=GetPlayerId(GetOwningPlayer(source))+1
local string ef=LoadStr(udg_Hashtable,GetHandleId(t),$23E22F84)
local real dmgP=1
local real dmgI=0
local real tempR
if(number>=frequency)then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
if number-(number/2)*2==0 then
call DestroyEffect(AddSpecialEffectTarget(ef,l__target,"origin"))
endif
if LoadBoolean(System,p,$48C752C6)then
set tempR=GetUnitState(source,ConvertUnitState(1))*0.001
set dmgI=dmgI+tempR
endif
if LoadBoolean(udg_Hashtable,p,$27D72755)then
set tempR=LoadReal(udg_Hashtable,p,$F0892948)
set dmgI=dmgI+(I2R(GetHeroInt(source,true))*tempR)
endif
if UnitAlive(l__target)then
if CharcterStat[p]then
set dmgP=dmgP+dmgPlus(l__target,1,typ2,true,p,skillcode,1)
set damage=damage*dmgP
set damage=damage+dmgI
call UnitDamageTarget(source,l__target,damage,true,false,ConvertAttackType(2),ConvertDamageType(4),ConvertWeaponType(0))
else
set dmgP=dmgP+dmgPlus(l__target,2,typ2,true,p,skillcode,2)
set damage=damage*dmgP
set damage=damage+dmgI
call UnitDamageTarget(source,l__target,damage,true,false,ConvertAttackType(2),ConvertDamageType(14),ConvertWeaponType(0))
endif
else
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set number=number+1
call SaveReal(udg_Hashtable,GetHandleId(t),$FA4531C3,number)
endif
set l__target=null
set source=null
set t=null
endfunction
function poison takes unit a,unit b,real c,real d,real e,integer typ1,integer typ2,integer skillcode,string ef returns nothing
local timer t=CreateTimer()
local integer p=GetPlayerId(GetOwningPlayer(a))+1
local real dmgP=1
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$E9ECB0BE,a)
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$FC4D8276,b)
call SaveReal(udg_Hashtable,GetHandleId(t),$C0ABED4A,c)
call SaveReal(udg_Hashtable,GetHandleId(t),$9378F386,d+1)
call SaveReal(udg_Hashtable,GetHandleId(t),$FA4531C3,1)
call SaveInteger(udg_Hashtable,GetHandleId(t),$F8672CE,typ1)
call SaveInteger(udg_Hashtable,GetHandleId(t),$6CE65119,typ2)
call SaveInteger(udg_Hashtable,GetHandleId(t),$9B55BE3B,skillcode)
call SaveStr(udg_Hashtable,GetHandleId(t),$23E22F84,ef)
call TimerStart(t,e,true,function poisonattack)
set t=null
set a=null
set b=null
set ef=null
endfunction
function SandeT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),1)
local real time=LoadReal(udg_Hash,GetHandleId(t),2)
call SaveReal(udg_Hash,GetHandleId(t),2,time-0.07)
if time<=0 then
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call Mujuk(p,u)
endif
set t=null
set u=null
endfunction
function SandeT2 takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),1)
local real time=LoadReal(udg_Hash,GetHandleId(t),2)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),3)
local unit c
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
call SaveReal(udg_Hash,GetHandleId(t),2,time-0.08)
call SaveInteger(udg_Hash,GetHandleId(t),3,stage+1)
if time<=0 then
call SaveBoolean(System,p,$F321F4F8,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,GetUnitX(u))
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,GetUnitY(u))
if not UnitHasBuff(u,'Bmlt')and not UnitHasBuff(u,'BPSE')and s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)>=10.00 then
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,GetUnitFacing(u))
call imagedummy(p,c,0.18,2,"walk",Model[p])
call SetUnitTimeScale(c,0.5)
if stage==0 then
call invisibleColor(c,40,100,255,0,0,0.18,0.01)
elseif stage==1 then
call invisibleColor(c,40,100,255,187,0,0.18,0.01)
elseif stage==2 then
call invisibleColor(c,40,100,255,255,126,0.18,0.01)
elseif stage==3 then
call invisibleColor(c,40,100,29,219,22,0.18,0.01)
elseif stage==4 then
call invisibleColor(c,40,100,0,84,255,0.18,0.01)
elseif stage==5 then
call invisibleColor(c,40,100,3,0,102,0.18,0.01)
elseif stage>=6 then
call invisibleColor(c,40,100,95,0,255,0.18,0.01)
call SaveInteger(udg_Hash,GetHandleId(t),3,0)
endif
endif
endif
set t=null
set u=null
set c=null
endfunction
function Sande takes unit u,integer p returns nothing
local timer t
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_Sande_Dodge.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call EFsettingXY(p,"war3mapImported\\@EF_Blink New Sky.mdl",0,GetUnitX(u),GetUnitY(u),1,270,1,0,0,250)
if LoadBoolean(System,p,$820FB5AF)then
call BuffCall(u,'AT12',2,false,false)
set t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,u)
call SaveInteger(udg_Hash,GetHandleId(t),1,p)
call SaveReal(udg_Hash,GetHandleId(t),2,1.5)
call TimerStart(t,0.07,true,function SandeT)
set t=null
endif
if LoadBoolean(System,p,$73C0D841)and not LoadBoolean(System,p,$F321F4F8)then
call BuffCall(u,'AT13',8,false,false)
call SaveBoolean(System,p,$F321F4F8,true)
call StatChange(p,30,"이속",8)
call StatChange(p,0.15,"피증",8)
call StatChange(p,10,"피감",8)
set t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,u)
call SaveInteger(udg_Hash,GetHandleId(t),1,p)
call SaveReal(udg_Hash,GetHandleId(t),2,8)
call TimerStart(t,0.08,true,function SandeT2)
set t=null
endif
set t=null
set u=null
endfunction
function Damage takes unit wu,unit tar,real dmg,integer typ1,integer typ2,boolean conti,real damageP,integer skill returns nothing
local timer t
local real dmgP=1.0
local integer p=GetPlayerId(GetOwningPlayer(wu))+1
local integer p2=GetPlayerId(GetOwningPlayer(tar))+1
local real dmgI=0
local real tempR=0
local boolean armorPear=false
local integer tempI=0
local integer tempI2=0
local boolean Latikabool=false
local boolean SamSama=false
local real armor=GetUnitState(tar,ConvertUnitState(0x20))
local integer ftyp=typ1
local unit c
local real tempR2
local real angle
if wu==Charcter[p]and LoadBoolean(System,p,$224E7B1B)and LoadBoolean(udg_Hash,p,$664E8F23)then
if CharcterStat[p]==true then
set dmgI=dmgI+((dmg*0.05)+(GetHeroAgi(wu,true)*0.25)+(GetUnitState(wu,ConvertUnitState(0x14))*0.25))
else
set dmgI=dmgI+((dmg*0.05)+(GetHeroInt(wu,true)*0.25)+(GetUnitState(wu,ConvertUnitState(0x14))*0.25))
endif
call StatChangeX(p,15,"이속",2,"nonomi")
call BuffCall(wu,'AT17',2,false,false)
call SaveBoolean(System,p,$224E7B1B,false)
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call TimerStart(t,0.02,false,function PrenaC048)
set t=null
endif
if typ1 !=7 then
if SandeBisut[GetPlayerId(GetOwningPlayer(tar))+1]then
set SandeBisut[GetPlayerId(GetOwningPlayer(tar))+1]=false
call Sande(tar,GetPlayerId(GetOwningPlayer(tar))+1)
endif
if IsUnitAlly(wu,Player(9))and wu !=Charcter[p]then
set wu=Charcter[p]
if LoadBoolean(System,p,$FCA81098)then
set dmgP=dmgP+0.2
endif
if LoadBoolean(System,p,$A276AA4F)then
set tempI=LoadInteger(Hash_Stat,p,$19A960C6)
if tempI>=4 then
set dmgP=dmgP+0.1
else
set dmgP=dmgP+0.05
endif
endif
if LoadBoolean(System,p,$1F134776)then
set tempI=LoadInteger(Hash_Stat,p,$19A960C6)
if tempI>=4 then
set dmgP=dmgP+0.05+(tempI*0.03)
else
set dmgP=dmgP+(tempI*0.03)
endif
endif
set tempI=LoadInteger(Hash_Stat,p,$10EACD89)
set dmgP=dmgP+(tempI*0.1)
endif
if LoadBoolean(System,p,$48C752C6)then
if conti then
set tempR=GetUnitState(wu,ConvertUnitState(1))*0.01
else
set tempR=GetUnitState(wu,ConvertUnitState(1))*0.001
endif
set dmgI=dmgI+tempR
endif
if LoadBoolean(udg_Hashtable,p,$27D72755)then
set tempR=LoadReal(udg_Hashtable,p,$F0892948)
set dmgI=dmgI+(I2R(GetHeroInt(wu,true))*tempR)
endif
if ftyp !=6 and typ1 !=4 and skill !='item' then
set dmgP=dmgP+SkillD[p]
endif
if typ1==3 or typ1==4 or typ1==5 or typ1==6 then
if typ1==3 then
set armorPear=true
endif
if typ1 !=3 then
if LoadBoolean(Hash_Stat,p,$B00807CF)and LoadBoolean(udg_Hashtable,skill,$FC4D8276)then
set SamSama=true
endif
endif
if typ1==4 or typ1==5 and GetUnitTypeId(wu)=='HR05' then
set typ2=4
endif
if GetUnitTypeId(wu)=='HR16' then
set typ2=2
endif
if typ1==5 then
if US01[p]then
set dmgI=dmgI+(GetUnitState(wu,ConvertUnitState(1))*0.01)
endif
if LoadBoolean(System,p,$A797817B)then
if CharcterStat[p]and(BloodAbsolAD[p]>=0.1 or GetUnitState(wu,ConvertUnitState(0))<=(GetUnitState(wu,ConvertUnitState(1))*0.6))then
set dmgP=dmgP+0.3
elseif not CharcterStat[p]and(BloodAbsolAP[p]>=0.1 or GetUnitState(wu,ConvertUnitState(0))<=(GetUnitState(wu,ConvertUnitState(1))*0.6))then
set dmgP=dmgP+0.3
else
set dmgP=dmgP+(0.1+((1-(GetUnitState(wu,ConvertUnitState(0))/GetUnitState(wu,ConvertUnitState(1))))*0.5))
endif
endif
if GetUnitTypeId(wu)=='HR13' then
if LoadInteger(udg_Hash,GetHandleId(wu),$CABC8031)==3 then
call SaveInteger(udg_Hash,GetHandleId(wu),$CABC8031,1)
if LoadBoolean(udg_Hashtable,GetHandleId(wu),$CF16D639)then
set dmgI=dmgI+(GetUnitState(wu,ConvertUnitState(0x14))*3.5)
else
set dmgI=dmgI+(GetUnitState(wu,ConvertUnitState(0x14))*2.5)
endif
call EFsettingU(p,"war3mapImported\\@EF_VFX_HITcritverylowRed.mdl",0,tar,"origin")
else
set tempI=LoadInteger(udg_Hash,GetHandleId(wu),$CABC8031)+1
call SaveInteger(udg_Hash,GetHandleId(wu),$CABC8031,tempI)
endif
if LoadBoolean(udg_Hash,GetHandleId(wu),$DA50E3EB)then
if LoadBoolean(udg_Hashtable,GetHandleId(wu),$94C2158E)then
set dmgI=dmgI+(GetHeroAgi(wu,true)*(0.5+(LoadInteger(udg_Hashtable,p,$FAFE5485)*0.15)))+(GetUnitState(wu,ConvertUnitState(0x14))*0.075)
else
set dmgI=dmgI+(GetHeroAgi(wu,true)*(0.5+(LoadInteger(udg_Hashtable,p,$FAFE5485)*0.15)))
endif
endif
endif
endif
if typ1 !=5 then
if LoadBoolean(System,p,$6A4D87E8)then
if CharcterStat[p]and(BloodAbsolAD[p]>=0.1 or GetUnitState(wu,ConvertUnitState(0))<=(GetUnitState(wu,ConvertUnitState(1))*0.6))then
set dmgP=dmgP+0.3
elseif not CharcterStat[p]and(BloodAbsolAP[p]>=0.1 or GetUnitState(wu,ConvertUnitState(0))<=(GetUnitState(wu,ConvertUnitState(1))*0.6))then
set dmgP=dmgP+0.3
else
set dmgP=dmgP+(0.1+((1-(GetUnitState(wu,ConvertUnitState(0))/GetUnitState(wu,ConvertUnitState(1))))*0.5))
endif
endif
endif
if CharcterStat[p]then
set typ1=1
else
set typ1=2
endif
endif
set dmgP=dmgP+dmgPlus(tar,typ1,typ2,conti,p,skill,ftyp)
if LoadBoolean(System,p,$5C08BDDA)then
if LoadBoolean(System,p,$534A17A0)and GetUnitState(wu,ConvertUnitState(0))<=GetUnitState(wu,ConvertUnitState(1))*0.5 then
if conti or ftyp==5 then
set dmgI=dmgI+(GetUnitState(tar,ConvertUnitState(1))*0.000075)
else
set dmgI=dmgI+(GetUnitState(tar,ConvertUnitState(1))*0.00075)
endif
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call TimerStart(t,0.01,false,function GlovesT)
call SaveBoolean(System,p,$5C08BDDA,false)
set t=null
elseif LoadBoolean(System,p,$534A17A0)and GetUnitState(wu,ConvertUnitState(0))>=GetUnitState(wu,ConvertUnitState(1))*0.501 then
set dmgP=dmgP-0.15
elseif not LoadBoolean(System,p,$534A17A0)then
if conti or ftyp==5 then
set dmgI=dmgI+(GetUnitState(tar,ConvertUnitState(1))*0.000075)
else
set dmgI=dmgI+(GetUnitState(tar,ConvertUnitState(1))*0.00075)
endif
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call TimerStart(t,0.01,false,function GlovesT)
call SaveBoolean(System,p,$5C08BDDA,false)
set t=null
endif
endif
if GetUnitTypeId(wu)=='HR05' then
set tempI=LoadInteger(udg_Hash,p,$323CB7AD)
if tempI<=10 then
call BuffCall(wu,'B016',1,false,true)
set tempR=LoadReal(Hash_Stat,p,$2034A1E3)
call SaveReal(Hash_Stat,p,$2034A1E3,tempR+0.01)
call TimerStart(udg_infoRe[p],0.00,false,null)
if tempI==10 then
set tempI=20
endif
endif
call SaveInteger(udg_Hash,p,$323CB7AD,tempI+1)
endif
if LoadBoolean(System,p,$E9917373)and not conti then
if CriticalCheck[p]then
set tempR=CostM[p]*10.0
else
set tempR=CostM[p]*(5+Kirie[p])
endif
if ChSkillQ[p]==skill then
set tempR=LoadReal(udg_Hashtable,p,$9B58470C)*tempR
endif
if ChSkillW[p]==skill then
set tempR=LoadReal(udg_Hashtable,p,$E755DDB8)*tempR
endif
if ChSkillE[p]==skill then
set tempR=LoadReal(udg_Hashtable,p,$A2229E00)*tempR
endif
if ChSkillR[p]==skill then
set tempR=LoadReal(udg_Hashtable,p,$C3EA9E83)*tempR
endif
if ChSkillT[p]==skill then
set tempR=LoadReal(udg_Hashtable,p,$127510D2)*tempR
endif
set dmgI=dmgI+tempR
endif
if LoadBoolean(System,p,$379C4E8)and CostM[p]>=1.5 and LoadBoolean(udg_Hashtable,skill,$ABBFF13)then
set dmgP=dmgP+0.1
endif
if LoadBoolean(System,p,$A9CA72B)and CostM[p]>=1.5 and LoadBoolean(udg_Hashtable,skill,$ABBFF13)then
set dmgP=dmgP+0.15
endif
if LoadBoolean(System,p,$4A8F0CA3)then
if conti then
set dmgI=dmgI+(GetHeroLevel(wu)*10)
else
set dmgI=dmgI+(GetHeroLevel(wu)*100)
endif
endif
if GetUnitTypeId(wu)=='HR19' then
if s__Distance_PBP(GetUnitX(wu),GetUnitY(wu),GetUnitX(tar),GetUnitY(tar))<=800 then
if LoadBoolean(udg_Hash,p,$1669AAAD)then
call BuffCall(wu,'B030',4,false,false)
call StatChangeX(p,20,"이속",4,"H1900")
set dmgP=dmgP+0.2
else
call BuffCall(wu,'B030',2,false,false)
call StatChangeX(p,10,"이속",2,"H1900")
set dmgP=dmgP+0.1
endif
else
set dmgP=dmgP+0.12
endif
endif
if GetUnitTypeId(wu)=='HR22' and LoadBoolean(udg_Hashtable,skill,$FC4D8276)then
if LoadInteger(udg_Hashtable,p,$A8D71652)>=1 then
set dmgP=dmgP+LoadReal(Hash_Stat,p,$604CDC2F)
endif
endif
if LoadBoolean(System,p,$654BE169)and LoadBoolean(udg_Hashtable,skill,$FC4D8276)then
set dmgP=dmgP+0.12
endif
if LoadBoolean(System,p,$FC6750F6)and s__Distance_PBP(GetUnitX(wu),GetUnitY(wu),GetUnitX(tar),GetUnitY(tar))<=800 then
set dmgP=dmgP+0.1
endif
if skill==ChSkillQ[p]or skill==ChSkillW[p]or skill==ChSkillE[p]or skill==ChSkillR[p]or skill==ChSkillT[p]or skill==ChSkillD[p]then
if LoadBoolean(Hash_Stat,p,$60333C98)then
if LoadInteger(Hash_Stat,p,$9202DC38)==7 then
set dmgP=dmgP+0.4
else
if ModuloInteger(LoadInteger(Hash_Stat,p,$9202DC38),2)==0 then
set dmgP=dmgP+0.25
endif
endif
endif
endif
if LoadBoolean(Hash_Stat,p,$D7D5DB)then
if AngleTrue(s__Angle_WBW(wu,tar),GetUnitFacing(tar),40)then
set dmgP=dmgP+0.2
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagTextBJ(bj_lastCreatedTextTag,"|cffff0000BackAttack!|r",10)
call SetTextTagPosUnit(bj_lastCreatedTextTag,wu,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.5)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag,30,85)
call SetTextTagFadepointBJ(bj_lastCreatedTextTag,0.2)
endif
if s__Distance_PBP(GetUnitX(wu),GetUnitY(wu),GetUnitX(tar),GetUnitY(tar))<=500 then
set dmgP=dmgP+0.2
endif
endif
if LoadBoolean(Hash_Stat,p,$F89AADC1)and ftyp==5 and CriticalCheck[p]and LoadBoolean(udg_Hash,p,$CCBB5E7)==false then
call SaveBoolean(udg_Hash,p,$CCBB5E7,true)
call TimerStart(Chubaki[p],6.0,false,function ChubakiT)
call itemCoolTime(GetItemOfTypeFromUnit(Charcter[p],'I651'),6)
call EFsettingU(p,"war3mapImported\\@EF_AZ_JUGG_E2.mdl",0,tar,"origin")
call EFsettingXY(p,"Objects\\Spawnmodels\\Orc\\OrcLargeDeathExplode\\OrcLargeDeathExplode.mdl",0,GetUnitX(tar),GetUnitY(tar),1,270,1,0,0,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Chubaki_1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,50,tar)
set angle=s__Angle_PBP(GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),GetUnitX(tar),GetUnitY(tar))
if GetRandomInt(1,2)==1 then
set tempR=GetUnitX(Charcter[p])+(((350)*1.0)*Cos(((GetUnitFacing(Charcter[p])+45)*1.0)*bj_DEGTORAD))
set tempR2=GetUnitY(Charcter[p])+(((350)*1.0)*Sin(((GetUnitFacing(Charcter[p])+45)*1.0)*bj_DEGTORAD))
else
set tempR=GetUnitX(Charcter[p])+(((350)*1.0)*Cos(((GetUnitFacing(Charcter[p])-45)*1.0)*bj_DEGTORAD))
set tempR2=GetUnitY(Charcter[p])+(((350)*1.0)*Sin(((GetUnitFacing(Charcter[p])-45)*1.0)*bj_DEGTORAD))
endif
set c=CreateUnit(GetOwningPlayer(Charcter[p]),'sys7',tempR,tempR2,s__Angle_PBP(tempR,tempR2,GetUnitX(tar),GetUnitY(tar)))
call imagedummy(p,c,0.35,2,"attack",Model[p])
call SetUnitTimeScale(c,1.6)
call SetUnitVertexColor(c,255,255,255,127)
call EFsettingXY(p,"war3mapImported\\@EF_canying.mdl",0,tempR,tempR2,1,270,1,0,0,50)
if GetUnitTypeId(Charcter[p])=='HR09' then
call SetUnitAnimationByIndex(c,11)
set dmgP=dmgP+1.0
else
call UnitDamageTarget(Charcter[p],tar,dmg,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
endif
if LoadBoolean(System,p,$E2768D31)and ftyp==5 and CriticalCheck[p]then
set dmgI=dmgI+(dmg*0.2)
call EFsettingXY(p,"war3mapImported\\@EF_REDshotingR2c.mdl",0,GetUnitX(tar),GetUnitY(tar),0.6,GetRandomReal(0,360),1,0,0,150)
endif
set dmg=dmg*dmgP
set dmg=dmg+dmgI
set dmg=dmg*damageP
if LoadBoolean(udg_Hash,p,$79377829)and not LoadBoolean(udg_Hash,GetHandleId(tar),$B69E2FDC+p)and tar !=Boss and STRP[p]>=MainSTP[p]and GetUnitTypeId(tar)!='DM01' then
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call SaveBoolean(udg_Hash,GetHandleId(tar),$B69E2FDC+p,true)
call SaveUnitHandle(udg_Hash,GetHandleId(t),p,tar)
call TimerStart(t,0.5,false,function C060ct)
set t=null
set dmg=dmg+(GetUnitState(tar,ConvertUnitState(1))*0.02)+(GetUnitState(wu,ConvertUnitState(1))*0.15)
endif
if not armorPear then
if ArmorPenetrate[p]>=0.7 then
set armor=armor*(1-0.7)
else
set armor=armor*(1-ArmorPenetrate[p])
endif
set dmg=dmg*(400/(400+armor))
endif
if SamSama then
set tempR=dmg*0.12
set dmg=dmg-tempR
call Damage(wu,tar,tempR,7,0,true,1,'item')
endif
if ftyp !=3 and LoadBoolean(udg_Hash,p,$B43205FF)and LoadBoolean(udg_Hash,p,$A2D0D70C)then
set tempR=dmg*0.12
set dmg=dmg-tempR
call Damage(wu,tar,tempR,7,0,true,1,0)
endif
if typ2==0 and LoadBoolean(System,p,$29B16D77)then
set typ2=LoadInteger(System,p,$12E580E)
endif
if wu==Charcter[p]then
call SaveInteger(udg_Hash,GetHandleId(wu),$B5798816,typ2)
endif
if conti==false then
call SaveBoolean(udg_Hash,GetHandleId(wu),$B9D8D8AA,true)
else
call SaveBoolean(udg_Hash,GetHandleId(wu),$B9D8D8AA,false)
endif
if LoadBoolean(Hash_Stat,p,$C071F35D)and IsUnitType(tar,UNIT_TYPE_HERO)and LoadBoolean(Hash_Stat,p,$A5435A9D)==false then
set tempI=0
loop
exitwhen tempI==10
set tempI=tempI+1
if tar==LoadUnitHandle(Hash_Stat,p,$5CA95262+tempI)then
set Latikabool=true
if LoadInteger(Hash_Stat,p,$F926F8E2+tempI)!=skill then
if skill==ChSkillD[p]or skill==ChSkillQ[p]or skill==ChSkillW[p]or skill==ChSkillE[p]or skill==ChSkillR[p]or skill==ChSkillT[p]then
set tempI2=LoadInteger(Hash_Stat,p,$6E7CF101+tempI)+1
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffff0000"+I2S(tempI2)+"|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,wu,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.5)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,85)
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.2)
call SaveInteger(Hash_Stat,p,$6E7CF101+tempI,tempI2)
call SaveInteger(Hash_Stat,p,$F926F8E2+tempI,skill)
if tempI2==4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Ratica.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,tar)
call SaveBoolean(Hash_Stat,p,$A5435A9D,true)
call Damage(wu,tar,GetHeroAgi(wu,true)*15,1,4,false,1,'item')
call EFsettingU(p,"war3mapImported\\@EF_[AKE]war3AKE.com - 9997996651673980406444242.mdl",0,tar,"origin")
call itemCoolTime(GetItemOfTypeFromUnit(Charcter[p],'I601'),3)
call ShildSet(wu,wu,4,GetHeroAgi(wu,true))
call TimerStart(Latika[p],3.00,false,null)
endif
endif
endif
endif
endloop
if Latikabool==false and LoadBoolean(Hash_Stat,p,$A5435A9D)==false then
if skill==ChSkillD[p]or skill==ChSkillQ[p]or skill==ChSkillW[p]or skill==ChSkillE[p]or skill==ChSkillR[p]or skill==ChSkillT[p]then
set tempI=0
loop
exitwhen tempI==10
set tempI=tempI+1
if null==LoadUnitHandle(Hash_Stat,p,$5CA95262+tempI)then
call SaveUnitHandle(Hash_Stat,p,$5CA95262+tempI,tar)
call SaveInteger(Hash_Stat,p,$F926F8E2+tempI,skill)
call SaveInteger(Hash_Stat,p,$6E7CF101+tempI,1)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffff00001|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,wu,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.5)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag,30,85)
call SetTextTagFadepointBJ(bj_lastCreatedTextTag,0.2)
call SetTextTagVisibility(bj_lastCreatedTextTag,false)
if GetLocalPlayer()==Player(p-1)then
call SetTextTagVisibility(bj_lastCreatedTextTag,true)
endif
set t=CreateTimer()
call SaveInteger(Hash_Stat,GetHandleId(t),$76C18425,tempI)
call SaveReal(Hash_Stat,GetHandleId(t),$6B54C545,6.0)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call TimerStart(t,0.0,false,function LatikaNewUnit)
exitwhen true
endif
endloop
endif
endif
endif
else
if CharcterStat[p]then
set typ1=1
else
set typ1=2
endif
endif
if LoadBoolean(System,p2,$FC6750F6)and s__Distance_PBP(GetUnitX(wu),GetUnitY(wu),GetUnitX(tar),GetUnitY(tar))<=800 then
set DamageDec[p2]=DamageDec[p2]+8
call SetUnitAbilityLevel(tar,'SY00',DamageDec[p2]+81)
call SaveBoolean(System,p2,$3F6EDC6E,true)
endif
if LoadBoolean(udg_Hash,p2,$6F31CAFD)and tar==BossAgro then
set DamageDec[p2]=DamageDec[p2]+10
call SetUnitAbilityLevel(tar,'SY00',DamageDec[p2]+81)
call SaveBoolean(System,p2,$65566E7,true)
endif
if LoadBoolean(System,p2,$E62F4E1E)and DamageLib__LuckySystem(LoadInteger(System,p2,$98679886),p2)then
set DamageDec[p2]=DamageDec[p2]+12
call SetUnitAbilityLevel(tar,'SY00',DamageDec[p2]+81)
set angle=s__Angle_PBP(GetUnitX(tar),GetUnitY(tar),GetUnitX(wu),GetUnitY(wu))
set tempR=GetUnitX(tar)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempR2=GetUnitY(tar)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p2,"war3mapImported\\@EF_DefendCaster_Red.mdx",0,tempR,tempR2,3,angle,1,0,0,0)
call SaveBoolean(System,p2,$570E2FA7,true)
endif
if LoadBoolean(udg_Hash,p2,$C67FEEB4)and ftyp !=5 then
set DamageDec[p2]=DamageDec[p2]+10
call SetUnitAbilityLevel(tar,'SY00',DamageDec[p2]+81)
call SaveBoolean(System,p2,$380FA26A,true)
endif
if IsUnitType(tar,UNIT_TYPE_HERO)and IsUnitType(wu,UNIT_TYPE_HERO)and IsUnitAlly(tar,Player(9))and wu==Boss then
if DamageDec[p2]<=0 then
set tempI2=R2I(LoadInteger(udg_Hash,999,$3862CC76)*0.8)+R2I(difficulty*1.5)
call SaveInteger(udg_Hash,p2,$5D711B5B,tempI2)
else
set tempI2=R2I(LoadInteger(udg_Hash,999,$3862CC76)*0.8)+R2I(difficulty*1.5)+R2I(DamageDec[p2]*0.8)
call SaveInteger(udg_Hash,p2,$5D711B5B,tempI2)
endif
set DamageDec[p2]=DamageDec[p2]-tempI2
call SetUnitAbilityLevel(tar,'SY00',DamageDec[p2]+81)
endif
if typ1==1 then
call UnitDamageTarget(wu,tar,dmg,true,false,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif typ1==2 then
call UnitDamageTarget(wu,tar,dmg,true,false,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endif
if LoadBoolean(System,p2,$3F6EDC6E)then
call SaveBoolean(System,p2,$3F6EDC6E,false)
set DamageDec[p2]=DamageDec[p2]-8
call SetUnitAbilityLevel(tar,'SY00',DamageDec[p2]+81)
endif
if LoadBoolean(System,p2,$380FA26A)then
call SaveBoolean(System,p2,$380FA26A,false)
set DamageDec[p2]=DamageDec[p2]-10
call SetUnitAbilityLevel(tar,'SY00',DamageDec[p2]+81)
endif
if LoadBoolean(System,p2,$65566E7)then
call SaveBoolean(System,p2,$65566E7,false)
set DamageDec[p2]=DamageDec[p2]-10
call SetUnitAbilityLevel(tar,'SY00',DamageDec[p2]+81)
endif
if LoadBoolean(System,p2,$570E2FA7)then
call SaveBoolean(System,p2,$570E2FA7,false)
set DamageDec[p2]=DamageDec[p2]-12
call SetUnitAbilityLevel(tar,'SY00',DamageDec[p2]+81)
endif
if IsUnitType(tar,UNIT_TYPE_HERO)and IsUnitType(wu,UNIT_TYPE_HERO)and IsUnitAlly(tar,Player(9))and wu==Boss then
set tempI2=LoadInteger(udg_Hash,p2,$5D711B5B)
set DamageDec[p2]=DamageDec[p2]+tempI2
call SetUnitAbilityLevel(tar,'SY00',DamageDec[p2]+81)
endif
set t=null
set tar=null
set wu=null
set c=null
endfunction
function s__BytePtr__staticgetindex takes integer address returns integer
return JNMemoryGetByte(address)
endfunction
function s__BytePtr__staticsetindex takes integer address,integer value returns nothing
call JNMemorySetByte(address,value)
endfunction
function s__BytePtr__get_value takes integer this returns integer
return JNMemoryGetByte(this)
endfunction
function s__BytePtr__set_value takes integer this,integer value returns nothing
call JNMemorySetByte(this,value)
endfunction
function s__BytePtr__getindex takes integer this,integer offset returns integer
return JNMemoryGetInteger(this+offset)
endfunction
function s__BytePtr__setindex takes integer this,integer offset,integer value returns nothing
call JNMemorySetByte(this+offset,value)
endfunction
function s__IntPtr__staticgetindex takes integer address returns integer
return JNMemoryGetInteger(address)
endfunction
function s__IntPtr__staticsetindex takes integer address,integer value returns nothing
call JNMemorySetInteger(address,value)
endfunction
function s__IntPtr__get_value takes integer this returns integer
return JNMemoryGetInteger(this)
endfunction
function s__IntPtr__set_value takes integer this,integer value returns nothing
call JNMemorySetInteger(this,value)
endfunction
function s__IntPtr__getindex takes integer this,integer offset returns integer
return JNMemoryGetInteger(this+(offset*4))
endfunction
function s__IntPtr__setindex takes integer this,integer offset,integer value returns nothing
call JNMemorySetInteger(this+(offset*4),value)
endfunction
function s__RealPtr__staticgetindex takes integer address returns real
return JNMemoryGetReal(address)
endfunction
function s__RealPtr__staticsetindex takes integer address,real value returns nothing
call JNMemorySetReal(address,value)
endfunction
function s__RealPtr__get_value takes integer this returns real
return JNMemoryGetReal(this)
endfunction
function s__RealPtr__set_value takes integer this,real value returns nothing
call JNMemorySetReal(this,value)
endfunction
function s__RealPtr__getindex takes integer this,integer offset returns real
return JNMemoryGetReal(this+(offset*4))
endfunction
function s__RealPtr__setindex takes integer this,integer offset,real value returns nothing
call JNMemorySetReal(this+(offset*4),value)
endfunction
function s__PtrPtr__staticgetindex takes integer address returns integer
return JNMemoryGetInteger(address)
endfunction
function s__PtrPtr__staticsetindex takes integer address,integer value returns nothing
call JNMemorySetInteger(address,value)
endfunction
function s__PtrPtr__get_value takes integer this returns integer
return JNMemoryGetInteger(this)
endfunction
function s__PtrPtr__set_value takes integer this,integer value returns nothing
call JNMemorySetInteger(this,value)
endfunction
function s__PtrPtr__getindex takes integer this,integer offset returns integer
return JNMemoryGetInteger(this+(offset*4))
endfunction
function s__PtrPtr__setindex takes integer this,integer offset,integer value returns nothing
call JNMemorySetInteger(this+(offset*4),value)
endfunction
function Production___SteinsGate2T takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
if ProduceLV<6 then
set ProduceLV=6
call StopSoundBJ(LastBGM,false)
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_SteinsGate_Get1.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
endif
call SetPlayerName(Player(8),"|cffFF7E9D마키세 크리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"당신을..")
call TimerStart(t,1.64,false,function Production___SteinsGate2T)
endif
if stage==1 then
call SetPlayerName(Player(8),"|cffFF7E9D마키세 크리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"줄곧 찾고있었어요!..")
call TimerStart(t,2.93,false,function Production___SteinsGate2T)
endif
if stage==2 then
call SetPlayerName(Player(8),"|cffFF7E9D마키세 크리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"그때..")
call TimerStart(t,1.74,false,function Production___SteinsGate2T)
endif
if stage==3 then
call SetPlayerName(Player(8),"|cffFF7E9D마키세 크리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"날 구해줬던 당신을..")
call TimerStart(t,2.57,false,function Production___SteinsGate2T)
endif
if stage==4 then
call SetPlayerName(Player(8),"|cffFF7E9D마키세 크리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"계속....")
call TimerStart(t,2.57,false,function Production___SteinsGate2T)
endif
if stage==5 then
call SetPlayerName(Player(8),"|cff8b008b오카베 린타로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"나다...!!")
call TimerStart(t,1.48,false,function Production___SteinsGate2T)
endif
if stage==6 then
call SetPlayerName(Player(8),"|cff8b008b오카베 린타로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"어째서 그녀가 여기에 있지?...")
call TimerStart(t,2.73,false,function Production___SteinsGate2T)
endif
if stage==7 then
call SetPlayerName(Player(8),"|cff8b008b오카베 린타로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"그것이..")
call TimerStart(t,1.7,false,function Production___SteinsGate2T)
endif
if stage==8 then
call SetPlayerName(Player(8),"|cff8b008b오카베 린타로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffc71585「슈타인즈 게이트」|r의 선택인가!..")
call TimerStart(t,5.305,false,function Production___SteinsGate2T)
endif
if stage==9 then
call SetPlayerName(Player(8),"|cff8b008b오카베 린타로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"어서와.....")
call TimerStart(t,5.305,false,function Production___SteinsGate2T)
if ProduceLV==6 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_SteinsGate_GetBGM.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call ProduTime(88,6)
endif
endif
if stage==10 then
call SetPlayerName(Player(8),"|cff8b008b오카베 린타로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"나의 조수..")
call TimerStart(t,1.77,false,function Production___SteinsGate2T)
endif
if stage==11 then
call SetPlayerName(Player(8),"|cff8b008b오카베 린타로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"마키세 크리스..")
call TimerStart(t,2.27,false,function Production___SteinsGate2T)
endif
if stage==12 then
call SetPlayerName(Player(8),"|cff8b008b오카베 린타로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"아니..")
call TimerStart(t,0.69,false,function Production___SteinsGate2T)
endif
if stage==13 then
call SetPlayerName(Player(8),"|cff8b008b오카베 린타로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFF7E9D크리스티나!..")
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function SteinsGate2 takes integer p returns nothing
local timer t=CreateTimer()
call TimerStart(t,0.01,false,function Production___SteinsGate2T)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call FilterBasic(Player(p-1),2.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,100.00,100.00,0.00,100.00,100.00,100.00,100.00)
set t=null
endfunction
function Production___SteinsGateT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
if ProduceLV<6 then
set ProduceLV=6
call StopSoundBJ(LastBGM,false)
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_SteinsGate_Final1.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
endif
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"인과는 성립되었다.")
call TimerStart(t,3.82,false,function Production___SteinsGateT)
endif
if stage==1 then
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"계획의 최종단계에 대해 이야기해보지.")
call TimerStart(t,3.63,false,function Production___SteinsGateT)
if ProduceLV==6 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_SteinsGate_Final_BGM.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call ProduTime(64,6)
endif
endif
if stage==2 then
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"최종 미션..")
call TimerStart(t,2.25,false,function Production___SteinsGateT)
endif
if stage==3 then
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"오페레이션 스쿨드의 개요를 설명하지.")
call TimerStart(t,3.47,false,function Production___SteinsGateT)
endif
if stage==4 then
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"확정된 과거를 바꾸지않고")
call TimerStart(t,3.24,false,function Production___SteinsGateT)
endif
if stage==5 then
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"결과를 바꿔라.")
call TimerStart(t,2.5,false,function Production___SteinsGateT)
endif
if stage==6 then
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"최초의 너를 속여라.")
call TimerStart(t,3.12,false,function Production___SteinsGateT)
endif
if stage==7 then
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffdc143c세계를----")
call TimerStart(t,1.67,false,function Production___SteinsGateT)
endif
if stage==8 then
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffff0000속여라!")
call TimerStart(t,1.72,false,function Production___SteinsGateT)
endif
if stage==9 then
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"그것이.....")
call TimerStart(t,1.67,false,function Production___SteinsGateT)
endif
if stage==10 then
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffc71585「슈타인즈 게이트」|r에 도달하기 위한 선택이다.")
call TimerStart(t,5.494,false,function Production___SteinsGateT)
endif
if stage==11 then
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"건투를 빌도록 하지.")
call TimerStart(t,1.84,false,function Production___SteinsGateT)
endif
if stage==12 then
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffDB7093엘")
call TimerStart(t,1.63,false,function Production___SteinsGateT)
endif
if stage==13 then
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffEB7EA7프사이")
call TimerStart(t,1.54,false,function Production___SteinsGateT)
endif
if stage==14 then
call SetPlayerName(Player(8),"|cff8b008b15년후의 오카베 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffCD426B콩그루")
call TimerStart(t,29,false,function Production___SteinsGateT)
endif
if stage==15 then
call SaveInteger(udg_Hash,p,$3D7E2EF,6)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function SteinsGate takes integer p returns nothing
local timer t=CreateTimer()
call TimerStart(t,60,false,function Production___SteinsGateT)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
set t=null
endfunction
function Production___KissShotT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
if ProduceLV<6 then
set ProduceLV=6
call StopSoundBJ(LastBGM,false)
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_KissShot.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
endif
call DisplayTimedTextToForce(GetPlayersAll(),3.5,"|cffFAC6C6몰락한 흡혈귀의 재림")
call FilterBasic(Player(p),2.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,0.00,0.00,10.00,100.00,0.00,0.00,100.00)
call TimerStart(t,3.33,false,function Production___KissShotT)
endif
if stage==1 then
call DisplayTimedTextToForce(GetPlayersAll(),3.5,"|cffFAC6C6전설의 흡혈귀")
call FilterBasic(Player(p),2.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,0.00,0.00,10.00,100.00,0.00,0.00,100.00)
call TimerStart(t,3.33,false,function Production___KissShotT)
endif
if stage==2 then
call DisplayTimedTextToForce(GetPlayersAll(),3.5,"|cffEA813D철혈이자 |cffCD0000열혈이자 |cff5050FF냉혈인 |cffEB3232흡혈귀")
call FilterBasic(Player(p),2.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,0.00,0.00,10.00,100.00,0.00,0.00,100.00)
call TimerStart(t,3.33,false,function Production___KissShotT)
endif
if stage==3 then
call DisplayTimedTextToForce(GetPlayersAll(),3.5,"|cffEB3232괴이의 왕이자 괴이 살해자.")
call FilterBasic(Player(p),2.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,0.00,0.00,10.00,100.00,0.00,0.00,100.00)
call TimerStart(t,3.33,false,function Production___KissShotT)
endif
if stage==4 then
call DisplayTimedTextToForce(GetPlayersAll(),3.5,"|cffFF0000그녀의 이름은")
call FilterBasic(Player(p),2.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,0.00,0.00,10.00,100.00,0.00,0.00,100.00)
call TimerStart(t,3.33,false,function Production___KissShotT)
endif
if stage==5 then
call DisplayTimedTextToForce(GetPlayersAll(),3.5,"|cffFF9473키스샷 |cffFF8200아세|cffFF9614로라|cffFFB432오리온 |cffF56E6E하트|cffFF3232언더|cffCD0000블레이드")
call FilterBasic(Player(p),2.00,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,10.00,100.00,0.00,0.00,100.00)
if ProduceLV==6 then
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_KissShotBGM.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call ProduTime(95,6)
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function KissShot takes integer p returns nothing
local timer t=CreateTimer()
call TimerStart(t,0.01,false,function Production___KissShotT)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p-1)
set t=null
endfunction
function Production___OtinusGETT2 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
if ProduceLV<6 then
set ProduceLV=6
call StopSoundBJ(LastBGM,false)
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_Otinus_Open2.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call SetPlayerName(Player(8),"|cffFF9B00오티누스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"그래도 너는 나를 구하겠다는거냐..??")
call TimerStart(t,3.7,false,function Production___OtinusGETT2)
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
if stage==1 then
call SetPlayerName(Player(8),"|cffAAB9FF카미조 토우마 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"약속했었잖아?")
call TimerStart(t,2.41,false,function Production___OtinusGETT2)
endif
if stage==2 then
call SetPlayerName(Player(8),"|cffAAB9FF카미조 토우마 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"세계의 모든것과 싸우게 된다고 하더라도...")
call TimerStart(t,3.14,false,function Production___OtinusGETT2)
endif
if stage==3 then
call SetPlayerName(Player(8),"|cffAAB9FF카미조 토우마 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"내가 너를 구해주겠다고.")
if ProduceLV==6 then
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_Otinus_Open2BGM.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call ProduTime(28,6)
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function OtinusGET2 takes integer p returns nothing
local timer t=CreateTimer()
call TimerStart(t,0.01,false,function Production___OtinusGETT2)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p-1)
set t=null
endfunction
function Production___OtinusGETT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_Otinus_Open1.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call SetPlayerName(Player(8),"|cffFF9B00오티누스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFF0000좋다.")
call TimerStart(t,2,false,function Production___OtinusGETT)
endif
if stage==1 then
call SetPlayerName(Player(8),"|cffFF9B00오티누스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFF0000마술로 세계의 모든것을 조종하는 자이며")
call TimerStart(t,3.6,false,function Production___OtinusGETT)
endif
if stage==2 then
call SetPlayerName(Player(8),"|cffFF9B00오티누스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFF0000마술의 신인 오티누스가 너를 쳐부숴주마.")
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function OtinusGET takes integer p returns nothing
local timer t=CreateTimer()
call TimerStart(t,0.01,false,function Production___OtinusGETT)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p-1)
set t=null
endfunction
function Production___PilloGetT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_U018get.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call SetPlayerName(Player(8),"|cffffdab9필로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffdeb887좋은아침 주인님~")
call TimerStart(t,4.98,false,function Production___PilloGetT)
endif
if stage==1 then
call SetPlayerName(Player(8),"|cffffdab9필로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffdeb887배고파졌어~")
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function PilloGet takes integer p returns nothing
local timer t=CreateTimer()
call TimerStart(t,0.01,false,function Production___PilloGetT)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p-1)
set t=null
endfunction
function Production___HevensFeelT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer loopA
local real tempX
local real tempY
local unit u=Charcter[p+1]
if UnitHasBuff(u,'Bmlt')==false then
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call Inv(u,51.0)
call InS(u,51.0)
call SetUnitAnimation(u,"death")
call EFsettingU(p+1,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,u,"origin")
call EFsettingU(p+1,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,u,"chest")
call EFsettingU(p+1,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,u,"head")
call EFsettingU(p+1,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,u,"left hand")
call EFsettingU(p+1,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,u,"right hand")
call TimerStart(t,0.5,false,function Production___HevensFeelT)
endif
if stage==1 then
call SetUnitVertexColor(u,0,0,0,255)
call EFsettingXY(p+1,"war3mapImported\\@EF_lightplat.mdl",50,GetUnitX(u),GetUnitY(u),0.3,270,1,0,0,0)
call EFsettingXY(p+1,"war3mapImported\\@EF_Artoria_EF3.mdl",50,GetUnitX(u),GetUnitY(u),1,270,1,0,0,0)
call TimerStart(t,0.5,false,function Production___HevensFeelT)
endif
if stage==2 then
if ProduceLV<6 then
set ProduceLV=6
call StopSoundBJ(LastBGM,false)
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_US08getAct.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
set LastBGM=udg_SND
endif
call TimerStart(t,0.25,false,function Production___HevensFeelT)
endif
if stage==3 then
call SetPlayerName(Player(8),"|cffaaaaaa??? |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469살고싶어..?")
call TimerStart(t,5.55,false,function Production___HevensFeelT)
endif
if stage==4 then
call SetPlayerName(Player(8),"|cffFF9100에미야 시로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469싶어....")
call TimerStart(t,2.9,false,function Production___HevensFeelT)
endif
if stage==5 then
call SetPlayerName(Player(8),"|cffFF9100에미야 시로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469살고 싶어!!")
call TimerStart(t,3.9,false,function Production___HevensFeelT)
endif
if stage==6 then
call SetPlayerName(Player(8),"|cffaaaaaa??? |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469다행이야")
call TimerStart(t,4.1,false,function Production___HevensFeelT)
endif
if stage==7 then
call SetPlayerName(Player(8),"|cffFF9100에미야 시로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469안돼... 돌아와!!!!")
call FilterBasic(Player(p),1.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,0.00,100.00,0.00,0.00,100.00)
call TimerStart(t,5.5,false,function Production___HevensFeelT)
endif
if stage==8 then
call SetPlayerName(Player(8),"|cffaaaaaa??? |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469기적을 보여줄게 , 이번건 대단해? 왜냐면 진짜 마법이니깐")
call TimerStart(t,13.1,false,function Production___HevensFeelT)
endif
if stage==9 then
call SetPlayerName(Player(8),"|cffaaaaaa??? |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469여동생은 지키는거라고했지? 응.. 나는 시로의 누나니깐.. 그럼 남동생을 지켜야지..")
call TimerStart(t,14.8,false,function Production___HevensFeelT)
endif
if stage==10 then
call EFsettingXY(p+1,"war3mapImported\\@Aura_SakuraEF.mdl",4,GetUnitX(u),GetUnitY(u),5,270,1,0,0,0)
call EFsettingXY(p+1,"war3mapImported\\@Aura_SakuraEF.mdl",4,GetUnitX(u),GetUnitY(u),5,270,1,0,0,0)
call EFsettingXY(p+1,"war3mapImported\\@Aura_SakuraEF.mdl",4,GetUnitX(u),GetUnitY(u),5,270,1,0,0,0)
call EFsettingU(p+1,"war3mapImported\\@Aura_SakuraEF.mdl",3,u,"origin")
if ProduceLV==6 then
call ProduTime(101,6)
call StopSound(LastBGM,false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_US08bgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
endif
call SetUnitVertexColor(u,255,255,255,255)
call SetUnitAnimation(u,"stand")
call FilterBasic(Player(p),2.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,75.00,90.00,0.00,100.00,75.00,90.00,100.00)
call UnitAddAbility(u,'UE03')
call UnitMakeAbilityPermanent(u,true,'UE03')
call SaveInteger(System,p+1,$86FA2B12,4)
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_MAX_LIFE))
set loopA=LoadInteger(Hash_Stat,p+1,$92D803F1)
call SaveInteger(Hash_Stat,p+1,$92D803F1,loopA+30)
set loopA=LoadInteger(Hash_Stat,p+1,$8885555B)
call SaveInteger(Hash_Stat,p+1,$8885555B,loopA+5)
set loopA=LoadInteger(Hash_Stat,p+1,$B7E7C8AD)
call SaveInteger(Hash_Stat,p+1,$B7E7C8AD,loopA+25)
set tempX=LoadReal(Hash_Stat,p+1,$45E22B52)
call SaveReal(Hash_Stat,p+1,$45E22B52,tempX+0.05)
set tempX=LoadReal(Hash_Stat,p+1,$A7543052)
call SaveReal(Hash_Stat,p+1,$A7543052,tempX-0.1)
set tempX=LoadReal(Hash_Stat,p+1,$9BC8E22B)
call SaveReal(Hash_Stat,p+1,$9BC8E22B,tempX-0.1)
set loopA=GetItemCharges(GetItemOfTypeFromUnitBJ(u,'I998'))
call RemoveItem(GetItemOfTypeFromUnitBJ(u,'I998'))
call SaveBoolean(System,p+1,$48726432,false)
call StatUP(p+1,loopA*4,"체력")
call StatUP(p+1,loopA*4,"주스탯")
call TimerStart(udg_infoRe[p+1],0.01,false,null)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
else
call TimerStart(t,0.02,false,function Production___HevensFeelT)
endif
set t=null
set u=null
endfunction
function HevensFeel takes integer p returns nothing
local timer t=CreateTimer()
local integer a
call TimerStart(t,0.01,false,function Production___HevensFeelT)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p-1)
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='U003' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('US08'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
call Artfect_get('US09',Player(p-1))
call FilterBasic(Player(p-1),1.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,0.00,100.00,0.00,0.00,100.00)
set t=null
endfunction
function Production___HevensFeelCT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer loopA
local real tempX
local real tempY
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if ProduceLV==2 then
if stage==0 then
call SetPlayerName(Player(8),"|cffFF9100에미야 시로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469내가 지킬게.")
call TimerStart(t,1.9,false,function Production___HevensFeelCT)
endif
if stage==1 then
call SetPlayerName(Player(8),"|cffFF9100에미야 시로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469어떤 일이 있더라도 사쿠라 자신이 자신을 죽이려고 하더라도")
call TimerStart(t,5.2,false,function Production___HevensFeelCT)
endif
if stage==2 then
call SetPlayerName(Player(8),"|cffFF9100에미야 시로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469내가.. 사쿠라를 지키겠어.")
call TimerStart(t,5.5,false,function Production___HevensFeelCT)
endif
if stage==3 then
call SetPlayerName(Player(8),"|cffD65BC1마토 사쿠라 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469선....배...")
call TimerStart(t,6.7,false,function Production___HevensFeelCT)
endif
if stage==4 then
call SetPlayerName(Player(8),"|cffFF9100에미야 시로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469나는... 사쿠라만의 정의의 사자가 되겠어.")
set ProduceLV=0
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function HevensFeelC takes integer p returns nothing
local timer t=CreateTimer()
if ProduceLV<2 then
set ProduceLV=2
call TimerStart(t,0.15,false,function Production___HevensFeelCT)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p-1)
call StopSound(LastEFVoice,false,false)
call StopSound(LastBGM,false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_C005bgm.mp3"),(null),(117),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_C005sound.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
endif
set t=null
endfunction
function Production___HevensFeelUT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer loopA
local real tempX
local real tempY
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if ProduceLV==4 then
if stage==0 then
call SetPlayerName(Player(8),"|cffFFFA78??? |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469따라올 수 있겠나?")
call TimerStart(t,2.5,false,function Production___HevensFeelUT)
endif
if stage==1 then
call SetPlayerName(Player(8),"|cffFF9100에미야 시로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469따라올 수 있겠냐고..?? 헛소리 집어쳐..!!")
call TimerStart(t,4.5,false,function Production___HevensFeelUT)
endif
if stage==2 then
call SetPlayerName(Player(8),"|cffFF9100에미야 시로 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469네놈이야말로..! 따라와라!!!!!")
set ProduceLV=0
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function HevensFeelU takes integer p returns nothing
local timer t=CreateTimer()
if ProduceLV<4 then
set ProduceLV=4
call TimerStart(t,0.01,false,function Production___HevensFeelUT)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p-1)
call StopSound(LastEFVoice,false,false)
call StopSound(LastBGM,false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_U003bgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_U003sound.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
endif
set t=null
endfunction
function Production___ichigoT takes nothing returns nothing
local timer t=GetExpiredTimer()
local timerdialog td=LoadTimerDialogHandle(udg_Hash,GetHandleId(t),$62D47221)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer loopA
local real tempX
local real tempY
local integer a
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==1 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffF0B469부르고 있어..")
call TimerStart(t,2.6,false,function Production___ichigoT)
call FilterBasic(Player(p),2.60,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,60.00,100.00,0.00,0.00,100.00)
call vibration2(Player(p),15,0.1)
endif
if stage==2 then
call TimerStart(t,2.5,false,function Production___ichigoT)
call FilterBasic(Player(p),2.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,50.00,100.00,0.00,0.00,100.00)
endif
if stage==3 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffE6A55A부르고 있다고..")
call TimerStart(t,2.7,false,function Production___ichigoT)
call FilterBasic(Player(p),2.70,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,40.00,100.00,0.00,0.00,100.00)
call vibration2(Player(p),20,0.1)
endif
if stage==4 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffD7873C일어서..")
call TimerStart(t,2.3,false,function Production___ichigoT)
call FilterBasic(Player(p),2.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,30.00,100.00,0.00,0.00,100.00)
call vibration2(Player(p),25,0.1)
endif
if stage==5 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffD27328일어서..!")
call TimerStart(t,2.2,false,function Production___ichigoT)
call FilterBasic(Player(p),2.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,20.00,100.00,0.00,0.00,100.00)
call vibration2(Player(p),30,0.1)
endif
if stage==6 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffAE5E1A내가..")
call TimerStart(t,1.7,false,function Production___ichigoT)
call FilterBasic(Player(p),1.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,0.00,0.00,10.00,100.00,0.00,0.00,100.00)
call vibration2(Player(p),10,1.65)
endif
if stage==7 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cff8B4F1D내가..!!")
call TimerStart(t,0.8,false,function Production___ichigoT)
call FilterBasic(Player(p),0.8,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,0.00,0.00,0.00,100.00,0.00,0.00,100.00)
call vibration2(Player(p),20,0.75)
endif
if stage==8 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffffffff『 |cffB22222내가..지킨다!|cffffffff』")
call FilterBasic(Player(p),1.00,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,0.00,100.00,0.00,0.00,100.00)
call TimerStart(t,0.1,false,function Production___ichigoT)
call vibration2(Player(p),40,0.1)
endif
if stage==9 then
if ProduceLV==3 then
set ProduceLV=0
endif
set tempX=GetUnitX(Charcter[p+1])
set tempY=GetUnitY(Charcter[p+1])
call EFsettingXY(p+1,"war3mapImported\\@EF_Vinz Blast Death.mdl",0,tempX,tempY,2,0,1,0,0,0)
call EFsettingXY(p+1,"war3mapImported\\@EF_lvupRed.mdl",0,tempX,tempY,2,0,1,0,0,0)
call EFsettingXY(p+1,"war3mapImported\\@EF_DevouringSwarmEffect.mdl",0,tempX,tempY,1.5,0,1,0,0,0)
call vibration2(Player(p),60,0.1)
call SetUnitLifePercentBJ(Charcter[p+1],100)
call SetUnitAnimation(Charcter[p+1],"stand")
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,10)
call TimerStart(t,180.00,false,function Production___ichigoT)
set td=CreateTimerDialogBJ(t,"호로화가 끝나기까지..")
call SaveTimerDialogHandle(udg_Hash,GetHandleId(t),$62D47221,td)
set Ichigointeger[3]=5
set loopA=0
call TimerDialogDisplay(td,false)
if(GetLocalPlayer()==Player(p))then
call TimerDialogDisplay(td,true)
endif
endif
if stage==10 then
call DisableTrigger(gg_trg_IchigoSkill)
call UnitRemoveAbility(Charcter[p+1],'UE01')
set invenClick[p+1]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p,$DA437F80+a)=='R007' then
if GetLocalPlayer()==Player(p)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('R907'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
set Ichigointeger[3]=6
call DestroyTimerDialog(td)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set td=null
endfunction
function ichigoHoro takes integer p returns nothing
local timer t=CreateTimer()
local integer a
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='C010' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('R007'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
call UnitAddAbility(Charcter[p],'UE01')
call UnitMakeAbilityPermanent(Charcter[p],true,'UE01')
call FilterBasic(Player(p),0.60,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,90.00,100.00,0.00,0.00,100.00)
call TimerStart(t,1.0,false,function Production___ichigoT)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p-1)
set Ichigointeger[3]=5
set t=null
endfunction
function Production___ichigoMuT takes nothing returns nothing
local timer t=GetExpiredTimer()
local timerdialog td=LoadTimerDialogHandle(udg_Hash,GetHandleId(t),$62D47221)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer EFS=LoadInteger(udg_Hash,GetHandleId(t),$D18B76F0)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer loopA
local integer al
local real al2
local real tempX
local real tempY
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if EFS>=5 then
call SaveInteger(udg_Hash,GetHandleId(t),$D18B76F0,0)
set tempX=GetUnitX(Charcter[p+1])
set tempY=GetUnitY(Charcter[p+1])
call EFsettingXY(p+1,"war3mapImported\\@AF_Shio_Ichigo_Wy_Tx_Ly2.mdl",0,tempX,tempY,1,270,1,0,0,0)
if stage<92 then
call EFsettingU(p+1,"war3mapImported\\@AF_Shio_Ichigo_Wy_Tx_Ly.MDX",0,Charcter[p+1],"origin")
endif
else
call SaveInteger(udg_Hash,GetHandleId(t),$D18B76F0,EFS+1)
endif
if stage==1 then
call EXSetAbilityString('AF00',2,ABILITY_DATA_UBERTIP,"\n전방을 무월로 공격합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : |cffffa500"+I2S((GetHeroAgi(Charcter[p+1],true)+R2I(GetUnitState(Charcter[p+1],ConvertUnitState(0x14))))*100)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cff9932CC관통\n|cff00ff00범위|cffffa500 : 800\n|cff00ff00사거리|cffffa500 : 9000\n|cff00ff00특수|cffffa500 : 무월은 범위 증가에 영향을 받지않는다.")
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFF8200최후의 월아천충 이란것은..")
endif
if stage==12 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffD2691E내 자신이 월아가 되는것이다.")
endif
if stage==92 then
call StopSound(LastEFVoice,false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_U005_use03.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
endif
if stage==94 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cff8B4513이 기술을 쓰고나면 나는 사신의 힘을 전부 잃게된다.")
endif
if stage==171 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cff46649B최후라는것은 , 그런의미다.")
endif
if stage==300 then
call SaveBoolean(udg_Hash,p+1,$AAD35199,true)
set al=LoadInteger(Hash_Stat,p+1,$C46B0D8B)
call SaveInteger(Hash_Stat,p+1,$C46B0D8B,al-40)
set al=LoadInteger(Hash_Stat,p+1,$C18D16A0)
call SaveInteger(Hash_Stat,p+1,$C18D16A0,al-180)
set al=LoadInteger(Hash_Stat,p+1,$924944F9)
call SaveInteger(Hash_Stat,p+1,$924944F9,al-30)
set al=LoadInteger(Hash_Stat,p+1,$D8C9D96B)
call SaveInteger(Hash_Stat,p+1,$D8C9D96B,al-10)
call TimerStart(udg_infoRe[p+1],0,false,null)
call DisableTrigger(gg_trg_IchigoSkill)
call UnitRemoveAbility(Charcter[p+1],'AF00')
set invenClick[p+1]=false
set al=0
loop
exitwhen al>31
if LoadInteger(Hash,p,$DA437F80+al)=='U005' then
if GetLocalPlayer()==Player(p)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(al)+"/"+I2S('N023'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",al),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",al),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set al=al+1
endloop
set al=0
loop
exitwhen al>31
if LoadInteger(Hash,p,$DA437F80+al)=='R008' then
if GetLocalPlayer()==Player(p)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(al)+"/"+I2S('N022'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",al),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",al),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set al=al+1
endloop
call SetPlayerAbilityAvailableBJ(false,'AF00',Player(p))
call UArtADD('U007',p+1)
call UArtADD('U006',p+1)
if ProduceLV==4 then
set ProduceLV=0
endif
call DestroyTimerDialog(td)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call TimerStart(t,0.1,false,function Production___ichigoMuT)
endif
set t=null
set td=null
endfunction
function ichigoMugetsu takes integer p returns nothing
local timer t=CreateTimer()
local integer al
local real al2
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_U005_useBGM.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_U005_use02.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
endif
call EFsettingU(p,"war3mapImported\\@AF_Shio_Ichigo_Wy_Tx_Ly.MDX",0,Charcter[p],"origin")
call EFsettingU(p,"war3mapImported\\@AF_Mugestu2.mdx",30,Charcter[p],"hand left")
call EFsettingU(p,"war3mapImported\\@AF_Mugestu2.mdx",30,Charcter[p],"hand right")
call EFsettingU(p,"war3mapImported\\@AF_MugestuEF1.mdx",30,Charcter[p],"origin")
call EFsettingU(p,"war3mapImported\\@AF_Mugestu3.mdx",30,Charcter[p],"origin")
set al=LoadInteger(Hash_Stat,p,$C46B0D8B)+20
call SaveInteger(Hash_Stat,p,$C46B0D8B,al)
set al=LoadInteger(Hash_Stat,p,$C18D16A0)+90
call SaveInteger(Hash_Stat,p,$C18D16A0,al)
set al=LoadInteger(Hash_Stat,p,$924944F9)+15
call SaveInteger(Hash_Stat,p,$924944F9,al)
set al=LoadInteger(Hash_Stat,p,$D8C9D96B)+5
call SaveInteger(Hash_Stat,p,$D8C9D96B,al)
call StartTimerBJ(udg_infoRe[p],false,0.0)
call FilterBasic(Player(p),1.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,100.00,100.00,0.00,0.00,0.00,0.00,100.00)
call TimerStart(t,0.1,false,function Production___ichigoMuT)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call SaveInteger(udg_Hash,GetHandleId(t),$D18B76F0,1)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p-1)
set t=null
endfunction
function Production___ichigoMaxHoroT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==1 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFFDC3C아야..")
call TimerStart(t,1.3,false,function Production___ichigoMaxHoroT)
endif
if stage==2 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFFDC3C좀 기세 좋게 등장해버렸나?..")
call TimerStart(t,3,false,function Production___ichigoMaxHoroT)
endif
if stage==3 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFFDC3C자 그럼..")
call TimerStart(t,1.6,false,function Production___ichigoMaxHoroT)
endif
if stage==4 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFFDC3C단숨에 정리하자고!")
call TimerStart(t,2.1,false,function Production___ichigoMaxHoroT)
endif
if stage==5 then
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFFDC3C한꺼번에 간다!")
call TimerStart(t,1.8,false,function Production___ichigoMaxHoroT)
endif
if stage==6 then
if ProduceLV==6 then
set ProduceLV=0
endif
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cff8c8c8c만해!")
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function ichigoMaxHoro takes integer p returns nothing
local timer t=CreateTimer()
if ProduceLV<6 then
set ProduceLV=6
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_ichigoUSgetBgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_ichigoUSget.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
endif
call FilterBasic(Player(p-1),1.80,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,100.00,100.00,30.00,100.00,100.00,100.00,100.00)
call TimerStart(t,0.1,false,function Production___ichigoMaxHoroT)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p-1)
set t=null
endfunction
function Production___ArisProdT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==1 then
call SetPlayerName(Player(8),"|cff282828??? |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF상태변화.. 접촉 허가 대상을 감지..")
call TimerStart(t,5.4,false,function Production___ArisProdT)
endif
if stage==2 then
call SetPlayerName(Player(8),"|cffbebebe??? |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF휴면 상태를 해제합니다.")
call TimerStart(t,6.6,false,function Production___ArisProdT)
endif
if stage==3 then
call SetPlayerName(Player(8),"|cffC8FFFF??? |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF아리스는..")
call TimerStart(t,1.5,false,function Production___ArisProdT)
endif
if stage==4 then
call SetPlayerName(Player(8),"|cffC8FFFF??리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF긴 시간동안 잠들어있었습니다.")
call TimerStart(t,5,false,function Production___ArisProdT)
endif
if stage==5 then
call SetPlayerName(Player(8),"|cff78F3FF?아리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF그런 아리스를 깨워준건")
call TimerStart(t,4.2,false,function Production___ArisProdT)
endif
if stage==6 then
call SetPlayerName(Player(8),"|cff78F3FF?도 아리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF게임을 더없이 사랑하는 동료들과..")
call TimerStart(t,4.3,false,function Production___ArisProdT)
endif
if stage==7 then
call SetPlayerName(Player(8),"|cff64AAFF텐도 아리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF'선생님'")
if ProduceLV==4 then
set ProduceLV=0
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function ArisProd takes integer p returns nothing
local timer t=CreateTimer()
call SetPlayerAbilityAvailable(Player(p-1),'AF02',false)
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastEFVoice,false)
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_US04get.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
set LastBGM=udg_SND
endif
if GetUnitTypeId(Charcter[p])=='HR09' then
call SaveBoolean(udg_Hash,p,$3EC4FAF3,true)
call TimerStart(udg_PstatTimer[p],0.01,false,null)
endif
call TimerStart(t,0.1,false,function Production___ArisProdT)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p-1)
set t=null
endfunction
function Aris takes integer p returns nothing
local item it
local integer a=0
local unit u=Charcter[p]
call SetPlayerAbilityAvailable(Player(p-1),'AF01',false)
if ArtBoolean('US02',p)or GetUnitTypeId(Charcter[p])=='HR09' then
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='U002' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('U010'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
call ArisProd(p)
if ArtBoolean('US02',p)then
call RArtADD('R010',p)
call RArtADD('R010',p)
call RArtADD('R010',p)
call RArtADD('R010',p)
call SaveBoolean(udg_Hash,p,$152E74D6,true)
call SaveInteger(udg_Hash,p,$B3487195,0)
endif
else
call ArtiCut(p,3,'US02')
call StatUP(p,0.4,"피증")
call StatUP(p,-15,"피감")
call StatUP(p,-0.15,"스킬범위")
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='U002' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('US03'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_US03bgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call ProduTime(30,4)
endif
call SaveBoolean(udg_Hash,p,$7EA003E,true)
if LoadBoolean(System,p,$F3C2DB66)and not LoadBoolean(udg_Hash,p,$72822878)then
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='C012' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('C052'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
endif
if LoadBoolean(System,p,$224E7B1B)and not LoadBoolean(udg_Hash,p,$72822878)then
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='C048' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('C050'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
endif
if LoadBoolean(System,p,$D8E4D1A5)and not LoadBoolean(udg_Hash,p,$72822878)then
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='C049' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('C051'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
endif
if LoadBoolean(System,p,$35361B7A)and not LoadBoolean(udg_Hash,p,$72822878)then
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='U057' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('U058'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
endif
if LoadBoolean(udg_Hash,p,$7EA003E)and not LoadBoolean(udg_Hash,p,$72822878)and LoadBoolean(System,p,$F3C2DB66)and LoadBoolean(System,p,$224E7B1B)and LoadBoolean(System,p,$D8E4D1A5)and LoadBoolean(System,p,$35361B7A)then
call SaveInteger(System,p,$8CD7D666,1)
endif
endif
set u=null
set it=null
endfunction
function Production___ArisProdUST takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==1 then
call SetPlayerName(Player(8),"|cff64AAFF텐도 아리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF게임이 재밌는 이유는")
call TimerStart(t,2.55,false,function Production___ArisProdUST)
endif
if stage==2 then
call SetPlayerName(Player(8),"|cff64AAFF텐도 아리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF그곳에 세상의 아름다움이 담겨져있으니까")
call TimerStart(t,4.75,false,function Production___ArisProdUST)
endif
if stage==3 then
call SetPlayerName(Player(8),"|cff64AAFF텐도 아리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF그걸 선생님 덕분에 알게되었어요")
call TimerStart(t,3.15,false,function Production___ArisProdUST)
endif
if stage==4 then
call SetPlayerName(Player(8),"|cff64AAFF텐도 아리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF게임도... 친구도..")
call TimerStart(t,3.85,false,function Production___ArisProdUST)
endif
if stage==5 then
call SetPlayerName(Player(8),"|cff64AAFF텐도 아리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF지금 이 순간도..!")
call TimerStart(t,2.7,false,function Production___ArisProdUST)
endif
if stage==6 then
call SetPlayerName(Player(8),"|cff64AAFF텐도 아리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF이 세상에는 아름다운것이 잔뜩있습니다!")
call TimerStart(t,4.6,false,function Production___ArisProdUST)
endif
if stage==7 then
call SetPlayerName(Player(8),"|cff64AAFF텐도 아리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF선생님!!")
call TimerStart(t,1.4,false,function Production___ArisProdUST)
endif
if stage==8 then
if ProduceLV==6 then
set ProduceLV=0
endif
call SetPlayerName(Player(8),"|cff64AAFF텐도 아리스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffC8FFFF아리스는... 용사가 되고싶어요!")
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function ArisUS04 takes integer p returns nothing
local integer a=0
local timer t=CreateTimer()
if ProduceLV<6 then
set ProduceLV=6
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_US04bgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_US04getSound.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
endif
call TriggerRegisterPlayerChatEvent(gg_trg_ArisLight,Player(p-1),"빛이여!",true)
call FilterBasic(Player(p-1),2.50,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",10,10,100.00,30.00,10,10,10,100.00)
call TimerStart(t,0.1,false,function Production___ArisProdUST)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p-1)
set t=null
endfunction
function Solver68 takes integer p returns nothing
local integer a
call ArtThrow('N008',p)
call ArtThrow('N009',p)
call ArtThrow('N010',p)
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='C004' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('US01'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
set Range[p]=Range[p]+100
call TimerStart(udg_infoRe[p],0.02,false,null)
call StatUP(p,400,"일공")
if ProduceLV<4 then
set ProduceLV=4
call ProduTime(53,4)
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_US01bgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
endif
set US01[p]=true
set US01damage[p]=0.2
endfunction
function Production___PrenaPatesT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer al
local unit u=Charcter[p]
local integer a
call StatUP(p,0.15,"피증")
call StatUP(p,0.2,"스킬범위")
call StatUP(p,1500,"주스탯")
call StatUP(p,30,"주탯퍼")
call SaveInteger(NormalArt,p,6,0)
call UnitAddAbility(u,'UE05')
call UnitMakeAbilityPermanent(u,true,'UE05')
set al=LoadInteger(Hash_Stat,p+1,$753B4F2F)
if N008[p]then
set N008[p]=false
set al=al+10
else
call ArtiCut(p,1,'N008')
endif
if LoadBoolean(System,p,$FE738A1E)then
call SaveBoolean(System,p,$FE738A1E,false)
set al=al+10
else
call ArtiCut(p,1,'N009')
endif
if LoadBoolean(System,p,$D4E79325)then
call SaveBoolean(System,p,$D4E79325,false)
set al=al+10
else
call ArtiCut(p,1,'N010')
endif
if C004[p]then
set C004[p]=false
set al=al+10
else
call ArtiCut(p,2,'C004')
endif
if US01[p]then
set US01[p]=false
endif
if LoadBoolean(udg_Hash,p,$89619C0C)then
call SaveBoolean(udg_Hash,p,$89619C0C,false)
set al=al+10
else
call ArtiCut(p,4,'U051')
endif
if LoadBoolean(System,p,$E9917373)then
call SaveBoolean(System,p,$E9917373,false)
set temp_integer=LoadInteger(Hash_Stat,p+1,$A7543052)-1
call SaveInteger(Hash_Stat,p,$A7543052,temp_integer)
set al=al+10
else
call ArtiCut(p,4,'U009')
endif
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='US05' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('US06'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
endif
if LoadInteger(Hash,p-1,$DA437F80+a)=='US03' then
if GetLocalPlayer()==Player(p-1)then
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('US07'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
endif
set a=a+1
endloop
call SaveInteger(Hash_Stat,p,$753B4F2F,al)
call TimerStart(udg_infoRe[p],0,false,null)
set bj_lastCreatedUnit=CreateUnitAtLoc(Player(p-1),'ndm1',GetUnitLoc(Charcter[p]),270)
call SaveUnitHandle(udg_Hash,p,$B5A55CA8,bj_lastCreatedUnit)
call SaveBoolean(udg_Hash,p,$664E8F23,true)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function PrenaPates takes integer p returns nothing
local timer t=CreateTimer()
if LoadInteger(Hash,p-1,$E79F32FE)<=29 then
if ProduceLV<6 then
set ProduceLV=6
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_US06bgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call ProduTime(48,6)
endif
call TimerStart(t,0.05,false,function Production___PrenaPatesT)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cffff0000[시스템] - 칸수가 부족해 신화각성에 실패했다.")
endif
set t=null
endfunction
function HolyArcana takes integer p returns nothing
local real tempR
local integer tempI
local integer a
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='U046' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('US12'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
call UnitRemoveAbility(Charcter[p],'A01E')
call FilterBasic(Player(p-1),1.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,100.00,0.00,0.00,100.00,100.00,0.00,100.00)
set tempI=LoadInteger(udg_Hash,p,$39F717C6)
call SaveInteger(udg_Hash,p,$39F717C6,tempI+1)
set tempI=LoadInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80)+1
call SaveInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80,tempI)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),5,PR[p]+1,I2S(tempI))
call SaveBoolean(Hash_Stat,p,$B9F5AC29,true)
set tempI=LoadInteger(Hash_Stat,p,$753B4F2F)+10
call SaveInteger(Hash_Stat,p,$753B4F2F,tempI)
set tempI=LoadInteger(Hash_Stat,p,$924944F9)+10
call SaveInteger(Hash_Stat,p,$924944F9,tempI)
set tempR=LoadReal(Hash_Stat,p,$A7543052)-0.05
call SaveReal(Hash_Stat,p,$A7543052,tempR)
set tempR=LoadReal(Hash_Stat,p,$9BC8E22B)-0.05
call SaveReal(Hash_Stat,p,$9BC8E22B,tempR)
set tempR=LoadReal(Hash_Stat,p,$A053013A)+0.2
call SaveReal(Hash_Stat,p,$A053013A,tempR)
set tempR=LoadReal(Hash_Stat,p,$164C40C9)+0.1
call SaveReal(Hash_Stat,p,$164C40C9,tempR)
set ArtRerollMaxChance[p]=ArtRerollMaxChance[p]+1
set tempI=LoadInteger(Hash_Stat,p,$B7E7C8AD)+15
call SaveInteger(Hash_Stat,p,$B7E7C8AD,tempI)
set tempI=LoadInteger(Hash_Stat,p,$ED314123)+10
call SaveInteger(Hash_Stat,p,$ED314123,tempI)
call TimerStart(udg_infoRe[p],0,false,null)
if ProduceLV<6 then
set ProduceLV=6
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_US12bgm.mp3"),(null),(112),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call ProduTime(33,6)
endif
endfunction
function SionJoonT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveInteger(udg_Hash,GetHandleId(t),0,stage+1)
if stage==0 then
call SetPlayerName(Player(8),"|cffFF8200요리가미 조온 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"그래.. 나는 조온..")
call TimerStart(t,2.94,false,function SionJoonT)
endif
if stage==1 then
call SetPlayerName(Player(8),"|cffFF8200요리가미 조온 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"무릎 꿇고 굴복하세요!!")
call TimerStart(t,1.434,false,function SionJoonT)
endif
if stage==2 then
call SetPlayerName(Player(8),"|cff00008b요리가미 시온 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"너희들..")
call TimerStart(t,1.75,false,function SionJoonT)
endif
if stage==3 then
call SetPlayerName(Player(8),"|cff00008b요리가미 시온 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"나에게 빈곤을 받쳐라..!")
call TimerStart(t,2.3,false,function SionJoonT)
endif
if stage==4 then
call SetPlayerName(Player(8),"|cffFF8200요리가미 조온 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"좋아--! 전부 처부숴주겠어요!!")
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function SionJoon takes nothing returns nothing
local timer t=CreateTimer()
if ProduceLV<3 then
set ProduceLV=3
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_JOSI.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
set LastEFVoice=udg_SND
call ProduTime(87,3)
endif
call TimerStart(t,0.5,false,function SionJoonT)
set t=null
endfunction
function ArchTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer l__Int=GetHeroInt(u,true)
local integer Qdmg=R2I(l__Int*(5+(LoadInteger(udg_Hashtable,p,$FAFE5485)*6)))
local integer Wdmg=R2I(l__Int*(7+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6)))
local integer Edmg=R2I(l__Int*(5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*6)))
local integer Rdmg=R2I(l__Int*(10+(LoadInteger(udg_Hashtable,p,$BB70E228)*20)))
local integer Tdmg=R2I(l__Int*(50+(LoadInteger(udg_Hashtable,p,$132FA1F5)*50)))
local real Fdmgup=(FIRED[p]+ICED[p]+WINDD[p]+ThunD[p])*0.1
local real temp2
if LoadBoolean(udg_Hash,p,$E7FAB0DC)then
set Fdmgup=Fdmgup*2
endif
set temp2=LoadReal(Hash_Stat,p,$45E22B52)-LoadReal(udg_Hash,GetHandleId(u),$D334F4A9)
set temp2=temp2+Fdmgup
call SaveReal(Hash_Stat,p,$45E22B52,temp2)
call SaveReal(udg_Hash,GetHandleId(u),$D334F4A9,Fdmgup)
set SkillD[p]=temp2
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Qm*Kirie[p])
set Qdmg=Qdmg+R2I(Wm*Kirie[p])
set Edmg=Edmg+R2I(Em*Kirie[p])
set Tdmg=Tdmg+R2I(Tm*Kirie[p])
endif
if LoadBoolean(udg_Hash,p,$E7FAB0DC)then
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"아키타입 어스는 스킬이 특정 레벨에 도달시 강화됩니다.\n\n또한 무속성을 제외하고 모든 속성 피해량의 20% 만큼 스킬 피해 증폭율이 증가합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00Q / W / E 스킬 강화 레벨|cffffa500 : 5\n|cff00ff00R 스킬 강화 레벨|cffffa500 : 3\n|cff00ff00스킬 피해 증폭율|cffffa500 : "+I2S(R2I(Fdmgup*100))+"% \n|cffFF0000EX : |cffffa500스킬 피해 증폭율을 2배로 얻는다.")
else
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"아키타입 어스는 스킬이 특정 레벨에 도달시 강화됩니다.\n\n또한 무속성을 제외하고 모든 속성 피해량의 10% 만큼 스킬 피해 증폭율이 증가합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00Q / W / E 스킬 강화 레벨|cffffa500 : 5\n|cff00ff00R 스킬 강화 레벨|cffffa500 : 3\n|cff00ff00스킬 피해 증폭율|cffffa500 : "+I2S(R2I(Fdmgup*100))+"% ")
endif
if LoadBoolean(udg_Hash,p,$E7FAB0DC)then
call EXSetAbilityString('H140',1,ABILITY_DATA_UBERTIP,"사용시 공상 구현화를 펼치게되며 내부에서 어스가 강화되고 스킬 재사용을 통해 내부에서 자유롭게 이동이 가능하다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00스킬 피해 증폭율|cffffa500 : "+I2S(R2I(Fdmgup*100))+"% \n|cff00ff00스킬 가속 증가|cffffa500 : 30\n|cff00ff00범위|cffffa500 : "+I2S(R2I(1200*Skrange[p]))+"\n|cff00ff00지속시간|cffffa500 : 20초\n|cff00ff00특수|cffffa500 : 범위내에서 나갈경우 효과가 즉시 종료된다.\n|cff00ff00특수2|cffffa500 : 지속시간동안 스킬 재사용을 통해 범위 내부를 자유롭게 이동이 가능하며 범위 안에서 모든 스킬이 모든 속성 피해로 적용된다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(20*ct[p]))+"초\n|cffFF0000EX : |cffffa500쿨타임이 감소하고 또한 효과 범위 안에서 모든 스킬이 모든 속성 피해로 적용된다.")
else
call EXSetAbilityString('H140',1,ABILITY_DATA_UBERTIP,"사용시 공상 구현화를 펼치게되며 내부에서 어스가 강화되고 스킬 재사용을 통해 내부에서 자유롭게 이동이 가능하다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00스킬 피해 증폭율|cffffa500 : "+I2S(R2I(Fdmgup*100))+"% \n|cff00ff00스킬 가속 증가|cffffa500 : 30\n|cff00ff00범위|cffffa500 : "+I2S(R2I(1200*Skrange[p]))+"\n|cff00ff00지속시간|cffffa500 : 20초\n|cff00ff00특수|cffffa500 : 범위내에서 나갈경우 효과가 즉시 종료된다.\n|cff00ff00특수2|cffffa500 : 지속시간동안 스킬 재사용을 통해 범위 내부를 자유롭게 이동이 가능하다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(30*ct[p]))+"초")
endif
call EXSetAbilityString('H146',1,ABILITY_DATA_UBERTIP,"공상구현화 내부로 자유롭게 이동한다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(1*ct[p]))+"초")
call EXSetAbilityString('H141',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 지점을 향해 불새를 날려 부딪치거나 최대사거리에 도달시 불새는 폭발해 적들에게 피해를 입힙니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffdc143c화염속성 |cffFF9100마법\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00스킬 강화|cffffa500 : 불새가 폭발한 지점에서 잠시후 한번더 폭발해 75%의 피해를 가한다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(10*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H141')+"/"+R2S(500*Skrange[p]))
call EXSetAbilityString('H142',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n사용 지점에 회오리를 일으켜 적들을 중앙으로 끌어모읍니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff32cd32바람속성 |cffFF9100마법\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00스킬 강화|cffffa500 : 끌어모으는 적들에게 매 피해마다 0.2초의 스턴을 걸며 끌어모읍니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(10*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H142')+"/"+R2S(500*Skrange[p]))
call EXSetAbilityString('H143',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n사용 지점에 빛의 파동을 일으켜 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff6464FF번개속성 |cffFF9100마법\n|cff00ff00범위|cffffa500 : "+I2S(R2I(700*Skrange[p]))+"\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00지연시간|cffffa500 : 0.5초\n|cff00ff00스턴|cffffa500 : 1초\n|cff00ff00스킬 강화|cffffa500 : 1.5초후 사용 지점에 빛의 검이 떨어져 60%의 피해와 1초의 스턴\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(10*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H143')+"/"+R2S(700*Skrange[p]))
call EXSetAbilityString('H144',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n사용 지점에 운석을 떨어트려 강력한 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffdc143c화염속성 |cffFF9100마법\n|cff00ff00범위|cffffa500 : "+I2S(R2I(1000*Skrange[p]))+"\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00지연시간|cffffa500 : 1.5초\n|cff00ff00스턴|cffffa500 : 1초\n|cff00ff00스킬 강화|cffffa500 : 운석이 두개 떨어져서 50%의 피해가 추가된다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(30*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H144')+"/"+R2S(1000*Skrange[p]))
call EXSetAbilityString('H145',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n사용시 종말을 불러일으켜 주변을 초토화합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffd700모든속성 |cffFF9100마법\n|cff00ff00범위|cffffa500 : "+I2S(R2I(3000*Skrange[p]))+"\n|cff00ff00지연시간|cffffa500 : 4초\n|cff00ff00특수|cffffa500 : 지연시간동안 무적 유지\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(90*ct[p]))+"초")
set u=null
endfunction
function ArchEX takes integer p returns nothing
local unit u=Charcter[p]
call SaveBoolean(udg_Hash,p,$E7FAB0DC,true)
call ArchTT(p)
call EXSetAbilityDataReal(EXGetUnitAbility(u,'H140'),1,105,20)
call IncUnitAbilityLevel(u,'H140')
call DecUnitAbilityLevel(u,'H140')
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_ExBGM.mp3"),(null),(107),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Ex.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call ProduTime(35,4)
endif
call SetPlayerName(Player(8),"|cffeee8aa아키타입 어스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"여흥이다.. 사냥을 시작하지")
set u=null
endfunction
function ArchD takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c=LoadUnitHandle(udg_Hash,GetHandleId(u),$54D17B64)
local unit d=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real range=LoadReal(udg_Hash,GetHandleId(u),$3A730E16)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage<=100 then
call StatChangeX(p,30,"쿨감",0.25,"H1401")
call StatChangeX(p,(FIRED[p]+ICED[p]+WINDD[p]+ThunD[p])*0.1,"스증",0.25,"H1400")
if not IsUnitInRange(u,c,range)then
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,100)
endif
endif
if stage>=100 then
call SaveBoolean(udg_Hash,GetHandleId(u),$60ED3912,false)
call SetPlayerAbilityAvailable(Player(p-1),'H146',false)
call SetPlayerAbilityAvailable(Player(p-1),'H140',true)
call KillUnit(c)
call RemoveUnit(d)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set c=null
set d=null
endfunction
function ArchDD takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real distance=LoadReal(udg_Hash,GetHandleId(t),$47527379)
local real distance2=LoadReal(udg_Hash,GetHandleId(t),$CE3B7D5A)
local real tempX
local real tempY
local unit dummy
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==1 then
call CTset(u,p,'H146',1)
endif
if stage<=9 then
call SetUnitAnimationByIndex(u,15)
if distance2<=40 then
set stage=10
else
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),angle)
call imagedummySET(p,dummy,Model[p])
call SetUnitScale(dummy,2,1,1)
call UnitRemove(dummy,0.12)
call SetUnitAnimationByIndex(dummy,15)
call invisible(dummy,40.00,100.00,0.12,0.01)
set tempX=GetUnitX(u)+(((distance*0.1)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((distance*0.1)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SaveReal(udg_Hash,GetHandleId(t),$CE3B7D5A,distance2-(distance*0.1))
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
endif
endif
if stage>=10 then
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set dummy=null
endfunction
function ArchQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c
local unit d=null
local integer g=s__party_create()
local real dmg
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real distance=LoadReal(udg_Hash,GetHandleId(t),$47527379)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local effect ef1=LoadEffectHandle(udg_Hash,GetHandleId(t),$1A2A361D)
local effect ef2=LoadEffectHandle(udg_Hash,GetHandleId(t),$FB5AD42D)
local boolean upgrad=LoadBoolean(udg_Hash,GetHandleId(t),$D6E10CAC)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call SetUnitAnimationByIndex(u,7)
call TimerStart(t,0.02,false,function ArchQ)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Qef1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
elseif stage==1 then
if distance>=1 then
set tempX=EXGetEffectX(ef1)+(((50)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=EXGetEffectY(ef1)+(((50)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EXSetEffectXY(ef1,tempX,tempY)
call EXSetEffectXY(ef2,tempX,tempY)
call SaveReal(udg_Hash,GetHandleId(t),$47527379,distance-50)
set distance=distance-50
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,300,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
set d=c
endif
endloop
if d !=null or distance<=0 then
set tempX=EXGetEffectX(ef1)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=EXGetEffectY(ef1)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,tempY)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_Q5.mdl",0,tempX,tempY,1*Skrange[p],270,1,0,0,0)
set dmg=(GetHeroInt(u,true)*(3+(LoadInteger(udg_Hashtable,p,$FAFE5485)*6)))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if LoadBoolean(udg_Hash,GetHandleId(u),$60ED3912)then
call Damage(u,c,dmg,2,5,false,1,'H141')
else
call Damage(u,c,dmg,2,1,false,1,'H141')
endif
endif
endloop
set stage=2
call TimerStart(t,0.02,false,function ArchQ)
else
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call TimerStart(t,0.02,false,function ArchQ)
endif
endif
endif
if stage==2 then
if upgrad==true then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Qef3.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_Q6.mdl",1.5,tempX,tempY,3*Skrange[p],270,1,0,0,0)
set d=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call EFsettingU(p,"war3mapImported\\@EF_Archetype_Q7.mdl",0,d,"origin")
call SetUnitScale(d,2.5*Skrange[p],1,1)
call UnitApplyTimedLife(d,'BHwe',1.50)
call invisible(d,0.00,100.00,1.35,1.35)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,d)
call DestroyEffect(ef1)
call DestroyEffect(ef2)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,3)
call TimerStart(t,0.02,false,function ArchQ)
else
call DestroyEffect(ef1)
call DestroyEffect(ef2)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
if stage>=3 and stage<=53 then
call TimerStart(t,0.02,false,function ArchQ)
if stage==53 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_QQ.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set d=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
call SetUnitVertexColor(d,255,255,255,255)
call SetUnitFlyHeight(d,3000.00,3000.00)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_Q9.mdl",0,tempX,tempY,6*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_Q8.mdl",0,tempX,tempY,2.5*Skrange[p],270,1,0,0,-200)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_Q10.mdl",0,tempX,tempY,2*Skrange[p],270,1,0,0,0)
set dmg=(GetHeroInt(u,true)*(3+(LoadInteger(udg_Hashtable,p,$FAFE5485)*6)))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if LoadBoolean(udg_Hash,GetHandleId(u),$60ED3912)then
call Damage(u,c,dmg,2,5,false,0.75,'H141')
else
call Damage(u,c,dmg,2,1,false,0.75,'H141')
endif
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
elseif stage==25 then
set d=CreateUnit(Player(p-1),'sys7',tempX,tempY,angle)
call EFsettingU(p,"war3mapImported\\@EF_Archetype_Q4.mdl",0,d,"origin")
call SetUnitAnimationByIndex(d,0)
call SetUnitScale(d,2.5,1,1)
call UnitApplyTimedLife(d,'BHwe',1.50)
call SetUnitVertexColor(d,255,255,255,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,d)
call TimerStart(t,0.3,false,function ArchQ)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,53)
endif
endif
call s__party_deallocate((g))
set u=null
set t=null
set c=null
set d=null
set ef1=null
set ef2=null
endfunction
function ArchW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c
local integer g=s__party_create()
local real dmg
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real tempX2
local real tempY2
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempR
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local boolean upgrad=LoadBoolean(udg_Hash,GetHandleId(t),$D6E10CAC)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call SetUnitAnimationByIndex(u,7)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_W2.mdl",0,tempX,tempY,3*Skrange[p],270,1,0,0,0)
call TimerStart(t,0.5,false,function ArchW)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Wef1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
endif
if stage==1 then
if upgrad==true then
call EFsettingXY(p,"Abilities\\Spells\\Items\\AIvi\\AIviTarget.mdl",0,tempX,tempY,1.5,270,1,0,0,-200)
call EFsettingXY(p,"Abilities\\Spells\\Items\\AIvi\\AIviTarget.mdl",0,tempX,tempY,1.5,270,1,0,0,-200)
call EFsettingXY(p,"Abilities\\Spells\\Items\\AIvi\\AIviTarget.mdl",0,tempX,tempY,1.5,270,1,0,0,-200)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_W3.mdl",0,tempX,tempY,2.5*Skrange[p],270,1,0,0,0)
endif
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,270)
call EFsettingU(p,"war3mapImported\\@EF_Archetype_W1.mdx",1.5,c,"origin")
call Expand(c,300.00*Skrange[p],400.00*Skrange[p],0.01,1.50)
call UnitApplyTimedLife(c,'BHwe',1.5)
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,270)
call UnitApplyTimedLife(c,'BHwe',0.5)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_WarStompCaster.mdl",c,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",c,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",c,"origin"))
call SetUnitVertexColor(c,0,0,0,255)
call SetUnitScale(c,1.8*Skrange[p],1,1)
call TimerStart(t,0.01,false,function ArchW)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Wef2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
endif
if stage>=2 then
call TimerStart(t,0.01,false,function ArchW)
if(stage-(stage/3)*3)==0 then
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if GetUnitAbilityLevel(c,'SY10')==0 then
set tempR=s__Angle_PBP(tempX,tempY,GetUnitX(c),GetUnitY(c))
set tempX2=GetUnitX(c)+(((-20)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(c)+(((-20)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call SetUnitX(c,tempX2)
call SetUnitY(c,tempY2)
endif
if upgrad then
call Stun(u,c,0.2)
endif
endif
endloop
endif
set dmg=(GetHeroInt(u,true)*(4+(LoadInteger(udg_Hashtable,p,$457BCFC0)*5)))
if(stage-(stage/14)*14)==0 then
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if LoadBoolean(udg_Hash,GetHandleId(u),$60ED3912)then
call Damage(u,c,dmg,2,5,false,0.1,'H142')
else
call Damage(u,c,dmg,2,3,false,0.1,'H142')
endif
endif
endloop
endif
if stage-(stage/30)*30==0 then
if upgrad then
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_W3.mdx",0,tempX,tempY,2.5*Skrange[p],270,1,0,0,0)
endif
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,270)
call UnitApplyTimedLife(c,'BHwe',0.5)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_WarStompCaster.mdl",c,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",c,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",c,"origin"))
call SetUnitVertexColor(c,0,0,0,255)
call SetUnitScale(c,1.8*Skrange[p],1,1)
endif
endif
if stage>=144 then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function ArchE takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c
local integer g=s__party_create()
local real dmg
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real tempX2
local real tempY2
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempR
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local boolean upgrad=LoadBoolean(udg_Hash,GetHandleId(t),$D6E10CAC)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call SetUnitAnimationByIndex(u,7)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_E1.mdl",1,tempX,tempY,1*Skrange[p],270,1,0,0,0)
call TimerStart(t,0.5,false,function ArchE)
endif
if stage==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Eef1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_E5.mdl",0,tempX,tempY,5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_E2.mdl",0,tempX,tempY,1.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_E6.mdl",0,tempX,tempY,5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_E4.mdl",0,tempX,tempY,6*Skrange[p],270,1,0,0,0)
set dmg=(GetHeroInt(u,true)*(5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*6)))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,700*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if LoadBoolean(udg_Hash,GetHandleId(u),$60ED3912)then
call Damage(u,c,dmg,2,5,false,1,'H143')
else
call Damage(u,c,dmg,2,4,false,1,'H143')
endif
call Stun(u,c,1)
endif
endloop
if upgrad then
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_E9.mdl",1.5,tempX,tempY,2*Skrange[p],270,1,0,0,0)
call TimerStart(t,1.5,false,function ArchE)
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
if stage==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Eef2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_E8.mdl",0,tempX,tempY,2.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_E5.mdl",0,tempX,tempY,5*Skrange[p],270,1,0,0,0)
set dmg=(GetHeroInt(u,true)*(5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*6)))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,700*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if LoadBoolean(udg_Hash,GetHandleId(u),$60ED3912)then
call Damage(u,c,dmg,2,5,false,0.6,'H143')
else
call Damage(u,c,dmg,2,4,false,0.6,'H143')
endif
call Stun(u,c,1)
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function ArchR takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c
local integer g=s__party_create()
local real dmg
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real tempX2
local real tempY2
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempR
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local boolean upgrad=LoadBoolean(udg_Hash,GetHandleId(t),$D6E10CAC)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Ref1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call SetUnitAnimationByIndex(u,7)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_R2.mdl",1.5,tempX,tempY,1.8*Skrange[p],270,1,0,0,0)
call TimerStart(t,1,false,function ArchR)
endif
if stage==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Ref2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempX2=tempX+(((-1000)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY2=tempY+(((-1000)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set c=CreateUnit(Player(p-1),'sys9',tempX2,tempY2,270)
call EFsettingU(p,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",0.5,c,"origin")
call SetUnitScale(c,8,1,1)
call SetUnitVertexColor(c,255,114,114,255)
call SetUnitFlyHeight(c,2000.00,0.00)
call SetUnitFlyHeight(c,0.00,4000.00)
call KnockBackXYef(c,tempX,tempY,0.50,0.01)
call UnitApplyTimedLife(c,'BHwe',0.5)
if upgrad then
set c=CreateUnit(Player(p-1),'sys9',tempX2,tempY2,270)
call EFsettingU(p,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",0.55,c,"origin")
call SetUnitScale(c,8,1,1)
call SetUnitVertexColor(c,255,114,114,255)
call SetUnitFlyHeight(c,2500.00,0.00)
call SetUnitFlyHeight(c,0.00,4545.00)
call KnockBackXYef(c,tempX,tempY,0.55,0.01)
call UnitApplyTimedLife(c,'BHwe',0.55)
endif
call TimerStart(t,0.5,false,function ArchR)
endif
if stage==2 then
call ND(Player(p-1),0.3,80)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_R3.mdl",0,tempX,tempY,8*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_R4.mdl",0,tempX,tempY,8*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_R5.mdl",0,tempX,tempY,10*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_R6.mdl",0,tempX,tempY,5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_R7.mdl",0,tempX,tempY,8*Skrange[p],270,1,0,0,-1000)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_R7.mdl",0,tempX,tempY,8*Skrange[p],270,1,0,0,-1000)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_R7.mdl",0,tempX,tempY,8*Skrange[p],270,1,0,0,-1000)
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,270)
call EFsettingU(p,"war3mapImported\\@EF_Archetype_R8.mdx",0.1,c,"origin")
call Expand(c,300.00,1000.00,0.01,0.10)
call UnitApplyTimedLife(c,'BHwe',0.1)
set dmg=(GetHeroInt(u,true)*(10+(LoadInteger(udg_Hashtable,p,$BB70E228)*15)))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1000*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if LoadBoolean(udg_Hash,GetHandleId(u),$60ED3912)then
if upgrad then
call Damage(u,c,dmg,2,5,false,1.5,'H144')
else
call Damage(u,c,dmg,2,5,false,1,'H144')
endif
else
if upgrad then
call Damage(u,c,dmg,2,1,false,1.5,'H144')
else
call Damage(u,c,dmg,2,1,false,1,'H144')
endif
endif
call Stun(u,c,1)
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function ArchT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c
local integer g=s__party_create()
local real dmg
local real tempX
local real tempY
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call SetUnitAnimationByIndex(u,8)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_EnergyFocusBlue.mdl",4,tempX,tempY,2,270,1,0,0,300)
call EFsettingXY(p,"war3mapImported\\@EF_ball_little_white.mdl",0,tempX,tempY,1,270,1,0,0,300)
endif
if stage==10 then
call SetUnitAnimationByIndex(u,8)
endif
if stage<=45 then
call EFsettingXY(p,"war3mapImported\\@EF_Cr_WindCirclefaster.mdl",0,GetUnitX(u),GetUnitY(u),GetRandomReal(0.4,0.6),270,1,0,0,0)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
if stage-(stage/2)*2==0 then
call EFsettingXY(p,"war3mapImported\\@EF_AZ_PotM(1)_W1_chest.mdl",0,tempX,tempY,GetRandomInt(3,5),270,1,0,GetRandomInt(1,360),300)
endif
endif
if stage<=50 then
call SetUnitFacing(u,tempR)
call EXSetUnitFacing(u,tempR)
call TimerStart(t,0.08,false,function ArchT)
call Mujuk(p,u)
endif
if stage==51 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Tef1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call RemoveShacull(p)
call ND(Player(p-1),0.3,120)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,270)
call EFsettingU(p,"war3mapImported\\@EF_[DZ.Spell]006_Blue.mdl",0.1,c,"origin")
call Expand(c,500.00*Skrange[p],2000.00*Skrange[p],0.01,0.10)
call UnitApplyTimedLife(c,'BHwe',0.1)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_W3.mdl",0,tempX,tempY,15*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_W3.mdl",0,tempX,tempY,15*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_W3.mdl",0,tempX,tempY,15*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_W3.mdl",0,tempX,tempY,15*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_W3.mdl",0,tempX,tempY,15*Skrange[p],270,1,0,0,0)
set dmg=(GetHeroInt(u,true)*(50+(LoadInteger(udg_Hashtable,p,$132FA1F5)*50)))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,3000*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,5,false,1,'H145')
endif
endloop
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function ArchSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local real tempR
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local integer tempI
local integer tempI2
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
local unit c
local integer g=s__party_create()
local real Mana
local effect ef
if GetSpellAbilityId()=='H140' then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Dsound.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call SetUnitScale(c,2*Skrange[p],1,1)
call imagedummySET(p,c,"war3mapImported\\@EF_Archetype_D1.mdl")
call SaveUnitHandle(udg_Hash,GetHandleId(u),$54D17B64,c)
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call SetUnitScale(c,7*Skrange[p],1,1)
call imagedummySET(p,c,"war3mapImported\\@EF_Archetype_D2.mdl")
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,c)
if LoadBoolean(udg_Hash,p,$E7FAB0DC)then
call SaveBoolean(udg_Hash,GetHandleId(u),$60ED3912,true)
endif
call StatChangeX(p,(FIRED[p]+ICED[p]+WINDD[p]+ThunD[p])*0.1,"스증",0.25,"H1400")
call StatChangeX(p,30,"쿨감",0.25,"H1401")
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(u),$3A730E16,1300*Skrange[p])
call SetPlayerAbilityAvailable(Player(p-1),'H146',true)
call SetPlayerAbilityAvailable(Player(p-1),'H140',false)
call TimerStart(t,0.2,true,function ArchD)
endif
if GetSpellAbilityId()=='H146' then
set c=LoadUnitHandle(udg_Hash,GetHandleId(u),$54D17B64)
set tempR=LoadReal(udg_Hash,GetHandleId(u),$3A730E16)
if not IsUnitInRangeXY(c,SkillLocX,SkillLocY,tempR)then
call DestroyTimer(t)
else
set tempR=s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$47527379,tempR)
call SaveReal(udg_Hash,GetHandleId(t),$CE3B7D5A,tempR)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call Shacull(p)
call TimerStart(t,0.02,true,function ArchDD)
endif
endif
if GetSpellAbilityId()=='H141' then
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Qsound.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call SetUnitScale(c,3,1,1)
call SetUnitAnimationByIndex(c,0)
call EFsettingXY(p,"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",0,tempX,tempY,2,angle,1,90,0,0)
call UnitApplyTimedLife(c,'BHwe',0.1)
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_Archetype_Q4.mdl",tempX,tempY)
call EXSetEffectSize(ef,2)
call EXEffectMatRotateZ(ef,angle)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$1A2A361D,ef)
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_Archetype_Q2.mdl",tempX,tempY)
call EXSetEffectSize(ef,2.5)
call EXEffectMatRotateZ(ef,angle)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$FB5AD42D,ef)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$47527379,1500)
if LoadInteger(udg_Hashtable,p,$FAFE5485)>=5 then
call SaveBoolean(udg_Hash,GetHandleId(t),$D6E10CAC,true)
endif
call TimerStart(t,0.02,false,function ArchQ)
endif
if GetSpellAbilityId()=='H142' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Wsound.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1500 then
set tempX=GetUnitX(u)+(((1500)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((1500)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
if LoadInteger(udg_Hashtable,p,$457BCFC0)>=5 then
call SaveBoolean(udg_Hash,GetHandleId(t),$D6E10CAC,true)
endif
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,tempY)
call TimerStart(t,0.02,false,function ArchW)
endif
if GetSpellAbilityId()=='H143' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Esound.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1500 then
set tempX=GetUnitX(u)+(((1500)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((1500)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
if LoadInteger(udg_Hashtable,p,$6074AEF9)>=5 then
call SaveBoolean(udg_Hash,GetHandleId(t),$D6E10CAC,true)
endif
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,tempY)
call TimerStart(t,0.02,false,function ArchE)
endif
if GetSpellAbilityId()=='H144' then
set Mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Rsound.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1500 then
set tempX=GetUnitX(u)+(((1500)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((1500)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
if LoadInteger(udg_Hashtable,p,$BB70E228)>=3 then
call SaveBoolean(udg_Hash,GetHandleId(t),$D6E10CAC,true)
endif
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,tempY)
call TimerStart(t,0.02,false,function ArchR)
endif
if GetSpellAbilityId()=='H145' then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Arch_Tsound.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,GetUnitFacing(u))
call Shacull(p)
call Mujuk(p,u)
call TimerStart(t,0.02,false,function ArchT)
endif
call s__party_deallocate((g))
set u=null
set t=null
set c=null
set ef=null
endfunction
function ArchST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
local real tempR
set ChSkillD[p]='H140'
set ChSkillQ[p]='H141'
set ChSkillW[p]='H142'
set ChSkillE[p]='H143'
set ChSkillR[p]='H144'
set ChSkillT[p]='H145'
set Range[p]=800
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
call UnitAddAbility(u,'H146')
call UnitAddAbility(u,'Amrf')
call UnitRemoveAbility(u,'Amrf')
call SetPlayerAbilityAvailable(Player(p-1),'H146',false)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_ArchQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_ArchW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_ArchE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_ArchR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_ArchT.blp",0)
endif
set STRup[p]=9
set AGIup[p]=3
set INTup[p]=8
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,95)
call SaveReal(udg_Hashtable,p,$43C91172,0.35)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.8)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$9B58470C,175)
call SaveReal(udg_Hashtable,p,$88E0F85F,125)
call SaveReal(udg_Hashtable,p,$E755DDB8,275)
call SaveReal(udg_Hashtable,p,$ABD3E955,75)
call SaveReal(udg_Hashtable,p,$A2229E00,250)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,150)
call SaveReal(udg_Hashtable,p,$C3EA9E83,600)
call SaveReal(udg_Hashtable,p,$A8D71652,300)
call SaveReal(udg_Hashtable,p,$127510D2,2500)
call SaveReal(udg_Hashtable,p,$B491D29B,1000)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,'H146',$5047FE8B,true)
call SaveBoolean(udg_Hashtable,'H146',$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$E6BB3831,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_ArchF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc원초의 별")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function ArchSkill)
call SaveInteger(udg_Hashtable,p,$5EFF7683,14)
call ArchTT(p)
set u=null
set trg=null
endfunction
function ArisTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local integer l__Int=GetHeroInt(u,true)
local real Ad
local real Ad2
local integer Qdmg=(l__Int*(LoadInteger(udg_Hashtable,p,$FAFE5485)*2))+R2I(GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$FAFE5485)*2))
local integer Edmg=R2I((l__Int*(LoadInteger(udg_Hashtable,p,$6074AEF9)*0.5))+(GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$6074AEF9)*0.3)))
local integer Edmg2=LoadInteger(udg_Hashtable,p,$6074AEF9)*10
local integer Rdmg=R2I((l__Int*(LoadInteger(udg_Hashtable,p,$BB70E228)*10))+(GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$BB70E228)*8)))
local integer TLv=LoadInteger(udg_Hashtable,p,$132FA1F5)
local integer Tdmg=TLv*25
local integer tempI
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Qm*Kirie[p])
set Edmg=Edmg+R2I(Em*Kirie[p])
set Rdmg=Rdmg+R2I(Rm*Kirie[p])
endif
if Wm<=0 then
set Wm=0
endif
if LoadInteger(udg_Hashtable,p,$B491D29B)>=1 then
if TLv==1 and not LoadBoolean(udg_Hashtable,p,$116C5CB)then
set tempI=LoadInteger(Hash_Stat,p,$D8C9D96B)
call SaveInteger(Hash_Stat,p,$D8C9D96B,tempI+50)
call SaveBoolean(udg_Hashtable,p,$116C5CB,true)
call TimerStart(udg_PstatTimer[p],0.01,false,null)
elseif TLv==2 and not LoadBoolean(udg_Hashtable,p,$FF3460B0)then
set tempI=LoadInteger(Hash_Stat,p,$D8C9D96B)
call SaveInteger(Hash_Stat,p,$D8C9D96B,tempI+25)
call SaveBoolean(udg_Hashtable,p,$FF3460B0,true)
call TimerStart(udg_PstatTimer[p],0.01,false,null)
elseif TLv==3 and not LoadBoolean(udg_Hashtable,p,$2482CF51)then
set tempI=LoadInteger(Hash_Stat,p,$D8C9D96B)
call SaveInteger(Hash_Stat,p,$D8C9D96B,tempI+25)
call SaveBoolean(udg_Hashtable,p,$2482CF51,true)
call TimerStart(udg_PstatTimer[p],0.01,false,null)
elseif TLv==4 and not LoadBoolean(udg_Hashtable,p,$BB3D8B5F)then
set tempI=LoadInteger(Hash_Stat,p,$D8C9D96B)
call SaveInteger(Hash_Stat,p,$D8C9D96B,tempI+25)
call SaveBoolean(udg_Hashtable,p,$BB3D8B5F,true)
call TimerStart(udg_PstatTimer[p],0.01,false,null)
elseif TLv==5 and not LoadBoolean(udg_Hashtable,p,$9784294F)then
set tempI=LoadInteger(Hash_Stat,p,$D8C9D96B)
call SaveInteger(Hash_Stat,p,$D8C9D96B,tempI+25)
call SaveBoolean(udg_Hashtable,p,$9784294F,true)
call TimerStart(udg_PstatTimer[p],0.01,false,null)
endif
endif
set Ad=GetUnitState(u,ConvertUnitState(0x51))
set Ad=GetUnitState(u,ConvertUnitState(0x14))*(2.0+(Ad*0.2))
if LoadBoolean(udg_Hash,p,$3EC4FAF3)then
set Ad2=4
else
set Ad2=3
endif
if LoadInteger(udg_Hashtable,p,$B491D29B)>=1 then
set Ad2=Ad2+(1.25+(TLv*0.5))
endif
call EXSetAbilityString('H090',1,ABILITY_DATA_UBERTIP,"사용시 아리스가 슈퍼노바의 에너지를 충전을 합니다. \n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00마법 치명타 확률 증가|cffffa500 : 10% \n|cff00ff00마법 치명타 피해량 증가|cffffa500 : 10% \n|cff00ff00기본 공격력 증폭|cffffa500 : 25% \n|cff00ff00지속시간|cffffa500 : 15초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(30*ct[p]))+"초")
if LoadBoolean(udg_Hash,p,$3EC4FAF3)then
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"기본 공격이 충전형 공격으로 변경됩니다. 기본 공격시 충전 상태에 들어가며 충전시간에 비례해서 공격력의 배수를 더한 강력한 피해를 입힐수있습니다. \n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00데미지|cffffa500 : "+I2S(R2I(Ad))+" ~ "+I2S(R2I(Ad*Ad2))+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00최대충전시간|cffffa500 : 3초\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00특수1|cffffa500 : 공격 간격 감소에 영향을 받을수없지만 공격속도의 제한선이 없으며 공격속도 1%당 피해량이 0.2% 증가합니다.\n|cff00ff00특수2|cffffa500 : 범위 증가에 영향은 받지만 범위 증가 피해등의 영향은 받지못한다.\n|cffFF0000EX : 최대 차징 시간이 1초 상승하고 최대 차징시 피해량이 25% 상승한다.")
else
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"기본 공격이 충전형 공격으로 변경됩니다. 기본 공격시 충전 상태에 들어가며 충전시간에 비례해서 공격력의 배수를 더한 강력한 피해를 입힐수있습니다. \n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00데미지|cffffa500 : "+I2S(R2I(Ad))+" ~ "+I2S(R2I(Ad*Ad2))+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00최대충전시간|cffffa500 : 2초\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00특수1|cffffa500 : 공격 간격 감소에 영향을 받을수없지만 공격속도의 제한선이 없으며 공격속도 1%당 피해량이 0.2% 증가합니다.\n|cff00ff00특수2|cffffa500 : 범위 증가에 영향은 받지만 범위 증가 피해등의 영향은 받지못한다.")
endif
call EXSetAbilityString('H091',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용시 충전 상태에 들어갑니다. 재사용시 충전량에 비례해 강력한 레이저포를 발사해서 공격합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용 / 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+" ~ "+I2S(Qdmg*2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00사거리|cffffa500 : 2000\n|cff00ff00범위|cffffa500 : "+I2S(R2I(350*Skrange[p]))+"\n|cff00ff00특수|cffffa500 : 데미지는 2초에 최대치에 도달하며 최대 8초간 충전이 가능합니다. 충전시간이 초과할경우 스킬의 효과는 취소됩니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(15*ct[p]))+"초")
if LoadBoolean(udg_Hashtable,p,$116C5CB)then
call EXSetAbilityString('H092',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n스킬 사용 지점으로 재빠르게 슬라이딩 해서 이동합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00사거리|cffffa500 : 1200\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I((9-LoadInteger(udg_Hashtable,p,$457BCFC0))*ct[p]))+"초")
else
call EXSetAbilityString('H092',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n스킬 사용 지점으로 재빠르게 슬라이딩 해서 이동합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00사거리|cffffa500 : 600\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I((9-LoadInteger(udg_Hashtable,p,$457BCFC0))*ct[p]))+"초")
endif
if LoadBoolean(udg_Hash,p,$3EC4FAF3)then
call EXSetAbilityString('H093',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n사용시 미사일을 주변 적들에게 발사해 미사일을 적중한 적 주변에 피해를 줍니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00미사일 갯수|cffffa500 : 12개\n|cff00ff00미사일 인식범위|cffffa500 : "+I2S(R2I(GetUnitState(u,ConvertUnitState(0x16))+300))+"\n|cff00ff00피해 범위|cffffa500 : "+I2S(R2I(350*Skrange[p]))+"\n|cff00ff00특수|cffffa500 : 기본 공격 도중에도 사용이 가능합니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(15*ct[p]))+"초\n|cffFF0000EX : |cffffa500미사일 갯수가 12개로 상승한다.")
else
call EXSetAbilityString('H093',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n사용시 미사일을 주변 적들에게 발사해 미사일을 적중한 적 주변에 피해를 줍니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : 개당 "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00미사일 갯수|cffffa500 : 8개\n|cff00ff00미사일 인식범위|cffffa500 : "+I2S(R2I(GetUnitState(u,ConvertUnitState(0x16))+300))+"\n|cff00ff00피해 범위|cffffa500 : "+I2S(R2I(350*Skrange[p]))+"\n|cff00ff00특수|cffffa500 : 기본 공격 도중에도 사용이 가능합니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(15*ct[p]))+"초")
endif
call EXSetAbilityString('H094',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n사용지점으로 강화탄환을 던져 적과 부딫치거나 최대사거리에 도달할경우 탄환이 폭발해 피해를 입힙니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00범위|cffffa500 : "+I2S(R2I(800*Skrange[p]))+"\n|cff00ff00적중 범위|cffffa500 : 250\n|cff00ff00특수|cffffa500 : 부딫친 적 이외의 적에게는 70%의 피해만 입힌다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(25*ct[p]))+"초")
call EXSetAbilityString('H095',1,ABILITY_DATA_UBERTIP,"습득시 아리스의 기본 스탯이 상승합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00일반 공격력 증폭|cffffa500 : "+I2S(25+Tdmg)+"%\n|cff00ff00빛의 검 - 슈퍼노바|cffffa500 : 최대 차징 배율 "+R2S(1.25+(TLv*0.5))+" 증가\n|cff00ff00슬라이딩 입니다!|cffffa500 : 대쉬거리 50% 증가")
set u=null
endfunction
function ArisEX takes integer p returns nothing
call SaveBoolean(udg_Hash,p,$3EC4FAF3,true)
call ArisTT(p)
endfunction
function ArisQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=Charcter[p]
local integer Qstage=LoadInteger(udg_Hash,GetHandleId(u),$6CDAD396)
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$48B9A90B)
call SaveInteger(udg_Hash,GetHandleId(u),$6CDAD396,Qstage+1)
if Qstage>=160 then
call SetPlayerAbilityAvailable(Player(p-1),'H091',true)
call UnitRemoveAbility(u,'H096')
call SaveInteger(udg_Hash,GetHandleId(u),$6CDAD396,0)
call DestroyEffect(ef)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call TimerStart(t,0.05,false,function ArisQ)
endif
set t=null
set u=null
set ef=null
endfunction
function ArisQQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=Charcter[p]
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer tempI
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real dmg=LoadReal(udg_Hash,GetHandleId(t),$6730A85A)
local real tempX
local real tempY
local unit dummy
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,0.01,false,function ArisQQ)
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_Q.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_Q_Damage.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_OrbitalRay.mdl",0,tempX,tempY,4.5*Skrange[p],angle,1,90,0,50)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle+30)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle+30)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_OrbitalRay.mdl",0,tempX,tempY,4.5*Skrange[p],angle,1,90,0,50)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle-30)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle-30)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_OrbitalRay.mdl",0,tempX,tempY,4.5*Skrange[p],angle,1,90,0,50)
call SetUnitAnimationByIndex(u,11)
set tempI=LoadInteger(udg_Hash,GetHandleId(u),$6CDAD396)
call SaveInteger(udg_Hash,GetHandleId(u),$6CDAD396,160)
if tempI>=40 then
set tempI=40
endif
set dmg=(((GetHeroInt(u,true)*(LoadInteger(udg_Hashtable,p,$FAFE5485)*2)))+(GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$FAFE5485)*2)))*(1+(tempI*0.025))
call SaveReal(udg_Hash,GetHandleId(t),$6730A85A,dmg)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Ryoul ShootGB1.mdl",0,tempX,tempY,1,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Z048.mdl",0,tempX,tempY,1,angle-180,1,0,0,0)
set tempX=GetUnitX(u)-(((200)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)-(((200)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.16,0.01)
call EFsettingXY(p,"war3mapImported\\@EF_Dustwind Smoke.mdl",0,tempX,tempY,1,angle,1,0,0,0)
endif
if stage>=1 then
set tempI=0
loop
exitwhen tempI>=15
set tempI=tempI+1
set tempX=GetUnitX(u)+(((200*tempI)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((200*tempI)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle+50)
call EFsettingU(p,"war3mapImported\\EF_AZ_Slash Splash Sky.mdl",0,dummy,"origin")
call UnitApplyTimedLife(dummy,'BHwe',1)
call SetUnitScale(dummy,2,1,1)
call SetUnitVertexColor(dummy,0,0,0,255)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle-50)
call EFsettingU(p,"war3mapImported\\EF_AZ_Slash Splash Sky.mdl",0,dummy,"origin")
call UnitApplyTimedLife(dummy,'BHwe',1)
call SetUnitScale(dummy,2,1,1)
call SetUnitVertexColor(dummy,0,0,0,255)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,300*Skrange[p],null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckPlayerGroup(dummy)and not IsUnitInGroup(dummy,MultyGroup[p])then
call Damage(u,dummy,dmg,2,0,false,1,'H091')
call GroupAddUnit(MultyGroup[p],dummy)
endif
endloop
endloop
call RemoveShacull(p)
call GroupClear(MultyGroup[p])
call DestroyGroup(MultyGroup[p])
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set dummy=null
endfunction
function ArisW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local unit dummy
local real distance=LoadReal(udg_Hash,GetHandleId(t),$47527379)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX
local real tempY
local real tempR
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_W.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call SetUnitAnimationByIndex(u,20)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
set tempR=(9-LoadInteger(udg_Hashtable,p,$457BCFC0))
if tempR<=0 then
set tempR=0
endif
call CTset(u,p,'H092',tempR)
endif
if distance>=1 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call imagedummySET(p,dummy,Model[p])
call UnitRemove(dummy,0.12)
call invisible(dummy,30.00,100.00,0.12,0.01)
call SetUnitAnimationByIndex(dummy,20)
set tempX=GetUnitX(u)+(((50)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((50)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
call EFsettingXY(p,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",0,tempX,tempY,1,270,1,0,0,0)
call SaveReal(udg_Hash,GetHandleId(t),$47527379,distance-50)
call TimerStart(t,0.02,false,function ArisW)
else
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set dummy=null
endfunction
function ArisE takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local unit dummy
local unit tar
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer endstage=LoadInteger(udg_Hash,GetHandleId(t),$E19F6177)
local real tempX=0
local real tempY=0
local real tempR=0
local integer tempI=0
local integer tempI2=0
local integer tempI3=0
local integer tempI4=LoadInteger(udg_Hash,GetHandleId(t),$7275CFB1)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,0.02,false,function ArisE)
if stage==1 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set tempR=GetUnitState(u,ConvertUnitState(0x16))+300
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,tempR,null)
loop
set tar=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),tar)
exitwhen tar==null
if CheckPlayerGroup(tar)then
set tempI4=tempI4+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI4,tar)
endif
endloop
if tempI4>=1 then
call SaveInteger(udg_Hash,GetHandleId(t),$7275CFB1,tempI4)
else
set tempI=0
loop
exitwhen tempI>=endstage
set tempI=tempI+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08+tempI)
call KillUnit(dummy)
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
if stage<=endstage then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08+stage)
set tar=null
set tempI3=0
if tempI4 !=0 then
loop
exitwhen tar !=null
set tempI3=tempI3+1
if tempI3>tempI4 then
set tempI3=0
endif
if GetRandomInt(1,tempI4)==1 then
set tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI3)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
endif
endloop
call KnockBackXYef(dummy,GetUnitX(tar),GetUnitY(tar),0.2,0.01)
call SetUnitFlyHeight(dummy,0,(GetUnitFlyHeight(dummy)*5))
call EXSetUnitFacing(dummy,s__Angle_PBP(GetUnitX(dummy),GetUnitY(dummy),GetUnitX(tar),GetUnitY(tar)))
call SetUnitFacing(dummy,s__Angle_PBP(GetUnitX(dummy),GetUnitY(dummy),GetUnitX(tar),GetUnitY(tar)))
call SetUnitAnimationByIndex(dummy,45)
endif
endif
if stage>=11 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08+(stage-10))
if dummy !=null then
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_E_BOMB.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90,dummy)
call EFsettingXY(p,"war3mapImported\\@EF_34.mdl",0,tempX,tempY,1.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_WindCirclefaster.mdl",0,tempX,tempY,1.3*Skrange[p],GetRandomReal(0,360),1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_R4.mdl",0,tempX,tempY,2*Skrange[p],270,1,0,0,0)
set tempR=(((GetHeroInt(u,true)*(LoadInteger(udg_Hashtable,p,$6074AEF9)*0.5)))+(GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$6074AEF9)*0.3)))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,350*Skrange[p],null)
loop
set tar=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),tar)
exitwhen tar==null
if CheckPlayerGroup(tar)then
call Damage(u,tar,tempR,2,0,false,1,'H093')
endif
endloop
call RemoveUnit(dummy)
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
call s__party_deallocate((g))
set t=null
set u=null
set dummy=null
set tar=null
endfunction
function ArisR takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit c
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local real dmg
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_R.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage==5 then
call SetUnitAnimationByIndex(u,4)
call SetUnitTimeScale(u,3.0)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
call EFsettingU(p,"war3mapImported\\@EF_AZ_Sniper(2)_T_Misslie.mdl",0.2,dummy,"origin")
call EFsettingU(p,"Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",0.2,dummy,"origin")
call SetUnitScale(dummy,3,1,1)
call EFsettingU(p,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",0,u,"origin")
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Z047.mdl",0,tempX,tempY,1,angle-180,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_DustWindFasterExact.mdl",0,tempX,tempY,1,angle,1,0,0,0)
set tempX=GetUnitX(u)-(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)-(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Dustwind Smoke.mdl",0,tempX,tempY,1,angle,1,0,0,0)
call KnockBackXY(u,tempX,tempY,0.06,0.01)
endif
if stage==8 then
call SetUnitTimeScale(u,1.0)
endif
if stage>=5 then
set tempX=GetUnitX(dummy)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),250,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,c)
endif
endloop
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
if LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)==null and stage==15 then
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,16)
set stage=16
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_R_Damage.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,dummy)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
set dmg=(((GetHeroInt(u,true)*(LoadInteger(udg_Hashtable,p,$BB70E228)*10)))+(GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$BB70E228)*8)))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,800*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,0,false,0.7,'H094')
endif
endloop
call RemoveUnit(dummy)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_Q5.mdl",0,tempX,tempY,1.5*Skrange[p],270,2,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_Q5.mdl",0,tempX,tempY,1*Skrange[p],270,2,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_Q5.mdl",0,tempX,tempY,0.5*Skrange[p],270,2,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_1 (220).mdl",0,tempX,tempY,2.5*Skrange[p],270,2,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_34.mdl",0,tempX,tempY,5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_WarStompCaster.mdl",0,tempX,tempY,4*Skrange[p],270,1,0,0,0)
elseif LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)!=null then
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,16)
set stage=16
call RemoveUnit(dummy)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_R_Damage.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,dummy)
set dmg=(((GetHeroInt(u,true)*(LoadInteger(udg_Hashtable,p,$BB70E228)*10)))+(GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$BB70E228)*8)))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,800*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if c==dummy then
call Damage(u,c,dmg,2,0,false,1,'H094')
else
call Damage(u,c,dmg,2,0,false,0.7,'H094')
endif
endif
endloop
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_Q5.mdl",0,tempX,tempY,1.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_Q5.mdl",0,tempX,tempY,1*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_Q5.mdl",0,tempX,tempY,0.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_1 (220).mdl",0,tempX,tempY,2.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_34.mdl",0,tempX,tempY,5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_WarStompCaster.mdl",0,tempX,tempY,4*Skrange[p],270,1,0,0,0)
endif
endif
if stage>=16 then
call RemoveShacull(p)
call SetUnitTimeScale(u,1.0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call TimerStart(t,0.02,false,function ArisR)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set dummy=null
endfunction
function ArisSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local real tempR
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local integer tempI
local integer tempI2
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local unit c
local integer g=s__party_create()
local real Mana
local effect ef
if sk=='H090' then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_D_EF.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_D3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call StatChangeX(p,0.1,"마치피",15,"H0902")
call StatChangeX(p,10,"마치확",15,"H0903")
call StatChangeX(p,25,"일공증",15,"H0901")
call BuffCall(u,'B011',15,false,false)
call TimerStart(udg_infoRe[p],0.01,false,null)
call EFsettingXY(p,"war3mapImported\\@EF_t6_26b.mdl",0,tempX,tempY,1,270,1,0,0,0)
call DestroyTimer(t)
endif
if sk=='H091' then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_Q_Charge.mp3"),(null),(127),((1.00)*1.0),false,0,0)
if GetLocalPlayer()==Player(p-1)then
call StartSound(udg_SND)
endif
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
set ef=EFsettingUcustom(p,"war3mapImported\\@EF_AZ_Nevermore_R1_Gather (2).mdl",u,"chest")
call SaveEffectHandle(udg_Hash,GetHandleId(t),$48B9A90B,ef)
call SaveInteger(udg_Hash,GetHandleId(u),$6CDAD396,0)
call SetPlayerAbilityAvailable(Player(p-1),'H091',false)
call UnitAddAbility(u,'H096')
call TimerStart(t,0.01,false,function ArisQ)
endif
if sk=='H096' then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_Q_Charge.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StopSound(udg_SND,false,false)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call Shacull(p)
set MultyGroup[p]=CreateGroup()
call TimerStart(t,0.01,false,function ArisQQ)
endif
if sk=='H092' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
if Mana>=0 then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
endif
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call Shacull(p)
if LoadBoolean(udg_Hashtable,p,$116C5CB)then
set tempX=900
else
set tempX=600
endif
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=tempX then
set tempY=(GetUnitY(u)+(((tempX)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
set tempX=(GetUnitX(u)+(((tempX)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
set tempR=s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
call SaveReal(udg_Hash,GetHandleId(t),$47527379,tempR)
call TimerStart(t,0.01,false,function ArisW)
endif
if sk=='H093' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call EFsettingXY(p,"war3mapImported\\@EF_WindCirclefaster.mdl",0,GetUnitX(u),GetUnitY(u),1.3,270,1,0,0,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_E_Launch.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
if LoadBoolean(udg_Hash,p,$3EC4FAF3)then
set tempI=0
set tempI2=12
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call SaveInteger(udg_Hash,GetHandleId(t),$E19F6177,12)
else
set tempI=0
set tempI2=8
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call SaveInteger(udg_Hash,GetHandleId(t),$E19F6177,8)
endif
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
loop
exitwhen tempI>=tempI2
set tempI=tempI+1
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,GetUnitFacing(u))
call SetUnitScale(c,2,1,1)
call EFsettingU(p,"war3mapImported\\@EF_TinkerRocketMissile2.mdx",0.48+(tempI*0.02),c,"origin")
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08+tempI,c)
set tempR=GetRandomReal(150,450)
set Mana=GetRandomReal(0,45)
set SkillLocX=GetUnitX(u)+(((tempR)*1.0)*Cos((((GetUnitFacing(u)*(tempI*Mana)))*1.0)*bj_DEGTORAD))
set SkillLocY=GetUnitY(u)+(((tempR)*1.0)*Sin((((GetUnitFacing(u)*(tempI*Mana)))*1.0)*bj_DEGTORAD))
call SetUnitAnimationByIndex(c,270)
set tempR=GetRandomReal(400,650)
call SetUnitFlyHeight(c,tempR,(tempR*3.5))
call KnockBackXYef(c,SkillLocX,SkillLocY,0.3,0.01)
call UnitApplyTimedLife(c,'BHwe',3.0)
endloop
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call TimerStart(t,0.3,false,function ArisE)
endif
if sk=='H094' then
set Mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1200 then
set SkillLocX=(GetUnitY(u)+(((tempX)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set SkillLocY=(GetUnitX(u)+(((tempY)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
endif
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call SaveReal(udg_Hash,GetHandleId(t),$DA25243A,SkillLocX)
call SaveReal(udg_Hash,GetHandleId(t),$8BEF6842,SkillLocY)
call Shacull(p)
call TimerStart(t,0.01,false,function ArisR)
endif
call s__party_deallocate((g))
set u=null
set t=null
set c=null
set ef=null
endfunction
function ArisDEBUG takes nothing returns nothing
local integer p=GetPlayerId(GetTriggerPlayer())+1
local unit u=Charcter[p]
if GetUnitAbilityLevel(u,'Abun')==1 and GetUnitCurrentOrder(u)!=String2OrderIdBJ("autoharvestlumber")then
call UnitRemoveAbility(u,'Abun')
call UnitRemoveAbility(u,'H099')
endif
set u=null
endfunction
function ArisST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
local timer t=CreateTimer()
set ChSkillD[p]='H090'
set ChSkillQ[p]='H091'
set ChSkillW[p]='H092'
set ChSkillE[p]='H093'
set ChSkillR[p]='H094'
set ChSkillT[p]='H095'
set Range[p]=1200
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_ArisQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_ArisW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_ArisE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_ArisR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNus04.blp",0)
endif
set STRup[p]=9
set AGIup[p]=3
set INTup[p]=8
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,70)
call SaveReal(udg_Hashtable,p,$43C91172,0.35)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.8)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$9B58470C,150)
call SaveReal(udg_Hashtable,p,$88E0F85F,100)
call SaveReal(udg_Hashtable,p,$E755DDB8,160)
call SaveReal(udg_Hashtable,p,$ABD3E955,-40)
call SaveReal(udg_Hashtable,p,$A2229E00,180)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,80)
call SaveReal(udg_Hashtable,p,$C3EA9E83,550)
call SaveReal(udg_Hashtable,p,$A8D71652,300)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,CharacterColor[p+5],$E6BB3831,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_ArisF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc빛의 검 - 슈퍼노바")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function ArisSkill)
set trg=CreateTrigger()
call TriggerRegisterPlayerChatEvent(trg,Player(p-1),"-디버깅",true)
call TriggerAddAction(trg,function ArisDEBUG)
call SaveInteger(udg_Hashtable,p,$5EFF7683,9)
call ArisTT(p)
set u=null
set trg=null
set t=null
endfunction
function AyaTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer Agi=GetHeroAgi(u,true)
local integer Qdmg=Agi*(2+LoadInteger(udg_Hashtable,p,$FAFE5485)*2)
local integer Wdmg=Agi*(3+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6))
local integer Wdmg2=Agi*(4+(LoadInteger(udg_Hashtable,p,$457BCFC0)*8))
local integer Edmg=Agi*(5+LoadInteger(udg_Hashtable,p,$6074AEF9)*6)
local integer Rdmg=Agi*(1+(LoadInteger(udg_Hashtable,p,$BB70E228)*1))
local integer Tdmg=Agi*(5+(LoadInteger(udg_Hashtable,p,$132FA1F5)*3))
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Qm*Kirie[p])
set Wdmg=Wdmg+R2I(Wm*Kirie[p])
set Wdmg2=Wdmg2+R2I(Wm*Kirie[p])
set Edmg=Edmg+R2I(Em*Kirie[p])
set Rdmg=Rdmg+R2I(Rm*Kirie[p])
set Tdmg=Tdmg+R2I(Tm*Kirie[p])
endif
if LoadBoolean(udg_Hash,p,$5AA04831)then
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"아야는 상시 이동 속도의 일부 만큼 바람 속성 증폭량이 증가합니다.\n\n일부 스킬은 회오리를 생성하며, 회오리는 지속 시간이 다 될 경우 소멸합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00추가 바람 속성 증폭량|cffffa500 : "+I2S(R2I(GetUnitMoveSpeed(u)*0.04))+"%\n|cff00ff00회오리 지속시간|cffffa500 : 10초\n|cffFF0000EX|cffffa500 : 이동속도 비례 증폭량이 4%로 상승합니다.")
else
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"아야는 상시 이동 속도의 3% 만큼 바람 속성 증폭량이 증가합니다.\n\n일부 스킬은 회오리를 생성하며, 회오리는 지속 시간이 다 될 경우 소멸합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00추가 바람 속성 증폭량|cff32cd32 : "+I2S(R2I(GetUnitMoveSpeed(u)*0.03))+"%\n|cff00ff00회오리 지속시간|cffffa500 : 10초")
endif
call EXSetAbilityString('H070',1,ABILITY_DATA_UBERTIP,"아야가 바람을 부려 이동 속도가 증가하고, 2초 마다 자신의 위치에 회오리를 생성합니다.\n\n시전 도중 다른 행동을 방해하지 않습니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00효과|cffffa500 : 지속시간 동안 이동 속도 30% 증가\n|cff00ff00회오리 생성 간격|cffffa500 : 2초\n|cff00ff00지속시간|cffffa500 : 10초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(30*ct[p]))+"초")
if LoadBoolean(udg_Hash,p,$5AA04831)then
call EXSetAbilityString(ChSkillQ[p],GetUnitAbilityLevel(u,ChSkillQ[p]),ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n아야가 고정된 거리만큼 빠르게 돌진하며 맞은 적들에게 피해를 줍니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff32cd32바람속성 |cffFF9100물리\n|cff00ff00돌진거리|cffffa500 : 1000\n|cff00ff00범위|cffffa500 : "+I2S(R2I(450*Skrange[p]))+"\n|cff00ff00효과|cffffa500 : 시작 지점에 회오리 1개 설치\n|cff00ff00특수|cffffa500 : 사용 시 1 스택 필요, 최대 5스택\n|cff00ff00스택 쿨타임|cffffa500 : "+I2S(R2I(8*ct[p]))+"초\n|cffFF0000EX|cffffa500 : 최대 스택이 5로 증가한다.")
else
call EXSetAbilityString(ChSkillQ[p],GetUnitAbilityLevel(u,ChSkillQ[p]),ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n아야가 고정된 거리만큼 빠르게 돌진하며 맞은 적들에게 피해를 줍니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff32cd32바람속성 |cffFF9100물리\n|cff00ff00돌진거리|cffffa500 : 1000\n|cff00ff00범위|cffffa500 : "+I2S(R2I(450*Skrange[p]))+"\n|cff00ff00효과|cffffa500 : 시작 지점에 회오리 1개 설치\n|cff00ff00특수|cffffa500 : 사용 시 1 스택 필요, 최대 3스택\n|cff00ff00스택 쿨타임|cffffa500 : "+I2S(R2I(8*ct[p]))+"초")
endif
if LoadBoolean(udg_Hash,p,$5AA04831)then
call EXSetAbilityString('H076',GetUnitAbilityLevel(u,ChSkillQ[p]),ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n아야가 고정된 거리만큼 빠르게 돌진하며 맞은 적들에게 피해를 줍니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff32cd32바람속성 |cffFF9100물리\n|cff00ff00돌진거리|cffffa500 : 1600\n|cff00ff00범위|cffffa500 : "+I2S(R2I(450*Skrange[p]))+"\n|cff00ff00효과|cffffa500 : 시작 지점에 회오리 1개 설치\n|cff00ff00특수|cffffa500 : 사용 시 1 스택 필요, 최대 5스택\n|cff00ff00스택 쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초\n|cffFF0000EX|cffffa500 : 최대 스택이 5로 증가한다.")
else
call EXSetAbilityString('H076',GetUnitAbilityLevel(u,ChSkillQ[p]),ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n아야가 고정된 거리만큼 빠르게 돌진하며 맞은 적들에게 피해를 줍니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff32cd32바람속성 |cffFF9100물리\n|cff00ff00돌진거리|cffffa500 : 1600\n|cff00ff00범위|cffffa500 : "+I2S(R2I(450*Skrange[p]))+"\n|cff00ff00효과|cffffa500 : 시작 지점에 회오리 1개 설치\n|cff00ff00특수|cffffa500 : 사용 시 1 스택 필요, 최대 3스택\n|cff00ff00스택 쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초")
endif
if LoadBoolean(udg_Hash,p,$5AA04831)then
call EXSetAbilityString(ChSkillW[p],GetUnitAbilityLevel(u,ChSkillW[p]),ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n아야가 회오리 5개를 사출합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cff32cd32바람속성 |cffFF9100물리\n|cff00ff00사정거리|cffffa500 : 2000\n|cff00ff00회오리 범위|cffffa500 : "+I2S(R2I(300*Skrange[p]))+"\n|cff00ff00효과 1|cffffa500 : 도착 지점에 회오리 1개 설치\n|cff00ff00효과 2|cffffa500 : 시전 시 Q 스킬 스택 최대치로 충전\n|cff00ff00특수|cffffa500 : 같은 대상에게 중복 명중 시 피해량 10%로 감소\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(16*ct[p]))+"초\n|cffFF0000EX|cffffa500 : 풍부 - 천구도의 개풍이 선부 - 홍엽선풍으로 변경됩니다.")
else
call EXSetAbilityString(ChSkillW[p],GetUnitAbilityLevel(u,ChSkillW[p]),ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n아야가 부채를 휘둘러 회오리를 발사합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff32cd32바람속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 2000\n|cff00ff00회오리 범위|cffffa500 : "+I2S(R2I(300*Skrange[p]))+"\n|cff00ff00효과 1|cffffa500 : 도착 지점에 회오리 1개 설치\n|cff00ff00효과 2|cffffa500 : 시전 시 Q 스킬 스택 + 1\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(8*ct[p]))+"초")
endif
call EXSetAbilityString(ChSkillE[p],GetUnitAbilityLevel(u,ChSkillE[p]),ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n맵 상의 모든 회오리를 자신 근처에 배치한 뒤 사출 시킵니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00회오리 데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff32cd32바람속성 |cffFF9100물리\n|cff00ff00회오리 돌진거리|cffffa500 : 2000\n|cff00ff00회오리 범위|cffffa500 : "+I2S(R2I(300*Skrange[p]))+"\n|cff00ff00특수 1|cffffa500 : 중복해서 피해를 입힐 시 10%의 피해만 입힘\n|cff00ff00특수 2|cffffa500 : 사출 후 회오리 삭제\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(20*ct[p]))+"초")
call EXSetAbilityString(ChSkillR[p],GetUnitAbilityLevel(u,ChSkillR[p]),ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n아야가 큰 회오리를 생성합니다.\n회오리는 3초 동안 주변의 적들을 빨아들이며 지속적으로 피해를 주고 사라집니다.\n\n|cff00ff00타입|cffffa500 : 범위 타겟\n|cff00ff00회오리 0.12초당 데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff32cd32바람속성 |cffFF9100물리 지속\n|cff00ff00사정거리|cffffa500 : 2000\n|cff00ff00범위|cffffa500 : "+I2S(R2I(800*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(30*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H074')+"/"+R2S(800*Skrange[p]))
call EXSetAbilityString(ChSkillT[p],GetUnitAbilityLevel(u,ChSkillT[p]),ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n아야가 모든 회오리를 회수하여 원형으로 전개 후 회오리를 오가며 피해를 줍니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00돌진 데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00마지막 돌진 데미지|cffffa500 : "+I2S(Tdmg)+"|cffffa500 + ( "+I2S(Agi)+" x 소모한 회오리 갯수 )\n|cff00ff00데미지 속성|cffffa500 : |cff32cd32바람속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00돌진 범위|cffffa500 : "+I2S(R2I(300*Skrange[p]))+"\n|cff00ff00마지막 돌진 범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00회오리 갯수|cffffa500 : 이동속도 75 당 회오리 1개 추가 (현재 "+I2S(1+R2I(GetUnitMoveSpeed(u)/75))+"개 + (맵 상의 회오리)\n|cff00ff00효과|cffffa500 : 적 3초 스턴\n|cff00ff00특수|cffffa500 : 시전 중 무적 / 시전 시 모든 회오리 소멸\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(100*ct[p]))+"초")
set u=null
endfunction
function AyaEX takes integer p returns nothing
call SaveBoolean(udg_Hash,p,$5AA04831,true)
call AyaTT(p)
if ProduceLV<4 then
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_AyaEXget.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_AyaEXget_2.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
endif
call SetPlayerName(Player(8),"|cffFF8200샤메이마루 아야 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"성장을.. 보여주겠습니다!")
call SetPlayerAbilityAvailable(Player(p-1),'H072',false)
set ChSkillW[p]='H077'
call UnitAddAbility(Charcter[p],ChSkillW[p])
call SaveReal(udg_Hashtable,p,$E755DDB8,125+(LoadInteger(udg_Hashtable,p,$457BCFC0)*125))
call SaveReal(udg_Hashtable,p,$ABD3E955,125)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_AyaR.blp",0)
endif
endfunction
function AyaTornado_LifeTime takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer tempI=LoadInteger(udg_Hash,GetHandleId(t),1)
local real life=LoadReal(udg_Hash,p,$CAB9A581+tempI)-0.05
local unit u=LoadUnitHandle(udg_Hash,p,$74818D8+tempI)
if life==9.5 then
call SetUnitAnimation(u,"stand")
call SetUnitTimeScale(u,1.0)
endif
if life>0 then
call SaveReal(udg_Hash,p,$CAB9A581+tempI,life)
call TimerStart(t,0.05,false,function AyaTornado_LifeTime)
else
call RemoveUnit(u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
endfunction
function AyaSkillFandQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stack=LoadInteger(udg_Hash,p,$FDB198B1)
local real Aya_Movespeed=GetUnitMoveSpeed(u)*0.03
local real cd=LoadReal(udg_Hash,p,$C94585A9)-0.1
local integer tempI=3
if LoadBoolean(udg_Hash,p,$5AA04831)then
set Aya_Movespeed=GetUnitMoveSpeed(u)*0.04
set tempI=5
endif
call StatChange(p,Aya_Movespeed*0.01,"바뎀증",0.099)
call TimerStart(t,0.1,false,function AyaSkillFandQ)
if cd<=0 then
call SaveReal(udg_Hash,p,$C94585A9,8*ct[p])
if stack<=tempI-1 then
call SaveInteger(udg_Hash,p,$FDB198B1,stack+1)
if GetLocalPlayer()==Player(p-1)then
if stack==0 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack1.blp",0)
endif
if stack==1 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack2.blp",0)
endif
if stack==2 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack3.blp",0)
endif
if stack==3 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack4.blp",0)
endif
if stack==4 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack5.blp",0)
endif
endif
endif
if stack>=0 then
call SetPlayerAbilityAvailable(Player(p-1),'H076',false)
call SetPlayerAbilityAvailable(Player(p-1),'H071',true)
endif
else
if stack<=tempI-1 then
call SaveReal(udg_Hash,p,$C94585A9,cd)
endif
if stack>=tempI then
if cd>0 then
call SaveReal(udg_Hash,p,$C94585A9,8*ct[p])
endif
endif
endif
set t=null
set u=null
endfunction
function WindMake takes integer p,real a,real b returns nothing
local timer t=CreateTimer()
local integer tempI=0
local unit c
loop
exitwhen tempI==50
set tempI=tempI+1
set c=LoadUnitHandle(udg_Hash,p,$74818D8+tempI)
if c==null then
set c=CreateUnit(Player(p-1),'sys7',a,b,270)
call SetUnitUseFood(c,false)
call imagedummySET(p,c,"war3mapImported\\@EF_mr.war3_TornadoND.mdl")
call SetUnitScale(c,0.5*Skrange[p],1,1)
call SetUnitVertexColor(c,255,255,255,50)
call SetUnitAnimationByIndex(c,0)
call SaveUnitHandle(udg_Hash,p,$74818D8+tempI,c)
call SaveInteger(udg_Hash,GetHandleId(t),1,tempI)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveReal(udg_Hash,p,$CAB9A581+tempI,10.0)
call TimerStart(t,0.0,false,function AyaTornado_LifeTime)
exitwhen true
endif
endloop
set t=null
set c=null
endfunction
function WindPushWEX takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit c=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit d
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer Agi=GetHeroAgi(u,true)
local real Wdmg=Agi*(4+(LoadInteger(udg_Hashtable,p,$457BCFC0)*8))
local integer g=s__party_create()
local real tempR=150
local real tempR2=0.02
local integer tempI3=13
local integer Count=LoadInteger(udg_Hash,p,$6314C3C4)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,tempR2,false,function WindPushWEX)
if not IsTerrainPathable(GetUnitX(c)+(((tempR)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(c)+(((tempR)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),PATHING_TYPE_FLYABILITY)and stage<=tempI3 and c !=null then
call SetUnitX(c,GetUnitX(c)+(((tempR)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(c,GetUnitY(c)+(((tempR)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(c),GetUnitY(c),300,null)
loop
set d=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),d)
exitwhen d==null
if CheckPlayerGroup(d)and LoadBoolean(udg_Hash,GetHandleId(t),GetHandleId(d))==false then
call SaveBoolean(udg_Hash,GetHandleId(t),GetHandleId(d),true)
if IsUnitInGroup(d,MultyGroup[p+30])then
call Damage(u,d,Wdmg,1,3,false,0.1,'H077')
else
call Damage(u,d,Wdmg,1,3,false,1,'H077')
call GroupAddUnit(MultyGroup[p+30],d)
endif
endif
endloop
else
call WindMake(p,GetUnitX(c),GetUnitY(c))
call RemoveUnit(c)
set Count=Count+1
call SaveInteger(udg_Hash,p,$6314C3C4,Count)
if Count==5 then
call GroupClear(MultyGroup[p+30])
call DestroyGroup(MultyGroup[p+30])
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set d=null
endfunction
function WindPushE takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit c=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit d
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer Agi=GetHeroAgi(u,true)
local real Edmg=Agi*(5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*6))
local integer g=s__party_create()
local real tempR=200
local real tempR2=0.01
local integer tempI3=10
local integer Count=LoadInteger(udg_Hash,p,$34626AAF)
local integer Count2=LoadInteger(udg_Hash,p,$AA40225A)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if ModuloInteger(stage,2)==0 then
call EFsettingXY(p,"war3mapImported\\@EF_1130.mdl",0,GetUnitX(c),GetUnitY(c),3.0*Skrange[p],angle,1.0,0,0,100)
endif
if not IsTerrainPathable(GetUnitX(c)+(((tempR)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(c)+(((tempR)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),PATHING_TYPE_FLYABILITY)and stage<=tempI3 and c !=null then
call SetUnitX(c,GetUnitX(c)+(((tempR)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(c,GetUnitY(c)+(((tempR)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(c),GetUnitY(c),300,null)
loop
set d=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),d)
exitwhen d==null
if CheckPlayerGroup(d)and LoadBoolean(udg_Hash,GetHandleId(t),GetHandleId(d))==false then
call SaveBoolean(udg_Hash,GetHandleId(t),GetHandleId(d),true)
if IsUnitInGroup(d,MultyGroup[p+40])then
call Damage(u,d,Edmg,1,3,false,0.1,'H073')
else
call Damage(u,d,Edmg,1,3,false,1,'H073')
call GroupAddUnit(MultyGroup[p+40],d)
endif
endif
endloop
call TimerStart(t,tempR2,false,function WindPushE)
else
call RemoveUnit(c)
set Count=Count+1
call SaveInteger(udg_Hash,p,$34626AAF,Count)
if Count==Count2 then
call GroupClear(MultyGroup[p+40])
call DestroyGroup(MultyGroup[p+40])
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set d=null
endfunction
function WindPushT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit d
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer Agi=GetHeroAgi(u,true)
local real Tdmg=Agi*(5+(LoadInteger(udg_Hashtable,p,$132FA1F5)*3))
local integer g=s__party_create()
local real tempR=200
local real tempR2=0.01
local integer tempI3=8
local unit dummy
local unit dummy2
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,tempR2,false,function WindPushT)
if not IsTerrainPathable(GetUnitX(u)+(((tempR)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((tempR)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),PATHING_TYPE_FLYABILITY)and stage<=tempI3 then
call SetUnitX(u,GetUnitX(u)+(((tempR)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(u)+(((tempR)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
call vibration2(Player(p-1),15,0.05)
if stage==0 then
call EFsettingXY(p,"war3mapImported\\@EF_AZ_A_Slash Splash Sky.mdl",0,tempX,tempY,4.0*Skrange[p],angle,1.0,0,0,50)
endif
if ModuloInteger(stage,2)==0 then
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u)+(((-60)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((-60)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),angle)
call SetUnitUseFood(dummy,false)
call imagedummy(p,dummy,0.1,2,"walk",Model[p])
call invisible(dummy,40.00,100.00,0.08,0.01)
endif
if ModuloInteger(stage,3)==0 then
set dummy2=CreateUnit(Player(p-1),'sys7',GetUnitX(u)+(((-100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((-100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),angle)
call SetUnitUseFood(dummy2,false)
call SetUnitScale(dummy2,1.8*Skrange[p],1,1)
call invisible(dummy2,0.00,100.00,0.5,0.5)
call EFsettingU(p,"war3mapImported\\@EF_Hit Wave.mdl",0.5,dummy2,"origin")
call SetUnitFlyHeight(dummy2,150,0)
call SetUnitAnimationByIndex(dummy2,0)
call UnitApplyTimedLife(dummy2,'BHwe',0.55)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),300,null)
loop
set d=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),d)
exitwhen d==null
if CheckPlayerGroup(d)and LoadBoolean(udg_Hash,GetHandleId(t),GetHandleId(d))==false then
call SaveBoolean(udg_Hash,GetHandleId(t),GetHandleId(d),true)
call Damage(u,d,Tdmg,1,3,false,1,'H075')
call Stun(u,d,0.3)
endif
endloop
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set d=null
set dummy=null
set dummy2=null
endfunction
function AyaSkillD takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local integer tempI=5
local real tempR=2.0
if stage<tempI then
call WindMake(p,tempX,tempY)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,tempR,false,function AyaSkillD)
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
endfunction
function AyaSkillQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real angle2
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local real Moving=LoadReal(udg_Hash,GetHandleId(t),$217D9D93)
local real Slow=0.9
local integer tempI
local real tempR
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local integer Agi=GetHeroAgi(u,true)
local real Qdmg=Agi*(2+(LoadInteger(udg_Hashtable,p,$FAFE5485)*2))
local unit c
local unit dummy
local unit dummy2
local integer g=s__party_create()
call TimerStart(t,0.01,false,function AyaSkillQ)
if stage==0 then
call ND(Player(p-1),0.2,10)
set tempI=GetRandomInt(1,3)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaQ_Effect1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,70,u)
if tempI==1 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissileLaunch1.wav"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif tempI==2 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissileLaunch2.wav"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
else
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissileLaunch3.wav"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
endif
call PlaySoundOnUnit(udg_SND,90,u)
set tempI=GetRandomInt(1,100)
if tempI<=50 then
set tempI=GetRandomInt(1,3)
if tempI==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaQ.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif tempI==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaQ2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaQ3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
endif
endif
call PlaySoundOnUnit(udg_SND,100,u)
call SetUnitAnimationByIndex(u,11)
set tempI=LoadInteger(udg_Hash,p,$FDB198B1)-1
call SaveInteger(udg_Hash,p,$FDB198B1,tempI)
if GetLocalPlayer()==Player(p-1)then
if tempI==0 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
endif
if tempI==1 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack1.blp",0)
endif
if tempI==2 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack2.blp",0)
endif
if tempI==3 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack3.blp",0)
endif
if tempI==4 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack4.blp",0)
endif
endif
call EFsettingXY(p,"war3mapImported\\@EF_WindAttack.mdl",0,tempX,tempY,1.5,angle+180,1,0,0,0)
if tempI<=0 then
call SetPlayerAbilityAvailable(Player(p-1),'H076',true)
call SetPlayerAbilityAvailable(Player(p-1),'H071',false)
endif
call WindMake(p,tempX,tempY)
endif
if stage<=7 then
set tempR=Moving
else
set tempR=Moving*Slow
endif
call SaveReal(udg_Hash,GetHandleId(t),$217D9D93,tempR)
if stage<=28 then
if IsPointPathableALL(GetUnitX(u)+(((tempR)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((tempR)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))then
if ModuloInteger(stage,5)==0 and stage<=14 then
set dummy2=CreateUnit(Player(p-1),'sys7',GetUnitX(u),GetUnitY(u),angle)
call SetUnitUseFood(dummy2,false)
call SetUnitScale(dummy2,1.8*Skrange[p],1,1)
call EFsettingU(p,"war3mapImported\\@EF_Hit Wave.mdl",0.5,dummy2,"origin")
call invisible(dummy2,0.00,100.00,0.5,0.5)
call SetUnitFlyHeight(dummy2,150,0)
call SetUnitAnimationByIndex(dummy2,0)
call UnitApplyTimedLife(dummy2,'BHwe',0.55)
endif
call SetUnitX(u,GetUnitX(u)+(((tempR)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(u)+(((tempR)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u)+(((-30)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((-30)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),angle)
call SetUnitUseFood(dummy,false)
call imagedummy(p,dummy,0.26,2,"walk",Model[p])
call invisible(dummy,40.00,100.00,0.24,0.01)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),450*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and LoadBoolean(udg_Hash,GetHandleId(t),GetHandleId(c))==false then
set angle2=s__Angle_PBP(GetUnitX(c),GetUnitY(c),GetUnitX(u),GetUnitY(u))
call Damage(u,c,Qdmg,1,3,false,1,'H071')
call SaveBoolean(udg_Hash,GetHandleId(t),GetHandleId(c),true)
endif
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==18 then
call RemoveShacull(p)
endif
else
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+100)
call RemoveShacull(p)
endif
else
call SetUnitTimeScale(u,1)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set dummy=null
set dummy2=null
endfunction
function AyaSkillW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stack=LoadInteger(udg_Hash,p,$FDB198B1)
local real tempR=110.0
local integer tempI
local integer Agi=GetHeroAgi(u,true)
local real Wdmg=Agi*(3+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6))
local real WdmgEX=R2I((Agi*(3+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6)))*0.1)
local unit c=LoadUnitHandle(udg_Hash,GetHandleId(t),$93E01349)
local real tempX=GetUnitX(c)
local real tempY=GetUnitY(c)
local real cd=LoadReal(udg_Hash,p,$C94585A9)
local unit d
local real angle2
local integer g=s__party_create()
if stage<=17 and not IsTerrainPathable(tempX+(((tempR)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),tempY+(((tempR)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),PATHING_TYPE_FLYABILITY)then
if stage==0 then
call SetUnitAnimationByIndex(u,7-GetRandomInt(1,2))
call EFsettingU(p,"war3mapImported\\@EF_Windwalk.mdx",0.3,u,"right hand")
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Z047.mdl",0,GetUnitX(u)+(((60)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((60)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),1.5,angle,1,0,0,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaW_Effect1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,85,u)
set tempI=GetRandomInt(1,3)
if tempI==1 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\FireBallMissile\\FireBallMissileLaunch1.wav"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif tempI==2 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\FireBallMissile\\FireBallMissileLaunch2.wav"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
else
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\FireBallMissile\\FireBallMissileLaunch3.wav"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
endif
call PlaySoundOnUnit(udg_SND,100,u)
set tempI=GetRandomInt(1,2)
if tempI==1 then
set tempI=GetRandomInt(1,2)
if tempI==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaW1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaW2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
endif
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stack<=2 then
call SaveInteger(udg_Hash,p,$FDB198B1,stack+1)
if stack==2 then
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack3.blp",0)
endif
endif
if stack==1 then
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack2.blp",0)
endif
endif
if stack==0 then
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack1.blp",0)
endif
endif
endif
if stack>=0 then
call SetPlayerAbilityAvailable(Player(p-1),'H076',false)
call SetPlayerAbilityAvailable(Player(p-1),'H071',true)
endif
endif
call SetUnitX(c,GetUnitX(c)+(((tempR)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(c,GetUnitY(c)+(((tempR)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(c),GetUnitY(c),300*Skrange[p],null)
loop
set d=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),d)
exitwhen d==null
if CheckPlayerGroup(d)and LoadBoolean(udg_Hash,GetHandleId(t),GetHandleId(d))==false then
set angle2=s__Angle_PBP(GetUnitX(d),GetUnitY(d),GetUnitX(c),GetUnitY(c))
call Damage(u,d,Wdmg,1,3,false,1,'H072')
call SaveBoolean(udg_Hash,GetHandleId(t),GetHandleId(d),true)
endif
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,0.02,false,function AyaSkillW)
else
call WindMake(p,tempX,tempY)
call RemoveUnit(c)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set d=null
endfunction
function AyaSkillWEX takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer tempI
local integer tempI2
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stack=LoadInteger(udg_Hash,p,$FDB198B1)
local unit c
local unit dummy
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempX2
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local real tempY2
local integer g=s__party_create()
if stage<=5 then
if stage==1 then
if stack<=4 then
call SaveInteger(udg_Hash,p,$FDB198B1,5)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack5.blp",0)
endif
endif
if stack>=0 then
call SetPlayerAbilityAvailable(Player(p-1),'H076',false)
call SetPlayerAbilityAvailable(Player(p-1),'H071',true)
endif
endif
set c=CreateUnit(Player(p-1),'sys7',GetUnitX(u)+(((100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((100)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),270)
call imagedummySET(p,c,"war3mapImported\\@EF_mr.war3_TornadoND.mdl")
call SetUnitScale(c,0.5*Skrange[p],1,1)
call SetUnitVertexColor(c,255,255,255,50)
set tempX2=tempX+(((GetRandomInt(-300,300))*1.0)*Cos(((tempR+GetRandomInt(-45,45))*1.0)*bj_DEGTORAD))
set tempY2=tempY+(((GetRandomInt(-300,300))*1.0)*Sin(((tempR+GetRandomInt(-45,45))*1.0)*bj_DEGTORAD))
set tempR=s__Angle_PBP(GetUnitX(c),GetUnitY(c),tempX2,tempY2)
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,0)
call SaveReal(udg_Hash,GetHandleId(t2),$9966AD24,tempR)
call SaveReal(udg_Hash,GetHandleId(t2),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t2),$8BEF6842,tempY)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$535B7E08,c)
call SaveInteger(udg_Hash,GetHandleId(t2),$A59BB4C6,p)
set tempI2=LoadInteger(udg_Hash,GetHandleId(t),$6314C3C4)+1
call SaveInteger(udg_Hash,GetHandleId(t),$6314C3C4,tempI2)
call SaveInteger(udg_Hash,GetHandleId(t2),$6314C3C4,tempI2)
call TimerStart(t2,0.0,false,function WindPushWEX)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
set dummy=CreateUnit(Player(p-1),'sys7',GetUnitX(u)+(((GetRandomInt(50,100))*1.0)*Cos((((GetRandomReal(0.0,360.0)))*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((GetRandomInt(50,100))*1.0)*Sin((((GetRandomReal(0.0,360.0)))*1.0)*bj_DEGTORAD)),tempR)
call SetUnitTimeScale(dummy,0.5)
call imagedummy(p,dummy,0.8,2.0,"attack",Model[p])
call EFsettingU(p,"war3mapImported\\@EF_Windwalk.mdx",0.3,dummy,"right hand")
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Z048.mdl",0,GetUnitX(dummy)+(((60)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(dummy)+(((60)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),1.5,tempR,1,0,0,0)
call invisible(dummy,0.0,100.00,0.78,0.01)
call TimerStart(t,0.15,false,function AyaSkillWEX)
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set t2=null
set u=null
set c=null
set dummy=null
call s__party_deallocate((g))
endfunction
function AyaSkillE takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local unit c
local unit d
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local real tempX2
local real tempY2
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempR
local integer tempI
local integer tempI2
local integer Count=LoadInteger(udg_Hash,p,$34626AAF)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call Shacull(p)
call SetUnitAnimationByIndex(u,2)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaE_new1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaE_new1_effect1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaE_Effect1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call EXSetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY))
call SetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY))
call EFsettingU(p,"Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl",0.17,u,"overhead")
call EFsettingXY(p,"war3mapImported\\@EF_mh-chun-xztx-white.mdl",0,GetUnitX(u),GetUnitY(u),2.0,0,1.0,0,0,0)
call ND(Player(p-1),30,0.15)
set tempI=0
set tempI2=0
loop
exitwhen tempI==50
set tempI=tempI+1
set c=LoadUnitHandle(udg_Hash,p,$74818D8+tempI)
if c !=null then
set tempI2=tempI2+1
call EFsettingXY(p,"war3mapImported\\@EF_Black Blink.mdl",0,GetUnitX(c),GetUnitY(c),3.0,(1),1,0,0,0)
call SetUnitX(c,GetUnitX(u)+(((GetRandomInt(400,800))*1.0)*Cos(((GetUnitFacing(u)+GetRandomInt(105,255))*1.0)*bj_DEGTORAD)))
call SetUnitY(c,GetUnitY(u)+(((GetRandomInt(400,800))*1.0)*Sin(((GetUnitFacing(u)+GetRandomInt(105,255))*1.0)*bj_DEGTORAD)))
set tempX2=GetUnitX(c)
set tempY2=GetUnitY(c)
call SaveReal(udg_Hash,p,$CAB9A581+tempI,0.0)
set d=CreateUnit(Player(p-1),'sys7',tempX2,tempY2,270)
call imagedummySET(p,d,"war3mapImported\\@EF_mr.war3_TornadoND.mdl")
call EFsettingXY(p,"war3mapImported\\@EF_WindCirclefaster.mdl",0,GetUnitX(d),GetUnitY(d),1.0,(1),1,0,0,0)
call SetUnitScale(d,0.5*Skrange[p],1,1)
call SetUnitVertexColor(d,255,255,255,50)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$34626AAF+tempI2,d)
endif
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$D76660F6,tempI2)
call SaveInteger(udg_Hash,p,$AA40225A,tempI2)
call TimerStart(t,0.35,false,function AyaSkillE)
endif
if stage>=1 then
set tempI=LoadInteger(udg_Hash,GetHandleId(t),$D76660F6)
if stage<=tempI then
if stage==1 then
call SetUnitAnimationByIndex(u,9)
endif
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$34626AAF+stage)
set t2=CreateTimer()
set tempX=tempX+(((GetRandomInt(-300,300))*1.0)*Cos((((GetRandomReal(0.0,360.0)))*1.0)*bj_DEGTORAD))
set tempY=tempY+(((GetRandomInt(-300,300))*1.0)*Sin((((GetRandomReal(0.0,360.0)))*1.0)*bj_DEGTORAD))
set tempR=s__Angle_PBP(GetUnitX(c),GetUnitY(c),tempX,tempY)
call SaveReal(udg_Hash,GetHandleId(t2),$9966AD24,tempR)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$535B7E08,c)
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
call SaveInteger(udg_Hash,GetHandleId(t2),$A59BB4C6,p)
call TimerStart(t2,0.0,false,function WindPushE)
call EFsettingXY(p,"war3mapImported\\@EF_Dustwind Smoke.mdl",0,GetUnitX(c)+(((-100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(c)+(((-100)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),1.0,tempR,1.0,0,0,0)
if LoadInteger(udg_Hash,GetHandleId(u),$A5EE90E4)==0 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\FireBallMissile\\FireBallMissileLaunch1.wav"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$A5EE90E4,1)
elseif LoadInteger(udg_Hash,GetHandleId(u),$A5EE90E4)==1 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\FireBallMissile\\FireBallMissileLaunch2.wav"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$A5EE90E4,2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$A5EE90E4)==2 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\FireBallMissile\\FireBallMissileLaunch3.wav"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$A5EE90E4,3)
elseif LoadInteger(udg_Hash,GetHandleId(u),$A5EE90E4)==3 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissileLaunch1.wav"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$A5EE90E4,4)
elseif LoadInteger(udg_Hash,GetHandleId(u),$A5EE90E4)==4 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissileLaunch2.wav"),("5"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$A5EE90E4,5)
elseif LoadInteger(udg_Hash,GetHandleId(u),$A5EE90E4)==5 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissileLaunch3.wav"),("6"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$A5EE90E4,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
call TimerStart(t,0.04,false,function AyaSkillE)
else
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
set t=null
set t2=null
set u=null
set c=null
set d=null
endfunction
function AyaSkillR takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer tempI=0
local real tempR
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local real tempX2
local real tempY2
local real angle
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer g=s__party_create()
local integer Agi=GetHeroAgi(u,true)
local real Rdmg=Agi*(1+(LoadInteger(udg_Hashtable,p,$BB70E228)*1))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage>=1 then
if stage==1 then
call Shacull(p)
call SetUnitAnimationByIndex(u,5)
set dummy=CreateUnit(Player(p-1),'sys7',tempX,tempY,(GetRandomReal(0.0,360.0)))
call imagedummySET(p,dummy,"war3mapImported\\@EF_File00002308.mdl")
call visible(dummy,100.0,0.0,1.0,0.04)
call EFsettingXY(p,"war3mapImported\\@EF_Vinz Nova Wind.mdl",0,tempX,tempY,3.0*Skrange[p],270,1,0,0,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaR_new1_Effect.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,dummy)
endif
if stage>=1 and stage<=50 then
if stage==8 then
call RemoveShacull(p)
endif
call ND(Player(p-1),0.04,stage*0.4)
call SetUnitScale(dummy,(6.0*Skrange[p])/100*(stage*2),1,1)
call SetUnitTimeScale(dummy,stage*0.04)
set tempX2=tempX+(((500/100*(stage*2))*1.0)*Cos((((GetRandomReal(0.0,360.0)))*1.0)*bj_DEGTORAD))
set tempY2=tempY+(((500/100*(stage*2))*1.0)*Sin((((GetRandomReal(0.0,360.0)))*1.0)*bj_DEGTORAD))
set angle=s__Angle_PBP(tempX2,tempY2,tempX,tempY)
call EFsettingXY(p,"war3mapImported\\@EF_Nitu.mdl",0.1,tempX2,tempY2,2.5/100*(stage*2),angle,1.0,1,1,0)
if stage==50 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaR_new2_Effect3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,dummy)
endif
endif
if stage>=50 and stage<=125 then
call ND(Player(p-1),0.04,20)
if ModuloInteger(stage,3)==0 then
call EFsettingXY(p,"war3mapImported\\@EF_SpecialAnimeDustWave.mdl",0.1,tempX,tempY,5.0,(GetRandomReal(0.0,360.0)),1.0,1,1,0)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),800*Skrange[p],null)
loop
set tar=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),tar)
exitwhen tar==null
if CheckPlayerGroup(tar)then
set angle=s__Angle_PBP(GetUnitX(dummy),GetUnitY(dummy),GetUnitX(tar),GetUnitY(tar))
if ModuloInteger(stage,3)==0 then
call Damage(u,tar,Rdmg,1,3,true,1,'H074')
endif
call KnockBackEn(tar,GetUnitX(tar)+(((-40)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(tar)+(((-40)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),0.03,0.01)
endif
endloop
endif
if stage==126 then
call SetUnitTimeScale(dummy,0.5)
call SetUnitAnimationByIndex(dummy,2)
endif
if stage==176 then
call RemoveUnit(dummy)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call TimerStart(t,0.04,false,function AyaSkillR)
endif
set t=null
set u=null
set tar=null
set dummy=null
call s__party_deallocate((g))
endfunction
function AyaSkillT takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer check=LoadInteger(udg_Hash,GetHandleId(t),$D76660F6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer tempI=0
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local unit c
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local real tempR=0.0
local real tempR2=0.0
local real Mana
local unit dummy
local integer g=s__party_create()
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$F8F856EA)
local integer Agi=GetHeroAgi(u,true)
local real Tdmg=Agi*(5+(LoadInteger(udg_Hashtable,p,$132FA1F5)*3))
local real Tdmg2=Agi*(5+(LoadInteger(udg_Hashtable,p,$132FA1F5)*(3+check)))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)>=8000 then
set stage=-1
call DestroyEffect(ef)
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
if stage==0 and IsTerrainPathable(tempX,tempY,PATHING_TYPE_FLYABILITY)then
set stage=999
endif
if stage==999 then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+Mana))
call EXSetAbilityState(EXGetUnitAbility(u,'H075'),ABILITY_STATE_COOLDOWN,0)
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"사용할 수 없는 위치입니다.")
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
if stage !=999 then
if stage>=0 and stage<40 then
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
call Mujuk(p,u)
if stage==0 then
set tempR2=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
call UnitAddAbility(u,'Amrf')
call UnitRemoveAbility(u,'Amrf')
call Shacull(p)
call KnockBackXY(u,GetUnitX(u)-(((200)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)-(((200)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),0.5,0.01)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aya_T.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aya_T_Effect_1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,70,u)
call FilterBasic(Player(p-1),1.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",226.00,146.00,98.00,0.00,130.00,61.00,4.00,100.00)
call invisible(u,0.00,100.00,0.5,0.01)
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_hhuaf2.mdl",tempX,tempY)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$F8F856EA,ef)
call EXSetEffectSize(ef,3.2)
call EXSetEffectZ(ef,-330.0)
call SetUnitAnimationByIndex(u,2)
call SaveReal(udg_Hash,GetHandleId(t),$849745EE,GetUnitX(u))
call SaveReal(udg_Hash,GetHandleId(t),$8BB2B122,GetUnitY(u))
call SaveReal(udg_Hash,GetHandleId(t),$1E5F3BA0,tempR2)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1000,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Stun(u,c,3.0)
endif
endloop
endif
set dummy=CreateUnit(Player(p-1),'sys7',GetUnitX(u),GetUnitY(u),tempR)
call imagedummy(p,dummy,0.6,2.0,"walk",Model[p])
call SetUnitAnimationByIndex(dummy,2)
call invisible(dummy,20.0,100.00,0.58,0.01)
loop
exitwhen tempI==50
set tempI=tempI+1
set c=LoadUnitHandle(udg_Hash,p,$74818D8+tempI)
if stage==0 then
if c !=null then
set check=check+1
call SaveReal(udg_Hash,p,$CAB9A581+tempI,20.0)
call SetUnitTimeScale(c,1.0)
call SaveInteger(udg_Hash,GetHandleId(t),$D76660F6,check)
call SaveInteger(udg_Hash,GetHandleId(t),$D76660F6+tempI,tempI)
call SetUnitAnimation(c,"stand")
set tempR=(GetRandomReal(0.0,360.0))
call SaveReal(udg_Hash,GetHandleId(t),$F748314B+tempI,tempR)
call SetUnitVertexColor(c,255,255,255,100)
endif
endif
if c !=null and LoadInteger(udg_Hash,GetHandleId(t),$D76660F6+tempI)!=0 then
set tempR=LoadReal(udg_Hash,GetHandleId(t),$F748314B+tempI)
if not IsTerrainPathable(tempX+(((stage*25)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),tempY+(((stage*25)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),PATHING_TYPE_FLYABILITY)then
call SetUnitX(c,tempX+(((stage*25)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
call SetUnitY(c,tempY+(((stage*25)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
endif
endif
endloop
if stage>=10 then
if stage==10 then
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_eff_ord_dange_wav_kuosan_1_4_1s.mdl",0,GetUnitX(u),GetUnitY(u),0.5,0,1.0,0,0,0)
endif
call SetUnitFlyHeight(u,GetUnitFlyHeight(u)+50.0*(I2R(stage)-9),0)
call SetUnitFlyHeight(dummy,GetUnitFlyHeight(u)-100,0)
endif
call TimerStart(t,0.05,false,function AyaSkillT)
endif
if stage>=40 and stage<check+40 then
call Mujuk(p,u)
if stage==40 then
call SetUnitFlyHeight(u,0,0)
endif
loop
exitwhen tempI==50
set tempI=tempI+1
set t2=CreateTimer()
set c=LoadUnitHandle(udg_Hash,p,$74818D8+tempI)
if c !=null and LoadInteger(udg_Hash,GetHandleId(t),$D76660F6+tempI)!=0 then
call SetUnitX(u,GetUnitX(c))
call SetUnitY(u,GetUnitY(c))
set tempR=s__Angle_PBP(GetUnitX(c),GetUnitY(c),tempX,tempY)
call SaveReal(udg_Hash,GetHandleId(t2),$9966AD24,tempR)
call EXSetUnitFacing(u,tempR)
call SetUnitFacing(u,tempR)
call EFsettingXY(p,"war3mapImported\\@EF_Dustwind Smoke.mdl",0,GetUnitX(c),GetUnitY(c),1.0,tempR,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_WindAttack.mdl",0,GetUnitX(c)+(((1000)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(c)+(((1000)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),1.0,tempR+180,1,0,0,0)
call SetUnitAnimationByIndex(u,10)
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t2),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t2),$76C18425,tempI)
call SaveReal(udg_Hash,p,$CAB9A581+tempI,0.0)
call SaveReal(udg_Hash,GetHandleId(t2),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t2),$8BEF6842,tempY)
if LoadInteger(udg_Hash,GetHandleId(u),$A5EE90E4)==0 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\FireBallMissile\\FireBallMissileLaunch1.wav"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$A5EE90E4,1)
elseif LoadInteger(udg_Hash,GetHandleId(u),$A5EE90E4)==1 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\FireBallMissile\\FireBallMissileLaunch2.wav"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$A5EE90E4,2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$A5EE90E4)==2 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\FireBallMissile\\FireBallMissileLaunch3.wav"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$A5EE90E4,3)
elseif LoadInteger(udg_Hash,GetHandleId(u),$A5EE90E4)==3 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissileLaunch1.wav"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$A5EE90E4,4)
elseif LoadInteger(udg_Hash,GetHandleId(u),$A5EE90E4)==4 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissileLaunch2.wav"),("5"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$A5EE90E4,5)
elseif LoadInteger(udg_Hash,GetHandleId(u),$A5EE90E4)==5 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissileLaunch3.wav"),("6"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$A5EE90E4,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
call TimerStart(t2,0.0,false,function WindPushT)
set tempR=0.3-I2R(stage-39)*0.07
if tempR>0.07 then
call TimerStart(t,tempR,false,function AyaSkillT)
else
call TimerStart(t,0.07,false,function AyaSkillT)
endif
exitwhen true
endif
endloop
else
if stage==check+40 then
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$1E5F3BA0)
call SetUnitX(u,tempX+(((800)*1.0)*Cos(((tempR2)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,tempY+(((800)*1.0)*Sin(((tempR2)*1.0)*bj_DEGTORAD)))
set tempR2=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
call SaveReal(udg_Hash,GetHandleId(t),$1E5F3BA0,tempR2)
call EXSetUnitFacing(u,tempR2)
call SetUnitFacing(u,tempR2)
call SetUnitAnimationByIndex(u,2)
call EFsettingU(p,"Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",0,u,"left hand")
call EFsettingU(p,"Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",0,u,"left hand")
call EFsettingU(p,"Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",0,u,"left hand")
call EFsettingU(p,"war3mapImported\\@EF_White-Qiquan-Special.mdl",0,u,"origin")
call EFsettingU(p,"war3mapImported\\@EF_White-Qiquan-Special.mdl",0,u,"origin")
call EFsettingU(p,"war3mapImported\\@EF_White-Qiquan-Special.mdl",0,u,"origin")
call KnockBackXY(u,GetUnitX(u)-(((200)*1.0)*Cos(((tempR2)*1.0)*bj_DEGTORAD)),GetUnitY(u)-(((200)*1.0)*Sin(((tempR2)*1.0)*bj_DEGTORAD)),0.7,0.01)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aya_T2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aya_T_Effect_3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call visible(u,100.00,0.00,0.5,0.01)
call TimerStart(t,0.9,false,function AyaSkillT)
endif
if stage>=check+41 and stage<=check+50 then
set tempR=LoadReal(udg_Hash,GetHandleId(t),$1E5F3BA0)
if ModuloInteger(stage,3)==0 then
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Dust Rush 01.mdl",0,GetUnitX(u)+(((-100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((-100)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),1.0,tempR,1.0,0,0,150)
endif
if stage==check+41 then
call EFsettingXY(p,"war3mapImported\\@EF_AZ_A_Slash Splash Sky.mdl",0,tempX+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),tempY+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),8.0*Skrange[p],tempR,1.1,0,0,50)
call SetUnitAnimationByIndex(u,9)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aya_T_Effect_2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call ND(Player(p-1),0.3,100)
call PlaySoundOnUnit(udg_SND,70,u)
endif
call SetUnitX(u,GetUnitX(u)+(((200)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(u)+(((200)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and LoadBoolean(udg_Hash,GetHandleId(t),GetHandleId(c))==false then
call EFsettingXY(p,"war3mapImported\\@EF_Hit Wave.mdl",0,GetUnitX(c)+(((-100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(c)+(((-100)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),5.0,tempR,90,0,0,150)
call EFsettingXY(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,GetUnitX(c)+(((-100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(c)+(((-100)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),1.0,tempR,1,0,0,150)
call Damage(u,c,Tdmg2,1,3,false,1,'H075')
call SaveBoolean(udg_Hash,GetHandleId(t),GetHandleId(c),true)
endif
endloop
call TimerStart(t,0.01,false,function AyaSkillT)
elseif stage>check+50 then
call SetUnitX(u,LoadReal(udg_Hash,GetHandleId(t),$849745EE))
call SetUnitY(u,LoadReal(udg_Hash,GetHandleId(t),$8BB2B122))
call DestroyEffect(ef)
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
endif
call s__party_deallocate((g))
set t=null
set t2=null
set u=null
set c=null
set dummy=null
set ef=null
endfunction
function AyaSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local real tempR
local real tempX
local real tempY
local real tempI
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local integer g=s__party_create()
local real Mana
local integer stage=0
local unit c
if sk=='H070' then
call BuffCall(u,'B009',10,false,false)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaD.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call EFsettingU(p,"war3mapImported\\@EF_lb_hdg.mdl",0,u,"origin")
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaD_Effect1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call StatChange(p,30,"이속",10.0)
call PlaySoundOnUnit(udg_SND,50,u)
call TimerStart(t,0.0,false,function AyaSkillD)
endif
if sk=='H071' then
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage)
set tempR=104.0
call SaveReal(udg_Hash,GetHandleId(t),$217D9D93,tempR)
call TimerStart(t,0.0,false,function AyaSkillQ)
call Shacull(p)
endif
if sk=='H072' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=2000 then
set tempX=(GetUnitX(u)+(((2000)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((2000)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
call EXSetUnitFacing(u,tempR)
call SetUnitFacing(u,tempR)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage)
set c=CreateUnit(Player(p-1),'sys7',GetUnitX(u)+(((100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((100)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),270)
call imagedummySET(p,c,"war3mapImported\\@EF_mr.war3_TornadoND.mdl")
call SetUnitScale(c,0.5*Skrange[p],1,1)
call SetUnitVertexColor(c,255,255,255,50)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$93E01349,c)
set c=CreateUnit(Player(11),'sys8',GetUnitX(u),GetUnitY(u),270)
call IssueTargetOrder(c,"magicleash",u)
call UnitApplyTimedLife(c,'BHwe',0.15)
call TimerStart(t,0.0,false,function AyaSkillW)
endif
if sk=='H073' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=2000 then
set tempX=(GetUnitX(u)+(((2000)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((2000)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
call SaveReal(udg_Hash,GetHandleId(t),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$8BEF6842,tempY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$D76660F6,0)
call SaveInteger(udg_Hash,p,$34626AAF,0)
call SaveInteger(udg_Hash,p,$AA40225A,0)
set MultyGroup[p+40]=CreateGroup()
call TimerStart(t,0.0,false,function AyaSkillE)
endif
if sk=='H074' then
set Mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=2000 then
set tempX=(GetUnitX(u)+(((2000)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((2000)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
call SaveReal(udg_Hash,GetHandleId(t),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$8BEF6842,tempY)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaE.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaRnew_Effect.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,85,u)
call TimerStart(t,0.0,false,function AyaSkillR)
endif
if sk=='H077' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=2000 then
set tempX=(GetUnitX(u)+(((2000)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((2000)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
call SaveReal(udg_Hash,GetHandleId(t),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$8BEF6842,tempY)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaR.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_AyaR_Effect1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,85,u)
call ND(Player(p-1),0.2,20)
call SaveInteger(udg_Hash,p,$6314C3C4,0)
set MultyGroup[p+30]=CreateGroup()
call TimerStart(t,0.0,false,function AyaSkillWEX)
endif
if sk=='H075' then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call EXSetUnitFacing(u,tempR)
call SetUnitFacing(u,tempR)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1500 then
set tempX=(GetUnitX(u)+(((1500)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((1500)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
if not IsTerrainPathable(tempX,tempY,PATHING_TYPE_FLYABILITY)then
loop
exitwhen stage==1+R2I(GetUnitMoveSpeed(u)/75)
set stage=stage+1
call WindMake(p,tempX,tempY)
endloop
endif
call SaveReal(udg_Hash,GetHandleId(t),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$8BEF6842,tempY)
call TimerStart(t,0.01,false,function AyaSkillT)
endif
call s__party_deallocate((g))
set u=null
set t=null
set c=null
set tar=null
endfunction
function AyaST takes integer p returns nothing
local timer t=CreateTimer()
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,p,$FDB198B1,0)
call SaveReal(udg_Hash,p,$C94585A9,0)
call TimerStart(t,0.0,false,function AyaSkillFandQ)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetAbsolutePoint(DzFrameFindByName("Stack_Mini_Icon",0),JN_FRAMEPOINT_CENTER,0.6472,0.016)
call DzFrameShow(DzFrameFindByName("Stack_Mini_Icon",0),true)
endif
set ChSkillD[p]='H070'
set ChSkillQ[p]='H071'
set ChSkillW[p]='H072'
set ChSkillE[p]='H073'
set ChSkillR[p]='H074'
set ChSkillT[p]='H075'
set Range[p]=250
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,'H076')
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_AyaQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_AyaW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_AyaE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_AyaR2.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_AyaT.blp",0)
endif
set STRup[p]=9
set AGIup[p]=8
set INTup[p]=5
set ADup[p]=5
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$8483D54D,90)
call SaveReal(udg_Hashtable,p,$43C91172,0.15)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.8)
call SaveReal(udg_Hashtable,p,$9B58470C,85)
call SaveReal(udg_Hashtable,p,$88E0F85F,35)
call SaveReal(udg_Hashtable,p,$E755DDB8,150)
call SaveReal(udg_Hashtable,p,$ABD3E955,75)
call SaveReal(udg_Hashtable,p,$A2229E00,300)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,100)
call SaveReal(udg_Hashtable,p,$C3EA9E83,600)
call SaveReal(udg_Hashtable,p,$A8D71652,300)
call SaveReal(udg_Hashtable,p,$127510D2,2000)
call SaveReal(udg_Hashtable,p,$B491D29B,500)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$9B61816E,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$5047FE8B,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_AyaF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc바람을 다루는 정도의 능력")
if LoadBoolean(udg_Hash,p,$5AA04831)then
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"아야는 상시 이동 속도의 일부 만큼 바람 속성 증폭량이 증가합니다.\n\n일부 스킬은 회오리를 생성하며, 회오리는 지속 시간이 다 될 경우 소멸합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00추가 바람 속성 증폭량|cffffa500 : (현재 이동속도 x 0.04)\n|cff00ff00회오리 지속시간|cffffa500 : 10초\n|cffFF0000EX|cffffa500 : 이동속도 비례 증폭량이 4%로 상승합니다.")
else
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"아야는 상시 이동 속도의 일부 만큼 바람 속성 증폭량이 증가합니다.\n\n일부 스킬은 회오리를 생성하며, 회오리는 지속 시간이 다 될 경우 소멸합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00추가 바람 속성 증폭량|cffffa500 : (현재 이동속도 x 0.03)\n|cff00ff00회오리 지속시간|cffffa500 : 10초")
endif
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function AyaSkill)
call SaveInteger(udg_Hashtable,p,$5EFF7683,7)
call AyaTT(p)
set u=null
set trg=null
set t=null
endfunction
function DoomGuardBurning takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local unit l__target=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real dmg=(GetUnitState(u,ConvertUnitState(0x12))*12)+(GetUnitState(l__target,UNIT_STATE_MAX_LIFE)*2.0)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,1.0,false,function DoomGuardBurning)
if stage<=8 then
call Damage(u,l__target,dmg,1,0,false,0.25,0)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl",l__target,"origin"))
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set l__target=null
endfunction
function DoomGuardRage takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,12.0,false,function DoomGuardRage)
if stage==1 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Spells\\Other\\HowlOfTerror.wav"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call UnitAddAbility(u,'AIms')
call EXSetAbilityDataReal(EXGetUnitAbility(u,'AIms'),1,108,500)
call IncUnitAbilityLevel(u,'AIms')
call DecUnitAbilityLevel(u,'AIms')
call UnitAddAbility(u,'AIsx')
call EXSetAbilityDataReal(EXGetUnitAbility(u,'AIsx'),1,108,8.0)
call IncUnitAbilityLevel(u,'AIsx')
call DecUnitAbilityLevel(u,'AIsx')
call SetUnitVertexColor(u,255,0,0,255)
call SetUnitScale(u,4.5,1,1)
call SetUnitTimeScale(u,1.0)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@Aura_Z_Ora_beam(red).mdx",u,"origin"),9.0)
call EDestroy(AddSpecialEffect("war3mapImported\\@EF_Archetype_R7.mdl",GetUnitX(u),GetUnitY(u)),0.01)
else
call UnitRemoveAbility(u,'AIms')
call UnitRemoveAbility(u,'AIsx')
call SetUnitVertexColor(u,255,255,255,255)
call SetUnitScale(u,3.0,1,1)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
endfunction
function DoomGuardSlience takes nothing returns nothing
local timer t=GetExpiredTimer()
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real dmg
local integer g=s__party_create()
local unit l__target=null
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,0.1,false,function DoomGuardSlience)
if stage<=40 then
if stage==1 then
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@Aura_az_doomguardpf_d2.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,5.5)
call EDestroy(bj_lastCreatedEffect,4.0)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_Flamestrike I.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,4.0)
call EDestroy(bj_lastCreatedEffect,0.1)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,600,null)
loop
set l__target=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__target)
exitwhen l__target==null
if CheckFBossGroup(l__target)and IsUnitType(l__target,UNIT_TYPE_HERO)then
call SilenceApply(u,l__target,1.0,0,0)
endif
if CheckFBossGroupN(l__target)and IsUnitType(l__target,UNIT_TYPE_HERO)then
if stage==1 then
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*6)+(GetUnitState(l__target,UNIT_STATE_MAX_LIFE)*0.2)
call Damage(u,l__target,dmg,1,0,false,1,0)
else
if ModuloInteger(stage,5)==0 then
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*3)+(GetUnitState(l__target,UNIT_STATE_MAX_LIFE)*0.1)
call EDestroy(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",l__target,"origin"),0.5)
call Damage(u,l__target,dmg,1,0,false,1,0)
endif
endif
endif
endloop
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set l__target=null
call s__party_deallocate((g))
endfunction
function DoomGuardMeteo takes nothing returns nothing
local timer t=GetExpiredTimer()
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real dmg
local integer g=s__party_create()
local unit l__target=null
local unit c=LoadUnitHandle(udg_Hash,GetHandleId(t),$6C50181C)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,0.1,false,function DoomGuardMeteo)
if stage==1 then
set bj_lastCreatedEffect=AddSpecialEffect("Units\\Demon\\Infernal\\InfernalBirth.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,1.5)
call EXSetEffectSpeed(bj_lastCreatedEffect,2)
call EDestroy(bj_lastCreatedEffect,0.5)
set c=CreateUnit(Player(11),'sys9',tempX,tempY,270)
call DzSetUnitModel(c,"war3mapImported\\@AOE_AOEIndicator.mdl")
call SetUnitScale(c,3,1,1)
call SetUnitTimeScale(c,1.0/0.5)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$6C50181C,c)
endif
if stage==5 then
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,300,null)
loop
set l__target=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__target)
exitwhen l__target==null
if CheckFBossGroupN(l__target)and IsUnitType(l__target,UNIT_TYPE_HERO)then
if not IsUnitInGroup(l__target,udg_Mujuk)then
call Stun(u,l__target,0.5)
endif
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*3)+(GetUnitState(l__target,UNIT_STATE_MAX_LIFE)*0.1)
call Damage(u,l__target,dmg,1,0,false,1,0)
endif
endloop
call RemoveUnit(c)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set c=null
set l__target=null
call s__party_deallocate((g))
endfunction
function DoomGuardThrow takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local unit dummy
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX=GetUnitX(tar)
local real tempY=GetUnitY(tar)
local real dmg
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage<=40 then
set tempX=tempX+(((40)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=tempY+(((40)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(tar,tempX)
call SetUnitY(tar,tempY)
call DestroyEffect(AddSpecialEffect("abilities\\weapons\\catapult\\catapultmissile.mdl",GetUnitX(tar),GetUnitY(tar)))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(tar),GetUnitY(tar)))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),200,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)and dummy !=tar then
set stage=99
endif
endloop
else
set stage=99
endif
call TimerStart(t,0.01,false,function DoomGuardThrow)
elseif stage>=41 then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
if stage==99 then
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,41)
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(tar),GetUnitY(tar))
call EXSetEffectSize(bj_lastCreatedEffect,2.0)
call EDestroy(bj_lastCreatedEffect,0.01)
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(tar),GetUnitY(tar))
call EXSetEffectSize(bj_lastCreatedEffect,2.0)
call EDestroy(bj_lastCreatedEffect,0.01)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),200,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
if not IsUnitInGroup(dummy,udg_Mujuk)then
call Stun(u,dummy,4.0)
endif
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*30)+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*1.0)
call Damage(u,dummy,dmg,1,0,false,1,0)
endif
endloop
endif
call s__party_deallocate((g))
set t=null
set u=null
set tar=null
set dummy=null
endfunction
function DoomGuardPatton takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2=null
local timer t3=null
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local integer stage=LoadInteger(udg_Hash,$944CCEB0,2)
local integer PatonNum=LoadInteger(udg_Hash,$944CCEB0,3)
local integer Fulltime=LoadInteger(udg_Hash,$944CCEB0,4)
local integer unableEF=LoadInteger(udg_Hash,$944CCEB0,5)
local integer temp=0
local integer temp2=0
local integer tempI=0
local integer tempI2=0
local real dmg=0
local real tempR=0
local real tempX=0
local real tempY=0
local real tempX2=0
local real tempY2=0
local unit dummy=null
local unit gunit=null
local unit c=null
local unit l__temp_unit2=null
local effect ef=null
local effect ef2=null
local integer g=s__party_create()
call TimerStart(t,0.04,false,function DoomGuardPatton)
if Bossunable or Bossstun then
if Bossstun and LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call SaveInteger(udg_Hash,$944CCEB0,2,stage+1)
call SaveInteger(udg_Hash,$944CCEB0,4,Fulltime+1)
endif
else
call SaveInteger(udg_Hash,$944CCEB0,2,stage+1)
call SaveInteger(udg_Hash,$944CCEB0,4,Fulltime+1)
endif
if Bossunable and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)!=0 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call PauseUnit(u,false)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
endif
if Bossunable and BossunableTime>0 then
call SaveInteger(udg_Hash,$944CCEB0,5,unableEF+1)
set BossunableTime=BossunableTime-0.1
if unableEF==0 then
set temp=0
loop
exitwhen temp==5
call FilterBasic(Player(temp),3.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",0.00,0.00,0.00,20.00,0.00,0.00,0.00,100.00)
set temp=temp+1
endloop
call SetUnitAnimation(u,"death")
set tempX=GetUnitX(u)+(((-150)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-150)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.7,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",u,"origin"))
endif
if unableEF==7 then
call SetUnitTimeScale(u,0)
endif
elseif Bossunable and BossunableTime<=0 then
set Bossunable=false
set BossunableTime=1
call SaveInteger(udg_Hash,$944CCEB0,5,0)
call SetUnitTimeScale(u,1)
endif
if UnitAlive(u)then
if not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
if not UnitAlive(target)or(target !=null and not IsUnitInRange(u,target,1800))or IsUnitInGroup(target,udg_Mujuk)or(BossAgro !=null and BossAgro !=target)then
set target=null
endif
if target==null then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),2000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)then
if BossAgro==null or IsUnitInGroup(BossAgro,udg_Mujuk)then
set l__temp_unit2=gunit
elseif BossAgro !=null and l__temp_unit2 !=BossAgro then
set l__temp_unit2=gunit
endif
endif
endloop
set target=l__temp_unit2
else
set l__temp_unit2=target
endif
if l__temp_unit2 !=null then
call IssueTargetOrder(u,"attack",l__temp_unit2)
elseif l__temp_unit2==null then
if IsUnitInRange(u,gg_unit_h000_0013,500)then
call IssueTargetOrder(u,"attack",gg_unit_h000_0013)
else
set tempX=GetRectCenterX(gg_rct_AttackZone)
set tempY=GetRectCenterY(gg_rct_AttackZone)
call IssuePointOrder(u,"attack",tempX,tempY)
endif
endif
endif
if stage>=120 and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
if LoadInteger(udg_Hash,$944CCEB0,3)==4 then
set temp=4
call SaveInteger(udg_Hash,$944CCEB0,3,0)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,4)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
else
set temp=GetRandomInt(1,4)
if temp==1 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,1)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
endif
if temp==2 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,2)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
endif
if temp==3 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,3)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
endif
if temp==4 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,4)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
endif
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==1 then
if stage==120 then
call PauseUnit(u,true)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),3000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
if BossAgro==dummy then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
else
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI,dummy)
endif
endif
endloop
if LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)==null and tempI !=0 then
set tempI2=0
loop
exitwhen dummy !=null
set tempI2=tempI2+1
if tempI2>tempI then
set tempI2=0
endif
if GetRandomInt(1,tempI)==1 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
endif
endloop
set tempI2=0
loop
exitwhen tempI2>tempI
set tempI2=tempI2+1
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2,dummy)
call RemoveUnit(dummy)
endloop
endif
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
if dummy==null or not UnitAlive(dummy)then
set stage=172
else
call SetUnitAnimationByIndex(u,3)
call SetUnitTimeScale(u,0.2)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call EXSetUnitFacing(u,tempR)
call SetUnitFacing(u,tempR)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_Effect Cast Red.mdl",u,"right hand"),1.95)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff04A3CC타 죽어라|r",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,10,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.0)
set temp=LoadInteger(udg_Hash,$944CCEB0,3)
call SaveInteger(udg_Hash,$944CCEB0,3,temp+1)
set tempI=0
loop
exitwhen tempI==10
set tempI=tempI+1
set tempX=GetUnitX(u)+(((300*tempI)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300*tempI)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call AOE(tempX,tempY,6.0,1.0/1.7,1.7)
endloop
endif
endif
if stage==155 then
call SetUnitTimeScale(u,1.0)
endif
if stage==160 then
set tempI=0
set tempR=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
set t2=CreateTimer()
call SaveTimerHandle(udg_Hash,GetHandleId(t),$1CA61CEC,t2)
loop
exitwhen tempI==10
set tempI=tempI+1
set tempX=GetUnitX(u)+(((300*tempI)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300*tempI)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,600,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)and LoadBoolean(udg_Hash,GetHandleId(t2),GetHandleId(dummy))==false then
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*12)+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*2.0)
call Damage(u,dummy,dmg,1,0,false,1,0)
call SaveBoolean(udg_Hash,GetHandleId(t2),GetHandleId(dummy),true)
set t3=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t3),$FC4D8276,dummy)
call SaveInteger(udg_Hash,GetHandleId(t3),$62760798,1)
call TimerStart(t3,0.0,false,function DoomGuardBurning)
set t3=null
endif
endloop
set ef=AddSpecialEffect("war3mapImported\\@EF_1 (241).mdl",tempX,tempY)
call EXSetEffectSize(ef,3.0)
call DestroyEffect(ef)
endloop
endif
if stage==172 then
set t2=LoadTimerHandle(udg_Hash,GetHandleId(t),$1CA61CEC)
if GetHandleId(t2)!=0 then
call FlushChildHashtable(udg_Hash,GetHandleId(t2))
endif
call PauseTimer(t2)
call DestroyTimer(t2)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
call PauseUnit(u,false)
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
call RemoveUnit(dummy)
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==2 then
if stage==140 then
set ef=AddSpecialEffect("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(ef,3.0)
call DestroyEffect(ef)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffdc143c뒤를 노려주마|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.8)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.5)
endif
if stage==175 then
call PauseUnit(u,true)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),2000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI,dummy)
endif
endloop
if tempI !=0 then
loop
exitwhen dummy !=null
set tempI2=tempI2+1
if tempI2>tempI then
set tempI2=0
endif
if GetRandomInt(1,tempI)==1 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
endif
endloop
set tempI2=0
loop
exitwhen tempI2>tempI
set tempI2=tempI2+1
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2,dummy)
call RemoveUnit(dummy)
endloop
endif
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
if dummy==null or not UnitAlive(dummy)then
call SaveInteger(udg_Hash,$944CCEB0,2,271)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffdc143c아무도 없군..|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.6)
else
set ef=AddSpecialEffect("war3mapImported\\@EF_Black Blink.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(ef,3.0)
call DestroyEffect(ef)
set tempX=GetUnitX(dummy)+(((-150)*1.0)*Cos(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((-150)*1.0)*Sin(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call EDestroy(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",u,"origin"),1.95)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call EXSetUnitFacing(u,tempR)
call SetUnitFacing(u,tempR)
endif
endif
if stage==176 then
set temp=LoadInteger(udg_Hash,$944CCEB0,3)
call SaveInteger(udg_Hash,$944CCEB0,3,temp+1)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
call SetUnitAnimationByIndex(u,4)
call SetUnitTimeScale(u,0.3)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call EXSetUnitFacing(u,tempR)
call SetUnitFacing(u,tempR)
set ef=AddSpecialEffect("war3mapImported\\@AOE_Strate200+1000.mdl",GetUnitX(u),GetUnitY(u))
call EXEffectMatRotateZ(ef,tempR)
call EXSetEffectSize(ef,2.0)
call EDestroy(ef,0.5)
call EDestroy(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",u,"left hand"),1.2)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffdc143c쓰레기가..!|r",(18*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.8)
endif
if stage>=195 and stage<=204 then
set tempR=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
if stage==195 then
call SetUnitTimeScale(u,1.0)
set ef=AddSpecialEffect("war3mapImported\\@EF_Nitu.mdl",GetUnitX(u),GetUnitY(u))
call EXEffectMatRotateZ(ef,tempR)
call EXSetEffectSize(ef,3.0)
call DestroyEffect(ef)
endif
set tempX=GetUnitX(u)+(((200)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((200)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
if stage>=196 then
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(u)+(((-200)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((-200)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
call EXSetEffectSize(bj_lastCreatedEffect,2.0)
call EDestroy(bj_lastCreatedEffect,0.01)
endif
endif
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),400,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)and gunit==null then
set gunit=dummy
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6,gunit)
if not IsUnitInGroup(gunit,udg_Mujuk)then
call Stun(u,gunit,2.0)
endif
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffdc143c!|r",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.8)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.4)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_WindAttack.mdl",GetUnitX(gunit)+(((450)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(gunit)+(((450)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
call EXSetEffectSize(bj_lastCreatedEffect,2.0)
call EXEffectMatRotateZ(bj_lastCreatedEffect,tempR+180)
call EDestroy(bj_lastCreatedEffect,0.01)
call ND(GetOwningPlayer(gunit),0.2,50)
call EDestroy(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl",gunit,"chest"),3)
endif
endloop
if gunit !=null then
set tempX=GetUnitX(u)+(((300)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call SetUnitX(gunit,tempX)
call SetUnitY(gunit,tempY)
call Stun(u,gunit,5.0)
endif
endif
if stage>=204 and stage<=229 then
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6)
if gunit !=null then
set tempX=GetUnitX(u)+(((300)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call SetUnitX(gunit,tempX)
call SetUnitY(gunit,tempY)
endif
endif
if stage==230 then
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6)
if gunit==null then
call SetUnitTimeScale(u,1.0)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffdc143c쳇..|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.6)
call SaveInteger(udg_Hash,$944CCEB0,2,271)
else
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffdc143c꺼져라!|r",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.5)
call EDestroy(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",u,"left hand"),1.2)
call SetUnitAnimationByIndex(u,3)
call SetUnitTimeScale(u,0.2)
set tempI=0
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),2000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)and dummy !=LoadUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6)then
if BossAgro==dummy then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$44455C78,dummy)
else
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$44455C78+tempI,dummy)
endif
endif
endloop
if LoadUnitHandle(udg_Hash,GetHandleId(t),$44455C78)==null and tempI !=0 then
loop
exitwhen dummy !=null
set tempI2=tempI2+1
if tempI2>tempI then
set tempI2=0
endif
if GetRandomInt(1,tempI)==1 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$44455C78+tempI2)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$44455C78,dummy)
endif
endloop
set tempI2=0
loop
exitwhen tempI2>tempI
set tempI2=tempI2+1
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$44455C78+tempI2,dummy)
call RemoveUnit(dummy)
endloop
endif
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$44455C78)
if dummy==null or not UnitAlive(dummy)then
set tempR=(GetRandomReal(0.0,360.0))
else
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
endif
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
set tempX=GetUnitX(u)+(((300)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call SetUnitX(gunit,tempX)
call SetUnitY(gunit,tempY)
call EXSetUnitFacing(u,tempR)
call SetUnitFacing(u,tempR)
set tempI=0
loop
exitwhen tempI==5
set tempI=tempI+1
set c=CreateUnit(Player(11),'sys9',GetUnitX(u)+(((300*tempI)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((300*tempI)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),tempR)
call DzSetUnitModel(c,"war3mapImported\\@AOE_biaoji_jiantou.mdl")
call SetUnitScale(c,10,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$588728A4+tempI,c)
endloop
endif
endif
if stage>=230 and stage<=245 then
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
set tempX=GetUnitX(u)+(((300)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call SetUnitX(gunit,tempX)
call SetUnitY(gunit,tempY)
endif
if stage==246 then
call SetUnitTimeScale(u,2.0)
set t2=CreateTimer()
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6)
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*9)+(GetUnitState(gunit,UNIT_STATE_MAX_LIFE)*0.3)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$FC4D8276,gunit)
call SaveReal(udg_Hash,GetHandleId(t2),$9966AD24,tempR)
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
call Damage(u,gunit,dmg,1,0,false,1,0)
if not IsUnitInGroup(gunit,udg_Mujuk)then
call Stun(u,gunit,4.0)
endif
call TimerStart(t2,0.0,false,function DoomGuardThrow)
call ND(GetOwningPlayer(gunit),0.4,70)
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
call EXEffectMatRotateY(bj_lastCreatedEffect,90)
call EXEffectMatRotateZ(bj_lastCreatedEffect,tempR)
call EXSetEffectSize(bj_lastCreatedEffect,4.0)
call EXSetEffectSpeed(bj_lastCreatedEffect,2.0)
call EDestroy(bj_lastCreatedEffect,0.01)
set tempI=0
loop
exitwhen tempI==5
set tempI=tempI+1
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$588728A4+tempI)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$588728A4+tempI,c)
call RemoveUnit(c)
endloop
endif
if stage==271 then
call SetUnitTimeScale(u,1.0)
call PauseUnit(u,false)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6,dummy)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$44455C78,dummy)
call RemoveUnit(dummy)
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==3 then
if stage==160 then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),2000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
set temp=1
endif
endloop
if temp==1 then
call PauseUnit(u,true)
set temp=LoadInteger(udg_Hash,$944CCEB0,3)
call SaveInteger(udg_Hash,$944CCEB0,3,temp+1)
call SetUnitAnimationByIndex(u,4)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff000080하늘에서..|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.7)
set ef=AddSpecialEffect("Abilities\\Weapons\\DemonHunterMissile\\DemonHunterMissile.mdl",GetUnitX(u),GetUnitY(u))
call EDestroy(ef,2.5)
call EXSetEffectSize(ef,20.0)
call EXEffectMatRotateY(ef,270)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$F8F856EA,ef)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_WindCirclefaster.mdl",GetUnitX(u),GetUnitY(u))
call EDestroy(bj_lastCreatedEffect,1.0)
call EXSetEffectSize(bj_lastCreatedEffect,4.0)
else
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
endif
endif
if stage>=160 and stage<=210 then
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$F8F856EA)
call EXSetEffectZ(ef,700.0+(stage-160)*80)
if stage==185 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff000080파멸이 빗발친다!|r",(18*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.5)
endif
if stage==185 then
call SetUnitAnimationByIndex(u,5)
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,4.0)
call EDestroy(bj_lastCreatedEffect,0.01)
set ef2=AddSpecialEffect("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl",GetUnitX(u),GetUnitY(u))
call EDestroy(ef2,1.0)
call EXSetEffectSize(ef2,5.0)
call EXEffectMatRotateY(ef2,270)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$94B57B64,ef2)
endif
if stage>=185 and stage<=203 then
set ef2=LoadEffectHandle(udg_Hash,GetHandleId(t),$94B57B64)
call EXSetEffectZ(ef2,100.0+(stage-185)*250)
endif
if stage==210 then
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_[AKE]war3AKE.com - 9997996651673980406444242.mdl",GetUnitX(u),GetUnitY(u))
call EDestroy(bj_lastCreatedEffect,1.0)
call EXSetEffectSize(bj_lastCreatedEffect,20.0)
call EXSetEffectSpeed(bj_lastCreatedEffect,0.5)
call EXSetEffectZ(bj_lastCreatedEffect,100.0+(stage-185)*35)
call Assets_UseSoundByPath__MakeSound(("Sound\\Buildings\\Death\\NightElfBuildingDeathLarge1.wav"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
endif
if stage>=210 and stage<=225 then
if ModuloInteger(stage,3)==0 then
set tempI=0
loop
exitwhen tempI==8
set tempI=tempI+1
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_shinratensei.mdl",GetUnitX(u)+(((3000-(180*(stage-210)))*1.0)*Cos((((45*tempI))*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((3000-(180*(stage-210)))*1.0)*Sin((((45*tempI))*1.0)*bj_DEGTORAD)))
call EXSetEffectSpeed(bj_lastCreatedEffect,1.5)
call DestroyEffect(bj_lastCreatedEffect)
endloop
endif
endif
if stage>=230 and stage<=280 then
set tempI=0
loop
exitwhen tempI==8
set tempI=tempI+1
set tempX=GetUnitX(u)+(((3000-(60*(stage-230)))*1.0)*Cos((((45*tempI)+GetRandomInt(-10,10))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((3000-(60*(stage-230)))*1.0)*Sin((((45*tempI)+GetRandomInt(-10,10))*1.0)*bj_DEGTORAD))
set t2=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
call SaveReal(udg_Hash,GetHandleId(t2),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t2),$8BEF6842,tempY)
call TimerStart(t2,0.0,false,function DoomGuardMeteo)
endloop
endif
if stage==281 then
call PauseUnit(u,false)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==4 then
if stage==120 then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),2000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
if BossAgro==dummy then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
else
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI,dummy)
endif
endif
endloop
if LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)==null and tempI !=0 then
loop
exitwhen dummy !=null
set tempI2=tempI2+1
if tempI2>tempI then
set tempI2=0
endif
if GetRandomInt(1,tempI)==1 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
endif
endloop
set tempI2=0
loop
exitwhen tempI2>tempI
set tempI2=tempI2+1
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2,dummy)
call RemoveUnit(dummy)
endloop
endif
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
if dummy==null or not UnitAlive(dummy)then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
call RemoveUnit(dummy)
else
set temp=LoadInteger(udg_Hash,$944CCEB0,3)
call SaveInteger(udg_Hash,$944CCEB0,3,temp+1)
call SetUnitAnimationByIndex(u,4)
call EXSetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy)))
call SetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy)))
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffdc143c그깟 잔재주 따위!|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.5)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.2)
call PauseUnit(u,true)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
call EDestroy(AddSpecialEffect("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeTarget.mdl",tempX,tempY),2.0)
call AOE(tempX,tempY,6.0,1.0/0.8,0.8)
set t2=CreateTimer()
call SaveReal(udg_Hash,GetHandleId(t2),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t2),$8BEF6842,tempY)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
call TimerStart(t2,0.8,false,function DoomGuardSlience)
endif
endif
if stage==140 then
call PauseUnit(u,false)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
call RemoveUnit(dummy)
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==5 then
if stage==240 then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),3000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
if BossAgro==dummy then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
else
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI,dummy)
endif
endif
endloop
if LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)==null and tempI !=0 then
loop
exitwhen dummy !=null
set tempI2=tempI2+1
if tempI2>tempI then
set tempI2=0
endif
if GetRandomInt(1,tempI)==1 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
endif
endloop
set tempI2=0
loop
exitwhen tempI2>tempI
set tempI2=tempI2+1
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2,dummy)
call RemoveUnit(dummy)
endloop
endif
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
if dummy==null or not UnitAlive(dummy)then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,2,120)
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
call RemoveUnit(dummy)
else
set temp=LoadInteger(udg_Hash,$944CCEB0,3)
call SaveInteger(udg_Hash,$944CCEB0,3,0)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffffff7f네놈을 추격해주마!|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.5)
set ef=AddSpecialEffectTarget("war3mapImported\\@EF_SnipingTarget.mdl",dummy,"chest")
call SaveEffectHandle(udg_Hash,GetHandleId(t),$94B57B64,ef)
call PauseUnit(u,true)
call FilterBasic(GetOwningPlayer(dummy),1.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,0.00,0.00,20.00,100.00,0.00,0.00,100.00)
if GetLocalPlayer()==GetOwningPlayer(dummy)then
call PanCameraToTimed(GetUnitX(u),GetUnitY(u),0.5)
endif
call SaveInteger(udg_Hash,GetHandleId(t),$EEBCF22A,0)
call SaveBoolean(udg_Hash,GetHandleId(t),$BD4989EA,false)
call SetUnitAnimationByIndex(u,2)
call Assets_UseSoundByPath__MakeSound(("Abilities\\Spells\\NightElf\\BattleRoar.wav"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
endif
if stage>=241 then
if LoadInteger(udg_Hash,GetHandleId(t),$EEBCF22A)==3 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$94B57B64)
call DestroyEffect(ef)
if not IsPointPathableALL(GetUnitX(u),GetUnitY(u))then
call SetUnitX(u,LoadReal(udg_Hash,GetHandleId(t),$849745EE))
call SetUnitY(u,LoadReal(udg_Hash,GetHandleId(t),$8BB2B122))
endif
call PauseUnit(u,false)
call SetUnitTimeScale(u,1.0)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
call RemoveUnit(dummy)
else
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
if stage>=241 and stage<=265 and ModuloInteger(stage,2)==0 then
set ef=AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(ef,3.0)
call DestroyEffect(ef)
endif
call EXSetUnitFacing(u,tempR)
call SetUnitFacing(u,tempR)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))>=5000 then
if GetLocalPlayer()==GetOwningPlayer(dummy)then
call PanCameraToTimed(GetUnitX(u),GetUnitY(u),0.25)
endif
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffdc143c도망가면 된다고 생각했느냐!|r",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.8)
set t2=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
call TimerStart(t2,0.0,false,function DoomGuardRage)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
call RemoveUnit(dummy)
call PauseUnit(u,false)
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$94B57B64)
call DestroyEffect(ef)
call ND(GetOwningPlayer(dummy),0.5,50)
endif
if not UnitAlive(dummy)then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffdc143c하찮은 놈이였군.|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.5)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.2)
call PauseUnit(u,false)
call SetUnitTimeScale(u,1.0)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
call RemoveUnit(dummy)
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$94B57B64)
call DestroyEffect(ef)
endif
if stage>=266 then
set temp=stage-266
if stage==266 then
call SetUnitAnimationByIndex(u,1)
endif
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))>=200 and LoadBoolean(udg_Hash,GetHandleId(t),$BD4989EA)==false then
if 10+temp>200 then
set tempX=GetUnitX(u)+(((200)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((200)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
else
set tempX=GetUnitX(u)+(((10+temp)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((10+temp)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
endif
if not IsPointPathableALL(tempX,tempY)then
call SaveReal(udg_Hash,GetHandleId(t),$849745EE,GetUnitX(u))
call SaveReal(udg_Hash,GetHandleId(t),$8BB2B122,GetUnitY(u))
endif
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
if ModuloInteger(stage,10)==0 then
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_Nitu.mdl",GetUnitX(u)+(((-200)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((-200)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
call EXEffectMatRotateZ(bj_lastCreatedEffect,tempR)
call EXSetEffectSize(bj_lastCreatedEffect,2.0)
call DestroyEffect(bj_lastCreatedEffect)
endif
elseif LoadBoolean(udg_Hash,GetHandleId(t),$BD4989EA)==false then
call SaveBoolean(udg_Hash,GetHandleId(t),$BD4989EA,true)
call SaveInteger(udg_Hash,GetHandleId(t),$76C18425,stage)
endif
if LoadBoolean(udg_Hash,GetHandleId(t),$BD4989EA)==true then
set tempX=GetUnitX(u)+(((300)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
if stage<=LoadInteger(udg_Hash,GetHandleId(t),$76C18425)+13 then
if stage==LoadInteger(udg_Hash,GetHandleId(t),$76C18425)then
set ef=AddSpecialEffect("war3mapImported\\@AOE_AOEIndicator.mdl",tempX,tempY)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$F8F856EA,ef)
call EXSetEffectSize(ef,7.0)
call EXSetEffectSpeed(ef,2.0)
call EDestroy(ef,0.5)
call SetUnitAnimationByIndex(u,8)
endif
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$F8F856EA)
call EXSetEffectXY(ef,tempX,tempY)
endif
if stage==LoadInteger(udg_Hash,GetHandleId(t),$76C18425)+13 then
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_Effect_Slam.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,5.0)
call EDestroy(bj_lastCreatedEffect,0.1)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,700,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroup(gunit)and IsUnitType(gunit,UNIT_TYPE_HERO)then
if not IsUnitInGroup(gunit,udg_Mujuk)then
call Stun(u,gunit,2.0)
endif
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))
call KnockBackEn(gunit,GetUnitX(gunit)+(((1000)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(gunit)+(((1000)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),0.2,0.02)
endif
if CheckFBossGroupN(gunit)and IsUnitType(gunit,UNIT_TYPE_HERO)then
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*20)+(GetUnitState(gunit,UNIT_STATE_MAX_LIFE)*0.8)
call Damage(u,gunit,dmg,1,0,false,1,0)
endif
endloop
endif
if stage==LoadInteger(udg_Hash,GetHandleId(t),$76C18425)+38 then
call SaveInteger(udg_Hash,GetHandleId(t),$EEBCF22A,LoadInteger(udg_Hash,GetHandleId(t),$EEBCF22A)+1)
call SaveInteger(udg_Hash,$944CCEB0,2,241)
call SaveBoolean(udg_Hash,GetHandleId(t),$BD4989EA,false)
endif
endif
endif
endif
endif
endif
else
set BossBattleN=false
set tempI=0
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
loop
exitwhen tempI==5
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$588728A4+tempI,dummy)
endloop
call RemoveUnit(dummy)
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$94B57B64)
call DestroyEffect(ef)
set t2=LoadTimerHandle(udg_Hash,GetHandleId(t),$1CA61CEC)
if GetHandleId(t2)!=0 then
call FlushChildHashtable(udg_Hash,GetHandleId(t2))
endif
call PauseTimer(t2)
call DestroyTimer(t2)
call FlushChildHashtable(udg_Hash,$944CCEB0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set temp=0
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call BossBar_End(Player(PP[temp]-1))
endloop
endif
call s__party_deallocate((g))
set t=null
set t2=null
set t3=null
set u=null
set dummy=null
set c=null
set l__temp_unit2=null
set ef=null
set ef2=null
endfunction
function DoomGuardSET takes nothing returns nothing
local timer t=CreateTimer()
call SaveInteger(udg_Hash,$944CCEB0,2,1)
call TimerStart(t,0.5,false,function DoomGuardPatton)
set Bossunable=false
set BossunableTime=1
call SetUnitState(Boss,UNIT_STATE_MAX_MANA,10)
set BossBattleN=true
set t=null
endfunction
function GutsTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qh=50+(I2R(LoadInteger(udg_Hashtable,p,$FAFE5485))*100)
local real Wh=GetUnitState(u,ConvertUnitState(1))*0.06
local integer Agi=GetHeroAgi(u,true)
local integer Fdmg=(GetHeroLevel(u)*4)
local integer Qdmg=Agi*(5+(LoadInteger(udg_Hashtable,p,$FAFE5485)*5))+(R2I((GetUnitState(u,ConvertUnitState(0x14))*3)))
local integer Wdmg=(LoadInteger(udg_Hashtable,p,$457BCFC0)*25)
local integer Wdmg2=50+(LoadInteger(udg_Hashtable,p,$457BCFC0)*10)
local integer Edmg=(LoadInteger(udg_Hashtable,p,$6074AEF9)*10)
local integer Edmg2=(LoadInteger(udg_Hashtable,p,$6074AEF9)*2)
local integer Edmg3=10+(LoadInteger(udg_Hashtable,p,$6074AEF9)*2)
local integer Rdmg=Agi*(5+(LoadInteger(udg_Hashtable,p,$BB70E228)*10))+(R2I((GetUnitState(u,ConvertUnitState(0x14))*10)))
local integer Tdmg=R2I(GetUnitState(u,ConvertUnitState(0x14)))*(20+(LoadInteger(udg_Hashtable,p,$132FA1F5)*10))
if LoadBoolean(udg_Hash,p,$27DA0754)then
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"가츠는 스킬을 사용할때 마나가아닌 체력을 소모합니다. 스킬을 연속해서 사용할경우 가츠의 정신력이 깎여나가지만 공격력이 상승하게됩니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00스킬 사용당 일반 공격력 증가|cffffa500 : "+I2S(Fdmg)+" (최대 5회)\n|cff00ff00최대중첩시 일반 공격력 증폭율 증가|cffffa500 : 20%\n|cff00ff00지속시간|cffffa500 : 12초\n|cff00ff00특수|cffffa500 : 일반 공격력 증폭율을 획득한 상태로 사망시 광전사의 갑주에 잡아먹혀 6초간 죽지않고 체력 1로 고정된다.\n|cff00ff00불사 쿨타임|cffffa500 : "+I2S(R2I(120*ct[p]))+"초\n|cffFF0000EX|cffffa500 : 광전사의 갑주에 먹혀도 제어권을 잃지않게된다.")
call EXSetAbilityString(ChSkillW[p],1,ABILITY_DATA_UBERTIP,"|cffFF0000소모 체력 : "+I2S(R2I(Wh))+"|r\n\n가츠가 전투중 일반 공격시 점차 공격속도가 상승하게되며 스킬 사용시 잠시동안 공격속도를 증가시킵니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00매 일반 공격시 공격속도 증가량|cffffa500 : 5%\n|cff00ff00공격속도 최대 증가량|cffffa500 : "+I2S(Wdmg)+"% \n|cff00ff00스킬 사용시 공격속도 증가량|cffffa500 : "+I2S(Wdmg2)+"% \n|cff00ff00스킬 사용시 공격속도 지속시간|cffffa500 : 5초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(5*ct[p]))+"초\n|cffFF0000EX|cffffa500 : 스킬 사용 효과를 제외하고 이 스킬로 상승한 공격속도 5% 마다 일반 공격 증폭률이 1% 증가합니다.")
else
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"가츠는 스킬을 사용할때 마나가아닌 체력을 소모합니다. 스킬을 연속해서 사용할경우 가츠의 정신력이 깎여나가지만 공격력이 상승하게됩니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00스킬 사용당 일반 공격력 증가|cffffa500 : "+I2S(Fdmg)+" (최대 5회)\n|cff00ff00최대중첩시 일반 공격력 증폭율 증가|cffffa500 : 20%\n|cff00ff00지속시간|cffffa500 : 12초\n|cff00ff00특수|cffffa500 : 일반 공격력 증폭율을 획득한 상태로 사망시 광전사의 갑주에 잡아먹혀 6초간 죽지않고 체력 1로 고정되지만 이동 조작을 할수없는 상태가된다.\n|cff00ff00불사 쿨타임|cffffa500 : "+I2S(R2I(120*ct[p]))+"초")
call EXSetAbilityString(ChSkillW[p],1,ABILITY_DATA_UBERTIP,"|cffFF0000소모 체력 : "+I2S(R2I(Wh))+"|r\n\n가츠가 전투중 일반 공격시 점차 공격속도가 상승하게되며 스킬 사용시 잠시동안 공격속도를 증가시킵니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00매 일반 공격시 공격속도 증가량|cffffa500 : 5%\n|cff00ff00공격속도 최대 증가량|cffffa500 : "+I2S(Wdmg)+"% \n|cff00ff00스킬 사용시 공격속도 증가량|cffffa500 : "+I2S(Wdmg2)+"% \n|cff00ff00스킬 사용시 공격속도 지속시간|cffffa500 : 5초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(5*ct[p]))+"초")
endif
call EXSetAbilityString(ChSkillD[p],1,ABILITY_DATA_UBERTIP,"가츠가 기본 공격시 주변 적들에게 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00데미지|cffffa500 : 40%\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"")
call EXSetAbilityString(ChSkillQ[p],1,ABILITY_DATA_UBERTIP,"|cffFF0000소모 체력 : "+I2S(R2I(Qh))+"|r\n\n대상에게 작렬탄을 발사해 대상과 그 주변에 피해를 가한다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffdc143c화염속성 |cffFF9100물리\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00사거리|cffffa500 : 1200\n|cff00ff00스턴|cffffa500 : 1초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초")
call EXSetAbilityString(ChSkillE[p],1,ABILITY_DATA_UBERTIP,"|cffFF0000소모 체력 : 현재체력의 10%|r\n\n가츠가 포효를 내질러 피해 증폭율과 방어력을 상승시킵니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00체력 회복|cffffa500 : 잃은 체력의 10% + 최대체력의 "+I2S(Edmg2)+"% 를 지속시간에 걸쳐서 회복\n|cff00ff00피해 증폭율 획득|cffffa500 : "+I2S(Edmg3)+"% \n|cff00ff00방어력 상승|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00이동속도 증가|cffffa500 : 1초간 40% \n|cff00ff00지속시간|cffffa500 : 10초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(20*ct[p]))+"초")
call EXSetAbilityString(ChSkillR[p],1,ABILITY_DATA_UBERTIP,"|cffFF0000소모 체력 : 현재체력의 12%|r\n\n가츠가 지점으로 점프해서 해당 지점을 내려찍습니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00특수|cffffa500 : 사용중 무적 상태를 유지한다.\n|cff00ff00범위|cffffa500 : "+I2S(R2I(800*Skrange[p]))+"\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(24*ct[p]))+"초")
call EXSetAbilityString(ChSkillT[p],1,ABILITY_DATA_UBERTIP,"|cffFF0000소모 체력 : 현재체력의 15%|r\n\n가츠가 충전 상태에 들어가며 충전상태가 풀리면 적을 크게 베어버립니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Tdmg)+" ~ "+I2S(Tdmg*2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00특수|cffffa500 : 기본 공격 판정을 가지며 시전 당시 내 잃은체력 1%당 공격력 계수가 0.35가 추가로 합산됩니다.\n|cff00ff00사거리|cffffa500 : 350\n|cff00ff00최대 충전시간|cffffa500 : 2.5초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(100*ct[p]))+"초")
set u=null
endfunction
function GutsEX takes integer p returns nothing
call SaveBoolean(udg_Hash,p,$27DA0754,true)
call GutsTT(p)
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_Ex_Bgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_Ex_Get.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call ProduTime(33,4)
endif
call SetPlayerName(Player(8),"|cff800000가츠 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFF0000내 안의 뭔가 흉포한 녀석이 오고있다.. 녀석이 온다..!!")
endfunction
function GutsFreset takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(GutsF),0)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer tempI
call UnitRemoveAbility(u,'A004')
set tempI=LoadInteger(udg_Hashtable,p,$D3AD4DC3)
if tempI>=5 then
set tempI=LoadInteger(Hash_Stat,p,$85EC709A)
call SaveInteger(Hash_Stat,p,$85EC709A,tempI-20)
call TimerStart(udg_PstatTimer[p],0.01,false,null)
endif
call SaveInteger(udg_Hashtable,p,$D3AD4DC3,0)
set u=null
set t=null
endfunction
function GutsEsc takes nothing returns nothing
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,"[시스템] 불사 남은 쿨타임 : "+I2S(R2I(TimerGetRemaining(GutsFuse))))
endfunction
function GutsFuseT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(GutsF),0)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),1)
call SaveInteger(udg_Hash,GetHandleId(t),1,stage+1)
if stage==999 then
call SaveBoolean(udg_Hash,p,$AA0F518A,true)
endif
if stage==200 then
call SetPlayerAlliance(Player(p-1),Player(p-1),ConvertAllianceType(6),true)
call SaveInteger(udg_Hash,GetHandleId(t),1,999)
call TimerStart(GutsFuse,120*ct[p],false,null)
call SaveBoolean(udg_Hash,p,$4D96C329,false)
elseif stage !=999 then
call SetUnitState(u,ConvertUnitState(0),1)
call TimerStart(GutsFuse,0.03,false,null)
endif
endfunction
function GutsQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real temp=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$23E22F84)
local real tempX
local real tempY
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call SetUnitAnimationByIndex(u,10)
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),temp)
set ef=EFsettingUcustom(p,"Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl",dummy,"origin")
call SetUnitScale(dummy,3,1,1)
call SetUnitFlyHeight(dummy,250,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$23E22F84,ef)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_Q_Channel.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,75,tar)
call TimerStart(t,0.02,false,function GutsQ)
endif
if stage !=0 and UnitAlive(dummy)then
set temp=s__Angle_PBP(GetUnitX(dummy),GetUnitY(dummy),GetUnitX(tar),GetUnitY(tar))
set tempX=GetUnitX(dummy)+(((85)*1.0)*Cos(((temp)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((85)*1.0)*Sin(((temp)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call SetUnitFacing(dummy,temp)
call TimerStart(t,0.02,false,function GutsQ)
if s__Distance_PBP(GetUnitX(dummy),GetUnitY(dummy),GetUnitX(tar),GetUnitY(tar))<=150 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_Q_Impact.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,75,tar)
call RemoveUnit(dummy)
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"war3mapImported\\@EF_1 (220).mdl",0,tempX,tempY,2.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_1 (241).mdl",0,tempX,tempY,3*Skrange[p],270,1,0,0,0)
set temp=GetHeroAgi(u,true)*(5+(LoadInteger(udg_Hashtable,p,$FAFE5485)*5))+(GetUnitState(u,ConvertUnitState(0x14))*3)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),500*Skrange[p],null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckPlayerGroup(dummy)then
call Damage(u,dummy,temp,1,1,false,1,'H041')
call Stun(u,dummy,1)
endif
endloop
call RemoveShacull(p)
call DestroyEffect(ef)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
if stage==10 then
call RemoveShacull(p)
endif
call s__party_deallocate((g))
set t=null
set u=null
set tar=null
set dummy=null
set ef=null
endfunction
function GutsW takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer as=LoadInteger(udg_Hash,GetHandleId(t),$53E92ABB)
local integer tempI
set tempI=LoadInteger(Hash_Stat,p,$C18D16A0)
set tempI=tempI-as
call SaveInteger(Hash_Stat,p,$C18D16A0,tempI)
call TimerStart(udg_PstatTimer[p],0.01,false,null)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function GutsR takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real tempR
local real tempX
local real tempY
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==4 then
call UnitRemoveAbility(u,'Abun')
call jump(u,0.75,600,0.01)
call KnockBackXY(u,GetUnitX(tar),GetUnitY(tar),0.75,0.01)
call SetUnitAnimationByIndex(u,5)
call SetUnitTimeScale(u,1.3)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_R_Jump.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,75,u)
endif
if stage>=41 then
call RemoveUnit(tar)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
set tempX=GetUnitX(u)+(((250)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((250)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_SpecialAnimeDustWave.mdl",0,tempX,tempY,6*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Effect_Slam.mdl",0,tempX,tempY,6*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl",1,tempX,tempY,3*Skrange[p],270,1,0,0,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_R.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,75,u)
call SetUnitTimeScale(u,1)
call vibration2(Player(p-1),30,0.1)
set tempR=(GetHeroAgi(u,true)*(5+(LoadInteger(udg_Hashtable,p,$BB70E228))*10))+((GetUnitState(u,ConvertUnitState(0x14))*10))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,800*Skrange[p],null)
loop
set tar=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),tar)
exitwhen tar==null
if CheckPlayerGroup(tar)then
call Damage(u,tar,tempR,1,0,false,1,'H044')
endif
endloop
call RemoveShacull(p)
call SetUnitInvulnerable(u,false)
call GroupRemoveUnit(udg_Mujuk,u)
if GetLocalPlayer()==Player(p-1)and LoadUnitHandle(udg_Hashtable,p,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n"+I2S(R2I(GetUnitState(u,ConvertUnitState(0x20))))+"")
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set stage=999
endif
if stage !=999 then
call SetUnitInvulnerable(u,true)
if GetLocalPlayer()==Player(p-1)and LoadUnitHandle(udg_Hashtable,p,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n|cffFF0000무적")
endif
call EXSetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))
call TimerStart(t,0.02,false,function GutsR)
endif
call s__party_deallocate((g))
set u=null
set t=null
set tar=null
endfunction
function GutsT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real tempR
local real tempR2
local real tempX
local real tempY
local real dmg
if stage !=999 then
call TimerStart(t,0.1,false,function GutsT)
endif
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_T_Charge.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,75,u)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
endif
if GetUnitCurrentOrder(u)==String2OrderIdBJ("attributemodskill")and stage !=50 then
call EFsettingU(p,"war3mapImported\\@EF_az_siwenpf1_w1_hui.mdl",0,u,"origin")
set tempR=LoadReal(udg_Hash,GetHandleId(t),$2E2143B9)
call vibration2(Player(p-1),10,0.09)
if tempR==2.0 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_effect_yuanbanlin_sand2.mdl",0,tempX,tempY,1,270,1,0,0,0)
else
call SaveReal(udg_Hash,GetHandleId(t),$2E2143B9,tempR+0.05)
endif
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))>=400 then
call IssueImmediateOrder(u,"stop")
endif
elseif stage !=50 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_T_Charge.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,true)
set GutsAttack=false
call vibration2(Player(p-1),50,0.1)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$2E2143B9)
set tempR2=(100-LoadReal(udg_Hash,GetHandleId(t),$BAEE8862))*0.35
set dmg=GetUnitState(u,ConvertUnitState(0x14))*(((20+(LoadInteger(udg_Hashtable,p,$132FA1F5)*10))*tempR)+tempR2)
call UnitDamageTarget(u,tar,dmg,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"war3mapImported\\@EF_Suzakuin-17.mdl",0,tempX,tempY,3,GetUnitFacing(u)+140,1,0,0,300)
call EFsettingXY(p,"war3mapImported\\@EF_Suzakuin-17.mdl",0,tempX,tempY,3,GetUnitFacing(u)-140,1,0,0,300)
set tar=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),GetUnitFacing(u)+100)
call EFsettingU(p,"war3mapImported\\@EF_[tx][jn]hengsao.mdl",1,tar,"origin")
call SetUnitVertexColor(tar,100,0,0,0)
call SetUnitScale(tar,4,1,1)
call KillUnit(tar)
call Shacull(p)
call SetUnitAnimationByIndex(u,8)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,50)
call TimerStart(t,0.25,false,function GutsT)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_T.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,75,u)
endif
if stage==50 then
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set u=null
set t=null
set tar=null
endfunction
function GutsSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local integer tempI
local integer tempI2
local real tempX
local real tempY
local real Mana
local boolean Fset=false
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
if sk=='H041' then
set Mana=50+(LoadInteger(udg_Hashtable,p,$FAFE5485)*100)
call SaveReal(udg_Hash,sk,$2113522E,Mana)
if GetUnitState(u,ConvertUnitState(0))<=Mana then
call SetUnitState(u,ConvertUnitState(0),1)
else
call SetUnitState(u,ConvertUnitState(0),(GetUnitState(u,ConvertUnitState(0))-Mana))
endif
call Shacull(p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call TimerStart(t,0.01,false,function GutsQ)
set Fset=true
endif
if sk=='H042' then
call SetUnitAnimationByIndex(u,0)
set Mana=GetUnitState(u,ConvertUnitState(1))*0.06
call SaveReal(udg_Hash,sk,$2113522E,Mana)
if GetUnitState(u,ConvertUnitState(0))<=Mana then
call SetUnitState(u,ConvertUnitState(0),1)
else
call SetUnitState(u,ConvertUnitState(0),(GetUnitState(u,ConvertUnitState(0))-Mana))
endif
set tempI=50+(LoadInteger(udg_Hashtable,p,$457BCFC0)*10)
call SaveInteger(udg_Hash,GetHandleId(t),$53E92ABB,tempI)
set tempI=tempI+LoadInteger(Hash_Stat,p,$C18D16A0)
call SaveInteger(Hash_Stat,p,$C18D16A0,tempI)
call TimerStart(udg_PstatTimer[p],0.01,false,null)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call TimerStart(t,5,false,function GutsW)
call EFsettingU(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,u,"hand right")
call EFsettingU(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,u,"hand left")
call EFsettingU(p,"Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",5,u,"hand right")
call EFsettingU(p,"Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",5,u,"hand left")
call BuffCall(u,'B005',5,false,false)
set Fset=true
endif
if sk=='H043' then
set Mana=(GetUnitState(u,ConvertUnitState(0))*0.1)
call SaveReal(udg_Hash,sk,$2113522E,Mana)
if GetUnitState(u,ConvertUnitState(0))<=Mana then
call SetUnitState(u,ConvertUnitState(0),1)
else
call SetUnitState(u,ConvertUnitState(0),(GetUnitState(u,ConvertUnitState(0))-Mana))
endif
set Mana=GetUnitState(u,ConvertUnitState(1))-GetUnitState(u,ConvertUnitState(0))
set Mana=((Mana*0.1)+(GetUnitStateSwap(ConvertUnitState(1),u)*(I2R(LoadInteger(udg_Hashtable,p,$6074AEF9))*0.02)))*0.1
call recovery(u,u,Mana,10,1,"Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl","origin")
call EFsettingXY(p,"war3mapImported\\@EF_1098.mdl",0,GetUnitX(u),GetUnitY(u),2,270,1,0,0,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_E.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,75,u)
call BuffCall(u,'B003',10,false,false)
call StatChangeX(p,(0.1+(LoadInteger(udg_Hashtable,p,$6074AEF9)*0.02)),"피증",10,"H0431")
call StatChangeX(p,(LoadInteger(udg_Hashtable,p,$6074AEF9)*10),"방어력",10,"H0432")
set Fset=true
call DestroyTimer(t)
endif
if sk=='H044' then
set Mana=(GetUnitState(u,ConvertUnitState(0))*0.12)
call SaveReal(udg_Hash,sk,$2113522E,Mana)
if GetUnitState(u,ConvertUnitState(0))<=Mana then
call SetUnitState(u,ConvertUnitState(0),1)
else
call SetUnitState(u,ConvertUnitState(0),(GetUnitState(u,ConvertUnitState(0))-Mana))
endif
set Mana=GetUnitState(u,ConvertUnitState(1))-GetUnitState(u,ConvertUnitState(0))
set Mana=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1500 then
set tempX=(GetUnitX(u)+(((1500)*1.0)*Cos(((Mana)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((1500)*1.0)*Sin(((Mana)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
set tar=CreateUnit(Player(p-1),'sys9',tempX,tempY,Mana)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call UnitAddAbility(u,'Abun')
call Shacull(p)
call SetUnitInvulnerable(u,true)
call GroupAddUnit(udg_Mujuk,u)
call TimerStart(t,0.00,false,function GutsR)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n|cffFF0000무적")
endif
set Fset=true
endif
if sk=='H045' then
set Mana=(GetUnitState(u,ConvertUnitState(0))*0.15)
call SaveReal(udg_Hash,sk,$2113522E,Mana)
if GetUnitState(u,ConvertUnitState(0))<=Mana then
call SetUnitState(u,ConvertUnitState(0),1)
else
call SetUnitState(u,ConvertUnitState(0),(GetUnitState(u,ConvertUnitState(0))-Mana))
endif
set Mana=GetUnitState(u,ConvertUnitState(1))-GetUnitState(u,ConvertUnitState(0))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveReal(udg_Hash,GetHandleId(t),$2E2143B9,1.0)
call SaveReal(udg_Hash,GetHandleId(t),$BAEE8862,GetUnitLifePercent(u))
call TimerStart(t,0.00,false,function GutsT)
endif
if Fset then
set tempI2=LoadInteger(udg_Hashtable,p,$D3AD4DC3)+1
call SaveInteger(udg_Hashtable,p,$D3AD4DC3,tempI2)
if tempI2>=5 then
set tempI=(GetHeroLevel(u)*20)
call EXSetAbilityDataReal(EXGetUnitAbility(u,'A004'),1,108,I2R(tempI))
call IncUnitAbilityLevel(u,'A004')
call DecUnitAbilityLevel(u,'A004')
endif
if tempI2==5 then
set tempI=LoadInteger(Hash_Stat,p,$85EC709A)
call SaveInteger(Hash_Stat,p,$85EC709A,tempI+20)
elseif tempI2<=4 then
set tempI=tempI2*(GetHeroLevel(u)*4)
call UnitAddAbility(u,'A004')
call EXSetAbilityDataReal(EXGetUnitAbility(u,'A004'),1,108,I2R(tempI))
call IncUnitAbilityLevel(u,'A004')
call DecUnitAbilityLevel(u,'A004')
endif
call TimerStart(udg_PstatTimer[p],0.01,false,null)
call TimerStart(GutsF,12,false,null)
call BuffCall(u,'B006',12,false,false)
call SaveUnitHandle(udg_Hash,GetHandleId(GutsF),0,u)
endif
set u=null
set t=null
set tar=null
endfunction
function GutsST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
set ChSkillD[p]='H040'
set ChSkillQ[p]='H041'
set ChSkillW[p]='H042'
set ChSkillE[p]='H043'
set ChSkillR[p]='H044'
set ChSkillT[p]='H045'
set Range[p]=350
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNFireBolt.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNImpale.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNBattleRoar.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNThunderclap.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_GutsT.blp",0)
endif
set STRup[p]=12
set AGIup[p]=7
set INTup[p]=1
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,1)
call SaveReal(udg_Hashtable,p,$836F3EE3,1.1)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$FCD961C9,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$FCD961C9,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$FCD961C9,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$7053185D,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$FCD961C9,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$FCD961C9,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$D931D9C9,true)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hash,p,$AA0F518A,true)
call SaveUnitHandle(udg_Hash,99,$128C9D86,u)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_GutsF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc광전사의 갑주")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function GutsSkill)
set trg=CreateTrigger()
call TriggerRegisterTimerExpireEvent(trg,GutsF)
call TriggerAddAction(trg,function GutsFreset)
set trg=CreateTrigger()
call TriggerRegisterTimerExpireEvent(trg,GutsFuse)
call TriggerAddAction(trg,function GutsFuseT)
set trg=CreateTrigger()
call TriggerRegisterPlayerEvent(trg,Player(p-1),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(trg,function GutsEsc)
call SaveInteger(udg_Hashtable,p,$5EFF7683,4)
call GutsTT(p)
set u=null
set trg=null
endfunction
function ichigoTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer Agi=GetHeroAgi(u,true)
local integer Qdmg=Agi*(3+(LoadInteger(udg_Hashtable,p,$FAFE5485)*2))
local integer Wdmg=Agi*(5+(LoadInteger(udg_Hashtable,p,$457BCFC0)*5))
local integer Wdmgnum=((LoadInteger(udg_Hash,p,$87EE6875)*1))
local integer Wdmg2=Agi*(Wdmgnum+(LoadInteger(udg_Hashtable,p,$457BCFC0)*8))+(R2I((GetUnitState(u,ConvertUnitState(0x14))*Wdmgnum)))
local integer Rdmg=Agi*(10+(LoadInteger(udg_Hashtable,p,$BB70E228)*20))+(R2I((GetUnitState(u,ConvertUnitState(0x14))*5)))
local real Tdmgnum=GetUnitState(u,ConvertUnitState(0x14))
local integer Tdmg=(Agi*(60+(LoadInteger(udg_Hashtable,p,$132FA1F5)*40)))+R2I(Tdmgnum*(30+(LoadInteger(udg_Hashtable,p,$132FA1F5)*30)))
local integer temp=GetHeroLevel(u)
if temp>=200 then
set temp=200
endif
set temp=temp/50
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Qm*Kirie[p])
set Wdmg=Wdmg+R2I(Wm*Kirie[p])
set Wdmg2=Wdmg2+R2I(Wm*Kirie[p])
set Rdmg=Rdmg+R2I(Rm*Kirie[p])
set Tdmg=Tdmg+R2I(Tm*Kirie[p])
endif
if Em<=0 then
set Em=0
endif
if LoadBoolean(udg_Hash,p,$8B310201)then
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"매 2번째 기본공격을 가할때마다 대상의 위치에 영압을 방출해 대상과 그 주변에 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00데미지|cffffa500 : "+I2S(R2I(Agi*(3+(temp*0.5)))+R2I(GetUnitState(u,ConvertUnitState(0x14))*(2.5+(temp*0.5))))+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00특수 1|cffffa500 : 비영웅 대상에게 140%의 피해\n|cff00ff00특수 2|cffffa500 : 레벨 50당 모든 계수가 0.5 상승한다. (최대 2)\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cffFF0000EX|cffffa500 : 발동 조건 횟수가 2로 감소한다.")
else
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"매 4번째 기본공격을 가할때마다 대상의 위치에 영압을 방출해 대상과 그 주변에 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00데미지|cffffa500 : "+I2S(R2I(Agi*(3+(temp*0.5)))+R2I(GetUnitState(u,ConvertUnitState(0x14))*(2.5+(temp*0.5))))+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00특수 1|cffffa500 : 비영웅 대상에게 140%의 피해\n|cff00ff00특수 2|cffffa500 : 레벨 50당 모든 계수가 0.5 상승한다. (최대 2)\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"")
endif
call EXSetAbilityString(ChSkillQ[p],1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n이치고가 주변에 영압을 방출해서 피해를 입히고 자신의 공격속도를 상승시킵니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00공격속도 증가|cffffa500 : "+I2S(20+(LoadInteger(udg_Hashtable,p,$FAFE5485)*15))+"%\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00지속시간|cffffa500 : 6초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초")
call EXSetAbilityString(ChSkillW[p],1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n이치고가 약진후 주변을 베고 검기를 발산해 전방을 공격합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00베기 데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00검기 데미지|cffffa500 : "+I2S(Wdmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00베기 범위|cffffa500 : "+I2S(R2I(300*Skrange[p]))+"\n|cff00ff00검기 범위|cffffa500 : "+I2S(R2I(100*Skrange[p]))+" ~  "+I2S(R2I(400*Skrange[p]))+"\n|cff00ff00검기 거리|cffffa500 : 750\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(8*ct[p]))+"초")
call EXSetAbilityString(ChSkillE[p],1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n사용 지점 방향으로 빠르게 이동합니다. 이동중엔 무적 상태입니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I((14-LoadInteger(udg_Hashtable,p,$6074AEF9))*ct[p]))+"초")
call EXSetAbilityString(ChSkillR[p],1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n자신의 검에 월아를 감은후 해당 지점을 내리쳐서 광범위하게 공격합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00범위|cffffa500 : "+I2S(R2I(900*Skrange[p]))+"\n|cff00ff00사거리|cffffa500 : 600\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(32*ct[p]))+"초")
call EXSetAbilityString(ChSkillT[p],1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n사용시 지점으로 돌진후 처음으로 벤 적을 여러번 공격합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00특수1|cffffa500 : 사용하는동안 무적 상태를 유지한다.\n|cff00ff00특수2|cffffa500 : 적중 실패시 쿨타임을 80% 반환받는다.\n|cff00ff00사거리|cffffa500 : 1100\n|cff00ff00지연시간|cffffa500 : 0.3초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(100*ct[p]))+"초")
set u=null
endfunction
function ichigoEX takes integer p returns nothing
local unit u=Charcter[p]
local real tempX
local real tempY
local integer temp
local real temp2
call SaveBoolean(udg_Hash,p,$8B310201,true)
call EXSetAbilityString('H010',1,ABILITY_DATA_UBERTIP,"각각의 레벨을 달성할때마다 다음 기능들이 해금됩니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00레벨 10|cffffa500 : 내 기본 공격 간격이 0.04초 감소합니다.\n|cff00ff00레벨 30|cffffa500 : 내 기본 공격 간격이 0.06초 감소합니다.\n|cff00ff00레벨 60|cffffa500 : 이 스킬을 눌러서 20초간 호로화가 가능해집니다. 모든 피해 증폭율이 10% 상승하고 공격속도와 이동속도가 10% 상승합니다. (쿨타임 : 45초)\n|cffFF0000EX|cffffa500 : 레벨 99 이상일때 레벨업시 호로화가 비활성화되고 영구적으로 완전 호로화 상태가 되며 이 능력은 각성합니다.")
call ichigoTT(p)
set Attack2[p]=2
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_ichigoEXgetBgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_ichigoEXget.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call ProduTime(30,4)
endif
call SetPlayerName(Player(8),"|cffFF8200쿠로사키 이치고 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"쿠로사키 이치고... 사신 대행이다. 간다!")
if GetHeroLevel(u)>=100 and LoadInteger(udg_Hash,p,$87EE6875)==3 then
call SaveInteger(udg_Hash,p,$87EE6875,4)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p+1,"war3mapImported\\@EF_Vinz Blast Death.mdl",0,tempX,tempY,2,0,1,0,0,0)
call EFsettingXY(p+1,"war3mapImported\\@EF_lvupRed.mdl",0,tempX,tempY,2,0,1,0,0,0)
call EFsettingXY(p+1,"war3mapImported\\@EF_DevouringSwarmEffect.mdl",0,tempX,tempY,1.5,0,1,0,0,0)
call CharacterEXmodelSet(u,"war3mapImported\\@C_Ichigo6.mdl")
set Model[p]="war3mapImported\\@C_Ichigo6.mdl"
call AddUnitAnimationProperties(u,"Alternate",false)
call SaveBoolean(udg_Hash,p,$AB91EED3,false)
set temp=LoadInteger(Hash_Stat,p,$C18D16A0)
call SaveInteger(Hash_Stat,p,$C18D16A0,temp+50)
set temp=LoadInteger(Hash_Stat,p,$924944F9)
call SaveInteger(Hash_Stat,p,$924944F9,temp+10)
set temp2=LoadReal(Hash_Stat,p,$164C40C9)
call SaveReal(Hash_Stat,p,$164C40C9,temp2+0.1)
call TimerStart(udg_infoRe[p],0,false,null)
call EXSetAbilityString('H010',1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNus10.blp")
call EXSetAbilityString('H010',1,ABILITY_DATA_TIP,"|cff48d1cc완전 호로화")
call EXSetAbilityString('H010',1,ABILITY_DATA_UBERTIP,"|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00공격 간격 감소|cffffa500 : 0.2\n|cff00ff00공격속도 증가|cffffa500 : 50%\n|cff00ff00이동속도 증가|cffffa500 : 10%\n|cff00ff00모든 피해 증폭율 증가|cffffa500 : 10%")
set temp2=LoadReal(udg_Hashtable,p,$46D2FE81)-0.1
call SetUnitState(u,ConvertUnitState(0x25),temp2)
call SaveReal(udg_Hashtable,p,$46D2FE81,temp2)
endif
set u=null
endfunction
function ichigoSkillD takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer tempI
local real tempR
if stage==0 then
call EXSetAbilityState(EXGetUnitAbility(u,'H010'),ABILITY_STATE_COOLDOWN,3)
endif
if stage==1 then
set tempI=LoadInteger(Hash_Stat,p,$C18D16A0)
call SaveInteger(Hash_Stat,p,$C18D16A0,tempI-10)
set tempI=LoadInteger(Hash_Stat,p,$924944F9)
call SaveInteger(Hash_Stat,p,$924944F9,tempI-10)
set tempR=LoadReal(Hash_Stat,p,$164C40C9)
call SaveReal(Hash_Stat,p,$164C40C9,tempR-0.1)
call TimerStart(udg_infoRe[p],0,false,null)
endif
if stage==2 then
set tempI=LoadInteger(Hash_Stat,p,$C18D16A0)
set tempI=tempI-LoadInteger(udg_Hash,GetHandleId(t),$E5C298B0)
call SaveInteger(Hash_Stat,p,$C18D16A0,tempI)
call TimerStart(udg_infoRe[p],0,false,null)
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set u=null
set t=null
endfunction
function ichigoSkillW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX
local real tempY
local integer tempI
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer num=LoadInteger(udg_Hash,p,$87EE6875)
local group gl=CreateGroup()
local unit c
local integer WLv=LoadInteger(udg_Hashtable,p,$457BCFC0)
local real dmg1=GetHeroAgi(u,true)*(5+WLv*5)
local real dmg2=GetHeroAgi(u,true)*((WLv*8)+(num*1))+(GetUnitState(u,ConvertUnitState(0x14))*num)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,0.02,false,function ichigoSkillW)
if stage==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ichigoW1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
if num==2 or num==3 then
call SetUnitAnimationByIndex(u,7)
elseif num<2 then
call SetUnitAnimationByIndex(u,1)
elseif num==4 then
call SetUnitAnimationByIndex(u,4)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ichigoWlv41.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
endif
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage<=15 then
set tempX=GetUnitX(u)+(((12)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((12)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
endif
if stage==20 then
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,300*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if UnitAlive(c)and IsUnitEnemy(c,Player(p-1))and not IsUnitType(c,UNIT_TYPE_MECHANICAL)and not IsUnitInGroup(c,gl)then
call Damage(u,c,dmg1,1,0,false,1,'H012')
endif
endloop
call SetUnitTimeScale(u,1)
set tempX=GetUnitX(u)+(((-100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-100)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_1166.mdl",0,tempX,tempY,1.2*Skrange[p],tempR-180,1,0,0,-100)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_PA_C.mdl",0,tempX,tempY,2*Skrange[p],tempR,1,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,tempX,tempY,2,tempR,1,90,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",0,tempX,tempY,2,tempR-180,1,90,0,0)
if num==2 or num==3 then
call SetUnitAnimationByIndex(u,7)
elseif num<2 then
call SetUnitAnimationByIndex(u,1)
elseif num==4 then
call SetUnitAnimationByIndex(u,10)
endif
endif
if stage>=21 and stage<25 then
set tempX=GetUnitX(u)+(((50)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((50)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_AZ_PA_C.mdl",0,tempX,tempY,2*Skrange[p],tempR,1,0,0,0)
endif
if stage==40 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ichigoW_attack2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
if num==4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ichigoWlv42.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ichigoW2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
endif
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage==50 then
set gl=LoadGroupHandle(udg_Hash,GetHandleId(t),$CC729F44)
set tempX=GetUnitX(u)+(((50)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((50)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,100*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if UnitAlive(c)and IsUnitEnemy(c,Player(p-1))and not IsUnitType(c,UNIT_TYPE_MECHANICAL)and not IsUnitInGroup(c,gl)then
call Damage(u,c,dmg2,1,0,false,1,'H012')
call GroupAddUnit(gl,c)
endif
endloop
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,250*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if UnitAlive(c)and IsUnitEnemy(c,Player(p-1))and not IsUnitType(c,UNIT_TYPE_MECHANICAL)and not IsUnitInGroup(c,gl)then
call Damage(u,c,dmg2,1,0,false,1,'H012')
call GroupAddUnit(gl,c)
endif
endloop
set tempX=GetUnitX(u)+(((250)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((250)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,400*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if UnitAlive(c)and IsUnitEnemy(c,Player(p-1))and not IsUnitType(c,UNIT_TYPE_MECHANICAL)and not IsUnitInGroup(c,gl)then
call Damage(u,c,dmg2,1,0,false,1,'H012')
call GroupAddUnit(gl,c)
endif
endloop
set tempX=GetUnitX(u)+(((50)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((50)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set tempI=0
loop
exitwhen tempI==2
set tempI=tempI+1
if num<2 then
call EFsettingLOCDD(p,"war3mapImported\\@EF_getsugabluenew.mdl",tempX,tempY,1,tempR+(tempI*20),1,0,0,700*Skrange[p],0.1,0.01)
call EFsettingLOCDD(p,"war3mapImported\\@EF_getsugabluenew.mdl",tempX,tempY,1,tempR+(tempI*15),1,0,0,700*Skrange[p],0.1,0.01)
call EFsettingLOCDD(p,"war3mapImported\\@EF_getsugabluenew.mdl",tempX,tempY,1,tempR-(tempI*20),1,0,0,700*Skrange[p],0.1,0.01)
call EFsettingLOCDD(p,"war3mapImported\\@EF_getsugabluenew.mdl",tempX,tempY,1,tempR-(tempI*15),1,0,0,700*Skrange[p],0.1,0.01)
else
call EFsettingLOCDD(p,"war3mapImported\\@EF_getsugabluenew2.mdl",tempX,tempY,1,tempR+(tempI*20),1,0,0,700*Skrange[p],0.1,0.01)
call EFsettingLOCDD(p,"war3mapImported\\@EF_getsugabluenew2.mdl",tempX,tempY,1,tempR+(tempI*15),1,0,0,700*Skrange[p],0.1,0.01)
call EFsettingLOCDD(p,"war3mapImported\\@EF_getsugabluenew2.mdl",tempX,tempY,1,tempR-(tempI*20),1,0,0,700*Skrange[p],0.1,0.01)
call EFsettingLOCDD(p,"war3mapImported\\@EF_getsugabluenew2.mdl",tempX,tempY,1,tempR-(tempI*15),1,0,0,700*Skrange[p],0.1,0.01)
endif
endloop
if num==1 or num==0 then
call EFsettingLOCDD(p,"war3mapImported\\@EF_getsugabluenew.mdl",tempX,tempY,1,tempR,1,0,0,725*Skrange[p],0.1,0.01)
call EFsettingXY(p,"war3mapImported\\@EF_Waterupcaster1c.mdl",0,tempX,tempY,3*Skrange[p],tempR,1,90,0,0)
else
call EFsettingLOCDD(p,"war3mapImported\\@EF_getsugabluenew2.mdl",tempX,tempY,1,tempR,1,0,0,725*Skrange[p],0.1,0.01)
call EFsettingXY(p,"war3mapImported\\@EF_DoomBlackRed.mdl",0,tempX,tempY,3*Skrange[p],tempR,1,90,0,0)
endif
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call DestroyGroup(gl)
call s__party_deallocate((g))
set gl=null
set u=null
set c=null
set t=null
endfunction
function ichigoSkillE takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempF=LoadReal(udg_Hash,GetHandleId(t),$313FB1F)
local real tempX
local real tempY
local real ELv=I2R(LoadInteger(udg_Hashtable,p,$6074AEF9))
local unit dummy
local integer num=LoadInteger(udg_Hash,p,$87EE6875)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==1 then
call CTset(u,p,'H013',(14-ELv))
endif
if stage<=9 then
if tempF<=40 then
set stage=10
else
if num==2 or num==3 then
call SetUnitAnimationByIndex(u,9)
else
call SetUnitAnimation(u,"walk")
endif
call SetUnitInvulnerable(u,true)
if GetLocalPlayer()==Player(p-1)and LoadUnitHandle(udg_Hashtable,p,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n|cffFF0000무적")
endif
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),tempR)
call imagedummy(p,dummy,0.12,2,"walk",Model[p])
call invisible(dummy,40.00,100.00,0.12,0.01)
set tempX=GetUnitX(u)+(((60)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((60)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call SaveReal(udg_Hash,GetHandleId(t),$313FB1F,tempF-60)
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
endif
endif
if stage>=10 then
call SetUnitInvulnerable(u,false)
if GetLocalPlayer()==Player(p-1)and LoadUnitHandle(udg_Hashtable,p,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n"+I2S(R2I(GetUnitState(u,ConvertUnitState(0x20))))+"")
endif
call RemoveShacull(p)
call GroupRemoveUnit(udg_Mujuk,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call TimerStart(t,0.02,false,function ichigoSkillE)
endif
set t=null
set u=null
set dummy=null
endfunction
function ichigoSkillR takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempF=LoadReal(udg_Hash,GetHandleId(t),$313FB1F)
local real tempX
local real tempY
local integer num=LoadInteger(udg_Hash,p,$87EE6875)
local unit c
local integer RLv=LoadInteger(udg_Hashtable,p,$BB70E228)
local real dmg=R2I(GetHeroAgi(u,true)*(10+(RLv*20)))+(GetUnitState(u,ConvertUnitState(0x14))*5)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage<=10 then
if tempF<=40 then
set stage=10
else
if num==2 or num==3 then
call SetUnitAnimationByIndex(u,7)
else
call SetUnitAnimationByIndex(u,3)
endif
set tempX=GetUnitX(u)+(((60)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((60)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call SaveReal(udg_Hash,GetHandleId(t),$313FB1F,tempF-60)
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
endif
endif
if stage==10 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ichigoR_attack.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_KingLeoric(SDWZ)_R.mdl",0,GetUnitX(u),GetUnitY(u),4,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_[DZ.Spell]006.mdl",0,GetUnitX(u),GetUnitY(u),1.75*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Vinz Blast Death.mdl",0,GetUnitX(u),GetUnitY(u),3*Skrange[p],270,1,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),900*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if UnitAlive(c)and IsUnitEnemy(c,Player(p-1))and not IsUnitType(c,UNIT_TYPE_MECHANICAL)then
call Damage(u,c,dmg,1,0,false,1,'H014')
endif
endloop
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call TimerStart(t,0.02,false,function ichigoSkillR)
endif
call s__party_deallocate((g))
set u=null
set c=null
set t=null
endfunction
function ichigoSkillT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer stage2
local integer temp
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempF=LoadReal(udg_Hash,GetHandleId(t),$313FB1F)
local real TLv=I2R(LoadInteger(udg_Hashtable,p,$132FA1F5))
local unit dummy
local unit dummy2
local integer num=LoadInteger(udg_Hash,p,$87EE6875)
local unit c
local unit d=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer g=s__party_create()
local real Agi=I2R(GetHeroInt(u,true))
local real Tdmg=(Agi*(70+(LoadInteger(udg_Hashtable,p,$132FA1F5)*30)))
local real tempX
local real tempY
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==1 then
if num==2 or num==3 then
call SetUnitAnimationByIndex(u,17)
else
call SetUnitAnimationByIndex(u,14)
endif
call SetUnitTimeScale(u,3)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ichigoT3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage==15 then
if num==2 or num==3 then
call SetUnitAnimationByIndex(u,7)
else
call SetUnitAnimationByIndex(u,3)
endif
call EFsettingXY(p,"Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",0,GetUnitX(u),GetUnitY(u),2,tempR,1,0,0,0)
endif
if stage>=15 and stage<=24 then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),180,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if UnitAlive(c)and IsUnitEnemy(c,Player(p-1))and not IsUnitType(c,UNIT_TYPE_MECHANICAL)then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,c)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,25)
endif
endloop
set tempX=GetUnitX(u)+(((110)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((110)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
endif
if stage==25 then
if d==null then
set stage=999
call EXSetAbilityState(EXGetUnitAbility(u,'H015'),ABILITY_STATE_COOLDOWN,20)
else
set temp=600
set tempX=GetUnitX(d)+(((temp)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((temp)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_tx-shqy10-E.mdl",0,tempX,tempY,2,tempR,1,0,0,0)
loop
exitwhen IsPointPathableALL(tempX,tempY)
set temp=temp-30
set tempX=GetUnitX(d)+(((temp)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((temp)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
endloop
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
endif
if stage==35 then
call SaveInteger(udg_Hash,GetHandleId(t),$DA3F63FF,1)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ichigoT1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call invisible(u,50.00,100.00,0.20,0.01)
call SetUnitFacing(u,tempR-180)
endif
if stage==45 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ichigoT_attack2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage>=45 and stage<=154 then
set stage2=LoadInteger(udg_Hash,GetHandleId(t),$DA3F63FF)
call SaveInteger(udg_Hash,GetHandleId(t),$DA3F63FF,stage2+1)
if stage2==6 or stage2==11 or stage2==17 or stage2==23 then
call Damage(u,d,Tdmg,1,0,false,0.037,'H015')
endif
if stage2==1 then
set tempR=GetRandomReal(270,340)
call SaveReal(udg_Hash,GetHandleId(t),$66E7AB09,tempR)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_dash(particle)_ichigo.mdl",0,tempX,tempY,2.5,tempR-180,1,0,0,0)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,tempR-180)
if num==2 or num==3 then
call imagedummy(p,dummy,0.28,2,"Alternate attack",Model[p])
else
call imagedummy(p,dummy,0.28,2,"attack",Model[p])
endif
call invisible(dummy,40.00,100.00,0.28,0.01)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR-180)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR-180)*1.0)*bj_DEGTORAD))
call KnockBackXY(dummy,tempX,tempY,0.2,0.01)
set tempR=GetRandomReal(0,90)
call SaveReal(udg_Hash,GetHandleId(t),$36018825,tempR)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_dash(particle)_ichigo.mdl",0,tempX,tempY,2.5,tempR-180,1,0,0,0)
set dummy2=CreateUnit(Player(p-1),'sys9',tempX,tempY,tempR-180)
if num==2 or num==3 then
call imagedummy(p,dummy2,0.28,2,"alternate attack",Model[p])
else
call imagedummy(p,dummy2,0.28,2,"attack",Model[p])
endif
call invisible(dummy2,40.00,100.00,0.28,0.01)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$588728A4,dummy2)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR+180)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR+180)*1.0)*bj_DEGTORAD))
call KnockBackXY(dummy2,tempX,tempY,0.2,0.01)
endif
if stage2==6 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$66E7AB09)-180
set tempX=GetUnitX(d)
set tempY=GetUnitY(d)
call EFsettingXY(p,"war3mapImported\\@EF_tx-shqy10-E.mdl",0,tempX,tempY,2,tempR,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding-blackred2.mdl",0,tempX,tempY,1,tempR,1,0,0,0)
set dummy2=LoadUnitHandle(udg_Hash,GetHandleId(t),$588728A4)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$36018825)+180
call EFsettingXY(p,"war3mapImported\\@EF_tx-shqy10-E.mdl",0,tempX,tempY,2,tempR,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_BloodSlashCRIT.mdl",0,tempX,tempY,2.25,tempR,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding-blackred2.mdl",0,tempX,tempY,1,tempR,1,0,0,0)
endif
if stage2==7 then
set tempR=GetRandomReal(0,90)
call SaveReal(udg_Hash,GetHandleId(t),$66E7AB09,tempR)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_dash(particle)_ichigo.mdl",0,tempX,tempY,2.5,tempR-180,1,0,0,0)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,tempR+180)
if num==2 or num==3 then
call imagedummy(p,dummy,0.28,2,"alternate attack",Model[p])
else
call imagedummy(p,dummy,0.28,2,"attack",Model[p])
endif
call invisible(dummy,40.00,100.00,0.28,0.01)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR+180)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR+180)*1.0)*bj_DEGTORAD))
call KnockBackXY(dummy,tempX,tempY,0.2,0.01)
set tempR=GetRandomReal(270,340)
call SaveReal(udg_Hash,GetHandleId(t),$36018825,tempR)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_dash(particle)_ichigo.mdl",0,tempX,tempY,2.5,tempR-180,1,0,0,0)
set dummy2=CreateUnit(Player(p-1),'sys9',tempX,tempY,tempR-180)
if num==2 or num==3 then
call imagedummy(p,dummy2,0.28,2,"Alternate attack",Model[p])
else
call imagedummy(p,dummy2,0.28,2,"attack",Model[p])
endif
call invisible(dummy2,40.00,100.00,0.28,0.01)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$588728A4,dummy2)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR-180)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR-180)*1.0)*bj_DEGTORAD))
call KnockBackXY(dummy2,tempX,tempY,0.2,0.01)
endif
if stage2==11 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$66E7AB09)+180
set tempX=GetUnitX(d)
set tempY=GetUnitY(d)
call EFsettingXY(p,"war3mapImported\\@EF_tx-shqy10-E.mdl",0,tempX,tempY,2,tempR,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding-blackred2.mdl",0,tempX,tempY,1,tempR,1,0,0,0)
set dummy2=LoadUnitHandle(udg_Hash,GetHandleId(t),$588728A4)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$36018825)-180
call EFsettingXY(p,"war3mapImported\\@EF_tx-shqy10-E.mdl",0,tempX,tempY,2,tempR,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_BloodSlashCRIT.mdl",0,tempX,tempY,2.25,tempR,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding-blackred2.mdl",0,tempX,tempY,1,tempR,1,0,0,0)
endif
if stage2==12 then
set tempR=GetRandomReal(90,180)
call SaveReal(udg_Hash,GetHandleId(t),$66E7AB09,tempR)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_dash(particle)_ichigo.mdl",0,tempX,tempY,2.5,tempR-180,1,0,0,0)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,tempR+180)
if num==2 or num==3 then
call imagedummy(p,dummy,0.28,2,"alternate attack",Model[p])
else
call imagedummy(p,dummy,0.28,2,"attack",Model[p])
endif
call invisible(dummy,40.00,100.00,0.28,0.01)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR+180)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR+180)*1.0)*bj_DEGTORAD))
call KnockBackXY(dummy,tempX,tempY,0.2,0.01)
set tempR=GetRandomReal(180,270)
call SaveReal(udg_Hash,GetHandleId(t),$36018825,tempR)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_dash(particle)_ichigo.mdl",0,tempX,tempY,2.5,tempR-180,1,0,0,0)
set dummy2=CreateUnit(Player(p-1),'sys9',tempX,tempY,tempR-180)
if num==2 or num==3 then
call imagedummy(p,dummy2,0.28,2,"alternate attack",Model[p])
else
call imagedummy(p,dummy2,0.28,2,"attack",Model[p])
endif
call invisible(dummy2,40.00,100.00,0.18,0.01)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$588728A4,dummy2)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR-180)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR-180)*1.0)*bj_DEGTORAD))
call KnockBackXY(dummy2,tempX,tempY,0.2,0.01)
endif
if stage2==17 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$66E7AB09)+180
set tempX=GetUnitX(d)
set tempY=GetUnitY(d)
call EFsettingXY(p,"war3mapImported\\@EF_tx-shqy10-E.mdl",0,tempX,tempY,2,tempR,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding-blackred2.mdl",0,tempX,tempY,1,tempR,1,0,0,0)
set dummy2=LoadUnitHandle(udg_Hash,GetHandleId(t),$588728A4)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$36018825)-180
call EFsettingXY(p,"war3mapImported\\@EF_tx-shqy10-E.mdl",0,tempX,tempY,2,tempR,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_BloodSlashCRIT.mdl",0,tempX,tempY,2.25,tempR,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding-blackred2.mdl",0,tempX,tempY,1,tempR,1,0,0,0)
endif
if stage2==18 then
set tempR=GetRandomReal(180,270)
call SaveReal(udg_Hash,GetHandleId(t),$66E7AB09,tempR)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_dash(particle)_ichigo.mdl",0,tempX,tempY,2.5,tempR-180,1,0,0,0)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,tempR-180)
if num==2 or num==3 then
call imagedummy(p,dummy,0.28,2,"alternate attack",Model[p])
else
call imagedummy(p,dummy,0.28,2,"attack",Model[p])
endif
call invisible(dummy,40.00,100.00,0.18,0.01)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR-180)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR-180)*1.0)*bj_DEGTORAD))
call KnockBackXY(dummy,tempX,tempY,0.2,0.01)
set tempR=GetRandomReal(90,180)
call SaveReal(udg_Hash,GetHandleId(t),$66E7AB09,tempR)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_dash(particle)_ichigo.mdl",0,tempX,tempY,2.5,tempR-180,1,0,0,0)
set dummy2=CreateUnit(Player(p-1),'sys9',tempX,tempY,tempR+180)
if num==2 or num==3 then
call imagedummy(p,dummy2,0.28,2,"alternate attack",Model[p])
else
call imagedummy(p,dummy2,0.28,2,"attack",Model[p])
endif
call invisible(dummy2,40.00,100.00,0.28,0.01)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$588728A4,dummy2)
set tempX=GetUnitX(d)+(((800)*1.0)*Cos(((tempR+180)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((800)*1.0)*Sin(((tempR+180)*1.0)*bj_DEGTORAD))
call KnockBackXY(dummy2,tempX,tempY,0.2,0.01)
endif
if stage2==23 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$66E7AB09)-180
set tempX=GetUnitX(d)
set tempY=GetUnitY(d)
call EFsettingXY(p,"war3mapImported\\@EF_tx-shqy10-E.mdl",0,tempX,tempY,2,tempR,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding-blackred2.mdl",0,tempX,tempY,1,tempR,1,0,0,0)
call SaveInteger(udg_Hash,GetHandleId(t),$DA3F63FF,1)
set dummy2=LoadUnitHandle(udg_Hash,GetHandleId(t),$588728A4)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$36018825)+180
call EFsettingXY(p,"war3mapImported\\@EF_tx-shqy10-E.mdl",0,tempX,tempY,2,tempR,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_BloodSlashCRIT.mdl",0,tempX,tempY,2.25,tempR,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding-blackred2.mdl",0,tempX,tempY,1,tempR,1,0,0,0)
endif
endif
if stage==155 then
call visible(u,60.00,0.00,0.20,0.01)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ichigoT2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ichigoT_attack.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage==170 then
if num==2 or num==3 then
call SetUnitAnimationByIndex(u,7)
else
call SetUnitAnimationByIndex(u,3)
endif
set temp=600
set tempX=GetUnitX(d)+(((temp)*1.0)*Cos(((tempR-180)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((temp)*1.0)*Sin(((tempR-180)*1.0)*bj_DEGTORAD))
loop
exitwhen IsPointPathableALL(tempX,tempY)
set temp=temp-30
set tempX=GetUnitX(d)+(((temp)*1.0)*Cos(((tempR-180)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((temp)*1.0)*Sin(((tempR-180)*1.0)*bj_DEGTORAD))
endloop
call KnockBackXY(u,tempX,tempY,0.2,0.01)
endif
if stage==175 then
call EFsettingXY(p,"war3mapImported\\@EF_rb4.mdl",0,GetUnitX(d),GetUnitY(d),10,tempR-180,1,0,45,400)
call EFsettingXY(p,"war3mapImported\\@EF_rb4.mdl",0,GetUnitX(d),GetUnitY(d),10,tempR-180,1,0,325,400)
call Damage(u,d,(GetUnitState(u,ConvertUnitState(0x14))*(30+(LoadInteger(udg_Hashtable,p,$132FA1F5)*30))),1,0,false,1,'H015')
call SetUnitFacing(u,tempR)
endif
if stage==180 then
set stage=999
endif
if stage==999 then
call RemoveShacull(p)
call SetUnitInvulnerable(u,false)
if GetLocalPlayer()==Player(p-1)and LoadUnitHandle(udg_Hashtable,p,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n"+I2S(R2I(GetUnitState(u,ConvertUnitState(0x20))))+"")
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call SetUnitInvulnerable(u,true)
if GetLocalPlayer()==Player(p-1)and LoadUnitHandle(udg_Hashtable,p,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n|cffFF0000무적")
endif
call TimerStart(t,0.02,false,function ichigoSkillT)
endif
if not UnitAlive(u)or not UnitAlive(d)and stage>=25 then
set stage=0
call RemoveShacull(p)
call endMujuk(p,u)
call SetUnitVertexColor(u,255,255,255,255)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
elseif s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(d),GetUnitY(d))>=5000 and stage>=25 then
set stage=0
call RemoveShacull(p)
call endMujuk(p,u)
call SetUnitVertexColor(u,255,255,255,255)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set c=null
set t=null
set u=null
set d=null
set dummy=null
set dummy2=null
endfunction
function ichigoSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local real tempR
local integer tempI
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local unit c
local integer g=s__party_create()
local real Mana
if sk=='H010' then
if LoadInteger(udg_Hash,p,$87EE6875)==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ichigoD.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call EFsettingU(p,"war3mapImported\\@EF_Hollow_Mask.mdx",15.5,Charcter[p],"head")
call EFsettingU(p,"war3mapImported\\@EF_Hollow_Mask_Dusk.mdx",20,Charcter[p],"head")
call EFsettingU(p,"war3mapImported\\@EF_Vinz Blast Death.mdl",0,Charcter[p],"origin")
set tempI=LoadInteger(Hash_Stat,p,$C18D16A0)+50
call SaveInteger(Hash_Stat,p,$C18D16A0,tempI)
set tempI=LoadInteger(Hash_Stat,p,$924944F9)+10
call SaveInteger(Hash_Stat,p,$924944F9,tempI)
set tempR=LoadReal(Hash_Stat,p,$164C40C9)+0.1
call SaveReal(Hash_Stat,p,$164C40C9,tempR)
call StartTimerBJ(udg_infoRe[p],false,0.00)
call TimerStart(t,20,false,function ichigoSkillD)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
else
call TimerStart(t,0.01,false,function ichigoSkillD)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
endif
endif
if sk=='H011' then
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call EFsettingXY(p,"war3mapImported\\@EF_NullBomb.mdl",0,GetUnitX(u),GetUnitY(u),1.5*(Skrange[p]),270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Vinz Nova Ice.mdl",0,GetUnitX(u),GetUnitY(u),1.5*(Skrange[p]),270,1.6,0,0,0)
set tempR=GetHeroInt(u,true)*(3+(LoadInteger(udg_Hashtable,p,$FAFE5485)*2))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if UnitAlive(c)and IsUnitEnemy(c,Player(p-1))and not IsUnitType(c,UNIT_TYPE_MECHANICAL)then
call Damage(u,c,tempR,1,0,false,1,'H011')
endif
endloop
call BuffCall(u,'B000',6,false,false)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,2)
set tempI=(20+LoadInteger(udg_Hashtable,p,$FAFE5485)*15)
call SaveInteger(udg_Hash,GetHandleId(t),$E5C298B0,tempI)
set tempI=tempI+LoadInteger(Hash_Stat,p,$C18D16A0)
call SaveInteger(Hash_Stat,p,$C18D16A0,tempI)
call StartTimerBJ(udg_infoRe[p],false,0.00)
call TimerStart(t,6,false,function ichigoSkillD)
endif
if sk=='H012' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call TimerStart(t,0.01,false,function ichigoSkillW)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call SaveGroupHandle(udg_Hash,GetHandleId(t),$CC729F44,CreateGroup())
call SetUnitTimeScale(u,2)
call Shacull(p)
endif
if sk=='H013' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
if Mana>=0 then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
endif
call TimerStart(t,0.01,false,function ichigoSkillE)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
set tempR=s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$313FB1F,tempR)
call SetUnitInvulnerable(u,true)
call GroupAddUnit(udg_Mujuk,u)
call Shacull(p)
endif
if sk=='H014' then
set Mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call TimerStart(t,0.01,false,function ichigoSkillR)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
set tempR=s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$313FB1F,tempR)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ichigoR.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Shacull(p)
endif
if sk=='H015' then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call TimerStart(t,0.02,false,function ichigoSkillT)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
set tempR=s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$313FB1F,tempR)
call EFsettingXY(p,"war3mapImported\\@EF_SpecialAnimeDustWave.mdl",0,GetUnitX(u),GetUnitY(u),2,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Nevermore_R1_Gather (1).mdl",0.3,GetUnitX(u),GetUnitY(u),3,270,1,0,0,-200)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Nevermore_R1_Gather (1).mdl",0.3,GetUnitX(u),GetUnitY(u),3,270,1,0,0,-200)
call Shacull(p)
endif
call s__party_deallocate((g))
set u=null
set t=null
set c=null
endfunction
function ichigoLvUP takes nothing returns nothing
local unit u=GetLevelingUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer lv=GetUnitLevel(u)
local real tempX
local real tempY
local real temp2
local integer temp
if lv>=10 and LoadInteger(udg_Hash,p,$87EE6875)==0 then
call SaveInteger(udg_Hash,p,$87EE6875,1)
call EFsettingU(p,"war3mapImported\\@EF_lvupBlue.mdl",0,u,"origin")
set temp2=LoadReal(udg_Hashtable,p,$46D2FE81)-0.04
call SetUnitState(u,ConvertUnitState(0x25),temp2)
call SaveReal(udg_Hashtable,p,$46D2FE81,temp2)
endif
if lv>=30 and LoadInteger(udg_Hash,p,$87EE6875)==1 then
call SaveInteger(udg_Hash,p,$87EE6875,2)
call EFsettingU(p,"war3mapImported\\@EF_Fortress Death5.mdl",0,u,"origin")
call AddUnitAnimationProperties(u,"Alternate",true)
call SaveBoolean(udg_Hash,p,$AB91EED3,true)
set temp2=LoadReal(udg_Hashtable,p,$46D2FE81)-0.06
call SetUnitState(u,ConvertUnitState(0x25),temp2)
call SaveReal(udg_Hashtable,p,$46D2FE81,temp2)
endif
if lv>=60 and LoadInteger(udg_Hash,p,$87EE6875)==2 then
call SaveInteger(udg_Hash,p,$87EE6875,3)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$7312D821,false)
endif
if lv>=100 and LoadInteger(udg_Hash,p,$87EE6875)==3 and LoadBoolean(udg_Hash,p,$8B310201)then
call SaveBoolean(udg_Hashtable,ChSkillD[p],$7312D821,true)
call SaveInteger(udg_Hash,p,$87EE6875,4)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p+1,"war3mapImported\\@EF_Vinz Blast Death.mdl",0,tempX,tempY,2,0,1,0,0,0)
call EFsettingXY(p+1,"war3mapImported\\@EF_lvupRed.mdl",0,tempX,tempY,2,0,1,0,0,0)
call EFsettingXY(p+1,"war3mapImported\\@EF_DevouringSwarmEffect.mdl",0,tempX,tempY,1.5,0,1,0,0,0)
call CharacterEXmodelSet(u,"war3mapImported\\@C_Ichigo6.mdl")
set Model[p]="war3mapImported\\@C_Ichigo6.mdl"
call AddUnitAnimationProperties(u,"Alternate",false)
call SaveBoolean(udg_Hash,p,$AB91EED3,false)
set temp=LoadInteger(Hash_Stat,p,$C18D16A0)
call SaveInteger(Hash_Stat,p,$C18D16A0,temp+50)
set temp=LoadInteger(Hash_Stat,p,$924944F9)
call SaveInteger(Hash_Stat,p,$924944F9,temp+10)
set temp2=LoadReal(Hash_Stat,p,$164C40C9)
call SaveReal(Hash_Stat,p,$164C40C9,temp2+0.1)
call TimerStart(udg_infoRe[p],0,false,null)
call EXSetAbilityString('H010',1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNus10.blp")
call EXSetAbilityString('H010',1,ABILITY_DATA_TIP,"|cff48d1cc완전 호로화")
call EXSetAbilityString('H010',1,ABILITY_DATA_UBERTIP,"|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00공격 간격 감소|cffffa500 : 0.2\n|cff00ff00공격속도 증가|cffffa500 : 50%\n|cff00ff00이동속도 증가|cffffa500 : 10%\n|cff00ff00모든 피해 증폭율 증가|cffffa500 : 10%")
set temp2=LoadReal(udg_Hashtable,p,$46D2FE81)-0.1
call SetUnitState(u,ConvertUnitState(0x25),temp2)
call SaveReal(udg_Hashtable,p,$46D2FE81,temp2)
endif
set u=null
endfunction
function ichigoST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
set ChSkillD[p]='H010'
set ChSkillQ[p]='H011'
set ChSkillW[p]='H012'
set ChSkillE[p]='H013'
set ChSkillR[p]='H014'
set ChSkillT[p]='H015'
set Attack2[p]=4
set Range[p]=250
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_IchigoQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_IchigoW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_IchigoE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_IchigoR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_IchigoT.blp",0)
endif
set STRup[p]=10
set AGIup[p]=8
set INTup[p]=3
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,80)
call SaveReal(udg_Hashtable,p,$43C91172,0.35)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.95)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$9B58470C,150)
call SaveReal(udg_Hashtable,p,$88E0F85F,50)
call SaveReal(udg_Hashtable,p,$E755DDB8,200)
call SaveReal(udg_Hashtable,p,$ABD3E955,100)
call SaveReal(udg_Hashtable,p,$A2229E00,100)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,-25)
call SaveReal(udg_Hashtable,p,$C3EA9E83,500)
call SaveReal(udg_Hashtable,p,$A8D71652,250)
call SaveReal(udg_Hashtable,p,$127510D2,2000)
call SaveReal(udg_Hashtable,p,$B491D29B,500)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,CharacterColor[p+5],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$7312D821,true)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$5047FE8B,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_IchigoF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc영압 해방")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function ichigoSkill)
set trg=CreateTrigger()
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_HERO_LEVEL)
call TriggerAddAction(trg,function ichigoLvUP)
call SaveInteger(udg_Hashtable,p,$5EFF7683,1)
call ichigoTT(p)
set u=null
set trg=null
endfunction
function IzayoiTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer Agi=GetHeroAgi(u,true)
local integer Qdmg=Agi*(4+(LoadInteger(udg_Hashtable,p,$FAFE5485)*5))
local integer Wdmg=Agi*(4+(LoadInteger(udg_Hashtable,p,$457BCFC0)*4))
local integer Wdmg2=Agi*(6+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6))
local integer Edmg=Agi*(5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*7))
local integer Rdmg=(Agi*(10+(LoadInteger(udg_Hashtable,p,$BB70E228)*15)))
local integer Tdmg=(Agi*(110+(LoadInteger(udg_Hashtable,p,$132FA1F5)*40)))
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Qm*Kirie[p])
set Wdmg=Wdmg+R2I(Wm*Kirie[p])
set Edmg=Edmg+R2I(Em*Kirie[p])
set Rdmg=Rdmg+R2I(Rm*Kirie[p])
set Tdmg=Tdmg+R2I(Tm*Kirie[p])
endif
call EXSetAbilityString('H151',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n발을 굴러서 주변 적들에게 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00범위|cffffa500 : "+I2S(R2I(550*Skrange[p]))+"\n|cff00ff00스턴|cffffa500 : 1초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(6*ct[p]))+"초")
call EXSetAbilityString('H152',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n해당 지점으로 돌을 던져 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00최대사거리|cffffa500 : 1200\n|cff00ff00범위|cffffa500 : "+I2S(R2I(350*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(4*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H152')+"/"+R2S(350*Skrange[p]))
if LoadBoolean(udg_Hash,p,$B83FA88D)then
call EXSetAbilityString('H153',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n해당 지점으로 돌진하고 최초로 부딪친 적을 뒤로 밀쳐냅니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00최대 돌진거리|cffffa500 : 1400\n|cff00ff00적중 범위|cffffa500 : 210\n|cff00ff00넉백|cffffa500 : 400\n|cff00ff00스턴|cffffa500 : 1초\n|cff00ff00특수|cffffa500 : 적중후 1초내에 강력 투구 (W)를 사용시 대상에게 핵펀치로 공격해 "+I2S(Wdmg2)+"의 피해\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초\n|cffFF0000EX : |cffffa500적중시 강력투구의 쿨타임을 초기화시킨다.")
else
call EXSetAbilityString('H153',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n해당 지점으로 돌진하고 최초로 부딪친 적을 뒤로 밀쳐냅니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00최대 돌진거리|cffffa500 : 1400\n|cff00ff00적중 범위|cffffa500 : 210\n|cff00ff00넉백|cffffa500 : 400\n|cff00ff00스턴|cffffa500 : 1초\n|cff00ff00특수|cffffa500 : 적중후 1초내에 강력 투구 (W)를 사용시 대상에게 핵펀치로 공격해 "+I2S(Wdmg2)+"의 피해\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초")
endif
call EXSetAbilityString('H154',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n적을 붙잡아 던진뒤 대상에게 강력한 발차기 일격을 가합니다. 대상이 스턴에 걸리지않는 대상이면 즉시 발차기를 합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 350\n|cff00ff00피해 범위|cffffa500 : "+I2S(R2I(600*Skrange[p]))+"\n|cff00ff00대상 스턴|cffffa500 : 2.5초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(25*ct[p]))+"초")
call EXSetAbilityString('H155',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n크게 뛰어올라 지점을 공격합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00피해 범위|cffffa500 : "+I2S(R2I(1500*Skrange[p]))+"\n|cff00ff00대상 스턴|cffffa500 : 2초\n|cff00ff00특수|cffffa500 : 시전중 무적 상태를 유지합니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(70*ct[p]))+"초")
set u=null
endfunction
function IzayoiEX takes integer p returns nothing
local integer temp
call SaveBoolean(udg_Hash,p,$B83FA88D,true)
call IzayoiTT(p)
if ProduceLV<4 then
call StopSoundBJ(LastBGM,false)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiEx.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
endif
call SetPlayerName(Player(8),"|cffeee8aa사카마키 이자요이 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"이 세계는.... 재미있나..?")
set temp=LoadInteger(Hash_Stat,p,$8885555B)+5
set DamageDec[p]=temp
call SetUnitAbilityLevel(Charcter[p],'SY00',DamageDec[p]+81)
call SaveInteger(Hash_Stat,p,$8885555B,temp)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNu016.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc어나더 코스몰로지")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"받는 피해 감소율이 증가하고 매 초마다 잃은 체력에 비례해 체력을 재생합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00모든 받는 피해 감소|cffffa500 : 15% \n|cff00ff00체력 재생율|cffffa500 : 매 초마다 잃은체력의 1.5%\n|cffFF0000EX : |cffffa500효과가 강화된다.")
endfunction
function IzayoiW takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempX
local real tempY
local real distance=LoadReal(udg_Hash,GetHandleId(t),$47527379)
local real dmg
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$23E22F84)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiWef2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call SetUnitAnimationByIndex(u,6)
call SetUnitTimeScale(u,2)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
set ef=EFsettingUcustom(p,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",dummy,"origin")
call SaveEffectHandle(udg_Hash,GetHandleId(t),$23E22F84,ef)
call SetUnitFlyHeight(dummy,150,0)
call SetUnitScale(dummy,2,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
endif
if stage>=1 then
set tempX=GetUnitX(dummy)+(((85)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((85)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
set distance=distance-85
call SaveReal(udg_Hash,GetHandleId(t),$47527379,distance)
if distance>=150 then
call EFsettingXY(p,"war3mapImported\\@EF_Dust Wave Ice.mdl",0,tempX,tempY,0.85,angle-270,1,0,90,150)
endif
endif
if stage>=5 then
call RemoveShacull(p)
endif
if stage>=1 and distance<=50 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiWef1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call RemoveShacull(p)
call DestroyEffect(ef)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
call KillUnit(dummy)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,tempX,tempY,1.35*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl",0,tempX,tempY,4*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_1130.mdl",0,tempX,tempY,3*Skrange[p],270,1,90,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_R4.mdl",0,tempX,tempY,2*Skrange[p],270,1,0,0,0)
set dmg=(GetHeroAgi(u,true))*(4+(LoadInteger(udg_Hashtable,p,$457BCFC0)*4))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,350*Skrange[p],null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckPlayerGroup(dummy)then
call Damage(u,dummy,dmg,1,0,false,1,'H152')
endif
endloop
call SetUnitTimeScale(u,1)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call TimerStart(t,0.02,false,function IzayoiW)
call s__party_deallocate((g))
set t=null
set u=null
set dummy=null
set ef=null
endfunction
function IzayoiE takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local unit c=null
local unit d=null
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempX
local real tempY
local real dmg
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage<=100 then
if stage==0 then
call SetUnitAnimationByIndex(u,4)
call SetUnitTimeScale(u,5)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_Dash Sfx.mdl",0,tempX,tempY,0.5,angle,3,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_windweak.mdx",0,tempX,tempY,0.6,angle,1.5,0,0,50)
call EFsettingXY(p,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",0,tempX,tempY,1,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_DustWindFasterExact.mdx",0,tempX,tempY,1,angle,2.5,0,0,0)
endif
if stage==5 then
call SetUnitAnimationByIndex(u,4)
call SetUnitTimeScale(u,5)
endif
if stage>=1 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_Dash Sfx.mdl",0,tempX,tempY,0.5,angle,3,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,tempX,tempY,1,270,1,0,0,0)
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call SetUnitVertexColor(c,0,0,0,255)
call EFsettingU(p,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",0,c,"origin")
call UnitApplyTimedLife(c,'BHwe',0.5)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,210*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
set d=c
endif
endloop
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
endif
if stage>=10 or d !=null then
call RemoveShacull(p)
if d !=null then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiEef2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90,u)
call ND(Player(p-1),0.1,35)
set tempX=GetUnitX(d)
set tempY=GetUnitY(d)
call SetUnitAnimationByIndex(u,15)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_HeroMonkeyking_Q_blast.mdl",0,tempX,tempY,1,angle,1,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,tempX,tempY,1,angle,2.5,90,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_windweak.mdx",0,tempX,tempY,1,angle,2,90,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Sniper(2)_R.mdx",0,tempX,tempY,2,angle,2,0,0,180)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_TinyLava_T.mdl",0,tempX,tempY,2,angle+320,2,90,0,50)
set tempX=GetUnitX(d)+(((400)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(d)+(((400)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call KnockBackEn(d,tempX,tempY,0.2,0.01)
set dmg=(GetHeroAgi(u,true))*(5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*7))
call Stun(u,d,1)
call Damage(u,d,dmg,1,0,false,1,'H153')
call EXSetAbilityString('H152',1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_IzayoiEW.blp")
if LoadBoolean(udg_Hash,p,$B83FA88D)then
call EXSetAbilityState(EXGetUnitAbility(u,'H152'),ABILITY_STATE_COOLDOWN,0)
endif
call SetUnitAbilityLevel(u,'H152',3)
call SaveUnitHandle(udg_Hash,GetHandleId(u),$8C833E2,d)
set stage=969
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,969)
elseif d==null then
set stage=999
endif
endif
endif
if stage>=999 then
call EXSetAbilityString('H152',1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_IzayoiW.blp")
call SetUnitAbilityLevel(u,'H152',1)
call SetUnitTimeScale(u,1)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set d=null
endfunction
function IzayoiEW takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$580C1005)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempX
local real tempY
local real tempR
local real dmg
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if UnitAlive(tar)then
if stage==0 then
call EXSetAbilityString('H152',1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_IzayoiW.blp")
call SetUnitAbilityLevel(u,'H152',2)
call SetUnitAbilityLevel(u,'H152',1)
call SetUnitAnimationByIndex(u,14)
call SetUnitTimeScale(u,6)
endif
if stage<=4 then
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
set tempX=GetUnitX(tar)+(((-150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((-150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
endif
if stage==5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiE.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiEWef.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call SetUnitTimeScale(u,1)
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
set dmg=(GetHeroAgi(u,true))*(6+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6))
call Stun(u,tar,1)
call Damage(u,tar,dmg,1,0,false,1,'H152')
call EFsettingXY(p,"war3mapImported\\@EF_Fuzzy Stomp.mdl",0,tempX,tempY,1.5,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Wave_squished.mdl",0,tempX,tempY,1.5,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_shinratensei.mdl",0,tempX,tempY,1.5,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_WarStompCaster.mdl",0,tempX,tempY,1.5,270,1,0,0,0)
call ND(Player(p-1),0.1,35)
call RemoveShacull(p)
call SetUnitAbilityLevel(u,'H152',1)
call SetUnitTimeScale(u,1)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
else
call RemoveShacull(p)
call SetUnitAbilityLevel(u,'H152',1)
call SetUnitTimeScale(u,1)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set tar=null
endfunction
function IzayoiR takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$580C1005)
local unit c
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real tempR
local integer tempI
local real dmg
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
if GetUnitAbilityLevel(tar,'A01A')==1 then
set stage=50
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,51)
else
call SetUnitAnimationByIndex(u,7)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiR1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
endif
if stage==13 then
call Stun(u,tar,2.5)
call EFsettingU(p,"Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",1.75,tar,"origin")
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiRef1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call SetUnitX(tar,tempX)
call SetUnitY(tar,tempY)
set tempI=0
loop
exitwhen tempI>=9
set tempI=tempI+1
call EFsettingXY(p,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",0,tempX,tempY,0.5,270,3,tempI*33.75,0,150)
endloop
endif
if stage>=26 and stage<=28 then
set tempI=stage-25
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((GetUnitFacing(u)-(tempI*60))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((GetUnitFacing(u)-(tempI*60))*1.0)*bj_DEGTORAD))
call SetUnitX(tar,tempX)
call SetUnitY(tar,tempY)
endif
if stage==28 then
call SetUnitAnimationByIndex(u,6)
endif
if stage>=30 and stage<=40 then
set tempR=(40-stage)*0.1
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((GetUnitFacing(u)-(180*tempR))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((GetUnitFacing(u)-(180*tempR))*1.0)*bj_DEGTORAD))
call SetUnitX(tar,tempX)
call SetUnitY(tar,tempY)
endif
if stage==40 then
set tempX=GetUnitX(u)+(((900)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((900)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call KnockBackEn(tar,tempX,tempY,0.2,0.01)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",0,tempX,tempY,1.5,angle-180,1,90,0,100)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiRef2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage==49 then
call ND(Player(p-1),0.15,40)
endif
if stage==50 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiR2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiRef3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,tempX,tempY,1.5,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_WarStompCaster.mdl",0,tempX,tempY,1.5,270,1,0,0,0)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,tempY)
call SetUnitAnimationByIndex(u,8)
set tempX=GetUnitX(u)+(((-450)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-450)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.46,0.02)
call SetUnitFlyHeight(u,500,1086)
call EFsettingU(p,"Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",0,u,"foot right")
endif
if stage>=50 then
call SetUnitFacing(u,angle)
call EXSetUnitFacing(u,angle)
endif
if stage==63 then
call SetUnitAnimationByIndex(u,9)
call SetUnitTimeScale(u,2)
endif
if stage==74 then
call SetUnitAnimationByIndex(u,10)
call SetUnitTimeScale(u,1)
set tempX=tempX+(((-100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=tempY+(((-100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.25,0.02)
call SetUnitFlyHeight(u,0,2000)
endif
if stage==86 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiRef4.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call ND(Player(p-1),0.45,70)
call EFsettingXY(p,"war3mapImported\\@EF_WarStompCaster.mdl",0,tempX,tempY,3.75,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_34.mdl",0,tempX,tempY,2.5,270,1,0,0,0)
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,270)
call EFsettingU(p,"war3mapImported\\@EF_BY_Wood_Sand_YueKongJi.mdl",0,c,"origin")
call SetUnitScale(c,1.75*Skrange[p],1,1)
call SetUnitVertexColor(c,255,0,0,255)
call UnitApplyTimedLife(c,'BHwe',0.1)
set dmg=(GetHeroAgi(u,true))*(10+(LoadInteger(udg_Hashtable,p,$BB70E228)*15))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,700*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,1,0,false,1,'H155')
call jumpEn(c,0.12,450,0.02)
endif
endloop
call RemoveShacull(p)
call SetUnitTimeScale(u,1)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set tar=null
set c=null
endfunction
function IzayoiT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local unit c=null
local real tempX
local real tempY
local real dmg
local integer tempI
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call Mujuk(p,u)
if not UnitAlive(u)then
call SetUnitFlyHeight(u,0,0)
call RemoveShacull(p)
call endMujuk(p,u)
call SetUnitTimeScale(u,1)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
if GetLocalPlayer()==Player(p-1)then
call ResetToGameCamera(0)
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,udg_int[p],0.01)
call SetCameraField(CAMERA_FIELD_FARZ,udg_int[p]*2,0.01)
endif
endif
if stage<=3 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",0,tempX,tempY,1,270,1,0,0,0)
endif
if stage==2 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiT1.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,3500,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckFBossGroupN(c)then
set tempI=GetPlayerId(GetOwningPlayer(c))
if GetLocalPlayer()==Player(tempI)then
call StartSound(udg_SND)
endif
endif
endloop
endif
if stage==3 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiEef.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call ND(Player(p-1),0.25,60)
call SetUnitFlyHeight(u,5000,19230)
call SetUnitAnimationByIndex(u,8)
call SetUnitTimeScale(u,5)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,tempX,tempY,1,270,1,0,0,0)
endif
if stage==10 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call FilterBasic(Player(p-1),0.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",0.00,0.00,0.00,0.00,0.00,0.00,0.00,100.00)
if GetLocalPlayer()==Player(p-1)then
call CameraSetupApplyForceDuration(gg_cam_izayoiT,true,0)
call PanCameraToTimed(tempX,tempY,0.00)
endif
endif
if stage==12 then
call SetUnitAnimationByIndex(u,18)
call SetUnitTimeScale(u,0.85)
endif
if stage>=12 and stage<=66 then
call EFsettingU(p,"war3mapImported\\@EF_SuperShinyThingy.mdl",0,u,"foot right")
call EFsettingU(p,"war3mapImported\\@EF_Blink New Sky.mdl",0,u,"foot right")
endif
if stage==18 then
call SetUnitTimeScale(u,0.1)
endif
if stage==66 then
call SetUnitFlyHeight(u,0,19230)
call SetUnitTimeScale(u,1)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiT2.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,3500,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckFBossGroupN(c)then
set tempI=GetPlayerId(GetOwningPlayer(c))
if GetLocalPlayer()==Player(tempI)then
call StartSound(udg_SND)
endif
endif
endloop
if GetLocalPlayer()==Player(p-1)then
call ResetToGameCamera(0)
endif
endif
if stage==67 then
if GetLocalPlayer()==Player(p-1)then
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,udg_int[p],0.00)
call SetCameraField(CAMERA_FIELD_FARZ,udg_int[p]*2,0.00)
endif
endif
if stage==76 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiTef1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_eff_ord_dange_wav_kuosan_1_4_1s.mdl",0,tempX,tempY,1.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_23.mdl",0,tempX,tempY,2.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_[dz.spell]001_blue_mhg.mdl",0,tempX,tempY,3*Skrange[p],270,1,0,0,0)
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,270)
call EFsettingU(p,"war3mapImported\\@EF_BY_Wood_Sand_YueKongJi.mdl",0,c,"origin")
call SetUnitScale(c,4*Skrange[p],1,1)
call SetUnitVertexColor(c,100,175,255,255)
call UnitApplyTimedLife(c,'BHwe',0.1)
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,270)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_[DZ.Spell]006_Blue.mdl",c,"origin"),0.1)
call Expand(c,500.00*Skrange[p],2000.00*Skrange[p],0.01,0.10)
call UnitApplyTimedLife(c,'BHwe',0.1)
call ND(Player(p-1),0.3,85)
set dmg=(GetHeroAgi(u,true))*(110+(LoadInteger(udg_Hashtable,p,$132FA1F5)*40))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,1,0,false,1,'H155')
call Stun(u,c,2)
call jumpEn(c,0.12,450,0.02)
endif
endloop
endif
if stage==78 then
set tempX=GetUnitX(u)+(((-400)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-400)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.5,0.04)
call SetUnitAnimationByIndex(u,11)
call jump(u,0.5,400,0.01)
call SetUnitTimeScale(u,2.4)
endif
if stage==94 then
call SetUnitTimeScale(u,1)
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function IzayoiSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local unit c
local real tempX=GetSpellTargetX()
local real tempY=GetSpellTargetY()
local real tempX2
local real tempY2
local real mana
local integer tempI=0
local integer tempI2=0
local integer tempI3=0
local real tempR
local real tempR2
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real Mana
local integer g=s__party_create()
if GetSpellAbilityId()=='H150' then
call Animate(u,4)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiD.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
set BossAgro=u
call DestroyTimer(t)
endif
if GetSpellAbilityId()=='H151' then
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Animate(u,3)
if GetRandomInt(1,5)==1 then
if GetRandomInt(0,1)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiQ1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiQ2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_IzayoiQef.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80.00,u)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Crixalis(1)_C5-8.mdl",0,tempX,tempY,2*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",0,tempX,tempY,2.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_WARRR211.mdl",0,tempX,tempY,2*Skrange[p],270,1,0,0,0)
call ND(Player(p-1),0.1,40)
set Mana=(GetHeroAgi(u,true))*(4+(LoadInteger(udg_Hashtable,p,$FAFE5485)*5))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,550*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,Mana,1,0,false,1,'H151')
call Stun(u,c,1)
endif
endloop
call DestroyTimer(t)
endif
if GetSpellAbilityId()=='H152' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
if GetUnitAbilityLevel(u,'H152')==3 then
call EFsettingXY(p,"Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",0,GetUnitX(u),GetUnitY(u),2,270,1,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(u),GetUnitY(u),2,270,1,0,0,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
set c=LoadUnitHandle(udg_Hash,GetHandleId(u),$8C833E2)
set tempX2=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(c),GetUnitY(c))
set tempX=GetUnitX(c)+(((-150)*1.0)*Cos(((tempX2)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(c)+(((-150)*1.0)*Sin(((tempX2)*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$580C1005,c)
call TimerStart(t,0.02,true,function IzayoiEW)
call Shacull(p)
else
set tempX2=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
set tempY2=s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)-150
if tempY2>=1200 then
set tempY2=1200
endif
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempX2)
call SaveReal(udg_Hash,GetHandleId(t),$47527379,tempY2)
call TimerStart(t,0.02,false,function IzayoiW)
call Shacull(p)
endif
endif
if GetSpellAbilityId()=='H153' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
set tempX2=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempX2)
call TimerStart(t,0.02,true,function IzayoiE)
call Shacull(p)
endif
if GetSpellAbilityId()=='H154' then
set Mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$580C1005,tar)
call TimerStart(t,0.02,true,function IzayoiR)
call Shacull(p)
endif
if GetSpellAbilityId()=='H155' then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call TimerStart(t,0.03,true,function IzayoiT)
call Shacull(p)
call Mujuk(p,u)
endif
call s__party_deallocate((g))
set u=null
set tar=null
set c=null
set t=null
endfunction
function IzayoiST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
local integer temp
set ChSkillD[p]='H150'
set ChSkillQ[p]='H151'
set ChSkillW[p]='H152'
set ChSkillE[p]='H153'
set ChSkillR[p]='H154'
set ChSkillT[p]='H155'
set Range[p]=155
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
call UnitAddAbility(u,'Amrf')
call UnitRemoveAbility(u,'Amrf')
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_IzayoiQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_IzayoiW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_IzayoiE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_IzayoiR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_IzayoiT.blp",0)
endif
set STRup[p]=15
set AGIup[p]=12
set INTup[p]=2
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,90)
call SaveReal(udg_Hashtable,p,$43C91172,0.35)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.9)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
set temp=LoadInteger(Hash_Stat,p,$8885555B)+10
set DamageDec[p]=temp
call SetUnitAbilityLevel(Charcter[p],'SY00',DamageDec[p]+81)
call SaveInteger(Hash_Stat,p,$8885555B,temp)
call SaveReal(udg_Hashtable,p,$9B58470C,150)
call SaveReal(udg_Hashtable,p,$88E0F85F,100)
call SaveReal(udg_Hashtable,p,$E755DDB8,125)
call SaveReal(udg_Hashtable,p,$ABD3E955,75)
call SaveReal(udg_Hashtable,p,$A2229E00,175)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,125)
call SaveReal(udg_Hashtable,p,$C3EA9E83,500)
call SaveReal(udg_Hashtable,p,$A8D71652,250)
call SaveReal(udg_Hashtable,p,$127510D2,1500)
call SaveReal(udg_Hashtable,p,$B491D29B,500)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$A3BFD794,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$E6BB3831,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNr050.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc기프트 - 언노운")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"받는 피해 감소율이 증가하고 매 초마다 잃은 체력에 비례해 체력을 재생합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00모든 받는 피해 감소|cffffa500 : 10% \n|cff00ff00체력 재생율|cffffa500 : 매 초마다 잃은체력의 1%")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function IzayoiSkill)
call SaveInteger(udg_Hashtable,p,$5EFF7683,15)
call IzayoiTT(p)
set u=null
set trg=null
endfunction
function KaliTT takes integer p returns nothing
local unit u=Charcter[p]
local integer l__Str=GetHeroStr(u,true)
local integer Agi=GetHeroAgi(u,true)
local integer l__Int=GetHeroInt(u,true)
local integer Qdmg=R2I((l__Str*(0.2+(LoadInteger(udg_Hashtable,p,$FAFE5485)*0.175)))+(Agi*(2+(LoadInteger(udg_Hashtable,p,$FAFE5485)*1.75)))+(l__Int*(2+(LoadInteger(udg_Hashtable,p,$FAFE5485)*1.75))))
local integer Wdmg=R2I((l__Str*(0.3+(LoadInteger(udg_Hashtable,p,$457BCFC0)*0.4)))+(Agi*(3+(LoadInteger(udg_Hashtable,p,$457BCFC0)*4)))+(l__Int*(3+(LoadInteger(udg_Hashtable,p,$457BCFC0)*4))))
local integer Edmg=R2I((l__Str*(0.25+(LoadInteger(udg_Hashtable,p,$6074AEF9)*0.225)))+(Agi*(2.5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*2.25)))+(l__Int*(2.5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*2.25))))
local integer Rdmg=R2I((l__Str*(4+(LoadInteger(udg_Hashtable,p,$BB70E228)*2)))+(Agi*(40+(LoadInteger(udg_Hashtable,p,$BB70E228)*20)))+(l__Int*(40+(LoadInteger(udg_Hashtable,p,$BB70E228)*20))))
local integer Tdmg=R2I((l__Str*(12+(LoadInteger(udg_Hashtable,p,$132FA1F5)*6)))+(Agi*(120+(LoadInteger(udg_Hashtable,p,$132FA1F5)*60)))+(l__Int*(120+(LoadInteger(udg_Hashtable,p,$132FA1F5)*60))))
if LoadBoolean(udg_Hash,p,$14D3F587)then
call EXSetAbilityString('H210',1,ABILITY_DATA_UBERTIP,"시전 시 일정 시간 동안 보호막을 생성하고 올 스탯을 증가시킨다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00올 스탯 증가|cffffa500 : 20% \n|cff00ff00보호막 생성|cffffa500 : "+I2S(R2I((l__Str+Agi+l__Int)*2.0))+"\n|cff00ff00지속시간|cffffa500 : 10초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(30*ct[p]))+"초\n|cffFF0000EX : |cffffa500올 스탯이 추가로 10% 증가하고 보호막 비례가 0.5 증가한다.")
else
call EXSetAbilityString('H210',1,ABILITY_DATA_UBERTIP,"시전 시 일정 시간 동안 보호막을 생성하고 올 스탯을 증가시킨다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00올 스탯 증가|cffffa500 : 10% \n|cff00ff00보호막 생성|cffffa500 : "+I2S(R2I((l__Str+Agi+l__Int)*1.5))+"\n|cff00ff00지속시간|cffffa500 : 10초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(30*ct[p]))+"초")
endif
call EXSetAbilityString('H211',1,ABILITY_DATA_UBERTIP,"가로로 크게 한번 베어냅니다.\n시전할 때 마다 일정 시간 동안 횡베기 스택을 쌓습니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사정거리|cffffa500 : 500\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00효과|cffffa500 : 12초 동안 횡베기 1 스택 (최대 5)\n|cff00ff00횡베기 스택|cffffa500 : 횡베기 스택 당 횡베기 피해량 10% 증가 / 쿨타임 10% 감소\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(7*ct[p]))+"초")
call EXSetAbilityString('H212',1,ABILITY_DATA_UBERTIP,"대상을 세로로 크게 한번 베어냅니다.\n시전할 때 마다 일정 시간 동안 종베기 스택을 쌓습니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 500\n|cff00ff00효과 1|cffffa500 : 적 1초 기절\n|cff00ff00효과 2|cffffa500 : 12초 동안 종베기 1 스택 (최대 5)\n|cff00ff00종베기 스택|cffffa500 : 종베기 스택 당 종베기 피해량 10% 증가 / 쿨타임 10% 감소\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(6*ct[p]))+"초")
call EXSetAbilityString('H213',1,ABILITY_DATA_UBERTIP,"지정한 방향으로 돌진하면서 일직선의 적들에게 피해를 줍니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00돌진 거리|cffffa500 : 715\n|cff00ff00피해 범위|cffffa500 : "+I2S(R2I(350*Skrange[p]))+"\n|cff00ff00효과|cffffa500 : 12초 동안 찌르기 1 스택 (최대 5)\n|cff00ff00찌르기 스택|cffffa500 : 찌르기 스택 당 찌르기 피해량 10% 증가 / 쿨타임 10% 감소\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(7*ct[p]))+"초")
call EXSetAbilityString('H214',1,ABILITY_DATA_UBERTIP,"넒은 범위의 적들을 기절시킨 뒤 가로로 크게 베어버립니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사정거리|cffffa500 : "+I2S(R2I(1800*Skrange[p]))+"\n|cff00ff00범위|cffffa500 : "+I2S(R2I(2000*Skrange[p]))+"\n|cff00ff00효과|cffffa500 : 적 4초 기절\n|cff00ff00특수|cffffa500 : 시전 중 무적\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(90*ct[p]))+"초")
call EXSetAbilityString('H215',1,ABILITY_DATA_UBERTIP,"대상을 세로로 크게 베어버립니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사정거리|cffffa500 : 500\n|cff00ff00효과|cffffa500 : 적 4초 기절\n|cff00ff00특수|cffffa500 : 시전 중 무적\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(180*ct[p]))+"초")
set u=null
endfunction
function KaliEX takes integer p returns nothing
local unit u=Charcter[p]
call KaliTT(p)
if ProduceLV<4 then
set ProduceLV=4
call SaveBoolean(udg_Hash,p,$14D3F587,true)
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\ES_KaliEXget.mp3"),(null),(90),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\ES_KaliEXget2.mp3"),(null),(100),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call ProduTime(60,4)
endif
call SetPlayerName(Player(8),"|cffFF8200칼리|r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"난 뒷골목이 싫어. 그 곳에서 태어나 어떻게든 살아남아 온 입장에서 매일이 지옥이었지.")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"보스전에서 전멸 시 즉시 부활하고 올 스탯이 크게 증가한다. (보스전 당 1회)\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00올 스탯 증가|cffffa500 : 40%\n|cff00ff00모든 피해 증폭율 증가|cffffa500 : 30%\n|cff00ff00모든 받는 피해 감소율 증가|cffffa500 : 20%\n|cff00ff00특수|cffffa500 : 칼리는 아티팩트 '붉은안개'의 스턴 효과에 면역을 가진다.\n|cffFF0000EX : |cffffa500부활 시 증가하는 올 스탯 20% 추가 증가 '붉은안개'의 스턴 효과에 대한 면역추가.")
set u=null
endfunction
function KaliTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer KaliQStack=LoadInteger(udg_Hash,GetHandleId(u),$B6B1A981)
local real KaliQTimer=LoadReal(udg_Hash,GetHandleId(u),$3658D760)
local integer KaliWStack=LoadInteger(udg_Hash,GetHandleId(u),$826F2DCE)
local real KaliWTimer=LoadReal(udg_Hash,GetHandleId(u),$4D37A799)
local integer KaliEStack=LoadInteger(udg_Hash,GetHandleId(u),$F41A3C65)
local real KaliETimer=LoadReal(udg_Hash,GetHandleId(u),$CD332AF5)
local boolean KaliRevive=LoadBoolean(udg_Hash,GetHandleId(u),$10B600A6)
local integer tempI=0
local boolean check=false
local integer life=0
call TimerStart(t,0.05,false,function KaliTimer)
if BossBattleN and KaliRevive==false then
loop
exitwhen tempI==Playint
set tempI=tempI+1
set life=LoadInteger(udg_Hash,GetHandleId(Charcter[PP[tempI]]),$AD509D80)
if life !=0 then
set check=true
exitwhen true
endif
if UnitAlive(Charcter[PP[tempI]])then
set check=true
exitwhen true
endif
endloop
if check==false then
set KaliRevive=true
call SaveBoolean(udg_Hash,GetHandleId(u),$10B600A6,KaliRevive)
call UnitAddAbility(u,'A03I')
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\ES_KaliEXget.mp3"),(null),(90),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call DisplayTimedTextToPlayer(Player(0),0,0,10,"|cff8f3d21붉은안개가 돌아왔다.")
call DisplayTimedTextToPlayer(Player(1),0,0,10,"|cff8f3d21붉은안개가 돌아왔다.")
call DisplayTimedTextToPlayer(Player(2),0,0,10,"|cff8f3d21붉은안개가 돌아왔다.")
call DisplayTimedTextToPlayer(Player(3),0,0,10,"|cff8f3d21붉은안개가 돌아왔다.")
call DisplayTimedTextToPlayer(Player(4),0,0,10,"|cff8f3d21붉은안개가 돌아왔다.")
if LoadBoolean(udg_Hash,p,$14D3F587)then
call StatUP(p,40,"올탯퍼")
else
call StatUP(p,20,"올탯퍼")
endif
call StatUP(p,0.3,"피증")
call StatUP(p,20,"피감")
call SaveInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80,1)
call SaveUnitHandle(System,GetHandleId(ReviveTimer[p]),$FAD24066,u)
call TimerStart(ReviveTimer[p],1.0,false,null)
call BuffCall(u,'B036',999999,false,false)
endif
endif
if BossBattleN==false and KaliRevive==true then
set KaliRevive=false
call SaveBoolean(udg_Hash,GetHandleId(u),$10B600A6,KaliRevive)
call UnitRemoveAbility(u,'A03I')
if LoadBoolean(udg_Hash,p,$14D3F587)then
call StatUP(p,-40,"올탯퍼")
else
call StatUP(p,-20,"올탯퍼")
endif
call StatUP(p,-0.3,"피증")
call StatUP(p,-20,"피감")
call BuffCall(u,'B036',0,false,false)
endif
if KaliQTimer<=0 then
call SaveInteger(udg_Hash,GetHandleId(u),$B6B1A981,0)
call SaveReal(udg_Hash,GetHandleId(u),$3658D760,0)
else
call SaveReal(udg_Hash,GetHandleId(u),$3658D760,KaliQTimer-0.05)
endif
if KaliWTimer<=0 then
call SaveInteger(udg_Hash,GetHandleId(u),$826F2DCE,0)
call SaveReal(udg_Hash,GetHandleId(u),$4D37A799,0)
else
call SaveReal(udg_Hash,GetHandleId(u),$4D37A799,KaliWTimer-0.05)
endif
if KaliETimer<=0 then
call SaveInteger(udg_Hash,GetHandleId(u),$F41A3C65,0)
call SaveReal(udg_Hash,GetHandleId(u),$CD332AF5,0)
else
call SaveReal(udg_Hash,GetHandleId(u),$CD332AF5,KaliETimer-0.05)
endif
set t=null
set t2=null
set u=null
endfunction
function KaliSkillQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer KaliQStack=LoadInteger(udg_Hash,GetHandleId(u),$B6B1A981)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer l__Str=GetHeroStr(u,true)
local integer Agi=GetHeroAgi(u,true)
local integer l__Int=GetHeroInt(u,true)
local integer Qdmg=R2I((l__Str*(0.2+(LoadInteger(udg_Hashtable,p,$FAFE5485)*0.175)))+(Agi*(2+(LoadInteger(udg_Hashtable,p,$FAFE5485)*1.75)))+(l__Int*(2+(LoadInteger(udg_Hashtable,p,$FAFE5485)*1.75))))
local unit gunit
local integer g=s__party_create()
set stage=stage+1
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage)
if stage==1 then
call CTset(u,p,'H211',(7*ct[p])-((7*ct[p])*(0.06*KaliQStack)))
call SetUnitAnimationByIndex(u,4)
call EXSetUnitFacing(u,angle)
call SetUnitFacing(u,angle)
if LoadInteger(udg_Hash,GetHandleId(u),$329FF8E6)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_Q_Effect1.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$329FF8E6,1)
elseif LoadInteger(udg_Hash,GetHandleId(u),$329FF8E6)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_Q_Effect2.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$329FF8E6,2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$329FF8E6)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_Q_Effect1.mp3"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$329FF8E6,3)
elseif LoadInteger(udg_Hash,GetHandleId(u),$329FF8E6)==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_Q_Effect2.mp3"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$329FF8E6,4)
elseif LoadInteger(udg_Hash,GetHandleId(u),$329FF8E6)==4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_Q_Effect1.mp3"),("5"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$329FF8E6,5)
elseif LoadInteger(udg_Hash,GetHandleId(u),$329FF8E6)==5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_Q_Effect2.mp3"),("6"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$329FF8E6,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
call TimerStart(t,0.15,false,function KaliSkillQ)
endif
if stage==2 then
call KnockBackEn(u,GetUnitX(u)+(((50)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((50)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),0.1,0.01)
call ND(Player(p-1),0.15+(KaliQStack*0.00),8+(KaliQStack*0))
call EFsettingXY(p,"war3mapImported\\@EF_rb4.mdl",0.0,GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),10.0,angle,1.0,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u)+(((500)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((500)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),500*Skrange[p],null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckPlayerGroup(gunit)then
call Damage(u,gunit,Qdmg*(1.0+(KaliQStack*0.06)),1,0,false,1,'H211')
call EFsettingXY(p,"war3mapImported\\@EF_BloodSlash.mdl",0.0,GetUnitX(gunit)+(((50)*1.0)*Cos(((angle+180)*1.0)*bj_DEGTORAD)),GetUnitY(gunit)+(((50)*1.0)*Sin(((angle+180)*1.0)*bj_DEGTORAD)),1.6,angle,1.0,0,0,50)
call KnockBackEn(gunit,GetUnitX(gunit)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(gunit)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),0.1,0.01)
endif
endloop
call TimerStart(t,0.25,false,function KaliSkillQ)
endif
if stage==3 then
call RemoveShacull(p)
call SetUnitTimeScale(u,1.0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set gunit=null
call s__party_deallocate((g))
endfunction
function KaliSkillW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit l__target=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer KaliWStack=LoadInteger(udg_Hash,GetHandleId(u),$826F2DCE)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer l__Str=GetHeroStr(u,true)
local integer Agi=GetHeroAgi(u,true)
local integer l__Int=GetHeroInt(u,true)
local integer tempI
local integer tempI2
local integer tempI3
local integer Wdmg=R2I((l__Str*(0.3+(LoadInteger(udg_Hashtable,p,$457BCFC0)*0.4)))+(Agi*(3+(LoadInteger(udg_Hashtable,p,$457BCFC0)*4)))+(l__Int*(3+(LoadInteger(udg_Hashtable,p,$457BCFC0)*4))))
set stage=stage+1
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage)
if stage==1 then
call CTset(u,p,'H212',(6*ct[p])-((6*ct[p])*(0.06*KaliWStack)))
call SetUnitAnimationByIndex(u,5)
call EXSetUnitFacing(u,angle)
call SetUnitFacing(u,angle)
if LoadInteger(udg_Hash,GetHandleId(u),$DFB448FB)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_W_Effect1.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$DFB448FB,1)
elseif LoadInteger(udg_Hash,GetHandleId(u),$DFB448FB)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_W_Effect2.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$DFB448FB,2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$DFB448FB)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_W_Effect1.mp3"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$DFB448FB,3)
elseif LoadInteger(udg_Hash,GetHandleId(u),$DFB448FB)==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_W_Effect2.mp3"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$DFB448FB,4)
elseif LoadInteger(udg_Hash,GetHandleId(u),$DFB448FB)==4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_W_Effect1.mp3"),("5"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$DFB448FB,5)
elseif LoadInteger(udg_Hash,GetHandleId(u),$DFB448FB)==5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_W_Effect2.mp3"),("6"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$DFB448FB,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
call TimerStart(t,0.15,false,function KaliSkillW)
endif
if stage==2 then
call KnockBackEn(u,GetUnitX(u)+(((50)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((50)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),0.1,0.01)
set tempI=GetRandomInt(1,2)
call ND(Player(p-1),0.15+(KaliWStack*0.0),10+(KaliWStack*0))
if tempI==1 then
set tempI2=45
set tempI3=-45
else
set tempI2=-45
set tempI3=45
endif
call EFsettingXY(p,"war3mapImported\\@EF_BloodCut.mdl",0.0,GetUnitX(u)+(((-250)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((-250)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),2.5,angle,1.0,0,tempI2,300)
call Damage(u,l__target,Wdmg*(1.0+(KaliWStack*0.06)),1,0,false,1,'H212')
call Stun(u,l__target,1.0)
call KnockBackEn(l__target,GetUnitX(l__target)+(((200)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(l__target)+(((200)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),0.1,0.01)
call EFsettingXY(p,"war3mapImported\\@EF_tx-shqy10-E.mdl",0.0,GetUnitX(l__target)+(((50)*1.0)*Cos(((angle+180)*1.0)*bj_DEGTORAD)),GetUnitY(l__target)+(((50)*1.0)*Sin(((angle+180)*1.0)*bj_DEGTORAD)),2.0,tempI3,1.0,0,0,100)
call EFsettingXY(p,"Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl",0.0,GetUnitX(l__target)+(((50)*1.0)*Cos(((angle+180)*1.0)*bj_DEGTORAD)),GetUnitY(l__target)+(((50)*1.0)*Sin(((angle+180)*1.0)*bj_DEGTORAD)),2.0,tempI2,1.0,0,0,200)
call EFsettingXY(p,"Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl",0.0,GetUnitX(l__target)+(((50)*1.0)*Cos(((angle+180)*1.0)*bj_DEGTORAD)),GetUnitY(l__target)+(((50)*1.0)*Sin(((angle+180)*1.0)*bj_DEGTORAD)),2.0,tempI2,1.0,0,0,200)
call EFsettingXY(p,"Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl",0.0,GetUnitX(l__target)+(((50)*1.0)*Cos(((angle+180)*1.0)*bj_DEGTORAD)),GetUnitY(l__target)+(((50)*1.0)*Sin(((angle+180)*1.0)*bj_DEGTORAD)),2.0,tempI2,1.0,0,0,200)
call TimerStart(t,0.25,false,function KaliSkillW)
endif
if stage==3 then
call RemoveShacull(p)
call SetUnitTimeScale(u,1.0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set l__target=null
endfunction
function KaliSkillE takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit l__target=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer KaliEStack=LoadInteger(udg_Hash,GetHandleId(u),$F41A3C65)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer l__Str=GetHeroStr(u,true)
local integer Agi=GetHeroAgi(u,true)
local integer l__Int=GetHeroInt(u,true)
local integer tempI
local integer tempI2
local integer tempI3
local integer Edmg=R2I((l__Str*(0.25+(LoadInteger(udg_Hashtable,p,$6074AEF9)*0.225)))+(Agi*(2.5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*2.25)))+(l__Int*(2.5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*2.25))))
local unit dummy
local unit gunit
local integer g=s__party_create()
set stage=stage+1
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage)
if stage==1 then
call CTset(u,p,'H213',(7*ct[p])-((7*ct[p])*(0.06*KaliEStack)))
call SetUnitAnimationByIndex(u,6)
call EXSetUnitFacing(u,angle)
call SetUnitFacing(u,angle)
call ND(Player(p-1),0.15+(KaliEStack*0.00),8+(KaliEStack*0))
if LoadInteger(udg_Hash,GetHandleId(u),$239F3A6E)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_E_Effect11.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$239F3A6E,1)
elseif LoadInteger(udg_Hash,GetHandleId(u),$239F3A6E)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_E_Effect22.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$239F3A6E,2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$239F3A6E)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_E_Effect11.mp3"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$239F3A6E,3)
elseif LoadInteger(udg_Hash,GetHandleId(u),$239F3A6E)==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_E_Effect22.mp3"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$239F3A6E,4)
elseif LoadInteger(udg_Hash,GetHandleId(u),$239F3A6E)==4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_E_Effect11.mp3"),("5"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$239F3A6E,5)
elseif LoadInteger(udg_Hash,GetHandleId(u),$239F3A6E)==5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_E_Effect22.mp3"),("6"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$239F3A6E,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
call EFsettingXY(p,"war3mapImported\\@EF_Dustwind Smoke.mdl",0,GetUnitX(u)+(((-100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((-100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),1.0,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_WindAttack.mdl",0,GetUnitX(u)+(((300)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((300)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),1.0,angle+180,1,0,0,0)
call TimerStart(t,0.01,false,function KaliSkillE)
endif
if stage>=2 and stage<=12 then
if IsPointPathableALL(GetUnitX(u)+(((65)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((65)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))then
call SetUnitX(u,GetUnitX(u)+(((65)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(u)+(((65)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u)+(((-60)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((-60)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),angle)
call imagedummy(p,dummy,0.26,2,"spell 2",Model[p])
call invisible(dummy,40.00,100.00,0.24,0.01)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),350*Skrange[p],null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckPlayerGroup(gunit)and LoadBoolean(udg_Hash,GetHandleId(t),GetHandleId(gunit))==false then
call SaveBoolean(udg_Hash,GetHandleId(t),GetHandleId(gunit),true)
call Damage(u,gunit,Edmg*(1.0+(KaliEStack*0.06)),1,0,false,1,'H213')
call EFsettingXY(p,"war3mapImported\\@EF_BloodSlash.mdl",0.0,GetUnitX(gunit)+(((50)*1.0)*Cos(((angle+180)*1.0)*bj_DEGTORAD)),GetUnitY(gunit)+(((50)*1.0)*Sin(((angle+180)*1.0)*bj_DEGTORAD)),1.6,angle,1.0,0,0,50)
call KnockBackEn(gunit,GetUnitX(gunit)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(gunit)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),0.1,0.01)
endif
endloop
else
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,13)
endif
call TimerStart(t,0.01,false,function KaliSkillE)
endif
if stage>=13 then
call RemoveShacull(p)
call SetUnitTimeScale(u,1.0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set l__target=null
set dummy=null
set gunit=null
call s__party_deallocate((g))
endfunction
function KaliSkillRT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local integer l__Str=GetHeroStr(u,true)
local integer Agi=GetHeroAgi(u,true)
local integer l__Int=GetHeroInt(u,true)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer Rdmg=R2I((l__Str*(4+(LoadInteger(udg_Hashtable,p,$BB70E228)*2)))+(Agi*(40+(LoadInteger(udg_Hashtable,p,$BB70E228)*20)))+(l__Int*(40+(LoadInteger(udg_Hashtable,p,$BB70E228)*20))))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==1 then
call TimerStart(t,0.9,false,function KaliSkillRT)
else
call Damage(u,tar,Rdmg,1,0,false,1,'H214')
call EFsettingXY(p,"war3mapImported\\@EF_Vinz Blast Corpse.mdl",0.0,GetUnitX(tar),GetUnitY(tar),2.0,270,1.5,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_bloodex2.mdl",0.0,GetUnitX(tar),GetUnitY(tar),5.0,270,1.0,0,0,0)
call EFsettingU(p,"war3mapImported\\@EF_baojiang.mdl",0.0,tar,"origin")
call Stun(u,tar,3.2)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set tar=null
set dummy=null
endfunction
function KaliSkillR takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local integer l__Str=GetHeroStr(u,true)
local integer Agi=GetHeroAgi(u,true)
local integer l__Int=GetHeroInt(u,true)
local integer Rdmg=R2I((l__Str*(4+(LoadInteger(udg_Hashtable,p,$BB70E228)*2)))+(Agi*(40+(LoadInteger(udg_Hashtable,p,$BB70E228)*20)))+(l__Int*(40+(LoadInteger(udg_Hashtable,p,$BB70E228)*20))))
local unit gunit
local unit dummy
local integer g=s__party_create()
local integer tempI
set stage=stage+1
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage)
call TimerStart(t,0.04,false,function KaliSkillR)
if stage==1 then
call EFsettingU(p,"war3mapImported\\@EF_Effect_Invisibility_Target_Wave_Red.mdl",0.0,u,"chest")
call EFsettingXY(p,"war3mapImported\\@EF_VFX_RED_WindWeak3b.mdl",0.0,GetUnitX(u),GetUnitY(u),1.0,270,1.0,0,0,0)
call SetUnitAnimationByIndex(u,9)
call EXSetUnitFacing(u,angle)
call SetUnitFacing(u,angle)
call ND(Player(p-1),0.1,100)
call Mujuk(p,u)
call FilterBasic(Player(p-1),1.00,"ReplaceableTextures\\CameraMasks\\White_mask.blp",255.00,0.00,0.00,0.00,0.00,0.00,0.00,100.00)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_R_Effect1.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u)+(((1800*Skrange[p])*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((1800*Skrange[p])*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),2000*Skrange[p],null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckPlayerGroup(gunit)then
call EFsettingU(p,"Abilities\\Spells\\Human\\Slow\\SlowCaster.mdl",0.0,gunit,"origin")
call Stun(u,gunit,3.0)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffff0000Good Bye|r",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,gunit,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.0)
endif
endloop
endif
if stage==26 then
call ND(Player(p-1),0.5,100)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_R_Effect2.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call FilterBasic(Player(p-1),1.5,"ReplaceableTextures\\CameraMasks\\DiagonalSlash_mask.blp",255.00,0.00,0.00,0.00,0.00,0.00,0.00,100.00)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u)+(((1800*Skrange[p])*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((1800*Skrange[p])*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),2000*Skrange[p],null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckPlayerGroup(gunit)then
call Stun(u,gunit,2.0)
set t2=CreateTimer()
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(gunit),GetUnitY(gunit),s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))+180)
call SetUnitUseFood(dummy,false)
call SetUnitTimeScale(dummy,0.3)
call EFsettingXY(p,"war3mapImported\\@EF_tx-shqy21.mdl",0.0,GetUnitX(gunit),GetUnitY(gunit),8.0,193,1.0,0,0,100)
if GetUnitTypeId(gunit)=='wv00' then
set tempI=LoadInteger(udg_Hash,999,$3862CC76)
call imagedummy(p,dummy,1.5,1.0,"death",LoadStr(udg_Hash,0,$28C8CC8E+tempI))
call SetUnitScale(dummy,S2R(EXExecuteScript("(require'jass.slk').unit["+I2S(GetUnitTypeId(gunit))+"].modelScale")),0,0)
else
call imagedummy(p,dummy,1.5,1.0,"death",EXExecuteScript("(require'jass.slk').unit["+I2S(GetUnitTypeId(gunit))+"].file"))
call SetUnitScale(dummy,S2R(EXExecuteScript("(require'jass.slk').unit["+I2S(GetUnitTypeId(gunit))+"].modelScale")),0,0)
endif
call invisibleColor(dummy,0.00,100.00,255,0,0,1.0,0.01)
call KnockBackEn(gunit,GetUnitX(gunit)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(gunit)+(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),0.1,0.01)
call KnockBackEn(dummy,GetUnitX(gunit)+(((500)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(gunit)+(((500)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),0.1,0.01)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$535B7E08,dummy)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$FC4D8276,gunit)
call SaveInteger(udg_Hash,GetHandleId(t2),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
call SaveReal(udg_Hash,GetHandleId(t2),$9966AD24,angle)
call TimerStart(t2,0.6,false,function KaliSkillRT)
set t2=null
endif
endloop
endif
if stage==33 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_R_Effect3.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
endif
if stage==45 then
call FilterBasic(Player(p-1),0.65,"ReplaceableTextures\\CameraMasks\\Black_mask.blp",0.00,0.00,0.00,255.00,255.00,255.00,100.00,0.00)
endif
if stage==64 then
call FilterBasic(Player(p-1),0.01,"ReplaceableTextures\\CameraMasks\\Black_mask.blp",0.00,0.00,0.00,0.00,0.00,0.00,0.00,100.00)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_R_Effect4.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call ND(Player(p-1),0.5,100)
call PlaySoundOnUnit(udg_SND,100.00,u)
endif
if stage>=70 then
call endMujuk(p,u)
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set t2=null
set u=null
set target=null
set gunit=null
set dummy=null
call s__party_deallocate((g))
endfunction
function KaliSkillT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer l__Str=GetHeroStr(u,true)
local integer Agi=GetHeroAgi(u,true)
local integer l__Int=GetHeroInt(u,true)
local integer Tdmg=R2I((l__Str*(12+(LoadInteger(udg_Hashtable,p,$132FA1F5)*6)))+(Agi*(120+(LoadInteger(udg_Hashtable,p,$132FA1F5)*60)))+(l__Int*(120+(LoadInteger(udg_Hashtable,p,$132FA1F5)*60))))
set stage=stage+1
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage)
call TimerStart(t,0.04,false,function KaliSkillT)
if stage==1 then
call SetUnitAnimationByIndex(u,3)
call EXSetUnitFacing(u,angle)
call SetUnitFacing(u,angle)
call ND(Player(p-1),0.1,100)
call Mujuk(p,u)
call FilterBasic(Player(p-1),0.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",255.00,0.00,0.00,0.00,0.00,0.00,0.00,100.00)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_T_Effect1.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,tar)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_KingLeoric(SDWZ)_E.mdl",0.0,GetUnitX(tar)+(((50)*1.0)*Cos(((angle+180)*1.0)*bj_DEGTORAD)),GetUnitY(tar)+(((50)*1.0)*Sin(((angle+180)*1.0)*bj_DEGTORAD)),2.5,angle,1.0,0,0,50)
call Stun(u,tar,3.0)
endif
if stage==8 or stage==34 or stage==59 then
call SetUnitTimeScale(u,0.01)
endif
if stage==26 or stage==51 then
call SetUnitTimeScale(u,0.02)
call KnockBackEn(tar,GetUnitX(tar)+(((50)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(tar)+(((50)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),0.1,0.01)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_KingLeoric(SDWZ)_E.mdl",0.0,GetUnitX(tar)+(((50)*1.0)*Cos(((angle+180)*1.0)*bj_DEGTORAD)),GetUnitY(tar)+(((50)*1.0)*Sin(((angle+180)*1.0)*bj_DEGTORAD)),2.5,angle,1.0,0,0,50)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_T_Effect2.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,tar)
call Stun(u,tar,3.0)
call FilterBasic(Player(p-1),0.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",255.00,0.00,0.00,0.00,0.00,0.00,0.00,100.00)
endif
if stage==60 then
call FilterBasic(Player(p-1),0.64,"ReplaceableTextures\\CameraMasks\\Black_mask.blp",0.00,0.00,0.00,255.00,255.00,255.00,100.00,0.00)
endif
if stage==76 then
call SetUnitTimeScale(u,1.0)
call ND(Player(p-1),0.5,100)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_KingLeoric(SDWZ)_E.mdl",0.0,GetUnitX(tar)+(((50)*1.0)*Cos(((angle+180)*1.0)*bj_DEGTORAD)),GetUnitY(tar)+(((50)*1.0)*Sin(((angle+180)*1.0)*bj_DEGTORAD)),2.5,angle,1.0,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_baojiang.mdl",0.0,GetUnitX(tar),GetUnitY(tar),2.5,angle,1.0,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_BloodSlashCRIT.mdl",0.0,GetUnitX(tar),GetUnitY(tar),4.0,270,1.0,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_BloodCut.mdl",0.0,GetUnitX(u)+(((-750)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((-750)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),7.0,angle,1.0,0,-60,300)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_T_Effect3.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,tar)
call Stun(u,tar,2.0)
call FilterBasic(Player(p-1),2.0,"ReplaceableTextures\\CameraMasks\\DiagonalSlash_mask.blp",255.00,0.00,0.00,0.00,0.00,0.00,0.00,100.00)
call Damage(u,tar,Tdmg,1,0,false,1,'H215')
call KnockBackEn(tar,GetUnitX(tar)+(((1000)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(tar)+(((1000)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),0.2,0.01)
endif
if stage>=76 and stage<=81 then
call EFsettingXY(p,"war3mapImported\\@EF_baojiang.mdl",0.0,GetUnitX(tar),GetUnitY(tar),2.5,angle,1.0,0,0,50)
endif
if stage>=85 then
call endMujuk(p,u)
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set tar=null
endfunction
function KaliSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local real tempR
local integer tempI
local integer KaliQStack=LoadInteger(udg_Hash,GetHandleId(u),$B6B1A981)
local real KaliQTimer=LoadInteger(udg_Hash,GetHandleId(u),$3658D760)
local integer KaliWStack=LoadInteger(udg_Hash,GetHandleId(u),$826F2DCE)
local real KaliWTimer=LoadInteger(udg_Hash,GetHandleId(u),$4D37A799)
local integer KaliEStack=LoadInteger(udg_Hash,GetHandleId(u),$F41A3C65)
local real KaliETimer=LoadInteger(udg_Hash,GetHandleId(u),$CD332AF5)
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local real tempX
local real tempY
local unit c
local real Mana
local effect ef
local integer l__Str=GetHeroStr(u,true)
local integer Agi=GetHeroAgi(u,true)
local integer l__Int=GetHeroInt(u,true)
if sk=='H210' then
call BuffCall(u,'B032',10,false,false)
call EFsettingU(p,"war3mapImported\\@EF_AZ_PA_B2.mdl",0,u,"origin")
call EFsettingU(p,"war3mapImported\\@EF_az_daoguang-newx_r.mdl",0,u,"origin")
call EFsettingU(p,"war3mapImported\\@EF_1588.mdl",0,u,"origin")
call ND(GetOwningPlayer(u),0.25,20)
if LoadBoolean(udg_Hash,p,$14D3F587)then
call ShildSet(u,u,10.0,(l__Str+Agi+l__Int)*2.0)
call StatChangeX(p,20,"올탯퍼",10,"H2101")
else
call ShildSet(u,u,10.0,(l__Str+Agi+l__Int)*1.5)
call StatChangeX(p,10,"올탯퍼",10,"H2101")
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Kali_D_Effect1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if sk=='H211' then
call BuffCall(u,'B033',10,false,false)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY))
call Shacull(p)
call SaveReal(udg_Hash,GetHandleId(u),$3658D760,12.0)
if KaliQStack>=5 then
call SaveInteger(udg_Hash,GetHandleId(u),$B6B1A981,5)
else
call SaveInteger(udg_Hash,GetHandleId(u),$B6B1A981,KaliQStack+1)
endif
call SetUnitTimeScale(u,1.4)
call TimerStart(t,0.02,false,function KaliSkillQ)
endif
if sk=='H212' then
call BuffCall(u,'B034',10,false,false)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY))
call Shacull(p)
call SaveReal(udg_Hash,GetHandleId(u),$4D37A799,12.0)
if KaliWStack>=5 then
call SaveInteger(udg_Hash,GetHandleId(u),$826F2DCE,5)
else
call SaveInteger(udg_Hash,GetHandleId(u),$826F2DCE,KaliWStack+1)
endif
call SetUnitTimeScale(u,1.4)
call TimerStart(t,0.02,false,function KaliSkillW)
endif
if sk=='H213' then
call BuffCall(u,'B035',10,false,false)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call Shacull(p)
call SaveReal(udg_Hash,GetHandleId(u),$CD332AF5,12.0)
if KaliEStack>=5 then
call SaveInteger(udg_Hash,GetHandleId(u),$F41A3C65,5)
else
call SaveInteger(udg_Hash,GetHandleId(u),$F41A3C65,KaliEStack+1)
endif
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call SetUnitTimeScale(u,2.0)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=700 then
set tempX=(GetUnitX(u)+(((700)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((700)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
call SaveReal(udg_Hash,GetHandleId(t),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$8BEF6842,tempY)
call TimerStart(t,0.02,false,function KaliSkillE)
endif
if sk=='H214' then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call Shacull(p)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
set tempX=(GetUnitX(u)+(((1800*Skrange[p])*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((1800*Skrange[p])*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
call SaveReal(udg_Hash,GetHandleId(t),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$8BEF6842,tempY)
call TimerStart(t,0.0,false,function KaliSkillR)
endif
if sk=='H215' then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call Shacull(p)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call TimerStart(t,0.0,false,function KaliSkillT)
endif
set u=null
set t=null
set c=null
set tar=null
set ef=null
endfunction
function KaliST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
local timer t
set ChSkillD[p]='H210'
set ChSkillQ[p]='H211'
set ChSkillW[p]='H212'
set ChSkillE[p]='H213'
set ChSkillR[p]='H214'
set ChSkillT[p]='H215'
set Range[p]=300
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_KaliQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_KaliW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_KaliE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_KaliR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_KaliT.blp",0)
endif
set STRup[p]=9
set AGIup[p]=9
set INTup[p]=9
set ADup[p]=4
call SaveReal(udg_Hashtable,p,$8483D54D,1)
call SaveReal(udg_Hashtable,p,$836F3EE3,1)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.4)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$B38981A8,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$FC4D8276,true)
set t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(u),$B6B1A981,0)
call SaveReal(udg_Hash,GetHandleId(u),$3658D760,0.0)
call SaveInteger(udg_Hash,GetHandleId(u),$826F2DCE,0)
call SaveReal(udg_Hash,GetHandleId(u),$4D37A799,0.0)
call SaveInteger(udg_Hash,GetHandleId(u),$F41A3C65,0)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call TimerStart(t,0.0,false,function KaliTimer)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_KaliF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc전설")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"보스전에서 전멸 시 즉시 부활하고 올 스탯이 크게 증가한다. (보스전 당 1회)\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00올 스탯 증가|cffffa500 : 20%\n|cff00ff00모든 피해 증폭율 증가|cffffa500 : 30%\n|cff00ff00모든 받는 피해 감소율 증가|cffffa500 : 20%")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function KaliSkill)
call SaveInteger(udg_Hashtable,p,$5EFF7683,21)
call KaliTT(p)
set t=null
set u=null
set trg=null
endfunction
function KanekiTT takes integer p returns nothing
local unit u=Charcter[p]
local integer Agi=GetHeroAgi(u,true)
local integer Ddmg=R2I((GetHeroAgi(u,true)*4)+(GetUnitState(u,ConvertUnitState(1))*0.08))
local integer Qdmg=R2I(GetHeroAgi(u,true)*(3+((LoadInteger(udg_Hashtable,p,$FAFE5485)*3))))
local integer Wdmg=R2I(GetHeroAgi(u,true)*(6+((LoadInteger(udg_Hashtable,p,$457BCFC0)*6))))
local integer Edmg=R2I((GetHeroAgi(u,true)*(8+((LoadInteger(udg_Hashtable,p,$6074AEF9)*6)))))
local integer RHP=10+(LoadInteger(udg_Hashtable,p,$BB70E228)*5)
local integer RVam=10+(LoadInteger(udg_Hashtable,p,$BB70E228)*5)
local integer Tdmg=R2I(GetHeroAgi(u,true)*(130+((LoadInteger(udg_Hashtable,p,$132FA1F5)*50))))
if LoadBoolean(udg_Hash,p,$2205A105)then
call EXSetAbilityString('H180',1,ABILITY_DATA_UBERTIP,"피해를 받을 시 카구네를 휘둘러 주변에 피해를 입힙니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00데미지|cffffa500 : "+I2S(R2I(Ddmg*1.5))+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00범위|cffffa500 : 500\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(2*ct[p]))+"초\n|cffFF0000EX : |cffffa500피해량이 50% 증가한다.")
else
call EXSetAbilityString('H180',1,ABILITY_DATA_UBERTIP,"피해를 받을 시 카구네를 휘둘러 주변에 피해를 입힙니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00데미지|cffffa500 : "+I2S(Ddmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00범위|cffffa500 : 500\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(2*ct[p]))+"초")
endif
call EXSetAbilityString('H183',1,ABILITY_DATA_UBERTIP,"|cffFF0000체력 소모값 정보 : (최대 체력의 4%)|r\n\n대상을 물어 뜯어버리고 체력을 회복합니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 200\n|cff00ff00효과|cffffa500 : 잃은 체력의 총 17.5% 회복\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(4*ct[p]))+"초")
call EXSetAbilityString('H182',1,ABILITY_DATA_UBERTIP,"|cffFF0000체력 소모값 정보 : (최대 체력의 12%)|r\n\n시전 시 자세를 취하며 기를 모읍니다.\n중단 시 기를 모으는 동안 받은 데미지에 비례한 발차기를 가합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟 / 채널링\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 200\n|cff00ff00범위|cffffa500 : 400\n|cff00ff00효과 1|cffffa500 : 최대 1.5초까지 자세 유지 가능\n|cff00ff00효과 2|cffffa500 : 자세 유지 중 기절 면역 및 모든 피해 감소율 20% 증가\n|cff00ff00효과 3|cffffa500 : 자세 유지 중 받은 피해량이 최대 체력의 1% 마다 피해량 4% 증가\n|cff00ff00효과 4|cffffa500 : 적 2초 기절 및 400 거리 넉백\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(8*ct[p]))+"초")
call EXSetAbilityString('H181',1,ABILITY_DATA_UBERTIP,"|cffFF0000소모 체력 : (최대 체력의 6%)|r\n\n지정한 곳으로 돌진하여 범위 피해를 입힙니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사정거리|cffffa500 : 1200\n|cff00ff00범위|cffffa500 : "+I2S(R2I(550*Skrange[p]))+"\n|cff00ff00효과|cffffa500 : 적 1초 에어본\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(7*ct[p]))+"초")
if LoadBoolean(udg_Hash,p,$2205A105)then
call EXSetAbilityString('H184',1,ABILITY_DATA_UBERTIP,"|cffFF0000체력 소모값 정보 : (현재 체력의 25%)|r\n\n지네 모양의 카구자를 각성하며 강해집니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00체력 스탯 증가|cffffa500 : "+I2S(RVam)+"%\n|cff00ff00모든 피해 증폭율|cffffa500 : "+I2S(RHP)+"%\n|cff00ff00특수|cffffa500 : 변신 중 즉사 제외 받는 피해 100% 감소\n|cff00ff00지속 시간|cffffa500 : 40초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(60*ct[p]))+"초\n|cffFF0000EX : |cffffa500지속시간이 20초 증가한다.")
else
call EXSetAbilityString('H184',1,ABILITY_DATA_UBERTIP,"|cffFF0000체력 소모값 정보 : (현재 체력의 25%)|r\n\n지네 모양의 카구자를 각성하며 강해집니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00체력 스탯 증가|cffffa500 : "+I2S(RVam)+"%\n|cff00ff00모든 피해 증폭율|cffffa500 : "+I2S(RHP)+"%\n|cff00ff00특수|cffffa500 : 변신 중 즉사 제외 받는 피해 100% 감소\n|cff00ff00지속 시간|cffffa500 : 20초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(60*ct[p]))+"초")
endif
call EXSetAbilityString('H185',1,ABILITY_DATA_UBERTIP,"|cffFF0000체력 소모값 정보 : (최대 체력의 20%)|r\n\n대상을 강하게 쳐 날려버립니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 200\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(60*ct[p]))+"초")
set u=null
endfunction
function KanekiEX takes integer p returns nothing
local unit u=Charcter[p]
call SaveBoolean(udg_Hash,p,$2205A105,true)
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_KanekiEXget2.mp3"),(null),(90),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_KanekiEXget.mp3"),(null),(100),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call ProduTime(42,4)
endif
call SetPlayerName(Player(8),"|cffFF8200카네키 켄 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"잘못된 것은 내가 아니야.. 잘못된 것은.. 이 세계다..!")
set u=null
endfunction
function KanekiEDash takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local real dmg
local unit dummy=null
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer g=s__party_create()
local unit gunit
call TimerStart(t,0.01,false,function KanekiEDash)
if IsPointPathableALL(GetUnitX(u)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))and s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)>=150 and s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)<=5000 then
call SetUnitX(u,GetUnitX(u)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(u)+(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u)+(((-60)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((-60)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),angle)
call imagedummy(p,dummy,0.24,2,"Spell -2",Model[p])
call invisible(dummy,40.00,100.00,0.24,0.01)
else
call RemoveShacull(p)
call ND(Player(p-1),0.5,30)
call SetUnitTimeScale(u,1.0)
if KanekiR then
call SetUnitAnimationByIndex(u,13)
else
call SetUnitAnimationByIndex(u,0)
endif
call KnockBackEn(u,GetUnitX(u)+(((150)*1.0)*Cos(((angle+180)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((150)*1.0)*Sin(((angle+180)*1.0)*bj_DEGTORAD)),0.2,0.01)
call EFsettingXY(p,"war3mapImported\\@EF_WarStompCaster.mdl",0.0,GetUnitX(u),GetUnitY(u),3.0,270,1.0,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),550*Skrange[p],null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckPlayerGroup(gunit)then
set dmg=((GetHeroAgi(u,true)*(8+((LoadInteger(udg_Hashtable,p,$6074AEF9)*6)))))
call jumpEn(gunit,1.0,500,0.04)
call Stun(u,gunit,2.0)
call Damage(u,gunit,dmg,1,0,false,1,'H181')
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set u=null
set t=null
call s__party_deallocate((g))
set gunit=null
set dummy=null
endfunction
function KanekiDc takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
call EXSetAbilityState(EXGetUnitAbility(u,'H180'),ABILITY_STATE_COOLDOWN,4)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set u=null
set t=null
endfunction
function KanekiQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer tempI=R2I(GetUnitState(u,ConvertUnitState(0x51)))
local real dmg=GetHeroAgi(u,true)*(3+((LoadInteger(udg_Hashtable,p,$FAFE5485)*3)))
local real HP=(GetUnitState(u,ConvertUnitState(1))-GetUnitState(u,ConvertUnitState(0)))*0.06
set stage=stage+1
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage)
if stage<=4 then
if KanekiR then
call SetUnitAnimationByIndex(u,25)
else
call SetUnitAnimationByIndex(u,11)
endif
call EFsettingU(p,"war3mapImported\\@EF_baojiang.mdl",0.0,tar,"chest")
call EXSetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))
call SetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))
if stage !=1 then
set dmg=dmg*0.5
set HP=HP*0.25
endif
call Damage(u,tar,dmg,1,0,false,1,'H181')
call recoveryHP(u,u,HP,"Abilities\\Spells\\Human\\Heal\\HealTarget.mdl","origin")
if LoadInteger(udg_Hash,GetHandleId(u),$5AFECF56)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiE_Effectnew1.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$5AFECF56,1)
elseif LoadInteger(udg_Hash,GetHandleId(u),$5AFECF56)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiE_Effectnew2.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$5AFECF56,2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$5AFECF56)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiE_Effectnew3.mp3"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$5AFECF56,3)
elseif LoadInteger(udg_Hash,GetHandleId(u),$5AFECF56)==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiE_Effectnew4.mp3"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$5AFECF56,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
call ND(Player(p-1),0.1,15)
call PlaySoundOnUnit(udg_SND,50,tar)
call TimerStart(t,0.05,false,function KanekiQ)
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set u=null
set t=null
set tar=null
endfunction
function KanekiW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer tempI=GetRandomInt(1,3)
local integer tempI2
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local real tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
local real SaveDamage=LoadReal(Hash_Stat,p,$B180EDBA)
local real dmg
local unit gunit
local real angle
local integer g=s__party_create()
set stage=stage+1
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage)
call TimerStart(t,0.01,false,function KanekiW)
if GetUnitCurrentOrder(u)==String2OrderIdBJ("animatedead")and stage<=150 then
if stage==1 then
call EFsettingU(p,"Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",0.0,u,"origin")
call StatUP(p,20,"피감")
if KanekiR then
call SetUnitAnimationByIndex(u,20)
else
call SetUnitAnimationByIndex(u,7)
endif
call SetUnitTimeScale(u,0.4)
endif
elseif GetUnitCurrentOrder(u)!=String2OrderIdBJ("animatedead")or stage>150 then
if UnitAlive(u)then
set SaveDamage=1+(SaveDamage/GetUnitState(u,ConvertUnitState(1)))
call ND(Player(p-1),0.5,R2I(50*SaveDamage))
call EFsettingXY(p,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",0,GetUnitX(u)+(((100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((100)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),4.0,tempR,2.0,90,0,200)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(u)+(((100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((100)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),4.0,tempR,2.0,90,0,200)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),400*Skrange[p],null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckPlayerGroup(gunit)then
set angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))
set dmg=(GetHeroAgi(u,true)*(6+((LoadInteger(udg_Hashtable,p,$457BCFC0)*6))))*SaveDamage
call Damage(u,gunit,dmg,1,0,false,1,'H182')
call Stun(u,gunit,2.0)
call KnockBackEn(gunit,GetUnitX(u)+(((400)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((400)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD)),0.2,0.01)
endif
endloop
endif
call StatUP(p,-20,"피감")
call SaveBoolean(Hash_Stat,p,$4AED8E9E,false)
call SetUnitTimeScale(u,1.0)
call UnitRemoveAbility(u,'A01A')
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set u=null
set t=null
set gunit=null
call s__party_deallocate((g))
endfunction
function KanekiE takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer charge
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local integer tempI
set stage=stage+1
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage)
call TimerStart(t,0.02,false,function KanekiE)
if stage<=20 then
if stage==1 then
if KanekiR then
call SetUnitAnimationByIndex(u,18)
else
call SetUnitAnimationByIndex(u,5)
endif
endif
call ND(Player(p-1),0.05,5)
else
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_WindAttack.mdl",GetUnitX(u)+(((100)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((100)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD)))
call EXEffectMatRotateZ(bj_lastCreatedEffect,GetUnitFacing(u)+180)
call EDestroy(bj_lastCreatedEffect,0.01)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiQ_Effect4.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,50,u)
if KanekiR then
call SetUnitAnimationByIndex(u,18)
else
call SetUnitAnimationByIndex(u,5)
endif
call SetUnitTimeScale(u,100.0)
set t2=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t2),$A59BB4C6,p)
call SaveReal(udg_Hash,GetHandleId(t2),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t2),$8BEF6842,tempY)
call SaveReal(udg_Hash,GetHandleId(t2),$9966AD24,s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY))
call TimerStart(t2,0.0,false,function KanekiEDash)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set u=null
set t=null
set t2=null
endfunction
function KanekiREndTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$6B54C545)
if tempR<=0 then
call EFsettingXY(p,"Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",1.0,GetUnitX(u),GetUnitY(u),3.0,270,1.0,0,0,0)
call AddUnitAnimationProperties(u,"Alternate",false)
call SaveBoolean(udg_Hash,p,$AB91EED3,false)
set KanekiR=false
call SetPlayerAbilityAvailable(Player(p-1),'H184',true)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
set tempR=tempR-1.0
call SaveReal(udg_Hash,GetHandleId(t),$6B54C545,tempR)
call TimerStart(t,1.0,false,function KanekiREndTimer)
endif
set t=null
set u=null
endfunction
function KanekiRTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,0.04,false,function KanekiRTimer)
if stage<=74 then
call SaveBoolean(udg_Hash,GetHandleId(u),$68069668,true)
endif
if stage==0 then
call Shacull(p)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiR.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiR_Effect1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
if GetLocalPlayer()==GetOwningPlayer(u)then
call PanCameraToTimed(GetUnitX(u),GetUnitY(u),0.5)
endif
call FilterBasic(Player(p-1),1.50,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",0.00,0.00,0.00,100.00,0.00,0.00,0.00,0.00)
endif
if stage==1 then
call SetUnitAnimationByIndex(u,26)
endif
if stage==37 then
call EFsettingXY(p,"Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",1.0,GetUnitX(u),GetUnitY(u),3.0,270,1.0,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_BloodBath2.mdl",1.0,GetUnitX(u),GetUnitY(u),2.0,270,0.5,0,0,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiR_Effect2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call FilterBasic(Player(p-1),0.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",255.00,0.00,0.00,0.00,0.00,0.00,0.00,100.00)
call ND(Player(p-1),0.5,50)
endif
if stage==65 then
call AddUnitAnimationProperties(u,"Alternate",true)
set KanekiR=true
call SetPlayerAbilityAvailable(Player(p-1),'H184',false)
call SaveBoolean(udg_Hash,p,$AB91EED3,true)
call RemoveShacull(p)
call SaveBoolean(udg_Hash,GetHandleId(u),$68069668,false)
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$B6A6EBAA,u)
if LoadBoolean(udg_Hash,p,$2205A105)then
call StatChange(p,0.1+(LoadInteger(udg_Hashtable,p,$BB70E228)*0.05),"피증",40)
call StatChange(p,10+(LoadInteger(udg_Hashtable,p,$BB70E228)*5),"체퍼",40)
call BuffCall(u,'B027',40,false,false)
call SaveReal(udg_Hash,GetHandleId(t2),$6B54C545,40)
call TimerStart(t2,1.0,false,function KanekiREndTimer)
else
call StatChange(p,0.1+(LoadInteger(udg_Hashtable,p,$BB70E228)*0.05),"피증",20)
call StatChange(p,10+(LoadInteger(udg_Hashtable,p,$BB70E228)*5),"체퍼",20)
call BuffCall(u,'B027',20,false,false)
call SaveReal(udg_Hash,GetHandleId(t2),$6B54C545,20)
call TimerStart(t2,1.0,false,function KanekiREndTimer)
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set t2=null
set u=null
endfunction
function KanekiT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer tempI
local real tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local real dmg=GetHeroAgi(u,true)*(130+((LoadInteger(udg_Hashtable,p,$132FA1F5)*50)))
set stage=stage+1
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage)
call TimerStart(t,0.04,false,function KanekiT)
if stage==1 then
call ND(Player(p-1),0.3,30)
if KanekiR then
call SetUnitAnimationByIndex(u,41)
else
call SetUnitAnimationByIndex(u,40)
endif
call EXSetUnitFacing(u,tempR)
call SetUnitFacing(u,tempR)
call EFsettingXY(p,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",0,GetUnitX(u)+(((100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((100)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),4.0,tempR,2.0,90,0,200)
call KnockBackEn(tar,GetUnitX(tar)+(((800)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(tar)+(((800)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),1.0,0.04)
call Stun(u,tar,2.0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiT_Effect0.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,50,u)
endif
if stage==20 then
if KanekiR then
call SetUnitAnimationByIndex(u,38)
else
call SetUnitAnimationByIndex(u,37)
endif
call jump(u,1.5,1000,0.01)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiT_Effect1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call EFsettingU(p,"war3mapImported\\@EF_SuperShinyThingy.mdl",1.5,u,"right foot")
endif
if stage>=20 and stage<=50 then
call EXSetUnitFacing(u,tempR)
call SetUnitFacing(u,tempR)
if not IsTerrainPathable(GetUnitX(u)+(((50)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((50)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),PATHING_TYPE_FLYABILITY)and s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))>=100 and s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))<2000 then
call SetUnitX(u,GetUnitX(u)+(((50)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(u)+(((50)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
endif
endif
if stage==50 then
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))<=5000 then
call SetUnitX(u,GetUnitX(tar)+(((100)*1.0)*Cos(((tempR+180)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(tar)+(((100)*1.0)*Sin(((tempR+180)*1.0)*bj_DEGTORAD)))
endif
call EFsettingXY(p,"war3mapImported\\@EF_BY_Wood_Sand_YueKongJi.mdl",0,GetUnitX(tar),GetUnitY(tar),2.0,270,1.0,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",0,GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),4.0,tempR,2.0,300,0,300)
call Damage(u,tar,dmg,1,0,false,1,'H185')
call ND(Player(p-1),1.0,50)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiT_Effect3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage==67 then
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set u=null
set t=null
set tar=null
endfunction
function KanekiSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local real tempR
local integer tempI
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local real tempX
local real tempY
local unit c
local real Mana
local effect ef
if sk=='H180' then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call TimerStart(t,0.02,false,function KanekiDc)
endif
if sk=='H183' then
set Mana=(GetUnitState(u,ConvertUnitState(1))*0.04)
call SaveReal(udg_Hash,sk,$2113522E,Mana)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call TimerStart(t,0.0,false,function KanekiQ)
endif
if sk=='H182' then
set Mana=(GetUnitState(u,ConvertUnitState(1))*0.12)
call SaveReal(udg_Hash,sk,$2113522E,Mana)
if GetUnitState(u,ConvertUnitState(0))<=Mana then
call SetUnitState(u,ConvertUnitState(0),1)
else
call SetUnitState(u,ConvertUnitState(0),(GetUnitState(u,ConvertUnitState(0))-Mana))
endif
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$DA25243A,GetUnitX(u)+(((200)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
call SaveReal(udg_Hash,GetHandleId(t),$8BEF6842,GetUnitY(u)+(((200)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiW.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call UnitAddAbility(u,'A01A')
call SaveBoolean(Hash_Stat,p,$4AED8E9E,true)
call SaveReal(Hash_Stat,p,$B180EDBA,0)
call TimerStart(t,0.0,false,function KanekiW)
endif
if sk=='H181' then
set Mana=(GetUnitState(u,ConvertUnitState(1))*0.06)
call SaveReal(udg_Hash,sk,$2113522E,Mana)
if GetUnitState(u,ConvertUnitState(0))<=Mana then
call SetUnitState(u,ConvertUnitState(0),1)
else
call SetUnitState(u,ConvertUnitState(0),(GetUnitState(u,ConvertUnitState(0))-Mana))
endif
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1200 then
set tempX=(GetUnitX(u)+(((1200)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((1200)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
call SaveReal(udg_Hash,GetHandleId(t),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$8BEF6842,tempY)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiQ.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiQ_Effect3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,70,u)
call Shacull(p)
call TimerStart(t,0.0,false,function KanekiE)
endif
if sk=='H184' then
set Mana=(GetUnitState(u,ConvertUnitState(0))*0.25)
call SaveReal(udg_Hash,sk,$2113522E,Mana)
if GetUnitState(u,ConvertUnitState(0))<=Mana then
call SetUnitState(u,ConvertUnitState(0),1)
else
call SetUnitState(u,ConvertUnitState(0),(GetUnitState(u,ConvertUnitState(0))-Mana))
endif
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call Shacull(p)
call TimerStart(t,0.1,false,function KanekiRTimer)
endif
if sk=='H185' then
set Mana=(GetUnitState(u,ConvertUnitState(1))*0.2)
call SaveReal(udg_Hash,sk,$2113522E,Mana)
if GetUnitState(u,ConvertUnitState(0))<=Mana then
call SetUnitState(u,ConvertUnitState(0),1)
else
call SetUnitState(u,ConvertUnitState(0),(GetUnitState(u,ConvertUnitState(0))-Mana))
endif
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call Shacull(p)
call Mujuk(p,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KanekiT2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call TimerStart(t,0.1,false,function KanekiT)
endif
set u=null
set t=null
set c=null
set tar=null
set ef=null
endfunction
function KanekiST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
set ChSkillD[p]='H180'
set ChSkillQ[p]='H183'
set ChSkillW[p]='H182'
set ChSkillE[p]='H181'
set ChSkillR[p]='H184'
set ChSkillT[p]='H185'
set Attack2[p]=4
set Range[p]=250
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_KanekiE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_KanekiW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_KanekiQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_KanekiR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_KanekiT.blp",0)
endif
set STRup[p]=12
set AGIup[p]=6
set INTup[p]=1
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,1)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.95)
call StatUP(p,0.1,"물리흡")
call StatUP(p,0.1,"회복효율")
call StatUP(p,0.05,"방어관통")
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.4)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$7053185D,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$FCD961C9,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$FCD961C9,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$869CD2F9,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$FCD961C9,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$FCD961C9,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_KanekiF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc구울")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"물리 흡혈과 받는 회복량 및 방어 관통율이 증가합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00물리 흡혈 증가|cffffa500 : 10%\n|cff00ff00받는 회복량 증가|cffffa500 : 10%\n|cff00ff00방어 관통율|cffffa500 : 5%")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function KanekiSkill)
call SaveInteger(udg_Hashtable,p,$5EFF7683,18)
call KanekiTT(p)
set u=null
set trg=null
endfunction
function KazusaTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer Agi=GetHeroAgi(u,true)
local integer Ddmg=R2I(GetUnitState(u,ConvertUnitState(0x14))*2.5)
local integer Ddmg2=R2I(GetUnitState(u,ConvertUnitState(0x14))*3.5)
local integer Qdmg=R2I(Agi*(0.5+(LoadInteger(udg_Hashtable,p,$FAFE5485)*0.15)))
local integer Qdmg2=R2I(Agi*(0.5+(LoadInteger(udg_Hashtable,p,$FAFE5485)*0.15)))+R2I(GetUnitState(u,ConvertUnitState(0x14))*0.075)
local integer WLv=LoadInteger(udg_Hashtable,p,$457BCFC0)
local integer Wdmg=R2I(GetUnitState(u,ConvertUnitState(1))*(0.05+(WLv*0.04)))+(WLv*300)
local integer Wdmg2=R2I(GetUnitState(u,ConvertUnitState(1))*(0.065+(WLv*0.052)))+(WLv*390)
local integer Edmg=R2I(Agi*(0.55+LoadInteger(udg_Hashtable,p,$6074AEF9)*0.45))
local integer Edmg2=R2I(Agi*(0.55+LoadInteger(udg_Hashtable,p,$6074AEF9)*0.45))+R2I(GetUnitState(u,ConvertUnitState(0x14))*0.5)
local integer Ad=R2I(GetUnitState(u,ConvertUnitState(0x51)))
local integer Ebullet=14+(Ad*4)
local integer Rdmg=(Agi*(5+(LoadInteger(udg_Hashtable,p,$BB70E228)*13)))+R2I(GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$BB70E228)*10))
local integer Rdmg2=(Agi*(5+(LoadInteger(udg_Hashtable,p,$BB70E228)*13)))+R2I(GetUnitState(u,ConvertUnitState(0x14))*(10+(LoadInteger(udg_Hashtable,p,$BB70E228)*10)))
local integer TLv=LoadInteger(udg_Hashtable,p,$132FA1F5)
if LoadBoolean(System,p,$E9917373)then
set Edmg=Edmg+R2I(Em*Kirie[p])
set Rdmg=Rdmg+R2I(Rm*Kirie[p])
endif
if LoadBoolean(udg_Hashtable,GetHandleId(u),$CF16D639)then
call EXSetAbilityString('H130',1,ABILITY_DATA_UBERTIP,"기본 공격시 공격속도가 상승하며 최대치 중첩시 공격 간격이 감소합니다.\n\n|cff00ff00기본 공격 3회당|cffffa500 : "+I2S(Ddmg2)+"의 추가 피해\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00공격속도 상승|cffffa500 : 4%\n|cff00ff00최대 중첩량|cffffa500 : 20\n|cff00ff00최대치 중첩시 공격 간격 감소|cffffa500 : 0.1\n|cff00ff00지속시간|cffffa500 : 30초")
else
call EXSetAbilityString('H130',1,ABILITY_DATA_UBERTIP,"기본 공격시 공격속도가 상승하며 최대치 중첩시 공격 간격이 감소합니다.\n\n|cff00ff00기본 공격 3회당|cffffa500 : "+I2S(Ddmg)+"의 추가 피해\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00공격속도 상승|cffffa500 : 4%\n|cff00ff00최대 중첩량|cffffa500 : 20\n|cff00ff00최대치 중첩시 공격 간격 감소|cffffa500 : 0.1\n|cff00ff00지속시간|cffffa500 : 6초")
endif
if LoadBoolean(udg_Hash,p,$54D70DAE)then
if LoadBoolean(udg_Hashtable,GetHandleId(u),$94C2158E)then
call EXSetAbilityString('H131',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 지점을 향해 질주하며 이동후 지속시간동안 기본 공격이 강화됩니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 650\n|cff00ff00지속시간|cffffa500 : 8초\n|cff00ff00특수|cffffa500 : 돌진중 무적을 유지한다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(4*ct[p]))+"초\n|cffFF0000EX : |cffffa500돌진중 무적상태가 된다.")
else
call EXSetAbilityString('H131',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 지점을 향해 질주하며 이동후 지속시간동안 기본 공격이 강화됩니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 650\n|cff00ff00스킬 강화|cffffa500 : 쿨타임이 6초 감소합니다.\n|cff00ff00지속시간|cffffa500 : 8초\n|cff00ff00특수|cffffa500 : 돌진중 무적을 유지한다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(10*ct[p]))+"초\n|cffFF0000EX : |cffffa500돌진중 무적상태가 된다.")
endif
else
if LoadBoolean(udg_Hashtable,GetHandleId(u),$94C2158E)then
call EXSetAbilityString('H131',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 지점을 향해 질주하며 이동후 지속시간동안 기본 공격이 강화됩니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 650\n|cff00ff00지속시간|cffffa500 : 8초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(4*ct[p]))+"초")
else
call EXSetAbilityString('H131',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 지점을 향해 질주하며 이동후 지속시간동안 기본 공격이 강화됩니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 650\n|cff00ff00스킬 강화|cffffa500 : 쿨타임이 6초 감소합니다.\n|cff00ff00지속시간|cffffa500 : 8초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(10*ct[p]))+"초")
endif
endif
if LoadBoolean(udg_Hashtable,GetHandleId(u),$FB2863CE)then
call EXSetAbilityString('H132',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n달콤한것을 보충해서 체력을 회복합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00회복량|cffffa500 : "+I2S(Wdmg2)+"\n|cff00ff00특수|cffffa500 : 사용후 전력 질주의 쿨타임을 초기화시킵니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I((24-(WLv*2))*ct[p]))+"초")
else
call EXSetAbilityString('H132',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n달콤한것을 보충해서 체력을 회복합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00회복량|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00스킬 강화|cffffa500 : 회복량이 30% 상승하고 사용후 전력 질주의 쿨타임을 초기화시킵니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I((24-(WLv*2))*ct[p]))+"초")
endif
if LoadBoolean(udg_Hashtable,GetHandleId(u),$BDB2E45A)then
call EXSetAbilityString('H133',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n해당 방향을 쳐다보며 해당 방향으로 연속 사격을 합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00탄환 갯수|cffffa500 : "+I2S(Ebullet)+"\n|cff00ff00사거리|cffffa500 : 1800\n|cff00ff00특수 2|cffffa500 : 전력질주 효과를 보유중일경우 피해량이 그만큼 상승한다.\n|cff00ff00범위|cffffa500 : "+I2S(R2I(230*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초")
else
call EXSetAbilityString('H133',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n해당 방향을 쳐다보며 해당 방향으로 연속 사격을 합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00탄환 갯수|cffffa500 : "+I2S(Ebullet)+"\n|cff00ff00사거리|cffffa500 : 1800\n|cff00ff00범위|cffffa500 : "+I2S(R2I(230*Skrange[p]))+"\n|cff00ff00스킬 강화|cffffa500 : 탄환당 (공격력 x 0.5)의 피해가 상승하고 전력질주 효과를 보유중일경우 피해량이 그만큼 상승한다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초")
endif
if LoadBoolean(udg_Hashtable,GetHandleId(u),$D98232EE)then
call EXSetAbilityString('H134',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n대상에게 연속 사격을 가합니다.\n\n|cff00ff00타입|cffffa500 : 유닛 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 1800\n|cff00ff00특수 1|cffffa500 : 탄환이 스킬이 아닌 기본 공격 판정을 가진다.\n|cff00ff00특수 2|cffffa500 : 400%를 초과한 공격속도 100%당 피해량이 15% 증가한다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(25*ct[p]))+"초")
else
call EXSetAbilityString('H134',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n대상에게 연속 사격을 가합니다.\n\n|cff00ff00타입|cffffa500 : 유닛 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 1800\n|cff00ff00스킬 강화|cffffa500 : 탄환이 스킬이 아닌 기본 공격 판정을 가지며 (공격력 x 10)의 피해가 상승하고 400%를 초과한 공격속도에 추가피해가 발생한다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(25*ct[p]))+"초")
endif
if LoadBoolean(udg_Hash,p,$54D70DAE)then
call EXSetAbilityString('H135',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n사용시 폭주 상태로 들어갑니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00모든 피해 증폭율 상승|cffffa500 : "+I2S(5+(TLv*5))+"% \n|cff00ff00공격속도 상승|cffffa500 : "+I2S(TLv*150)+"% \n|cff00ff00특수|cffffa500 : 공격속도가 400%를 넘을경우 넘어간 수치 150%당 공격 간격이 0.02초 감소한다. (최대 0.1초)\n|cff00ff00지속시간|cffffa500 : 30초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(60*ct[p]))+"초\n|cffFF0000EX : |cffffa500공격속도에 비례해 공격간격이 감소하는 효과가 추가된다.")
else
call EXSetAbilityString('H135',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n사용시 폭주 상태로 들어갑니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00모든 피해 증폭율 상승|cffffa500 : "+I2S(5+(TLv*5))+"% \n|cff00ff00공격속도 상승|cffffa500 : "+I2S(TLv*150)+"% \n|cff00ff00지속시간|cffffa500 : 30초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(60*ct[p]))+"초")
endif
set u=null
endfunction
function KazusaEX takes integer p returns nothing
call SaveBoolean(udg_Hash,p,$54D70DAE,true)
call KazusaTT(p)
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaExBGM.mp3"),(null),(107),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaEx.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call ProduTime(36,4)
endif
call SetPlayerName(Player(8),"|cff9932cc쿄야마 카즈사 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"기왕 하는거 제대로 해주겠어!")
endfunction
function KazusaQt takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real time=LoadReal(udg_Hash,GetHandleId(t),$6B54C545)
local real distance=LoadReal(udg_Hash,GetHandleId(t),$47527379)
local real distance2=LoadReal(udg_Hash,GetHandleId(t),$CE3B7D5A)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX
local real tempY
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local unit dummy
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage<=9 then
if LoadBoolean(udg_Hash,p,$54D70DAE)then
call Mujuk(p,u)
endif
call SetUnitAnimation(u,"walk")
if distance2<=40 then
set stage=10
else
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),angle)
call imagedummy(p,dummy,0.12,2,"walk",Model[p])
call invisible(dummy,40.00,100.00,0.12,0.01)
set tempX=GetUnitX(u)+(((distance*0.1)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((distance*0.1)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SaveReal(udg_Hash,GetHandleId(t),$CE3B7D5A,distance2-(distance*0.1))
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
endif
endif
if stage==10 then
if LoadBoolean(udg_Hash,p,$54D70DAE)then
call endMujuk(p,u)
endif
call RemoveShacull(p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,100)
call TimerStart(t,0.04,true,function KazusaQt)
call BuffCall(u,'B022',8,false,false)
call IssuePointOrder(u,"attack",GetUnitX(u),GetUnitY(u))
endif
if stage>=100 and time<=0 then
call SaveBoolean(udg_Hash,GetHandleId(u),$DA50E3EB,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
elseif stage>=100 and time>=0 then
call SaveReal(udg_Hash,GetHandleId(t),$6B54C545,time-0.04)
endif
set t=null
set u=null
set dummy=null
endfunction
function KazusaW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer tempI=LoadInteger(udg_Hashtable,p,$457BCFC0)
call EXSetAbilityState(EXGetUnitAbility(u,'H132'),ABILITY_STATE_COOLDOWN,(24-(tempI*2))*ct[p])
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function KazusaEbulletT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$CF3130A7)
local unit c
local effect ef1=LoadEffectHandle(udg_Hash,GetHandleId(t),$1A2A361D)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real tempX
local real tempY
local real time=LoadReal(udg_Hash,GetHandleId(t),$6B54C545)
local real dmg
local integer g=s__party_create()
call SaveReal(udg_Hash,GetHandleId(t),$6B54C545,time-1)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),230,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
set time=0
endif
endloop
if time<=0 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
if LoadBoolean(udg_Hashtable,GetHandleId(Charcter[p]),$BDB2E45A)then
set dmg=(GetHeroAgi(Charcter[p],true)*(0.55+(LoadInteger(udg_Hashtable,p,$6074AEF9)*0.45)))+(GetUnitState(Charcter[p],ConvertUnitState(0x14))*0.5)
elseif not LoadBoolean(udg_Hashtable,GetHandleId(Charcter[p]),$BDB2E45A)then
set dmg=GetHeroAgi(Charcter[p],true)*(0.55+(LoadInteger(udg_Hashtable,p,$6074AEF9)*0.45))
endif
if LoadBoolean(udg_Hash,GetHandleId(u),$DA50E3EB)then
if LoadBoolean(udg_Hashtable,GetHandleId(u),$94C2158E)then
set dmg=dmg+(GetHeroAgi(u,true)*(0.5+(LoadInteger(udg_Hashtable,p,$FAFE5485)*0.15)))+(GetUnitState(u,ConvertUnitState(0x14))*0.075)
else
set dmg=dmg+(GetHeroAgi(u,true)*(0.5+(LoadInteger(udg_Hashtable,p,$FAFE5485)*0.15)))
endif
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),230*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
set time=0
call Damage(Charcter[p],c,dmg,1,0,false,1,'H133')
call EFsettingXY(p,"war3mapImported\\@EF_AZ_KingLeoric(SDWZ)_E.mdl",0,GetUnitX(c),GetUnitY(c),1,GetRandomReal(1,360),1,0,0,0)
endif
endloop
call RemoveUnit(u)
call DestroyEffect(ef1)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
set tempX=GetUnitX(u)+(((180)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((180)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set ef1=null
endfunction
function KazusaEbullet takes unit u,integer p returns nothing
local timer t
local real tempX
local real tempY
local real angle=GetUnitFacing(u)
local unit dummy
local effect ef
set tempX=GetUnitX(u)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_ShootG1e.mdl",0,tempX,tempY,0.6,angle,1,0,0,100)
if LoadInteger(udg_Hash,GetHandleId(u),$E129CFB5)==0 then
set tempX=GetUnitX(u)+(((250)*1.0)*Cos(((angle+15)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((250)*1.0)*Sin(((angle+15)*1.0)*bj_DEGTORAD))
call SaveInteger(udg_Hash,GetHandleId(u),$E129CFB5,1)
else
set tempX=GetUnitX(u)+(((250)*1.0)*Cos(((angle-15)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((250)*1.0)*Sin(((angle-15)*1.0)*bj_DEGTORAD))
call SaveInteger(udg_Hash,GetHandleId(u),$E129CFB5,0)
endif
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call SetUnitFlyHeight(dummy,150,0)
set ef=EFsettingUcustom(p,"war3mapImported\\@EF_Long_Bullet.mdl",dummy,"origin")
set t=CreateTimer()
call SaveEffectHandle(udg_Hash,GetHandleId(t),$1A2A361D,ef)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$CF3130A7,dummy)
call SaveReal(udg_Hash,GetHandleId(t),$6B54C545,10)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call TimerStart(t,0.02,true,function KazusaEbulletT)
set t=null
set u=null
set dummy=null
set ef=null
endfunction
function KazusaEdummyT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real time=LoadReal(udg_Hash,GetHandleId(t),$6B54C545)
call SaveReal(udg_Hash,GetHandleId(t),$6B54C545,time-0.04)
if time<=0 then
call UnitRemoveAbility(u,'Abun')
call SetPlayerAbilityAvailable(Player(p-1),'H134',true)
call RemoveUnit(dummy)
call SetUnitVertexColor(u,255,255,255,255)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call SetUnitVertexColor(u,0,0,0,0)
call SetUnitX(dummy,GetUnitX(u))
call SetUnitY(dummy,GetUnitY(u))
endif
set t=null
set u=null
set dummy=null
endfunction
function KazusaEdummy takes unit u,unit dummy,integer p returns nothing
local timer t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveReal(udg_Hash,GetHandleId(t),$6B54C545,4)
call TimerStart(t,0.04,true,function KazusaEdummyT)
set t=null
set u=null
set dummy=null
endfunction
function KazusaE takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX
local real tempY
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$393F2DD3)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$CF3130A7)
local integer tempI=R2I(GetUnitState(u,ConvertUnitState(0x51)))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call SetUnitVertexColor(u,0,0,0,0)
set tempR=14+(tempI*4)
call SaveReal(udg_Hash,GetHandleId(t),$393F2DD3,tempR)
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),angle)
call DzSetUnitModel(dummy,Model[p])
call SetUnitScale(dummy,2,1,1)
call SetUnitAnimationByIndex(dummy,14)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$CF3130A7,dummy)
call KazusaEdummy(u,dummy,p)
call UnitAddAbility(u,'Abun')
call TimerStart(t,4/tempR,true,function KazusaE)
endif
if stage>=1 and tempR>=1 then
if LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaE_Shot.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,1)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaE_Shot.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaE_Shot.mp3"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,3)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaE_Shot.mp3"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,4)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaE_Shot.mp3"),("5"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,5)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaE_Shot.mp3"),("6"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
call SaveReal(udg_Hash,GetHandleId(t),$393F2DD3,tempR-1)
call SetUnitX(dummy,GetUnitX(u))
call SetUnitY(dummy,GetUnitY(u))
call ND(Player(p-1),0.03,20)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
call KazusaEbullet(dummy,p)
endif
if tempR<=0 then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set dummy=null
endfunction
function KazusaR takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$580C1005)
local unit dummy
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local real tempX=0
local real tempY=0
local real tempR
local real dmg
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call SetUnitFacing(u,angle)
call EXSetUnitFacing(u,angle)
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Reload.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call SetUnitAnimationByIndex(u,8)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(u),GetUnitY(u),1,270,1,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",0,GetUnitX(u),GetUnitY(u),1,270,1,0,0,0)
endif
if stage==15 or stage==20 or stage==25 or stage==30 then
if LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Shot1.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,1)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Shot1.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Shot1.mp3"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,3)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)>=3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Shot1.mp3"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
call SetUnitAnimationByIndex(u,9)
call ND(Player(p-1),0.12,30)
set tempX=GetUnitX(u)+(((125)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((125)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_VFX_Burn_DRedPup2.mdl",0,tempX,tempY,1.5,angle,1,0,0,-100)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_RED_WindWeak3b.mdl",0,tempX,tempY,0.25,angle,1,90,0,150)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call SetUnitFlyHeight(dummy,120,0)
call EFsettingU(p,"war3mapImported\\@EF_VFX_Firebrand_Shot_PZRED1.mdl",0.162,dummy,"origin")
call KnockBackXY(dummy,GetUnitX(tar),GetUnitY(tar),0.162,0.01)
call SetUnitScale(dummy,2,1,1)
call UnitApplyTimedLife(dummy,'BHwe',0.162)
set tempX=GetUnitX(u)+(((200)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((200)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_VFX_RED_WindWeak3b.mdl",0,tempX,tempY,0.15,angle,1,90,0,150)
endif
if stage==19 or stage==24 or stage==29 or stage==34 then
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ERE_LightningcloudRed.mdl",0,tempX,tempY,2,270,1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_RED_misslieAZ_HIT7_4.mdl",0,tempX,tempY,1,270,1,0,0,100)
if LoadBoolean(udg_Hashtable,GetHandleId(u),$D98232EE)then
set dmg=((GetHeroAgi(u,true)*(5+(LoadInteger(udg_Hashtable,p,$BB70E228)*13)))+(GetUnitState(u,ConvertUnitState(0x14))*(10+(LoadInteger(udg_Hashtable,p,$BB70E228)*10))))*0.1
set tempR=GetUnitState(u,ConvertUnitState(0x51))
set tempR=tempR-4
if tempR>=1 then
set tempR=tempR/1
set tempR=R2I(tempR)
set tempR=(tempR*0.15)
set dmg=dmg*(1+tempR)
endif
elseif not LoadBoolean(udg_Hashtable,GetHandleId(u),$D98232EE)then
set dmg=GetHeroAgi(u,true)*(5+(LoadInteger(udg_Hashtable,p,$BB70E228)*13))+(GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$BB70E228)*10))
endif
if LoadBoolean(udg_Hashtable,GetHandleId(u),$D98232EE)then
call UnitDamageTarget(u,tar,dmg,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
else
call Damage(u,tar,dmg,1,0,false,0.1,'H134')
endif
endif
if stage==35 then
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ERE_CAST_LightningRed.mdl",1,tempX,tempY,1,270,1,0,0,100)
endif
if stage>=35 and stage<=52 then
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if stage-(stage/2)*2==0 then
call EFsettingXY(p,"war3mapImported\\@EF_AZ_PotMred_W1_chest.mdl",0,tempX,tempY,1,270,2,0,GetRandomInt(1,360),80)
endif
endif
if stage==55 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Shot2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempX=GetUnitX(u)+(((-150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_nitu2.mdl",0,tempX,tempY,1,angle,1,0,0,0)
call KnockBackXY(u,tempX,tempY,0.12,0.01)
call EFsettingU(p,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",0,u,"origin")
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),angle)
call EFsettingU(p,"war3mapImported\\@EF_Dash Sfx.mdl",0,dummy,"origin")
call UnitApplyTimedLife(dummy,'BHwe',0.12)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(u),GetUnitY(u),1,270,1,0,0,0)
call ND(Player(p-1),0.12,50)
set tempX=GetUnitX(u)+(((125)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((125)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_VFX_Burn_DRedPup2.mdl",0,tempX,tempY,1.5,angle,1,0,0,-100)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_RED_WindWeak3b.mdl",0,tempX,tempY,0.25,angle,1,90,0,150)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call SetUnitFlyHeight(dummy,120,0)
call EFsettingU(p,"war3mapImported\\@EF_VFX_Firebrand_Shot_PZRED1.mdl",0.162,dummy,"origin")
call KnockBackXY(dummy,GetUnitX(tar),GetUnitY(tar),0.162,0.01)
call SetUnitScale(dummy,2,1,1)
call UnitApplyTimedLife(dummy,'BHwe',0.162)
set tempX=GetUnitX(u)+(((200)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((200)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_VFX_RED_WindWeak3b.mdl",0,tempX,tempY,0.15,angle,1,90,0,150)
endif
if stage==59 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Finish_Hit.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ERE_LightningcloudRed.mdl",0,tempX,tempY,2,270,1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_Singularity I Red.mdl",0,tempX,tempY,2,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_RED_misslieAZ_HIT7_4.mdl",0,tempX,tempY,1,270,1,0,0,100)
if LoadBoolean(udg_Hashtable,GetHandleId(u),$D98232EE)then
set dmg=((GetHeroAgi(u,true)*(5+(LoadInteger(udg_Hashtable,p,$BB70E228)*13)))+(GetUnitState(u,ConvertUnitState(0x14))*(10+(LoadInteger(udg_Hashtable,p,$BB70E228)*10))))*0.6
set tempR=GetUnitState(u,ConvertUnitState(0x51))
set tempR=tempR-4
if tempR>=1 then
set tempR=tempR/1
set tempR=R2I(tempR)
set tempR=(tempR*0.15)
set dmg=dmg*(1+tempR)
endif
elseif not LoadBoolean(udg_Hashtable,GetHandleId(u),$D98232EE)then
set dmg=GetHeroAgi(u,true)*(5+(LoadInteger(udg_Hashtable,p,$BB70E228)*13))+(GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$BB70E228)*10))
endif
if LoadBoolean(udg_Hashtable,GetHandleId(u),$D98232EE)then
call UnitDamageTarget(u,tar,dmg,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
else
call Damage(u,tar,dmg,1,0,false,0.6,'H134')
endif
endif
if stage==60 then
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call TimerStart(t,0.04,false,function KazusaR)
set t=null
set u=null
set tar=null
set dummy=null
endfunction
function KazusaTt takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real time=LoadReal(udg_Hash,GetHandleId(t),$6B54C545)
local real tempR=LoadReal(udg_Hashtable,p,$46D2FE81)
local real tempR2=0
call SaveReal(udg_Hash,GetHandleId(t),$6B54C545,time-0.08)
set tempR=tempR+LoadReal(udg_Hash,GetHandleId(t),$AB994E47)
if time<=0 then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
if LoadBoolean(udg_Hash,p,$54D70DAE)then
set tempR2=GetUnitState(u,ConvertUnitState(0x51))
set tempR2=tempR2-4
if tempR2>=1.5 then
set tempR2=tempR2/1.5
set tempR2=R2I(tempR2)
if tempR2>=5 then
set tempR2=5
endif
set tempR2=(tempR2*0.02)
else
set tempR2=0
endif
call SaveReal(udg_Hash,GetHandleId(t),$AB994E47,tempR2)
endif
endif
set tempR=tempR-tempR2
call SaveReal(udg_Hashtable,p,$46D2FE81,tempR)
call SetUnitState(u,ConvertUnitState(0x25),tempR)
set t=null
set u=null
endfunction
function KazusaSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local unit c
local real tempX=GetSpellTargetX()
local real tempY=GetSpellTargetY()
local real tempX2
local real tempY2
local real mana
local integer tempI=0
local integer tempI2=0
local integer tempI3=0
local real tempR
local real tempR2
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real Mana
if GetSpellAbilityId()=='H131' then
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call StopSound(LastSound[p],false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaQ.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
set LastSound[p]=udg_SND
call PlaySoundOnUnit(udg_SND,100.00,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaQef.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempX2=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
set tempR=s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
if tempR>=650 then
set tempR=650
endif
call DestroyTimer(t)
set t=KazusaQ
call SaveBoolean(udg_Hash,GetHandleId(u),$DA50E3EB,true)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveReal(udg_Hash,GetHandleId(t),$6B54C545,8)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempX2)
call SaveReal(udg_Hash,GetHandleId(t),$47527379,tempR)
call SaveReal(udg_Hash,GetHandleId(t),$CE3B7D5A,tempR)
call Shacull(p)
call TimerStart(t,0.02,true,function KazusaQt)
endif
if GetSpellAbilityId()=='H132' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call StopSound(LastSound[p],false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaW.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
set LastSound[p]=udg_SND
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempI=LoadInteger(udg_Hashtable,p,$457BCFC0)
if LoadBoolean(udg_Hashtable,GetHandleId(u),$FB2863CE)then
call recoveryHP(u,u,((GetUnitState(u,ConvertUnitState(1))*(0.065+(tempI*0.052)))+(tempI*390)),"","origin")
call EXSetAbilityState(EXGetUnitAbility(u,'H131'),ABILITY_STATE_COOLDOWN,0)
else
call recoveryHP(u,u,((GetUnitState(u,ConvertUnitState(1))*(0.05+(tempI*0.04)))+(tempI*300)),"","origin")
endif
call EFsettingU(p,"war3mapImported\\@EF_7901.mdl",1,u,"origin")
call EFsettingU(p,"Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl",0,u,"origin")
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call TimerStart(t,0.01,false,function KazusaW)
endif
if GetSpellAbilityId()=='H133' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call StopSound(LastSound[p],false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaE.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
set LastSound[p]=udg_SND
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempX2=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempX2)
call UnitAddAbility(u,'Abun')
call SetPlayerAbilityAvailable(Player(p-1),'H134',false)
call TimerStart(t,0.02,false,function KazusaE)
endif
if GetSpellAbilityId()=='H134' then
set Mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call StopSound(LastSound[p],false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
set LastSound[p]=udg_SND
call PlaySoundOnUnit(udg_SND,100.00,u)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$580C1005,tar)
call Shacull(p)
call TimerStart(t,0.02,false,function KazusaR)
endif
if GetSpellAbilityId()=='H135' then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call StopSound(LastSound[p],false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaT.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
set LastSound[p]=udg_SND
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempI=LoadInteger(udg_Hashtable,p,$132FA1F5)
call StatChangeX(p,0.1+(tempI*0.05),"피증",30,"H1350")
call StatChangeX(p,tempI*150,"공속",30,"H1351")
call BuffCall(u,'B020',30,false,false)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveReal(udg_Hash,GetHandleId(t),$6B54C545,30)
call EFsettingU(p,"war3mapImported\\@Aura_Z_Ora_beam(pink).mdl",25,u,"origin")
call TimerStart(t,0.08,true,function KazusaTt)
endif
set u=null
set tar=null
set c=null
set t=null
endfunction
function KazusaST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
set ChSkillD[p]='H130'
set ChSkillQ[p]='H131'
set ChSkillW[p]='H132'
set ChSkillE[p]='H133'
set ChSkillR[p]='H134'
set ChSkillT[p]='H135'
set Range[p]=1000
set LastSound[p]=null
if GetLocalPlayer()==Player(p-1)then
call DzFrameShow(DzFrameFindByName("Sk2_Button",0),true)
call DzFrameShow(DzFrameFindByName("Sk2_MiniIconNameBack",0),true)
call DzFrameShow(DzFrameFindByName("SkillLvUP2",0),true)
endif
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
call UnitAddAbility(u,'Amrf')
call UnitRemoveAbility(u,'Amrf')
call SaveReal(udg_Hash,GetHandleId(u),$C41A3DB7,3)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_KazusaQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_KazusaW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_KazusaE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_KazusaR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_KazusaT.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk2_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_KazusaQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk2_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_KazusaW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk2_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_KazusaE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk2_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_KazusaR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk2_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_KazusaD.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk2_SkillIcon",6),"ReplaceableTextures\\CommandButtons\\BTNC_KazusaF.blp",0)
endif
set STRup[p]=10
set AGIup[p]=7
set INTup[p]=2
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,70)
call SaveReal(udg_Hashtable,p,$43C91172,0.35)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.8)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$9B58470C,75)
call SaveReal(udg_Hashtable,p,$88E0F85F,50)
call SaveReal(udg_Hashtable,p,$E755DDB8,200)
call SaveReal(udg_Hashtable,p,$ABD3E955,100)
call SaveReal(udg_Hashtable,p,$A2229E00,250)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,125)
call SaveReal(udg_Hashtable,p,$C3EA9E83,500)
call SaveReal(udg_Hashtable,p,$A8D71652,250)
call SaveReal(udg_Hashtable,p,$127510D2,1250)
call SaveReal(udg_Hashtable,p,$B491D29B,750)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$7053185D,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$33B724A0,true)
call SaveInteger(udg_Hash,GetHandleId(u),$1EAE4B11,20)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_KazusaF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc달콤한게 좋아")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"적을 처치시 낮은 확률로 마카롱 티켓을 획득합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00특수|cffffa500 : 티켓이 20개가 모이면 캐릭터 상태창 왼쪽의 마카롱 아이콘을 클릭해 스킬을 강화할수있습니다.")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function KazusaSkill)
call SaveInteger(udg_Hashtable,p,$5EFF7683,13)
call KazusaTT(p)
set u=null
set trg=null
endfunction
function MeilingTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer l__Int=GetHeroInt(u,true)
local real Armor=GetUnitState(u,ConvertUnitState(0x20))
local integer Qdmg=R2I((l__Int*(5+(LoadInteger(udg_Hashtable,p,$FAFE5485)*4)))*(1+(Armor*0.001)))
local integer Wdmg=R2I((l__Int*(4+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6)))*(1+(Armor*0.0015)))
local integer Edmg=R2I((l__Int*(7+(LoadInteger(udg_Hashtable,p,$6074AEF9)*5)))*(1+(Armor*0.001)))
local integer Rdmg=LoadInteger(udg_Hashtable,p,$BB70E228)*50
local integer Rdmg2=LoadInteger(udg_Hashtable,p,$BB70E228)*50
local integer Rdmg3=LoadInteger(udg_Hashtable,p,$BB70E228)*10
local integer Rdmg4=15+(LoadInteger(udg_Hashtable,p,$BB70E228)*5)
local integer Rdmg5=10+(LoadInteger(udg_Hashtable,p,$BB70E228)*5)
local integer Tdmg1=R2I((l__Int*(2.5+(LoadInteger(udg_Hashtable,p,$132FA1F5)*17.5)))*(1+(Armor*0.0015)))
local integer Tdmg2=R2I((l__Int*(55+(LoadInteger(udg_Hashtable,p,$132FA1F5)*25)))*(1+(Armor*0.0005)))
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Qm*Kirie[p])
set Qdmg=Qdmg+R2I(Wm*Kirie[p])
set Edmg=Edmg+R2I(Em*Kirie[p])
set Tdmg2=Tdmg2+R2I(Tm*Kirie[p])
endif
if LoadBoolean(udg_Hash,p,$70A11F58)then
call EXSetAbilityString('H120',1,ABILITY_DATA_UBERTIP,"사용시 명상 상태로 들어가 모든 받는 피해 감소가 증가하고 집중을 유지하는동안 초당 체력을 회복한다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00받는 피해 감소 증가|cffffa500 : 30%\n|cff00ff00초당 회복량|cffffa500 : 8%\n|cff00ff00특수|cffffa500 : 채널링을 지속하는동안 스턴에 걸리지않는다.\n|cff00ff00최대 채널링 시간|cffffa500 : 5초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(30*ct[p]))+"초\n|cffFF0000EX : |cffffa500받는 피해 감소 증가량이 상승하고 채널링중 스턴에 면역이된다.")
else
call EXSetAbilityString('H120',1,ABILITY_DATA_UBERTIP,"사용시 명상 상태로 들어가 모든 받는 피해 감소가 증가하고 집중을 유지하는동안 초당 체력을 회복한다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00받는 피해 감소 증가|cffffa500 : 15%\n|cff00ff00초당 회복량|cffffa500 : 8%\n|cff00ff00최대 채널링 시간|cffffa500 : 5초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(30*ct[p]))+"초")
endif
call EXSetAbilityString('H121',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 방향을 내려찍어서 적들을 공중으로 띄워올리고 스턴을 가합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00스턴|cffffa500 : 1초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(5*ct[p]))+"초")
call EXSetAbilityString('H122',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n대상에게 돌진해서 대상을 밀쳐냅니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00넉백|cffffa500 : 250\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00스턴|cffffa500 : 1.5초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(8*ct[p]))+"초")
if LoadBoolean(udg_Hash,p,$70A11F58)then
call EXSetAbilityString('H123',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n기를 모아서 다음 기본 공격을 강화합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용 / 평타 강화\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00지연시간|cffffa500 : 1.25초\n|cff00ff00지속시간|cffffa500 : 10초\n|cff00ff00특수|cffffa500 : 지연시간동안 받는 피해 감소율이 30% 증가합니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(15*ct[p]))+"초\n|cffFF0000EX : |cffffa500지연시간중 받는 피해 감소율을 얻는다.")
else
call EXSetAbilityString('H123',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n기를 모아서 다음 기본 공격을 강화합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용 / 평타 강화\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00지연시간|cffffa500 : 1.25초\n|cff00ff00지속시간|cffffa500 : 10초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(15*ct[p]))+"초")
endif
call EXSetAbilityString('H124',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n자신의 신체를 강화해서 이동속도와 방어력 체력 회복률을 상승시키고 스킬 증폭율이 상승합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00방어력 증가|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00이동속도 증가|cffffa500 : "+I2S(Rdmg5)+"% \n|cff00ff00체력 회복률 증가|cffffa500 : "+I2S(Rdmg2)+"% \n|cff00ff00스킬 피해량 증폭|cffffa500 : "+I2S(Rdmg3)+"% \n|cff00ff00지속시간|cffffa500 : "+I2S(Rdmg4)+"초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(60*ct[p]))+"초")
call EXSetAbilityString('H125',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n사용시 기를 모아서 사용 방향의 적들을 공격합니다. 그후 적들을 밀쳐냅니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00연타 데미지|cffffa500 : "+I2S(Tdmg1)+"\n|cff00ff00폭발 데미지|cffffa500 : "+I2S(Tdmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00범위|cffffa500 : "+I2S(R2I(800*Skrange[p]))+"\n|cff00ff00슬로우|cffffa500 : 연타 공격에 0.2초간 99%\n|cff00ff00넉백|cffffa500 : 폭발에 1000\n|cff00ff00스턴|cffffa500 : 폭발에 2초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(80*ct[p]))+"초")
set u=null
endfunction
function MeilingEX takes integer p returns nothing
call SaveBoolean(udg_Hash,p,$70A11F58,true)
call MeilingTT(p)
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_MeilingExBGM.mp3"),(null),(107),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_MeilingEx.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call ProduTime(33,4)
endif
call SetPlayerName(Player(8),"|cff8b0000홍 메이링 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"어디서든 덤벼보라고!")
endfunction
function MeilingD takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real tempR
local integer tempI
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if GetUnitCurrentOrder(u)==String2OrderIdBJ("auraunholy")then
if stage>=50 then
set tempR=GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.08
call recoveryHP(u,u,tempR,"war3mapImported\\@EF_Heal Green_d.mdl","origin")
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
endif
else
if LoadBoolean(udg_Hash,p,$70A11F58)then
set tempI=LoadInteger(Hash_Stat,p,$8885555B)
call SaveInteger(Hash_Stat,p,$8885555B,tempI-30)
call UnitRemoveAbility(u,'A01A')
else
set tempI=LoadInteger(Hash_Stat,p,$8885555B)
call SaveInteger(Hash_Stat,p,$8885555B,tempI-15)
endif
call TimerStart(udg_infoRe[p],0.01,false,null)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call TimerStart(t,0.02,false,function MeilingD)
set t=null
set u=null
endfunction
function MeilingQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c
local integer g=s__party_create()
local real dmg
local real Armor=GetUnitState(u,ConvertUnitState(0x20))
local real tempX
local real tempY
local real x=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_windweak.mdx",0,tempX,tempY,0.8,x,1.5,0,0,0)
call EFsettingXY(p,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",0,tempX,tempY,0.8,x,1.5,0,0,0)
call SetUnitTimeScale(u,1.5)
call SetUnitAnimationByIndex(u,7)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Meiling_Q_effect1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80.00,u)
call s__TrigVariables_SleepForStageNext(GlobalTV,0.15)
call TimerStart(t,0.15,false,function MeilingQ)
elseif stage==1 then
set tempX=GetUnitX(u)+(((256)*1.0)*Cos(((x)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((256)*1.0)*Sin(((x)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,tempX,tempY,3*Skrange[p],x,1.5,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_WindWeak2.mdx",0,tempX,tempY,3,x,2,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_WindWeak2.mdx",0,tempX,tempY,1,x,2,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_F086.mdl",0,tempX,tempY,2*Skrange[p],x,2.5,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_BY_Wood_Sand_YueKongJi.mdl",0,tempX,tempY,1.3*Skrange[p],x,2,0,0,0)
set dmg=(GetHeroInt(u,true)*(5+(LoadInteger(udg_Hashtable,p,$FAFE5485)*4)))*(1+(Armor*0.001))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,0,false,1,'H121')
call jumpEn(c,0.12,250,0.02)
call Stun(u,c,1)
endif
endloop
call SetUnitTimeScale(u,1)
call ND(Player(p-1),0.2,20)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Meiling_Q_effect2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,70.00,u)
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set u=null
set t=null
set c=null
endfunction
function MeilingW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$580C1005)
local unit c
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real dmg
local real Armor=GetUnitState(u,ConvertUnitState(0x20))
local real tempX
local real tempY
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local integer tempI
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call SaveBoolean(udg_Hash,GetHandleId(u),$AFCAE36E,false)
call EFsettingXY(p,"war3mapImported\\@EF_windweak.mdx",0,tempX,tempY,0.6,angle,1.5,0,0,50)
call EFsettingXY(p,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",0,tempX,tempY,1,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_DustWindFasterExact.mdx",0,tempX,tempY,1,angle,2.5,0,0,0)
call SetUnitTimeScale(u,1.5)
call SetUnitAnimationByIndex(u,16)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Meiling_W_Voice.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,70.00,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Meiling_W_effect1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80.00,u)
call TimerStart(t,0.06,false,function MeilingW)
elseif stage>=1 then
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))>=200 then
set tempX=GetUnitX(u)+(((80+(stage*5))*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((80+(stage*5))*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call EXSetUnitFacing(u,angle)
call SetUnitFacingTimed(u,angle,0)
if(stage-(stage/2)*2)==0 and LoadBoolean(udg_Hash,GetHandleId(u),$B4821478)then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call imagedummySET(p,c,Model[p])
call SetUnitAnimationByIndex(c,16)
call SetUnitTimeScale(c,0.2)
call SetUnitScale(c,2,1,1)
call UnitRemove(c,0.18)
call invisible(c,40.00,100.00,0.18,0.01)
endif
call TimerStart(t,0.02,false,function MeilingW)
else
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,tempX,tempY,1,angle,2.5,90,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_windweak.mdx",0,tempX,tempY,1,angle,2,90,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Sniper(2)_R.mdx",0,tempX,tempY,2,angle,2,0,0,180)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_TinyLava_T.mdl",0,tempX,tempY,2,angle+320,2,90,0,50)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Meiling_W_effect2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80.00,u)
set tempX=GetUnitX(tar)+(((250)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((250)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call KnockBackEn(tar,tempX,tempY,0.2,0.01)
set dmg=(GetHeroInt(u,true)*(4+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6)))*(1+(Armor*0.0015))
call Damage(u,tar,dmg,2,0,false,1,'H122')
call Stun(u,tar,1.5)
call EFsettingU(p,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",0,tar,"origin")
call ND(Player(p-1),0.2,20)
call SaveBoolean(udg_Hash,GetHandleId(u),$AFCAE36E,true)
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
elseif not UnitAlive(u)or not UnitAlive(tar)then
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
elseif s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))>=5000 then
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set u=null
set t=null
set tar=null
set c=null
endfunction
function MeilingE takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real dmg
local real tempX
local real tempY
local integer tempI
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call EFsettingU(p,"Abilities\\Spells\\Other\\Charm\\CharmTarget.mdx",0,u,"origin")
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Meiling_E_Voice.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80.00,u)
call TimerStart(t,1.25,false,function MeilingE)
elseif stage==1 then
call UnitAddAbility(u,'A019')
call EFsettingU(p,"war3mapImported\\@EF_AZ_Svenfair_W1_Caster.mdx",0,u,"origin")
call BuffCall(u,'B018',10,false,false)
call TimerStart(t,10,false,function MeilingE)
if LoadBoolean(udg_Hash,p,$70A11F58)then
set tempI=LoadInteger(Hash_Stat,p,$8885555B)
call SaveInteger(Hash_Stat,p,$8885555B,tempI-30)
call TimerStart(udg_infoRe[p],0.01,false,null)
endif
elseif stage>=2 then
set tempI=LoadInteger(udg_Hash,GetHandleId(u),$54A486C0)-1
call SaveInteger(udg_Hash,GetHandleId(u),$54A486C0,tempI)
if tempI==0 then
call UnitRemoveAbility(u,'A019')
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set u=null
set t=null
endfunction
function MeilingR takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c
local real dmg
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local integer tempI
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$23E22F84)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call EFsettingXY(p,"war3mapImported\\@EF_windweak.mdx",0,tempX,tempY,1.2,270,1.5,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_935.mdl",0,tempX,tempY,1,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_WindCirclefaster.mdl",0,tempX,tempY,1,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_t_-guangzhu-moon.mdl",0,tempX,tempY,2,270,1,0,0,0)
call ND(Player(p-1),0.2,25)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Meiling_F_Voice.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80.00,u)
call visible(u,100.00,0.00,0.2,0.02)
set ef=EFsettingUcustom(p,"war3mapImported\\@EF_Windwalk Blue Soul.mdx",u,"origin")
call SaveEffectHandle(udg_Hash,GetHandleId(t),$23E22F84,ef)
call TimerStart(t,0.0,false,function MeilingR)
elseif stage>=1 then
call TimerStart(t,0.03,false,function MeilingR)
if stage<=(500+LoadInteger(udg_Hashtable,p,$BB70E228)*166)then
if(stage-(stage/2)*2)==0 then
if not UnitHasBuff(u,'Bmlt')and not LoadBoolean(udg_Hash,GetHandleId(u),$54A486C0)and not UnitHasBuff(u,'BPSE')then
set tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,GetUnitX(u))
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,GetUnitY(u))
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)>=10.00 then
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,GetUnitFacing(u))
call imagedummySET(p,c,Model[p])
call SetUnitAnimationByIndex(c,9)
call SetUnitScale(c,2,1,1)
call UnitRemove(c,0.18)
call invisible(c,40.00,100.00,0.18,0.01)
endif
endif
endif
else
call SaveBoolean(udg_Hash,GetHandleId(u),$B4821478,false)
call DestroyEffect(ef)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
set u=null
set t=null
set ef=null
set c=null
endfunction
function MeilingT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c
local integer g=s__party_create()
local real dmg
local real Armor=GetUnitState(u,ConvertUnitState(0x20))
local real tempX
local real tempY
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer tempI=LoadInteger(udg_Hash,GetHandleId(t),$BEC6909A)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call SetUnitAnimationByIndex(u,6)
call ND(Player(p-1),0.8,15)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Meiling_R_effect1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,70.00,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Meiling_R_Voice.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80.00,u)
call SaveInteger(udg_Hash,GetHandleId(t),$BEC6909A,1)
call TimerStart(t,0.0,false,function MeilingT)
elseif stage>=1 and stage<=45 then
call TimerStart(t,0.02,false,function MeilingT)
if(stage-(stage/4)*4)==0 then
if tempI==1 then
call EFsettingU(p,"war3mapImported\\@EF_Effect Cast Blue.mdx",0,u,"hand left")
call EFsettingU(p,"war3mapImported\\@EF_Effect_Invisibility_Target_Wave_Blue.mdx",0,u,"hand left")
call SaveInteger(udg_Hash,GetHandleId(t),$BEC6909A,2)
elseif tempI==2 then
call EFsettingU(p,"war3mapImported\\@EF_Effect Cast Green.mdx",0,u,"hand left")
call EFsettingU(p,"war3mapImported\\@EF_Effect_Invisibility_Target_Wave_Green.mdx",0,u,"hand left")
call SaveInteger(udg_Hash,GetHandleId(t),$BEC6909A,3)
elseif tempI==3 then
call EFsettingU(p,"war3mapImported\\@EF_Effect Cast Red.mdx",0,u,"hand left")
call EFsettingU(p,"war3mapImported\\@EF_Effect_Invisibility_Target_Wave_Red.mdx",0,u,"hand left")
call SaveInteger(udg_Hash,GetHandleId(t),$BEC6909A,4)
elseif tempI==4 then
call EFsettingU(p,"war3mapImported\\@EF_Effect Cast Yellow.mdx",0,u,"hand left")
call EFsettingU(p,"war3mapImported\\@EF_Effect_Invisibility_Target_Wave_Yellow.mdx",0,u,"hand left")
call SaveInteger(udg_Hash,GetHandleId(t),$BEC6909A,1)
endif
endif
elseif stage==46 then
call SetUnitAnimationByIndex(u,17)
call SaveInteger(udg_Hash,GetHandleId(t),$BEC6909A,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Meiling_R_effect2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80.00,u)
call TimerStart(t,0.00,false,function MeilingT)
elseif stage>=47 and stage<=147 then
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call TimerStart(t,0.02,false,function MeilingT)
call SaveInteger(udg_Hash,GetHandleId(t),$BEC6909A,tempI+1)
if(stage-(stage/7)*7)==0 then
set dmg=(GetHeroInt(u,true)*(2.5+(LoadInteger(udg_Hashtable,p,$132FA1F5)*17.5)))*(1+(Armor*0.0015))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,800*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,0,false,0.071,'H125')
call SlowApply(u,c,0.2,0.99)
endif
endloop
call EFsettingXY(p,"war3mapImported\\@EF_Vinz Blast Holy2.mdx",0,tempX,tempY,3*Skrange[p],270,3,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_wave_squished.mdx",0,tempX,tempY,3*Skrange[p],270,2,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_az_Crixalis(1)_C5-8.mdx",0,tempX,tempY,1.5*Skrange[p],270,1,0,0,-50)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_Meiling_R_Dash.mdx",0,tempX,tempY,1,angle,1,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_filter_lightwhite.mdx",0,tempX,tempY,1,angle,3,0,0,50)
endif
if(stage-(stage/4)*4)==0 then
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if tempI==1 then
call EFsettingXY(p,"war3mapImported\\@EF_VFX_HITcritverylowBlue.mdx",0,tempX,tempY,5*Skrange[p],270,2,0,0,-100)
call SaveInteger(udg_Hash,GetHandleId(t),$BEC6909A,2)
elseif tempI==2 then
call EFsettingXY(p,"war3mapImported\\@EF_VFX_HITcritverylowGreen.mdx",0,tempX,tempY,5*Skrange[p],270,2,0,0,-100)
call SaveInteger(udg_Hash,GetHandleId(t),$BEC6909A,3)
elseif tempI==3 then
call EFsettingXY(p,"war3mapImported\\@EF_VFX_HITcritverylowRed.mdx",0,tempX,tempY,5*Skrange[p],270,2,0,0,-100)
call SaveInteger(udg_Hash,GetHandleId(t),$BEC6909A,4)
elseif tempI==4 then
call EFsettingXY(p,"war3mapImported\\@EF_VFX_HITcritverylowYellow.mdx",0,tempX,tempY,5*Skrange[p],270,2,0,0,-100)
call SaveInteger(udg_Hash,GetHandleId(t),$BEC6909A,1)
endif
endif
elseif stage==148 then
call TimerStart(t,0.2,false,function MeilingT)
elseif stage==149 then
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Vinz Blast Holy2.mdx",0,tempX,tempY,3*Skrange[p],270,2,0,0,-150)
call EFsettingXY(p,"war3mapImported\\@EF_WindCirclefaster.mdx",0,tempX,tempY,5*Skrange[p],270,2.5,0,0,-150)
set dmg=(GetHeroInt(u,true)*(55+(LoadInteger(udg_Hashtable,p,$132FA1F5)*25)))*(1+(Armor*0.0005))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,800*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,0,false,1,'H125')
set angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(c),GetUnitY(c))
set tempX=GetUnitX(c)+(((1000)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(c)+(((1000)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call KnockBackEn(c,tempX,tempY,0.2,0.01)
call Stun(u,c,2)
call EFsettingU(p,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",0,c,"origin")
endif
endloop
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Meiling_R_effect3.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80.00,u)
call ND(Player(p-1),0.3,50)
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
elseif not UnitAlive(u)then
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set u=null
set t=null
set c=null
endfunction
function MeilingSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local real tempR
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local integer tempI
local integer tempI2
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local unit c
local real Mana
if sk=='H120' then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,50)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call TimerStart(t,0.02,false,function MeilingD)
if LoadBoolean(udg_Hash,p,$70A11F58)then
set tempI=LoadInteger(Hash_Stat,p,$8885555B)
call SaveInteger(Hash_Stat,p,$8885555B,tempI+30)
call TimerStart(udg_infoRe[p],0.01,false,null)
call UnitAddAbility(u,'A01A')
else
set tempI=LoadInteger(Hash_Stat,p,$8885555B)
call SaveInteger(Hash_Stat,p,$8885555B,tempI+15)
endif
call TimerStart(udg_infoRe[p],0.01,false,null)
call Animate(u,11)
endif
if sk=='H121' then
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY))
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call Shacull(p)
call TimerStart(t,0,false,function MeilingQ)
endif
if sk=='H122' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$580C1005,GetSpellTargetUnit())
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call Shacull(p)
call TimerStart(t,0,false,function MeilingW)
endif
if sk=='H123' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
set tempI=LoadInteger(udg_Hash,GetHandleId(u),$54A486C0)
call SaveInteger(udg_Hash,GetHandleId(u),$54A486C0,tempI+1)
if LoadBoolean(udg_Hash,p,$70A11F58)then
set tempI=LoadInteger(Hash_Stat,p,$8885555B)
call SaveInteger(Hash_Stat,p,$8885555B,tempI+30)
call TimerStart(udg_infoRe[p],0.01,false,null)
endif
call TimerStart(t,0,false,function MeilingE)
endif
if sk=='H124' then
set Mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveBoolean(udg_Hash,GetHandleId(u),$AFCAE36E,true)
call SaveBoolean(udg_Hash,GetHandleId(u),$B4821478,true)
set tempR=15+(LoadInteger(udg_Hashtable,p,$BB70E228)*5)
call BuffCall(u,'B017',tempR,false,false)
call StatChangeX(p,LoadInteger(udg_Hashtable,p,$BB70E228)*50,"방어력",tempR,"H1241")
call StatChangeX(p,10+(LoadInteger(udg_Hashtable,p,$BB70E228)*5),"이속",tempR,"H1242")
call StatChangeX(p,LoadInteger(udg_Hashtable,p,$BB70E228)*0.5,"HP리젠",tempR,"H1243")
call StatChangeX(p,LoadInteger(udg_Hashtable,p,$BB70E228)*0.1,"스증",tempR,"H1244")
call TimerStart(t,0,false,function MeilingR)
endif
if sk=='H125' then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY))
call Shacull(p)
call TimerStart(t,0,false,function MeilingT)
endif
set u=null
set t=null
set c=null
endfunction
function MeilingTEXT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),1)
local texttag txg=LoadTextTagHandle(udg_Hash,GetHandleId(t),2)
local real tempX=GetUnitX(u)+(((150)*1.0)*Cos(((180)*1.0)*bj_DEGTORAD))
local real tempY=GetUnitY(u)+(((150)*1.0)*Sin(((180)*1.0)*bj_DEGTORAD))
call SetTextTagPos(txg,tempX,tempY,-250)
call SetTextTagText(txg,I2S(R2I(LoadReal(udg_Hash,GetHandleId(u),$FB407201)))+" / "+I2S(R2I(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.2)),10*0.023/10)
set t=null
set u=null
set txg=null
endfunction
function MeilingST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
local timer t=CreateTimer()
local real tempR
set ChSkillD[p]='H120'
set ChSkillQ[p]='H121'
set ChSkillW[p]='H122'
set ChSkillE[p]='H123'
set ChSkillR[p]='H124'
set ChSkillT[p]='H125'
set Range[p]=160
set tempR=LoadReal(Hash_Stat,p,$20CA2916)+0.1
call SaveReal(Hash_Stat,p,$20CA2916,tempR)
set NONE[p]=0.1
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
call UnitAddAbility(u,'Amrf')
call UnitRemoveAbility(u,'Amrf')
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_MeilingQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_MeilingW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_MeilingE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_MeilingR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_MeilingT.blp",0)
endif
set STRup[p]=12
set AGIup[p]=3
set INTup[p]=7
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,85)
call SaveReal(udg_Hashtable,p,$43C91172,0.3)
call SaveReal(udg_Hashtable,p,$836F3EE3,1.2)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$9B58470C,150)
call SaveReal(udg_Hashtable,p,$88E0F85F,100)
call SaveReal(udg_Hashtable,p,$E755DDB8,200)
call SaveReal(udg_Hashtable,p,$ABD3E955,100)
call SaveReal(udg_Hashtable,p,$A2229E00,150)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,100)
call SaveReal(udg_Hashtable,p,$C3EA9E83,600)
call SaveReal(udg_Hashtable,p,$A8D71652,250)
call SaveReal(udg_Hashtable,p,$127510D2,2500)
call SaveReal(udg_Hashtable,p,$B491D29B,1500)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$7053185D,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$E6BB3831,true)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"0 / 0",10*0.023/10)
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,-150)
call SetTextTagColor(bj_lastCreatedTextTag,0,172,234,255)
call SetTextTagVisibility(bj_lastCreatedTextTag,false)
if GetLocalPlayer()==Player(p-1)then
call SetTextTagVisibility(bj_lastCreatedTextTag,true)
endif
call SaveTextTagHandle(udg_Hash,GetHandleId(t),2,bj_lastCreatedTextTag)
call TimerStart(t,0.04,true,function MeilingTEXT)
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),1,u)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNH012.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc기를 다루는 정도의 능력")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"자신의 무속성 피해량이 상승한다. 또한 피해를 받을경우 3초간 그 피해를 축적하며 기본 공격시 축적량의 일부를 체력으로 회복할수있다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00무속성 피해량 증가|cffffa500 : 10%\n|cff00ff00최대 축적량|cffffa500 : 최대체력의 20%\n|cff00ff00회복량|cffffa500 : 축적량의 15%")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function MeilingSkill)
call SaveInteger(udg_Hashtable,p,$5EFF7683,12)
call MeilingTT(p)
set u=null
set trg=null
set t=null
endfunction
function s__CommandButtonData__get_abilityId takes integer this returns integer
return(JNMemoryGetInteger((this+0x4)))
endfunction
function s__CommandButtonData__get_orderId takes integer this returns integer
return(JNMemoryGetInteger((this+0x8)))
endfunction
function s__CommandButtonData__get_targets takes integer this returns integer
return(JNMemoryGetInteger((this+0x10)))
endfunction
function s__CommandButtonData__get_tip takes integer this returns string
return JNMemoryGetString(this+0x2C,348)
endfunction
function s__CommandButtonData__get_ubertip takes integer this returns string
return JNMemoryGetString(this+0x18C,1024)
endfunction
function s__CommandButtonData__get_cost takes integer this returns integer
return(JNMemoryGetInteger((this+0x594)))
endfunction
function s__CommandButtonData__get_buttonPosX takes integer this returns integer
return(JNMemoryGetInteger((this+0x59C)))
endfunction
function s__CommandButtonData__get_buttonPosY takes integer this returns integer
return(JNMemoryGetInteger((this+0x5A0)))
endfunction
function s__CommandButtonData__get_hotkey takes integer this returns integer
return(JNMemoryGetInteger((this+0x5AC)))
endfunction
function s__CommandButtonData__get_art takes integer this returns string
return JNMemoryGetString(this+0x5C8,200)
endfunction
function s__CommandButtonData__get_state takes integer this returns integer
return(JNMemoryGetInteger((this+0x6D0)))
endfunction
function s__GameUI_getInstance takes nothing returns integer
return(JNMemoryGetInteger((pGameDll+0xD0F600)))
endfunction
function s__GameUI__get_cursorFrame takes integer this returns integer
return(JNMemoryGetInteger((this+0x16C)))
endfunction
function s__GameUI__get_worldFrame takes integer this returns integer
return(JNMemoryGetInteger((this+0x3BC)))
endfunction
function s__GameUI__get_currentMode takes integer this returns integer
return(JNMemoryGetInteger((this+0x1B4)))
endfunction
function s__GameUI__get_targetMode takes integer this returns integer
return(JNMemoryGetInteger((this+0x210)))
endfunction
function s__GameUI__get_selectMode takes integer this returns integer
return(JNMemoryGetInteger((this+0x214)))
endfunction
function s__GameUI__get_dragSelectMode takes integer this returns integer
return(JNMemoryGetInteger((this+0x218)))
endfunction
function s__GameUI__get_dragScrollMode takes integer this returns integer
return(JNMemoryGetInteger((this+0x21C)))
endfunction
function s__GameUI__get_buildMode takes integer this returns integer
return(JNMemoryGetInteger((this+0x220)))
endfunction
function s__GameUI__get_signalMode takes integer this returns integer
return(JNMemoryGetInteger((this+0x224)))
endfunction
function s__GameUI__get_escMenu takes integer this returns integer
return(JNMemoryGetInteger((this+0x228)))
endfunction
function s__GameUI_handleEvent takes integer this,integer pEvent returns integer
local integer pFunc=pGameDll+0x3A3190
call SaveStr(JNProc_ht,JNProc_key,0,"(II)I")
call SaveInteger(JNProc_ht,JNProc_key,1,this)
call SaveInteger(JNProc_ht,JNProc_key,2,pEvent)
if(JNProcCall(JNProc__thiscall,pFunc,JNProc_ht))then
return LoadInteger(JNProc_ht,JNProc_key,0)
endif
return 0
endfunction
function MikaTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer l__Int=GetHeroInt(u,true)
local integer Qdmg=R2I(l__Int*(3+(LoadInteger(udg_Hashtable,p,$FAFE5485)*4)))
local integer Qdmg2=R2I(l__Int*(LoadInteger(udg_Hashtable,p,$FAFE5485)*3.5))
local integer Wdmg=R2I(l__Int*(8+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6.5)))
local integer Edmg=R2I(l__Int*(5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*8.5)))
local integer RLv=LoadInteger(udg_Hashtable,p,$BB70E228)
local integer Rdmg=(RLv*1000)+(GetUnitLevel(u)*100)
local integer Tdmg=l__Int*(50+(LoadInteger(udg_Hashtable,p,$132FA1F5)*20))
local integer Tdmg2=l__Int*(80+(LoadInteger(udg_Hashtable,p,$132FA1F5)*50))
local integer mikalv=LoadInteger(udg_Hashtable,p,$96198454)
local integer Rcool
local real tempR
set Qdmg=Qdmg+(mikalv*100)
set Qdmg2=Qdmg2+(mikalv*50)
set Wdmg=Wdmg+(mikalv*150)
set Edmg=Edmg+(mikalv*250)
set Tdmg=Tdmg+(mikalv*300)
set Tdmg2=Tdmg2+(mikalv*300)
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Qm*Kirie[p])
set Qdmg2=Qdmg2+R2I(Qm*(Kirie[p]*0.5))
set Wdmg=Wdmg+R2I(Wm*Kirie[p])
set Edmg=Edmg+R2I(Em*Kirie[p])
set Tdmg=Tdmg+R2I(Tm*Kirie[p])
set Tdmg2=Tdmg2+R2I(Tm*(Kirie[p]*0.5))
endif
set tempR=(50-(LoadInteger(udg_Hashtable,p,$BB70E228))*10)*ct[p]
if tempR<=10 then
set Rcool=10
else
set Rcool=R2I(tempR)
endif
if LoadInteger(udg_Hashtable,p,$A8D71652)>=1 then
if RLv !=LoadInteger(udg_Hash,GetHandleId(u),$8220E536)then
set tempR=LoadReal(Hash_Stat,p,$45E22B52)-LoadReal(udg_Hash,GetHandleId(u),$842134E0)
set tempR=tempR+(RLv*0.12)
call SaveReal(Hash_Stat,p,$45E22B52,tempR)
call SaveReal(udg_Hash,GetHandleId(u),$842134E0,(RLv*0.12))
call SaveInteger(udg_Hash,GetHandleId(u),$8220E536,RLv)
call TimerStart(udg_infoRe[p],0.01,false,null)
endif
endif
if LoadBoolean(udg_Hash,p,$9BA54C07)then
call EXSetAbilityString('H030',1,ABILITY_DATA_UBERTIP,"지속시간동안 내 치명타 확률이 상승하며 부가적인 효과를 얻습니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00치명타 확률 증가|cffffa500 : 20%\n|cff00ff00특수|cffffa500 : 지속시간동안 소모하는 마나의 30%를 돌려받습니다.\n|cff00ff00지속시간|cffffa500 : 30초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(30*ct[p]))+"초\n|cffFF0000EX|cffffa500 : 지속시간 30초로 증가하고 마나를 돌려받는양이 상승한다.")
else
call EXSetAbilityString('H030',1,ABILITY_DATA_UBERTIP,"지속시간동안 내 치명타 확률이 상승하며 부가적인 효과를 얻습니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00치명타 확률 증가|cffffa500 : 20%\n|cff00ff00특수|cffffa500 : 지속시간동안 소모하는 마나의 15%를 돌려받습니다.\n|cff00ff00지속시간|cffffa500 : 15초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(30*ct[p]))+"초")
endif
if LoadBoolean(udg_Hash,p,$9BA54C07)then
call EXSetAbilityString('H031',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n미카가 별의 힘을 담은 총알을 대상에게 발사합니다.\n\n|cff00ff00타입|cffffa500 : 유닛 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(3*ct[p]))+"초\n|cffFF0000EX|cffffa500 : 대상에게 2개의 별이 추가타를 가해 각각 "+I2S(Qdmg2)+" 의 데미지")
else
call EXSetAbilityString('H031',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n미카가 별의 힘을 담은 총알을 대상에게 발사합니다.\n\n|cff00ff00타입|cffffa500 : 유닛 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(3*ct[p]))+"초")
endif
call EXSetAbilityString('H032',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n미카가 해당 지점에 작은 운석을 떨어트립니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00스턴|cffffa500 : 1초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(8*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H032')+"/"+R2S(500*Skrange[p]))
call EXSetAbilityString('H033',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n미카가 잠깐의 집중후 해당 지점으로 강화탄을 발사합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00범위|cffffa500 : "+I2S(R2I(120*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(8*ct[p]))+"초")
call EXSetAbilityString('H034',1,ABILITY_DATA_UBERTIP,"미카가 재장전을 해서 베네딕시오와 키리에 엘레이손을 제외한 스킬들의 쿨타임을 초기화시킵니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00마나 회복|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00습득시|cffffa500 : "+I2S(RLv*12)+"% 의 스킬 피해 증폭율 획득\n|cff00ff00쿨타임|cffffa500 : "+I2S(Rcool)+"초")
call EXSetAbilityString('H035',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n미카가 지점을 여러번의 별의 기운으로 공격해 별의 기운을 응축시킨후 추가적인 공격을 가해 별의 기운을 폭발시킵니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00연속 공격 피해|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00별의 기운 폭발 피해|cffffa500 : "+I2S(Tdmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00범위|cffffa500 : "+I2S(R2I(800*Skrange[p]))+"\n|cff00ff00슬로우|cffffa500 : 연사 적중시 5초간 60%\n|cff00ff00특수|cffffa500 : 별의 기운 폭발 피해 대기시간동안 무적 유지\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(60*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H035')+"/"+R2S(800*Skrange[p]))
set u=null
endfunction
function MikaEX takes integer p returns nothing
call SaveBoolean(udg_Hash,p,$9BA54C07,true)
call MikaTT(p)
if ProduceLV<4 then
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_MikaExget.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
endif
endfunction
function MikaD takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
call UnitRemoveBuffBJ('B001',u)
set t=null
set u=null
endfunction
function MikaR takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real RLv=I2R(LoadInteger(udg_Hashtable,p,$BB70E228))
local real tempR
set tempR=(50-(RLv*10))*ct[p]
if tempR<=10 then
set tempR=10
endif
call CTset(u,p,'H034',tempR)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function MikaQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer l__Int=GetHeroInt(u,true)
local real Qdmg=I2R(l__Int*(3+(LoadInteger(udg_Hashtable,p,$FAFE5485)*3)))
local real Qdmg2=l__Int*(LoadInteger(udg_Hashtable,p,$FAFE5485)*3.5)
local integer mikalv=LoadInteger(udg_Hashtable,p,$96198454)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempR
local real tempR2
local real tempX
local real tempY
local unit dummy
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
set Qdmg=Qdmg+(I2R(mikalv)*100)
set Qdmg2=Qdmg2+(I2R(mikalv)*100)
if stage==0 then
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set tempR2=s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
call EFsettingLOCDD(p,"war3mapImported\\@EF_AZ_Pink_Sniper_T_Misslie2.mdl",tempX,tempY,1.5,tempR,1,0,100,tempR2,0.08,0.01)
call TimerStart(t,0.1,false,function MikaQ)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Mika_Q.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage==1 then
call SetUnitTimeScale(u,1)
call Damage(u,tar,Qdmg,2,0,false,1,'H031')
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"war3mapImported\\@EF_[Spell]Swordlight_Pink1.mdl",0,tempX,tempY,2,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_[Spell]Swordlight_Pink1.mdl",0,tempX,tempY,2,270,1,0,0,0)
call RemoveShacull(p)
if EX[p]then
call TimerStart(t,0.25,false,function MikaQ)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
set tempX=GetUnitX(u)+(((-250)*1.0)*Cos(((tempR-45)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-250)*1.0)*Sin(((tempR-45)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,tempR)
call SetUnitFlyHeight(dummy,100,0)
call imagedummySET(p,dummy,"war3mapImported\\@EF_MikaMisa.mdl")
call KnockBackXY(dummy,GetUnitX(tar),GetUnitY(tar),0.3,0.01)
call UnitApplyTimedLife(dummy,'BHwe',0.27)
set tempX=GetUnitX(u)+(((-350)*1.0)*Cos(((tempR+45)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-350)*1.0)*Sin(((tempR+45)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,tempR)
call SetUnitFlyHeight(dummy,100,0)
call imagedummySET(p,dummy,"war3mapImported\\@EF_MikaMisa.mdl")
call KnockBackXY(dummy,GetUnitX(tar),GetUnitY(tar),0.5,0.01)
call UnitApplyTimedLife(dummy,'BHwe',0.48)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Mika_Q2_move.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
else
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
if stage==2 then
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"war3mapImported\\@EF_[Spell]Swordlight_Pink1.mdl",0,tempX,tempY,2,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_[Spell]Swordlight_Pink1.mdl",0,tempX,tempY,2,270,1,0,0,0)
call Damage(u,tar,Qdmg2,2,0,false,0.5,'H031')
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Mika_Q2_hit1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,tar)
call TimerStart(t,0.2,false,function MikaQ)
endif
if stage==3 then
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"war3mapImported\\@EF_[Spell]Swordlight_Pink1.mdl",0,tempX,tempY,2,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_[Spell]Swordlight_Pink1.mdl",0,tempX,tempY,2,270,1,0,0,0)
call Damage(u,tar,Qdmg2,2,0,false,0.5,'H031')
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Mika_Q2_hit2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,tar)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set tar=null
set dummy=null
endfunction
function MikaW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer l__Int=GetHeroInt(u,true)
local real Wdmg=l__Int*(8+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6.5))
local integer mikalv=LoadInteger(udg_Hashtable,p,$96198454)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c
local integer g=s__party_create()
set Wdmg=Wdmg+(I2R(mikalv)*150)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Mika_W2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,Wdmg,2,0,false,1,'H032')
call Stun(u,c,1)
endif
endloop
call EFsettingXY(p,"war3mapImported\\@EF_MikaWEF.mdl",0,GetUnitX(dummy),GetUnitY(dummy),3.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF3.mdl",0,GetUnitX(dummy),GetUnitY(dummy),1.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Flamestrike Starfire I.mdl",0,GetUnitX(dummy),GetUnitY(dummy),3*Skrange[p],270,1,0,0,0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call RemoveUnit(dummy)
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set dummy=null
endfunction
function MikaE takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer l__Int=GetHeroInt(u,true)
local real Edmg=l__Int*(5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*8.5))
local integer mikalv=LoadInteger(udg_Hashtable,p,$96198454)
local real tempX
local real tempY
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local unit c
local integer g=s__party_create()
set Edmg=Edmg+(I2R(mikalv)*250)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==1 then
call SetUnitAnimationByIndex(u,1)
call SetUnitTimeScale(u,2)
endif
if stage==3 then
call SetUnitTimeScale(u,1)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF23.mdl",0,tempX,tempY,1.5,tempR,1,0,0,150)
set tar=CreateUnit(Player(p-1),'sys9',tempX,tempY,tempR)
call SetUnitFlyHeight(tar,200,0)
call SetUnitScale(tar,3*Skrange[p],1,1)
call imagedummySET(p,tar,"war3mapImported\\@EF_AZ_Pink_Sniper_T_Misslie2.mdl")
call UnitRemove(tar,0.3)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,tar)
endif
if stage==5 then
call RemoveShacull(p)
endif
if UnitAlive(tar)and stage>=3 then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),120*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and not IsUnitInGroup(c,MultyGroup[p])then
call Damage(u,c,Edmg,2,0,false,1,'H033')
call GroupAddUnit(MultyGroup[p],c)
call EFsettingU(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,c,"chest")
endif
endloop
set tempX=GetUnitX(tar)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call SetUnitX(tar,tempX)
call SetUnitY(tar,tempY)
elseif not UnitAlive(tar)and stage>=3 then
set stage=999
endif
if stage==999 then
call GroupClear(MultyGroup[p])
call DestroyGroup(MultyGroup[p])
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call TimerStart(t,0.03,false,function MikaE)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set tar=null
endfunction
function MikaT0 takes integer p returns nothing
local unit u=Charcter[p]
local unit tar=LoadUnitHandle(udg_Hash,$8FFC01B0,$535B7E08)
local integer mikalv=LoadInteger(udg_Hashtable,p,$96198454)
local unit c
local real tempX
local real tempY
local real tempR
local integer g=s__party_create()
local integer l__Int=GetHeroInt(u,true)
local real Tdmg2=l__Int*(50+(LoadInteger(udg_Hashtable,p,$132FA1F5)*20))
set Tdmg2=Tdmg2+(I2R(mikalv)*300)
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,800*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,Tdmg2,2,0,false,0.143,'H035')
call SlowApply(u,c,5,0.6)
endif
endloop
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF21.mdl",0,tempX,tempY,1,270,1,0,0,150)
set tempR=GetRandomReal(1,360)
set tempX=GetUnitX(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF16.mdl",0,tempX,tempY,2,270,1,0,0,150)
set tempR=GetRandomReal(1,360)
set tempX=GetUnitX(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF17.mdl",0,tempX,tempY,2,270,1,0,0,150)
set tempR=GetRandomReal(1,360)
set tempX=GetUnitX(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF17.mdl",0,tempX,tempY,2,270,1,0,0,150)
set tempR=GetRandomReal(1,360)
set tempX=GetUnitX(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF24.mdl",0,tempX,tempY,2,270,1,0,0,150)
set tempR=GetRandomReal(1,360)
set tempX=GetUnitX(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
if GetRandomInt(1,2)==1 then
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF19.mdl",0,tempX,tempY,2,270,1,0,0,150)
else
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF18.mdl",0,tempX,tempY,2,270,1,0,0,150)
endif
set tempR=GetRandomReal(1,360)
set tempX=GetUnitX(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF14.mdl",0,tempX,tempY,2,270,1,0,0,150)
call s__party_deallocate((g))
set tar=null
set u=null
set c=null
endfunction
function MikaT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer stage2=LoadInteger(udg_Hash,GetHandleId(t),$DA3F63FF)
local integer l__Int=GetHeroInt(u,true)
local real Tdmg=I2R(l__Int*(80+(LoadInteger(udg_Hashtable,p,$132FA1F5)*50)))
local integer mikalv=LoadInteger(udg_Hashtable,p,$96198454)
local real tempX
local real tempY
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempR2
local unit c
local integer g=s__party_create()
set Tdmg=Tdmg+(I2R(mikalv)*300)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if not UnitAlive(tar)then
if not LoadBoolean(udg_Hash,GetHandleId(t),$2FFCBC6A)then
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$E240D6CE)
call SetUnitX(c,GetUnitX(tar))
call SetUnitY(c,GetUnitY(tar))
call SaveBoolean(udg_Hash,GetHandleId(t),$2FFCBC6A,true)
endif
set tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$E240D6CE)
endif
if stage==1 then
call SetUnitAnimationByIndex(u,14)
call SaveInteger(udg_Hash,GetHandleId(t),$DA3F63FF,1)
call SaveUnitHandle(udg_Hash,$8FFC01B0,$535B7E08,tar)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_MikaT3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_MikaT1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Mika_T1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage==10 then
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF28.mdl",0,GetUnitX(u),GetUnitY(u),1.5,tempR,1,0,0,200)
endif
if stage==35 then
call SetUnitTimeScale(u,0)
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF10.mdl",3,GetUnitX(u),GetUnitY(u),0.75,tempR,0.2,0,0,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_MikaT4.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Mika_T2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage==40 then
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(tar),GetUnitY(tar),tempR)
call imagedummySET(p,c,"war3mapImported\\@EF_MikaEF9.mdl")
call SetUnitScale(c,2*Skrange[p],1,1)
call UnitApplyTimedLife(c,'BHwe',3)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$588728A4,c)
endif
if stage>=41 then
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$588728A4)
call SetUnitX(c,GetUnitX(tar))
call SetUnitY(c,GetUnitY(tar))
endif
if stage>=35 and stage<90 then
call SaveInteger(udg_Hash,GetHandleId(t),$DA3F63FF,stage2+1)
if stage2==1 then
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF23.mdl",0,tempX,tempY,1.5,tempR,1,0,0,200)
call vibration2(Player(p-1),8,0.06)
endif
if stage2==2 then
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set tempR2=s__Distance_PBP(tempX,tempY,GetUnitX(tar),GetUnitY(tar))
call EFsettingLOCDD(p,"war3mapImported\\@EF_MikaEF29.mdl",tempX,tempY,1.5,tempR,1,0,200,tempR2-150,0.1,0.01)
endif
if stage2==5 then
call MikaT0(p)
endif
if stage2==8 then
call SaveInteger(udg_Hash,GetHandleId(t),$DA3F63FF,1)
endif
endif
if stage==90 then
call SetUnitAnimationByIndex(u,14)
call SetUnitTimeScale(u,1)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_MikaT5.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Mika_T3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage>=140 then
call Mujuk(p,u)
endif
if stage==140 then
call SetUnitTimeScale(u,0)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF27.mdl",1,tempX,tempY,3,tempR,1,0,0,200)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_MikaT2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Mika_T4.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage>=166 and stage<175 then
set tempR=GetRandomReal(1,360)
set tempX=GetUnitX(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
if GetRandomInt(1,2)==1 then
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF15.mdl",0,tempX,tempY,2,270,1,0,0,200)
set tempR=GetRandomReal(1,360)
set tempX=GetUnitX(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF18.mdl",0,tempX,tempY,2,270,1,0,0,200)
else
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF14.mdl",0,tempX,tempY,2,270,1,0,0,200)
set tempR=GetRandomReal(1,360)
set tempX=GetUnitX(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((GetRandomReal(1,500*Skrange[p]))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF19.mdl",0,tempX,tempY,2,270,1,0,0,200)
endif
endif
if stage==165 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_MikaT6.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage==175 then
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF19.mdl",0,tempX,tempY,3.5,270,1,0,0,200)
endif
if stage==185 then
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF7.mdl",0,tempX,tempY,2.5*Skrange[p],270,1,0,0,0)
set tempX=GetUnitX(u)+(((-350)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-350)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.2,0.01)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_eff_ord_dange_wav_kuosan_1_4_1s.mdl",0,tempX,tempY,1,tempR,1,90,0,200)
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF12.mdl",0,tempX,tempY,1,tempR,1,90,0,200)
set tempX=GetUnitX(tar)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF23.mdl",0,tempX,tempY,1.5,tempR,1,0,0,200)
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF22.mdl",0,tempX,tempY,1.5,tempR,1,0,0,200)
set tempR2=s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
call EFsettingLOCDD(p,"war3mapImported\\@EF_MikaEF29.mdl",tempX,tempY,1.5,tempR,1,0,200,tempR2-150,0.1,0.01)
call vibration2(Player(p-1),100,0.16)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Mika_T5.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage==190 then
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF8.mdl",0,tempX,tempY,3*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_az_tx67.mdl",0,tempX,tempY,2*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF4.mdl",0,tempX,tempY,4*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF13.mdl",0,tempX,tempY,5*Skrange[p],270,1,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,800*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,Tdmg,2,0,false,1,'H035')
endif
endloop
set stage=999
endif
if stage==999 or not UnitAlive(u)then
call endMujuk(p,u)
call RemoveShacull(p)
set tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$E240D6CE)
call RemoveUnit(tar)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call SetUnitTimeScale(u,1)
else
call TimerStart(t,0.02,false,function MikaT)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set tar=null
endfunction
function MikaSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local real tempR
local real tempX
local real tempY
local integer tempI
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local real Mana
if sk=='H030' then
if EX[p]==true then
set tempR=30
else
set tempR=15
endif
call BuffCall(u,'B001',tempR,false,false)
call EFsettingU(p,"war3mapImported\\@EF_flashmove fx by deckai.mdx",tempR,u,"chest")
call EFsettingU(p,"war3mapImported\\@EF_AZ_PotMpink_W1_chest.mdl",tempR,u,"chest")
call TimerStart(t,tempR,false,function MikaD)
call StatChangeX(p,20,"마치확",tempR,"H0301")
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Mika_D_Cast.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_MikaD.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if sk=='H031' then
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
if UnitHasBuff(u,'B001')then
if EX[p]then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana*0.3))
else
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana*0.15))
endif
else
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
endif
call SetUnitTimeScale(u,2)
call SetUnitAnimationByIndex(u,1)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF23.mdl",0,tempX,tempY,1.5,tempR,1,0,0,150)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call TimerStart(t,0.1,false,function MikaQ)
call Shacull(p)
endif
if sk=='H032' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
if UnitHasBuff(u,'B001')then
if EX[p]then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana*0.3))
else
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana*0.15))
endif
else
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
endif
call SetUnitAnimationByIndex(u,1)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1500 then
set tempX=(GetUnitX(u)+(((1500)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((1500)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
elseif s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)<1500 then
set tempX=SkillLocX
set tempY=SkillLocY
endif
set tar=CreateUnit(Player(p-1),'sys9',tempX,tempY,tempR)
call SetUnitFlyHeight(tar,2000,0)
call SetUnitFlyHeight(tar,0,6666)
call SetUnitScale(tar,1.5,1,1)
call imagedummySET(p,tar,"war3mapImported\\@EF_MikaWmeteo.mdl")
call KnockBackXY(tar,tempX,tempY,0.3,0.01)
call UnitApplyTimedLife(tar,'BHwe',0.3)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_MikaW.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Mika_W1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
set tar=CreateUnit(Player(p-1),'sys9',tempX,tempY,tempR)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call TimerStart(t,0.3,false,function MikaW)
endif
if sk=='H033' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
if UnitHasBuff(u,'B001')then
if EX[p]then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana*0.3))
else
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana*0.15))
endif
else
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
endif
call SetUnitAnimationByIndex(u,1)
set MultyGroup[p]=CreateGroup()
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_MikaE.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Mika_E.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call TimerStart(t,0.0,false,function MikaE)
call Shacull(p)
endif
if sk=='H034' then
set Mana=(LoadInteger(udg_Hashtable,p,$BB70E228)*1000)+(GetUnitLevel(u)*100)
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+Mana))
call EFsettingU(p,"war3mapImported\\@EF_MikaEF11.mdl",0,u,"chest")
call UnitRemoveAbility(u,'H031')
call UnitAddAbility(u,'H031')
call UnitRemoveAbility(u,'H032')
call UnitAddAbility(u,'H032')
call UnitRemoveAbility(u,'H033')
call UnitAddAbility(u,'H033')
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Mika_R1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_MikaR.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call TimerStart(t,0.02,false,function MikaR)
endif
if sk=='H035' then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
if UnitHasBuff(u,'B001')then
if EX[p]then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana*0.3))
else
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana*0.15))
endif
else
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
endif
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF30.mdl",3,GetUnitX(u),GetUnitY(u),2,tempR,1,0,0,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,tar)
set tar=CreateUnit(Player(p-1),'sys9',GetUnitX(tar),GetUnitY(tar),tempR)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$E240D6CE,tar)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call TimerStart(t,0.0,false,function MikaT)
call Shacull(p)
endif
set u=null
set t=null
set tar=null
endfunction
function MikaLvUP takes nothing returns nothing
local unit u=GetLevelingUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer a=GetUnitLevel(u)-LoadInteger(udg_Hash,p,$B7002730)
local location loc=GetUnitLoc(u)
local real temp2
local integer temp
if a>=1 then
set temp2=LoadReal(udg_Hashtable,p,$9B58470C)
call SaveReal(udg_Hashtable,p,$9B58470C,temp2+(a*10))
set temp2=LoadReal(udg_Hashtable,p,$E755DDB8)
call SaveReal(udg_Hashtable,p,$E755DDB8,temp2+(a*15))
set temp2=LoadReal(udg_Hashtable,p,$A2229E00)
call SaveReal(udg_Hashtable,p,$A2229E00,temp2+(a*15))
set temp2=LoadReal(udg_Hashtable,p,$127510D2)
call SaveReal(udg_Hashtable,p,$127510D2,temp2+(a*20))
set temp=LoadInteger(udg_Hashtable,p,$96198454)
call SaveInteger(udg_Hashtable,p,$96198454,temp+1)
endif
call MikaTT(p)
call SaveInteger(udg_Hash,p,$B7002730,GetUnitLevel(u))
call RemoveLocation(loc)
set loc=null
set u=null
endfunction
function MikaST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
set ChSkillD[p]='H030'
set ChSkillQ[p]='H031'
set ChSkillW[p]='H032'
set ChSkillE[p]='H033'
set ChSkillR[p]='H034'
set ChSkillT[p]='H035'
set Range[p]=700
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_MikaQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_MikaW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_MikaE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_MikaR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_MikaT.blp",0)
endif
set STRup[p]=11
set AGIup[p]=1
set INTup[p]=10
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,125)
call SaveReal(udg_Hashtable,p,$43C91172,1.1)
call SaveReal(udg_Hashtable,p,$836F3EE3,1)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$9B58470C,100)
call SaveReal(udg_Hashtable,p,$88E0F85F,50)
call SaveReal(udg_Hashtable,p,$E755DDB8,200)
call SaveReal(udg_Hashtable,p,$ABD3E955,100)
call SaveReal(udg_Hashtable,p,$A2229E00,150)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,100)
call SaveReal(udg_Hashtable,p,$C3EA9E83,0)
call SaveReal(udg_Hashtable,p,$A8D71652,0)
call SaveReal(udg_Hashtable,p,$127510D2,1500)
call SaveReal(udg_Hashtable,p,$B491D29B,750)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$688653C6,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$E6BB3831,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_MikaF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc천진난만한 밤의 희망")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"레벨업을 할때 스킬의 피해량이 증가하지만 마나 소모량도 같이 증가합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00Q / W / E 스킬 순수피해 증가|cffffa500 : 100 / 150 / 250\n|cff00ff00Q / W / E 스킬 마나 소모량 증가|cffffa500 : 10  / 15 / 15\n|cff00ff00T 스킬 순수피해 증가|cffffa500 : 600\n|cff00ff00T 스킬 마나 소모량 증가|cffffa500 : 20")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function MikaSkill)
set trg=CreateTrigger()
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_HERO_LEVEL)
call TriggerAddAction(trg,function MikaLvUP)
call SaveInteger(udg_Hash,p,$B7002730,1)
call SaveUnitHandle(udg_Hash,GetHandleId(MiKaD),$B6A6EBAA,u)
call SaveInteger(udg_Hashtable,p,$5EFF7683,3)
call MikaTT(p)
set u=null
set trg=null
endfunction
function MikuTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer l__Int=GetHeroInt(u,true)
local integer Ddmg=R2I(l__Int*0.5)
local integer Qdmg=l__Int*(3+(LoadInteger(udg_Hashtable,p,$FAFE5485)*3))
local integer Qheal=R2I(l__Int*(LoadInteger(udg_Hashtable,p,$FAFE5485)*0.1))
local integer WLv=LoadInteger(udg_Hashtable,p,$457BCFC0)
local integer WHeal=R2I(l__Int*(0.05+(WLv*0.01)))
local integer Edmg=l__Int*(5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*5))
local integer EShield=R2I(l__Int*(0.1+LoadInteger(udg_Hashtable,p,$6074AEF9)*0.05))
local integer Rdmg=R2I(l__Int*(0.4+(LoadInteger(udg_Hashtable,p,$BB70E228)*0.3)))
local integer Tdmg=l__Int*(4+(LoadInteger(udg_Hashtable,p,$132FA1F5)*2))
local integer THeal=R2I(l__Int*(0.2+(LoadInteger(udg_Hashtable,p,$132FA1F5)*0.1)))
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Qm*Kirie[p])
set Edmg=Edmg+R2I(Em*Kirie[p])
set Rdmg=Rdmg+R2I(Rm*Kirie[p])
set Tdmg=Tdmg+R2I(Tm*Kirie[p])
endif
call EXSetAbilityString('H110',1,ABILITY_DATA_UBERTIP,"미쿠가 파를 들고 빠르게 회전합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : 0.2초마다 "+I2S(Ddmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00효과|cffffa500 : 사용 중 모든 피해 감소율 10% 증가\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00지속시간|cffffa500 : 4초\n|cff00ff00쿨타임|cffffa500 : 15초")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"미쿠의 스킬은 스킬 가속에 영향 받지 않습니다.\n\n대신 스킬 가속에 비례하여 마법 치명타율과 마법 치명타 피해가 증가합니다. \n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00마법 치명타 확률 상승량|cffffa500 : "+I2S(R2I(LoadInteger(Hash_Stat,p,$B7E7C8AD)*0.4))+"%\n|cff00ff00마법 치명타 피해 상승량|cffffa500 : "+I2S(R2I(LoadInteger(Hash_Stat,p,$B7E7C8AD)*0.8))+"%")
call EXSetAbilityString('H111',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n소리 구체를 생성하여 터트립니다.\n해당 폭발 주변의 아군을 회복시켜줍니다.\n\n|cff00ff00타입|cffffa500 : 범위 지점\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00사거리|cffffa500 : 1200\n|cff00ff00범위|cffffa500 : "+I2S(R2I(550*Skrange[p]))+"\n|cff00ff00효과|cffffa500 : 구체 주변 1500 범위 내 모든 아군의 체력을 회복시킴\n|cff00ff00특수|cffffa500 : 회복에도 치명타 발생 가능\n|cff00ff00회복량|cffffa500 : "+I2S(Qheal)+" + (대상 최대 체력의 4%)\n|cff00ff00쿨타임|cffffa500 : 6초")
call DzSyncData("SKRG",I2S('H111')+"/"+R2S(550*Skrange[p]))
if LoadBoolean(udg_Hash,p,$FF1BAFDB)then
call EXSetAbilityString('H112',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n노래를 불러 체력과 마나를 지속적으로 회복시켜줍니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00체력 회복량|cffffa500 : "+I2S(WHeal)+" + (대상 최대 체력의 0.5%)\n|cff00ff00마나 회복량|cffffa500 : (대상 최대 마나의 1%)\n|cff00ff00회복 간격|cffffa500 : 0.2초\n|cff00ff00지속시간|cffffa500 : 평균 10초\n|cff00ff00특수|cffffa500 : 마지막에 대상에게 90초 동안 여신의 축복 부여\n|cff00ff00여신의 축복|cffffa500 : 마법 치명타 확률 "+I2S(WLv*2)+" + 치명타 확률의 50% / 마법 치명타 피해량 : "+I2S(WLv*5)+" + 치명타 피해량의 50% 증가\n|cff00ff00쿨타임|cffffa500 : "+I2S(60-(5*LoadInteger(udg_Hashtable,p,$457BCFC0)))+"초 (최소 20초)\n|cff00ff00패널티|cffffa500 : 시전 중 이에반 폴카(D) / 매지컬 미라이(T) 시전 시 취소됨\n|cffFF0000EX|cffffa500 : 여신의 축복 증가율이 20% 상승")
else
call EXSetAbilityString('H112',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n노래를 불러 체력과 마나를 지속적으로 회복시켜줍니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00체력 회복량|cffffa500 : "+I2S(WHeal)+" + (대상 최대 체력의 0.5%)\n|cff00ff00마나 회복량|cffffa500 : (대상 최대 마나의 1%)\n|cff00ff00회복 간격|cffffa500 : 0.2초\n|cff00ff00지속시간|cffffa500 : 평균 10초\n|cff00ff00특수|cffffa500 : 마지막에 대상에게 90초 동안 여신의 축복 부여\n|cff00ff00여신의 축복|cffffa500 : 마법 치명타 확률 "+I2S(WLv*2)+" + 치명타 확률의 30% / 마법 치명타 피해량 "+I2S(WLv*5)+" + 치명타 피해량의 30% 증가\n|cff00ff00쿨타임|cffffa500 : "+I2S(60-(5*LoadInteger(udg_Hashtable,p,$457BCFC0)))+"초 (최소 20초)\n|cff00ff00패널티|cffffa500 : 시전 중 이에반 폴카(D) / 매지컬 미라이(T) 시전 시 취소됨")
endif
call EXSetAbilityString('H113',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n소리 방벽을 두르며 주변 적들을 밀쳐냅니다.\n이 스킬은 다른 행동을 방해하지 않습니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff6A5ACD번개속성 |cffFF9100마법\n|cff00ff00효과 1|cffffa500 : 범위 내 적들을 밀쳐내며 1초 동안 기절시킴\n|cff00ff00효과 2|cffffa500 : 8초 동안 유지되는 보호막을 자신에게 부여\n|cff00ff00효과 3|cffffa500 : 1500 범위 내 아군에게 200%의 보호막 부여\n|cff00ff00보호막 수치|cffffa500 : "+I2S(EShield)+"\n|cff00ff00특수|cffffa500 : 보호막에도 치명타 발생 가능\n|cff00ff00범위|cffffa500 : "+I2S(R2I(650*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : 12초")
if LoadBoolean(udg_Hash,p,$FF1BAFDB)then
call EXSetAbilityString('H114',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : 0.15초당 "+I2S(R2I(Rm))+"|r\n\n파를 지속적으로 생성하여 공격합니다.\nON / OFF 가 가능하며, 마나가 부족할 경우 자동으로 취소됩니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용 / 토글\n|cff00ff00개당 데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cff4169e1지속 마법\n|cff00ff00파 생성 간격|cffffa500 : 0.15초\n|cff00ff00범위|cffffa500 : "+I2S(R2I(1000*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : 4초\n|cffFF0000EX|cffffa500 : 파 생성 간격 0.15초 및 마나 소모량 50% 감소")
else
call EXSetAbilityString('H114',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : 0.3초당 "+I2S(R2I(Rm))+"|r\n\n파를 지속적으로 생성하여 공격합니다.\nON / OFF 가 가능하며, 마나가 부족할 경우 자동으로 취소됩니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용 / 토글\n|cff00ff00개당 데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cff4169e1지속 마법\n|cff00ff00파 생성 간격|cffffa500 : 0.3초\n|cff00ff00범위|cffffa500 : "+I2S(R2I(1000*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : 4초")
endif
call EXSetAbilityString('H115',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n공연을 개최하여 적에게는 피해를 주고 자신 및 아군의 체력과 마나를 회복시킵니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용 / 채널링\n|cff00ff00데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00체력 회복량|cffffa500 : "+I2S(THeal)+"\n|cff00ff00마나 회복량|cffffa500 : ( 대상 최대 마나의 5% )\n|cff00ff00피해 / 회복 간격|cffffa500 : 0.5초\n|cff00ff00특수 1|cffffa500 : 시전 중 기절 면역 및 모든 피해 감소율 "+I2S(10+LoadInteger(udg_Hashtable,p,$132FA1F5)*10)+"% 증가\n|cff00ff00특수 2|cffffa500 : 시전 중 범위 내 아군 모든 피해 증폭율 "+I2S(5+LoadInteger(udg_Hashtable,p,$132FA1F5)*5)+"% 증가\n|cff00ff00범위|cffffa500 : "+I2S(R2I(1600*Skrange[p]))+"\n|cff00ff00지속시간|cffffa500 : 평균 15초\n|cff00ff00쿨타임|cffffa500 : 100초")
set u=null
endfunction
function MikuEX takes integer p returns nothing
call SaveBoolean(udg_Hash,p,$FF1BAFDB,true)
call MikuTT(p)
if ProduceLV<4 then
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_MikuExget2.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_MikuExget3.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
endif
call SetPlayerName(Player(8),"|cffFF8200하츠네 미쿠 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"대단해! PERFECT야!")
call SaveReal(udg_Hashtable,p,$C3EA9E83,10)
call SaveReal(udg_Hashtable,p,$A8D71652,15)
endfunction
function MikuPassive takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
call StatChange(p,I2R(LoadInteger(Hash_Stat,p,$B7E7C8AD))*0.4,"마치확",0.99)
call StatChange(p,I2R(LoadInteger(Hash_Stat,p,$B7E7C8AD))*0.008,"마치피",0.99)
call TimerStart(t,1.0,false,function MikuPassive)
set t=null
set u=null
endfunction
function MikuD takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit enemy
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer g=s__party_create()
local integer l__Int=GetHeroInt(u,true)
local real Ddmg=l__Int*0.5
local integer tempI
if stage==1 then
call EXSetAbilityState(EXGetUnitAbility(u,'H110'),ABILITY_STATE_COOLDOWN,15)
endif
if stage<=80 then
call SetUnitX(dummy,GetUnitX(u))
call SetUnitY(dummy,GetUnitY(u))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if UnitAlive(u)and LoadBoolean(udg_Hash,p,$E9C900A0)then
if ModuloInteger(stage,4)==0 then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),500*Skrange[p],null)
loop
set enemy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),enemy)
exitwhen enemy==null
if CheckPlayerGroup(enemy)then
call Damage(u,enemy,Ddmg,2,0,false,1,'H110')
call EFsettingU(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,enemy,"chest")
endif
endloop
endif
call TimerStart(t,0.05,false,function MikuD)
else
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,81)
call TimerStart(t,0,false,function MikuD)
endif
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_D_new.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,true)
call SaveBoolean(udg_Hash,p,$E9C900A0,false)
call visible(u,100.00,0.00,0.01,0.01)
call UnitRemoveAbility(u,'Abun')
call StatUP(p,-10,"피감")
call RemoveUnit(dummy)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set dummy=null
set enemy=null
call s__party_deallocate((g))
endfunction
function MikuQHealTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local real FirstLocX=LoadReal(udg_Hash,GetHandleId(t),$D3F9E925)
local real FirstLocY=LoadReal(udg_Hash,GetHandleId(t),$DECCF61B)
local real MiddleLocX=LoadReal(udg_Hash,GetHandleId(t),$8A2F2B5)
local real MiddleLocY=LoadReal(udg_Hash,GetHandleId(t),$34AA385E)
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$7C15A41A)
local unit u=Charcter[p]
if tempR<=1.00 then
call SetUnitX(dummy,(FirstLocX*((1-tempR)*(1-tempR)))+((GetUnitX(tar)*(tempR*tempR))+MiddleLocX*(2.00*(tempR*(1.00-tempR)))))
call SetUnitY(dummy,(FirstLocY*((1-tempR)*(1-tempR)))+(GetUnitY(tar)*(tempR*tempR))+MiddleLocY*(2.00*(tempR*(1-tempR))))
set tempR=(tempR+0.03)
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,tempR)
call TimerStart(t,0.02,false,function MikuQHealTimer)
else
if Critical(R2I(APcriP[p]))then
call recoveryHP(u,tar,(((I2R(GetHeroInt(u,true))*0.5)+(GetUnitState(tar,UNIT_STATE_MAX_LIFE)*0.04))*(1.0+APcriD[p])),"","origin")
call EFsettingU(p,"war3mapImported\\@EF_Effect Grade Upgrade Purple.mdl",0.3,tar,"origin")
call EFsettingXY(p,"war3mapImported\\@EF_R_Blue-Zhendi-Ryougi-Big.mdl",0,GetUnitX(dummy),GetUnitY(dummy),0.65,270,1,0,0,50)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"♬",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,tar,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,0,0,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,GetRandomInt(60,120))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.5)
else
call recoveryHP(u,tar,((GetHeroInt(u,true))*(LoadInteger(udg_Hashtable,p,$FAFE5485)*0.1))+(GetUnitState(tar,UNIT_STATE_MAX_LIFE)*0.04),"","origin")
endif
call EFsettingU(p,"war3mapImported\\@EF_hero_gorgon_n1s_g_target.mdl",1.0,tar,"origin")
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF24.mdl",0,GetUnitX(dummy),GetUnitY(dummy),3.0,270,1,0,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_R_Flash Pink.mdl",0,GetUnitX(dummy),GetUnitY(dummy),1.5,270,1,0,0,150)
call Assets_UseSoundByPath__MakeSound(("Abilities\\Spells\\Human\\Heal\\HealTarget.wav"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,tar)
call RemoveUnit(dummy)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set dummy=null
set tar=null
set u=null
endfunction
function MikuQHeal takes unit dummy,unit tar,integer p,real FirstLocX,real FirstLocY,real MiddleLocX,real MiddleLocY,real tempR returns nothing
local timer t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveReal(udg_Hash,GetHandleId(t),$D3F9E925,FirstLocX)
call SaveReal(udg_Hash,GetHandleId(t),$DECCF61B,FirstLocY)
call SaveReal(udg_Hash,GetHandleId(t),$8A2F2B5,MiddleLocX)
call SaveReal(udg_Hash,GetHandleId(t),$34AA385E,MiddleLocY)
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,tempR)
call TimerStart(t,0.0,false,function MikuQHealTimer)
set t=null
set dummy=null
set tar=null
endfunction
function MikuQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer l__Int=GetHeroInt(u,true)
local integer Qdmg=l__Int*(3+(LoadInteger(udg_Hashtable,p,$FAFE5485)*3))
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempR2=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local real angle
local unit enemy
local integer tempI2
local unit dummy
local unit dummy2=LoadUnitHandle(udg_Hash,GetHandleId(t),$588728A4)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage<=1 then
call EFsettingXY(p,"war3mapImported\\@EF_AZ_PotMpink_W1_chest.mdl",1,tempR,tempR2,3.2*Skrange[p],270,2.2,(GetRandomReal(0.0,360.0)),0,200)
if stage==0 then
call EFsettingXY(p,"war3mapImported\\@EF_R_GameBABY_mdx_lingzifengbao_001 Pink.mdl",1,tempR,tempR2,5.0*Skrange[p],270,1.0,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF30.mdl",0,tempR,tempR2,2.0*Skrange[p],270,1.0,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_cast_pink.mdl",0,tempR,tempR2,3.0*Skrange[p],270,1.0,0,0,200)
call EFsettingXY(p,"war3mapImported\\@EF_cast_pink.mdl",0,tempR,tempR2,3.0*Skrange[p],270,1.0,0,0,200)
call EXSetAbilityState(EXGetUnitAbility(u,'H111'),ABILITY_STATE_COOLDOWN,6)
endif
if stage==1 then
call TimerStart(t,0.4,false,function MikuQ)
else
call TimerStart(t,0.05,false,function MikuQ)
endif
endif
if stage==2 then
call EFsettingXY(p,"war3mapImported\\@EF_violet spark by deckai.mdl",1,tempR,tempR2,2.4*Skrange[p],270,2.2,0,0,30)
call EFsettingXY(p,"war3mapImported\\@EF_violet spark by deckai.mdl",1,tempR,tempR2,2.4*Skrange[p],270,2.2,0,0,30)
call EFsettingXY(p,"war3mapImported\\@EF_CastEffect_Pink.mdl",1,tempR,tempR2,3.0*Skrange[p],270,1.0,0,0,10)
call TimerStart(t,0.15,false,function MikuQ)
endif
if stage==3 then
set dummy2=CreateUnit(Player(p-1),'sys7',tempR,tempR2,270)
call SetUnitFlyHeight(dummy2,150,0)
call SetUnitScale(dummy2,1.0*Skrange[p],1,1)
call imagedummySET(p,dummy2,"war3mapImported\\@EF_PinkSphereExplosion.mdl")
call SaveUnitHandle(udg_Hash,GetHandleId(t),$588728A4,dummy2)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempR,tempR2,550*Skrange[p],null)
loop
set enemy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),enemy)
exitwhen enemy==null
if CheckPlayerGroup(enemy)then
call Damage(u,enemy,Qdmg,2,0,false,1,'H111')
endif
endloop
call TimerStart(t,0.1,false,function MikuQ)
endif
if stage==4 then
call GroupEnumUnitsInRange((s__party_G[(g)]),tempR,tempR2,1500*Skrange[p],null)
loop
set enemy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),enemy)
exitwhen enemy==null
if IsUnitAlly(enemy,Player(p-1))==true and IsUnitIdType(GetUnitTypeId(enemy),UNIT_TYPE_MECHANICAL)==false then
set dummy=CreateUnit(Player(p-1),'sys7',tempR,tempR2,270)
call imagedummySET(p,dummy,"war3mapImported\\@EF_rin_missile.mdl")
call SetUnitFlyHeight(dummy,GetUnitFlyHeight(dummy)+50,0)
call SetUnitScale(dummy,3.0,1,1)
set tempI2=GetRandomInt(1,2)
set angle=s__Angle_PBP(tempR,tempR2,GetUnitX(enemy),GetUnitY(enemy))
call MikuQHeal(dummy,enemy,p,tempR,tempR2,tempR+(((1000)*1.0)*Cos(((angle+(30.00+(100.00*I2R(tempI2))))*1.0)*bj_DEGTORAD)),tempR2+(((1000)*1.0)*Sin(((angle+(30.00+(100.00*I2R(tempI2))))*1.0)*bj_DEGTORAD)),0)
endif
endloop
call TimerStart(t,1.0,false,function MikuQ)
endif
if stage==5 then
call SetUnitVertexColor(dummy2,255,255,255,0)
call RemoveUnit(dummy2)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
call s__party_deallocate((g))
set enemy=null
set dummy=null
set dummy2=null
endfunction
function MikuW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local player pl=Player(p-1)
local integer p2=GetPlayerId(GetOwningPlayer(tar))+1
local player pl2=Player(p2-1)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer l__Int=GetHeroInt(u,true)
local integer WHeal=R2I(l__Int*(0.05+(LoadInteger(udg_Hashtable,p,$457BCFC0)*0.01)))
local integer Song=LoadInteger(udg_Hash,GetHandleId(t),$4A7C7AC4)
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$F8F856EA)
local effect ef2=LoadEffectHandle(udg_Hash,GetHandleId(t),$94B57B64)
local real tempR
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage<=595 and LoadBoolean(udg_Hash,p,$8A6D5609)then
if stage==0 then
if Song==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W1.mp3"),(null),(127),((1.00)*1.0),false,0,0)
elseif Song==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W2.mp3"),(null),(127),((1.00)*1.0),false,0,0)
elseif Song==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W3.mp3"),(null),(90),((1.00)*1.0),false,0,0)
elseif Song==4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W4.mp3"),(null),(100),((1.00)*1.0),false,0,0)
elseif Song==5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W5.mp3"),(null),(100),((1.00)*1.0),false,0,0)
elseif Song==6 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W6.mp3"),(null),(115),((1.00)*1.0),false,0,0)
elseif Song==7 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W7.mp3"),(null),(100),((1.00)*1.0),false,0,0)
elseif Song==8 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W8.mp3"),(null),(105),((1.00)*1.0),false,0,0)
elseif Song==9 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W9.mp3"),(null),(110),((1.00)*1.0),false,0,0)
elseif Song==10 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W10.mp3"),(null),(105),((1.00)*1.0),false,0,0)
endif
set LastEFVoice=udg_SND
endif
if GetLocalPlayer()==pl or GetLocalPlayer()==pl2 then
if stage==0 then
call StopSound(LastEFVoice,false,false)
call StartSound(udg_SND)
endif
endif
if stage==1 then
if 5*LoadInteger(udg_Hashtable,p,$457BCFC0)>=40 then
call EXSetAbilityState(EXGetUnitAbility(u,'H112'),ABILITY_STATE_COOLDOWN,20)
else
call EXSetAbilityState(EXGetUnitAbility(u,'H112'),ABILITY_STATE_COOLDOWN,60-(5*LoadInteger(udg_Hashtable,p,$457BCFC0)))
endif
endif
if Song==1 then
if stage==0 then
call DisplayTimedTextToPlayer(pl,0,0,1.0,"|cffff3399멜트")
call DisplayTimedTextToPlayer(pl2,0,0,1.0,"|cffff3399멜트")
elseif stage==55 then
call DisplayTimedTextToPlayer(pl,0,0,3.3,"|cffffb9b9녹아 버릴 것만 같아")
call DisplayTimedTextToPlayer(pl2,0,0,3.3,"|cffffb9b9녹아 버릴 것만 같아")
elseif stage==225 then
call DisplayTimedTextToPlayer(pl,0,0,4.4,"|cffff009c'좋아해'|r|cffffb9b9 라고는 절대로")
call DisplayTimedTextToPlayer(pl2,0,0,4.4,"|cffff009c'좋아해'|r|cffffb9b9 라고는 절대로")
elseif stage==395 then
call DisplayTimedTextToPlayer(pl,0,0,2.1,"|cffef7171말 못해...")
call DisplayTimedTextToPlayer(pl2,0,0,2.1,"|cffef7171말 못해...")
endif
endif
if Song==2 then
if stage==0 then
call DisplayTimedTextToPlayer(pl,0,0,2.3,"|cffffffff그|r |cffa1ddde때|r|cff72ccce,|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.3,"|cffffffff그|r |cffa1ddde때|r|cff72ccce,|r")
elseif stage==115 then
call DisplayTimedTextToPlayer(pl,0,0,3.1,"|cffffffff날|r |cffa1ddde사|r|cff72ccce준|r")
call DisplayTimedTextToPlayer(pl2,0,0,3.1,"|cffffffff날|r |cffa1ddde사|r|cff72ccce준|r")
elseif stage==270 then
call DisplayTimedTextToPlayer(pl,0,0,2.4,"|cffffffff진|r|cfff2fafa짜|r |cffd8f1f1의|r|cffcceced미|r|cffbfe8e8는|r ")
call DisplayTimedTextToPlayer(pl2,0,0,2.4,"|cffffffff진|r|cfff2fafa짜|r |cffd8f1f1의|r|cffcceced미|r|cffbfe8e8는|r ")
elseif stage==390 then
call DisplayTimedTextToPlayer(pl,0,0,2.8,"|cffa5dedf다|r|cff99dadb르|r|cff8cd5d7잖|r|cff7fd0d2아|r|cff72ccce?|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.8,"|cffa5dedf다|r|cff99dadb르|r|cff8cd5d7잖|r|cff7fd0d2아|r|cff72ccce?|r")
endif
endif
if Song==3 then
if stage==0 then
call DisplayTimedTextToPlayer(pl,0,0,2.2,"|cff706F6B한|r |cffC7C7C9번|r |cffAAAAA6더|r|cffC8C6C3,|r |cff706F6B한|r |cffC7C7C9번|r |cffAAAAA6더|r|cffC8C6C3.|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.2,"|cff706F6B한|r |cffC7C7C9번|r |cffAAAAA6더|r|cffC8C6C3,|r |cff706F6B한|r |cffC7C7C9번|r |cffAAAAA6더|r|cffC8C6C3.|r")
elseif stage==110 then
call DisplayTimedTextToPlayer(pl,0,0,2.4,"|cff706F6B'|r |cffC7C7C9저|r|cffAAAAA6는|r |cffC8C6C3오|r|cff706F6B늘|r|cffC7C7C9도|r |cffAAAAA6구|r|cffC8C6C3릅|r|cff706F6B니|r|cffC7C7C9다|r|cffAAAAA6.|r |cffC8C6C3'|r |cff706F6B라|r|cffC7C7C9고|r|cffAAAAA6,|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.4,"|cff706F6B'|r |cffC7C7C9저|r|cffAAAAA6는|r |cffC8C6C3오|r|cff706F6B늘|r|cffC7C7C9도|r |cffAAAAA6구|r|cffC8C6C3릅|r|cff706F6B니|r|cffC7C7C9다|r|cffAAAAA6.|r |cffC8C6C3'|r |cff706F6B라|r|cffC7C7C9고|r|cffAAAAA6,|r")
elseif stage==230 then
call DisplayTimedTextToPlayer(pl,0,0,2.5,"|cff706F6B소|r|cffC7C7C9녀|r|cffC7C7C9는|r |cffC8C6C3말|r|cffAAAAA8해|r |cff706F6B소|r|cffC7C7C9녀|r|cffAAAAA6는|r |cffC8C6C3말|r|cffAAAAA8해|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.5,"|cff706F6B소|r|cffC7C7C9녀|r|cffC7C7C9는|r |cffC8C6C3말|r|cffAAAAA8해|r |cff706F6B소|r|cffC7C7C9녀|r|cffAAAAA6는|r |cffC8C6C3말|r|cffAAAAA8해|r")
elseif stage==355 then
call DisplayTimedTextToPlayer(pl,0,0,2.7,"|cff706F6B말|r|cffC7C7C9에|r |cffAAAAA6의|r|cff706F6B미|r|cffC7C7C9를|r |cffAAAAA6연|r|cff706F6B주|r|cffC7C7C9하|r|cffAAAAA6면|r|cff706F6B서|r|cffC7C7C9!|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.7,"|cff706F6B말|r|cffC7C7C9에|r |cffAAAAA6의|r|cff706F6B미|r|cffC7C7C9를|r |cffAAAAA6연|r|cff706F6B주|r|cffC7C7C9하|r|cffAAAAA6면|r|cff706F6B서|r|cffC7C7C9!|r")
endif
endif
if Song==4 then
if stage==0 then
call DisplayTimedTextToPlayer(pl,0,0,1.3,"|cffff0000순정?|r |cffe36e85뭐야|r |cff3C3B3C그거|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.3,"|cffff0000순정?|r |cffe36e85뭐야|r |cff3C3B3C그거|r")
elseif stage==65 then
call DisplayTimedTextToPlayer(pl,0,0,1.3,"|cffff0000애정?|r |cffe36e85뭐야|r |cff3C3B3C그거|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.3,"|cffff0000애정?|r |cffe36e85뭐야|r |cff3C3B3C그거|r")
elseif stage==130 then
call DisplayTimedTextToPlayer(pl,0,0,1.1,"|cff3C3B3C맛있는|r |cffe36e85거야?|r |cffff0000이봐|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.1,"|cff3C3B3C맛있는|r |cffe36e85거야?|r |cffff0000이봐|r")
elseif stage==185 then
call DisplayTimedTextToPlayer(pl,0,0,1.4,"|cff3C3B3C맛있는|r |cffe36e85거냐니까,|r |cffff0000들려?|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.4,"|cff3C3B3C맛있는|r |cffe36e85거냐니까,|r |cffff0000들려?|r")
elseif stage==255 then
call DisplayTimedTextToPlayer(pl,0,0,1.3,"|cffff0000난폭|r |cffe36e85안 돼|r |cff3C3B3C안 돼|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.3,"|cffff0000난폭|r |cffe36e85안 돼|r |cff3C3B3C안 돼|r")
elseif stage==320 then
call DisplayTimedTextToPlayer(pl,0,0,1.3,"|cffff0000감정|r |cffe36e85버리고|r |cff3C3B3C가|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.3,"|cffff0000감정|r |cffe36e85버리고|r |cff3C3B3C가|r")
elseif stage==385 then
call DisplayTimedTextToPlayer(pl,0,0,1.3,"|cffff0000하나 둘, 하면|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.3,"|cffff0000하나 둘, 하면|r")
elseif stage==440 then
call DisplayTimedTextToPlayer(pl,0,0,1.3,"|cffe36e85날아갈|r |cff3C3B3C뿐이야|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.3,"|cffe36e85날아갈|r |cff3C3B3C뿐이야|r")
call SetUnitAnimationByIndex(u,10)
endif
endif
if Song==5 then
if stage==0 then
call DisplayTimedTextToPlayer(pl,0,0,2.3,"|cff8affed달|r|cff84f7ea리|r|cff7ef0e7기|r |cff72e1e1시|r|cff6cdade작|r|cff66d3db한|r |cffFCB444너|r|cff55bdd3에|r|cff4fb6d0게|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.3,"|cff8affed달|r|cff84f7ea리|r|cff7ef0e7기|r |cff72e1e1시|r|cff6cdade작|r|cff66d3db한|r |cffFCB444너|r|cff55bdd3에|r|cff4fb6d0게|r")
elseif stage==115 then
call DisplayTimedTextToPlayer(pl,0,0,2.6,"|cff8affed좀|r |cff80f3e8더|r |cffFCB444힘|r|cff71e0e0을|r |cff67d4dc주|r|cff62ced9고|r |cff59c2d4싶|r|cff54bcd2어|r|cff4fb6d0서|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.6,"|cff8affed좀|r |cff80f3e8더|r |cffFCB444힘|r|cff71e0e0을|r |cff67d4dc주|r|cff62ced9고|r |cff59c2d4싶|r|cff54bcd2어|r|cff4fb6d0서|r")
elseif stage==245 then
call DisplayTimedTextToPlayer(pl,0,0,2.4,"|cff8affed아|r|cff81f4e8주|r|cff79eae4,|r |cff68d5dc예|r|cff60cbd8전|r|cff57c0d4부|r|cff4fb6d0터|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.4,"|cff8affed아|r|cff81f4e8주|r|cff79eae4,|r |cff68d5dc예|r|cff60cbd8전|r|cff57c0d4부|r|cff4fb6d0터|r")
elseif stage==365 then
call DisplayTimedTextToPlayer(pl,0,0,2.2,"|cffFCB444마음|cff79eae4먹|r|cff70dfe0고|r |cff60cbd8있|r|cff57c0d4었|r|cff4fb6d0어|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.2,"|cffFCB444마음|cff79eae4먹|r|cff70dfe0고|r |cff60cbd8있|r|cff57c0d4었|r|cff4fb6d0어|r")
endif
endif
if Song==6 then
if stage==10 then
call DisplayTimedTextToPlayer(pl,0,0,1.7,"|cff736B56pa ppa ra ra ru ru|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.7,"|cff736B56pa ppa ra ra ru ru|r")
elseif stage==85 then
call DisplayTimedTextToPlayer(pl,0,0,1.6,"|cffE3D7BD바보를 보는 랑데부|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.6,"|cffE3D7BD바보를 보는 랑데부|r")
elseif stage==165 then
call DisplayTimedTextToPlayer(pl,0,0,2.0,"|cff736B56bo bide ba bi den be bbe bbon|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.0,"|cff736B56bo bide ba bi den be bbe bbon|r")
elseif stage==275 then
call DisplayTimedTextToPlayer(pl,0,0,2.2,"|cffE3D7BD그래서 지금은 아무렇지 않게|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.2,"|cffE3D7BD그래서 지금은 아무렇지 않게|r")
elseif stage==375 then
call DisplayTimedTextToPlayer(pl,0,0,2.6,"|cff736B56적당히 정말 담담|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.6,"|cff736B56적당히 정말 담담|r")
elseif stage==505 then
call DisplayTimedTextToPlayer(pl,0,0,1.2,"|cffE3D7BD하게 살고 있어|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.2,"|cffE3D7BD하게 살고 있어|r")
endif
endif
if Song==7 then
if stage==4 then
call DisplayTimedTextToPlayer(pl,0,0,2.2,"작별인사와 |cffEE5BD2첫|r 인사의")
call DisplayTimedTextToPlayer(pl2,0,0,2.2,"작별인사와 |cffEE5BD2첫|r 인사의")
elseif stage==114 then
call DisplayTimedTextToPlayer(pl,0,0,2.8,"틈을 잇는 사랑을! |cff3EC8C9미래|r를!")
call DisplayTimedTextToPlayer(pl2,0,0,2.8,"틈을 잇는 사랑을! |cff3EC8C9미래|r를!")
elseif stage==254 then
call DisplayTimedTextToPlayer(pl,0,0,1.9,"|cff8DCAF6행복|r도 |cffEB3FAD불행|r도")
call DisplayTimedTextToPlayer(pl2,0,0,1.9,"|cff8DCAF6행복|r도 |cffEB3FAD불행|r도")
elseif stage==349 then
call DisplayTimedTextToPlayer(pl,0,0,1.3,"전부 끌어안고서,")
call DisplayTimedTextToPlayer(pl2,0,0,1.3,"전부 끌어안고서,")
elseif stage==414 then
call DisplayTimedTextToPlayer(pl,0,0,1.7,"|cff8DCAF6i know|r를 |cffEB3FAD뒤따라|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.7,"|cff8DCAF6i know|r를 |cffEB3FAD뒤따라|r")
endif
endif
if Song==8 then
if stage==0 then
call DisplayTimedTextToPlayer(pl,0,0,1.7,"|cfff542cf역|r|cfff049cf시|r|cffeb50cf |r|cffe657cf이|r|cffe25ecf제|r|cffdd65cf |r|cffd86ccf어|r|cffd373cf필|r|cffcf7acf하|r|cffca81cf고|r|cffc588cf |r|cffc08fcf토|r|cffbc96cf끼|r|cffb79dcf면|r|cffb2a4cf |r|cffadabcf되|r|cffa9b2cf잖|r|cffa4b9cf아|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.7,"|cfff542cf역|r|cfff049cf시|r|cffeb50cf |r|cffe657cf이|r|cffe25ecf제|r|cffdd65cf |r|cffd86ccf어|r|cffd373cf필|r|cffcf7acf하|r|cffca81cf고|r|cffc588cf |r|cffc08fcf토|r|cffbc96cf끼|r|cffb79dcf면|r|cffb2a4cf |r|cffadabcf되|r|cffa9b2cf잖|r|cffa4b9cf아|r")
elseif stage==85 then
call DisplayTimedTextToPlayer(pl,0,0,1.3,"|cfff542cfP|r|cffef49cfO|r|cffea51cfP|r|cffe459cf한|r|cffdf61cf |r|cffda69cf애|r|cffd471cf무|r|cffcf79cf |r|cffc981cf구|r|cffc489cf가|r|cffbf91cf하|r|cffb999cf면|r|cffb4a1cf |r|cffafa9cf되|r|cffa9b1cf잖|r|cffa4b9cf아|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.3,"|cfff542cfP|r|cffef49cfO|r|cffea51cfP|r|cffe459cf한|r|cffdf61cf |r|cffda69cf애|r|cffd471cf무|r|cffcf79cf |r|cffc981cf구|r|cffc489cf가|r|cffbf91cf하|r|cffb999cf면|r|cffb4a1cf |r|cffafa9cf되|r|cffa9b1cf잖|r|cffa4b9cf아|r")
elseif stage==155 then
call DisplayTimedTextToPlayer(pl,0,0,1.4,"|cfff542cf꼴|r|cffef49cf사나|r|cffea51cf우|r|cffe459cf니|r|cffdf61cf까|r|cffda69cf |r|cffd471cf질|r|cffcf79cf투|r|cffc981cf는|r|cffc489cf |r|cffbf91cf끝|r|cffb999cf내|r|cffb4a1cf도|r|cffafa9cf록|r|cffa9b1cf |r|cffa4b9cf해|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.4,"|cfff542cf꼴|r|cffef49cf사나|r|cffea51cf우|r|cffe459cf니|r|cffdf61cf까|r|cffda69cf |r|cffd471cf질|r|cffcf79cf투|r|cffc981cf는|r|cffc489cf |r|cffbf91cf끝|r|cffb999cf내|r|cffb4a1cf도|r|cffafa9cf록|r|cffa9b1cf |r|cffa4b9cf해|r")
elseif stage==225 then
call DisplayTimedTextToPlayer(pl,0,0,1.3,"|cfff542cf발|r|cffee4acf화|r|cffe854cf해|r|cffe25dcf버|r|cffdc66cf린|r|cffd56fcf다|r|cffcf78cf니|r|cffc982cf |r|cffc38bcf존|r|cffbd94cf나|r|cffb69dcf |r|cffb0a6cf구|r|cffaab0cf리|r|cffa4b9cf네|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.3,"|cfff542cf발|r|cffee4acf화|r|cffe854cf해|r|cffe25dcf버|r|cffdc66cf린|r|cffd56fcf다|r|cffcf78cf니|r|cffc982cf |r|cffc38bcf존|r|cffbd94cf나|r|cffb69dcf |r|cffb0a6cf구|r|cffaab0cf리|r|cffa4b9cf네|r")
elseif stage==290 then
call DisplayTimedTextToPlayer(pl,0,0,1.4,"|cfff542cf외|r|cffef49cf로|r|cffea51cf워|r|cffe459cf지|r|cffdf61cf면|r|cffda69cf |r|cffd471cf아|r|cffcf79cf무|r|cffc981cf나|r|cffc489cf |r|cffbf91cf상|r|cffb999cf관|r|cffb4a1cf없|r|cffafa9cf잖|r|cffa9b1cf아|r|cffa4b9cf,|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.4,"|cfff542cf외|r|cffef49cf로|r|cffea51cf워|r|cffe459cf지|r|cffdf61cf면|r|cffda69cf |r|cffd471cf아|r|cffcf79cf무|r|cffc981cf나|r|cffc489cf |r|cffbf91cf상|r|cffb999cf관|r|cffb4a1cf없|r|cffafa9cf잖|r|cffa9b1cf아|r|cffa4b9cf,|r")
elseif stage==360 then
call DisplayTimedTextToPlayer(pl,0,0,1.3,"|cfff542cf메|r|cffed4dcf우|r|cffe459cf기|r|cffdc65cf만|r|cffd471cf |r|cffcc7dcf하|r|cffc489cf면|r|cffbc95cf |r|cffb4a1cf되|r|cffacadcf잖|r|cffa4b9cf아|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.3,"|cfff542cf메|r|cffed4dcf우|r|cffe459cf기|r|cffdc65cf만|r|cffd471cf |r|cffcc7dcf하|r|cffc489cf면|r|cffbc95cf |r|cffb4a1cf되|r|cffacadcf잖|r|cffa4b9cf아|r")
elseif stage==425 then
call DisplayTimedTextToPlayer(pl,0,0,1.3,"|cfff542cf마|r|cfff048cf지|r|cffec4ecf못|r|cffe854cf해|r|cffe45acf |r|cffdf61cf사|r|cffdb67cf랑|r|cffd76dcf하|r|cffd374cf며|r|cffcf7acf |r|cffca80cf살|r|cffc686cf아|r|cffc28dcf가|r|cffbd93cf고|r|cffb999cf |r|cffb5a0cf싶|r|cffb1a6cf어|r|cffacaccf져|r|cffa8b2cf서|r|cffa4b9cf,|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.3,"|cfff542cf마|r|cfff048cf지|r|cffec4ecf못|r|cffe854cf해|r|cffe45acf |r|cffdf61cf사|r|cffdb67cf랑|r|cffd76dcf하|r|cffd374cf며|r|cffcf7acf |r|cffca80cf살|r|cffc686cf아|r|cffc28dcf가|r|cffbd93cf고|r|cffb999cf |r|cffb5a0cf싶|r|cffb1a6cf어|r|cffacaccf져|r|cffa8b2cf서|r|cffa4b9cf,|r")
elseif stage==490 then
call DisplayTimedTextToPlayer(pl,0,0,1.2,"|cfff542cf죽|r|cfff049cf을|r|cffeb50cf |r|cffe658cf때|r|cffe15fcf까|r|cffdc67cf지|r|cffd66ecf |r|cffd176cf퓨|r|cffcc7dcf어|r|cffc785cf퓨|r|cffc28ccf어|r|cffbd94cf |r|cffb89bcf할|r|cffb3a3cf |r|cffaeaacf거|r|cffa9b2cf야|r|cffa4b9cf?|r")
call DisplayTimedTextToPlayer(pl2,0,0,1.2,"|cfff542cf죽|r|cfff049cf을|r|cffeb50cf |r|cffe658cf때|r|cffe15fcf까|r|cffdc67cf지|r|cffd66ecf |r|cffd176cf퓨|r|cffcc7dcf어|r|cffc785cf퓨|r|cffc28ccf어|r|cffbd94cf |r|cffb89bcf할|r|cffb3a3cf |r|cffaeaacf거|r|cffa9b2cf야|r|cffa4b9cf?|r")
endif
endif
if Song==9 then
if stage==5 then
call DisplayTimedTextToPlayer(pl,0,0,2.5,"|cff00FBFC너는 내게 있어서|r |cffD30919히어로|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.5,"|cff00FBFC너는 내게 있어서|r |cffD30919히어로|r")
call SetUnitAnimationByIndex(u,12)
elseif stage==130 then
call DisplayTimedTextToPlayer(pl,0,0,2.7,"|cff00FBFC갑자기 나타난|r |cffD30919미래|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.7,"|cff00FBFC갑자기 나타난|r |cffD30919미래|r")
elseif stage==265 then
call DisplayTimedTextToPlayer(pl,0,0,5.8,"|cffD30919살아갈 의미|r|cff00FBFC를 한 번 더 부여해줬어|r")
call DisplayTimedTextToPlayer(pl2,0,0,5.8,"|cffD30919살아갈 의미|r|cff00FBFC를 한 번 더 부여해줬어|r")
endif
endif
if Song==10 then
if stage==0 then
call DisplayTimedTextToPlayer(pl,0,0,2.5,"|cffff9696사랑하고 있었어.|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.5,"|cffff9696사랑하고 있었어.|r")
elseif stage==125 then
call DisplayTimedTextToPlayer(pl,0,0,2.6,"|cffff6464사랑하고 있었는데.|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.6,"|cffff6464사랑하고 있었는데.|r")
elseif stage==255 then
call DisplayTimedTextToPlayer(pl,0,0,2.6,"|cffff5a5a이렇게 해줄게,|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.6,"|cffff5a5a이렇게 해줄게,|r")
elseif stage==385 then
call DisplayTimedTextToPlayer(pl,0,0,2.4,"|cffff0000배신자는.|r")
call DisplayTimedTextToPlayer(pl2,0,0,2.4,"|cffff0000배신자는.|r")
endif
endif
if ModuloInteger(stage,10)==0 then
call recoveryHP(u,tar,WHeal+(GetUnitState(tar,UNIT_STATE_MAX_LIFE)*0.005),"","origin")
call recoveryMP(u,tar,(GetUnitState(tar,UNIT_STATE_MAX_MANA)*0.01),"","origin")
endif
if stage==515 and Song==1 then
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,701)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,700)
call SaveInteger(udg_Hash,GetHandleId(t),$36A4DB36,701)
endif
if stage==545 and Song==2 then
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,701)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,700)
call SaveInteger(udg_Hash,GetHandleId(t),$36A4DB36,701)
endif
if stage==505 and Song==3 then
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,701)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,700)
call SaveInteger(udg_Hash,GetHandleId(t),$36A4DB36,701)
endif
if stage==530 and Song==4 then
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,701)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,700)
call SaveInteger(udg_Hash,GetHandleId(t),$36A4DB36,701)
endif
if stage==490 and Song==5 then
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,701)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,700)
call SaveInteger(udg_Hash,GetHandleId(t),$36A4DB36,701)
endif
if stage==580 and Song==6 then
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,701)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,700)
call SaveInteger(udg_Hash,GetHandleId(t),$36A4DB36,701)
endif
if stage==514 and Song==7 then
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,701)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,700)
call SaveInteger(udg_Hash,GetHandleId(t),$36A4DB36,701)
endif
if stage==570 and Song==8 then
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,701)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,700)
call SaveInteger(udg_Hash,GetHandleId(t),$36A4DB36,701)
endif
if stage==570 and Song==9 then
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,701)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,700)
call SaveInteger(udg_Hash,GetHandleId(t),$36A4DB36,701)
endif
if stage==520 and Song==10 then
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,701)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,700)
endif
call TimerStart(t,0.02,false,function MikuW)
elseif stage<=595 then
if Song==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W1.mp3"),(null),(127),((1.00)*1.0),false,0,0)
elseif Song==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W2.mp3"),(null),(127),((1.00)*1.0),false,0,0)
elseif Song==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W3.mp3"),(null),(127),((1.00)*1.0),false,0,0)
elseif Song==4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W4.mp3"),(null),(127),((1.00)*1.0),false,0,0)
elseif Song==5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W5.mp3"),(null),(127),((1.00)*1.0),false,0,0)
elseif Song==6 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W6.mp3"),(null),(127),((1.00)*1.0),false,0,0)
elseif Song==7 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W7.mp3"),(null),(127),((1.00)*1.0),false,0,0)
elseif Song==8 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W8.mp3"),(null),(127),((1.00)*1.0),false,0,0)
elseif Song==9 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W9.mp3"),(null),(127),((1.00)*1.0),false,0,0)
elseif Song==10 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_W10.mp3"),(null),(127),((1.00)*1.0),false,0,0)
endif
call StopSound(udg_SND,false,true)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,701)
if stage<=150 then
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,210)
elseif stage>=151 and stage<=300 then
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,280)
elseif stage>=301 and stage<=450 then
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,420)
elseif stage>=451 then
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,560)
endif
call TimerStart(t,0.02,false,function MikuW)
endif
if stage==700 then
call BuffCall(tar,'B019',90,false,false)
if LoadBoolean(udg_Hash,p,$FF1BAFDB)then
call StatChangeX(p2,(LoadInteger(udg_Hashtable,p,$457BCFC0)*2)+(APcriP[p]*0.5),"마치확",90,"H1121")
call StatChangeX(p2,(LoadInteger(udg_Hashtable,p,$457BCFC0)*0.05)+(APcriD[p]*0.5),"마치피",90,"H1122")
else
call StatChangeX(p2,(LoadInteger(udg_Hashtable,p,$457BCFC0)*2)+(APcriP[p]*0.3),"마치확",90,"H1121")
call StatChangeX(p2,(LoadInteger(udg_Hashtable,p,$457BCFC0)*0.05)+(APcriD[p]*0.3),"마치피",90,"H1122")
endif
call EFsettingXY(p2,"war3mapImported\\@EF_t6_26b.mdl",1.0,GetUnitX(tar),GetUnitY(tar),2.0,0,1.0,0,0,0)
call EFsettingU(p2,"Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl",1.0,tar,"origin")
call Assets_UseSoundByPath__MakeSound(("Abilities\\Spells\\NightElf\\FaerieDragonInvis\\PhaseShift1.wav"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,tar)
call Assets_UseSoundByPath__MakeSound(("Abilities\\Spells\\NightElf\\FaerieFire\\FaerieFireLaunch1.wav"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,tar)
call TimerStart(t,0.02,false,function MikuW)
endif
if stage>=701 then
call DestroyEffect(ef)
call DestroyEffect(ef2)
call SaveBoolean(udg_Hash,p,$8A6D5609,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set tar=null
set pl=null
set pl2=null
set ef=null
set ef2=null
endfunction
function MikuE takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer l__Int=GetHeroInt(u,true)
local integer Edmg=l__Int*(5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*5))
local integer EShield=R2I(l__Int*(0.1+LoadInteger(udg_Hashtable,p,$6074AEF9)*0.05))
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
if Critical(R2I(APcriP[p]))then
call ShildSet(u,u,8.0,EShield*(1.0+APcriD[p]))
call EFsettingXY(p,"war3mapImported\\Stormfall Void.mdl",0,GetUnitX(u),GetUnitY(u),3.0*Skrange[p],0,1.0,0,0,0)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"♬",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,0,0,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,GetRandomInt(60,120))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.5)
else
call ShildSet(u,u,8.0,EShield)
endif
call EFsettingXY(p,"war3mapImported\\@EF_az_gangtiex12_f1_3x.mdl",1.0,GetUnitX(u),GetUnitY(u),1.0*Skrange[p],0,1.0,0,0,-200)
call EFsettingXY(p,"war3mapImported\\@EF_Vinz Music A Note Powerup.mdl",0,GetUnitX(u),GetUnitY(u),2.5*Skrange[p],0,1.0,0,0,-300)
call TimerStart(t,0.1,false,function MikuE)
else
call EXSetAbilityState(EXGetUnitAbility(u,'H113'),ABILITY_STATE_COOLDOWN,12)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),650*Skrange[p],null)
loop
set tar=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),tar)
exitwhen tar==null
if CheckPlayerGroup(tar)then
call Damage(u,tar,Edmg,2,4,false,1,'H113')
call Stun(u,tar,1.0)
call KnockBackEn(tar,GetUnitX(tar)+(((500)*1.0)*Cos(((s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))*1.0)*bj_DEGTORAD)),GetUnitY(tar)+(((500)*1.0)*Sin(((s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))*1.0)*bj_DEGTORAD)),0.2,0.02)
endif
endloop
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),1500*Skrange[p],null)
loop
set tar=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),tar)
exitwhen tar==null
if CheckBossGroupN(tar)then
if u !=tar then
call ShildSet(u,tar,8.0,EShield*2.0)
endif
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set tar=null
call s__party_deallocate((g))
endfunction
function MikuRattack takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit dummy2=LoadUnitHandle(udg_Hash,GetHandleId(t),$588728A4)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local integer l__Int=GetHeroInt(u,true)
local real Rdmg=l__Int*(0.4+(LoadInteger(udg_Hashtable,p,$BB70E228)*0.3))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
set dummy2=CreateUnit(Player(p-1),'sys7',GetUnitX(dummy),GetUnitY(dummy),s__Angle_PBP(GetUnitX(dummy),GetUnitY(dummy),GetUnitX(tar),GetUnitY(tar)))
call imagedummySET(p,dummy2,"war3mapImported\\@EF_dc2.mdl")
call SetUnitScale(dummy2,0.8,1,1)
call SaveReal(udg_Hash,GetHandleId(t),$DA25243A,GetUnitX(dummy2))
call SaveReal(udg_Hash,GetHandleId(t),$8BEF6842,GetUnitY(dummy2))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$588728A4,dummy2)
call TimerStart(t,0.2,false,function MikuRattack)
elseif stage>=1 and s__Distance_PBP(tempX,tempY,GetUnitX(tar),GetUnitY(tar))>=80 then
call SetUnitX(dummy2,tempX+(((75)*1.0)*Cos(((s__Angle_PBP(tempX,tempY,GetUnitX(tar),GetUnitY(tar)))*1.0)*bj_DEGTORAD)))
call SetUnitY(dummy2,tempY+(((75)*1.0)*Sin(((s__Angle_PBP(tempX,tempY,GetUnitX(tar),GetUnitY(tar)))*1.0)*bj_DEGTORAD)))
call SaveReal(udg_Hash,GetHandleId(t),$DA25243A,GetUnitX(dummy2))
call SaveReal(udg_Hash,GetHandleId(t),$8BEF6842,GetUnitY(dummy2))
call TimerStart(t,0.02,false,function MikuRattack)
else
call Damage(u,tar,Rdmg,2,0,true,1,'H114')
call EFsettingXY(p,"war3mapImported\\@EF_baojiang.mdl",1.0,GetUnitX(tar)+(((100)*1.0)*Cos(((s__Angle_PBP(GetUnitX(tar),GetUnitY(tar),GetUnitX(dummy2),GetUnitY(dummy2)))*1.0)*bj_DEGTORAD)),GetUnitY(tar)+(((100)*1.0)*Sin(((s__Angle_PBP(GetUnitX(tar),GetUnitY(tar),GetUnitX(dummy2),GetUnitY(dummy2)))*1.0)*bj_DEGTORAD)),1.0,0,1.0,0,0,50)
call RemoveUnit(dummy2)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set dummy=null
set tar=null
set dummy2=null
endfunction
function MikuR takes nothing returns nothing
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(MikuRTimer),$B6A6EBAA)
local unit dummy
local unit tar
local integer p=LoadInteger(udg_Hash,GetHandleId(MikuRTimer),$A59BB4C6)
local player pl=Player(p-1)
local integer g=s__party_create()
local timer t
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local integer tempI=0
local integer tempI2=0
call SetUnitState(u,ConvertUnitState(2),GetUnitState(u,ConvertUnitState(2))-Rm)
if LoadInteger(udg_Hash,GetHandleId(MikuRTimer),$62760798)==0 then
call SaveInteger(udg_Hash,GetHandleId(MikuRTimer),$62760798,1)
call EXSetAbilityState(EXGetUnitAbility(u,'H114'),ABILITY_STATE_COOLDOWN,4)
endif
if LoadBoolean(udg_Hash,p,$6C4ABB85)and UnitAlive(u)and GetUnitState(u,ConvertUnitState(2))>=Rm then
set dummy=CreateUnit(pl,'sys7',GetUnitX(u)+(((GetRandomInt(500,600))*1.0)*Cos((((GetRandomReal(0.0,360.0)))*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((GetRandomInt(500,600))*1.0)*Sin((((GetRandomReal(0.0,360.0)))*1.0)*bj_DEGTORAD)),270)
call imagedummySET(p,dummy,"war3mapImported\\@Aura_VFX_CrippleTargetPoison.mdl")
call SetUnitScale(dummy,3.0,1,1)
call UnitApplyTimedLife(dummy,'BHwe',1.0)
set t=CreateTimer()
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),1000*Skrange[p],null)
loop
set tar=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),tar)
exitwhen tar==null
if CheckPlayerGroup(tar)then
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI,tar)
endif
endloop
set tar=null
if tempI !=0 then
loop
exitwhen tar !=null
set tempI2=tempI2+1
if tempI2>tempI then
set tempI2=0
endif
if GetRandomInt(1,tempI)==1 then
set tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
endif
endloop
endif
if LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)!=null then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call TimerStart(t,0.2,false,function MikuRattack)
elseif LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)==null then
call DestroyTimer(t)
endif
else
call EXSetAbilityString('H114',1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_MikuR.blp")
call SaveBoolean(udg_Hash,p,$6C4ABB85,false)
call FlushChildHashtable(udg_Hash,GetHandleId(MikuRTimer))
call PauseTimer(MikuRTimer)
endif
set t=null
set u=null
set dummy=null
set tar=null
set pl=null
call s__party_deallocate((g))
endfunction
function MikuT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local player pl=Player(p-1)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer l__Int=GetHeroInt(u,true)
local integer Tdmg=l__Int*(4+(LoadInteger(udg_Hashtable,p,$132FA1F5)*2))
local integer THeal=R2I(l__Int*(0.2+(LoadInteger(udg_Hashtable,p,$132FA1F5)*0.1)))
local integer Song=LoadInteger(udg_Hash,GetHandleId(t),$4A7C7AC4)
local integer tempI
local integer g=s__party_create()
local integer TLv=LoadInteger(udg_Hash,GetHandleId(t),$304F7A36)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==2 then
call EXSetAbilityState(EXGetUnitAbility(u,'H115'),ABILITY_STATE_COOLDOWN,100)
endif
if GetUnitCurrentOrder(u)==String2OrderIdBJ("avengerform")and stage<=850 and LoadBoolean(udg_Hash,p,$4BDCCEF6)then
if stage==0 then
if Song==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
elseif Song==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90,u)
elseif Song==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90,u)
elseif Song==4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T4.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90,u)
elseif Song==5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T5.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90,u)
elseif Song==6 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T6.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90,u)
elseif Song==7 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T7.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90,u)
elseif Song==8 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T8.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90,u)
elseif Song==9 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T9.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90,u)
elseif Song==10 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T10.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90,u)
endif
endif
if Song==1 then
if ModuloInteger(stage,350)==0 then
call SetUnitAnimationByIndex(u,12)
endif
if stage==6 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff39C5BB미쿠미쿠|r|cffE72880하게 해줄게|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,3.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,2.5)
elseif stage==150 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffE72880노래는 아직이야, 힘낼 테니까|r",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,3.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,2.5)
elseif stage==300 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff39C5BB미쿠미쿠|r|cffE72880하게 해줄게|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.4)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.9)
elseif stage==420 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffE72880그러니까 조금|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.2)
elseif stage==505 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffE72880각오하고 있어 줘|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,4.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,10,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,3.7)
endif
endif
if Song==2 then
if ModuloInteger(stage,150)==0 then
call SetUnitAnimationByIndex(u,4)
endif
if stage==6 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffb7fdff믿|r|cff8ad7e7은|r|cff5cb1d0 |r|cff2f8bb8것|r|cff0165a1은|r",(14*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.8)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.3)
elseif stage==90 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffb7fdff허|r|cffa0eaf3울|r|cff8ad7e7 |r|cff73c4dc좋|r|cff5cb1d0은|r|cff459ec4 |r|cff2f8bb8망|r|cff1878ad상|r|cff0165a1을|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,2.2)
elseif stage==225 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffb7fdff반|r|cff99e4ef복|r|cff7acadf해|r|cff5cb1d0 |r|cff3e98c0비|r|cff207fb1추|r|cff0165a1는|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,2.2)
elseif stage==368 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffb7fdff거|r|cff0165a1울|r",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,60,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.2)
elseif stage==400 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffb7fdff가|r|cff9de7f1희|r|cff83d2e4를|r|cff69bcd6 |r|cff4fa6c9그|r|cff3590bc만|r|cff1c7bae두|r|cff0165a1고|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.2)
elseif stage==485 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffb7fdff내|r|cffa6eff6팽|r|cff96e1ee개|r|cff85d4e5치|r|cff75c6dd듯|r|cff65b8d4이|r|cff54aacb |r|cff439cc3외|r|cff338fbb쳐|r|cff2381b2.|r|cff1273aa.|r|cff0165a1.|r",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.6)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,2.1)
elseif stage==620 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff486338<|r|cff4f683c |r|cff566e41최|r|cff5d7445고|r|cff64794a속|r|cff6b7f4f의|r|cff738553 |r|cff7a8b58이|r|cff81905c별|r|cff889661의|r|cff8f9c66 |r|cff96a26a노|r|cff9ea76f래|r|cffa5ad73 |r|cffacb378>|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,3.5)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,3.0)
endif
endif
if Song==3 then
if ModuloInteger(stage,150)==0 then
call SetUnitAnimationByIndex(u,4)
endif
if stage==0 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff86cbfb끝|r|cff7fc3f6 |r|cff79bcf1없|r|cff72b5ec는|r|cff6cade7 |r|cff66a6e3길|r|cff5f9fde의|r|cff5997d9 |r|cff5290d4어|r|cff4c89cf딘|r|cff4581cb가|r|cff3f7ac6에|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,3.4)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,2.9)
elseif stage==170 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff585e75떨|r|cff555e77어|r|cff535f79져|r|cff51607c |r|cff4f617e있|r|cff4d6281을|r|cff4b6383까|r|cff496485,|r",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.8)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.3)
elseif stage==265 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffcde1ff찾|r|cffc4d8f6는|r|cffbbd0ee |r|cffb2c7e6것|r|cffa9bfde이|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.2)
elseif stage==370 then
call SetUnitAnimationByIndex(u,8)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff488ce0내|r|cff4181d0일|r|cff3a77c1이|r|cff346cb2 |r|cff2d62a3되|r|cff275894면|r",(14*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.9)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.3)
elseif stage==450 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff488ce0분|r|cff4587d9명|r|cff4283d3 |r|cff3f7fcd찾|r|cff3d7ac6을|r|cff3a76c0 |r|cff3772ba수|r|cff346db4 |r|cff3269ad있|r|cff2f65a7을|r|cff2c60a1테|r|cff295c9a니|r|cff275894까|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,2.2)
elseif stage==585 then
call SetUnitAnimationByIndex(u,8)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff3a414e지|r|cff48556b금|r|cff566a88,|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,40,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.4)
elseif stage==640 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffcde1ff눈|r|cffc1d5f4을|r|cffb5cae9 |r|cffa9bfde떠|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.1)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.1)
endif
endif
if Song==4 then
if ModuloInteger(stage,350)==0 then
call SetUnitAnimationByIndex(u,12)
endif
if stage==10 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cfff41f56마|r|cfff64b77음|r|cfff87899도|r|cfffaa4bb |r|cfffcd1dc몸|r|cfffefefe도|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,4.3)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,3.8)
elseif stage==225 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cfff41f56전|r|cfff53466부|r|cfff64b77 |r|cfff76188기|r|cfff87899억|r|cfff98ea9 |r|cfffaa4bb속|r|cfffbbacb의|r|cfffcd1dc |r|cfffde7ed환|r|cfffefefe상|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,3.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,3.2)
elseif stage==410 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cfff41f56참|r|cfff64b77된|r|cfff87899 |r|cfffaa4bb애|r|cfffcd1dc정|r|cfffefefe이|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,3.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,3.2)
elseif stage==595 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cfff41f56손|r|cfff53768끝|r|cfff6507a에|r|cfff7698e서|r|cfff881a0 |r|cfffa9ab3흘|r|cfffbb3c6러|r|cfffcccd8내|r|cfffde4eb렸|r|cfffefefe어|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,3.4)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,2.9)
endif
endif
if Song==5 then
if stage==0 then
call SetUnitAnimationByIndex(u,12)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffAADED6대대대대대대대대|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.8)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.3)
elseif stage==90 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff04A3CC대 서비스|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.9)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,40,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.45)
elseif stage==180 then
call SetUnitAnimationByIndex(u,12)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffF18E4D대대대대 대열창!|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.2)
elseif stage==290 then
call SetUnitAnimationByIndex(u,12)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"Making Groovy",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.4)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.9)
elseif stage==360 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffF18E4DNight Night Night Night Night Night Night Night|r",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.2)
elseif stage==445 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"경험해보지 못한 Night,",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,40,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.5)
elseif stage==535 then
call SetUnitAnimationByIndex(u,12)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"자 해가 뜬다고 준비 OK?",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.5)
elseif stage==670 then
call SetUnitAnimationByIndex(u,4)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff19FFFF만장일치|r다!",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,3.3)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.6)
endif
endif
if Song==6 then
if stage==0 then
call SetUnitAnimationByIndex(u,12)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff1d2093이|r|cff2f2490 |r|cff42288d노|r|cff542c8a래|r|cff683088를|r|cff7a3585,|r|cff8d3982 |r|cff9f3d7f이|r|cffb3417d |r|cffc5467a목|r|cffd84a77소|r|cffea4e74리|r|cfffe5272를|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.8)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,2.3)
elseif stage==140 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff1d2093계|r|cff38268f속|r|cff542c8a |r|cff703286잊|r|cff8d3982지|r|cffa93f7e |r|cffc5467a말|r|cffe14c76아|r|cfffe5272줘|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,2.2)
elseif stage==275 then
call SetUnitAnimationByIndex(u,12)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff1d2093전|r|cff2c2390하|r|cff3b268e고|r|cff4a2a8c |r|cff592d8a싶|r|cff683088어|r|cff773485,|r|cff863783 |r|cff953b81아|r|cffa43e7f득|r|cffb3417d히|r|cffc2457a |r|cffd14878먼|r|cffe04c76 |r|cffef4f74미|r|cfffe5272래|r",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,3.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,2.7)
elseif stage==435 then
call SetUnitAnimationByIndex(u,8)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff1d2093하|r|cff2f2490늘|r|cff42288d을|r|cff542c8a |r|cff683088나|r|cff7a3585는|r|cff8d3982 |r|cff9f3d7f하|r|cffb3417d늘|r|cffc5467a을|r|cffd84a77 |r|cffea4e74나|r|cfffe5272는|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.3)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.8)
elseif stage==500 then
call SetUnitAnimationByIndex(u,8)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff1D2093전속력의|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.4)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.9)
elseif stage==570 then
call SetUnitAnimationByIndex(u,4)
call SetUnitTimeScale(u,0.8)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffFF5372멜로디|r",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,3.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,3.6)
endif
endif
if Song==7 then
if stage==15 then
call SetUnitAnimationByIndex(u,12)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffE91C04신|r |cffC5C3C4같네|r 그거",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,40,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.5)
elseif stage==75 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff000000비겁|r",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.4)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,80,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.1)
elseif stage==105 then
call SetUnitAnimationByIndex(u,12)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffE91C04신|r |cffC5C3C4같네|r 그거",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.4)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,40,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.7)
elseif stage==185 then
call SetUnitTimeScale(u,1.0)
call SetUnitAnimationByIndex(u,12)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"I want you want you IQ가",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.6)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.1)
elseif stage==265 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffC5C3C4내려가는 느낌|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.2)
elseif stage==350 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffE91C04사심|r |cffC5C3C4같네|r 그거",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,40,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.5)
elseif stage==415 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff000000필경|r",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.4)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,80,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.1)
elseif stage==435 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffE91C04사심|r |cffC5C3C4같네|r 그거",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.3)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,40,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.6)
elseif stage==530 then
call SetUnitTimeScale(u,1.0)
call SetUnitAnimationByIndex(u,12)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"I hate you hate you",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.5)
elseif stage==580 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffC5C3C4해충은 어느 쪽|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.7)
endif
endif
if Song==8 then
if ModuloInteger(stage,350)==0 then
call SetUnitAnimationByIndex(u,12)
endif
if stage==18 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff91EBF4아아 사랑해줘 오늘만큼은|r",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.2)
elseif stage==100 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffFFC0B6행복의 의미도 모르지만 말이야|r",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.7)
elseif stage==220 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffC9E38E망상뿐인 이 세상을|r",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.2)
elseif stage==305 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffFDB9FF있는 힘껏 버텨내고 있는 거야|r",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.1)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.6)
elseif stage==415 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffADD8FF그저 아아 사랑해줘 마지막으로|r",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.8)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.3)
elseif stage==510 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"알게될 말은 멋진 말일까?",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.3)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.8)
elseif stage==630 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffFFD3FF상상하고 있어 이 밤이 말이야|r",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.8)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.3)
elseif stage==720 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff92ECF5이대로 내 곁에서 wow|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.3)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.8)
endif
endif
if Song==9 then
if ModuloInteger(stage,350)==0 then
call SetUnitAnimationByIndex(u,12)
endif
if stage==5 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff77B1C8분한 기분 잊지 말아줘|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,3.3)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,2.8)
elseif stage==165 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff1E6662앞을 향하면|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.4)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.7)
elseif stage==285 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff77B1C8기적을 덧칠해내는|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.9)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.2)
elseif stage==380 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff1E6662선명한 세상을|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,3.6)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,3.1)
elseif stage==565 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff77B1C8그려내는 거야|r",(17*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.5)
endif
endif
if Song==10 then
if ModuloInteger(stage,350)==0 then
call SetUnitAnimationByIndex(u,12)
endif
if stage==5 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffD16146몇만 번|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.5)
elseif stage==55 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffffffff사|r|cfff3f3f3라|r|cffe8e8e8져|r|cffdcdcdc도|r|cffd1d1d1 |r|cffc5c5c5사|r|cffbababa라|r|cffaeaeae지|r|cffa3a3a3지|r|cff979797 |r|cff8c8c8c않|r|cff808080고|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.6)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.1)
elseif stage==135 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffffffff울|r|cffd4d4d4려|r|cffaaaaaa퍼|r|cff808080진|r |cffD16146이 곡은|r",(13*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.3)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(45,75))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.8)
elseif stage==250 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffffffff이|r|cffbfbfbf렇|r|cff808080게|r |cffD16146노래|r|cffffffff하|r|cffe5e5e5는|r|cffcccccc |r|cffb3b3b3거|r|cff999999잖|r|cff808080아|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,15,GetRandomInt(135,165))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.7)
elseif stage==360 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff94BAAD그렇지?|r |cffD16146NEO|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.8)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.3)
elseif stage==510 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff94BAAD“처음 뵙겠습니다” 는|r",(12*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.1)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.6)
elseif stage==605 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff94BAAD전해졌을까?|r |cffD16146NEO|r",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,2.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,20,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.5)
endif
endif
if ModuloInteger(stage,5)==0 then
if ModuloInteger(stage,25)==0 then
call EFsettingXY(p,"war3mapImported\\@EF_Sound.mdl",1.0,GetUnitX(u),GetUnitY(u),6.0*Skrange[p],0,1.0,0,0,-200)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),1600*Skrange[p],null)
loop
set tar=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),tar)
exitwhen tar==null
if CheckPlayerGroup(tar)then
if ModuloInteger(stage,25)==0 then
call Damage(u,tar,Tdmg,2,0,false,1,'H115')
call EFsettingU(p,"war3mapImported\\@EF_StarfallTarget.mdl",0,tar,"origin")
endif
elseif IsUnitType(tar,UNIT_TYPE_HERO)and IsUnitAlly(tar,pl)and IsUnitIdType(GetUnitTypeId(tar),UNIT_TYPE_MECHANICAL)==false then
if ModuloInteger(stage,25)==0 then
call EFsettingU(p,"war3mapImported\\@AF_yiliaobengdai.mdl",0,tar,"origin")
call recoveryHP(u,tar,THeal,"","origin")
call recoveryMP(u,tar,(GetUnitState(tar,UNIT_STATE_MAX_MANA)*0.05),"","origin")
endif
if GetUnitAbilityLevel(tar,'H117')==0 and tar !=u then
call UnitAddAbility(tar,'H117')
call StatUP(GetPlayerId(GetOwningPlayer(tar))+1,0.05+LoadInteger(udg_Hashtable,p,$132FA1F5)*0.05,"피증")
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cfff542cf♡|r",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,tar,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.0)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,30,GetRandomInt(75,105))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.2)
endif
if Song==5 then
if stage==135 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetUnitAnimationByIndex(u,8)
call SetTextTagText(bj_lastCreatedTextTag,"Oh Yeah!",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,tar,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.9)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,40,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.45)
elseif stage==275 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetUnitAnimationByIndex(u,8)
call SetTextTagText(bj_lastCreatedTextTag,"Hey!",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,tar,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,40,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.35)
elseif stage==505 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetUnitAnimationByIndex(u,8)
call SetTextTagText(bj_lastCreatedTextTag,"Oh Yeah!",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,tar,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.9)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,40,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.45)
elseif stage==635 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetUnitAnimationByIndex(u,8)
call SetTextTagText(bj_lastCreatedTextTag,"Yes!",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,tar,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,40,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.35)
endif
endif
if Song==7 then
if stage==165 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetUnitTimeScale(u,2.0)
call SetUnitAnimationByIndex(u,8)
call SetTextTagText(bj_lastCreatedTextTag,"“ My God ”",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,tar,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,40,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.35)
elseif stage==500 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetUnitTimeScale(u,2.0)
call SetUnitAnimationByIndex(u,8)
call SetTextTagText(bj_lastCreatedTextTag,"“ My God ”",(15*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,tar,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.7)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,40,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.35)
endif
endif
endif
endloop
endif
set tempI=0
loop
set tempI=tempI+1
exitwhen Playint<tempI
if GetUnitAbilityLevel(Charcter[PP[tempI]],'H117')==1 and not IsUnitInRangeXY(Charcter[PP[tempI]],GetUnitX(u),GetUnitY(u),1600*Skrange[p])then
call UnitRemoveAbility(Charcter[PP[tempI]],'H117')
call StatUP(tempI,(0.05+LoadInteger(udg_Hashtable,p,$132FA1F5)*0.05)*-1,"피증")
endif
endloop
if stage==755 and Song==1 then
call IssueImmediateOrder(u,"stop")
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,900)
endif
if stage==800 and Song==2 then
call IssueImmediateOrder(u,"stop")
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,900)
endif
if stage==750 and Song==3 then
call IssueImmediateOrder(u,"stop")
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,900)
endif
if stage==770 and Song==4 then
call IssueImmediateOrder(u,"stop")
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,900)
endif
if stage==830 and Song==5 then
call IssueImmediateOrder(u,"stop")
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,900)
endif
if stage==745 and Song==6 then
call IssueImmediateOrder(u,"stop")
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,900)
endif
if stage==715 and Song==7 then
call IssueImmediateOrder(u,"stop")
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,900)
endif
if stage==820 and Song==8 then
call IssueImmediateOrder(u,"stop")
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,900)
endif
if stage==720 and Song==9 then
call IssueImmediateOrder(u,"stop")
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,900)
endif
if stage==720 and Song==10 then
call IssueImmediateOrder(u,"stop")
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,900)
endif
call TimerStart(t,0.02,false,function MikuT)
elseif stage<=850 then
if Song==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif Song==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif Song==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif Song==4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T4.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif Song==5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T5.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif Song==6 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T6.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif Song==7 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T7.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif Song==8 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T8.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif Song==9 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T9.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif Song==10 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_T10.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
endif
call StopSound(udg_SND,false,true)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,901)
call TimerStart(t,0.02,false,function MikuT)
elseif stage==850 then
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,901)
call TimerStart(t,0.02,false,function MikuT)
endif
if stage==900 then
call TimerStart(t,0.02,false,function MikuT)
endif
if stage>=901 then
set tempI=0
loop
set tempI=tempI+1
exitwhen Playint<tempI
if GetUnitAbilityLevel(Charcter[PP[tempI]],'H117')==1 then
call UnitRemoveAbility(Charcter[PP[tempI]],'H117')
call StatUP(tempI,(0.05+LoadInteger(udg_Hashtable,p,$132FA1F5)*0.05)*-1,"피증")
endif
endloop
call UnitRemoveAbility(u,'A01A')
call SetUnitTimeScale(u,1.0)
call StatUP(p,TLv*-1,"피감")
call SaveBoolean(udg_Hash,p,$4BDCCEF6,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set tar=null
call s__party_deallocate((g))
endfunction
function MikuSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local unit dummy
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local real tempR
local real tempX
local real tempY
local integer tempI
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local real Mana
local effect ef
local effect ef2
if sk=='H110' then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call UnitAddAbility(u,'Abun')
set dummy=CreateUnit(Player(p-1),'sys7',GetUnitX(u),GetUnitY(u),(GetRandomReal(0.0,360.0)))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
call imagedummySET(p,dummy,Model[p])
call SetUnitScale(dummy,2.0,1,1)
call SetUnitAnimationByIndex(dummy,9)
call StatUP(p,10,"피감")
call invisible(u,0,100.00,0.01,0.01)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_D_new.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,70,u)
call SaveBoolean(udg_Hash,p,$E9C900A0,true)
if LoadBoolean(udg_Hash,p,$8A6D5609)then
call SaveBoolean(udg_Hash,p,$8A6D5609,false)
endif
if LoadBoolean(udg_Hash,p,$4BDCCEF6)then
call SaveBoolean(udg_Hash,p,$4BDCCEF6,false)
endif
call IssueImmediateOrder(u,"stop")
call TimerStart(t,0.01,false,function MikuD)
endif
if sk=='H111' then
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1200 then
set tempX=(GetUnitX(u)+(((1200)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((1200)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
call SaveReal(udg_Hash,GetHandleId(t),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$8BEF6842,tempY)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Miku_Q_Effect1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call TimerStart(t,0.01,false,function MikuQ)
endif
if sk=='H112' then
if tar==Charcter1[p]then
set tar=Charcter[1]
elseif tar==Charcter2[p]then
set tar=Charcter[2]
elseif tar==Charcter3[p]then
set tar=Charcter[3]
elseif tar==Charcter4[p]then
set tar=Charcter[4]
elseif tar==Charcter5[p]then
set tar=Charcter[5]
endif
if UnitAlive(tar)then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$4A7C7AC4,GetRandomInt(1,10))
set ef=AddSpecialEffectTarget("war3mapImported\\@EF_gh01.mdl",tar,"orign")
set ef2=AddSpecialEffectTarget("war3mapImported\\@EF_gh_dj3-resize.mdl",u,"orign")
call SaveEffectHandle(udg_Hash,GetHandleId(t),$F8F856EA,ef)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$94B57B64,ef2)
call EXSetEffectSize(ef2,0.1)
if LoadBoolean(udg_Hash,p,$E9C900A0)then
call SaveBoolean(udg_Hash,p,$E9C900A0,false)
endif
if LoadBoolean(udg_Hash,p,$4BDCCEF6)then
call SaveBoolean(udg_Hash,p,$4BDCCEF6,false)
endif
call SaveBoolean(udg_Hash,p,$8A6D5609,true)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Akasha(2)_B2.mdl",1.0,GetUnitX(tar),GetUnitY(tar),3.0,0,1.0,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_1 (1)_3.mdl",1.0,GetUnitX(tar),GetUnitY(tar),1.0,0,1.0,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_lb_hdgred.mdl",1.0,GetUnitX(tar),GetUnitY(tar),1.2,0,1.0,0,0,50)
call Assets_UseSoundByPath__MakeSound(("Abilities\\Spells\\Human\\HolyBolt\\HolyBolt.wav"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,tar)
call TimerStart(t,0.02,false,function MikuW)
else
call IssueImmediateOrder(u,"stop")
endif
endif
if sk=='H113' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call vibration2(Player(p-1),20,0.3)
call TimerStart(t,0.0,false,function MikuE)
endif
if sk=='H114' then
if LoadBoolean(udg_Hash,p,$6C4ABB85)then
call SaveBoolean(udg_Hash,p,$6C4ABB85,false)
call FlushChildHashtable(udg_Hash,GetHandleId(MikuRTimer))
call PauseTimer(MikuRTimer)
call EXSetAbilityString('H114',1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_MikuR.blp")
else
call SaveBoolean(udg_Hash,p,$6C4ABB85,true)
call SaveInteger(udg_Hash,GetHandleId(MikuRTimer),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(MikuRTimer),$A59BB4C6,p)
call SaveUnitHandle(udg_Hash,GetHandleId(MikuRTimer),$B6A6EBAA,u)
call EXSetAbilityString('H114',1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_MikuR2.blp")
if LoadBoolean(udg_Hash,p,$FF1BAFDB)then
call TimerStart(MikuRTimer,0.15,true,function MikuR)
else
call TimerStart(MikuRTimer,0.3,true,function MikuR)
endif
endif
endif
if sk=='H115' then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$4A7C7AC4,GetRandomInt(1,10))
call SaveBoolean(udg_Hash,p,$4BDCCEF6,true)
if LoadBoolean(udg_Hash,p,$E9C900A0)then
call SaveBoolean(udg_Hash,p,$E9C900A0,false)
endif
if LoadBoolean(udg_Hash,p,$8A6D5609)then
call SaveBoolean(udg_Hash,p,$8A6D5609,false)
endif
call UnitAddAbility(u,'A01A')
call StatUP(p,10+LoadInteger(udg_Hashtable,p,$132FA1F5)*10,"피감")
call SaveInteger(udg_Hash,GetHandleId(t),$304F7A36,10+LoadInteger(udg_Hashtable,p,$132FA1F5)*10)
call TimerStart(t,0.0,false,function MikuT)
endif
set u=null
set t=null
set tar=null
set dummy=null
set ef=null
set ef2=null
endfunction
function MikuST takes integer p returns nothing
local timer t=CreateTimer()
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
set ChSkillD[p]='H110'
set ChSkillQ[p]='H111'
set ChSkillW[p]='H112'
set ChSkillE[p]='H113'
set ChSkillR[p]='H114'
set ChSkillT[p]='H115'
set Range[p]=250
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call TimerStart(t,0.0,false,function MikuPassive)
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_MikuQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_MikuW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_MikuE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_MikuR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_MikuT.blp",0)
endif
set STRup[p]=10
set AGIup[p]=1
set INTup[p]=11
set ADup[p]=5
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$8483D54D,100)
call SaveReal(udg_Hashtable,p,$43C91172,0.3)
call SaveReal(udg_Hashtable,p,$836F3EE3,1)
call SaveReal(udg_Hashtable,p,$9B58470C,150)
call SaveReal(udg_Hashtable,p,$88E0F85F,50)
call SaveReal(udg_Hashtable,p,$E755DDB8,300)
call SaveReal(udg_Hashtable,p,$ABD3E955,200)
call SaveReal(udg_Hashtable,p,$A2229E00,150)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,100)
if LoadBoolean(udg_Hash,p,$FF1BAFDB)then
call SaveReal(udg_Hashtable,p,$C3EA9E83,10)
call SaveReal(udg_Hashtable,p,$A8D71652,15)
else
call SaveReal(udg_Hashtable,p,$C3EA9E83,20)
call SaveReal(udg_Hashtable,p,$A8D71652,30)
endif
call SaveReal(udg_Hashtable,p,$127510D2,2000)
call SaveReal(udg_Hashtable,p,$B491D29B,1500)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$7053185D,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$7053185D,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$688653C6,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$B38981A8,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$7053185D,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$688653C6,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_MikuF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc전장의 디바")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function MikuSkill)
call SaveInteger(udg_Hashtable,p,$5EFF7683,11)
call MikuTT(p)
set u=null
set trg=null
set t=null
endfunction
function RyougiTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer Agi=GetHeroAgi(u,true)
local integer Qdmg=R2I(Agi*(1.5+(LoadInteger(udg_Hashtable,p,$FAFE5485)*2.3)))
local integer Wdmg=Agi*(5+(LoadInteger(udg_Hashtable,p,$457BCFC0)*8))
local integer Edmg=Agi*(8+(LoadInteger(udg_Hashtable,p,$6074AEF9)*5))
local integer Edmg2=Agi*(2+(LoadInteger(udg_Hashtable,p,$6074AEF9)*4))
local integer Rdmg=Agi*(20+(LoadInteger(udg_Hashtable,p,$BB70E228)*18))
local integer Tdmg=Agi*(65+(LoadInteger(udg_Hashtable,p,$132FA1F5)*25))
local integer Tdmg2=20+(LoadInteger(udg_Hashtable,p,$132FA1F5)*10)
local integer Tdmg3=10+(LoadInteger(udg_Hashtable,p,$132FA1F5)*15)
local integer RyougiLV=GetHeroLevel(u)
if RyougiLV>=200 then
set RyougiLV=200
endif
set RyougiLV=RyougiLV/50
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Qm*Kirie[p])
set Wdmg=Wdmg+R2I(Wm*Kirie[p])
set Edmg=Edmg+R2I(Em*Kirie[p])
set Edmg2=Edmg2+R2I(Em*Kirie[p])
set Rdmg=Rdmg+R2I(Rm*Kirie[p])
endif
call EXSetAbilityString(ChSkillD[p],1,ABILITY_DATA_UBERTIP,"사용시 해당 지점으로 돌진후 공격하고 돌아옵니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Agi*(10+(RyougiLV*5)))+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00특수1|cffffa500 : 사용중 무적을 유지합니다.\n|cff00ff00특수2|cffffa500 : 내 레벨 50당 계수 5가 증가합니다. (최대 20)\n|cff00ff00최대사거리|cffffa500 : 900\n|cff00ff00범위|cffffa500 : "+I2S(R2I(300*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(5*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H080')+"/"+R2S(300*Skrange[p]))
if LoadBoolean(udg_Hash,p,$205D9389)then
call EXSetAbilityString(ChSkillQ[p],1,ABILITY_DATA_UBERTIP,"|cffFF0000소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 지점으로 돌진하며 전방의 적들을 베어가릅니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(R2I(Qdmg*1.15))+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00돌진거리|cffffa500 : 437\n|cff00ff00범위|cffffa500 : "+I2S(R2I(450*Skrange[p]))+"\n|cff00ff00특수|cffffa500 : 사용후 3초내에 쿨타임과 마나에 상관없이 2번 더 사용이 가능합니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초\n|cffFF0000EX|cffffa500 : 돌진거리가 75% 상승하고 데미지가 15% 증가한다.")
else
call EXSetAbilityString(ChSkillQ[p],1,ABILITY_DATA_UBERTIP,"|cffFF0000소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 지점으로 돌진하며 전방의 적들을 베어가릅니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00돌진거리|cffffa500 : 250\n|cff00ff00범위|cffffa500 : "+I2S(R2I(450*Skrange[p]))+"\n|cff00ff00특수|cffffa500 : 사용후 3초내에 쿨타임과 마나에 상관없이 2번 더 사용이 가능합니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초")
endif
call EXSetAbilityString(ChSkillW[p],1,ABILITY_DATA_UBERTIP,"|cffFF0000소모 마나 : "+I2S(R2I(Wm))+"|r\n\n료우기가 사용 지점으로 돌진하며 처음으로 부딪친 적과 그 주변에 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00돌진 거리|cffffa500 : 900\n|cff00ff00충돌 범위|cffffa500 : 210\n|cff00ff00범위|cffffa500 : "+I2S(R2I(450*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(8*ct[p]))+"초")
call EXSetAbilityString(ChSkillE[p],1,ABILITY_DATA_UBERTIP,"|cffFF0000소모 마나 : "+I2S(R2I(Em))+"|r\n\n해당 지점으로 은폐 나이프를 던지며 적중시 호락적이 활성화됩니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00나이프 데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00호락적 데미지|cffffa500 : "+I2S(Edmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 1300\n|cff00ff00범위|cffffa500 : 180\n|cff00ff00호락적 범위|cffffa500 : "+I2S(R2I(450*Skrange[p]))+"\n|cff00ff00특수|cffffa500 : 적중시 호락적이 활성화되며 사용시 주변 적들에게 피해를 줍니다.\n|cff00ff00스턴|cffffa500 : 나이프 적중시 1초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(10*ct[p]))+"초")
call EXSetAbilityString(ChSkillR[p],1,ABILITY_DATA_UBERTIP,"|cffFF0000소모 마나 : "+I2S(R2I(Rm))+"|r\n\n대상 지점의 모든 적들의 죽음의 선을 베어넘겨 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00범위|cffffa500 : "+I2S(R2I(700*Skrange[p]))+"\n|cff00ff00사거리|cffffa500 : 1200\n|cff00ff00특수|cffffa500 : 시전중 무적을 유지한다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(30*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H084')+"/"+R2S(700*Skrange[p]))
if LoadBoolean(udg_Hash,p,$205D9389)then
call EXSetAbilityString(ChSkillT[p],1,ABILITY_DATA_UBERTIP,"|cffFF0000소모 마나 : "+I2S(R2I(Tm))+"|r\n\n사용시 료우기가 근원에 접속해서 모든 스텟이 상승하며 모든 스킬의 계수가 상승합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00모든 순수 스탯 상승|cffffa500 : 사용당시 내 기본 스탯의 "+I2S(Tdmg2)+"% \n|cff00ff00스킬 범위 증가|cffffa500 : "+I2S(Tdmg3)+"% \n|cff00ff00범위|cffffa500 : "+I2S(R2I(2000*Skrange[p]))+"\n|cff00ff00특수|cffffa500 : 지속시간동안 근원 파악의 피해 증폭율이 2배가 된다.\n|cff00ff00지속시간|cffffa500 : 60초\n|cff00ff00슬로우|cffffa500 : 시전시 80%\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(180*ct[p]))+"초\n|cffFF0000EX|cffffa500 : 지속시간동안 근원 파악의 피해 증폭율이 2배가 된다.")
else
call EXSetAbilityString(ChSkillT[p],1,ABILITY_DATA_UBERTIP,"|cffFF0000소모 마나 : "+I2S(R2I(Tm))+"|r\n\n사용시 료우기가 근원에 접속해서 모든 스텟이 상승하며 모든 스킬의 계수가 상승합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00모든 순수 스탯 상승|cffffa500 : 사용당시 내 기본 스탯의 "+I2S(Tdmg2)+"% \n|cff00ff00스킬 범위 증가|cffffa500 : "+I2S(Tdmg3)+"% \n|cff00ff00범위|cffffa500 : "+I2S(R2I(2000*Skrange[p]))+"\n|cff00ff00지속시간|cffffa500 : 60초\n|cff00ff00슬로우|cffffa500 : 시전시 80%\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(180*ct[p]))+"초")
endif
set u=null
endfunction
function RyougiEX takes integer p returns nothing
call SaveBoolean(udg_Hash,p,$205D9389,true)
call RyougiTT(p)
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Ryougi_Ex_Bgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Ryougi_Ex_Get.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call ProduTime(36,4)
endif
call SetPlayerName(Player(8),"|cffFF0000료우기 시키 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFF0000살아있는것이라면 신이라도 죽여보이겠어.")
endfunction
function RyougiD takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real tempX2=LoadReal(udg_Hash,GetHandleId(t),$41713DA3)
local real tempY2=LoadReal(udg_Hash,GetHandleId(t),$71CA3531)
local real tempX3
local real tempY3
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local integer RyougiLV=GetHeroLevel(u)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
if not RyougiT then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiF1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiTD.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiF3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
if not RyougiT then
call SetUnitAnimationByIndex(u,5)
else
call SetUnitAnimationByIndex(u,10)
endif
if not RyougiT then
call EFsettingU(p,"war3mapImported\\@EF_Flash Blue.mdx",0,u,"chest")
call EFsettingXY(p,"war3mapImported\\@EF_Shock Wave Blue.mdx",0,tempX,tempY,1,angle,1,0,0,0)
call EFsettingU(p,"war3mapImported\\@EF_Flash Blue.mdx",0,u,"chest")
else
call EFsettingU(p,"war3mapImported\\@EF_R_Flash Pink.mdx",0,u,"chest")
call EFsettingXY(p,"war3mapImported\\@EF_R_Shock Wave Pink.mdx",0,tempX,tempY,1,angle,1,0,0,0)
call EFsettingU(p,"war3mapImported\\@EF_R_Flash Pink.mdx",0,u,"chest")
endif
call EFsettingU(p,"Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",0,u,"hand right")
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),angle)
call imagedummySET(p,dummy,Model[p])
call SetUnitVertexColor(dummy,255,255,255,127)
call SetUnitScale(dummy,2,1,1)
if not RyougiT then
call SetUnitAnimationByIndex(dummy,5)
else
call SetUnitAnimationByIndex(dummy,10)
endif
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
set tempX=GetUnitX(u)+(((-150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Dustwind Smoke.mdx",0,tempX,tempY,1.5,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Hit Wave.mdx",0,tempX,tempY,0.1,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_LB_hdg.mdx",0,tempX,tempY,0.5,angle,1,0,0,10)
call TimerStart(t,0.10,false,function RyougiD)
endif
if stage==1 then
call vibration2(Player(p-1),20,0.15)
if not RyougiT then
call SetUnitAnimationByIndex(u,27)
call SetUnitTimeScale(u,1.75)
else
call SetUnitAnimationByIndex(u,19)
endif
call SetUnitFacingTimed(u,(angle+180.00),0)
call SetUnitVertexColor(u,255,255,255,0)
call TimerStart(t,0.10,false,function RyougiD)
endif
if stage==2 then
call SetUnitTimeScale(u,0.1)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle+90)
call EFsettingU(p,"war3mapImported\\@EF_Rapid Cut.mdx",0,dummy,"origin")
call SetUnitFlyHeight(dummy,150,0)
call SetUnitScale(dummy,0.8,1,1)
if not RyougiT then
call SetUnitVertexColorBJ(dummy,25.00,75.00,100,50.00)
else
call SetUnitVertexColorBJ(dummy,80.00,25.00,70,50.00)
endif
call UnitApplyTimedLife(dummy,'BHwe',1)
call EFsettingXY(p,"war3mapImported\\@EF_Black Blink.mdx",0,GetUnitX(u),GetUnitY(u),1.5,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_White-Qiquan-Special.mdx",0,GetUnitX(u),GetUnitY(u),1,angle,1,0,0,10)
call EFsettingXY(p,"war3mapImported\\@EF_Fuzzy Stomp.mdx",0,GetUnitX(u),GetUnitY(u),1,angle,1,0,0,10)
set tempX=tempX+(((-100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=tempY+(((-100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set tempX2=tempX2+(((-100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY2=tempY2+(((-100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call EFsettingXY(p,"war3mapImported\\@EF_Dustwind TX012A.mdx",0,tempX2,tempY2,0.75,angle,1,0,0,150)
call TimerStart(t,0.00,false,function RyougiD)
set tempX3=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY3=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX3,tempY3,0.3,0.01)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiF3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
if stage>=3 and stage<=13 then
call SetUnitVertexColorBJ(u,100,100,100,(100.00-((I2R(stage)-4.00)*10.00)))
call SetUnitVertexColorBJ(dummy,100,100,100,(50.00+((I2R(stage)-4.00)*5.00)))
call TimerStart(t,0.03,false,function RyougiD)
endif
if stage==14 then
if not RyougiT then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiF2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiTD.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiF4.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call vibration2(Player(p-1),50,0.15)
call SetUnitAnimationByIndex(u,35)
call SetUnitTimeScale(u,4)
set tempX3=tempX2+(((250)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY3=tempY2+(((250)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX3)
call SetUnitY(u,tempY3)
set tempX3=GetUnitX(u)+(((300)*1.0)*Cos(((angle+180)*1.0)*bj_DEGTORAD))
set tempY3=GetUnitY(u)+(((300)*1.0)*Sin(((angle+180)*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX3,tempY3,0.2,0.01)
if not RyougiT then
call EFsettingXY(p,"war3mapImported\\@EF_Ryoul ShootGB1.mdx",0,tempX,tempY,1.5,angle+180,1,60,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_Ryoul ShootGB1.mdx",0,tempX,tempY,1.5,angle,1,150,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding.mdl",0,tempX,tempY,1.5*Skrange[p],angle-180,1,60,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_Freezingring.mdx",0,tempX,tempY,0.8,angle+90,1,0,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Slash Splash Sky.mdx",0,tempX,tempY,1.5,angle+90,1,0,0,150)
else
call EFsettingXY(p,"war3mapImported\\@EF_R_Shock Wave Pink.mdx",0,tempX,tempY,1.5,angle+180,1,60,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_R_Shock Wave Pink.mdx",0,tempX,tempY,1.5,angle,1,150,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding_Pink.mdl",0,tempX,tempY,1.5*Skrange[p],angle-180,1,60,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_R_Freezingring.mdx",0,tempX,tempY,0.8,angle+90,1,0,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_R_AZ_Slash Splash Sky.mdx",0,tempX,tempY,1.5,angle+90,1,0,0,150)
endif
call EFsettingXY(p,"war3mapImported\\@EF_AZ_KingLeoric(SDWZ)_E.mdx",0,tempX,tempY,0.8,angle+90,1,0,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_KingLeoric(SDWZ)_E.mdx",0,tempX,tempY,3,angle+90,1,60,0,150)
if RyougiLV>=200 then
set RyougiLV=200
endif
set RyougiLV=RyougiLV/50
set tempX3=I2R(GetHeroAgi(u,true))*(10+(RyougiLV*5))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,300*Skrange[p],null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckPlayerGroup(dummy)then
call Damage(u,dummy,tempX3,1,0,false,1,'H080')
endif
endloop
call TimerStart(t,0.1,false,function RyougiD)
endif
if stage==15 then
call EFsettingXY(p,"war3mapImported\\@EF_Fuzzy Stomp.mdx",0,tempX2,tempY2,1,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Dust Wave Ice.mdx",0,tempX2,tempY2,2,GetRandomReal(0,360),1,0,0,50)
set tempX3=tempX2+(((50)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY3=tempY2+(((50)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Dust Rush 01.mdx",0,tempX3,tempY3,0.75,angle+180,1,0,0,0)
call RemoveShacull(p)
call TimerStart(t,0.05,false,function RyougiD)
endif
if stage==16 then
call RemoveUnit(dummy)
call SetUnitVertexColorBJ(u,100,100,100,0)
call SetUnitTimeScale(u,1)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call Mujuk(p,u)
endif
call s__party_deallocate((g))
set u=null
set dummy=null
set t=null
endfunction
function RyougiQreset takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
call SetPlayerAbilityAvailable(Player(p-1),'H086',false)
call SetPlayerAbilityAvailable(Player(p-1),'H081',true)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function RyougiQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real tempX
local real tempY
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer Qstage=LoadInteger(udg_Hash,p,$6CEB48BD)
local unit dummy
local real dmg
local integer tempI
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if Qstage==1 then
call SetPlayerAbilityAvailable(Player(p-1),'H081',false)
call SetPlayerAbilityAvailable(Player(p-1),'H086',true)
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$32A9E4C8,p)
call TimerStart(t2,3.00,false,function RyougiQreset)
if not RyougiT then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiQ1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
elseif Qstage==2 then
if not RyougiT then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiQ2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiTQ1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,117,u)
endif
elseif Qstage==3 then
if not RyougiT then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiQ3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiTQ2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,117,u)
endif
endif
if Qstage==3 then
call SetPlayerAbilityAvailable(Player(p-1),'H086',false)
call SetPlayerAbilityAvailable(Player(p-1),'H081',true)
endif
if stage==0 then
if not RyougiT then
call SetUnitAnimationByIndex(u,(34+Qstage))
else
call SetUnitAnimationByIndex(u,(12+Qstage))
endif
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Fuzzy Stomp x0.75.mdx",0,tempX,tempY,1,angle,1,0,0,0)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle+90)
if not RyougiT then
call EFsettingU(p,"war3mapImported\\@EF_BY_Wood_DanGe_ZhanJi_DaoGuang_6_12.mdx",0,dummy,"origin")
call EFsettingU(p,"war3mapImported\\@EF_Anime Slash.mdx",0,dummy,"origin")
call EFsettingU(p,"war3mapImported\\@EF_Shinratensei Blue.mdx",0,dummy,"origin")
call SetUnitVertexColor(dummy,0,63,229,255)
else
call EFsettingU(p,"war3mapImported\\@EF_R_BY_Wood_DanGe_ZhanJi_DaoGuang_6_12.mdx",0,dummy,"origin")
call EFsettingU(p,"war3mapImported\\@EF_R_Shinratensei Pink.mdx",0,dummy,"origin")
call EFsettingU(p,"war3mapImported\\@EF_R_RoundSlashPink.mdl",0,dummy,"origin")
endif
call SetUnitFlyHeight(dummy,150,0)
call SetUnitScale(dummy,1.25,1,1)
call UnitApplyTimedLife(dummy,'BHwe',1)
if Qstage !=2 then
set tempX=GetUnitX(u)+(((400)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((400)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle+90)
if not RyougiT then
call EFsettingU(p,"war3mapImported\\@EF_AZ_Slash Splash Sky.mdx",0,dummy,"origin")
call SetUnitVertexColor(dummy,0,63,229,255)
else
call EFsettingU(p,"war3mapImported\\@EF_R_AZ_Slash Splash Sky.mdx",0,dummy,"origin")
call SetUnitVertexColor(dummy,204,63,178,255)
endif
call SetUnitFlyHeight(dummy,150,0)
call UnitApplyTimedLife(dummy,'BHwe',1)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiQ5.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
else
set tempX=GetUnitX(u)+(((400)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((400)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle-90)
if not RyougiT then
call EFsettingU(p,"war3mapImported\\@EF_AZ_Slash Splash Sky.mdx",0,dummy,"origin")
call SetUnitVertexColor(dummy,0,63,229,255)
else
call EFsettingU(p,"war3mapImported\\@EF_R_AZ_Slash Splash Sky.mdx",0,dummy,"origin")
call SetUnitVertexColor(dummy,204,63,178,255)
endif
call SetUnitFlyHeight(dummy,150,0)
call UnitApplyTimedLife(dummy,'BHwe',1)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiQ4.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
call EFsettingXY(p,"Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl",0,tempX,tempY,1.5,angle+90,1,0,0,150)
call TimerStart(t,0.00,false,function RyougiQ)
call vibration2(Player(p-1),20,0.1)
endif
if stage>=1 and stage<=9 then
set tempX=GetUnitX(u)+(((125)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((125)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if not RyougiT then
call EFsettingXY(p,"war3mapImported\\@EF_70.mdl",0,tempX,tempY,1.5,270,1,0,0,0)
else
call EFsettingXY(p,"war3mapImported\\@EF_R_slash_pink.mdl",0,tempX,tempY,1.5,GetRandomReal(0,360),1,0,0,150)
endif
if LoadBoolean(udg_Hash,p,$205D9389)then
set dmg=GetHeroAgi(u,true)*(1.725+(I2R(LoadInteger(udg_Hashtable,p,$FAFE5485))*2.645))
set tempX=GetUnitX(u)+(((43.75)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((43.75)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
else
set dmg=GetHeroAgi(u,true)*(1.5+(I2R(LoadInteger(udg_Hashtable,p,$FAFE5485))*2.3))
set tempX=GetUnitX(u)+(((25)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((25)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
endif
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,450*Skrange[p],null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckPlayerGroup(dummy)and not IsUnitInGroup(dummy,MultyGroup[p])then
call Damage(u,dummy,dmg,1,0,false,1,'H081')
if not RyougiT then
call EFsettingU(p,"war3mapImported\\@EF_AZ_Magina[2]_B.mdx",0,dummy,"chest")
else
call EFsettingU(p,"war3mapImported\\@EF_R_AZ_Magina[2]_B.mdx",0,dummy,"chest")
endif
call GroupAddUnit(MultyGroup[p],dummy)
endif
endloop
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiQ6.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,dummy)
call TimerStart(t,0.02,false,function RyougiQ)
endif
if stage==10 then
set tempX=GetUnitX(u)+(((125)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((125)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set tempI=GetRandomInt(1,3)
if tempI==1 then
if not RyougiT then
call EFsettingXY(p,"war3mapImported\\@EF_New Daoguang Blue.mdl",0,tempX,tempY,4*Skrange[p],angle-180,1,160,0,150)
else
call EFsettingXY(p,"war3mapImported\\@EF_R_New Daoguang Pink.mdl",0,tempX,tempY,4*Skrange[p],angle-180,1,160,0,150)
endif
elseif tempI==2 then
if not RyougiT then
call EFsettingXY(p,"war3mapImported\\@EF_New Daoguang Blue.mdl",0,tempX,tempY,4*Skrange[p],angle-180,1,210,0,200)
else
call EFsettingXY(p,"war3mapImported\\@EF_R_New Daoguang Pink.mdl",0,tempX,tempY,4*Skrange[p],angle-180,1,210,0,200)
endif
elseif tempI==3 then
if not RyougiT then
call EFsettingXY(p,"war3mapImported\\@EF_New Daoguang Blue.mdl",0,tempX,tempY,4*Skrange[p],angle-180,1,180,0,200)
else
call EFsettingXY(p,"war3mapImported\\@EF_R_New Daoguang Pink.mdl",0,tempX,tempY,4*Skrange[p],angle-180,1,180,0,200)
endif
endif
call RemoveShacull(p)
call GroupClear(MultyGroup[p])
call DestroyGroup(MultyGroup[p])
if Qstage==3 then
call RemoveSavedInteger(udg_Hash,p,$6CEB48BD)
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set t2=null
set u=null
set dummy=null
endfunction
function RyougiW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real tempX2
local real tempY2
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit dummy
local unit c=null
local integer tempI
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call vibration2(Player(p-1),15,0.15)
if not RyougiT then
call SetUnitAnimationByIndex(u,5)
else
call SetUnitAnimationByIndex(u,10)
endif
if not RyougiT then
call EFsettingU(p,"war3mapImported\\@EF_Ziggurat Missile Ribbon.mdx",0.4,u,"head")
call EFsettingU(p,"war3mapImported\\@EF_Ziggurat Missile Ribbon.mdx",0.4,u,"chest")
call EFsettingU(p,"war3mapImported\\@EF_Ziggurat Missile Ribbon.mdx",0.4,u,"hand right")
call EFsettingU(p,"war3mapImported\\@EF_Ziggurat Missile Ribbon.mdx",0.4,u,"hand left")
call EFsettingU(p,"war3mapImported\\@EF_Ziggurat Missile Ribbon.mdx",0.4,u,"weapon")
else
call EFsettingU(p,"war3mapImported\\@EF_R_Ziggurat Missile Ribbon.mdx",0.4,u,"head")
call EFsettingU(p,"war3mapImported\\@EF_R_Ziggurat Missile Ribbon.mdx",0.4,u,"chest")
call EFsettingU(p,"war3mapImported\\@EF_R_Ziggurat Missile Ribbon.mdx",0.4,u,"hand right")
call EFsettingU(p,"war3mapImported\\@EF_R_Ziggurat Missile Ribbon.mdx",0.4,u,"hand left")
call EFsettingU(p,"war3mapImported\\@EF_R_Ziggurat Missile Ribbon.mdx",0.4,u,"weapon")
endif
call EFsettingXY(p,"war3mapImported\\@EF_Fuzzy Stomp.mdx",0,GetUnitX(u),GetUnitY(u),1,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_LB_hdg.mdx",0,GetUnitX(u),GetUnitY(u),0.65,GetRandomReal(0,360),1,0,0,10)
call EFsettingXY(p,"war3mapImported\\@EF_Nitu.mdx",0,GetUnitX(u),GetUnitY(u),1.5,angle,1,0,0,10)
call EFsettingXY(p,"war3mapImported\\@EF_White-Qiquan-Special.mdx",0,GetUnitX(u),GetUnitY(u),1.5,angle,1,0,0,10)
call TimerStart(t,0.2,false,function RyougiW)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiW2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
if stage==1 then
if not RyougiT then
call SetUnitAnimationByIndex(u,16)
call SetUnitTimeScale(u,2)
else
call SetUnitAnimationByIndex(u,18)
endif
call TimerStart(t,0.0,false,function RyougiW)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiW3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
if stage>=2 and stage<=12 then
set tempX=GetUnitX(u)+(((90)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((90)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
set tempI=stage-(stage/2)*2
if tempI==0 then
if not RyougiT then
call EFsettingXY(p,"war3mapImported\\@EF_Ryoul Laser Particle Blue.mdx",0,tempX,tempY,1,angle,1,90,0,100)
else
call EFsettingXY(p,"war3mapImported\\@EF_R_Ryoul Laser Particle Blue.mdx",0,tempX,tempY,1,angle,1,90,0,100)
endif
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,210,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckPlayerGroup(dummy)then
set c=dummy
endif
endloop
if c !=null then
call SetUnitTimeScale(u,1)
if not RyougiT then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiW1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiTW.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,117,u)
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiW4.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
set tempX=GetUnitX(c)
set tempY=GetUnitY(c)
set tempX2=tempX+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY2=tempY+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call EFsettingU(p,"war3mapImported\\@EF_AZ_Qianzhan-Yingzi White.mdl",0,dummy,"origin")
call SetUnitFlyHeight(dummy,150,0)
call UnitApplyTimedLife(dummy,'BHwe',1)
call SetUnitScale(dummy,2,1,1)
if not RyougiT then
call SetUnitVertexColorBJ(dummy,25.00,75.00,100,0.00)
else
call SetUnitVertexColorBJ(dummy,80.00,25.00,70,0.00)
endif
if not RyougiT then
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding.mdl",0,tempX,tempY,2,angle+40,1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding.mdl",0,tempX,tempY,2,angle-40,1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding.mdl",0,tempX,tempY,2.5,angle,1,90,0,0)
else
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding_Pink.mdl",0,tempX,tempY,2,angle+40,1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding_Pink.mdl",0,tempX,tempY,2,angle-40,1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding_Pink.mdl",0,tempX,tempY,2.5,angle,1,90,0,0)
endif
set tempX2=GetHeroAgi(u,true)*(5+(LoadInteger(udg_Hashtable,p,$457BCFC0))*8)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(c),GetUnitY(c),450*Skrange[p],null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckPlayerGroup(dummy)then
call Damage(u,dummy,tempX2,1,0,false,1,'H082')
endif
endloop
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call TimerStart(t,0.02,false,function RyougiW)
endif
if stage==13 then
call SetUnitTimeScale(u,1)
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set dummy=null
endfunction
function RyougiEreset takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
call SetPlayerAbilityAvailable(Player(p-1),'H087',false)
call SetPlayerAbilityAvailable(Player(p-1),'H083',true)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function RyougiE takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real tempX
local real tempY
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit c=null
local integer tempI
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
if not RyougiT then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiE1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiTE.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,117,u)
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiE3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
if not RyougiT then
call SetUnitAnimationByIndex(u,10)
else
call SetUnitAnimationByIndex(u,13)
endif
set tempX=GetUnitX(u)+(((50)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((50)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call EFsettingU(p,"war3mapImported\\@EF_Secret Knife4.mdl",1.5,dummy,"origin")
call SetUnitFlyHeight(dummy,150,0)
call SetUnitScale(dummy,2.5,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Dust Rush 01.mdl",0,tempX,tempY,1,angle,1,0,0,0)
endif
if stage>=1 and stage<=21 then
set tempX=GetUnitX(dummy)+(((65)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((65)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,210,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and GetUnitTypeId(dummy)=='sys9' then
call RemoveUnit(dummy)
set dummy=c
endif
endloop
if GetUnitTypeId(dummy)!='sys9' then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiE2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,dummy)
set tempX=GetHeroAgi(u,true)*(8+(LoadInteger(udg_Hashtable,p,$6074AEF9))*5)
call Damage(u,dummy,tempX,1,0,false,1,'H083')
call Stun(u,dummy,1)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_KingLeoric(SDWZ)_E.mdl",0,GetUnitX(dummy),GetUnitY(dummy),1,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW.mdl",0,GetUnitX(dummy),GetUnitY(dummy),1,270,1,0,0,0)
call SetPlayerAbilityAvailable(Player(p-1),'H087',true)
call SetPlayerAbilityAvailable(Player(p-1),'H083',false)
call SaveUnitHandle(udg_Hash,p,$A04E1E,dummy)
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$32A9E4C8,p)
call TimerStart(t2,3.0,false,function RyougiEreset)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
if stage==22 then
call RemoveUnit(dummy)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call TimerStart(t,0.02,false,function RyougiE)
endif
call s__party_deallocate((g))
set t=null
set t2=null
set u=null
set c=null
set dummy=null
endfunction
function RyougiEE takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real tempX
local real tempY
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit tar=LoadUnitHandle(udg_Hash,p,$A04E1E)
local unit c=null
local integer tempI
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call Mujuk(p,u)
if stage==0 then
if not RyougiT then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiEE1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiTEE1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,117,u)
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiEE2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call SetPlayerAbilityAvailable(Player(p-1),'H087',false)
call SetPlayerAbilityAvailable(Player(p-1),'H083',true)
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call KnockBackXY(u,tempX,tempY,0.2,0.01)
if not RyougiT then
call SetUnitAnimationByIndex(u,14)
else
call SetUnitAnimationByIndex(u,17)
endif
call SetUnitTimeScale(u,3)
if not RyougiT then
call EFsettingU(p,"war3mapImported\\@EF_GameBABY_mdx_lingzifengbao_001 Blue.mdx",0,u,"chest")
else
call EFsettingU(p,"war3mapImported\\@EF_R_GameBABY_mdx_lingzifengbao_001 Pink.mdx",0,u,"chest")
endif
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_Dustwind Smoke.mdx",0,tempX,tempY,2,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Hit Wave.mdx",0,tempX,tempY,1,angle,1,0,0,10)
call EFsettingXY(p,"war3mapImported\\@EF_White-Qiquan-Special.mdx",0,tempX,tempY,1,angle,1,0,0,10)
call EFsettingXY(p,"war3mapImported\\@EF_Fuzzy Stomp.mdx",0,tempX,tempY,1,angle,1,0,0,10)
call EFsettingXY(p,"war3mapImported\\@EF_LB_hdg.mdx",0,tempX,tempY,0.5,angle,1,0,0,10)
call TimerStart(t,0.2,false,function RyougiEE)
endif
if stage==1 then
call SetUnitTimeScale(u,0.1)
call TimerStart(t,0.05,false,function RyougiEE)
endif
if stage==2 then
call vibration2(Player(p-1),30,0.15)
set tempX=GetUnitX(u)+(((300)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.3,0.01)
call SetUnitTimeScale(u,1.65)
set tempX=GetHeroAgi(u,true)*(2+(LoadInteger(udg_Hashtable,p,$6074AEF9))*4)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),450*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,tempX,1,0,false,1,'H083')
endif
endloop
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
if not RyougiT then
call EFsettingXY(p,"war3mapImported\\@EF_BYDG.mdx",0,tempX,tempY,0.75*Skrange[p],angle,1,0,0,300)
else
call EFsettingXY(p,"war3mapImported\\@EF_R_Mr.War3_XZ4.mdl",0,tempX,tempY,0.75*Skrange[p],angle,1,0,0,300)
endif
call EFsettingXY(p,"war3mapImported\\@EF_AZ_KingLeoric(SDWZ)_E.mdx",0,tempX,tempY,3.5*Skrange[p],angle+90,1,0,0,100)
set tempX=GetUnitX(tar)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if not RyougiT then
call EFsettingXY(p,"war3mapImported\\@EF_BYDG.mdx",0,tempX,tempY,2*Skrange[p],angle+180,1,60,0,50)
else
call EFsettingXY(p,"war3mapImported\\@EF_R_Mr.War3_XZ4.mdl",0,tempX,tempY,2*Skrange[p],angle+180,1,60,0,50)
endif
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle+180)
if not RyougiT then
call EFsettingU(p,"war3mapImported\\@EF_AZ_QiLiu2.mdx",0,c,"origin")
else
call EFsettingU(p,"war3mapImported\\@EF_R_AZ_QiLiu2.mdx",0,c,"origin")
endif
call SetUnitFlyHeight(c,50,0)
call SetUnitScale(c,2*Skrange[p],1,1)
if not RyougiT then
call SetUnitVertexColorBJ(c,25.00,75.00,100,0.00)
else
call SetUnitVertexColorBJ(c,80.00,25.00,70,0.00)
endif
call SetUnitAnimationByIndex(c,60)
call UnitApplyTimedLife(c,'BHwe',1)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiEE3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call TimerStart(t,0.0,false,function RyougiEE)
endif
if stage>=3 and stage<=8 then
set tempX=GetUnitX(tar)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_BYDG.mdx",0,tempX,tempY,GetRandomReal(0.5,0.75)*Skrange[p],angle,1,GetRandomInt(50,140),0,300)
call TimerStart(t,0.04,false,function RyougiEE)
endif
if stage==9 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiEE5.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call TimerStart(t,0.2,false,function RyougiEE)
endif
if stage==10 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiEE4.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call SetUnitTimeScale(u,1)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_Fuzzy Stomp.mdx",0,tempX,tempY,1,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Dust Wave Ice.mdx",0,tempX,tempY,2,GetRandomReal(0,360),1,0,0,50)
set tempX=GetUnitX(u)+(((50)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((50)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Dust Rush 01.mdx",0,tempX,tempY,0.75,angle+180,1,90,0,0)
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set tar=null
endfunction
function RyougiR takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real tempX
local real tempY
local real dmg
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit c=LoadUnitHandle(udg_Hash,GetHandleId(t),$A3098AE2)
local real distance=LoadReal(udg_Hash,GetHandleId(t),$47527379)
local integer loopA
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call Mujuk(p,u)
if stage==0 then
if not RyougiT then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiR1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiTR1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,127,u)
endif
call vibration2(Player(p-1),15,0.15)
if not RyougiT then
call SetUnitAnimationByIndex(u,5)
else
call SetUnitAnimationByIndex(u,10)
endif
if not RyougiT then
call EFsettingU(p,"war3mapImported\\@EF_Blink New Sky.mdx",0,u,"weapon")
call EFsettingXY(p,"war3mapImported\\@EF_Blue-Zhendi-Ryougi-Big.mdx",0,GetUnitX(u),GetUnitY(u),1,angle,1,0,0,0)
else
call EFsettingXY(p,"war3mapImported\\@EF_R_Blue-Zhendi-Ryougi-Big.mdx",0,GetUnitX(u),GetUnitY(u),1,angle,1,0,0,0)
endif
call EFsettingU(p,"Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",0,u,"weapon")
call EFsettingXY(p,"war3mapImported\\@EF_Fuzzy Stomp.mdx",0,GetUnitX(u),GetUnitY(u),1,angle,1,0,0,0)
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),angle)
call imagedummySET(p,c,Model[p])
call SetUnitVertexColor(c,255,255,255,127)
call SetUnitScale(c,2,1,1)
call SetUnitAnimationByIndex(c,5)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$A3098AE2,c)
call TimerStart(t,0.45,false,function RyougiR)
endif
if stage==1 then
if not RyougiT then
call SetUnitAnimationByIndex(u,16)
else
call SetUnitAnimationByIndex(u,19)
endif
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Dust Rush 01.mdx",0,tempX,tempY,0.75,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Dustwind Smoke.mdx",0,tempX,tempY,2,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Hit Wave.mdx",0,tempX,tempY,1,angle,1,0,0,10)
call EFsettingXY(p,"war3mapImported\\@EF_Fuzzy Stomp.mdx",0,tempX,tempY,1,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_LB_hdg.mdx",0,tempX,tempY,0.5,angle,1,0,0,10)
call EFsettingXY(p,"war3mapImported\\@EF_White-Qiquan-Special.mdx",0,tempX,tempY,0.5,angle,1,0,0,10)
set tempX=GetUnitX(u)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Dustwind TX012A.mdx",0,tempX,tempY,0.75,angle,1,0,0,150)
call TimerStart(t,0.00,false,function RyougiR)
endif
if stage>=2 and stage<=16 then
set tempX=GetUnitX(u)+(((distance*0.081)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((distance*0.081)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
call TimerStart(t,0.005,false,function RyougiR)
endif
if stage==17 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiR2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call vibration2(Player(p-1),100,0.25)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_Hit Wave.mdx",0,tempX,tempY,1.65,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_White-Qiquan-Special.mdx",0,tempX,tempY,1.65,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Fuzzy Stomp.mdx",0,tempX,tempY,1.65,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_LB_hdg.mdx",0,tempX,tempY,0.65,angle,1,0,0,10)
set loopA=0
loop
exitwhen loopA>=2
set loopA=loopA+1
call EFsettingXY(p,"war3mapImported\\@EF_Nitu.mdx",0,tempX,tempY,2,(angle+150)+(loopA*30),1,0,0,10)
endloop
set tempX=GetUnitX(u)+(((200)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((200)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if not RyougiT then
call EFsettingXY(p,"war3mapImported\\@EF_New Daoguang Blue.mdx",0,tempX,tempY,1.5,angle,1,0,0,100)
else
call EFsettingXY(p,"war3mapImported\\@EF_R_New Daoguang Pink.mdx",0,tempX,tempY,1.5,angle,1,0,0,100)
endif
set tempX=GetUnitX(u)+(((-500)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-500)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set dmg=GetHeroAgi(u,true)*(20+(LoadInteger(udg_Hashtable,p,$BB70E228))*18)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,700*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,1,0,false,1,'H084')
endif
endloop
if not RyougiT then
call EFsettingXY(p,"war3mapImported\\@EF_Blue--Zhendi.mdx",0,tempX,tempY,1.5*Skrange[p],angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_BY_Wood_Effect_Order_DanGe_LiangYiShi_ZhiSiZhiMoYanZhanJi Blue.mdx",0,tempX,tempY,5*Skrange[p],angle,1,0,0,325)
else
call EFsettingXY(p,"war3mapImported\\@EF_R_JDP_Sakura.mdl",0,tempX,tempY,1.5*Skrange[p],angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_R_cfdtz n.mdl",0,tempX,tempY,2*Skrange[p],90,1,0,0,325)
call EFsettingXY(p,"war3mapImported\\@EF_R_BY_Wood_Effect_Order_DanGe_LiangYiShi_ZhiSiZhiMoYanZhanJi Blue.mdx",0,tempX,tempY,5*Skrange[p],angle,1,0,0,325)
endif
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle+180)
call EFsettingU(p,"war3mapImported\\@EF_Flash Antimagic Zone.mdx",0,c,"origin")
call EFsettingU(p,"war3mapImported\\@EF_Flash Antimagic Zone.mdx",0,c,"origin")
call SetUnitFlyHeight(c,20,0)
call UnitApplyTimedLife(c,'BHwe',1)
call SetUnitScale(c,0.5,1,1)
if not RyougiT then
call SetUnitVertexColorBJ(c,0.00,25.00,100.00,0.00)
else
call SetUnitVertexColorBJ(c,80.00,25.00,70,0.00)
endif
call EFsettingXY(p,"war3mapImported\\@EF_Pieces.mdx",0,tempX,tempY,GetRandomReal(2.5,4.0),angle,1,GetRandomInt(0,180),0,150)
if not RyougiT then
set loopA=0
loop
exitwhen loopA>=12
set loopA=loopA+1
set tempX=GetUnitX(u)+(((-500)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-500)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set tempX=tempX+(((SquareRoot(GetRandomReal(0,(400.00*400.00))))*1.0)*Cos(((GetRandomReal(0,360))*1.0)*bj_DEGTORAD))
set tempY=tempY+(((SquareRoot(GetRandomReal(0,(400.00*400.00))))*1.0)*Sin(((GetRandomReal(0,360))*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Yishan.mdx",0,tempX,tempY,GetRandomReal(0.50,0.80),GetRandomReal(0,360),1,GetRandomReal(0,180),0,GetRandomReal(100,200))
endloop
endif
call TimerStart(t,0.15,false,function RyougiR)
endif
if stage==18 then
call RemoveUnit(c)
set tempX=GetUnitX(u)+(((-500)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-500)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle+180)
call EFsettingU(p,"war3mapImported\\@EF_Flash Antimagic Zone.mdx",0,c,"origin")
call EFsettingU(p,"war3mapImported\\@EF_Flash Antimagic Zone.mdx",0,c,"origin")
call SetUnitFlyHeight(c,20,0)
call UnitApplyTimedLife(c,'BHwe',1)
call SetUnitScale(c,0.5,1,1)
if not RyougiT then
call SetUnitVertexColorBJ(c,0.00,25.00,100.00,0.00)
else
call SetUnitVertexColorBJ(c,80.00,25.00,70,0.00)
endif
call TimerStart(t,0.3,false,function RyougiR)
endif
if stage==19 then
call RemoveUnit(c)
set tempX=GetUnitX(u)+(((-500)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-500)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle+180)
call EFsettingU(p,"war3mapImported\\@EF_Flash Antimagic Zone.mdx",0,c,"origin")
call EFsettingU(p,"war3mapImported\\@EF_Flash Antimagic Zone.mdx",0,c,"origin")
call SetUnitFlyHeight(c,20,0)
call UnitApplyTimedLife(c,'BHwe',1)
call SetUnitScale(c,0.5,1,1)
if not RyougiT then
call SetUnitVertexColorBJ(c,0.00,25.00,100.00,0.00)
else
call SetUnitVertexColorBJ(c,80.00,25.00,70,0.00)
endif
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function RyougiTend takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer l__str=LoadInteger(udg_Hash,GetHandleId(t),$2D297D87)
local integer agi=LoadInteger(udg_Hash,GetHandleId(t),$9ABDB814)
local integer int=LoadInteger(udg_Hash,GetHandleId(t),$57259F3B)
local real dmg
local integer loopA
call CharacterEXmodelSet(Charcter[p],"war3mapImported\\@C_Hero Ryougi Shiki.mdl")
set Model[p]="war3mapImported\\@C_Hero Ryougi Shiki.mdl"
set RyougiT=false
call SetPlayerAbilityAvailable(Player(p-1),'H085',true)
call SetHeroStr(Charcter[p],GetHeroStr(Charcter[p],false)-l__str,true)
call SetHeroAgi(Charcter[p],GetHeroAgi(Charcter[p],false)-agi,true)
call SetHeroInt(Charcter[p],GetHeroInt(Charcter[p],false)-int,true)
set dmg=GetUnitState(Charcter[p],ConvertUnitState(0x12))
set loopA=R2I(dmg)-agi
call JNSetUnitBaseDamage(Charcter[p],loopA,1)
call TimerStart(udg_PstatTimer[p],0.02,false,null)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function RyougiTTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local real dmg
local real tempR
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit c
local integer loopA
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiT1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call EFsettingXY(p,"war3mapImported\\@EF_hakkestart.mdl",5,tempX,tempY,4*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_SakuraEF_Ryougi.mdl",5,tempX,tempY,4,270,1,0,0,300)
call EFsettingXY(p,"war3mapImported\\@EF_SakuraEF_Ryougi.mdl",5,tempX,tempY,4,270,1,0,0,300)
call EFsettingXY(p,"war3mapImported\\@EF_SakuraEF_Ryougi.mdl",5,tempX,tempY,4,270,1,0,0,300)
call SetPlayerAbilityAvailable(Player(p-1),'H085',false)
call CharacterEXmodelSet(u,"war3mapImported\\@C_origin_shiki5.mdl")
set Model[p]="war3mapImported\\@C_origin_shiki5.mdl"
call EXSetUnitFacing(u,270)
set RyougiT=true
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),2000*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call SlowApply(u,c,5,0.8)
endif
endloop
endif
if stage==1 then
call SetUnitAnimationByIndex(u,5)
endif
if stage==180 or stage==185 or stage==190 then
call EFsettingXY(p,"war3mapImported\\@EF_dtpinkring.mdl",0,tempX,tempY,6,270,1,0,0,0)
endif
if stage==200 then
call SetUnitTimeScale(u,1)
call SetUnitAnimationByIndex(u,7)
endif
if stage==250 then
call FilterBasic(Player(p-1),2.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,75.00,90.00,0.00,100.00,75.00,90.00,100.00)
set loopA=0
loop
exitwhen loopA==7
set loopA=loopA+1
set tempX=GetUnitX(u)+(((800)*1.0)*Cos(((loopA*60)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((800)*1.0)*Sin(((loopA*60)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_R_JDP_Sakura.mdl",0,tempX,tempY,10,270,1,0,0,0)
endloop
set tempX=GetUnitX(u)-(((2000)*1.0)*Cos(((50)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)-(((2000)*1.0)*Sin(((50)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_R_LaserPink.mdl",0,tempX,tempY,3,50,2,180,0,150)
set dmg=GetHeroAgi(u,true)*(65+(LoadInteger(udg_Hashtable,p,$132FA1F5)*25))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),2000*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,1,0,false,1,'H085')
call EFsettingXY(p,"war3mapImported\\@EF_R_SakuraExplosion.mdl",0,GetUnitX(c),GetUnitY(c),3,270,1,0,0,0)
endif
endloop
if ProduceLV<1 then
set ProduceLV=1
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_RyougiTbgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call ProduTime(60,1)
endif
set t2=CreateTimer()
call TimerStart(t2,60,false,function RyougiTend)
call SaveInteger(udg_Hash,GetHandleId(t2),$32A9E4C8,p)
set dmg=0.2+(LoadInteger(udg_Hashtable,p,$132FA1F5)*0.1)
call SaveInteger(udg_Hash,GetHandleId(t2),$2D297D87,R2I(GetHeroStr(u,false)*dmg))
call SaveInteger(udg_Hash,GetHandleId(t2),$9ABDB814,R2I(GetHeroAgi(u,false)*dmg))
call SaveInteger(udg_Hash,GetHandleId(t2),$57259F3B,R2I(GetHeroInt(u,false)*dmg))
call SetHeroStr(Charcter[p],GetHeroStr(Charcter[p],false)+R2I(GetHeroStr(u,false)*dmg),true)
call SetHeroAgi(Charcter[p],GetHeroAgi(Charcter[p],false)+R2I(GetHeroAgi(u,false)*dmg),true)
call SetHeroInt(Charcter[p],GetHeroInt(Charcter[p],false)+R2I(GetHeroInt(u,false)*dmg),true)
call StatChange(p,0.1+(LoadInteger(udg_Hashtable,p,$132FA1F5)*0.15),"스킬범위",60)
set tempR=GetUnitState(Charcter[p],ConvertUnitState(0x12))
set loopA=R2I(tempR)+R2I(GetHeroAgi(u,false)*dmg)
call JNSetUnitBaseDamage(Charcter[p],loopA,1)
call TimerStart(udg_PstatTimer[p],0.02,false,null)
call endMujuk(p,u)
call BuffCall(u,'B010',60,false,false)
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call Mujuk(p,u)
call TimerStart(t,0.02,false,function RyougiTTimer)
endif
call s__party_deallocate((g))
set t=null
set t2=null
set u=null
set c=null
endfunction
function RyougiSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local integer tempI
local integer temp
local real tempX
local real tempY
local real Mana
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
if sk=='H080' then
set Mana=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$41713DA3,GetUnitX(u))
call SaveReal(udg_Hash,GetHandleId(t),$71CA3531,GetUnitY(u))
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,Mana)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=900 then
set SkillLocX=(GetUnitX(u)+(((900)*1.0)*Cos(((Mana)*1.0)*bj_DEGTORAD)))
set SkillLocY=(GetUnitY(u)+(((900)*1.0)*Sin(((Mana)*1.0)*bj_DEGTORAD)))
endif
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,SkillLocX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,SkillLocY)
call TimerStart(t,0.00,false,function RyougiD)
call Shacull(p)
endif
if sk=='H081' or sk=='H086' then
if sk=='H081' then
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
endif
set Mana=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,Mana)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
if sk=='H081' then
call SaveInteger(udg_Hash,p,$6CEB48BD,1)
else
set tempI=LoadInteger(udg_Hash,p,$6CEB48BD)
call SaveInteger(udg_Hash,p,$6CEB48BD,tempI+1)
endif
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call TimerStart(t,0.00,false,function RyougiQ)
call Shacull(p)
set MultyGroup[p]=CreateGroup()
endif
if sk=='H082' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
set Mana=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,Mana)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,SkillLocX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,SkillLocY)
call TimerStart(t,0.00,false,function RyougiW)
call Shacull(p)
endif
if sk=='H083' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
set Mana=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,Mana)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call TimerStart(t,0.00,false,function RyougiE)
endif
if sk=='H087' then
set tar=LoadUnitHandle(udg_Hash,p,$A04E1E)
set Mana=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,Mana)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call Shacull(p)
call TimerStart(t,0.00,false,function RyougiEE)
endif
if sk=='H084' then
set Mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
set Mana=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,Mana)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1200 then
set SkillLocX=(GetUnitX(u)+(((1200)*1.0)*Cos(((Mana)*1.0)*bj_DEGTORAD)))
set SkillLocY=(GetUnitY(u)+(((1200)*1.0)*Sin(((Mana)*1.0)*bj_DEGTORAD)))
endif
call SaveReal(udg_Hash,GetHandleId(t),$47527379,s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY))
call Shacull(p)
call TimerStart(t,0.00,false,function RyougiR)
endif
if sk=='H085' then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call Shacull(p)
call TimerStart(t,0.00,false,function RyougiTTimer)
endif
set u=null
set t=null
set tar=null
endfunction
function RyougiST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
set ChSkillD[p]='H080'
set ChSkillQ[p]='H081'
set ChSkillQQ[p]='H086'
set ChSkillW[p]='H082'
set ChSkillE[p]='H083'
set ChSkillEE[p]='H087'
set ChSkillR[p]='H084'
set ChSkillT[p]='H085'
set Range[p]=250
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
call SetPlayerAbilityAvailable(Player(p-1),'H086',false)
call UnitAddAbility(u,'H086')
call SetPlayerAbilityAvailable(Player(p-1),'H087',false)
call UnitAddAbility(u,'H087')
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_RyougiQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_RyougiW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_RyougiE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_RyougiR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_RyougiT.blp",0)
endif
set STRup[p]=9
set AGIup[p]=9
set INTup[p]=3
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,90)
call SaveReal(udg_Hashtable,p,$43C91172,0.25)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.8)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$9B58470C,100)
call SaveReal(udg_Hashtable,p,$88E0F85F,100)
call SaveReal(udg_Hashtable,p,$E755DDB8,150)
call SaveReal(udg_Hashtable,p,$ABD3E955,100)
call SaveReal(udg_Hashtable,p,$A2229E00,150)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,80)
call SaveReal(udg_Hashtable,p,$C3EA9E83,600)
call SaveReal(udg_Hashtable,p,$A8D71652,300)
call SaveReal(udg_Hashtable,p,$127510D2,1500)
call SaveReal(udg_Hashtable,p,$B491D29B,500)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$869CD2F9,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_RyougiF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc근원 파악")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"모든 피해가 현재 체력에 비례한 피해가 추가됩니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00현재 체력 60% 초과인 적|cffffa500 : 12%\n|cff00ff00현재 체력 60% 이하인 적|cffffa500 : 8%\n|cff00ff00현재 체력 30% 이하인 적|cffffa500 : 4%")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function RyougiSkill)
call SaveInteger(udg_Hashtable,p,$5EFF7683,8)
call RyougiTT(p)
set u=null
set trg=null
endfunction
function SeaWitchReviatan takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer g=s__party_create()
local unit gunit
local real dmg
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_AZ_Leviathan_V2.mdl",tempX,tempY))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,100,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)and IsUnitType(gunit,UNIT_TYPE_HERO)then
if not IsUnitInGroup(gunit,udg_Mujuk)then
call Stun(u,gunit,0.15)
endif
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*6)+(GetUnitState(gunit,UNIT_STATE_MAX_LIFE)*0.2)
call Damage(u,gunit,dmg,1,0,false,1,0)
call KnockBackEn(gunit,GetUnitX(gunit)+(((100)*1.0)*Cos(((GetUnitFacing(gunit)+180)*1.0)*bj_DEGTORAD)),GetUnitY(gunit)+(((100)*1.0)*Sin(((GetUnitFacing(gunit)+180)*1.0)*bj_DEGTORAD)),0.2,0.04)
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
set gunit=null
call s__party_deallocate((g))
endfunction
function SeaWitchArrow1 takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local unit gunit
local real tempX=0
local real tempY=0
local real dmg=0
local integer g=s__party_create()
call TimerStart(t,0.02,false,function SeaWitchArrow1)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==1 then
if LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==0 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\Arrow\\ArrowAttack1.wav"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,1)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==1 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\Arrow\\ArrowAttack1.wav"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==2 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\Arrow\\ArrowAttack1.wav"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,3)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)>=3 then
call Assets_UseSoundByPath__MakeSound(("Abilities\\Weapons\\Arrow\\ArrowAttack1.wav"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
endif
if stage<=30 then
set tempX=GetUnitX(dummy)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),100,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroup(gunit)and IsUnitType(gunit,UNIT_TYPE_HERO)then
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*6)+(GetUnitState(gunit,UNIT_STATE_MAX_LIFE)*0.2)
call Damage(u,gunit,dmg,1,0,false,1,0)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_baojiang.mdl",GetUnitX(gunit)+(((100)*1.0)*Cos(((s__Angle_PBP(GetUnitX(gunit),GetUnitY(gunit),GetUnitX(dummy),GetUnitY(dummy)))*1.0)*bj_DEGTORAD)),GetUnitY(gunit)+(((100)*1.0)*Sin(((s__Angle_PBP(GetUnitX(gunit),GetUnitY(gunit),GetUnitX(dummy),GetUnitY(dummy)))*1.0)*bj_DEGTORAD))))
call RemoveUnit(dummy)
endif
endloop
elseif stage>=31 then
call RemoveUnit(dummy)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set dummy=null
set u=null
set gunit=null
call s__party_deallocate((g))
endfunction
function SeaWitchMove takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real angle2=angle+GetRandomReal(-15,15)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local real Moving=LoadReal(udg_Hash,GetHandleId(t),$217D9D93)
local real Slow=0.9
local unit dummy
local unit c
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage<=7 then
set Moving=Moving
else
set Moving=Moving*Slow
endif
call SaveReal(udg_Hash,GetHandleId(t),$217D9D93,Moving)
if stage<=28 then
call SetUnitX(u,GetUnitX(u)+(((Moving)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(u)+(((Moving)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
if ModuloInteger(stage,2)==0 then
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(u)+(((-60)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((-60)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),angle2)
call imagedummy(12,dummy,0.5,3.0,"attack","units\\naga\\HeroNagaSeawitch\\HeroNagaSeawitch.mdl")
call invisible(dummy,40.00,100.00,0.24,0.01)
set c=CreateUnit(Player(11),'sys9',GetUnitX(u)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),angle2)
call DzSetUnitModel(c,"war3mapImported\\@EF_AZ_PotM(1)_R2.mdl")
call SetUnitScale(c,3.0,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$535B7E08,c)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_WindAttack.mdl",GetUnitX(c)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(c)+(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
call EXSetEffectSize(bj_lastCreatedEffect,0.5)
call EXEffectMatRotateZ(bj_lastCreatedEffect,angle2)
call EDestroy(bj_lastCreatedEffect,0.01)
call SaveReal(udg_Hash,GetHandleId(t2),$9966AD24,angle2)
call TimerStart(t2,0,false,function SeaWitchArrow1)
endif
call TimerStart(t,0.02,false,function SeaWitchMove)
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set t2=null
set c=null
set dummy=null
endfunction
function SeaWitchParasite takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local unit l__target=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local unit gunit
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer g=s__party_create()
local integer tempI=0
local real dmg
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,0.04,false,function SeaWitchParasite)
if stage<=150 then
if stage==1 then
call UnitAddAbility(l__target,'A029')
endif
if stage>=2 then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(l__target),GetUnitY(l__target),500,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)and IsUnitType(gunit,UNIT_TYPE_HERO)and GetUnitAbilityLevel(gunit,'A029')==0 then
set t2=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$FC4D8276,gunit)
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
call TimerStart(t2,0,false,function SeaWitchParasite)
set t2=null
endif
endloop
if ModuloInteger(stage,12)==0 then
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*0.01)+(GetUnitState(l__target,UNIT_STATE_MAX_LIFE)*0.001)
call Damage(u,l__target,dmg,1,0,false,1,0)
endif
endif
else
call UnitRemoveAbility(l__target,'A029')
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set t2=null
set u=null
set gunit=null
set l__target=null
call s__party_deallocate((g))
endfunction
function SeaWitchDeathArrow takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local unit gunit
local unit dummy
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local real angle=0
local real dmg
local integer tempI=0
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,0.04,false,function SeaWitchDeathArrow)
if stage<=125 then
if stage==1 then
loop
exitwhen tempI==8
set tempI=tempI+1
set angle=tempI*45
set dummy=CreateUnit(Player(11),'sys7',tempX,tempY,angle)
call DzSetUnitModel(dummy,"Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl")
call SetUnitScale(dummy,3,1,1)
call SetUnitFlyHeight(dummy,50,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08+tempI,dummy)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24+tempI,angle)
endloop
endif
set tempI=0
loop
exitwhen tempI==8
set tempI=tempI+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08+tempI)
if dummy !=null then
set angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24+tempI)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
call SetUnitX(dummy,tempX+(((20)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(dummy,tempY+(((20)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),120,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)and IsUnitType(gunit,UNIT_TYPE_HERO)then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",gunit,"origin"))
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*3)+(GetUnitState(gunit,UNIT_STATE_MAX_LIFE)*0.1)
call Damage(u,gunit,dmg,1,0,false,1,0)
call RemoveUnit(dummy)
endif
endloop
endif
endloop
endif
if stage==126 then
set tempI=0
loop
exitwhen tempI==8
set tempI=tempI+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08+tempI)
if dummy !=null then
call RemoveUnit(dummy)
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set gunit=null
set dummy=null
call s__party_deallocate((g))
endfunction
function SeaWitchApo takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit gunit
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempX2=LoadReal(udg_Hash,GetHandleId(t),$849745EE)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local real tempY2=LoadReal(udg_Hash,GetHandleId(t),$8BB2B122)
local boolean bool=LoadBoolean(udg_Hash,GetHandleId(t),$674EBE54)
local real arrivetime=LoadReal(udg_Hash,GetHandleId(t),$76C18425)
local real dmg
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer g=s__party_create()
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$F8F856EA)
call TimerStart(t,0.01,false,function SeaWitchApo)
if bool==false then
call SaveBoolean(udg_Hash,GetHandleId(t),$674EBE54,true)
set arrivetime=1.5
call SaveReal(udg_Hash,GetHandleId(t),$76C18425,arrivetime)
call jump(dummy,arrivetime,1000,0.01)
set ef=AddSpecialEffect("war3mapImported\\@AOE_[I0]Attack1.mdl",tempX,tempY)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$F8F856EA,ef)
call EXSetEffectSize(ef,0.6)
endif
call SetUnitX(dummy,GetUnitX(dummy)+(((s__Distance_PBP(tempX2,tempY2,tempX,tempY)/(arrivetime/0.01))*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(dummy,GetUnitY(dummy)+(((s__Distance_PBP(tempX2,tempY2,tempX,tempY)/(arrivetime/0.01))*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
if s__Distance_PBP(GetUnitX(dummy),GetUnitY(dummy),tempX,tempY)<=50 then
set gunit=CreateUnit(Player(11),'sys7',tempX,tempY,270)
call DzSetUnitModel(gunit,"war3mapImported\\@EF_skill_shuilao.mdl")
call SetUnitScale(gunit,4,1,1)
call KillUnit(gunit)
call DestroyEffect(ef)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_Vinz Nova Ice.mdl",tempX,tempY)
call EXSetEffectSpeed(bj_lastCreatedEffect,1.5)
call DestroyEffect(bj_lastCreatedEffect)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,300,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)and IsUnitType(gunit,UNIT_TYPE_HERO)then
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*8)+(GetUnitState(gunit,UNIT_STATE_MAX_LIFE)*0.3)
call Damage(u,gunit,dmg,1,0,false,1,0)
endif
endloop
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
call SaveReal(udg_Hash,GetHandleId(t2),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t2),$8BEF6842,tempY)
call TimerStart(t2,0,false,function SeaWitchDeathArrow)
call RemoveUnit(dummy)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set t2=null
set u=null
set dummy=null
call s__party_deallocate((g))
set ef=null
set gunit=null
endfunction
function SeaWitchDotDeal takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local unit gunit
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local integer count=LoadInteger(udg_Hash,GetHandleId(t),$B7279243)
local real tempX
local real tempY
local real dmg
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$B7279243,count+1)
if UnitAlive(dummy)then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),2000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)and IsUnitType(gunit,UNIT_TYPE_HERO)then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl",gunit,"origin"))
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*0.5)+(GetUnitState(gunit,UNIT_STATE_MAX_LIFE)*0.015)
call Damage(u,gunit,dmg,1,0,false,1,0)
endif
endloop
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call TimerStart(t,1.0,false,function SeaWitchDotDeal)
set t=null
set u=null
set gunit=null
set dummy=null
call s__party_deallocate((g))
endfunction
function SeaWitchWeb takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local unit c
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local real tempX2
local real tempY2
local real tempZ=LoadReal(udg_Hash,GetHandleId(t),$E11E77C7)
local lightning light=LoadLightningHandle(udg_Hash,GetHandleId(t),$6D95CA7A)
local real angle=s__Angle_PBP(GetUnitX(tar),GetUnitY(tar),tempX,tempY)
local real dmg
local integer tempI
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$F8F856EA)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,0.04,false,function SeaWitchWeb)
if stage>=327 or UnitAlive(tar)then
if stage<=300 then
if stage==1 then
set light=AddLightningEx("DRAM",true,tempX,tempY,tempZ,GetUnitX(tar),GetUnitY(tar),GetUnitFlyHeight(tar))
call SaveLightningHandle(udg_Hash,GetHandleId(t),$6D95CA7A,light)
set ef=AddSpecialEffect("war3mapImported\\@AOE_[I0]Attack1.mdl",tempX,tempY)
call EXSetEffectSize(ef,1.5)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$F8F856EA,ef)
set c=CreateUnit(Player(11),'sys9',tempX,tempY,0)
call DzSetUnitModel(c,"war3mapImported\\@EF_AZ_Leviathan_G2.mdl")
call SetUnitScale(c,3.5,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,c)
endif
call MoveLightningEx(light,true,tempX,tempY,tempZ,GetUnitX(tar),GetUnitY(tar),GetUnitFlyHeight(tar))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl",GetUnitX(tar),GetUnitY(tar)))
if s__Distance_PBP(GetUnitX(tar),GetUnitY(tar),tempX,tempY)<800 then
call SetUnitX(tar,GetUnitX(tar)+(((8)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(tar,GetUnitY(tar)+(((8)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
else
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",tar,"origin"))
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*4)+(GetUnitState(tar,UNIT_STATE_MAX_LIFE)*0.12)
call Damage(u,tar,dmg,1,0,false,1,0)
call SetUnitX(tar,tempX+(((-750)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(tar,tempY+(((-750)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
endif
if ModuloInteger(stage,5)==0 then
set t2=CreateTimer()
set tempX2=GetUnitX(tar)
call SaveReal(udg_Hash,GetHandleId(t2),$DA25243A,tempX2)
set tempY2=GetUnitY(tar)
call SaveReal(udg_Hash,GetHandleId(t2),$8BEF6842,tempY2)
call AOE(tempX2,tempY2,1.0,1.0,1.0)
call TimerStart(t2,1.0,false,function SeaWitchReviatan)
set t2=null
endif
endif
if stage==301 then
call AOE(tempX,tempY,8.0,1.0,1.0)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_GameBABY_mdx_lingzifengbao_001 Blue.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,7.0)
call DestroyEffect(bj_lastCreatedEffect)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_GameBABY_mdx_lingzifengbao_001 Blue.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,7.0)
call DestroyEffect(bj_lastCreatedEffect)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_GameBABY_mdx_lingzifengbao_001 Blue.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,7.0)
call DestroyEffect(bj_lastCreatedEffect)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@BS_Naga1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,tar)
call DestroyLightning(light)
call DestroyEffect(ef)
endif
if stage==326 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@BS_Naga2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,tar)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_Vinz Nova Ice.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,2.5)
call EXSetEffectSpeed(bj_lastCreatedEffect,1.5)
call DestroyEffect(bj_lastCreatedEffect)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_AZ_Coco(2)_E2_Blast.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,8.0)
call EXSetEffectSpeed(bj_lastCreatedEffect,1.5)
call DestroyEffect(bj_lastCreatedEffect)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,800,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckFBossGroupN(c)and IsUnitType(c,UNIT_TYPE_HERO)then
if not IsUnitInGroup(c,udg_Mujuk)then
call Stun(u,c,4)
endif
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*6)+(GetUnitState(c,UNIT_STATE_MAX_LIFE)*0.8)
call Damage(u,c,dmg,1,0,false,1,0)
endif
endloop
call SetUnitVertexColor(LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08),255,255,255,0)
call RemoveUnit(LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08))
endif
else
call SetUnitVertexColor(LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08),255,255,255,0)
call RemoveUnit(LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08))
call DestroyLightning(light)
call DestroyEffect(ef)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set t2=null
set u=null
set tar=null
set c=null
set light=null
set ef=null
call s__party_deallocate((g))
endfunction
function SeaWitchThrow takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local unit c
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local unit gunit
local real tempX=0
local real tempY=0
local real dmg=0
local integer g=s__party_create()
call TimerStart(t,0.03,false,function SeaWitchThrow)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage<=40 then
set tempX=GetUnitX(dummy)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",GetUnitX(dummy),GetUnitY(dummy)))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),250,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroup(gunit)and IsUnitType(gunit,UNIT_TYPE_HERO)and gunit !=dummy and tar==null then
set stage=99
set tar=gunit
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
endif
endloop
elseif stage>=41 then
set c=CreateUnit(Player(11),'sys9',GetUnitX(dummy),GetUnitY(dummy),angle)
call DzSetUnitModel(c,"war3mapImported\\@EF_AZ_Leviathan_G1.mdl")
call SetUnitScale(c,5,1,1)
call SetUnitFlyHeight(c,100,0)
call KillUnit(c)
set c=CreateUnit(Player(11),'sys9',GetUnitX(dummy),GetUnitY(dummy),angle)
call DzSetUnitModel(c,"war3mapImported\\@EF_AZ_Leviathan_G1.mdl")
call SetUnitScale(c,5,1,1)
call SetUnitFlyHeight(c,100,0)
call KillUnit(c)
call RemoveUnit(dummy)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
if stage==99 then
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,41)
set t2=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
call SaveReal(udg_Hash,GetHandleId(t2),$DA25243A,GetUnitX(tar))
call SaveReal(udg_Hash,GetHandleId(t2),$8BEF6842,GetUnitY(tar))
call SaveReal(udg_Hash,GetHandleId(t2),$E11E77C7,GetUnitFlyHeight(tar))
call TimerStart(t2,0,false,function SeaWitchWeb)
if not IsUnitInGroup(tar,udg_Mujuk)then
call Stun(u,tar,4.0)
endif
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*6)+(GetUnitState(tar,UNIT_STATE_MAX_LIFE)*0.8)
call Damage(u,tar,dmg,1,0,false,1,0)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",tar,"origin"))
set c=CreateUnit(Player(11),'sys9',GetUnitX(dummy),GetUnitY(dummy),angle)
call DzSetUnitModel(c,"war3mapImported\\@EF_AZ_Leviathan_G1.mdl")
call SetUnitScale(c,5,1,1)
call SetUnitFlyHeight(c,100,0)
call KillUnit(c)
set c=CreateUnit(Player(11),'sys9',GetUnitX(dummy),GetUnitY(dummy),angle)
call DzSetUnitModel(c,"war3mapImported\\@EF_AZ_Leviathan_G1.mdl")
call SetUnitScale(c,5,1,1)
call SetUnitFlyHeight(c,100,0)
call KillUnit(c)
endif
set t=null
set t2=null
set dummy=null
set tar=null
set u=null
set c=null
set gunit=null
call s__party_deallocate((g))
endfunction
function SeaWitchPatton takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2=null
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local integer stage=LoadInteger(udg_Hash,$944CCEB0,2)
local integer PatonNum=LoadInteger(udg_Hash,$944CCEB0,3)
local integer Fulltime=LoadInteger(udg_Hash,$944CCEB0,4)
local integer unableEF=LoadInteger(udg_Hash,$944CCEB0,5)
local integer temp=0
local integer temp2=0
local integer tempI=0
local integer tempI2=0
local integer tempI3=0
local real dmg=0
local real tempR=0
local real tempR2=0
local real tempX=0
local real tempY=0
local real tempX2=0
local real tempY2=0
local unit dummy=null
local unit gunit=null
local unit c=null
local unit l__temp_unit2=null
local unit l__temp_unit3=null
local effect ef=null
local effect ef2=null
local integer g=s__party_create()
call TimerStart(t,0.04,false,function SeaWitchPatton)
if Bossunable or Bossstun then
if Bossstun and LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call SaveInteger(udg_Hash,$944CCEB0,2,stage+1)
call SaveInteger(udg_Hash,$944CCEB0,4,Fulltime+1)
endif
else
call SaveInteger(udg_Hash,$944CCEB0,2,stage+1)
call SaveInteger(udg_Hash,$944CCEB0,4,Fulltime+1)
endif
if Bossunable and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)!=0 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call PauseUnit(u,false)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
endif
if Bossunable and BossunableTime>0 then
call SaveInteger(udg_Hash,$944CCEB0,5,unableEF+1)
set BossunableTime=BossunableTime-0.1
if unableEF==0 then
set temp=0
loop
exitwhen temp==5
call FilterBasic(Player(temp),3.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",0.00,0.00,0.00,20.00,0.00,0.00,0.00,100.00)
set temp=temp+1
endloop
call SetUnitAnimation(u,"death")
set tempX=GetUnitX(u)+(((-150)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-150)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.7,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",u,"origin"))
endif
if unableEF==7 then
call SetUnitTimeScale(u,0)
endif
elseif Bossunable and BossunableTime<=0 then
set Bossunable=false
set BossunableTime=1
call SaveInteger(udg_Hash,$944CCEB0,5,0)
call SetUnitTimeScale(u,1)
endif
if UnitAlive(u)then
if LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call UnitAddAbility(u,'A01A')
call UnitAddAbility(u,'SY10')
elseif not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
if not LoadBoolean(udg_Hash,$F61C5FD6,1)then
call UnitRemoveAbility(u,'A01A')
call UnitRemoveAbility(u,'SY10')
endif
endif
if not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
if not UnitAlive(target)or(target !=null and not IsUnitInRange(u,target,1800))or IsUnitInGroup(target,udg_Mujuk)or(BossAgro !=null and BossAgro !=target)then
set target=null
endif
if target==null then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),2000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)then
if BossAgro==null or IsUnitInGroup(BossAgro,udg_Mujuk)then
set l__temp_unit2=gunit
elseif BossAgro !=null and l__temp_unit2 !=BossAgro then
set l__temp_unit2=gunit
endif
endif
endloop
set target=l__temp_unit2
else
set l__temp_unit2=target
endif
if l__temp_unit2 !=null then
call IssueTargetOrder(u,"attack",l__temp_unit2)
elseif l__temp_unit2==null then
if IsUnitInRange(u,gg_unit_h000_0013,500)then
call IssueTargetOrder(u,"attack",gg_unit_h000_0013)
else
set tempX=GetRectCenterX(gg_rct_AttackZone)
set tempY=GetRectCenterY(gg_rct_AttackZone)
call IssuePointOrder(u,"attack",tempX,tempY)
endif
endif
endif
if stage>=120 and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
if LoadInteger(udg_Hash,$944CCEB0,3)==5 then
set temp=5
call SaveInteger(udg_Hash,$944CCEB0,3,0)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,2)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
else
set temp=GetRandomInt(1,4)
if temp==1 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,1)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
endif
if temp==2 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,2)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
endif
if temp==3 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,3)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
endif
if temp==4 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,4)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
endif
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==1 then
if stage==120 then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),3000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
if BossAgro==dummy then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
else
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI,dummy)
endif
endif
endloop
if LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)==null and tempI !=0 then
set tempI2=0
loop
exitwhen dummy !=null
set tempI2=tempI2+1
if tempI2>tempI then
set tempI2=0
endif
if GetRandomInt(1,tempI)==1 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
endif
endloop
set tempI2=0
loop
exitwhen tempI2>tempI
set tempI2=tempI2+1
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2,dummy)
call RemoveUnit(dummy)
endloop
endif
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
if dummy==null or not UnitAlive(dummy)then
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
endif
endif
if stage==121 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
call PauseUnit(u,true)
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,2.0)
call DestroyEffect(bj_lastCreatedEffect)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff04A3CC속사|r",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.5)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,10,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.0)
call EXSetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy)))
call SetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy)))
call SetUnitAnimationByIndex(u,3)
call EDestroy(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",u,"left hand"),1.00)
set tempI=0
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),3000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
set tempI=tempI+1
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
set ef=AddSpecialEffect("war3mapImported\\@AOE_Strate200+1500.mdl",GetUnitX(u),GetUnitY(u))
call SaveEffectHandle(udg_Hash,$60F70FCF,tempI,ef)
call EXEffectMatRotateZ(ef,tempR)
set ef=AddSpecialEffect("war3mapImported\\@AOE_Strate200+1500.mdl",GetUnitX(u)+(((1500)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((1500)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
call SaveEffectHandle(udg_Hash,$AE463CD2,tempI,ef)
call EXEffectMatRotateZ(ef,tempR)
call SaveReal(udg_Hash,$89FC6CB9,tempI,tempR)
endif
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$D6DAC412,tempI)
endif
if stage==136 or stage==144 or stage==152 then
call SetUnitAnimationByIndex(u,3)
set temp=0
set tempI=LoadInteger(udg_Hash,GetHandleId(t),$D6DAC412)
loop
exitwhen temp==tempI
set temp=temp+1
set t2=CreateTimer()
call DestroyEffect(LoadEffectHandle(udg_Hash,$60F70FCF,temp))
call DestroyEffect(LoadEffectHandle(udg_Hash,$AE463CD2,temp))
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
set tempR=LoadReal(udg_Hash,$89FC6CB9,temp)
call SaveReal(udg_Hash,GetHandleId(t2),$9966AD24,tempR)
set c=CreateUnit(Player(11),'sys9',GetUnitX(u)+(((100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((100)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),tempR)
call DzSetUnitModel(c,"war3mapImported\\@EF_AZ_PotM(1)_R2.mdl")
call SetUnitScale(c,3.0,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$535B7E08,c)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_WindAttack.mdl",GetUnitX(c)+(((100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(c)+(((100)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
call EXSetEffectSize(bj_lastCreatedEffect,0.5)
call EXEffectMatRotateZ(bj_lastCreatedEffect,tempR)
call EDestroy(bj_lastCreatedEffect,0.01)
call TimerStart(t2,0,false,function SeaWitchArrow1)
set t2=null
endloop
endif
if stage==170 then
call PauseUnit(u,false)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
call RemoveUnit(dummy)
call SaveInteger(udg_Hash,$944CCEB0,3,LoadInteger(udg_Hash,$944CCEB0,3)+1)
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==2 then
if stage==140 then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),3000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and UnitAlive(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)and LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)==null then
if BossAgro==dummy then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
else
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI,dummy)
endif
endif
endloop
if LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)==null and tempI !=0 then
set tempI2=0
loop
exitwhen dummy !=null
set tempI2=tempI2+1
if tempI2>tempI then
set tempI2=0
endif
if GetRandomInt(1,tempI)==1 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
endif
endloop
endif
set tempI2=0
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
loop
exitwhen tempI2>tempI
set tempI2=tempI2+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2,dummy)
endloop
call RemoveUnit(dummy)
set tempI=0
set tempI2=0
set tempI3=0
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),3000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and UnitAlive(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)and LoadUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6)==null and LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)!=dummy then
if BossAgro==dummy then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6,dummy)
else
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI,dummy)
endif
endif
endloop
if LoadUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6)==null and tempI !=0 then
set tempI2=0
loop
exitwhen dummy !=null
set tempI2=tempI2+1
if tempI2>tempI then
set tempI2=0
endif
if GetRandomInt(1,tempI)==1 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6,dummy)
endif
endloop
endif
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
set l__temp_unit3=LoadUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6)
set tempI2=0
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
loop
exitwhen tempI2>tempI
set tempI2=tempI2+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2,dummy)
endloop
call RemoveUnit(dummy)
if l__temp_unit2==null and l__temp_unit3==null then
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
elseif not UnitAlive(l__temp_unit2)and not UnitAlive(l__temp_unit3)then
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6,dummy)
call RemoveUnit(dummy)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
endif
endif
if stage==141 then
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
set l__temp_unit3=LoadUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6)
call PauseUnit(u,true)
call SetUnitAnimationByIndex(u,5)
call SetUnitTimeScale(u,0.5)
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,2.0)
call DestroyEffect(bj_lastCreatedEffect)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff000080구속하는 닻|r",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.5)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,10,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.0)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2))
if l__temp_unit3 !=null then
set tempR2=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(l__temp_unit3),GetUnitY(l__temp_unit3))
endif
set tempI=0
loop
exitwhen tempI==7
set tempI=tempI+1
set gunit=CreateUnit(Player(11),'sys9',GetUnitX(u)+(((600*tempI)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((600*tempI)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)),tempR)
call DzSetUnitModel(gunit,"war3mapImported\\@AOE_biaoji_jiantou.mdl")
call SetUnitScale(gunit,10,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$588728A4+tempI,gunit)
if l__temp_unit3 !=null then
set gunit=CreateUnit(Player(11),'sys9',GetUnitX(u)+(((600*tempI)*1.0)*Cos(((tempR2)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((600*tempI)*1.0)*Sin(((tempR2)*1.0)*bj_DEGTORAD)),tempR2)
call DzSetUnitModel(gunit,"war3mapImported\\@AOE_biaoji_jiantou.mdl")
call SetUnitScale(gunit,10,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$E240D6CE+tempI,gunit)
endif
endloop
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_SuperShinyThingy.mdl",u,"left hand"))
endif
if stage>=141 and stage<=191 then
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
set l__temp_unit3=LoadUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2))
set tempR2=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(l__temp_unit3),GetUnitY(l__temp_unit3))
call EXSetUnitFacing(u,tempR)
call SetUnitFacing(u,tempR)
if stage==191 then
call SaveReal(udg_Hash,GetHandleId(t),$DCD57FAE,tempR)
call SaveReal(udg_Hash,GetHandleId(t),$67D95454,tempR2)
endif
set tempI=0
loop
exitwhen tempI==7
set tempI=tempI+1
if stage==191 then
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$588728A4+tempI)
call SetUnitVertexColor(gunit,255,255,255,0)
call RemoveUnit(gunit)
if l__temp_unit3 !=null then
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$E240D6CE+tempI)
call SetUnitVertexColor(gunit,255,255,255,0)
call RemoveUnit(gunit)
endif
else
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$588728A4+tempI)
call SetUnitX(gunit,GetUnitX(u)+(((600*tempI)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
call SetUnitY(gunit,GetUnitY(u)+(((600*tempI)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
call EXSetUnitFacing(gunit,tempR)
call SetUnitFacing(gunit,tempR)
if l__temp_unit3 !=null then
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$E240D6CE+tempI)
call SetUnitX(gunit,GetUnitX(u)+(((600*tempI)*1.0)*Cos(((tempR2)*1.0)*bj_DEGTORAD)))
call SetUnitY(gunit,GetUnitY(u)+(((600*tempI)*1.0)*Sin(((tempR2)*1.0)*bj_DEGTORAD)))
call EXSetUnitFacing(gunit,tempR2)
call SetUnitFacing(gunit,tempR2)
endif
endif
endloop
endif
if stage==201 then
call SetUnitTimeScale(u,1.0)
call KnockBackXYef(u,GetUnitX(u)+(((250)*1.0)*Cos(((GetUnitFacing(u)+180)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((250)*1.0)*Sin(((GetUnitFacing(u)+180)*1.0)*bj_DEGTORAD)),0.2,0.01)
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
set l__temp_unit3=LoadUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$DCD57FAE)
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$67D95454)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_ShootGB1.mdl",GetUnitX(u)+(((100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((100)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
call EXSetEffectSize(bj_lastCreatedEffect,2.0)
call EXEffectMatRotateZ(bj_lastCreatedEffect,tempR)
call DestroyEffect(bj_lastCreatedEffect)
if l__temp_unit3 !=null then
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_ShootGB1.mdl",GetUnitX(u)+(((100)*1.0)*Cos(((tempR2)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((100)*1.0)*Sin(((tempR2)*1.0)*bj_DEGTORAD)))
call EXSetEffectSize(bj_lastCreatedEffect,2.0)
call EXEffectMatRotateZ(bj_lastCreatedEffect,tempR2)
call DestroyEffect(bj_lastCreatedEffect)
endif
set c=CreateUnit(Player(11),'sys9',GetUnitX(u),GetUnitY(u),tempR)
call DzSetUnitModel(c,"war3mapImported\\@EF_AZ_Leviathan_G1.mdl")
call SetUnitScale(c,2.5,1,1)
call SetUnitFlyHeight(c,100,0)
set t2=CreateTimer()
call SaveReal(udg_Hash,GetHandleId(t2),$9966AD24,tempR)
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$535B7E08,c)
call TimerStart(t2,0,false,function SeaWitchThrow)
set t2=null
if l__temp_unit3 !=null then
set c=CreateUnit(Player(11),'sys9',GetUnitX(u),GetUnitY(u),tempR2)
call DzSetUnitModel(c,"war3mapImported\\@EF_AZ_Leviathan_G1.mdl")
call SetUnitScale(c,2.5,1,1)
call SetUnitFlyHeight(c,100,0)
set t2=CreateTimer()
call SaveReal(udg_Hash,GetHandleId(t2),$9966AD24,tempR2)
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$535B7E08,c)
call TimerStart(t2,0,false,function SeaWitchThrow)
set t2=null
endif
endif
if stage==226 then
call PauseUnit(u,false)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
call SaveInteger(udg_Hash,$944CCEB0,3,LoadInteger(udg_Hash,$944CCEB0,3)+1)
set c=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,c)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B2D68BB6,c)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,c)
call RemoveUnit(c)
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==3 then
if stage==120 then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),2000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
if BossAgro==dummy then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
else
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI,dummy)
endif
endif
endloop
if LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)==null and tempI !=0 then
set tempI2=0
loop
exitwhen dummy !=null
set tempI2=tempI2+1
if tempI2>tempI then
set tempI2=0
endif
if GetRandomInt(1,tempI)==1 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
endif
endloop
set tempI2=0
loop
exitwhen tempI2>tempI
set tempI2=tempI2+1
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2,dummy)
call RemoveUnit(dummy)
endloop
endif
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
if dummy==null or not UnitAlive(dummy)then
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
endif
endif
if stage==121 then
call PauseUnit(u,true)
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,3.0)
call DestroyEffect(bj_lastCreatedEffect)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cffff3399아포칼립스|r",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.5)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,10,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.0)
endif
if stage==121 or stage==146 or stage==171 then
call SetUnitAnimationByIndex(u,5)
set tempI=0
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),3000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI,dummy)
endif
endloop
set tempI2=0
loop
exitwhen tempI2==tempI
set t2=CreateTimer()
set tempI2=tempI2+1
set tempX=GetUnitX(LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2))
set tempY=GetUnitY(LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2))
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
set c=CreateUnit(Player(12),'sys7',GetUnitX(u),GetUnitY(u),tempR)
call DzSetUnitModel(c,"war3mapImported\\@EF_skill_shuilao.mdl")
call SetUnitScale(c,4,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$535B7E08,c)
call SaveReal(udg_Hash,GetHandleId(t2),$DA25243A,tempX)
call SaveReal(udg_Hash,GetHandleId(t2),$8BEF6842,tempY)
call SaveReal(udg_Hash,GetHandleId(t2),$849745EE,GetUnitX(u))
call SaveReal(udg_Hash,GetHandleId(t2),$8BB2B122,GetUnitY(u))
call SaveReal(udg_Hash,GetHandleId(t2),$9966AD24,tempR)
call TimerStart(t2,0,false,function SeaWitchApo)
set t2=null
endloop
set tempI2=0
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
loop
exitwhen tempI2>tempI
set tempI2=tempI2+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2,dummy)
endloop
call RemoveUnit(dummy)
endif
if stage==196 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call PauseUnit(u,false)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
call SaveInteger(udg_Hash,$944CCEB0,3,LoadInteger(udg_Hash,$944CCEB0,3)+1)
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==4 then
if stage==120 then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),2000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI,dummy)
endif
endloop
if tempI !=0 then
set tempI2=0
loop
exitwhen dummy !=null
set tempI2=tempI2+1
if tempI2>tempI then
set tempI2=0
endif
if GetRandomInt(1,tempI)==1 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
endif
endloop
set tempI2=0
loop
exitwhen tempI2>tempI
set tempI2=tempI2+1
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2,dummy)
call RemoveUnit(dummy)
endloop
endif
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
if dummy==null or not UnitAlive(dummy)then
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
endif
endif
if stage==121 then
call PauseUnit(u,true)
call SetUnitAnimationByIndex(u,5)
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Other\\HowlOfTerror\\HowlCaster.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,2.0)
call DestroyEffect(bj_lastCreatedEffect)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff8d192b기동 연사|r",(20*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.5)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,10,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,1.0)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
set c=CreateUnit(Player(12),'sys7',GetUnitX(u),GetUnitY(u),tempR)
call DzSetUnitModel(c,"war3mapImported\\@AOE_biaoji_jiantou.mdl")
call SetUnitScale(c,10,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$76402A3,c)
call SetUnitX(c,GetUnitX(u)+(((400)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
call SetUnitY(c,GetUnitY(u)+(((400)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
endif
if stage==146 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
set t2=CreateTimer()
set tempR=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$76402A3)
call RemoveUnit(c)
call SaveReal(udg_Hash,GetHandleId(t2),$9966AD24,tempR)
call EXSetUnitFacing(u,tempR)
call SetUnitFacing(u,tempR)
call SaveReal(udg_Hash,GetHandleId(t2),$217D9D93,65)
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
call TimerStart(t2,0,false,function SeaWitchMove)
set t2=null
endif
if stage==158 then
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,dummy)
call RemoveUnit(dummy)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call PauseUnit(u,false)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty+(difficulty*5))*2)
call SaveInteger(udg_Hash,$944CCEB0,3,LoadInteger(udg_Hash,$944CCEB0,3)+1)
endif
endif
else
set tempI=0
loop
exitwhen tempI==5
set tempI=tempI+1
call DestroyEffect(LoadEffectHandle(udg_Hash,$60F70FCF,tempI))
call DestroyEffect(LoadEffectHandle(udg_Hash,$AE463CD2,tempI))
call RemoveUnit(LoadUnitHandle(udg_Hash,GetHandleId(t),$588728A4+tempI))
call RemoveUnit(LoadUnitHandle(udg_Hash,GetHandleId(t),$E240D6CE+tempI))
call RemoveUnit(LoadUnitHandle(udg_Hash,GetHandleId(t),$76402A3))
endloop
set BossBattleN=false
call FlushChildHashtable(udg_Hash,$944CCEB0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set temp=0
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call BossBar_End(Player(PP[temp]-1))
endloop
endif
call s__party_deallocate((g))
set t=null
set t2=null
set u=null
set dummy=null
set c=null
set l__temp_unit2=null
set l__temp_unit3=null
set ef=null
set ef2=null
endfunction
function SeaWitchSET takes nothing returns nothing
local timer t=CreateTimer()
call SaveInteger(udg_Hash,$944CCEB0,2,1)
call TimerStart(t,0.5,false,function SeaWitchPatton)
set Bossunable=false
set BossunableTime=1
set BossBattleN=true
call SetUnitState(Boss,UNIT_STATE_MAX_MANA,10)
set t=null
endfunction
function ShikiTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer Agi=GetHeroAgi(u,true)
local integer Qdmg=Agi*(3+(LoadInteger(udg_Hashtable,p,$FAFE5485)*6))
local integer Wdmg=Agi*(8+(LoadInteger(udg_Hashtable,p,$457BCFC0)*10))
local integer Edmg=Agi*(5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*5))
local integer Rdmg=Agi*(16+(LoadInteger(udg_Hashtable,p,$BB70E228)*20))
local integer Rdmg2=(LoadInteger(udg_Hashtable,p,$BB70E228)*10)
local integer Tdmg=Agi*(120+(LoadInteger(udg_Hashtable,p,$132FA1F5)*60))
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Qm*Kirie[p])
set Wdmg=Wdmg+R2I(Wm*Kirie[p])
set Edmg=Edmg+R2I(Rm*Kirie[p])
set Rdmg=Rdmg+R2I(Rm*Kirie[p])
set Tdmg=Tdmg+R2I(Tm*Kirie[p])
endif
call EXSetAbilityString(ChSkillD[p],1,ABILITY_DATA_UBERTIP,"토오노 시키가 내면의 퇴마 본능을 깨웁니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00스킬 피해량 증폭|cffffa500 : 15%\n|cff00ff00모든 받는 피해량 감소|cffffa500 : 10%\n|cff00ff00마나 코스트 감소|cffffa500 : 30%\n|cff00ff00특수|cffffa500 : 지속시간동안 섬초 - 일풍이 활성화된다.\n|cff00ff00지속시간|cffffa500 : 30초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(90*ct[p]))+"초")
call EXSetAbilityString(ChSkillQ[p],1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n대상에게 돌진후 대상과 그 주변을 벱니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 1100\n|cff00ff00범위|cffffa500 : "+I2S(R2I(300*Skrange[p]))+"\n|cff00ff00특수|cffffa500 : 돌진중 무적을 유지한다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(6*ct[p]))+"초")
call EXSetAbilityString(ChSkillW[p],1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n대상을 난도질해 공격한다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : 8회에 걸쳐 "+I2S(Wdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 350\n|cff00ff00스턴|cffffa500 : 2초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(7*ct[p]))+"초")
call EXSetAbilityString(ChSkillE[p],1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n사용 지점 방향으로 빠르게 이동하며 대상과 부딪칠경우 대상과 그 주변에 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00돌진 거리|cffffa500 : 750\n|cff00ff00충돌 범위|cffffa500 : 210\n|cff00ff00피해 범위|cffffa500 : "+I2S(R2I(450*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(6*ct[p]))+"초")
if LoadBoolean(udg_Hash,p,$A5EB2F5F)then
call EXSetAbilityString(ChSkillR[p],1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n사용 지점으로 무적으로 돌진후 지점을 베고 지나가며 17번의 공격을 합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : 17회에 걸쳐 "+I2S(R2I(I2R(Rdmg)*1.2))+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00패시브|cffffa500 : 섬초 - 팔천의 타겟 대상과 섬초 - 일인의 부딪친 대상에게 가하는 피해량이 "+I2S(R2I(Rdmg2*1.2))+" 상승합니다.\n|cff00ff00사거리|cffffa500 : 1300\n|cff00ff00범위|cffffa500 : "+I2S(R2I(550*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(35*ct[p]))+"초\n|cffFF0000EX|cffffa500 : 섬초 팔천과 섬초 일인의 피해상승량이 1.2배가 되고 17분할의 피해량이 20% 증가한다.")
else
call EXSetAbilityString(ChSkillR[p],1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n사용 지점으로 무적으로 돌진후 지점을 베고 지나가며 17번의 공격을 합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00패시브|cffffa500 : 섬초 - 팔천의 타겟 대상과 섬초 - 일인의 부딪친 대상에게 가하는 피해량이 "+I2S(Rdmg2)+"% 상승합니다.\n|cff00ff00사거리|cffffa500 : 1300\n|cff00ff00범위|cffffa500 : "+I2S(R2I(550*Skrange[p]))+"\n|cff00ff00슬로우|cffffa500 : 최초 시전 범위에 2초간 80%\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(35*ct[p]))+"초")
endif
call DzSyncData("SKRG",I2S('H064')+"/"+R2S(550*Skrange[p]))
call EXSetAbilityString(ChSkillT[p],1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n사용시 대상에게 무적 상태로 돌진후 대상에게 죽음의 점을 찌르는 일격을 가합니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 1300\n|cff00ff00스턴|cffffa500 : 2초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(60*ct[p]))+"초")
set u=null
endfunction
function ShikiEX takes integer p returns nothing
call SaveBoolean(udg_Hash,p,$A5EB2F5F,true)
call ShikiTT(p)
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Tohno_Ex_Bgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Tohno_Ex_Get.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call ProduTime(47,4)
endif
call SetPlayerName(Player(8),"|cff93DAFF토오노 시키 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cff4169e1내키진 않지만. 어쩔수없지.")
endfunction
function ShikiD takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),1)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),2)
local integer tempI
local unit u=Charcter[p]
if stage==0 then
call SetPlayerAbilityAvailable(Player(p-1),'H060',true)
call SetPlayerAbilityAvailable(Player(p-1),'H066',false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
elseif stage==1 then
if ProduceLV<5 then
set ProduceLV=5
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Tohno_Real_Ex_Bgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@SY_heartbeat.mp3"),("shiki"),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiEXD2.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
call ProduTime(88,5)
endif
call vibration2(Player(p-1),30,0.2)
call SaveInteger(udg_Hash,GetHandleId(t),2,2)
call TimerStart(t,1.5,false,function ShikiD)
elseif stage==2 then
call FilterBasic(Player(p-1),2.50,"war3mapImported\\@Sinematic_ShikI1.blp",100.00,100.00,100.00,0.00,100.00,0.00,0.00,100.00)
call SaveInteger(udg_Hash,GetHandleId(t),2,3)
call TimerStart(t,1.5,false,function ShikiD)
elseif stage==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@SY_heartbeat.mp3"),("shiki"),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
call vibration2(Player(p-1),30,0.2)
call FilterBasic(Player(p-1),2.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,0.00,100.00,0.00,0.00,100.00)
call SaveInteger(udg_Hash,GetHandleId(t),2,4)
call TimerStart(t,1.5,false,function ShikiD)
elseif stage==4 then
call FilterBasic(Player(p-1),2.50,"war3mapImported\\@Sinematic_ShikI2.blp",100.00,100.00,100.00,0.00,100.00,0.00,0.00,100.00)
call SaveInteger(udg_Hash,GetHandleId(t),2,5)
call TimerStart(t,1.5,false,function ShikiD)
if ProduceLV==5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiEXD1.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
endif
call SetPlayerName(Player(8),"|cff4169e1토오노 시키 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cff4169e1그 순간")
elseif stage==5 then
call FilterBasic(Player(p-1),2.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,0.00,100.00,0.00,0.00,100.00)
call SaveInteger(udg_Hash,GetHandleId(t),2,6)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@SY_heartbeat.mp3"),("shiki"),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
call vibration2(Player(p-1),30,0.2)
call TimerStart(t,1.5,false,function ShikiD)
elseif stage==6 then
call FilterBasic(Player(p-1),2.50,"war3mapImported\\@Sinematic_ShikI3.blp",100.00,100.00,100.00,0.00,100.00,0.00,0.00,100.00)
call SetPlayerName(Player(8),"|cff4169e1토오노 시키 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFF0000두 통 이 멎 었 다.")
call SaveInteger(udg_Hash,GetHandleId(t),2,7)
call TimerStart(t,1.5,false,function ShikiD)
elseif stage>=7 then
call FilterBasic(Player(p-1),2.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,0.00,100.00,0.00,0.00,100.00)
call endMujuk(p,u)
call PauseUnit(u,false)
call SetPlayerAbilityAvailable(Player(p-1),'H066',true)
call SetPlayerAbilityAvailable(Player(p-1),'H060',false)
set invenClick[p]=false
set tempI=0
loop
exitwhen tempI>31
if LoadInteger(Hash,p-1,$DA437F80+tempI)=='U027' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(tempI)+"/"+I2S('U036'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set tempI=tempI+1
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
endfunction
function ShikiDD takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real tempX
local real tempY
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==3 or stage==6 then
call SetUnitAnimationByIndex(u,35)
endif
if stage>=25 and stage<=46 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",0,tempX,tempY,1,270,1,0,0,0)
endif
if stage==50 then
call endMujuk(p,u)
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
if IsPointPathableALL(GetUnitX(u)-(((28)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)-(((28)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))then
call SetUnitX(u,GetUnitX(u)-(((28)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(u)-(((28)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
endif
call TimerStart(t,0.02,false,function ShikiDD)
call Mujuk(p,u)
endif
set u=null
set t=null
endfunction
function ShikiQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local unit c
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX
local real tempY
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call Mujuk(p,u)
if stage==2 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Z048.mdl",0,tempX,tempY,1,angle-180,1,0,0,0)
call SetUnitAnimationByIndex(u,4)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiQ.mp3"),(null),(100),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))<=150 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikQ1.mp3"),(null),(100),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_tx-shqy10-E.mdl",0,tempX,tempY,1,angle,1,0,0,0)
call SetUnitX(u,GetUnitX(u)+(((350)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(u)+(((350)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
set tempX=GetUnitX(u)-(((50)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)-(((50)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_AZ_PA_C.mdl",0,tempX,tempY,2.25,angle,1,0,0,0)
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"war3mapImported\\@EF_yz-leimitx4.mdl",0,tempX,tempY,1*Skrange[p],270,1,0,0,0)
call SetUnitAnimationByIndex(u,6)
call vibration2(Player(p-1),30,0.2)
set tempX=I2R(GetHeroAgi(u,true))*(3+(I2R(LoadInteger(udg_Hashtable,p,$FAFE5485))*6))
if LoadBoolean(udg_Hash,p,$A5EB2F5F)then
set tempY=1+(I2R(LoadInteger(udg_Hashtable,p,$BB70E228))*0.12)
else
set tempY=1+(I2R(LoadInteger(udg_Hashtable,p,$BB70E228))*0.1)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),300*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if c==tar then
call Damage(u,c,(tempX*tempY),1,0,false,1,'H061')
else
call Damage(u,c,tempX,1,0,false,1,'H061')
endif
endif
endloop
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call SetUnitX(u,GetUnitX(u)+(((90)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(u)+(((90)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
call TimerStart(t,0.02,false,function ShikiQ)
endif
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))>=5000 then
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set tar=null
set c=null
endfunction
function ShikiW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local unit c
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX
local real tempY
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local integer p=GetPlayerId(GetOwningPlayer(u))+1
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==2 then
call SetUnitAnimationByIndex(u,10)
set tempX=I2R(GetHeroAgi(u,true))*(8+(I2R(LoadInteger(udg_Hashtable,p,$457BCFC0))*10))
call Damage(u,tar,tempX,1,0,false,0.125,'H062')
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiW.mp3"),(null),(100),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikQ1.mp3"),("1"),(100),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,80,u)
call Stun(u,tar,2)
endif
if stage==5 then
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),angle)
call imagedummy(p,c,0.65,2,null,Model[p])
call invisible(c,40.00,100.00,0.65,0.01)
call SetUnitAnimationByIndex(c,1)
set tempX=I2R(GetHeroAgi(u,true))*(8+(I2R(LoadInteger(udg_Hashtable,p,$457BCFC0))*10))
call Damage(u,tar,tempX,1,0,false,0.125,'H062')
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikQ1.mp3"),("2"),(100),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,80,u)
endif
if stage==8 then
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),angle)
call imagedummy(p,c,0.65,2,null,Model[p])
call invisible(c,40.00,100.00,0.65,0.01)
call SetUnitAnimationByIndex(c,3)
set tempX=I2R(GetHeroAgi(u,true))*(8+(I2R(LoadInteger(udg_Hashtable,p,$457BCFC0))*10))
call Damage(u,tar,tempX,1,0,false,0.125,'H062')
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikQ1.mp3"),("3"),(100),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,80,u)
endif
if stage==11 then
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),angle)
call imagedummy(p,c,0.65,2,null,Model[p])
call invisible(c,40.00,100.00,0.65,0.01)
call SetUnitAnimationByIndex(c,7)
set tempX=I2R(GetHeroAgi(u,true))*(8+(I2R(LoadInteger(udg_Hashtable,p,$457BCFC0))*10))
call Damage(u,tar,tempX,1,0,false,0.125,'H062')
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikQ1.mp3"),("4"),(100),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,80,u)
endif
if stage==14 then
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),angle)
call imagedummy(p,c,0.65,2,null,Model[p])
call invisible(c,40.00,100.00,0.65,0.01)
call SetUnitAnimationByIndex(c,15)
set tempX=I2R(GetHeroAgi(u,true))*(8+(I2R(LoadInteger(udg_Hashtable,p,$457BCFC0))*10))
call Damage(u,tar,tempX,1,0,false,0.125,'H062')
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikQ1.mp3"),("5"),(100),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,80,u)
endif
if stage==17 then
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),angle)
call imagedummy(p,c,0.65,2,null,Model[p])
call invisible(c,40.00,100.00,0.65,0.01)
call SetUnitAnimationByIndex(c,6)
set tempX=I2R(GetHeroAgi(u,true))*(8+(I2R(LoadInteger(udg_Hashtable,p,$457BCFC0))*10))
call Damage(u,tar,tempX,1,0,false,0.125,'H062')
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikQ1.mp3"),("6"),(100),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,80,u)
endif
if stage==20 then
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),angle)
call imagedummy(p,c,0.65,2,null,Model[p])
call invisible(c,40.00,100.00,0.65,0.01)
call SetUnitAnimationByIndex(c,11)
set tempX=I2R(GetHeroAgi(u,true))*(8+(I2R(LoadInteger(udg_Hashtable,p,$457BCFC0))*10))
call Damage(u,tar,tempX,1,0,false,0.125,'H062')
endif
if stage>=23 then
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),angle)
call imagedummy(p,c,0.65,2,null,Model[p])
call invisible(c,40.00,100.00,0.65,0.01)
call SetUnitAnimationByIndex(c,14)
set tempX=I2R(GetHeroAgi(u,true))*(8+(I2R(LoadInteger(udg_Hashtable,p,$457BCFC0))*10))
call Damage(u,tar,tempX,1,0,false,0.125,'H062')
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Z048.mdl",0,tempX,tempY,1,angle-180,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_srwo162.mdl",0,tempX,tempY,1,angle,1,0,0,-100)
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,tempX,tempY,3,(GetRandomReal(0.0,360.0)),1,0,0,0)
call vibration2(Player(p-1),10,0.015)
call TimerStart(t,0.02,false,function ShikiW)
endif
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))>=5000 then
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set tar=null
set c=null
endfunction
function ShikiE takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit c
local unit tar=null
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real tempR
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer temp
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiE1.mp3"),(null),(100),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiE_Dash.mp3"),(null),(100),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call EFsettingXY(p,"war3mapImported\\@EF_Fuzzy Stomp.mdx",0,GetUnitX(u),GetUnitY(u),1,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_LB_hdg.mdx",0,GetUnitX(u),GetUnitY(u),0.65,GetRandomReal(0,360),1,0,0,10)
call EFsettingXY(p,"war3mapImported\\@EF_Nitu.mdx",0,GetUnitX(u),GetUnitY(u),1.5,angle,1,0,0,10)
call EFsettingXY(p,"war3mapImported\\@EF_White-Qiquan-Special.mdx",0,GetUnitX(u),GetUnitY(u),1.5,angle,1,0,0,10)
endif
if stage>=10 then
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call SetUnitAnimationByIndex(u,4)
if IsPointPathableALL(GetUnitX(u)+(((75)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((75)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))then
call SetUnitX(u,GetUnitX(u)+(((75)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(u)+(((75)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
endif
set temp=stage-(stage/2)*2
if temp==0 then
call EFsettingXY(p,"war3mapImported\\@EF_Ryoul Laser Particle Blue.mdx",0,GetUnitX(u),GetUnitY(u),1,angle,1,90,0,100)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),210,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
set tar=c
endif
endloop
if tar !=null then
call vibration2(Player(p-1),30,0.15)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiE1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiE2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikE_Hit.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call SetUnitX(u,GetUnitX(tar)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(tar)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding.mdl",0,GetUnitX(tar),GetUnitY(tar),2,angle+40,1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding.mdl",0,GetUnitX(tar),GetUnitY(tar),2,angle-40,1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding.mdl",0,GetUnitX(tar),GetUnitY(tar),2.5,angle,1,90,0,0)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,10)
set tempX=I2R(GetHeroAgi(u,true))*(5+(I2R(LoadInteger(udg_Hashtable,p,$6074AEF9))*5))
if LoadBoolean(udg_Hash,p,$A5EB2F5F)then
set tempY=1+(I2R(LoadInteger(udg_Hashtable,p,$BB70E228))*0.12)
else
set tempY=1+(I2R(LoadInteger(udg_Hashtable,p,$BB70E228))*0.1)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),450*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if c==tar then
call Damage(u,c,(tempX*tempY),1,0,false,1,'H063')
else
call Damage(u,c,tempX,1,0,false,1,'H063')
endif
endif
endloop
endif
call TimerStart(t,0.02,false,function ShikiE)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set tar=null
endfunction
function ShikiR takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit c
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real tempR
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer temp
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiR1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiR2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call EFsettingXY(p,"Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeTarget.mdl",2.5,tempX,tempY,1*Skrange[p],270,1,0,0,0)
call KnockBackXY(u,tempX,tempY,1.5,0.01)
call jump(u,1.5,400,0.01)
call SetUnitAnimationByIndex(u,22)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,550*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call SlowApply(u,c,2,0.8)
endif
endloop
endif
if stage>=5 and stage<=65 then
set temp=stage-(stage/2)*2
if temp==0 then
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA+stage)
call SetUnitFlyHeight(c,GetUnitFlyHeight(u),0)
call SetUnitX(c,GetUnitX(u))
call SetUnitY(c,GetUnitY(u))
call invisible(c,40.00,100.00,0.35,0.01)
endif
endif
if stage==65 then
call invisible(u,0.00,100.00,0.5,0.01)
endif
if stage==70 then
if(GetLocalPlayer()==Player(p-1))then
call ClearSelection()
endif
call EFsettingXY(p,"war3mapImported\\@EF_srwo17.mdl",1.7,tempX,tempY,2.5*Skrange[p],270,1,0,0,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikR1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
if stage>=70 and stage<=121 then
set temp=stage-(stage/3)*3
if temp==0 then
call vibration2(Player(p-1),10,0.04)
if LoadBoolean(udg_Hash,p,$A5EB2F5F)then
set tempR=(I2R(GetHeroAgi(u,true))*(16+(I2R(LoadInteger(udg_Hashtable,p,$BB70E228))*20)))*1.2
else
set tempR=I2R(GetHeroAgi(u,true))*(16+(I2R(LoadInteger(udg_Hashtable,p,$BB70E228))*20))
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,550*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,tempR,1,0,false,0.0556,'H064')
call EFsettingU(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,c,"chest")
endif
endloop
endif
endif
if stage==100 then
call SetUnitAnimationByIndex(u,23)
call SetUnitX(u,GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
endif
if stage==121 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikR2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call vibration2(Player(p-1),30,0.2)
call SetUnitVertexColorBJ(u,100,100,100,0)
if(GetLocalPlayer()==Player(p-1))then
call ClearSelection()
call SelectUnit(u,true)
endif
call FilterBasic(Player(p-1),1.00,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,40.00,100.00,0.00,0.00,100.00)
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call Mujuk(p,u)
call TimerStart(t,0.02,false,function ShikiR)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function ShikiT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX
local real tempY
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real tdmg=GetHeroAgi(u,true)*(120+(LoadInteger(udg_Hashtable,p,$132FA1F5)*60))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call Mujuk(p,u)
if stage==2 then
call SetUnitAnimationByIndex(u,24)
call invisible(u,40.00,100.00,0.55,0.01)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiT1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
if stage==35 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_canying.mdl",0,tempX,tempY,1,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_SpecialAnimeDustWave.mdl",0,tempX,tempY,2,270,1,0,0,0)
call vibration2(Player(p-1),20,0.2)
endif
if stage==45 then
set tempY=s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))*0.5
set tempX=GetUnitX(u)+(((tempY+150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((tempY+150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_WindAttack.mdl",0,tempX,tempY,1,angle-180,1,0,0,0)
endif
if stage>=55 then
call vibration2(Player(p-1),40,0.4)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiT2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,tar)
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Goods_Blink(3).mdl",0,tempX,tempY,5,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Lina_G1.mdl",0,tempX,tempY,1,angle-180,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_hit-white-guangxiao.mdl",0,tempX,tempY,3,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_DeathAnimVE.mdl",0,tempX,tempY,7,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Singularity I Blue.mdl",0,tempX,tempY,3,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW.mdl",0,tempX,tempY,3,angle,1,0,0,0)
call SetUnitX(u,tempX+(((250)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,tempY+(((250)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
call Damage(u,tar,tdmg,1,0,false,1,'H065')
call Stun(u,tar,2)
call SetUnitVertexColorBJ(u,100,100,100,0)
call SetUnitAnimationByIndex(u,34)
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call TimerStart(t,0.02,false,function ShikiT)
endif
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))>=5000 then
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set tar=null
endfunction
function ShikiSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local integer tempI
local integer temp
local real tempX
local real tempY
local real Mana
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
if sk=='H060' then
if LoadBoolean(System,p,$B362FB6C)and GetFloatGameState(GAME_STATE_TIME_OF_DAY)>=0.00 and GetFloatGameState(GAME_STATE_TIME_OF_DAY)<=1.00 then
call Mujuk(p,u)
call PauseUnit(u,true)
call SaveInteger(udg_Hash,GetHandleId(t),1,p)
call SaveInteger(udg_Hash,GetHandleId(t),2,1)
set Mana=LoadReal(Hash_Stat,p,$45E22B52)
call SaveReal(Hash_Stat,p,$45E22B52,Mana+0.15)
set Mana=LoadReal(Hash_Stat,p,$A7543052)
call SaveReal(Hash_Stat,p,$A7543052,Mana-0.3)
set temp=LoadInteger(Hash_Stat,p,$8885555B)
call SaveInteger(Hash_Stat,p,$8885555B,temp+10)
set Mana=LoadReal(Hash_Stat,p,$34D9AB92)
call SaveReal(Hash_Stat,p,$34D9AB92,Mana+10)
set temp=LoadInteger(udg_Hash,p,$A13CC7F9)/4
call StatUP(p,temp,"공격력")
call SkillLVUP(p,4,1)
call SaveBoolean(System,p,$256D2755,true)
call TimerStart(udg_infoRe[p],0.01,false,null)
call SetUnitAnimation(u,"death")
call FilterBasic(Player(p-1),2.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,0.00,0.00,0.00,100.00,0.00,0.00,100.00)
call TimerStart(t,0.01,false,function ShikiD)
else
call BuffCall(u,'B002',30,false,false)
call StatChange(p,0.15,"스증",30)
call StatChange(p,10,"피감",30)
call StatChange(p,-0.30,"마나코스트",30)
call SetPlayerAbilityAvailable(Player(p-1),'H060',false)
call SetPlayerAbilityAvailable(Player(p-1),'H066',true)
call SaveInteger(udg_Hash,GetHandleId(t),1,p)
call SaveInteger(udg_Hash,GetHandleId(t),2,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiD1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call EFsettingU(p,"war3mapImported\\@EF_orgia mode44.mdl",30,u,"origin")
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiD.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call vibration2(Player(p-1),30,0.4)
call TimerStart(t,30,false,function ShikiD)
endif
endif
if sk=='H066' then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ShikiDD.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call TimerStart(t,0.02,false,function ShikiDD)
call Shacull(p)
endif
if sk=='H061' then
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call TimerStart(t,0.02,false,function ShikiQ)
call Shacull(p)
endif
if sk=='H062' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call TimerStart(t,0.02,false,function ShikiW)
call Shacull(p)
endif
if sk=='H063' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,SkillLocX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call TimerStart(t,0.02,false,function ShikiE)
call Shacull(p)
endif
if sk=='H064' then
set Mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
set Mana=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1300 then
set SkillLocX=(GetUnitX(u)+(((1300)*1.0)*Cos(((Mana)*1.0)*bj_DEGTORAD)))
set SkillLocY=(GetUnitY(u)+(((1300)*1.0)*Sin(((Mana)*1.0)*bj_DEGTORAD)))
endif
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,SkillLocX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,Mana)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
set tempI=5
loop
exitwhen tempI==65
set tempI=tempI+1
set temp=tempI-(tempI/2)*2
if temp==0 then
set tar=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),Mana)
call imagedummy(p,tar,1.5,2,null,Model[p])
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA+tempI,tar)
call SetUnitAnimationByIndex(tar,22)
call SetUnitVertexColorBJ(tar,100,100,100,100)
endif
endloop
call Shacull(p)
call TimerStart(t,0.02,false,function ShikiR)
endif
if sk=='H065' then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call FilterBasic(Player(p-1),1.5,"war3mapImported\\@Sinematic_Shiki4.blp",100.00,100.00,100.00,0.00,100.00,100.00,100.00,100.00)
call Shacull(p)
call TimerStart(t,0.02,false,function ShikiT)
endif
set u=null
set t=null
set tar=null
endfunction
function ShikiST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
set ChSkillD[p]='H060'
set ChSkillQ[p]='H061'
set ChSkillW[p]='H062'
set ChSkillE[p]='H063'
set ChSkillR[p]='H064'
set ChSkillT[p]='H065'
set Range[p]=250
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
call SetPlayerAbilityAvailable(Player(p-1),'H066',false)
call UnitAddAbility(u,'H066')
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_ShikiQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_ShikiW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_ShikiE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_ShikiR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_ShikiT.blp",0)
endif
set STRup[p]=9
set AGIup[p]=9
set INTup[p]=1
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,70)
call SaveReal(udg_Hashtable,p,$43C91172,0.15)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.9)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$9B58470C,100)
call SaveReal(udg_Hashtable,p,$88E0F85F,50)
call SaveReal(udg_Hashtable,p,$E755DDB8,150)
call SaveReal(udg_Hashtable,p,$ABD3E955,150)
call SaveReal(udg_Hashtable,p,$A2229E00,130)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,30)
call SaveReal(udg_Hashtable,p,$C3EA9E83,400)
call SaveReal(udg_Hashtable,p,$A8D71652,200)
call SaveReal(udg_Hashtable,p,$127510D2,750)
call SaveReal(udg_Hashtable,p,$B491D29B,750)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,'H066',$5047FE8B,true)
call SaveBoolean(udg_Hashtable,'H066',$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$5047FE8B,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_ShikiF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc직사의 마안")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"모든 피해가 잃은 체력에 비례한 피해가 추가됩니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00피해 증폭율|cffffa500 : 대상의 잃은체력 1%당 0.2%")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function ShikiSkill)
call SaveInteger(udg_Hashtable,p,$5EFF7683,6)
call ShikiTT(p)
set u=null
set trg=null
endfunction
function YaeTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer l__Int=GetHeroInt(u,true)
local real Qdmg0=I2R(l__Int)*(1+I2R(LoadInteger(udg_Hashtable,p,$FAFE5485))*0.2)
local integer QLv=LoadInteger(udg_Hashtable,p,$FAFE5485)
local integer Qdmg=R2I(Qdmg0)
local integer Wdmg=l__Int*(6+(LoadInteger(udg_Hashtable,p,$457BCFC0)*4))
local integer Edmg=l__Int*(2+(LoadInteger(udg_Hashtable,p,$6074AEF9)*6))
local integer Edmg2=(LoadInteger(udg_Hashtable,p,$6074AEF9)*4)
local integer Edmg3=(LoadInteger(udg_Hashtable,p,$6074AEF9)*8)
local integer Rdmg=l__Int*(3+(LoadInteger(udg_Hashtable,p,$BB70E228)*9))
local integer Rdmg2=l__Int*(8+(LoadInteger(udg_Hashtable,p,$BB70E228)*10))
local integer Tdmg=l__Int*(75+(LoadInteger(udg_Hashtable,p,$132FA1F5)*50))
local integer Tdmg2=(7+(LoadInteger(udg_Hashtable,p,$132FA1F5)*3))
if LoadBoolean(System,p,$E9917373)then
set Wdmg=Wdmg+R2I(Wm*Kirie[p])
set Edmg=Edmg+R2I(Em*Kirie[p])
set Rdmg=Rdmg+R2I(Rm*Kirie[p])
set Tdmg=Tdmg+R2I(Tm*Kirie[p])
endif
if LoadBoolean(udg_Hash,p,$AF40D522)then
call EXSetAbilityString('H051',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 지점으로 돌진하며 해당 지점에 포탑을 설치합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00포탑 피해|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff6A5ACD번개속성 |cffFF9100지속 마법\n|cff00ff00사거리|cffffa500 : 550\n|cff00ff00공격 범위|cffffa500 : 내 사거리 + 100\n|cff00ff00특수 1|cffffa500 : 포탑은 내 공격속도를 따라가며 최대 3스택까지 쌓아서 1스택을 소모해 사용이 가능하다.\n|cff00ff00특수 2|cffffa500 : 포탑 설치시 가장 높은 레벨의 포탑보다 1 높은 레벨 (최대 4)의 포탑이 설치되고 단계당 피해량이 지능 x "+R2S(QLv*0.01)+" 만큼 상승한다.\n|cff00ff00지속시간|cffffa500 : 10초\n|cff00ff00스택 쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초\n|cffFF0000EX|cffffa500 : 최대 레벨이 4로 증가하며 공격속도를 100% 따라간다.")
else
call EXSetAbilityString('H051',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 지점으로 돌진하며 해당 지점에 포탑을 설치합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00포탑 피해|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff6A5ACD번개속성 |cffFF9100지속 마법\n|cff00ff00사거리|cffffa500 : 550\n|cff00ff00공격 범위|cffffa500 : 내 사거리 + 100\n|cff00ff00특수 1|cffffa500 : 포탑은 내 공격속도의 50%를 따라가며 최대 3스택까지 쌓아서 1스택을 소모해 사용이 가능하다.\n|cff00ff00특수 2|cffffa500 : 포탑 설치 당시 근처의 150내 포탑은 철거된다. 포탑 설치시 가장 높은 레벨의 포탑보다 1 높은 레벨 (최대 3)의 포탑이 설치되고 단계당 피해량이 지능 x "+R2S(QLv*0.01)+" 만큼 상승한다.\n|cff00ff00지속시간|cffffa500 : 10초\n|cff00ff00스택 쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초")
endif
call EXSetAbilityString('H056',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 지점으로 돌진하며 해당 지점에 포탑을 설치합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00포탑 피해|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff6A5ACD번개속성 |cffFF9100지속 마법\n|cff00ff00사거리|cffffa500 : 550\n|cff00ff00공격 범위|cffffa500 : 내 사거리 + 100\n|cff00ff00특수 1|cffffa500 : 포탑은 내 공격속도의 50%를 따라가며 최대 3스택까지 쌓아서 1스택을 소모해 사용이 가능하다.\n|cff00ff00특수 2|cffffa500 : 포탑 설치 당시 근처의 150내 포탑은 철거된다. 포탑 설치시 가장 높은 레벨의 포탑보다 1 높은 레벨 (최대 3)의 포탑이 설치되고 단계당 피해량이 지능 x "+R2S(QLv*0.01)+" 만큼 상승한다.\n|cff00ff00지속시간|cffffa500 : 10초\n|cff00ff00스택 쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초")
if LoadBoolean(udg_Hash,p,$AF40D522)then
call EXSetAbilityString('H052',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n사용 지점으로 여우령들이 돌진해 부딫친 적들에게 피해를 입힙니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff6A5ACD번개속성 |cffFF9100마법\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00범위|cffffa500 : "+I2S(R2I(450*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(7*ct[p]))+"초\n|cffFF0000EX|cffffa500 : 포탑을 지나가는 여우령은 "+I2S(R2I(450*Skrange[p]))+" 범위의 폭발을 일으켜 50%의 피해를 한번 더 입힌다.")
else
call EXSetAbilityString('H052',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n사용 지점으로 여우령들이 돌진해 부딫친 적들에게 피해를 입힙니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff6A5ACD번개속성 |cffFF9100마법\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00범위|cffffa500 : "+I2S(R2I(450*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(7*ct[p]))+"초")
endif
call DzSyncData("SKRG",I2S('H052')+"/"+R2S(450*Skrange[p]))
call EXSetAbilityString('H053',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n야에 미코가 기운을 방출해서 주변을 공격합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff6A5ACD번개속성 |cffFF9100마법\n|cff00ff00특수|cffffa500 : 적중한 살생앵 하나당 6초간 공격속도 "+I2S(Edmg2)+"% / 살생앵의 공격속도 "+I2S(Edmg3)+"% 증가\n|cff00ff00범위|cffffa500 : "+I2S(R2I(700*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(8.5*ct[p]))+"초")
call EXSetAbilityString('H054',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n번개와 함께 사용지점으로 재빠르게 돌진하며 지나오는 지점과 최종지점의 적들에게 피해를 가한다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00돌진 데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00도착 데미지|cffffa500 : "+I2S(Rdmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cff6A5ACD번개속성 |cffFF9100마법\n|cff00ff00최대 돌진거리|cffffa500 : 1200\n|cff00ff00돌진중 범위|cffffa500 : "+I2S(R2I(300*Skrange[p]))+"\n|cff00ff00도착후 범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(22*ct[p]))+"초")
call EXSetAbilityString('H055',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n사용시 지점으로 천호를 헌신시켜 공격합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff6A5ACD번개속성 |cffFF9100마법\n|cff00ff00특수|cffffa500 : 사용당시 자신 주변 1500 범위의 살생앵들의 기운을 받아와 살생앵의 단계 총합 x "+I2S(Tdmg2)+"의 번개가 한번더 떨어집니다.\n|cff00ff00사거리|cffffa500 : 4500\n|cff00ff00범위|cffffa500 : "+I2S(R2I(1500*Skrange[p]))+"\n|cff00ff00지연시간|cffffa500 : 1초\n|cff00ff00스턴|cffffa500 : 3초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(100*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H055')+"/"+R2S(1500*Skrange[p]))
set u=null
endfunction
function YaeEX takes integer p returns nothing
call SaveBoolean(udg_Hash,p,$AF40D522,true)
call YaeTT(p)
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Yae_Ex_BGM.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Yae_Ex_Get.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call ProduTime(53,4)
endif
call SetPlayerName(Player(8),"|cffFFB4FF야에 미코 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"이 몸은 나루카미의 군사 , 자 빨리 나를 재밌게해보거라")
endfunction
function YaeQstackESC takes nothing returns nothing
local integer p=GetPlayerId(GetTriggerPlayer())+1
local integer stack=LoadInteger(udg_Hash,p,$794B8D32)
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"살생앵 스택 : "+I2S(stack))
endfunction
function YaeQstack takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$39222DC9)
local integer stack=LoadInteger(udg_Hash,p,$794B8D32)
local real cd=LoadReal(udg_Hash,p,$782D439E)-0.1
if cd<=0 then
call SaveReal(udg_Hash,p,$782D439E,12*ct[p])
if stack<=2 then
call SaveInteger(udg_Hash,p,$794B8D32,stack+1)
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"살생앵 스택 : "+I2S(stack+1))
if GetLocalPlayer()==Player(p-1)then
if stack==0 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack1.blp",0)
endif
if stack==1 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack2.blp",0)
endif
if stack==2 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack3.blp",0)
endif
endif
endif
if stack>=0 then
call SetPlayerAbilityAvailable(Player(p-1),'H056',false)
call SetPlayerAbilityAvailable(Player(p-1),'H051',true)
endif
else
if stack<=2 then
call SaveReal(udg_Hash,p,$782D439E,cd)
endif
endif
call TimerStart(t,0.1,false,function YaeQstack)
set t=null
endfunction
function TowerLifeTime takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer num=LoadInteger(udg_Hash,GetHandleId(t),1)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),2)
local real life=LoadReal(udg_Hash,p,$3F1782DF+num)-0.05
local unit u=LoadUnitHandle(udg_Hash,p,$684182B8+num)
if life<=0 then
call EFsettingXY(p,"war3mapImported\\@EF_Effect_YaeMikoTower_1.mdl",0,GetUnitX(u),GetUnitY(u),3,270,1,0,0,0)
call RemoveUnit(u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call SaveReal(udg_Hash,p,$3F1782DF+num,life)
call TimerStart(t,0.05,false,function TowerLifeTime)
endif
set t=null
set u=null
endfunction
function YaeQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real tempR
local integer tempI
local unit c
local boolean bo=false
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
set tempI=GetRandomint(1,100)
if tempI<=20 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_YaeQ1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
set bo=true
elseif tempI>=21 and tempI<=40 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_YaeQ2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
set bo=true
elseif tempI>=41 and tempI<=60 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_YaeQ3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
set bo=true
endif
if bo then
call PlaySoundOnUnit(udg_SND,100,u)
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Yae_Q_Dash.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call SetUnitAnimationByIndex(u,9)
set tempI=LoadInteger(udg_Hash,p,$794B8D32)-1
call SaveInteger(udg_Hash,p,$794B8D32,tempI)
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"살생앵 스택 : "+I2S(tempI))
if GetLocalPlayer()==Player(p-1)then
if tempI==0 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
endif
if tempI==1 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack1.blp",0)
endif
if tempI==2 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack2.blp",0)
endif
endif
if tempI<=0 then
call SetPlayerAbilityAvailable(Player(p-1),'H056',true)
call SetPlayerAbilityAvailable(Player(p-1),'H051',false)
endif
endif
if stage>=10 then
call RemoveUnit(tar)
set tempI=0
set stage=0
loop
exitwhen tempI==6
set tempI=tempI+1
set c=LoadUnitHandle(udg_Hash,p,$684182B8+tempI)
if IsUnitInRange(u,c,150.00)then
call EFsettingXY(p,"war3mapImported\\@EF_Effect_YaeMikoTower_1.mdl",0,GetUnitX(c),GetUnitY(c),3,270,1,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",0,GetUnitX(c),GetUnitY(c),1,270,1,0,0,0)
call RemoveUnit(c)
call SaveReal(udg_Hash,p,$3F1782DF+tempI,0)
endif
if GetUnitTypeId(c)!='h056' then
set stage=tempI
endif
endloop
set c=CreateUnit(Player(p-1),'h056',GetUnitX(u)+(((-100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((-100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),270)
call SaveUnitHandle(udg_Hash,p,$684182B8+stage,c)
call SetUnitState(c,ConvertUnitState(0x16),Range[p]+100)
call SetUnitState(c,ConvertUnitState(0x52),Range[p]+100)
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),1,stage)
call SaveInteger(udg_Hash,GetHandleId(t2),2,p)
call TimerStart(t2,0.05,false,function TowerLifeTime)
if LoadBoolean(udg_Hash,p,$AF40D522)then
set tempR=I2R(AttackSpd[p])*0.01
else
set tempR=I2R(AttackSpd[p])*0.005
endif
call SaveReal(udg_Hash,p,$3F1782DF+stage,10)
call UnitAddAbility(c,'AIsx')
call EXSetAbilityDataReal(EXGetUnitAbility(c,'AIsx'),1,108,tempR)
call IncUnitAbilityLevel(c,'AIsx')
call DecUnitAbilityLevel(c,'AIsx')
set tempI=0
set stage=0
loop
exitwhen tempI==6
set tempI=tempI+1
set tar=LoadUnitHandle(udg_Hash,p,$684182B8+tempI)
if tar !=null and GetUnitUserData(tar)>=stage then
set stage=GetUnitUserData(tar)
endif
endloop
call SetUnitUserData(c,stage+1)
if LoadBoolean(udg_Hash,p,$AF40D522)and stage>=4 then
call SetUnitUserData(c,4)
elseif not LoadBoolean(udg_Hash,p,$AF40D522)and stage>=3 then
call SetUnitUserData(c,3)
endif
if stage>=2 then
call EFsettingXY(p,"war3mapImported\\@EF_Effect Grade Upgrade Purple.mdx",0,GetUnitX(c),GetUnitY(c),1,270,1,0,0,0)
endif
if stage==3 then
call AddUnitAnimationProperties(c,"alternate",true)
elseif stage==4 then
call DzSetUnitModel(c,"war3mapImported\\@EF_Effect_YaeMikoTower_2.mdl")
endif
call EFsettingXY(p,"Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",0,GetUnitX(c),GetUnitY(c),1,270,1,0,0,0)
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
if s__Distance_PBP(GetUnitX(u)+(((55)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((55)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),GetUnitX(tar),GetUnitY(tar))<=60 then
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,10)
else
if IsPointPathableALL(GetUnitX(u)+(((55)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((55)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))then
call SetUnitX(u,GetUnitX(u)+(((55)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(u)+(((55)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
endif
endif
call EFsettingXY(p,"Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",0,GetUnitX(u),GetUnitY(u),1.5,angle-90,2.5,0,90,100)
call TimerStart(t,0.02,false,function YaeQ)
endif
call s__party_deallocate((g))
set t=null
set t2=null
set u=null
set tar=null
set c=null
endfunction
function YaeW takes nothing returns nothing
local timer t=GetExpiredTimer()
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit dummy
local unit c
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer temp
local real tempX
local real tempY
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local effect ef
local real Wdmg=I2R(GetHeroInt(u,true)*(8+LoadInteger(udg_Hashtable,p,$457BCFC0)*5))
local integer tempI2=0
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_YaeW.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Yae_Wattack.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
set temp=-2
loop
exitwhen temp==1
set temp=temp+1
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle+(temp*50))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle+(temp*50))*1.0)*bj_DEGTORAD))
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_Effect_YaeMikoKitsune.mdl",tempX,tempY)
call EXSetEffectSize(ef,4)
call EXEffectMatRotateX(ef,0)
call EXEffectMatRotateZ(ef,angle)
call EXSetEffectZ(ef,150)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$7D395D99+temp,ef)
endloop
endif
if stage>=1 then
set temp=-2
loop
exitwhen temp==1
set temp=temp+1
if stage>=11 then
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$7D395D99+temp)
call DestroyEffect(ef)
else
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$7D395D99+temp)
set tempX=EXGetEffectX(ef)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=EXGetEffectY(ef)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Zeusking_F.Yae.mdl",0,tempX,tempY,5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_lightningrhit_small_Yae2.mdl",0,tempX,tempY,3*Skrange[p],angle,1,0,0,0)
call EXEffectMatRotateX(ef,(stage*36))
call EXSetEffectXY(ef,tempX,tempY)
if temp==0 then
if LoadBoolean(udg_Hash,p,$AF40D522)then
loop
exitwhen tempI2==10
set tempI2=tempI2+1
set c=LoadUnitHandle(udg_Hash,p,$684182B8+tempI2)
if c !=null and IsUnitInRangeXY(c,tempX,tempY,450.00)and GetUnitAbilityLevel(c,'H057')==0 then
call UnitAddAbility(c,'H057')
call EFsettingXY(p,"war3mapImported\\@EF_tx_purplezhenji.mdl",0,GetUnitX(c),GetUnitY(c),2*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_jxtx_a (14).mdl",0,GetUnitX(c),GetUnitY(c),2*Skrange[p],270,1,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(c),GetUnitY(c),450*Skrange[p],null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckPlayerGroup(dummy)then
call Damage(u,dummy,Wdmg,2,4,false,0.5,'H052')
endif
endloop
endif
endloop
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,450*Skrange[p],null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckPlayerGroup(dummy)and not IsUnitInGroup(dummy,MultyGroup[p])then
call Damage(u,dummy,Wdmg,2,4,false,1,'H052')
call GroupAddUnit(MultyGroup[p],dummy)
endif
endloop
endif
endif
endloop
endif
if stage>=11 then
if LoadBoolean(udg_Hash,p,$AF40D522)then
loop
exitwhen tempI2==10
set tempI2=tempI2+1
set c=LoadUnitHandle(udg_Hash,p,$684182B8+tempI2)
call UnitRemoveAbility(c,'H057')
endloop
endif
call GroupClear(MultyGroup[p])
call DestroyGroup(MultyGroup[p])
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
if stage !=999 then
call TimerStart(t,0.03,false,function YaeW)
endif
call s__party_deallocate((g))
set t=null
set u=null
set dummy=null
set c=null
set ef=null
endfunction
function YaeR takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit c
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real distanceM=LoadReal(udg_Hash,GetHandleId(t),$516DDC94)
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local real dmg
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_YaeR.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Yae_R_Charge.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call EFsettingU(p,"war3mapImported\\@EF_AZ_Zeusking_F.Yae.mdl",0,u,"hand left")
call EFsettingU(p,"war3mapImported\\@EF_AZ_Zeusking_F.Yae.mdl",0,u,"hand right")
call EFsettingU(p,"Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",0,u,"hand left")
call EFsettingU(p,"Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",0,u,"hand right")
call EFsettingXY(p,"war3mapImported\\@EF_mh-chun-xztx-white.mdl",0.2,tempX,tempY,1,angle,1,0,0,0)
call SetUnitAnimationByIndex(u,6)
call SetUnitTimeScale(u,3)
endif
if stage==10 then
call SetUnitTimeScale(u,1)
call EFsettingXY(p,"war3mapImported\\@EF_Black Blink.mdl",0,tempX,tempY,2,angle+90,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Qianzhan-Yingzi White.mdl",0,tempX,tempY,2,angle,1,0,0,0)
call EFsettingU(p,"war3mapImported\\@EF_AvengerMissile_Puple2.mdl",0.2,u,"chest")
call EFsettingU(p,"war3mapImported\\@EF_AvengerMissile_Puple2.mdl",0.2,u,"origin")
call EFsettingU(p,"war3mapImported\\@EF_AvengerMissile_Puple2.mdl",0.2,u,"hand left")
call EFsettingU(p,"war3mapImported\\@EF_AvengerMissile_Puple2.mdl",0.2,u,"hand right")
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call imagedummySET(p,dummy,"war3mapImported\\@EF_AZ_Lina_G1_1.mdl")
call SetUnitVertexColor(dummy,255,0,255,255)
call SetUnitScale(dummy,3*Skrange[p],1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
call SetUnitAnimationByIndex(u,2)
endif
if stage>=20 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Yae_R_Attack.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call SetUnitAnimationByIndex(u,5)
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF4.mdl",0,tempX,tempY,2*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_R_Freezingring.mdl",0,tempX,tempY,2*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_skill_buwenyineng.mdl",0,tempX,tempY,3*Skrange[p],angle,1,0,0,0)
call KillUnit(dummy)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call EFsettingU(p,"war3mapImported\\@EF_MikaEF13.mdl",0,dummy,"origin")
call EFsettingU(p,"war3mapImported\\@EF_WARRR211.mdl",0,dummy,"origin")
call SetUnitVertexColor(dummy,55,55,255,255)
call SetUnitScale(dummy,2*Skrange[p],1,1)
call KillUnit(dummy)
call RemoveShacull(p)
set dmg=GetHeroInt(u,true)*(5+(LoadInteger(udg_Hashtable,p,$BB70E228)*10))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,4,false,1,'H054')
endif
endloop
call GroupClear(MultyGroup[p+10])
call DestroyGroup(MultyGroup[p+10])
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
elseif stage>=10 then
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
set dmg=GetHeroInt(u,true)*(3+(LoadInteger(udg_Hashtable,p,$BB70E228)*9))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,300*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and not IsUnitInGroup(c,MultyGroup[p+10])then
call Damage(u,c,dmg,2,4,false,1,'H054')
call GroupAddUnit(MultyGroup[p+10],c)
endif
endloop
set tempX=GetUnitX(u)+(((distanceM)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((distanceM)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
endif
if stage==13 then
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call imagedummySET(p,dummy,"war3mapImported\\@EF_AZ_R_Slash Splash Sky.mdl")
call SetUnitVertexColor(dummy,0,0,0,255)
call SetUnitScale(dummy,4*Skrange[p],1,1)
call KillUnit(dummy)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call imagedummySET(p,dummy,"war3mapImported\\@EF_Cut Effect by Deckai Blue 3x.mdl")
call SetUnitVertexColor(dummy,255,0,255,255)
call SetUnitScale(dummy,2*Skrange[p],1,1)
call SetUnitAnimationByIndex(u,2)
call KillUnit(dummy)
endif
call TimerStart(t,0.02,false,function YaeR)
call s__party_deallocate((g))
set t=null
set u=null
set dummy=null
set c=null
endfunction
function YaeT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real damage=LoadReal(udg_Hash,GetHandleId(t),$2FE6DBF0)
local integer temp
local integer temp2=0
local real tempX=GetUnitX(tar)
local real tempY=GetUnitY(tar)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_YaeT1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Yae_T_Charge.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
set temp=0
loop
exitwhen temp==6
set temp=temp+1
set tar=LoadUnitHandle(udg_Hash,p,$684182B8+temp)
if tar !=null and IsUnitInRange(u,tar,1500.00)then
set temp2=temp2+GetUnitUserData(tar)
call EFsettingLOCDD(p,"war3mapImported\\@EF_AvengerMissile_Puple2.mdl",GetUnitX(tar),GetUnitY(tar),3,s__Angle_PBP(GetUnitX(tar),GetUnitY(tar),GetUnitX(u),GetUnitY(u)),1,0,150,s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)),0.5,0.01)
call EFsettingLOCDD(p,"war3mapImported\\@EF_AvengerMissile_Puple2.mdl",GetUnitX(tar),GetUnitY(tar),3,s__Angle_PBP(GetUnitX(tar),GetUnitY(tar),GetUnitX(u),GetUnitY(u)),1,0,150,s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)),0.5,0.01)
call EFsettingXY(p,"war3mapImported\\@EF_CharmTarget_Puple.mdl",0,GetUnitX(tar),GetUnitY(tar),1,270,1,0,0,0)
endif
endloop
call SaveReal(udg_Hash,GetHandleId(t),$2FE6DBF0,I2R(temp2)*(7+(LoadInteger(udg_Hashtable,p,$132FA1F5)*3)))
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ShockStompCaster_YAE_FOXonly.mdl",0,GetUnitX(u),GetUnitY(u),3,270,1,0,0,0)
call TimerStart(t,1.0,false,function YaeT)
call SetUnitAnimationByIndex(u,13)
call SetUnitTimeScale(u,1.5)
endif
if stage==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Yae_T_oneAttack.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
if damage==0 then
call RemoveUnit(tar)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call TimerStart(t,1.0,false,function YaeT)
call EFsettingXY(p,"war3mapImported\\@EF_CharmTarget_Puple.mdl",0,tempX,tempY,7*Skrange[p],270,1,0,0,0)
endif
call SetUnitTimeScale(u,1)
call RemoveShacull(p)
call vibration2(Player(p-1),50,0.13)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ZK_BM_Mine_blasting_YAE2.mdl",0,tempX,tempY,1*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ShockStompCaster_YAE_NOFOX2.mdl",0,tempX,tempY,1*Skrange[p],270,1,0,0,0)
set damage=I2R(GetHeroInt(u,true)*(75+(LoadInteger(udg_Hashtable,p,$132FA1F5)*50)))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1500*Skrange[p],null)
loop
set tar=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),tar)
exitwhen tar==null
if CheckPlayerGroup(tar)then
call Damage(u,tar,damage,2,4,false,1,'H055')
call Stun(u,tar,3)
endif
endloop
endif
if stage==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_YaeT2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Yae_T_twoAttack.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call vibration2(Player(p-1),50,0.13)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ZK_BM_Mine_blasting_YAE2.mdl",0,tempX,tempY,1*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ShockStompCaster_YAE_NOFOX2.mdl",0,tempX,tempY,1*Skrange[p],270,1,0,0,0)
set damage=I2R(GetHeroInt(u,true))*damage
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1500*Skrange[p],null)
loop
set tar=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),tar)
exitwhen tar==null
if CheckPlayerGroup(tar)then
call Damage(u,tar,damage,2,4,false,1,'H055')
call Stun(u,tar,3)
endif
endloop
set tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
call RemoveUnit(tar)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set tar=null
endfunction
function YaeSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local real tempR
local real tempX
local real tempY
local integer tempI
local integer tempI2
local integer tempI3
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local unit c
local integer g=s__party_create()
local real Mana
if sk=='H051' then
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=550 then
set tempX=(GetUnitX(u)+(((550)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((550)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,c)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call TimerStart(t,0.0,false,function YaeQ)
call Shacull(p)
endif
if sk=='H052' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call TimerStart(t,0.0,false,function YaeW)
set MultyGroup[p]=CreateGroup()
endif
if sk=='H053' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
set tempI2=0
set sk=0
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_YaeE.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Yae_E_Effect.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
set tempI3=0
loop
exitwhen tempI2==10
set tempI2=tempI2+1
set c=LoadUnitHandle(udg_Hash,p,$684182B8+tempI2)
if c !=null and IsUnitInRange(u,c,700.00)then
set tempI3=tempI3+1
call BuffCall(u,'B008',6,false,false)
call UnitAddAbility(c,'A007')
call EXSetAbilityDataReal(EXGetUnitAbility(c,'A007'),1,108,(LoadInteger(udg_Hashtable,p,$6074AEF9)*0.08))
call IncUnitAbilityLevel(c,'A007')
call DecUnitAbilityLevel(c,'A007')
endif
endloop
call StatChangeX(p,tempI3*(LoadInteger(udg_Hashtable,p,$6074AEF9)*4),"공속",6,"H0530")
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set Mana=I2R((GetHeroInt(u,true))*(2+(LoadInteger(udg_Hashtable,p,$6074AEF9)*6)))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,700*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,Mana,2,4,false,1,'H052')
endif
endloop
call EFsettingXY(p,"war3mapImported\\@EF_hero_sven_n3s_w_caster.mdl",0,tempX,tempY,0.9*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_skill_buwenyineng.mdl",0,tempX,tempY,2.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_tx_purplezhenji.mdl",0,tempX,tempY,3*Skrange[p],270,1,0,0,0)
call DestroyTimer(t)
endif
if sk=='H054' then
set Mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1200 then
set tempX=(GetUnitX(u)+(((1200)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((1200)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveReal(udg_Hash,GetHandleId(t),$516DDC94,s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)*0.1)
call TimerStart(t,0.0,false,function YaeR)
set MultyGroup[p+10]=CreateGroup()
call Shacull(p)
endif
if sk=='H055' then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=4500 then
set tempX=(GetUnitX(u)+(((550)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((550)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,c)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveReal(udg_Hash,GetHandleId(t),$132FA1F5,0)
call TimerStart(t,0.0,false,function YaeT)
call Shacull(p)
endif
if sk=='H051' or sk=='H052' or sk=='H053' or sk=='H054' or sk=='H055' then
call StatChangeX(p,100,"공속",3,"H0500")
endif
call s__party_deallocate((g))
set u=null
set t=null
set c=null
endfunction
function YaeST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
local timer t=CreateTimer()
set ChSkillD[p]='H050'
set ChSkillQ[p]='H051'
set ChSkillW[p]='H052'
set ChSkillE[p]='H053'
set ChSkillR[p]='H054'
set ChSkillT[p]='H055'
set Range[p]=1000
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,'H056')
call SetPlayerAbilityAvailable(Player(p-1),'H056',false)
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
call SaveReal(Hash_Stat,p,$F3FDA8C9,0.10)
call TimerStart(udg_infoRe[p],0.0,false,null)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_YaeQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_YaeW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_YaeE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_YaeR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_YaeT.blp",0)
endif
set STRup[p]=10
set AGIup[p]=3
set INTup[p]=8
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,90)
call SaveReal(udg_Hashtable,p,$43C91172,0.3)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.85)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$9B58470C,75)
call SaveReal(udg_Hashtable,p,$88E0F85F,50)
call SaveReal(udg_Hashtable,p,$E755DDB8,75)
call SaveReal(udg_Hashtable,p,$ABD3E955,175)
call SaveReal(udg_Hashtable,p,$A2229E00,200)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,150)
call SaveReal(udg_Hashtable,p,$C3EA9E83,650)
call SaveReal(udg_Hashtable,p,$A8D71652,400)
call SaveReal(udg_Hashtable,p,$127510D2,2750)
call SaveReal(udg_Hashtable,p,$B491D29B,1500)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$B3DC7A0B,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$E6BB3831,true)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetAbsolutePoint(DzFrameFindByName("Stack_Mini_Icon",0),JN_FRAMEPOINT_CENTER,0.6472,0.016)
call DzFrameShow(DzFrameFindByName("Stack_Mini_Icon",0),true)
endif
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_YaeF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc죄를 삼키는 여우령")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"스킬 사용후 내 공격속도가 증가합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00공격속도 증가 지속시간|cffffa500 : 3초\n|cff00ff00공격속도 증가량|cffffa500 : 100%\n|cff00ff00특수|cffffa500 : 번개 속성 피해를 입힐경우 전투 지속중 번개 속성 피해량이 1% 증가한다. ( 최대 10% )")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function YaeSkill)
set trg=CreateTrigger()
call TriggerRegisterTimerExpireEvent(trg,t)
call TriggerAddAction(trg,function YaeQstack)
set trg=CreateTrigger()
call TriggerRegisterPlayerEvent(trg,Player(p-1),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(trg,function YaeQstackESC)
call SaveInteger(udg_Hash,GetHandleId(t),$39222DC9,p)
call SaveInteger(udg_Hash,p,$794B8D32,0)
call SaveReal(udg_Hash,p,$782D439E,0)
call TimerStart(t,0.1,false,function YaeQstack)
call SaveInteger(udg_Hashtable,p,$5EFF7683,5)
call YaeTT(p)
set u=null
set trg=null
set t=null
endfunction
function YoumuTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer Agi=GetHeroAgi(u,true)
local integer Qdmg=R2I(Agi*(3+(LoadInteger(udg_Hashtable,p,$FAFE5485)*4.5)))
local integer Wdmg=Agi*(6+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6))
local integer Edmg=Agi*(4+(LoadInteger(udg_Hashtable,p,$6074AEF9)*5))
local integer Rdmg1=R2I(Agi*((LoadInteger(udg_Hashtable,p,$BB70E228)*13.5)))
local integer Rdmg2=Agi*(6+(LoadInteger(udg_Hashtable,p,$BB70E228)*11))
local integer Rdmg3=Agi*(8+(LoadInteger(udg_Hashtable,p,$BB70E228)*6))
local integer Tdmg=Agi*(75+(LoadInteger(udg_Hashtable,p,$132FA1F5)*50))
local integer tempI
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Qm*Kirie[p])
set Wdmg=Wdmg+R2I(Wm*Kirie[p])
set Edmg=Edmg+R2I(Em*Kirie[p])
set Rdmg1=Rdmg1+R2I(Rm*Kirie[p])
set Rdmg2=Rdmg2+R2I(Rm*Kirie[p])
set Rdmg3=Rdmg3+R2I(Rm*Kirie[p])
set Tdmg=Tdmg+R2I(Tm*Kirie[p])
endif
if LoadInteger(udg_Hashtable,p,$A8D71652)>=1 and not LoadBoolean(udg_Hash,p,$E92E03F3)then
call SaveBoolean(udg_Hash,p,$E92E03F3,true)
call UnitAddAbility(u,'H105')
call UnitAddAbility(u,'H106')
call UnitAddAbility(u,'H107')
call SetPlayerAbilityAvailable(GetOwningPlayer(u),'H105',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),'H106',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),'H107',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),ChSkillR[p],true)
endif
if LoadBoolean(udg_Hash,p,$E4044307)then
call EXSetAbilityString('H101',3,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n대상의 앞으로 이동해 대상을 벱니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(R2I(Qdmg*1.5))+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 800\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(3*ct[p]))+"초\n|cffFF0000EX|cffffa500 : 피해량이 50% 상승하고 최대사거리가 800이 된다.")
else
call EXSetAbilityString('H101',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n대상의 앞으로 이동해 대상을 벱니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 350\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(3*ct[p]))+"초")
endif
call EXSetAbilityString('H102',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n지점으로 돌진해서 지점의 모든 적들을 베어가른다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 1200\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(9*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H102')+"/"+R2S(500*Skrange[p]))
call EXSetAbilityString('H103',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n사용 즉시 발도해서 주변을 빠르게 베어가른다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(5*ct[p]))+"초")
call EXSetAbilityString('H105',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n대상의 뒤로 넘어가며 대상을 베고 지나가는 궤적의 적들에게도 피해를 입힙니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg1)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 1200\n|cff00ff00범위|cffffa500 : "+I2S(R2I(450*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(18*ct[p]))+"초")
call EXSetAbilityString('H106',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n대상 지점을 내리찍어 범위내 적들에게 피해를 입힙니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 1200\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(15*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H106')+"/"+R2S(500*Skrange[p]))
call EXSetAbilityString('H107',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n무적상태가 되며 주변 적들을 마구잡이로 베어가릅니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00연속베기 데미지|cffffa500 : "+I2S(Rdmg3)+"\n|cff00ff00결정타 데미지|cffffa500 : "+I2S(Agi*5)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00범위|cffffa500 : "+I2S(R2I(800*Skrange[p]))+"\n|cff00ff00특수|cffffa500 : 사용중 무적을 유지합니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(21*ct[p]))+"초")
call EXSetAbilityString('H108',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n사용시 무적 상태가 되고 대상을 발도해서 베어가르게됩니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : 650\n|cff00ff00특수|cffffa500 : 사용중 무적을 유지합니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(80*ct[p]))+"초")
set u=null
endfunction
function YoumuEX takes integer p returns nothing
call SaveBoolean(udg_Hash,p,$E4044307,true)
call YoumuTT(p)
call SetUnitAbilityLevel(Charcter[p],'H101',3)
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Ex_Bgm.mp3"),(null),(137),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Ex_Get.mp3"),(null),(137),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call ProduTime(65,4)
endif
call SetPlayerName(Player(8),"|cff66cdaa콘파쿠 요우무 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"당신의 망설임 , 끊어내겠습니다.")
call EXSetAbilityString('H100',1,ABILITY_DATA_UBERTIP,"대소반사위성참을 제외한 스킬을 사용할때 스택이 1 쌓이며 스택이 3 중첩된 상태로 스킬을 사용시 다음 스킬을 분신이 생성되 함께 사용합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00데미지|cffffa500 : 해당 스킬의 60%\n|cff00ff00특수|cffffa500 : 효과가 발동했을때 스킬은 마나를 소모하지않는다.\n|cffFF0000EX|cffffa500 : 피해량이 60%로 증가한다.")
endfunction
function YoumuDremoveT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$9CAB28A8)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
call EFsettingXY(p,"Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageDeathCaster.mdl",0,GetUnitX(u),GetUnitY(u),2,270,1,0,0,0)
call imagedummySET(p,u,".mdx")
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function YoumuDremove takes unit u returns nothing
local timer t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),$9CAB28A8,u)
call TimerStart(t,1.5,false,function YoumuDremoveT)
set t=null
set u=null
endfunction
function YoumuOrderT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$9CAB28A8)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$580C1005)
local integer a=LoadInteger(udg_Hash,GetHandleId(t),$7444CB5D)
local string l__str=LoadStr(udg_Hash,GetHandleId(t),$7444CB5D)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$9AE48B03)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8716C44D)
if a==1 then
call IssueTargetOrder(u,l__str,tar)
elseif a==2 then
call IssuePointOrder(u,l__str,tempX,tempY)
elseif a==3 then
call IssueImmediateOrder(u,l__str)
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
set tar=null
endfunction
function YoumuOrder takes unit u,unit tar,integer a,string ordername returns nothing
local timer t=CreateTimer()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$9CAB28A8,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$580C1005,tar)
call SaveReal(udg_Hash,GetHandleId(t),$9AE48B03,GetUnitX(tar))
call SaveReal(udg_Hash,GetHandleId(t),$8716C44D,GetUnitY(tar))
call SaveInteger(udg_Hash,GetHandleId(t),$7444CB5D,a)
call SaveStr(udg_Hash,GetHandleId(t),$7444CB5D,ordername)
call imagedummySET(p,u,Model[p])
call UnitResetCooldown(u)
if a==1 then
call TimerStart(t,0.01,false,function YoumuOrderT)
else
call TimerStart(t,0.3,false,function YoumuOrderT)
endif
set t=null
set u=null
set tar=null
set ordername=null
endfunction
function YoumuFreset takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=Youmu
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer tempI
local integer tempI3
set tempI=LoadInteger(udg_Hashtable,p,$D97208B6)
if tempI>=90 then
set tempI3=LoadInteger(Hash_Stat,p,$5FFC130D)
call SaveInteger(Hash_Stat,p,$5FFC130D,tempI3-20)
call StatUP(p,-10,"피감")
set tempI3=LoadInteger(Hash_Stat,p,$B7E7C8AD)
call SaveInteger(Hash_Stat,p,$B7E7C8AD,tempI3-20)
else
set tempI3=LoadInteger(Hash_Stat,p,$B7E7C8AD)
call SaveInteger(Hash_Stat,p,$B7E7C8AD,tempI3-(tempI*2))
endif
call TimerStart(udg_infoRe[p],0.01,false,null)
call SaveInteger(udg_Hashtable,p,$D97208B6,0)
set u=null
set t=null
endfunction
function YoumuQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local real tempX
local real tempY
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real dmg
local integer tempI
local integer tempI2
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer g=s__party_create()
set tempI=GetRandomInt(1,3)
set tempI2=GetRandomInt(1,2)
if(tempI==1)then
if(tempI2==1)then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Voice_Q_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_Q_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
elseif(tempI==2)then
if(tempI2==1)then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Voice_Q_2.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_Q_2.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
elseif(tempI==3)then
if(tempI2==1)then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Voice_Q_3.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_Q_3.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
call SetUnitAnimationByIndex(u,10)
set tempX=GetUnitX(tar)-(((200)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)-(((200)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call SetUnitFacing(u,angle)
call EXSetUnitFacing(u,angle)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",2,GetUnitX(tar),GetUnitY(tar),2,angle,1.25,0,0,0)
set tempX=GetUnitX(tar)-(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)-(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX,tempY,6.5,angle+10,2.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX,tempY,6.5,angle+10,2.5,0,0,50)
set dmg=GetHeroAgi(Charcter[p],true)*(3+(LoadInteger(udg_Hashtable,p,$FAFE5485))*4.5)
if LoadBoolean(udg_Hash,p,$E4044307)then
set dmg=dmg*1.5
endif
if u==Charcter[p]then
call Damage(Charcter[p],tar,dmg,1,0,false,1,'H101')
else
call Damage(Charcter[p],tar,dmg,1,0,false,LoadReal(udg_Hashtable,p,$CB3F8F61),'H101')
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call s__party_deallocate((g))
set u=null
set tar=null
set t=null
endfunction
function YoumuW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c
local real tempX
local real tempY
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local real dmg
local integer tempI
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
set tempX=GetUnitX(u)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))>=101 and IsPointPathableALL(tempX,tempY)and stage<=15 then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
elseif s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))<=100 or stage>=16 then
call Animate(u,13)
set tempX=GetUnitX(u)+(((300)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set tempI=0
loop
exitwhen IsPointPathableALL(tempX,tempY)
set tempX=GetUnitX(u)+(((300-tempI)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300-tempI)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set tempI=tempI+100
endloop
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call SetUnitFacing(u,angle)
call EXSetUnitFacing(u,angle)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_W_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
set tempX=GetUnitX(u)+(((-150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Akiha Claw sakura fall.mdx",2,tempX,tempY,4.5,angle,1.25,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",2,tempX,tempY,3*Skrange[p],angle,1.25,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX,tempY,6.5,angle,2.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX,tempY,6.5,angle,2.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF13.mdl",0,tempX,tempY,1.75*Skrange[p],angle,1.25,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF3.mdl",0,tempX,tempY,1.75*Skrange[p],angle,1.25,0,0,0)
set dmg=GetHeroAgi(Charcter[p],true)*(6+(LoadInteger(udg_Hashtable,p,$457BCFC0))*6)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if u==Charcter[p]then
call Damage(Charcter[p],c,dmg,1,0,false,1,'H102')
else
call Damage(Charcter[p],c,dmg,1,0,false,LoadReal(udg_Hashtable,p,$CB3F8F61),'H102')
endif
endif
endloop
if u !=Charcter[p]then
call YoumuDremove(u)
else
call RemoveShacull(p)
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call RemoveUnit(tar)
endif
call TimerStart(t,0.02,true,function YoumuW)
call s__party_deallocate((g))
set u=null
set tar=null
set c=null
set t=null
endfunction
function YoumuR1 takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local unit c
local real tempX
local real tempY
local real tempX2
local real tempY2
local real angle=s__Angle_PBP(GetUnitX(tar),GetUnitY(tar),GetUnitX(u),GetUnitY(u))
local real dmg
local real tempR1=LoadReal(udg_Hash,GetHandleId(t),$EFA0E201)
local real tempR2=LoadReal(udg_Hash,GetHandleId(t),$1E5F3BA0)
local real tempR3=LoadReal(udg_Hash,GetHandleId(t),$86138D5D)
local integer tempI
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call SetUnitAnimationByIndex(u,15)
call SetUnitFacing(u,angle)
call EXSetUnitFacing(u,angle)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_R1_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call TimerStart(t,0.00,false,function YoumuR1)
elseif stage==1 then
set tempX=GetUnitX(tar)+(((600)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((600)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call EFsettingXY(p,"war3mapImported\\@EF_CastEffect_Pink.mdx",0.1,tempX,tempY,4,0,1,0,0,-150)
call TimerStart(t,0.75,false,function YoumuR1)
elseif stage==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_R1_2.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call TimerStart(t,0.05,false,function YoumuR1)
elseif stage==3 then
call SetUnitAnimationByIndex(u,16)
set tempX=GetUnitX(tar)-(((800)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)-(((800)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set tempI=0
loop
exitwhen IsPointPathableALL(tempX,tempY)
set tempX=GetUnitX(tar)-(((800-tempI)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)-(((800-tempI)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set tempI=tempI+100
endloop
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call EFsettingXY(p,"war3mapImported\\@EF_Akiha Claw sakura fall.mdx",2,GetUnitX(tar),GetUnitY(tar),5,angle,1,0,0,100)
call TimerStart(t,0.00,false,function YoumuR1)
elseif stage==4 then
call SaveReal(udg_Hash,GetHandleId(t),$EFA0E201,120)
call SaveReal(udg_Hash,GetHandleId(t),$1E5F3BA0,240)
call SaveReal(udg_Hash,GetHandleId(t),$86138D5D,360)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_R1_3.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call TimerStart(t,0.15,false,function YoumuR1)
elseif stage>=5 and stage<=10 then
if GetRandomInt(1,2)==1 then
set tempR1=tempR1+225
set tempR2=tempR2+225
set tempR3=tempR3+225
else
set tempR1=tempR1+135
set tempR2=tempR2+135
set tempR3=tempR3+135
endif
call SaveReal(udg_Hash,GetHandleId(t),$EFA0E201,tempR1)
call SaveReal(udg_Hash,GetHandleId(t),$1E5F3BA0,tempR2)
call SaveReal(udg_Hash,GetHandleId(t),$86138D5D,tempR3)
set tempI=GetRandomInt(1,2)
set tempX=GetUnitX(tar)+((((-800+((stage-4)*200)))*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+((((-800+((stage-4)*200)))*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set dmg=GetHeroAgi(Charcter[p],true)*(LoadInteger(udg_Hashtable,p,$BB70E228)*13.5)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,450*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if u==Charcter[p]then
if CheckPlayerGroup(c)and not IsUnitInGroup(c,MultyGroup[p])then
call Damage(Charcter[p],c,dmg,1,0,false,1,'H104')
call GroupAddUnit(MultyGroup[p],c)
endif
else
if CheckPlayerGroup(c)and not IsUnitInGroup(c,MultyGroup[p+10])then
call Damage(Charcter[p],c,dmg,1,0,false,LoadReal(udg_Hashtable,p,$CB3F8F61),'H104')
call GroupAddUnit(MultyGroup[p+10],c)
endif
endif
endloop
set tempX2=tempX+(((200)*1.0)*Cos(((tempR1)*1.0)*bj_DEGTORAD))
set tempY2=tempY+(((200)*1.0)*Sin(((tempR1)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",2,tempX2,tempY2,1.5*Skrange[p],s__Angle_PBP(tempX,tempY,tempX2,tempY2),1.5,0,0,100)
if tempI==1 then
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX2,tempY2,7*Skrange[p],s__Angle_PBP(tempX,tempY,tempX2,tempY2)-180,1.5,0,0,50)
else
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX2,tempY2,7*Skrange[p],s__Angle_PBP(tempX,tempY,tempX2,tempY2),1.5,0,0,50)
endif
set tempX2=tempX+(((200)*1.0)*Cos(((tempR2)*1.0)*bj_DEGTORAD))
set tempY2=tempY+(((200)*1.0)*Sin(((tempR2)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",2,tempX2,tempY2,1.5*Skrange[p],s__Angle_PBP(tempX,tempY,tempX2,tempY2),1.5,0,0,150)
if tempI==1 then
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX2,tempY2,7*Skrange[p],s__Angle_PBP(tempX,tempY,tempX2,tempY2)-200,1.5,0,0,50)
else
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX2,tempY2,7*Skrange[p],s__Angle_PBP(tempX,tempY,tempX2,tempY2)+20,1.5,0,0,50)
endif
set tempX2=tempX+(((200)*1.0)*Cos(((tempR3)*1.0)*bj_DEGTORAD))
set tempY2=tempY+(((200)*1.0)*Sin(((tempR3)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",2,tempX2,tempY2,1.5*Skrange[p],s__Angle_PBP(tempX,tempY,tempX2,tempY2),1.5,0,0,200)
if tempI==1 then
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX2,tempY2,7*Skrange[p],s__Angle_PBP(tempX,tempY,tempX2,tempY2)-220,1.5,0,0,50)
else
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX2,tempY2,7*Skrange[p],s__Angle_PBP(tempX,tempY,tempX2,tempY2)+40,1.5,0,0,50)
endif
if stage==8 then
call EFsettingXY(p,"war3mapImported\\@EF_[Spell]Swordlight_Pink1.mdl",0,GetUnitX(tar),GetUnitY(tar),5,270,1,0,0,-100)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Pink_Sniper_T_Misslie2.mdl",0,GetUnitX(tar),GetUnitY(tar),5,270,1,0,0,-0)
endif
call TimerStart(t,0.03,false,function YoumuR1)
elseif stage==11 then
call TimerStart(t,0.1,false,function YoumuR1)
elseif stage==12 then
if u==Charcter[p]then
call GroupClear(MultyGroup[p])
call DestroyGroup(MultyGroup[p])
call RemoveShacull(p)
else
call GroupClear(MultyGroup[p+10])
call DestroyGroup(MultyGroup[p+10])
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set u=null
set tar=null
set c=null
set t=null
endfunction
function YoumuR2 takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local unit c
local real tempX
local real tempY
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local real dmg
local integer tempI
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$23E22F84)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call SetUnitAnimationByIndex(u,9)
set ef=AddSpecialEffectTarget("war3mapImported\\@EF_cast_pink.mdx",u,"hand right")
call SaveEffectHandle(udg_Hash,GetHandleId(t),$23E22F84,ef)
call SetUnitFacing(u,angle)
call EXSetUnitFacing(u,angle)
call TimerStart(t,0.1,false,function YoumuR2)
elseif stage==1 then
call SetUnitFlyHeight(u,1600,0)
call EFsettingU(p,"war3mapImported\\@EF_PinkRibbon.mdx",0.2,u,"hand right")
call EFsettingU(p,"war3mapImported\\@EF_PinkRibbon.mdx",0.2,u,"hand left")
call EFsettingU(p,"war3mapImported\\@EF_PinkRibbon.mdx",0.2,u,"head")
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_Blink.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call TimerStart(t,LoadReal(udg_Hashtable,p,$CB3F8F61),false,function YoumuR2)
elseif stage==2 then
set tempX=GetUnitX(tar)-(((250)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)-(((250)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call SetUnitFlyHeight(u,0,70000)
call EFsettingXY(p,"war3mapImported\\@EF_pink-guangzhu-special.mdx",0,GetUnitX(tar),GetUnitY(tar),2.5*Skrange[p],angle,3,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_SakuraExplosion.mdx",0,GetUnitX(tar),GetUnitY(tar),10*Skrange[p],angle,2,0,0,50)
call DestroyEffect(ef)
set dmg=GetHeroAgi(Charcter[p],true)*(6+(LoadInteger(udg_Hashtable,p,$BB70E228))*11)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if u==Charcter[p]then
call Damage(Charcter[p],c,dmg,1,0,false,1,'H104')
else
call Damage(Charcter[p],c,dmg,1,0,false,LoadReal(udg_Hashtable,p,$CB3F8F61),'H104')
endif
endif
endloop
call TimerStart(t,0.05,false,function YoumuR2)
elseif stage==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_R2_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
if u !=Charcter[p]then
call YoumuDremove(u)
else
call RemoveShacull(p)
endif
call RemoveUnit(tar)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set u=null
set tar=null
set c=null
set t=null
set ef=null
endfunction
function YoumuR3 takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local unit c
local real tempX
local real tempY
local real tempX2
local real tempY2
local real tempX3
local real tempY3
local real angle
local real tempR1
local real tempR2
local real tempR3
local real dmg
local integer tempI=0
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$23E22F84)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call Mujuk(p,u)
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Voice_R3_Start.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call TimerStart(t,0.2,false,function YoumuR3)
elseif stage==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_R3_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
set angle=GetRandomReal(0,360.00)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$1E5F3BA0,angle+45)
call SaveReal(udg_Hash,GetHandleId(t),$86138D5D,angle+90)
set tempX=GetUnitX(tar)+(((400)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((400)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
set tempX=GetUnitX(tar)+(((400)*1.0)*Cos(((angle+45)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((400)*1.0)*Sin(((angle+45)*1.0)*bj_DEGTORAD))
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle+45)
call imagedummySET(p,c,Model[p])
call SetUnitVertexColor(c,255,255,255,0)
call SetUnitScale(c,2,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$76501D04,c)
call EFsettingU(p,"war3mapImported\\@EF_PinkRibbon.mdx",1,c,"hand right")
call EFsettingU(p,"war3mapImported\\@EF_PinkRibbon.mdx",1,c,"hand left")
call EFsettingU(p,"war3mapImported\\@EF_PinkRibbon.mdx",1,c,"head")
set tempX=GetUnitX(tar)+(((400)*1.0)*Cos(((angle+90)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((400)*1.0)*Sin(((angle+90)*1.0)*bj_DEGTORAD))
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle+90)
call imagedummySET(p,c,Model[p])
call SetUnitVertexColor(c,255,255,255,0)
call SetUnitScale(c,2,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$48DFB73D,c)
call EFsettingU(p,"war3mapImported\\@EF_PinkRibbon.mdx",1,c,"hand right")
call EFsettingU(p,"war3mapImported\\@EF_PinkRibbon.mdx",1,c,"hand left")
call EFsettingU(p,"war3mapImported\\@EF_PinkRibbon.mdx",1,c,"head")
call EFsettingU(p,"war3mapImported\\@EF_PinkRibbon.mdx",1,u,"hand right")
call EFsettingU(p,"war3mapImported\\@EF_PinkRibbon.mdx",1,u,"hand left")
call EFsettingU(p,"war3mapImported\\@EF_PinkRibbon.mdx",1,u,"head")
call TimerStart(t,0.0,false,function YoumuR3)
elseif stage>=2 and stage<=8 then
loop
exitwhen tempI>3
set angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)+225
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$1E5F3BA0)+225
set tempR3=LoadReal(udg_Hash,GetHandleId(t),$86138D5D)+225
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$1E5F3BA0,tempR2)
call SaveReal(udg_Hash,GetHandleId(t),$86138D5D,tempR3)
set tempX=GetUnitX(tar)+(((600)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((600)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set tempX2=GetUnitX(tar)+(((600)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(tar)+(((600)*1.0)*Sin(((angle-225)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Akiha Claw sakura fall.mdx",2,tempX2,tempY2,2.5,angle,1.5,0,0,100)
set tempX=GetUnitX(tar)+(((600)*1.0)*Cos(((tempR2)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((600)*1.0)*Sin(((tempR2)*1.0)*bj_DEGTORAD))
set tempX2=GetUnitX(tar)+(((600)*1.0)*Cos(((tempR2)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(tar)+(((600)*1.0)*Sin(((tempR2-225)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Akiha Claw sakura fall.mdx",2,tempX2,tempY2,2.5,tempR2,1.5,0,0,100)
set tempX=GetUnitX(tar)+(((600)*1.0)*Cos(((tempR3)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((600)*1.0)*Sin(((tempR3)*1.0)*bj_DEGTORAD))
set tempX2=GetUnitX(tar)+(((600)*1.0)*Cos(((tempR3)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(tar)+(((600)*1.0)*Sin(((tempR3-225)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Akiha Claw sakura fall.mdx",2,tempX2,tempY2,2.5,tempR3,1.5,0,0,100)
set tempI=tempI+1
endloop
call SetUnitAnimationByIndex(u,13)
set angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)+265
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$1E5F3BA0)+265
set tempR3=LoadReal(udg_Hash,GetHandleId(t),$86138D5D)+265
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$1E5F3BA0,tempR2)
call SaveReal(udg_Hash,GetHandleId(t),$86138D5D,tempR3)
set tempX=GetUnitX(tar)+(((800)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((800)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$76501D04)
set tempX2=GetUnitX(tar)+(((800)*1.0)*Cos(((tempR2)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(tar)+(((800)*1.0)*Sin(((tempR2)*1.0)*bj_DEGTORAD))
call SetUnitAnimationByIndex(c,13)
call SetUnitX(c,tempX2)
call SetUnitY(c,tempY2)
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$48DFB73D)
set tempX3=GetUnitX(tar)+(((800)*1.0)*Cos(((tempR3)*1.0)*bj_DEGTORAD))
set tempY3=GetUnitY(tar)+(((800)*1.0)*Sin(((tempR3)*1.0)*bj_DEGTORAD))
call SetUnitAnimationByIndex(c,13)
call SetUnitX(c,tempX3)
call SetUnitY(c,tempY3)
if GetRandomInt(1,2)==1 then
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",2,GetUnitX(tar),GetUnitY(tar),3,angle-180,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",2,GetUnitX(tar),GetUnitY(tar),3,tempR2-180,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",2,GetUnitX(tar),GetUnitY(tar),3,tempR3-180,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX,tempY,8,angle-170,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX2,tempY2,8,tempR2-170,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX3,tempY3,8,tempR3-170,1.5,0,0,50)
else
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",2,GetUnitX(tar),GetUnitY(tar),3,angle,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",2,GetUnitX(tar),GetUnitY(tar),3,tempR2,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",2,GetUnitX(tar),GetUnitY(tar),3,tempR3,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX,tempY,12,angle+10,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX2,tempY2,12,tempR2+10,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX3,tempY3,12,tempR3+10,1.5,0,0,50)
endif
set dmg=GetHeroAgi(Charcter[p],true)*(8+(LoadInteger(udg_Hashtable,p,$BB70E228))*6)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),800*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if u==Charcter[p]then
call Damage(Charcter[p],c,dmg,1,0,false,0.143,'H104')
else
call Damage(Charcter[p],c,dmg,1,0,false,0.0572,'H104')
endif
endif
endloop
call TimerStart(t,0.15,false,function YoumuR3)
elseif stage==9 then
set angle=120
set tempR2=240
set tempR3=360
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$1E5F3BA0,tempR2)
call SaveReal(udg_Hash,GetHandleId(t),$86138D5D,tempR3)
call s__TrigVariables_SetlocationAutoRemove(GlobalTV,0,GetUnitLoc(u))
call s__TrigVariables_SetlocationAutoRemove(GlobalTV,1,GetUnitLoc(tar))
call SetUnitAnimationByIndex(u,15)
call EFsettingU(p,"war3mapImported\\@EF_cast_pink.mdx",1,u,"hand right")
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$76501D04)
call SetUnitAnimationByIndex(c,15)
call EFsettingU(p,"war3mapImported\\@EF_cast_pink.mdx",1,c,"hand right")
call invisible(c,50.00,100.00,0.20,0.02)
call SetUnitFacing(c,s__Angle_PBP(GetUnitX(c),GetUnitY(c),GetUnitX(tar),GetUnitY(tar)))
call EXSetUnitFacing(c,s__Angle_PBP(GetUnitX(c),GetUnitY(c),GetUnitX(tar),GetUnitY(tar)))
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$48DFB73D)
call SetUnitAnimationByIndex(c,15)
call EFsettingU(p,"war3mapImported\\@EF_cast_pink.mdx",1,c,"hand right")
call invisible(c,50.00,100.00,0.20,0.02)
call SetUnitFacing(c,s__Angle_PBP(GetUnitX(c),GetUnitY(c),GetUnitX(tar),GetUnitY(tar)))
call EXSetUnitFacing(c,s__Angle_PBP(GetUnitX(c),GetUnitY(c),GetUnitX(tar),GetUnitY(tar)))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_R3_2.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call SetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))
call EXSetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))
call TimerStart(t,0.3,false,function YoumuR3)
elseif stage==10 then
call EFsettingXY(p,"war3mapImported\\@EF_Effect_Pink_Boom.mdx",2,GetUnitX(u),GetUnitY(u),10,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)),1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_CastEffect_Pink.mdx",2,GetUnitX(u),GetUnitY(u),6,270,1.5,0,0,-300)
call TimerStart(t,LoadReal(udg_Hashtable,p,$CB3F8F61),false,function YoumuR3)
elseif stage==11 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Voice_R3_End.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call SetUnitAnimationByIndex(u,16)
set tempX=GetUnitX(tar)+(((800)*1.0)*Cos(((s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((800)*1.0)*Sin(((s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))*1.0)*bj_DEGTORAD))
set tempI=0
loop
exitwhen IsPointPathableALL(tempX,tempY)
set tempX=GetUnitX(tar)+(((800-tempI)*1.0)*Cos(((s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((800-tempI)*1.0)*Sin(((s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))*1.0)*bj_DEGTORAD))
set tempI=tempI+100
endloop
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call EFsettingXY(p,"war3mapImported\\@EF_Akiha Claw sakura fall.mdx",2,GetUnitX(tar),GetUnitY(tar),5,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)),1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",2,GetUnitX(tar),GetUnitY(tar),3,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))-30,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",2,GetUnitX(tar),GetUnitY(tar),3,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))+45,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,GetUnitX(tar),GetUnitY(tar),10,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)),1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,GetUnitX(tar),GetUnitY(tar),14,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)),2,0,0,50)
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$76501D04)
call RemoveUnit(c)
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$48DFB73D)
call RemoveUnit(c)
call EFsettingXY(p,"war3mapImported\\@EF_SakuraExplosion.mdx",2,GetUnitX(tar),GetUnitY(tar),5*Skrange[p],270,2,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_pink-guangzhu-special.mdx",0,GetUnitX(tar),GetUnitY(tar),3*Skrange[p],270,2,0,0,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_G_4.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
set dmg=GetHeroAgi(Charcter[p],true)*5
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),800*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if u==Charcter[p]then
call Damage(Charcter[p],c,dmg,1,0,false,1,'H104')
else
call Damage(Charcter[p],c,dmg,1,0,false,LoadReal(udg_Hashtable,p,$CB3F8F61),'H104')
endif
endif
endloop
call TimerStart(t,0.65,false,function YoumuR3)
elseif stage==12 then
if u !=Charcter[p]then
call YoumuDremove(u)
else
call RemoveShacull(p)
endif
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call RemoveUnit(tar)
endif
call s__party_deallocate((g))
set u=null
set tar=null
set c=null
set t=null
set ef=null
endfunction
function YoumuT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local unit c
local real tempX
local real tempY
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local real tempR
local real dmg
local integer tempI
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call Mujuk(p,u)
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Voice_G_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_G_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(tar),GetUnitY(tar),270)
call EFsettingU(p,"war3mapImported\\@EF_cfdtz n.mdl",0,c,"origin")
call UnitApplyTimedLife(c,'BHwe',0.03)
call SetUnitScale(c,2,1,1)
call SetUnitVertexColorBJ(c,0.00,0.00,0.00,0.00)
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(tar),GetUnitY(tar),270)
call EFsettingU(p,"war3mapImported\\@EF_cfdtz n.mdl",0,c,"origin")
call UnitApplyTimedLife(c,'BHwe',0.03)
call SetUnitScale(c,3,1,1)
call SetUnitVertexColorBJ(c,0.00,0.00,0.00,0.00)
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(tar),GetUnitY(tar),270)
call EFsettingU(p,"war3mapImported\\@EF_cfdtz n.mdl",0,c,"origin")
call UnitApplyTimedLife(c,'BHwe',0.03)
call SetUnitScale(c,4,1,1)
call SetUnitVertexColorBJ(c,0.00,0.00,0.00,0.00)
call EFsettingXY(p,"war3mapImported\\@EF_CastEffect_Pink.mdx",0,GetUnitX(u),GetUnitY(u),8,270,1.5,0,0,-100)
call EFsettingXY(p,"war3mapImported\\@EF_pink-guangzhu-special.mdx",0,GetUnitX(u),GetUnitY(u),2,270,3,0,0,0)
call TimerStart(t,0.00,false,function YoumuT)
elseif stage==1 then
call SetUnitAnimationByIndex(u,15)
call SetUnitTimeScale(u,1)
call invisible(u,0.00,100.00,1.10,0.02)
call TimerStart(t,0.50,false,function YoumuT)
elseif stage==2 then
call SetUnitFacing(u,angle)
call EXSetUnitFacing(u,angle)
call TimerStart(t,0.30,false,function YoumuT)
elseif stage==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Voice_G_2.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call SetUnitAnimationByIndex(u,9)
call SetUnitTimeScale(u,3.5)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_G_2.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_G_5.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call TimerStart(t,0.30,false,function YoumuT)
elseif stage==4 then
call SetUnitTimeScale(u,1.8)
call visible(u,100.00,0.00,1.50,0.02)
set tempX=GetUnitX(tar)+(((250)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((250)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
set tempX=GetUnitX(tar)-(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)-(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Akiha Claw sakura fall.mdx",0,GetUnitX(tar),GetUnitY(tar),5,angle+90,3,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,GetUnitX(tar),GetUnitY(tar),10,angle,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX,tempY,14,angle,2,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_e_basicstrike_pink.mdx",2,tempX,tempY,18,angle,2,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_R_BY_Wood_Effect_Order_DanGe_LiangYiShi_ZhiSiZhiMoYanZhanJi Blue.mdl",0,GetUnitX(tar),GetUnitY(tar),4,270,0.4,0,0,150)
call EFsettingU(p,"war3mapImported\\@EF_VFX_CrippleTargetPink.mdl",1.9,tar,"origin")
call TimerStart(t,0.70,false,function YoumuT)
elseif stage==5 then
call SetUnitTimeScale(u,0.35)
call TimerStart(t,1.20,false,function YoumuT)
elseif stage==6 then
call SetUnitTimeScale(u,1)
call TimerStart(t,0.10,false,function YoumuT)
elseif stage==7 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_G_3.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_G_4.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call EFsettingXY(p,"war3mapImported\\@EF_pink-guangzhu-special.mdx",0.5,GetUnitX(tar),GetUnitY(tar),4,angle,3.5,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_SakuraExplosion.mdx",0,GetUnitX(tar),GetUnitY(tar),5,angle,2.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SakuraExplosion.mdx",2,GetUnitX(tar),GetUnitY(tar),7,GetRandomReal(0,360),2,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SakuraExplosion.mdx",2,GetUnitX(tar),GetUnitY(tar),7,GetRandomReal(0,360),2,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SakuraExplosion.mdx",2,GetUnitX(tar),GetUnitY(tar),7,GetRandomReal(0,360),2.5,0,0,250)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",0,GetUnitX(tar),GetUnitY(tar),5,angle-30,1.25,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdx",0,GetUnitX(tar),GetUnitY(tar),5,angle+45,1.25,0,0,50)
call SetUnitTimeScale(u,1)
set dmg=GetHeroAgi(u,true)*(75+(LoadInteger(udg_Hashtable,p,$132FA1F5))*50)
if GetUnitState(tar,UNIT_STATE_LIFE)<=(GetUnitState(tar,UNIT_STATE_MAX_LIFE)*0.3)then
set dmg=GetHeroAgi(u,true)*(150+(LoadInteger(udg_Hashtable,p,$132FA1F5))*100)
else
set tempR=GetUnitState(tar,UNIT_STATE_LIFE)/GetUnitState(tar,UNIT_STATE_MAX_LIFE)*100
set tempR=(1+((100-tempR)*0.0142))
set dmg=dmg*tempR
endif
call Damage(u,tar,dmg,1,0,false,1,'H101')
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set u=null
set tar=null
set t=null
set c=null
endfunction
function YoumuSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local unit c
local real tempX=GetSpellTargetX()
local real tempY=GetSpellTargetY()
local real tempX2
local real tempY2
local real mana
local integer tempI=0
local integer tempI2=0
local integer tempI3=0
local real tempR
local real tempR2
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer g=s__party_create()
if GetSpellAbilityId()=='H101' or GetSpellAbilityId()=='H102' or GetSpellAbilityId()=='H103' or GetSpellAbilityId()=='H105' or GetSpellAbilityId()=='H106' or GetSpellAbilityId()=='H107' or GetSpellAbilityId()=='H108' and u==Charcter[p]then
call BuffCall(u,'B015',12,false,false)
set tempI=LoadInteger(udg_Hashtable,p,$D97208B6)+1
if tempI>=10 and tempI<=90 then
call SaveInteger(udg_Hashtable,p,$D97208B6,99)
set tempI3=LoadInteger(Hash_Stat,p,$5FFC130D)
call SaveInteger(Hash_Stat,p,$5FFC130D,tempI3+20)
set tempI3=LoadInteger(Hash_Stat,p,$B7E7C8AD)
call SaveInteger(Hash_Stat,p,$B7E7C8AD,tempI3+2)
call StatUP(p,10,"피감")
call TimerStart(udg_infoRe[p],0.01,false,null)
elseif tempI<=9 then
set tempI3=LoadInteger(Hash_Stat,p,$B7E7C8AD)
call SaveInteger(Hash_Stat,p,$B7E7C8AD,tempI3+2)
call TimerStart(udg_infoRe[p],0.01,false,null)
call SaveInteger(udg_Hashtable,p,$D97208B6,tempI)
endif
call TimerStart(YoumuF,12.00,false,null)
if GetSpellAbilityId()!='H108' then
set tempI2=LoadInteger(udg_Hash,GetHandleId(u),$9CD60476)+1
call SaveInteger(udg_Hash,GetHandleId(u),$9CD60476,tempI2)
if GetLocalPlayer()==Player(p-1)then
if tempI2==1 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack1.blp",0)
endif
if tempI2==2 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack2.blp",0)
endif
if tempI2==3 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack3.blp",0)
endif
endif
if tempI2>=3 then
call BuffCall(u,'B013',0,false,false)
call BuffCall(u,'B014',99999,false,false)
endif
endif
endif
if(GetSpellAbilityId()=='H101')then
if u==Charcter[p]and tempI2<=3 then
set mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-mana))
endif
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))
call TimerStart(t,0.00,false,function YoumuQ)
if LoadInteger(udg_Hashtable,p,$BB70E228)>=1 then
call SetPlayerAbilityAvailable(GetOwningPlayer(u),'H105',true)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),'H106',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),'H107',false)
set ChSkillR[p]='H105'
endif
if tempI2>=4 then
set mana=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
set tempR=GetRandomReal(45,210)
set tempX=(GetUnitX(tar)+(((250)*1.0)*Cos(((mana+tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(tar)+(((250)*1.0)*Sin(((mana+tempR)*1.0)*bj_DEGTORAD)))
set c=LoadUnitHandle(udg_Hash,GetHandleId(u),$EEE4AB5B)
call SetUnitX(c,tempX)
call SetUnitY(c,tempY)
call SetUnitFacing(c,mana)
call UnitAddAbility(c,'H101')
call YoumuOrder(c,tar,1,"ancestralspirit")
call YoumuDremove(c)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
endif
call SaveInteger(udg_Hash,GetHandleId(u),$9CD60476,0)
call BuffCall(u,'B014',0,false,false)
call BuffCall(u,'B013',99999,false,false)
endif
endif
if(GetSpellAbilityId()=='H102')then
if u==Charcter[p]and tempI2<=3 then
set mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-mana))
endif
if u==Charcter[p]then
call Shacull(p)
endif
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
set mana=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)>=1200 then
set tempX=(GetUnitX(u)+(((1200)*1.0)*Cos(((mana)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((1200)*1.0)*Sin(((mana)*1.0)*bj_DEGTORAD)))
endif
set tempR2=s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
set tar=CreateUnit(Player(p-1),'sys9',tempX,tempY,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SetUnitFacing(u,mana)
call EXSetUnitFacing(u,mana)
if u==Charcter[p]then
set tempI=GetRandomInt(1,2)
if(tempI==1)then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Voice_W_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
elseif(tempI==2)then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Voice_W_2.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
endif
call TimerStart(t,0.00,false,function YoumuW)
call Animate(u,17)
if LoadInteger(udg_Hashtable,p,$BB70E228)>=1 then
call SetPlayerAbilityAvailable(GetOwningPlayer(u),'H105',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),'H106',true)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),'H107',false)
set ChSkillR[p]='H106'
endif
if tempI2>=4 then
set mana=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
set tempR=GetRandomReal(45,210)
set tempX2=(tempX+(((tempR2)*1.0)*Cos(((mana+tempR)*1.0)*bj_DEGTORAD)))
set tempY2=(tempY+(((tempR2)*1.0)*Sin(((mana+tempR)*1.0)*bj_DEGTORAD)))
set c=LoadUnitHandle(udg_Hash,GetHandleId(u),$EEE4AB5B)
call SetUnitX(c,tempX2)
call SetUnitY(c,tempY2)
call SetUnitFacing(c,mana)
call UnitAddAbility(c,'H102')
call YoumuOrder(c,tar,2,"avengerform")
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
endif
call SaveInteger(udg_Hash,GetHandleId(u),$9CD60476,0)
call BuffCall(u,'B014',0,false,false)
call BuffCall(u,'B013',99999,false,false)
endif
endif
if(GetSpellAbilityId()=='H103')then
if u==Charcter[p]and tempI2<=3 then
set mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-mana))
endif
call Animate(u,10)
if u==Charcter[p]then
set tempI=GetRandomInt(1,6)
if(tempI==1)then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Voice_E_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
elseif(tempI==2)then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Voice_E_2.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
endif
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_E_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call EFsettingXY(p,"war3mapImported\\@EF_RoundSlashPink.mdx",2,GetUnitX(u),GetUnitY(u),4*Skrange[p],270,2.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_RoundSlashPink.mdx",2,GetUnitX(u),GetUnitY(u),3*Skrange[p],270,2.5,0,0,50)
set mana=GetHeroAgi(u,true)*(4+(LoadInteger(udg_Hashtable,p,$6074AEF9))*4)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,mana,1,0,false,1,'H103')
endif
endloop
if LoadInteger(udg_Hashtable,p,$BB70E228)>=1 then
call SetPlayerAbilityAvailable(GetOwningPlayer(u),'H105',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),'H106',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),'H107',true)
set ChSkillR[p]='H107'
endif
if tempI2>=4 then
set tempR=GetRandomReal(45,210)
set tempX2=(GetUnitX(u)+(((250)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY2=(GetUnitY(u)+(((250)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
set c=LoadUnitHandle(udg_Hash,GetHandleId(u),$EEE4AB5B)
call SetUnitX(c,tempX2)
call SetUnitY(c,tempY2)
call SetUnitFacing(c,270)
call imagedummySET(p,c,Model[p])
call Animate(c,10)
call YoumuDremove(c)
set mana=GetHeroAgi(u,true)*(4+(LoadInteger(udg_Hashtable,p,$6074AEF9))*4)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(c),GetUnitY(c),500*Skrange[p],null)
loop
set tar=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),tar)
exitwhen tar==null
if CheckPlayerGroup(tar)then
call Damage(u,tar,mana,1,0,false,0.6,'H103')
endif
endloop
call EFsettingXY(p,"war3mapImported\\@EF_RoundSlashPink.mdx",2,GetUnitX(c),GetUnitY(c),4*Skrange[p],270,2.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_RoundSlashPink.mdx",2,GetUnitX(c),GetUnitY(c),3*Skrange[p],270,2.5,0,0,50)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
endif
call SaveInteger(udg_Hash,GetHandleId(u),$9CD60476,0)
call BuffCall(u,'B014',0,false,false)
call BuffCall(u,'B013',99999,false,false)
endif
call DestroyTimer(t)
endif
if(GetSpellAbilityId()=='H105')then
if u==Charcter[p]and tempI2<=3 then
set mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-mana))
endif
if u==Charcter[p]then
call Shacull(p)
endif
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call TimerStart(t,0.00,false,function YoumuR1)
if u==Charcter[p]then
set MultyGroup[p]=CreateGroup()
else
set MultyGroup[p+10]=CreateGroup()
endif
if tempI2>=4 then
set mana=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
set tempR=GetRandomReal(45,210)
set tempX=(GetUnitX(tar)+(((600)*1.0)*Cos(((mana+tempR)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(tar)+(((600)*1.0)*Sin(((mana+tempR)*1.0)*bj_DEGTORAD)))
set c=LoadUnitHandle(udg_Hash,GetHandleId(u),$EEE4AB5B)
call SetUnitX(c,tempX)
call SetUnitY(c,tempY)
call UnitAddAbility(c,'H105')
call YoumuDremove(c)
call YoumuOrder(c,tar,1,"attributemodskill")
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
endif
call SaveInteger(udg_Hash,GetHandleId(u),$9CD60476,0)
call BuffCall(u,'B014',0,false,false)
call BuffCall(u,'B013',99999,false,false)
endif
endif
if(GetSpellAbilityId()=='H106')then
if u==Charcter[p]and tempI2<=3 then
set mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-mana))
endif
if u==Charcter[p]then
call Shacull(p)
endif
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
set mana=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)>=1200 then
set tempX=(GetUnitX(u)+(((1200)*1.0)*Cos(((mana)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((1200)*1.0)*Sin(((mana)*1.0)*bj_DEGTORAD)))
endif
set tempR2=s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
set tar=CreateUnit(Player(p-1),'sys9',tempX,tempY,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call TimerStart(t,0.00,false,function YoumuR2)
if tempI2>=4 then
set mana=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
set tempR=GetRandomReal(45,210)
set tempX2=(tempX+(((tempR2)*1.0)*Cos(((mana+tempR)*1.0)*bj_DEGTORAD)))
set tempY2=(tempY+(((tempR2)*1.0)*Sin(((mana+tempR)*1.0)*bj_DEGTORAD)))
set c=LoadUnitHandle(udg_Hash,GetHandleId(u),$EEE4AB5B)
call SetUnitX(c,tempX2)
call SetUnitY(c,tempY2)
call SetUnitFacing(c,mana)
call UnitAddAbility(c,'H106')
call YoumuOrder(c,tar,2,"mounthippogryph")
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
endif
call SaveInteger(udg_Hash,GetHandleId(u),$9CD60476,0)
call BuffCall(u,'B014',0,false,false)
call BuffCall(u,'B013',99999,false,false)
endif
endif
if(GetSpellAbilityId()=='H107')then
if u==Charcter[p]and tempI2<=3 then
set mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-mana))
endif
if u==Charcter[p]then
call Shacull(p)
endif
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
set tar=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call TimerStart(t,0.00,false,function YoumuR3)
if tempI2>=4 then
set tempR=GetRandomReal(45,210)
set tempX2=(GetUnitX(u)+(((250)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD)))
set tempY2=(GetUnitY(u)+(((250)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD)))
set c=LoadUnitHandle(udg_Hash,GetHandleId(u),$EEE4AB5B)
call SetUnitX(c,tempX2)
call SetUnitY(c,tempY2)
call UnitAddAbility(c,'H107')
call YoumuOrder(c,null,3,"auravampiric")
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
endif
call SaveInteger(udg_Hash,GetHandleId(u),$9CD60476,0)
call BuffCall(u,'B014',0,false,false)
call BuffCall(u,'B013',99999,false,false)
endif
endif
if(GetSpellAbilityId()=='H108')then
set mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-mana))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call Shacull(p)
call TimerStart(t,0.00,false,function YoumuT)
endif
call s__party_deallocate((g))
set u=null
set tar=null
set c=null
set t=null
endfunction
function YoumuST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
set ChSkillD[p]='H100'
set ChSkillQ[p]='H101'
set ChSkillW[p]='H102'
set ChSkillE[p]='H103'
set ChSkillR[p]='H104'
set ChSkillT[p]='H108'
set Range[p]=280
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
call UnitAddAbility(u,'Amrf')
call UnitRemoveAbility(u,'Amrf')
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_YoumuQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_YoumuW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_YoumuE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_YoumuR1.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_YoumuT.blp",0)
endif
set STRup[p]=9
set AGIup[p]=7
set INTup[p]=2
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,95)
call SaveReal(udg_Hashtable,p,$43C91172,0.4)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.9)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$CB3F8F61,0.4)
call SaveReal(udg_Hashtable,p,$9B58470C,90)
call SaveReal(udg_Hashtable,p,$88E0F85F,40)
call SaveReal(udg_Hashtable,p,$E755DDB8,150)
call SaveReal(udg_Hashtable,p,$ABD3E955,150)
call SaveReal(udg_Hashtable,p,$A2229E00,150)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,75)
call SaveReal(udg_Hashtable,p,$C3EA9E83,250)
call SaveReal(udg_Hashtable,p,$A8D71652,200)
call SaveReal(udg_Hashtable,p,$127510D2,1200)
call SaveReal(udg_Hashtable,p,$B491D29B,1200)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$5047FE8B,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$FC4D8276,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_YoumuF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc반인반령")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"스킬 사용시 명경지수 스택을 획득하며 최대치를 획득시 민첩이 상승합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00명경지수 지속시간|cffffa500 : 12초\n|cff00ff00명경지수 최대 스택|cffffa500 : 10\n|cff00ff00명경지수 스택당 스킬가속|cffffa500 : 2\n|cff00ff00최대 중첩시 민첩 상승|cffffa500 : 20%\n|cff00ff00최대 중첩시 모든 받는 피해 감소율 증가|cffffa500 : 10%")
set bj_lastCreatedUnit=CreateUnit(Player(p-1),'sys9',0,0,270)
call imagedummySET(p,bj_lastCreatedUnit,".mdx")
call SetUnitVertexColor(bj_lastCreatedUnit,255,255,255,127)
call SetUnitScale(bj_lastCreatedUnit,2,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(u),$EEE4AB5B,bj_lastCreatedUnit)
set Youmu=u
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetAbsolutePoint(DzFrameFindByName("Stack_Mini_Icon",0),JN_FRAMEPOINT_CENTER,0.6905,0.0575)
call DzFrameShow(DzFrameFindByName("Stack_Mini_Icon",0),true)
endif
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function YoumuSkill)
set trg=CreateTrigger()
call TriggerRegisterUnitEvent(trg,bj_lastCreatedUnit,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function YoumuSkill)
set trg=CreateTrigger()
call TriggerRegisterTimerExpireEvent(trg,YoumuF)
call TriggerAddAction(trg,function YoumuFreset)
call SaveInteger(udg_Hashtable,p,$5EFF7683,10)
call BuffCall(u,'B013',99999,false,false)
call YoumuTT(p)
set u=null
set trg=null
endfunction
function BBStoneT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit dummy
local unit c
local integer tempI
local integer tempI2
local real tempR
local real tempX
local real tempY
local unit u=Boss
local real dmg
local integer g=s__party_create()
set tempI=0
loop
exitwhen tempI>=Playint
set tempI=tempI+1
call ND(Player(PP[tempI]-1),0.1,25)
endloop
set tempI=0
loop
exitwhen tempI>=6+difficulty
set tempI=tempI+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$A02BAE3E+tempI)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_hlm-32.mdl",tempX,tempY))
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_hlm-19.mdl",tempX,tempY))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,200,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckBossGroupN(c)then
if IsUnitType(c,UNIT_TYPE_HERO)and not IsUnitInGroup(c,udg_Mujuk)then
set tempI2=LoadInteger(udg_Hash,GetHandleId(c),$5EE1219A)+10
call SaveInteger(udg_Hash,GetHandleId(c),$5EE1219A,tempI2)
endif
set dmg=GetUnitState(u,ConvertUnitState(0x12))+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.05)
call Damage(u,c,dmg,1,0,false,1,0)
endif
endloop
call SetUnitVertexColor(dummy,0,0,0,0)
call RemoveUnit(dummy)
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call s__party_deallocate((g))
set t=null
set dummy=null
set c=null
set u=null
endfunction
function BBStone takes nothing returns nothing
local timer t=CreateTimer()
local unit u=Boss
local unit dummy
local integer tempI=0
local real tempR
local real tempX
local real tempY
set tempI=0
loop
exitwhen tempI>=6+difficulty
set tempI=tempI+1
set tempR=GetRandomReal(0,360)
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
set tempX=tempX+(((SquareRoot(GetRandomReal(0,(1800.00*1800.00))))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=tempY+(((SquareRoot(GetRandomReal(0,(1800.00*1800.00))))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set tempR=GetRandomReal(1,1.3)
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,270)
call SetUnitScale(dummy,2,1,1)
call DzSetUnitModel(dummy,"war3mapImported\\@AOE_AOEIndicator.mdl")
call SaveUnitHandle(udg_Hash,GetHandleId(t),$A02BAE3E+tempI,dummy)
endloop
call TimerStart(t,1,false,function BBStoneT)
set t=null
set u=null
set dummy=null
endfunction
function BBShockwaveT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer tempI
local integer tempI2
local unit dummy
local unit c
local real dmg
local real tempX
local real tempY
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
set tempI=1
loop
exitwhen tempI==10
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$22B8EBA2+tempI)
set tempX=GetUnitX(dummy)+(((60)*1.0)*Cos(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((60)*1.0)*Sin(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,400,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckFBossGroupN(c)and not LoadBoolean(udg_Hash,GetHandleId(c),$3BF39FFC)then
if IsUnitType(c,UNIT_TYPE_HERO)and not IsUnitInGroup(c,udg_Mujuk)then
set tempI2=LoadInteger(udg_Hash,GetHandleId(c),$5EE1219A)+10
call SaveInteger(udg_Hash,GetHandleId(c),$5EE1219A,tempI2)
endif
call SaveBoolean(udg_Hash,GetHandleId(c),$3BF39FFC,true)
set dmg=(GetUnitState(Boss,ConvertUnitState(0x12))*0.9)+(GetUnitState(c,UNIT_STATE_MAX_LIFE)*0.125)
call Damage(Boss,c,dmg,1,0,false,1,0)
endif
endloop
if not IsPointPathableALL(tempX,tempY)then
call RemoveUnit(dummy)
endif
set tempI=tempI+1
endloop
if stage==40 then
set tempI=1
loop
exitwhen tempI==10
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$22B8EBA2+tempI)
call RemoveUnit(dummy)
set tempI=tempI+1
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set c=null
set dummy=null
endfunction
function BBShockwave takes real x,real y returns nothing
local timer t=CreateTimer()
local integer tempI
local integer tempI2
local unit dummy
set tempI=1
loop
exitwhen tempI==10
set x=x+(((50)*1.0)*Cos(((tempI*40)*1.0)*bj_DEGTORAD))
set y=y+(((50)*1.0)*Sin(((tempI*40)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys9',x,y,tempI*40)
call DzSetUnitModel(dummy,"war3mapImported\\@EF_BB_shockwavemissile.mdl")
call SetUnitScale(dummy,3,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$22B8EBA2+tempI,dummy)
set tempI2=0
loop
exitwhen tempI2>=Playint
set tempI2=tempI2+1
call SaveBoolean(udg_Hash,GetHandleId(Charcter[PP[tempI2]]),$3BF39FFC,false)
endloop
set tempI=tempI+1
endloop
call TimerStart(t,0.02,true,function BBShockwaveT)
set t=null
set dummy=null
endfunction
function BBorbT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),1)
local unit c
local real tempX
local real tempY
local real tempX2
local real tempY2
local real tempR
local integer g=s__party_create()
local integer tempI
if not LoadBoolean(udg_Hash,GetHandleId(Boss),$B60A3ED8)then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set tempR=s__Angle_PBP(tempX,tempY,GetRectCenterX(gg_rct_BB_Middle),GetRectCenterY(gg_rct_BB_Middle))
set tempX2=tempX+(((25)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY2=tempY+(((25)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX2)
call SetUnitY(u,tempY2)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,150,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if UnitAlive(u)then
if CheckFBossGroupN(c)and IsUnitType(c,UNIT_TYPE_HERO)then
call KillUnit(u)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_VFX_HITcritverylowBlue.mdl",c,"origin"))
set tempI=LoadInteger(udg_Hash,GetHandleId(c),$1E572114)
if tempI<=100 then
set tempI=tempI+7
call SaveInteger(udg_Hash,GetHandleId(c),$1E572114,tempI)
if tempI>=100 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",c,"origin"))
call UnitAddAbility(c,'A01I')
endif
endif
elseif c==Boss then
call KillUnit(u)
call SetUnitState(c,UNIT_STATE_LIFE,GetUnitState(c,UNIT_STATE_LIFE)+(GetUnitState(c,UNIT_STATE_MAX_LIFE)*0.0005))
endif
endif
endloop
else
call KillUnit(u)
endif
if not UnitAlive(u)then
call RemoveUnit(u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set c=null
set u=null
endfunction
function BBorb takes nothing returns nothing
local timer t=CreateTimer()
local real tempX
local real tempY
local real tempR=GetRandomReal(0,360)
local integer tempI=GetRandomInt(1,3)
local unit c
set tempX=GetRectCenterX(gg_rct_BB_Middle)+(((1700)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetRectCenterY(gg_rct_BB_Middle)+(((1700)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
if tempI==1 then
set c=CreateUnit(Player(11),'sys9',tempX,tempY,270)
call DzSetUnitModel(c,"war3mapImported\\@EF_ball_little_white.mdx")
elseif tempI==2 then
set c=CreateUnit(Player(11),'sys9',tempX,tempY,270)
call DzSetUnitModel(c,"war3mapImported\\@EF_ball_little_white.mdx")
elseif tempI==3 then
set c=CreateUnit(Player(11),'sys9',tempX,tempY,270)
call DzSetUnitModel(c,"war3mapImported\\@EF_ball_little_white.mdx")
endif
call UnitApplyTimedLife(c,'BHwe',3.4)
call SaveUnitHandle(udg_Hash,GetHandleId(t),1,c)
call TimerStart(t,0.05,true,function BBorbT)
set t=null
set c=null
endfunction
function BBattackTT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$2FE0FC0F)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$A44613C6)
if UnitAlive(tar)and not UnitHasBuff(tar,'BNso')then
call IssueTargetOrder(u,"soulburn",tar)
endif
if UnitAlive(u)then
call SetUnitX(u,GetUnitX(tar))
call SetUnitY(u,GetUnitY(tar))
call TimerStart(t,0.04,false,function BBattackTT)
endif
if not UnitAlive(u)or not UnitAlive(tar)or not UnitAlive(Boss)then
call UnitRemoveAbility(tar,'A00O')
call UnitRemoveBuffBJ('BNso',tar)
call RemoveUnit(u)
call BuffCall(tar,'BS02',0,false,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set u=null
set t=null
set tar=null
endfunction
function BBattackT takes unit tar returns nothing
local unit u
local timer t=CreateTimer()
if GetUnitAbilityLevel(tar,'A00O')==0 then
set u=CreateUnit(Player(11),'h004',GetUnitX(tar),GetUnitY(tar),270)
call UnitAddAbility(u,'A01H')
call UnitApplyTimedLife(u,'BHwe',10)
call UnitAddAbility(tar,'A00O')
call BuffCall(tar,'BS02',10,false,false)
if BossAgro==tar then
set BossAgro=null
endif
call IssueTargetOrder(u,"soulburn",tar)
call SetUnitState(u,UNIT_STATE_MAX_LIFE,GetUnitState(LoadUnitHandle(udg_Hash,$944CCEB0,1),UNIT_STATE_MAX_LIFE)*0.035)
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_MAX_LIFE))
call TimerStart(t,0.04,false,function BBattackTT)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$2FE0FC0F,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$A44613C6,tar)
call SetUnitPathing(u,false)
endif
set u=null
set tar=null
set t=null
endfunction
function BBout1 takes nothing returns nothing
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local unit c
local real dmg
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local integer tempI=0
local integer g=s__party_create()
local effect ef
set ef=AddSpecialEffect("war3mapImported\\@EF_BB_DarkPillar.mdl",tempX,tempY)
call EXSetEffectSpeed(ef,3.0)
call DestroyEffect(ef)
set tempI=0
loop
exitwhen tempI==6
set tempI=tempI+1
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempI*60)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempI*60)*1.0)*bj_DEGTORAD))
set ef=AddSpecialEffect("war3mapImported\\@EF_BB2_DarkPillar.mdl",tempX,tempY)
call EXSetEffectSpeed(ef,3.0)
call DestroyEffect(ef)
endloop
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,750,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckFBossGroupN(c)then
if IsUnitType(c,UNIT_TYPE_HERO)then
set tempI=LoadInteger(udg_Hash,GetHandleId(c),$5EE1219A)+60
call SaveInteger(udg_Hash,GetHandleId(c),$5EE1219A,tempI)
endif
if GetUnitAbilityLevel(c,'A00N')==1 then
call PauseUnit(c,false)
call Damage(u,c,999999999,1,0,false,1,0)
else
set dmg=GetUnitState(u,ConvertUnitState(0x12))*6.5+(GetUnitState(c,UNIT_STATE_MAX_LIFE)*0.2)
call Damage(u,c,dmg,1,0,false,1,0)
endif
endif
endloop
call s__party_deallocate((g))
set u=null
set c=null
set ef=null
endfunction
function BBout2 takes nothing returns nothing
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local unit c
local real dmg
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local integer tempI=0
local integer g=s__party_create()
local effect ef
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1200,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckFBossGroupN(c)and not IsUnitInRange(u,c,750)then
if IsUnitType(c,UNIT_TYPE_HERO)then
set tempI=LoadInteger(udg_Hash,GetHandleId(c),$5EE1219A)+60
call SaveInteger(udg_Hash,GetHandleId(c),$5EE1219A,tempI)
endif
if GetUnitAbilityLevel(c,'A00N')==1 then
call PauseUnit(c,false)
call Damage(u,c,999999999,1,0,false,1,0)
else
set dmg=GetUnitState(u,ConvertUnitState(0x12))*6.5+(GetUnitState(c,UNIT_STATE_MAX_LIFE)*0.2)
call Damage(u,c,dmg,1,0,false,1,0)
endif
endif
endloop
set tempI=0
loop
exitwhen tempI==18
set tempI=tempI+1
set tempX=GetUnitX(u)+(((975)*1.0)*Cos(((tempI*20)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((975)*1.0)*Sin(((tempI*20)*1.0)*bj_DEGTORAD))
set ef=AddSpecialEffect("war3mapImported\\@EF_BB2_DarkPillar.mdl",tempX,tempY)
call EXSetEffectSpeed(ef,3.0)
call DestroyEffect(ef)
endloop
call s__party_deallocate((g))
set u=null
set c=null
set ef=null
endfunction
function BBout3 takes nothing returns nothing
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local unit c
local real dmg
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local integer tempI=0
local integer g=s__party_create()
local effect ef
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1900,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckFBossGroupN(c)and not IsUnitInRange(u,c,1200)then
if IsUnitType(c,UNIT_TYPE_HERO)then
set tempI=LoadInteger(udg_Hash,GetHandleId(c),$5EE1219A)+60
call SaveInteger(udg_Hash,GetHandleId(c),$5EE1219A,tempI)
endif
if GetUnitAbilityLevel(c,'A00N')==1 then
call PauseUnit(c,false)
call Damage(u,c,999999999,1,0,false,1,0)
else
set dmg=GetUnitState(u,ConvertUnitState(0x12))*6.5+(GetUnitState(c,UNIT_STATE_MAX_LIFE)*0.2)
call Damage(u,c,dmg,1,0,false,1,0)
endif
endif
endloop
set tempX=GetUnitX(u)+(((1500)*1.0)*Cos(((0)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((1500)*1.0)*Sin(((0)*1.0)*bj_DEGTORAD))
set ef=AddSpecialEffect("war3mapImported\\@EF_BB_DarkPillar.mdl",tempX,tempY)
call EXSetEffectSpeed(ef,3.0)
call DestroyEffect(ef)
set tempI=0
loop
exitwhen tempI==15
set tempI=tempI+1
set tempX=GetUnitX(u)+(((1500)*1.0)*Cos(((tempI*27)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((1500)*1.0)*Sin(((tempI*27)*1.0)*bj_DEGTORAD))
set ef=AddSpecialEffect("war3mapImported\\@EF_BB_DarkPillar.mdl",tempX,tempY)
call EXSetEffectSpeed(ef,3.0)
call DestroyEffect(ef)
endloop
call s__party_deallocate((g))
set u=null
set c=null
set ef=null
endfunction
function BBPetton takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local integer stage=LoadInteger(udg_Hash,$944CCEB0,2)
local integer PatonNum=LoadInteger(udg_Hash,$944CCEB0,3)
local integer Fulltime=LoadInteger(udg_Hash,$944CCEB0,4)
local integer unableEF=LoadInteger(udg_Hash,$944CCEB0,5)
local integer temp=0
local integer temp2=0
local integer tempI=0
local integer g=s__party_create()
local unit dummy=null
local unit l__temp_unit2=null
local unit gunit=null
local boolean temp_bo=false
local real dmg=0
local real tempR=0
local real tempX=0
local real tempY=0
local real tempX2=0
local real tempY2=0
local group gl2=CreateGroup()
local effect ef=null
if Bossunable or Bossstun then
if Bossstun and LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call SaveInteger(udg_Hash,$944CCEB0,2,stage+1)
call SaveInteger(udg_Hash,$944CCEB0,4,Fulltime+1)
endif
else
call SaveInteger(udg_Hash,$944CCEB0,2,stage+1)
call SaveInteger(udg_Hash,$944CCEB0,4,Fulltime+1)
endif
if Bossunable and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)!=0 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call PauseUnit(u,false)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
endif
if Bossunable and BossunableTime>0 then
call PauseUnit(u,true)
call SaveInteger(udg_Hash,$944CCEB0,5,unableEF+1)
set BossunableTime=BossunableTime-0.04
if unableEF==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@SY_BossStun.mp3"),(null),(107),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call FilterBasic(Player(PP[temp]-1),3.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,100.00,100.00,0.00,100.00,100.00,100.00,100.00)
endloop
call SetUnitAnimation(u,"death")
set tempX=GetUnitX(u)+(((-150)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-150)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.7,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",u,"origin"))
endif
if unableEF==14 then
call SetUnitTimeScale(u,0)
endif
elseif Bossunable and BossunableTime<=0 then
call PauseUnit(u,false)
set Bossunable=false
set BossunableTime=1
call SaveInteger(udg_Hash,$944CCEB0,5,0)
call SetUnitTimeScale(u,1)
endif
call TimerStart(t,0.04,false,function BBPetton)
if UnitAlive(u)then
call UnitAddAbility(u,'A02A')
if LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call UnitAddAbility(u,'A01A')
call UnitAddAbility(u,'SY10')
elseif not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
if not LoadBoolean(udg_Hash,$F61C5FD6,1)then
call UnitRemoveAbility(u,'A01A')
call UnitRemoveAbility(u,'SY10')
endif
endif
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
set dummy=Charcter[PP[temp]]
if not IsUnitInRangeXY(dummy,GetRectCenterX(gg_rct_BB_Middle),GetRectCenterY(gg_rct_BB_Middle),6000)then
call SetUnitX(dummy,GetRectCenterX(gg_rct_BB_Middle))
call SetUnitY(dummy,GetRectCenterY(gg_rct_BB_Middle))
endif
endloop
if not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
if not UnitAlive(target)or(target !=null and not IsUnitInRange(u,target,1800))or IsUnitInGroup(target,udg_Mujuk)or(BossAgro !=null and BossAgro !=target)then
set target=null
endif
if target==null then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),5000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)then
if BossAgro==null or IsUnitInGroup(BossAgro,udg_Mujuk)then
set l__temp_unit2=gunit
elseif BossAgro !=null and l__temp_unit2 !=BossAgro then
set l__temp_unit2=gunit
endif
endif
endloop
set target=l__temp_unit2
else
set l__temp_unit2=target
endif
if l__temp_unit2 !=null then
call IssueTargetOrder(u,"attack",l__temp_unit2)
elseif l__temp_unit2==null then
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call DisplayTimedTextToPlayer(Player(PP[temp]-1),0,0,1,"|cffFF0000[시스템] : 생존중인 플레이어가없어서 보스의 체력이 회복됩니다.")
endloop
if not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call TimerStart(t,1,false,function BBPetton)
endif
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.01))
endif
endif
else
if not LoadBoolean(udg_Hash,GetHandleId(t),$1ECBCEE8)then
call DestroyEffect(LoadEffectHandle(udg_Hash,GetHandleId(t),$B65911AF))
call DestroyEffect(LoadEffectHandle(udg_Hash,GetHandleId(t),$A667D652))
call SaveReal(udg_Hash,GetHandleId(t),$6207F303,0)
call SaveBoolean(udg_Hash,GetHandleId(t),$1ECBCEE8,true)
set stage=25
call SaveInteger(udg_Hash,$944CCEB0,2,25)
call BossText("|cffff0000이럴수가... 그럴리가..","war3mapImported\\@SY_BossWarningBB.blp")
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call BossBar_End(Player(PP[temp]-1))
set dummy=Charcter[PP[temp]]
call BuffCall(dummy,'BS00',0,false,false)
call DestroyTextTag(LoadTextTagHandle(udg_Hash,GetHandleId(dummy),$CC229380))
call SetUnitTimeScale(dummy,1)
call SetUnitVertexColor(dummy,255,255,255,255)
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,0)
call SaveReal(udg_Hash,GetHandleId(dummy),$1F254781,0)
call DestroyEffect(LoadEffectHandle(udg_Hash,GetHandleId(dummy),$C3ECBB2B))
call SaveEffectHandle(udg_Hash,GetHandleId(dummy),$C3ECBB2B,null)
call UnitRemoveAbility(dummy,'A00M')
call UnitRemoveAbility(dummy,'A00N')
call SaveBoolean(udg_Hash,GetHandleId(dummy),$DD7D2BAE,false)
endloop
endif
endif
if stage==75 and not UnitAlive(u)then
set BossBattle=false
if LoadInteger(udg_Hash,999,$3862CC76)<=29 then
set BossBattleN=false
endif
call PauseUnit(gg_unit_h000_0013,false)
call FlushChildHashtable(udg_Hash,$944CCEB0)
call FlushChildHashtable(udg_Hash,GetHandleId(u))
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
if LoadInteger(udg_Hash,999,$3862CC76)>=29 then
call BossEND()
endif
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call SetPlayerAbilityAvailable(Player(PP[temp]-1),'SY02',true)
set dummy=Charcter[PP[temp]]
if LoadInteger(udg_Hash,999,$3862CC76)>=29 then
call RemoveUnit(ArtPickProgress[PP[temp]])
endif
call SetUnitX(dummy,GetRectCenterX(gg_rct_AttackZone)+(((500)*1.0)*Cos(((270)*1.0)*bj_DEGTORAD)))
call SetUnitY(dummy,GetRectCenterY(gg_rct_AttackZone)+(((500)*1.0)*Sin(((270)*1.0)*bj_DEGTORAD)))
call PanCameraToTimed(GetRectCenterX(gg_rct_AttackZone),GetRectCenterY(gg_rct_AttackZone),0.00)
if not UnitAlive(dummy)then
call TimerStart(ReviveTimer[PP[temp]],0.01,false,null)
call SaveUnitHandle(System,GetHandleId(ReviveTimer[PP[temp]]),$FAD24066,dummy)
endif
endloop
endif
if stage==115 and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)and Playint !=1 and LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)==13 then
call SaveInteger(udg_Hash,$944CCEB0,2,GetRandomInt(15,20)+(difficulty+(difficulty*5)))
call SaveInteger(udg_Hash,GetHandleId(t),$6EB21D2D,0)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_BB2_DarkPillar.mdl",GetUnitX(u),GetUnitY(u)))
set tempX=GetUnitX(u)+(((SquareRoot(GetRandomReal(0,(600.00*600.00))))*1.0)*Cos(((GetRandomReal(0,360))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((SquareRoot(GetRandomReal(0,(600.00*600.00))))*1.0)*Sin(((GetRandomReal(0,360))*1.0)*bj_DEGTORAD))
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$2FE0FC0F)
if dummy !=null then
call RemoveUnit(dummy)
endif
set dummy=CreateUnit(Player(11),'h003',GetUnitX(u),GetUnitY(u),270)
call DzSetUnitModel(dummy,"war3mapImported\\@EF_BB_lightningboltbuff01_black.mdl")
call KnockBackXY(dummy,tempX,tempY,0.2,0.01)
call SetUnitFlyHeight(dummy,650,0)
call SetUnitFlyHeight(dummy,50,3000)
call TimerABILL(dummy,0.2,'Abun')
call SaveUnitHandle(udg_Hash,GetHandleId(t),$2FE0FC0F,dummy)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),1000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)and IsUnitType(gunit,UNIT_TYPE_HERO)then
call IssueTargetOrder(dummy,"attack",gunit)
endif
endloop
endif
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$2FE0FC0F)
if dummy !=null then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),1000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)and IsUnitType(gunit,UNIT_TYPE_HERO)then
call IssueTargetOrder(dummy,"attack",gunit)
endif
endloop
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),150,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)and IsUnitType(gunit,UNIT_TYPE_HERO)and dummy !=null then
call BBattackT(gunit)
call RemoveUnit(dummy)
endif
endloop
endif
if stage==125 and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)and LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)==11 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_BB1.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,7)
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)
call SaveInteger(udg_Hash,GetHandleId(t),$6EB21D2D,temp2+1)
call PauseUnit(u,true)
set tempR=0
call BossText("허수공간에 파뭍혀 죽으세요.","war3mapImported\\@SY_BossWarningBB.blp")
call visible(u,60,0,0.4,0.04)
call SetUnitX(u,GetRectCenterX(gg_rct_BB_Middle))
call SetUnitY(u,GetRectCenterY(gg_rct_BB_Middle))
set ef=AddSpecialEffect("war3mapImported\\@EF_[Spell]Swordlight_Black.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSpeed(ef,1.5)
call EXSetEffectSize(ef,8)
call EXEffectMatRotateZ(ef,0)
call DestroyEffect(ef)
call SetUnitAnimationByIndex(u,6)
call UnitAddAbility(u,'SY10')
endif
if stage==150 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==7 then
call SetUnitAnimationByIndex(u,5)
call SetUnitTimeScale(u,0.95)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set temp=GetRandomint(1,100)
if temp<=33 then
call AOEout(tempX,tempY,18,1)
call SaveInteger(udg_Hash,GetHandleId(t),$97850C5A,1)
elseif temp>=34 and temp<=66 then
call AOEout(tempX,tempY,12,1)
call SaveInteger(udg_Hash,GetHandleId(t),$97850C5A,2)
elseif temp>=67 then
call AOE(tempX,tempY,7.5,1,1)
call SaveInteger(udg_Hash,GetHandleId(t),$97850C5A,3)
endif
endif
if stage==175 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==7 then
call SetUnitTimeScale(u,0)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
if LoadInteger(udg_Hash,GetHandleId(t),$97850C5A)==1 then
call AOEout(tempX,tempY,12,1)
call BBout3()
elseif LoadInteger(udg_Hash,GetHandleId(t),$97850C5A)==2 then
call AOEout(tempX,tempY,18,1)
call BBout2()
elseif LoadInteger(udg_Hash,GetHandleId(t),$97850C5A)==3 then
call AOEout(tempX,tempY,12,1)
call BBout1()
endif
endif
if stage==200 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==7 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
if LoadInteger(udg_Hash,GetHandleId(t),$97850C5A)==1 then
call AOE(tempX,tempY,7.5,1,1)
call BBout2()
elseif LoadInteger(udg_Hash,GetHandleId(t),$97850C5A)==2 then
call AOE(tempX,tempY,7.5,1,1)
call BBout3()
elseif LoadInteger(udg_Hash,GetHandleId(t),$97850C5A)==3 then
call AOEout(tempX,tempY,18,1)
call BBout2()
endif
endif
if stage==225 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==7 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
if LoadInteger(udg_Hash,GetHandleId(t),$97850C5A)==1 then
call AOEout(tempX,tempY,18,1)
call BBout1()
elseif LoadInteger(udg_Hash,GetHandleId(t),$97850C5A)==2 then
call AOEout(tempX,tempY,12,1)
call BBout1()
elseif LoadInteger(udg_Hash,GetHandleId(t),$97850C5A)==3 then
call AOE(tempX,tempY,7.5,1,1)
call BBout3()
endif
endif
if stage==250 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==7 then
if LoadInteger(udg_Hash,GetHandleId(t),$97850C5A)==1 then
call BBout3()
elseif LoadInteger(udg_Hash,GetHandleId(t),$97850C5A)==2 then
call BBout2()
elseif LoadInteger(udg_Hash,GetHandleId(t),$97850C5A)==3 then
call BBout1()
endif
call UnitRemoveAbility(u,'SY10')
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*12))
call SetUnitTimeScale(u,1)
call PauseUnit(u,false)
endif
if stage==125 and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)and(LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)==6 or LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)==12)then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_BB3.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"흐물흐물하게 만들어줄게",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,180,85,162,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
call SetTextTagFadepoint(bj_lastCreatedTextTag,3)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,6)
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)
call SaveInteger(udg_Hash,GetHandleId(t),$6EB21D2D,temp2+1)
if temp2==12 and Playint==1 then
call SaveInteger(udg_Hash,GetHandleId(t),$6EB21D2D,0)
endif
call PauseUnit(u,true)
call SetUnitAnimationByIndex(u,5)
set tempR=0
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),4000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
if tempR<=s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))then
set gunit=dummy
set tempR=s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
endif
endif
endloop
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,gunit)
set ef=AddSpecialEffect("war3mapImported\\@AOE_AOEIndicator.mdl",GetUnitX(gunit),GetUnitY(gunit))
call EXSetEffectSpeed(ef,0.71)
call EXSetEffectSize(ef,6)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$B65911AF,ef)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_SnipingTarget.mdl",gunit,"chest"),0.4)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),4000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)and gunit !=dummy then
if tempR<=s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))then
set l__temp_unit2=dummy
set tempR=s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
endif
endif
endloop
if l__temp_unit2 !=null then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$16B2AC46,l__temp_unit2)
set ef=AddSpecialEffect("war3mapImported\\@AOE_AOEIndicator.mdl",GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2))
call EXSetEffectSpeed(ef,0.71)
call EXSetEffectSize(ef,6)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$A667D652,ef)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_SnipingTarget.mdl",l__temp_unit2,"chest"),0.4)
endif
endif
if stage<=135 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==6 then
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$B65911AF)
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)
set tempX=GetUnitX(gunit)
set tempY=GetUnitY(gunit)
call EXSetEffectXY(ef,tempX,tempY)
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$16B2AC46)
if l__temp_unit2 !=null then
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$A667D652)
set tempX=GetUnitX(l__temp_unit2)
set tempY=GetUnitY(l__temp_unit2)
call EXSetEffectXY(ef,tempX,tempY)
endif
if stage==135 then
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)
set tempX=GetUnitX(gunit)
set tempY=GetUnitY(gunit)
call SaveReal(udg_Hash,GetHandleId(t),$D33D37D4,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$F62CAFE5,tempY)
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$16B2AC46)
if l__temp_unit2 !=null then
set tempX=GetUnitX(l__temp_unit2)
set tempY=GetUnitY(l__temp_unit2)
call SaveReal(udg_Hash,GetHandleId(t),$25DBEE07,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$B2B753B,tempY)
endif
endif
endif
if stage==155 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==6 then
call PauseUnit(u,false)
set tempX=LoadReal(udg_Hash,GetHandleId(t),$D33D37D4)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$F62CAFE5)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_BB03.mdl",tempX,tempY))
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$16B2AC46)
if l__temp_unit2 !=null then
set tempX=LoadReal(udg_Hash,GetHandleId(t),$25DBEE07)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$B2B753B)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_BB03.mdl",tempX,tempY))
endif
endif
if stage==160 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==6 then
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$B65911AF)
call DestroyEffect(ef)
set tempX=LoadReal(udg_Hash,GetHandleId(t),$D33D37D4)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$F62CAFE5)
set ef=AddSpecialEffect("war3mapImported\\@EF_DarkPillar.mdl",tempX,tempY)
call EXSetEffectSize(ef,10)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_hakkestart.mdl",tempX,tempY)
call EXSetEffectSize(ef,1.2)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$7043436A,ef)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,600,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
if IsUnitType(dummy,UNIT_TYPE_HERO)and not IsUnitInGroup(dummy,udg_Mujuk)then
set tempI=LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)+75
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,tempI)
endif
set dmg=GetUnitState(u,ConvertUnitState(0x12))*4+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.12)
call Damage(u,dummy,dmg,1,0,false,1,0)
endif
endloop
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$16B2AC46)
if l__temp_unit2 !=null then
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$A667D652)
call DestroyEffect(ef)
set tempX=LoadReal(udg_Hash,GetHandleId(t),$25DBEE07)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$B2B753B)
set ef=AddSpecialEffect("war3mapImported\\@EF_DarkPillar.mdl",tempX,tempY)
call EXSetEffectSize(ef,10)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_hakkestart.mdl",tempX,tempY)
call EXSetEffectSize(ef,1.2)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$156A35BA,ef)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,600,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
if IsUnitType(dummy,UNIT_TYPE_HERO)and not IsUnitInGroup(dummy,udg_Mujuk)then
set tempI=LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)+75
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,tempI)
endif
set dmg=GetUnitState(u,ConvertUnitState(0x12))*4+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.12)
call Damage(u,dummy,dmg,1,0,false,1,0)
endif
endloop
endif
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,dummy)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$16B2AC46,dummy)
call RemoveUnit(dummy)
call SaveReal(udg_Hash,GetHandleId(t),$6207F303,5.0)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*20))
endif
set tempR=LoadReal(udg_Hash,GetHandleId(t),$6207F303)
if tempR !=0 then
set tempX=LoadReal(udg_Hash,GetHandleId(t),$D33D37D4)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$F62CAFE5)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,800,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
set tempI=LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)+1
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,tempI)
endif
endloop
set tempX=LoadReal(udg_Hash,GetHandleId(t),$25DBEE07)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$B2B753B)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,800,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroup(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
set tempI=LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)+1
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,tempI)
endif
endloop
set tempR=LoadReal(udg_Hash,GetHandleId(t),$6207F303)-0.04
call SaveReal(udg_Hash,GetHandleId(t),$6207F303,tempR)
if tempR<=0 then
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$7043436A)
call DestroyEffect(ef)
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$156A35BA)
call DestroyEffect(ef)
call SaveReal(udg_Hash,GetHandleId(t),$6207F303,0)
endif
endif
if stage==125 and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)and LoadInteger(udg_Hash,GetHandleId(t),$D8F3B093)==1 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,5)
call SaveInteger(udg_Hash,GetHandleId(t),$D8F3B093,0)
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)
call SaveInteger(udg_Hash,GetHandleId(t),$6EB21D2D,temp2+1)
call PauseUnit(u,true)
call SetUnitAnimationByIndex(u,3)
set l__temp_unit2=null
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),4000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
if BossAgro==null then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,dummy)
set l__temp_unit2=dummy
elseif BossAgro !=null and l__temp_unit2 !=BossAgro then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,dummy)
set l__temp_unit2=dummy
endif
endif
endloop
if LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)==null then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*20))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_AZ_PotMpink_W1_chest.mdl",u,"chest"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_MikaEF1.mdl",LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE),"chest"))
endif
endif
if stage==145 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==5 then
call PauseUnit(u,false)
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2))
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys7',tempX,tempY,tempR)
call SetUnitFlyHeight(dummy,250,0)
call SetUnitScale(dummy,2.5,1,1)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_[TX]103_p.mdl",dummy,"origin"),0.25)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_BB_EF2.mdl",dummy,"origin"),0.25)
call UnitApplyTimedLife(dummy,'BHwe',0.25)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$6FB4BCBD,dummy)
endif
if stage>=146 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==5 then
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$6FB4BCBD)
set tempR=s__Angle_PBP(GetUnitX(dummy),GetUnitY(dummy),GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2))
set tempX=GetUnitX(dummy)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call SetUnitFacing(dummy,tempR)
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
if s__Distance_PBP(tempX,tempY,GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2))<=150 then
call SaveInteger(udg_Hash,$944CCEB0,2,225)
endif
endif
if stage==225 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==5 then
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$6FB4BCBD)
call KillUnit(dummy)
set dmg=GetUnitState(u,ConvertUnitState(0x12))*1+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.05)
call Damage(u,l__temp_unit2,dmg,1,0,false,1,0)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_MikaEF21.mdl",l__temp_unit2,"origin"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_[Spell]Swordlight_Pink1.mdl",l__temp_unit2,"origin"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_AZ_Pink_Sniper_T_Misslie2.mdl",l__temp_unit2,"origin"))
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*25))
endif
if stage==125 and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)and LoadInteger(udg_Hash,GetHandleId(t),$D8F3B093)==0 then
set temp=GetRandomint(1,100)
if temp<=33 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,1)
call SaveInteger(udg_Hash,GetHandleId(t),$D8F3B093,1)
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)
call SaveInteger(udg_Hash,GetHandleId(t),$6EB21D2D,temp2+1)
call PauseUnit(u,true)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,null)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),3000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
set gunit=dummy
endif
endloop
if gunit !=null then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,gunit)
endif
if LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)==null then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*15))
call PauseUnit(u,false)
else
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"무서워라~",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,180,85,162,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
call SetTextTagFadepoint(bj_lastCreatedTextTag,3)
call SaveReal(udg_Hash,GetHandleId(t),$D672DB86,GetUnitX(gunit))
call SaveReal(udg_Hash,GetHandleId(t),$50597583,GetUnitY(gunit))
call AOE(GetUnitX(gunit),GetUnitY(gunit),6.5,1,1)
call SetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit)))
endif
elseif temp>=34 and temp<=66 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_BB4.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"기뻐하세요!",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,180,85,162,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
call SetTextTagFadepoint(bj_lastCreatedTextTag,3)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,2)
call SaveInteger(udg_Hash,GetHandleId(t),$D8F3B093,1)
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)
call SaveInteger(udg_Hash,GetHandleId(t),$6EB21D2D,temp2+1)
call PauseUnit(u,true)
call SetUnitAnimationByIndex(u,7)
set temp2=0
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),3000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
set temp2=temp2+1
call SaveReal(udg_Hash,GetHandleId(t),$D672DB86+temp2,GetUnitX(dummy))
call SaveReal(udg_Hash,GetHandleId(t),$50597583+temp2,GetUnitY(dummy))
call SaveInteger(udg_Hash,GetHandleId(t),$3195013A,temp2)
call AOE(GetUnitX(dummy),GetUnitY(dummy),4,1,1)
endif
endloop
set tempR=GetRandomReal(0,360)
set tempX=GetRectCenterX(gg_rct_BB_Middle)+(((SquareRoot(GetRandomReal(0,(1800.00*1800.00))))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetRectCenterY(gg_rct_BB_Middle)+(((SquareRoot(GetRandomReal(0,(1800.00*1800.00))))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call AOE(tempX,tempY,2.5,1,1)
call SaveReal(udg_Hash,GetHandleId(t),$C8FC6496,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$635B9A18,tempY)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
call SetUnitFacing(u,tempR)
call EXSetUnitFacing(u,tempR)
set tempX=GetUnitX(u)-(((GetRandomReal(200,350))*1.0)*Cos(((tempR-GetRandomReal(40,50))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)-(((GetRandomReal(200,350))*1.0)*Sin(((tempR-GetRandomReal(40,50))*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys7',tempX,tempY,270)
set ef=AddSpecialEffectTarget("war3mapImported\\@EF_BB_EF2.mdl",dummy,"origin")
call SetUnitFlyHeight(dummy,GetRandomReal(600,750),0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$6FB4BCBD,dummy)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$E2C54B9,ef)
elseif temp>=67 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_BB2.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"놓치지 않아요!",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,180,85,162,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
call SetTextTagFadepoint(bj_lastCreatedTextTag,3)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,3)
call SaveInteger(udg_Hash,GetHandleId(t),$D8F3B093,1)
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)
call SaveInteger(udg_Hash,GetHandleId(t),$6EB21D2D,temp2+1)
call PauseUnit(u,true)
call SetUnitAnimationByIndex(u,5)
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==1 then
if stage==135 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_BBjump.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
call SetUnitAnimationByIndex(u,2)
call jump(u,0.6,700,0.02)
call UnitAddAbility(u,'SY10')
call SetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy)))
set tempX=LoadReal(udg_Hash,GetHandleId(t),$D672DB86)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$50597583)
call KnockBackXY(u,tempX,tempY,0.6,0.03)
call EDestroy(AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl",u,"origin"),0.6)
call EDestroy(AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl",u,"left hand"),0.6)
call EDestroy(AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl",u,"right hand"),0.6)
call EDestroy(AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl",u,"head"),0.6)
endif
if stage>=135 then
call SetUnitAnimationByIndex(u,2)
set dummy=CreateUnit(Player(11),'sys7',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
call DzSetUnitModel(dummy,"war3mapImported\\@C_Sakura Matou2.mdl")
call SetUnitAnimationByIndex(dummy,2)
call SetUnitScale(dummy,3,1,1)
call SetUnitFlyHeight(dummy,GetUnitFlyHeight(u),0)
call SetUnitVertexColor(dummy,255,255,255,160)
call UnitRemove(dummy,0.25)
endif
if stage==150 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_BBjumpEF.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StopSound(udg_SND,false,false)
call StartSound(udg_SND)
set tempX=LoadReal(udg_Hash,GetHandleId(t),$D672DB86)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$50597583)
set ef=AddSpecialEffect("war3mapImported\\@EF_by_wood_effect_yuanbanlin_sand2.mdl",tempX,tempY)
call EXSetEffectSize(ef,1.7)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_az_ts_v2_P.mdl",tempX,tempY)
call EXSetEffectSize(ef,5.5)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_Suzakuin-4.mdl",tempX,tempY)
call EXSetEffectSize(ef,3.25)
call DestroyEffect(ef)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,650,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
if IsUnitInRange(u,dummy,325)then
set dmg=GetUnitState(u,ConvertUnitState(0x12))*4+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.25)
call Damage(u,dummy,dmg*2,1,0,false,1,0)
if IsUnitType(dummy,UNIT_TYPE_HERO)and not IsUnitInGroup(dummy,udg_Mujuk)then
set tempI=LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)+50
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,tempI)
call Stun(u,dummy,1.5)
endif
else
set dmg=GetUnitState(u,ConvertUnitState(0x12))*2.5+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.15)
call Damage(u,gunit,dmg,1,0,false,1,0)
if IsUnitType(dummy,UNIT_TYPE_HERO)and not IsUnitInGroup(dummy,udg_Mujuk)then
set tempI=LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)+15
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,tempI)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
set tempX=GetUnitX(dummy)+(((400)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((400)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackEn(dummy,tempX,tempY,0.12,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",dummy,"origin"))
endif
endif
endif
endloop
call BBShockwave(GetUnitX(u),GetUnitY(u))
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,dummy)
call RemoveUnit(dummy)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*15))
call SetUnitAnimationByIndex(u,3)
call PauseUnit(u,false)
endif
endif
if stage>=126 and stage<=136 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==2 then
set tempX=LoadReal(udg_Hash,GetHandleId(t),$C8FC6496)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$635B9A18)
set tempR=GetRandomReal(0,360)
set tempX2=GetRectCenterX(gg_rct_BB_Middle)+(((SquareRoot(GetRandomReal(0,(1800.00*1800.00))))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY2=GetRectCenterY(gg_rct_BB_Middle)+(((SquareRoot(GetRandomReal(0,(1800.00*1800.00))))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call AOE(tempX2,tempY2,3.25,1,1)
call SaveReal(udg_Hash,GetHandleId(t),(stage-125),tempX2)
call SaveReal(udg_Hash,GetHandleId(t),(stage-125)+10,tempY2)
if stage<=128 then
set tempX=GetUnitX(u)-(((GetRandomReal(300,550))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)-(((GetRandomReal(300,550))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
else
set tempX=GetUnitX(u)-(((GetRandomReal(300,600))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)-(((GetRandomReal(300,600))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
endif
set dummy=CreateUnit(Player(11),'sys7',tempX,tempY,270)
set ef=AddSpecialEffectTarget("war3mapImported\\@EF_BB_EF2.mdl",dummy,"origin")
call SetUnitFlyHeight(dummy,GetRandomReal(500,850),0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),(stage-125)+20,dummy)
call SaveEffectHandle(udg_Hash,GetHandleId(t),(stage-125)+30,ef)
if stage==136 then
call PauseUnit(u,false)
endif
endif
if stage>=146 and stage<=158 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==2 then
if stage==146 then
set tempX=LoadReal(udg_Hash,GetHandleId(t),$C8FC6496)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$635B9A18)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$6FB4BCBD)
call KnockBackXY(dummy,tempX,tempY,0.08,0.02)
call SetUnitFlyHeight(dummy,0,(GetUnitFlyHeight(dummy)*13))
else
set tempX=LoadReal(udg_Hash,GetHandleId(t),(stage-146))
set tempY=LoadReal(udg_Hash,GetHandleId(t),(stage-146)+10)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),(stage-146)+20)
call KnockBackXY(dummy,tempX,tempY,0.08,0.02)
call SetUnitFlyHeight(dummy,0,(GetUnitFlyHeight(dummy)*13))
endif
endif
if stage>=150 and stage<=161 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==2 then
if stage==150 then
set tempX=LoadReal(udg_Hash,GetHandleId(t),$C8FC6496)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$635B9A18)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$6FB4BCBD)
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$E2C54B9)
call DestroyEffect(ef)
call RemoveUnit(dummy)
set ef=AddSpecialEffect("war3mapImported\\@EF_az_zeusking_impact-zise.mdl",tempX,tempY)
call EXSetEffectSize(ef,4)
call DestroyEffect(ef)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,325,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
set dmg=GetUnitState(u,ConvertUnitState(0x12))*2+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.15)
call Damage(u,gunit,dmg,1,0,false,1,0)
if IsUnitType(dummy,UNIT_TYPE_HERO)and not IsUnitInGroup(dummy,udg_Mujuk)then
set tempI=LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)+5
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,tempI)
endif
endif
endloop
else
set tempX=LoadReal(udg_Hash,GetHandleId(t),(stage-150))
set tempY=LoadReal(udg_Hash,GetHandleId(t),(stage-150)+10)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),(stage-150)+20)
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),(stage-150)+30)
call DestroyEffect(ef)
call RemoveUnit(dummy)
set ef=AddSpecialEffect("war3mapImported\\@EF_az_zeusking_impact-zise.mdl",tempX,tempY)
call EXSetEffectSize(ef,4)
call DestroyEffect(ef)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,325,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
set dmg=GetUnitState(u,ConvertUnitState(0x12))*2+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.15)
call Damage(u,dummy,dmg,1,0,false,1,0)
if IsUnitType(dummy,UNIT_TYPE_HERO)and not IsUnitInGroup(dummy,udg_Mujuk)then
set tempI=LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)+5
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,tempI)
endif
endif
endloop
endif
endif
if stage==150 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==2 then
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$3195013A)
set temp=0
loop
exitwhen temp==temp2
set temp=temp+1
set tempX=LoadReal(udg_Hash,GetHandleId(t),$D672DB86+temp)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$50597583+temp)
set ef=AddSpecialEffect("war3mapImported\\@EF_hlm-19.mdl",tempX,tempY)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_hlm-32.mdl",tempX,tempY)
call EXSetEffectSize(ef,1.6)
call DestroyEffect(ef)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,400,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
set dmg=GetUnitState(u,ConvertUnitState(0x12))*1+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.4)
call Damage(u,dummy,dmg,1,0,false,1,0)
if IsUnitType(dummy,UNIT_TYPE_HERO)and not IsUnitInGroup(dummy,udg_Mujuk)then
set tempI=LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)+20
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,tempI)
endif
endif
endloop
endloop
endif
if stage==169 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==2 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*20))
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,dummy)
call RemoveUnit(dummy)
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==3 then
if stage==125 then
call AOE(GetUnitX(u),GetUnitY(u),6,1,1)
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(u),GetUnitY(u),270)
call DzSetUnitModel(dummy,"war3mapImported\\@EF_Archetype_D2_Red.mdl")
call SaveUnitHandle(udg_Hash,GetHandleId(t),$679BD101,dummy)
call SetUnitScale(dummy,7,1,1)
endif
if stage>=125 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$679BD101)
set tempR=7*((185-stage)*0.02)
call SetUnitScale(dummy,tempR,1,1)
set dmg=1200*((185-stage)*0.02)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),dmg,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
if not IsUnitInRange(u,dummy,dmg-200)and not IsUnitInGroup(dummy,udg_Mujuk)then
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
set tempX=GetUnitX(dummy)+(((-50)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((-50)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackXY(dummy,tempX,tempY,0.03,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",dummy,"origin"))
endif
endif
endloop
endif
if stage==147 then
call SetUnitTimeScale(u,0)
endif
if stage==160 then
set ef=AddSpecialEffect("war3mapImported\\@EF_Archetype_Q9.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(ef,7)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_AZ_KingLeoric(SDWZ)_R.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(ef,1)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_AZ_PA_B2.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(ef,5)
call DestroyEffect(ef)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),600,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
set dmg=GetUnitState(u,ConvertUnitState(0x12))*2.5+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.2)
call Damage(u,dummy,dmg,1,0,false,1,0)
if IsUnitType(dummy,UNIT_TYPE_HERO)and not IsUnitInGroup(dummy,udg_Mujuk)then
set tempI=LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)+30
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,tempI)
endif
endif
endloop
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$679BD101)
call RemoveUnit(dummy)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*15))
call PauseUnit(u,false)
call SetUnitTimeScale(u,1)
endif
endif
if UnitAlive(u)and GetUnitState(u,UNIT_STATE_LIFE)<=(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.6)and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)and not LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,10)
call SaveBoolean(udg_Hash,GetHandleId(t),$F9F9084D,true)
call PauseUnit(u,true)
call SetUnitInvulnerable(u,true)
call GroupAddUnit(udg_Mujuk,u)
call SetUnitAnimationByIndex(u,6)
call invisible(u,0,100,1.2,0.01)
set stage=999
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call BossText("|cffff0000헛수고인걸 알려드리죠.","war3mapImported\\@SY_BossWarningBB.blp")
endif
if stage==30 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==10 then
call ShowUnit(u,false)
endif
if stage==38 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==10 then
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
set dummy=CreateUnit(Player(11),'h004',tempX,tempY,270)
call DzSetUnitModel(dummy,"war3mapImported\\@EF_tx7_bb.mdl")
call SetUnitScale(dummy,3,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FE8087E,dummy)
call SetUnitState(dummy,UNIT_STATE_MAX_LIFE,GetUnitState(Boss,UNIT_STATE_MAX_LIFE)*0.2)
call SetUnitState(dummy,UNIT_STATE_LIFE,GetUnitState(dummy,UNIT_STATE_MAX_LIFE))
call SetUnitState(dummy,ConvertUnitState(0x20),GetUnitState(dummy,ConvertUnitState(0x20))*0.5)
call UnitAddAbility(dummy,'SY10')
call UnitAddAbility(dummy,'A01A')
set ef=AddSpecialEffect("war3mapImported\\@EF_[tx][z]mojing.mdl",tempX,tempY)
call EXSetEffectSpeed(ef,1.5)
call EXSetEffectSize(ef,10)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_Vinz Blast Death.mdl",tempX,tempY)
call EXSetEffectSpeed(ef,2)
call DestroyEffect(ef)
set ef=AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",tempX,tempY)
call EXSetEffectSize(ef,3)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_hakkestart.mdl",tempX,tempY)
call EXSetEffectSize(ef,0)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$2EF0A456,ef)
call SaveReal(udg_Hash,GetHandleId(t),$65E6560,0)
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call ND(Player(PP[temp]-1),0.1,50)
endloop
endif
if stage>=38 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==10 then
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$2EF0A456)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$65E6560)
call SaveReal(udg_Hash,GetHandleId(t),$65E6560,tempR+0.01)
call EXSetEffectSize(ef,tempR)
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
set temp=stage-(stage/2)*2
if temp==0 then
set ef=AddSpecialEffect("war3mapImported\\@EF_ImpaleTargetDust_BlackDown.mdl",tempX,tempY)
call EXSetEffectSize(ef,2)
call EXSetEffectZ(ef,1000)
call DestroyEffect(ef)
endif
set temp=stage-(stage/4)*4
if temp==0 then
set tempR=GetRandomReal(0,360)
set tempX=tempX+(((SquareRoot(GetRandomReal(0,(1800.00*1800.00))))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=tempY+(((SquareRoot(GetRandomReal(0,(1800.00*1800.00))))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set ef=AddSpecialEffect("war3mapImported\\@EF_ImpaleTargetDust_BlackDown.mdl",tempX,tempY)
call EXSetEffectSize(ef,2)
call EXSetEffectZ(ef,1000)
call DestroyEffect(ef)
endif
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FE8087E)
if stage>=388 and UnitAlive(dummy)then
call BossText("|cffff0000후후.. 기뻐하세요? 이 우주로부터 없애드릴게요","war3mapImported\\@SY_BossWarningBB.blp")
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,999)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
set stage=0
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call ND(Player(PP[temp]-1),0.1,120)
call Stun(u,Charcter[PP[temp]],5.0)
call SetUnitTimeScale(Charcter[PP[temp]],0)
call SetUnitVertexColor(Charcter[PP[temp]],127,127,127,255)
endloop
elseif stage<=387 and not UnitAlive(dummy)then
call BossText("|cffff0000꽤 하시네요. 그럼 이건 어떨까요?","war3mapImported\\@SY_BossWarningBB.blp")
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,11)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
set stage=0
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$2EF0A456)
call DestroyEffect(ef)
endif
endif
if stage==1 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call SetUnitAnimationByIndex(u,5)
call SetUnitFlyHeight(u,3000,0)
endif
if stage==10 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
call SetUnitFlyHeight(u,0,7500)
call visible(u,60,0,0.4,0.04)
call ShowUnit(u,true)
endif
if stage==20 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",tempX,tempY))
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call ND(Player(PP[temp]-1),0.3,60)
endloop
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"영차",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,139,0,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
call SetTextTagFadepoint(bj_lastCreatedTextTag,3)
endif
if stage==45 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
if Playint<=2 then
set temp2=4
elseif Playint==3 then
set temp2=5
elseif Playint==4 then
set temp2=6
elseif Playint==5 then
set temp2=7
endif
set tempR=360/temp2
call SaveInteger(udg_Hash,GetHandleId(t),$91523C7F,temp2)
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
call SetUnitAnimationByIndex(u,6)
set temp=0
loop
exitwhen temp==temp2
set temp=temp+1
set tempX2=tempX+(((800)*1.0)*Cos(((tempR*temp)*1.0)*bj_DEGTORAD))
set tempY2=tempY+(((800)*1.0)*Sin(((tempR*temp)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys9',tempX2,tempY2,270)
call DzSetUnitModel(dummy,"doodads\\cinematic\\IcecrownObelisk\\IcecrownObelisk.mdl")
call SaveUnitHandle(udg_Hash,GetHandleId(t),$CCD7E9E7+temp,dummy)
call SaveReal(udg_Hash,GetHandleId(t),$EE707C4D+temp,tempX2)
call SaveReal(udg_Hash,GetHandleId(t),$5BBA3E1B+temp,tempY2)
call SaveBoolean(udg_Hash,GetHandleId(t),$7772C4E3+temp,false)
call visible(dummy,60,0,0.2,0.02)
call SetUnitFlyHeight(dummy,3000,0)
call SetUnitFlyHeight(dummy,0,15000)
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$640BBC59,0)
endif
if stage==49 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$91523C7F)
set temp=0
loop
exitwhen temp==temp2
set temp=temp+1
set tempX2=LoadReal(udg_Hash,GetHandleId(t),$EE707C4D+temp)
set tempY2=LoadReal(udg_Hash,GetHandleId(t),$5BBA3E1B+temp)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",tempX2,tempY2))
endloop
endif
if stage==55 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
call SetUnitTimeScale(u,0)
set tempX=GetRectCenterX(gg_rct_BB_Middle)+(((50)*1.0)*Cos(((180)*1.0)*bj_DEGTORAD))
set tempY=GetRectCenterY(gg_rct_BB_Middle)+(((50)*1.0)*Sin(((180)*1.0)*bj_DEGTORAD))
set ef=AddSpecialEffect("war3mapImported\\@EF_ball2.mdl",tempX,tempY)
call EXSetEffectSize(ef,5)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$2EF0A456,ef)
call EXSetEffectZ(ef,1000)
call SaveReal(udg_Hash,GetHandleId(t),$65E6560,5)
endif
if stage>=55 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$91523C7F)
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$2EF0A456)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$65E6560)
call SaveReal(udg_Hash,GetHandleId(t),$65E6560,tempR+0.1)
call EXSetEffectSize(ef,tempR)
set temp=stage-(stage/3)*3
if temp==0 then
call BBorb()
endif
if Playint>=4 then
set temp=stage-(stage/6)*6
if temp==0 then
call BBorb()
endif
endif
set temp=0
loop
exitwhen temp==temp2
set temp=temp+1
if not LoadBoolean(udg_Hash,GetHandleId(t),$7772C4E3+temp)then
set tempX2=LoadReal(udg_Hash,GetHandleId(t),$EE707C4D+temp)
set tempY2=LoadReal(udg_Hash,GetHandleId(t),$5BBA3E1B+temp)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX2,tempY2,200,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)and GetUnitAbilityLevel(dummy,'A01I')==1 then
if not LoadBoolean(udg_Hash,GetHandleId(t),$7772C4E3+temp)then
call SaveBoolean(udg_Hash,GetHandleId(t),$7772C4E3+temp,true)
call SaveInteger(udg_Hash,GetHandleId(dummy),$1E572114,0)
set ef=AddSpecialEffect("war3mapImported\\@Aura_Athelas Orange.mdl",tempX2,tempY2)
call EXSetEffectSize(ef,3)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$43157496+temp,ef)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",tempX2,tempY2))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",tempX2,tempY2))
call UnitRemoveAbility(dummy,'A01I')
set tempI=LoadInteger(udg_Hash,GetHandleId(t),$640BBC59)+1
call SaveInteger(udg_Hash,GetHandleId(t),$640BBC59,tempI)
endif
endif
endloop
endif
endloop
set tempI=LoadInteger(udg_Hash,GetHandleId(t),$640BBC59)
if tempI>=(temp2-2)then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,900)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
endif
endif
if stage>=555 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
call BossText("|cffff0000사과처럼 으깨드릴게요....","war3mapImported\\@SY_BossWarningBB.blp")
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,999)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
set stage=0
call SetUnitTimeScale(u,1)
set temp=0
loop
exitwhen temp==temp2
set temp=temp+1
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$43157496+temp)
call DestroyEffect(ef)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$CCD7E9E7+temp)
call RemoveUnit(dummy)
endloop
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$2EF0A456)
call DestroyEffect(ef)
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,3000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
call UnitRemoveAbility(dummy,'A01I')
endif
endloop
call SaveBoolean(udg_Hash,GetHandleId(Boss),$B60A3ED8,true)
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call ND(Player(PP[temp]-1),0.1,120)
call Stun(u,Charcter[PP[temp]],5.0)
call SetUnitTimeScale(Charcter[PP[temp]],0)
call SetUnitVertexColor(Charcter[PP[temp]],127,127,127,255)
endloop
endif
if stage>=25 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==900 then
set temp=0
loop
exitwhen temp==temp2
set temp=temp+1
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$43157496+temp)
call DestroyEffect(ef)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$CCD7E9E7+temp)
call RemoveUnit(dummy)
endloop
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$2EF0A456)
call DestroyEffect(ef)
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,3000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
call UnitRemoveAbility(dummy,'A01I')
endif
endloop
call SaveBoolean(udg_Hash,GetHandleId(Boss),$B60A3ED8,true)
set Bossunable=true
set BossunableTime=8.0
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call ND(Player(PP[temp]-1),0.1,30)
call SaveInteger(udg_Hash,GetHandleId(Charcter[PP[temp]]),$5EE1219A,0)
endloop
call BossText("이런 결과.. 인정 못 해.....!","war3mapImported\\@SY_BossWarningBB.blp")
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call PauseUnit(u,false)
call SetUnitInvulnerable(u,false)
call SetUnitTimeScale(u,1)
call GroupRemoveUnit(udg_Mujuk,u)
endif
if stage==28 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==999 then
call SetUnitFlyHeight(u,3000,0)
call SetUnitFlyHeight(u,0,7500)
call SetUnitAnimationByIndex(u,5)
call visible(u,60,0,0.4,0.04)
call ShowUnit(u,true)
endif
if stage>=38 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==999 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FE8087E)
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$2EF0A456)
call DestroyEffect(ef)
call RemoveUnit(dummy)
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call FilterBasic(Player(PP[temp]-1),1.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,100.00,100.00,0.00,100.00,100.00,100.00,100.00)
set dummy=Charcter[PP[temp]]
call SetUnitTimeScale(dummy,1)
call SetUnitVertexColor(dummy,255,255,255,255)
set dmg=GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*10000+999999999
call SetUnitInvulnerable(dummy,false)
call GroupRemoveUnit(udg_Mujuk,dummy)
call Damage(u,dummy,dmg,4,0,false,1,0)
endloop
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*10))
call SetUnitInvulnerable(u,false)
call GroupRemoveUnit(udg_Mujuk,u)
endif
if UnitAlive(u)and not Bossunable and GetUnitState(u,UNIT_STATE_LIFE)<=(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.25)and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)and not LoadBoolean(udg_Hash,GetHandleId(t),$1BA59AB5)then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,15)
call SaveBoolean(udg_Hash,GetHandleId(t),$1BA59AB5,true)
call PauseUnit(u,true)
call SetUnitInvulnerable(u,true)
call GroupAddUnit(udg_Mujuk,u)
call SetUnitAnimationByIndex(u,6)
call invisible(u,0,100,1.2,0.01)
set stage=200
call SaveInteger(udg_Hash,$944CCEB0,2,200)
call BossText("|cffff0000건방 지긴..!","war3mapImported\\@SY_BossWarningBB.blp")
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==15 then
if stage==230 then
call ShowUnit(u,false)
call BossText("|cffff0000필연적인 전개입니다. 이대로 지워드리죠","war3mapImported\\@SY_BossWarningBB.blp")
endif
if stage==250 then
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
set dummy=CreateUnit(Player(11),'h004',tempX,tempY,210)
call DzSetUnitModel(dummy,"war3mapImported\\@SY_MoonCellAutomaton.mdl")
call SetUnitFlyHeight(dummy,800,0)
call SetUnitVertexColor(dummy,0,0,0,100)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FE8087E,dummy)
call SetUnitState(dummy,UNIT_STATE_MAX_LIFE,GetUnitState(Boss,UNIT_STATE_MAX_LIFE)*0.25)
call SetUnitState(dummy,UNIT_STATE_LIFE,GetUnitState(dummy,UNIT_STATE_MAX_LIFE))
call SetUnitState(dummy,ConvertUnitState(0x20),GetUnitState(dummy,ConvertUnitState(0x20))*0.75)
call UnitAddAbility(dummy,'SY10')
call UnitAddAbility(dummy,'A01A')
call PauseUnit(dummy,true)
set ef=AddSpecialEffect("war3mapImported\\@EF_[tx][z]mojing.mdl",tempX,tempY)
call EXSetEffectSpeed(ef,1.5)
call EXSetEffectSize(ef,5)
call EXSetEffectZ(ef,800)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_Vinz Blast Death.mdl",tempX,tempY)
call EXSetEffectSpeed(ef,1.5)
call EXSetEffectSize(ef,5)
call EXSetEffectZ(ef,800)
call DestroyEffect(ef)
set ef=AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",tempX,tempY)
call EXSetEffectSize(ef,3)
call DestroyEffect(ef)
call SaveInteger(udg_Hash,GetHandleId(t),$B6E237BE,125)
endif
if stage>=251 then
if stage-(stage/12)*12==0 then
call BBStone()
endif
if stage-(stage/3)*3==0 then
set tempI=LoadInteger(udg_Hash,GetHandleId(t),$B6E237BE)+1
call SaveInteger(udg_Hash,GetHandleId(t),$B6E237BE,tempI)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FE8087E)
call SetUnitVertexColor(dummy,0,0,0,tempI)
endif
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$FE8087E)
if stage>=701 and UnitAlive(dummy)then
call SetUnitVertexColor(dummy,0,0,0,0)
call RemoveUnit(dummy)
call BossText("|cffff0000나의 그림자는 세계를 뒤덮는다..","war3mapImported\\@SY_BossWarningBB.blp")
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,999)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
set stage=0
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call ND(Player(PP[temp]-1),0.1,120)
call Stun(u,Charcter[PP[temp]],5.0)
call SetUnitTimeScale(Charcter[PP[temp]],0)
call SetUnitVertexColor(Charcter[PP[temp]],127,127,127,255)
endloop
elseif stage<=700 and not UnitAlive(dummy)then
call SetUnitVertexColor(dummy,0,0,0,0)
call BossText("|cffff0000커스드 커팅 크레이트","war3mapImported\\@SY_BossWarningBB.blp")
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,16)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
set stage=0
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,2500,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
set tempR=s__Angle_PBP(tempX,tempY,GetUnitX(dummy),GetUnitY(dummy))
set tempX=GetUnitX(dummy)+(((1200)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((1200)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackEn(dummy,tempX,tempY,0.12,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",dummy,"origin"))
endif
endloop
endif
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==16 then
if stage<=80 and stage-(stage/5)*5==0 then
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
set ef=AddSpecialEffect("war3mapImported\\@EF_[Spell]Swordlight_Black2.mdl",tempX,tempY)
call EXSetEffectSize(ef,5)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_hlm-32.mdl",tempX,tempY)
call EXSetEffectSize(ef,2)
call EXSetEffectZ(ef,150)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_Effect_Invisibility_Target_Black.mdl",tempX,tempY)
call EXSetEffectSize(ef,2)
call EXSetEffectZ(ef,200)
call DestroyEffect(ef)
endif
if stage==25 then
set tempI=0
loop
exitwhen tempI>=Playint
set tempI=tempI+1
set ef=AddSpecialEffect("war3mapImported\\@AOE_AOEIndicator.mdl",GetUnitX(Charcter[PP[tempI]]),GetUnitY(Charcter[PP[tempI]]))
call EXSetEffectSpeed(ef,0.71)
call EXSetEffectSize(ef,6)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$B65911AF+PP[tempI],ef)
endloop
endif
if stage<=59 then
set tempI=0
loop
exitwhen tempI>=Playint
set tempI=tempI+1
set gunit=Charcter[PP[tempI]]
set tempX=GetUnitX(gunit)
set tempY=GetUnitY(gunit)
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$B65911AF+PP[tempI])
call EXSetEffectXY(ef,tempX,tempY)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$A667D652+PP[tempI])
call EXSetEffectXY(ef,tempX,tempY)
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
endloop
endif
if stage==55 then
set tempI=0
loop
exitwhen tempI>=Playint
set tempI=tempI+1
set gunit=Charcter[PP[tempI]]
set tempX=GetUnitX(gunit)
set tempY=GetUnitY(gunit)
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,270)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_MikaEF29.mdl",dummy,"origin"),0.2)
call SetUnitAnimationByIndex(dummy,0)
call SetUnitScale(dummy,5,1,1)
call SetUnitFlyHeight(dummy,3000,0)
call SetUnitFlyHeight(dummy,0,15000)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$A667D652+PP[tempI],dummy)
endloop
endif
if stage==60 then
set tempI=0
loop
exitwhen tempI>=Playint
set tempI=tempI+1
set gunit=Charcter[PP[tempI]]
set tempX=GetUnitX(gunit)
set tempY=GetUnitY(gunit)
set ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$B65911AF+PP[tempI])
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_DarkPillar.mdl",tempX,tempY)
call EXSetEffectSize(ef,10)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_Suzakuin-4.mdl",tempX,tempY)
call EXSetEffectSize(ef,3.25)
call DestroyEffect(ef)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$A667D652+PP[tempI])
call RemoveUnit(dummy)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,600,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
set temp2=LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)+100
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,temp2)
if dummy !=gunit then
call SetUnitInvulnerable(dummy,false)
call GroupRemoveUnit(udg_Mujuk,dummy)
set dmg=(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*1000)+99999999
call Damage(Boss,dummy,dmg,1,0,false,1,0)
endif
endif
endloop
endloop
endif
if stage>=85 and stage<=150 then
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
if stage-(stage/3)*3==0 then
set ef=AddSpecialEffect("war3mapImported\\@EF_MikaEF13.mdl",tempX,tempY)
call EXSetEffectSize(ef,10)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_Nether Blast III Purple.mdl",tempX,tempY)
call EXSetEffectSize(ef,10)
call EXSetEffectSpeed(ef,2)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_dtPupple3.mdl",tempX,tempY)
call EXSetEffectSize(ef,10)
call DestroyEffect(ef)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,4000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
set dmg=(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.5)
call Damage(Boss,dummy,dmg,1,0,false,1,0)
endif
endloop
endif
if stage==150 then
call SetUnitVertexColor(u,255,255,255,255)
call ShowUnit(u,true)
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
if stage>=175 then
call SaveBoolean(udg_Hash,GetHandleId(Boss),$B60A3ED8,true)
set Bossunable=true
set BossunableTime=8.0
call BossText("이런 일 있을 수 없어...!!","war3mapImported\\@SY_BossWarningBB.blp")
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call PauseUnit(u,false)
call SetUnitInvulnerable(u,false)
call SetUnitTimeScale(u,1)
call GroupRemoveUnit(udg_Mujuk,u)
endif
endif
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
set dummy=Charcter[PP[temp]]
if LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)>=1 and LoadEffectHandle(udg_Hash,GetHandleId(dummy),$C3ECBB2B)==null then
set ef=AddSpecialEffectTarget("war3mapImported\\@EF_BB_EF.mdl",dummy,"chest")
call SaveEffectHandle(udg_Hash,GetHandleId(dummy),$C3ECBB2B,ef)
endif
if LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)>=100 then
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,100)
endif
call SetTextTagText(LoadTextTagHandle(udg_Hash,GetHandleId(dummy),$CC229380),I2S(LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A))+"%",0.023)
call SetTextTagPosUnit(LoadTextTagHandle(udg_Hash,GetHandleId(dummy),$CC229380),dummy,-350)
if LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)>=100 and LoadReal(udg_Hash,GetHandleId(dummy),$1F254781)==0 and GetUnitAbilityLevel(dummy,'A00M')==0 then
call SaveReal(udg_Hash,GetHandleId(dummy),$1F254781,5.0)
call UnitAddAbility(dummy,'A00N')
elseif LoadInteger(udg_Hash,GetHandleId(dummy),$5EE1219A)>=100 and LoadReal(udg_Hash,GetHandleId(dummy),$1F254781)!=0 and GetUnitAbilityLevel(dummy,'A00M')==0 then
call SetUnitTimeScale(dummy,0)
call SetUnitVertexColor(dummy,127,127,127,255)
call SaveBoolean(udg_Hash,GetHandleId(dummy),$DD7D2BAE,true)
call Stun2(u,dummy,0.1)
set tempR=LoadReal(udg_Hash,GetHandleId(dummy),$1F254781)-0.04
call SaveReal(udg_Hash,GetHandleId(dummy),$1F254781,tempR)
if tempR<=0 then
call SetUnitTimeScale(dummy,1)
call SetUnitVertexColor(dummy,255,255,255,255)
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,0)
call SaveReal(udg_Hash,GetHandleId(dummy),$DF67A877,10.0)
call DestroyEffect(LoadEffectHandle(udg_Hash,GetHandleId(dummy),$C3ECBB2B))
call SaveEffectHandle(udg_Hash,GetHandleId(dummy),$C3ECBB2B,null)
call SaveBoolean(udg_Hash,GetHandleId(dummy),$DD7D2BAE,false)
call UnitAddAbility(dummy,'A00M')
call BuffCall(dummy,'BS01',10,false,false)
endif
elseif not UnitAlive(dummy)then
call SaveReal(udg_Hash,GetHandleId(dummy),$DF67A877,0)
call UnitRemoveAbility(dummy,'A00M')
call SaveBoolean(udg_Hash,GetHandleId(dummy),$DD7D2BAE,false)
elseif GetUnitAbilityLevel(dummy,'A00M')==1 and LoadReal(udg_Hash,GetHandleId(dummy),$DF67A877)>=0.01 then
set tempR=LoadReal(udg_Hash,GetHandleId(dummy),$DF67A877)-0.04
call SaveReal(udg_Hash,GetHandleId(dummy),$DF67A877,tempR)
call SaveInteger(udg_Hash,GetHandleId(dummy),$5EE1219A,0)
elseif GetUnitAbilityLevel(dummy,'A00M')==1 and LoadReal(udg_Hash,GetHandleId(dummy),$DF67A877)<=0 then
call SaveReal(udg_Hash,GetHandleId(dummy),$DF67A877,0)
call UnitRemoveAbility(dummy,'A00M')
call SaveBoolean(udg_Hash,GetHandleId(dummy),$DD7D2BAE,false)
endif
endloop
call s__party_deallocate((g))
call DestroyGroup(gl2)
set t=null
set u=null
set dummy=null
set l__temp_unit2=null
set gl2=null
set gunit=null
set ef=null
endfunction
function BBSETTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),0)
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local integer a=0
local unit dummy
if stage==99 then
call SaveInteger(udg_Hash,GetHandleId(t),0,0)
loop
exitwhen a==Playint
set a=a+1
call CameraSetupApplyForPlayer(true,gg_cam_BB,Player(PP[a]-1),0)
call PauseUnit(Charcter[PP[a]],true)
if not IsUnitInRangeXY(Charcter[PP[a]],GetRectCenterX(gg_rct_BB_Middle),GetRectCenterY(gg_rct_BB_Middle),5000)then
call SetUnitX(Charcter[PP[a]],GetRectCenterX(gg_rct_BB_Middle)+(((700)*1.0)*Cos(((270)*1.0)*bj_DEGTORAD)))
call SetUnitY(Charcter[PP[a]],GetRectCenterY(gg_rct_BB_Middle)+(((700)*1.0)*Sin(((270)*1.0)*bj_DEGTORAD)))
endif
endloop
set a=0
loop
exitwhen a==Playint
set a=a+1
call vibration2(Player(PP[a]-1),60,1.2)
endloop
call TimerStart(t,1.0,false,function BBSETTimer)
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,2500,1.00)
endif
if stage==0 then
call SaveInteger(udg_Hash,$944CCEB0,2,1)
call TimerStart(t,0.28,false,function BBSETTimer)
call SaveInteger(udg_Hash,GetHandleId(t),0,1)
set a=0
loop
exitwhen a==Playint
set a=a+1
call FilterBasic(Player(PP[a]-1),1.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,100.00,100.00,0.00,100.00,100.00,100.00,100.00)
endloop
endif
if stage==1 then
call KillUnit(gg_unit_h002_0157)
set bj_lastCreatedUnit=CreateUnit(Player(11),'EN51',GetRectCenterX(gg_rct_BB),GetRectCenterY(gg_rct_BB),240)
call SaveUnitHandle(udg_Hash,$944CCEB0,1,bj_lastCreatedUnit)
set Boss=bj_lastCreatedUnit
call UnitAddAbility(Boss,'Amrf')
call UnitRemoveAbility(Boss,'Amrf')
call UnitAddAbility(Boss,'SY10')
call PauseUnit(Boss,true)
call SetUnitInvulnerable(Boss,true)
call GroupAddUnit(udg_Mujuk,Boss)
call TimerStart(t,0.5,false,function BBSETTimer)
call SaveInteger(udg_Hash,GetHandleId(t),0,2)
call BOSSdifficulty2(Boss)
call DPSstart()
endif
if stage==2 then
call TimerStart(t,0.05,false,function BBSETTimer)
call ResetToGameCamera(0)
call SaveInteger(udg_Hash,GetHandleId(t),0,3)
endif
if stage==3 then
set a=0
loop
exitwhen a==Playint
set a=a+1
if(GetLocalPlayer()==Player(PP[a]-1))then
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,udg_int[PP[a]],1.00)
call SetCameraField(CAMERA_FIELD_FARZ,udg_int[PP[a]]*2,1.00)
endif
call SaveInteger(udg_Hash,GetHandleId(Charcter[PP[a]]),$AD509D80,LoadInteger(udg_Hash,PP[a],$39F717C6))
endloop
call IssuePointOrder(Boss,"move",GetRectCenterX(gg_rct_BB_Middle),GetRectCenterY(gg_rct_BB_Middle))
call SetUnitState(Boss,UNIT_STATE_MAX_MANA,10)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set a=0
loop
exitwhen a==Playint
set a=a+1
call BossBar_Setting(Boss,R2I(GetUnitState(Boss,UNIT_STATE_MAX_LIFE)*0.0001))
call BossBar_Apply(Player(PP[a]-1),Boss)
call BuffCall(Charcter[PP[a]],'BS00',99999,false,false)
call PauseUnit(Charcter[PP[a]],false)
call SaveInteger(udg_Hash,GetHandleId(Charcter[PP[a]]),$5EE1219A,0)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SaveTextTagHandle(udg_Hash,GetHandleId(Charcter[PP[a]]),$CC229380,bj_lastCreatedTextTag)
endloop
call UnitRemoveAbility(Boss,'SY10')
call PauseUnit(Boss,false)
call SetUnitInvulnerable(Boss,false)
call GroupRemoveUnit(udg_Mujuk,Boss)
set t=CreateTimer()
call TimerStart(t,0.5,false,function BBPetton)
endif
set t=null
set u=null
set dummy=null
endfunction
function BBSET takes nothing returns nothing
local integer a=0
local timer t=CreateTimer()
call SaveInteger(udg_Hash,0,$CBA714FE,2)
loop
exitwhen a==Playint
set a=a+1
call SetUnitX(Charcter[PP[a]],GetRectCenterX(gg_rct_BB_Middle))
call SetUnitY(Charcter[PP[a]],GetRectCenterY(gg_rct_BB_Middle))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(Charcter[PP[a]]),GetUnitY(Charcter[PP[a]])))
call PanCameraToTimed(GetRectCenterX(gg_rct_BB_Middle),GetRectCenterY(gg_rct_BB_Middle),0.00)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'SY02',false)
call SetUnitState(Charcter[PP[a]],UNIT_STATE_LIFE,GetUnitState(Charcter[PP[a]],UNIT_STATE_MAX_LIFE))
call SetUnitState(Charcter[PP[a]],UNIT_STATE_MANA,GetUnitState(Charcter[PP[a]],UNIT_STATE_MAX_MANA))
endloop
set target=null
set BossBattle=true
call PauseUnit(gg_unit_h000_0013,true)
call SaveBoolean(udg_Hash,$4D0C867E,2,true)
call SaveInteger(udg_Hash,GetHandleId(t),0,99)
call TimerStart(t,3.0,false,function BBSETTimer)
set Bossunable=false
set BossBattleN=true
set BossunableTime=1
set t=null
endfunction
function AngleTrue2 takes real A,real A2,real R returns boolean
local boolean n
if RAbsBJ(A-A2)>180 then
if A<0 then
set A=A+360
endif
if A2<0 then
set A2=A2+360
endif
endif
if A-A2>R*-1 and A-A2<R*1 then
set n=true
else
set n=false
endif
return n
endfunction
function boosCronus__aoefollowT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),1)
local real time=LoadReal(udg_Hash,GetHandleId(t),2)
call SaveReal(udg_Hash,GetHandleId(t),2,time-0.04)
call SetUnitX(u,GetUnitX(tar))
call SetUnitY(u,GetUnitY(tar))
if time<=0 then
call SetUnitVertexColor(u,0,0,0,0)
call RemoveUnit(u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set tar=null
endfunction
function boosCronus__aoefollow takes unit tar,real time returns nothing
local timer t=CreateTimer()
local unit u
set u=CreateUnit(Player(11),'sys9',GetUnitX(tar),GetUnitY(tar),270)
call DzSetUnitModel(u,"war3mapImported\\@AOE_AOEIndicator.mdl")
call SetUnitTimeScale(u,(1/time))
call SetUnitScale(u,5,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),1,tar)
call SaveReal(udg_Hash,GetHandleId(t),2,time)
call TimerStart(t,0.04,true,function boosCronus__aoefollowT)
set tar=null
set t=null
set u=null
endfunction
function CronusCrossAttackT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),1)
local unit c
local integer tempI
local real tempX
local real tempY
local unit u=Boss
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),0)
local real dmg
local effect ef
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),0,stage+1)
if stage==0 then
call SetUnitAnimationByIndex(dummy,7)
call SetUnitTimeScale(dummy,2)
call TimerStart(t,0.01,true,function CronusCrossAttackT)
set tempI=0
loop
exitwhen tempI>=10
set tempI=tempI+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$21309E7B+tempI)
call RemoveUnit(dummy)
endloop
endif
if stage>=0 then
set tempX=GetUnitX(dummy)+(((125)*1.0)*Cos(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((125)*1.0)*Sin(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
if stage-(stage/2)*2==0 then
set ef=AddSpecialEffect("war3mapImported\\@EF_AZ_HeroMonkeyking_Q_blast.mdl",tempX,tempY)
call EXSetEffectSize(ef,2.5)
call DestroyEffect(ef)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,250,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckFBossGroupN(c)and not LoadBoolean(udg_Hash,GetHandleId(c),GetHandleId(t))then
if not IsUnitInGroup(c,udg_Mujuk)then
call Stun(u,c,0.1)
endif
call SaveBoolean(udg_Hash,GetHandleId(c),GetHandleId(t),true)
set dmg=GetUnitState(u,ConvertUnitState(0x12))*1.5+(GetUnitState(c,UNIT_STATE_MAX_LIFE)*0.35)
call Damage(u,c,dmg,1,0,false,1,0)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_WarStompCaster.mdl",c,"origin"))
endif
endloop
if not IsPointPathableALL(tempX,tempY)and stage>=10 then
set stage=40
endif
endif
if stage==40 then
call RemoveUnit(dummy)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,5000,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckFBossGroupN(c)and LoadBoolean(udg_Hash,GetHandleId(c),GetHandleId(t))then
call SaveBoolean(udg_Hash,GetHandleId(c),GetHandleId(t),false)
call RemoveSavedBoolean(udg_Hash,GetHandleId(c),GetHandleId(t))
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set dummy=null
set c=null
set u=null
set ef=null
endfunction
function CronusCrossAttack takes nothing returns nothing
local timer t=CreateTimer()
local unit u=Boss
local unit dummy=null
local unit c=null
local unit d=null
local integer tempI=0
local real tempR
local real tempX
local real tempY
local integer tempI2=LoadInteger(udg_Hash,GetHandleId(Boss),$B377964B)
local integer g=s__party_create()
if tempI2==4 then
call SaveInteger(udg_Hash,GetHandleId(Boss),$B377964B,0)
set tempI2=0
set tempX=GetRectCenterX(gg_rct_Cronus_Middle)
set tempY=GetRectCenterY(gg_rct_Cronus_Middle)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,4000,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckFBossGroupN(c)then
set tempI2=tempI2+1
call SaveUnitHandle(udg_Hash,GetHandleId(Boss),$FC4D8276+tempI2,c)
endif
endloop
if tempI2==0 then
set tempR=GetRandomInt(1,360)
else
set tempI=0
loop
exitwhen d !=null
if tempI>=tempI2 then
set tempI=0
endif
set tempI=tempI+1
if GetRandomInt(1,tempI2)==1 then
set d=LoadUnitHandle(udg_Hash,GetHandleId(Boss),$FC4D8276+tempI)
endif
endloop
set tempR=s__Angle_PBP(GetRectCenterX(gg_rct_Cronus_Middle),GetRectCenterY(gg_rct_Cronus_Middle),GetUnitX(d),GetUnitY(d))-180
endif
else
call SaveInteger(udg_Hash,GetHandleId(Boss),$B377964B,tempI2+1)
set tempR=GetRandomInt(1,360)
endif
set tempX=GetRectCenterX(gg_rct_Cronus_Middle)+(((2500)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetRectCenterY(gg_rct_Cronus_Middle)+(((2500)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,tempR-180)
call DzSetUnitModel(dummy,"war3mapImported\\@C_Cronus2.mdl")
call SetUnitScale(dummy,2,1,1)
call SetUnitVertexColor(dummy,255,255,255,127)
call SaveUnitHandle(udg_Hash,GetHandleId(t),1,dummy)
set tempI=0
loop
exitwhen tempI>=10
set tempI=tempI+1
set tempX=GetUnitX(dummy)+(((tempI*450)*1.0)*Cos(((tempR-180)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((tempI*450)*1.0)*Sin(((tempR-180)*1.0)*bj_DEGTORAD))
set c=CreateUnit(Player(11),'sys9',tempX,tempY,tempR-180)
call DzSetUnitModel(c,"war3mapImported\\@AOE_biaoji_jiantou.mdl")
call SetUnitScale(c,10,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$21309E7B+tempI,c)
endloop
call TimerStart(t,1,false,function CronusCrossAttackT)
call s__party_deallocate((g))
set t=null
set u=null
set dummy=null
set c=null
set d=null
endfunction
function CrPetton takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local integer stage=LoadInteger(udg_Hash,$944CCEB0,2)
local integer PatonNum=LoadInteger(udg_Hash,$944CCEB0,3)
local integer Fulltime=LoadInteger(udg_Hash,$944CCEB0,4)
local integer unableEF=LoadInteger(udg_Hash,$944CCEB0,5)
local integer temp=0
local integer temp2=0
local integer temp3=0
local integer tempI=LoadInteger(udg_Hash,GetHandleId(t),$7ED631F0)
local integer g=s__party_create()
local unit dummy=null
local unit l__temp_unit2=null
local unit gunit=null
local boolean temp_bo=false
local real dmg=0
local real tempR=0
local real tempX=0
local real tempY=0
local real tempX2=0
local real tempY2=0
local effect ef=null
if Bossunable or Bossstun then
if Bossstun and LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call SaveInteger(udg_Hash,$944CCEB0,2,stage+1)
call SaveInteger(udg_Hash,$944CCEB0,4,Fulltime+1)
endif
else
call SaveInteger(udg_Hash,$944CCEB0,2,stage+1)
call SaveInteger(udg_Hash,$944CCEB0,4,Fulltime+1)
endif
if Bossunable and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)!=0 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call PauseUnit(u,false)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
endif
if Bossunable and BossunableTime>0 then
call PauseUnit(u,true)
call SaveInteger(udg_Hash,$944CCEB0,5,unableEF+1)
set BossunableTime=BossunableTime-0.04
if unableEF==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@SY_BossStun.mp3"),(null),(107),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call FilterBasic(Player(PP[temp]-1),3.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,100.00,100.00,0.00,100.00,100.00,100.00,100.00)
endloop
call SetUnitAnimation(u,"death")
set tempX=GetUnitX(u)+(((-150)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-150)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.7,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",u,"origin"))
endif
if unableEF==18 then
call SetUnitTimeScale(u,0)
endif
elseif Bossunable and BossunableTime<=0 then
call PauseUnit(u,false)
set Bossunable=false
set BossunableTime=1
call SaveInteger(udg_Hash,$944CCEB0,5,0)
call SetUnitTimeScale(u,1)
endif
call TimerStart(t,0.04,false,function CrPetton)
if UnitAlive(u)then
call UnitAddAbility(u,'A02A')
if LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call UnitAddAbility(u,'A01A')
call UnitAddAbility(u,'SY10')
elseif not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
if not LoadBoolean(udg_Hash,$F61C5FD6,1)then
call UnitRemoveAbility(u,'A01A')
call UnitRemoveAbility(u,'SY10')
endif
endif
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
set dummy=Charcter[PP[temp]]
if not IsUnitInRangeXY(dummy,GetRectCenterX(gg_rct_Cronus_Middle),GetRectCenterY(gg_rct_Cronus_Middle),6000)then
call SetUnitX(dummy,GetRectCenterX(gg_rct_Cronus_Middle))
call SetUnitY(dummy,GetRectCenterY(gg_rct_Cronus_Middle))
endif
endloop
if not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
if not UnitAlive(target)or(target !=null and not IsUnitInRange(u,target,1800))or IsUnitInGroup(target,udg_Mujuk)or(BossAgro !=null and BossAgro !=target)then
set target=null
endif
if target==null then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),5000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)then
if BossAgro==null or IsUnitInGroup(BossAgro,udg_Mujuk)then
set l__temp_unit2=gunit
elseif BossAgro !=null and l__temp_unit2 !=BossAgro then
set l__temp_unit2=gunit
endif
endif
endloop
set target=l__temp_unit2
else
set l__temp_unit2=target
endif
if l__temp_unit2 !=null then
call IssueTargetOrder(u,"attack",l__temp_unit2)
elseif l__temp_unit2==null then
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call DisplayTimedTextToPlayer(Player(PP[temp]-1),0,0,1,"|cffFF0000[시스템] : 생존중인 플레이어가없어서 보스의 체력이 회복됩니다.")
endloop
if not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call TimerStart(t,1,false,function CrPetton)
endif
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.01))
endif
endif
else
if not LoadBoolean(udg_Hash,GetHandleId(t),$1ECBCEE8)then
call SaveBoolean(udg_Hash,GetHandleId(t),$1ECBCEE8,true)
set stage=0
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call BossText("|cffff0000이럴수는 없어...! 나야말로.. 이 세계의 규칙인데!!","war3mapImported\\@SY_BossWarningCronus.blp")
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call BossBar_End(Player(PP[temp]-1))
set dummy=Charcter[PP[temp]]
endloop
endif
endif
if stage>=50 and not UnitAlive(u)then
set BossBattle=false
if LoadInteger(udg_Hash,999,$3862CC76)<=29 then
set BossBattleN=false
endif
call PauseUnit(gg_unit_h000_0013,false)
call FlushChildHashtable(udg_Hash,$944CCEB0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call FlushChildHashtable(udg_Hash,GetHandleId(u))
call PauseTimer(t)
call DestroyTimer(t)
if LoadInteger(udg_Hash,999,$3862CC76)>=29 then
call BossEND()
endif
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call SetPlayerAbilityAvailable(Player(PP[temp]-1),'SY02',true)
set dummy=Charcter[PP[temp]]
if LoadInteger(udg_Hash,999,$3862CC76)>=29 then
call RemoveUnit(ArtPickProgress[PP[temp]])
endif
call SetUnitX(dummy,GetRectCenterX(gg_rct_AttackZone)+(((500)*1.0)*Cos(((270)*1.0)*bj_DEGTORAD)))
call SetUnitY(dummy,GetRectCenterY(gg_rct_AttackZone)+(((500)*1.0)*Sin(((270)*1.0)*bj_DEGTORAD)))
call PanCameraToTimed(GetRectCenterX(gg_rct_AttackZone),GetRectCenterY(gg_rct_AttackZone),0.00)
if not UnitAlive(dummy)then
call TimerStart(ReviveTimer[PP[temp]],0.01,false,null)
call SaveUnitHandle(System,GetHandleId(ReviveTimer[PP[temp]]),$FAD24066,dummy)
endif
endloop
endif
if UnitAlive(u)then
if stage==175 and LoadInteger(udg_Hash,GetHandleId(t),$D8F3B093)==1 and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)and LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,6)
call SaveInteger(udg_Hash,GetHandleId(t),$D8F3B093,0)
call PauseUnit(u,true)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
endif
if stage==175 and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
set temp=GetRandomint(1,100)
if temp<=20 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,1)
call SaveInteger(udg_Hash,GetHandleId(t),$D8F3B093,1)
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)
call SaveInteger(udg_Hash,GetHandleId(t),$6EB21D2D,temp2+1)
call PauseUnit(u,true)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
elseif temp>=21 and temp<=40 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,2)
call SaveInteger(udg_Hash,GetHandleId(t),$D8F3B093,1)
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)
call SaveInteger(udg_Hash,GetHandleId(t),$6EB21D2D,temp2+1)
call PauseUnit(u,true)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
elseif temp>=41 and temp<=60 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,3)
call SaveInteger(udg_Hash,GetHandleId(t),$D8F3B093,1)
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)
call SaveInteger(udg_Hash,GetHandleId(t),$6EB21D2D,temp2+1)
call PauseUnit(u,true)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
elseif temp>=61 and temp<=80 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,4)
call SaveInteger(udg_Hash,GetHandleId(t),$D8F3B093,1)
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)
call SaveInteger(udg_Hash,GetHandleId(t),$6EB21D2D,temp2+1)
call PauseUnit(u,true)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
elseif temp>=81 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,5)
call SaveInteger(udg_Hash,GetHandleId(t),$D8F3B093,1)
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6EB21D2D)
call SaveInteger(udg_Hash,GetHandleId(t),$6EB21D2D,temp2+1)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
endif
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==1 then
if stage==0 then
call SetUnitAnimationByIndex(u,8)
set temp=0
set tempX=GetRectCenterX(gg_rct_Cronus_Middle)
set tempY=GetRectCenterY(gg_rct_Cronus_Middle)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,4000,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)and IsUnitType(l__temp_unit2,UNIT_TYPE_HERO)then
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2),270)
call DzSetUnitModel(dummy,"war3mapImported\\@EF_SnipingTarget.mdl")
call SetUnitScale(dummy,2,1,1)
call SetUnitFlyHeight(dummy,300,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$1561422F+temp,dummy)
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2),270)
call DzSetUnitModel(dummy,"war3mapImported\\@AOE_AOEIndicator.mdl")
if LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)or difficulty==4 then
call SetUnitScale(dummy,2.5,1,1)
elseif not LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)or difficulty<=3 then
call SetUnitScale(dummy,2,1,1)
endif
call SetUnitTimeScale(dummy,1/1.6)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$82857B65+temp,dummy)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$E7E07DD7+temp,l__temp_unit2)
set temp=temp+1
endif
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$CE74D586,temp)
endif
if stage==7 then
call SetUnitTimeScale(u,0)
endif
if stage>=1 and stage<=25 then
set temp=LoadInteger(udg_Hash,GetHandleId(t),$CE74D586)+1
loop
exitwhen temp==0
set temp=temp-1
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$E7E07DD7+temp)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$82857B65+temp)
call SetUnitX(dummy,GetUnitX(l__temp_unit2))
call SetUnitY(dummy,GetUnitY(l__temp_unit2))
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$1561422F+temp)
call SetUnitX(dummy,GetUnitX(l__temp_unit2))
call SetUnitY(dummy,GetUnitY(l__temp_unit2))
endloop
endif
if stage==40 then
call SetUnitTimeScale(u,1)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_CronusGunShot.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StopSound(udg_SND,false,false)
call StartSound(udg_SND)
set temp=LoadInteger(udg_Hash,GetHandleId(t),$CE74D586)+1
loop
exitwhen temp==0
set temp=temp-1
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$E7E07DD7+temp,dummy)
call RemoveUnit(dummy)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$82857B65+temp)
call SetUnitVertexColor(dummy,0,0,0,0)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
call RemoveUnit(dummy)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$1561422F+temp)
call SetUnitVertexColor(dummy,0,0,0,0)
call RemoveUnit(dummy)
set ef=AddSpecialEffect("war3mapImported\\@EF_VFX_HITcritverylowRedB.mdl",tempX,tempY)
call EXSetEffectSize(ef,3)
call EXSetEffectZ(ef,-100)
set ef=AddSpecialEffect("war3mapImported\\@EF_AZ_Akasha(2)_F_Caster.mdl",tempX,tempY)
if LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)or difficulty==4 then
call EXSetEffectSize(ef,2)
endif
set ef=AddSpecialEffect("war3mapImported\\@EF_WarStompCaster.mdl",tempX,tempY)
if LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)or difficulty==4 then
call EXSetEffectSize(ef,2)
endif
if LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)or difficulty==4 then
set tempR=250
elseif not LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)or difficulty<=3 then
set tempR=200
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,tempR,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
if not IsUnitInGroup(dummy,udg_Mujuk)then
call Stun(u,dummy,1.0)
endif
set dmg=GetUnitState(u,ConvertUnitState(0x12))*2.5+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.2)
call Damage(u,dummy,dmg,1,0,false,1,0)
endif
endloop
endloop
endif
if stage==45 then
if not LoadBoolean(udg_Hash,GetHandleId(t),$1F52FC61)then
call SaveInteger(udg_Hash,$944CCEB0,2,-5)
call SaveBoolean(udg_Hash,GetHandleId(t),$1F52FC61,true)
else
call SaveBoolean(udg_Hash,GetHandleId(t),$1F52FC61,false)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,tempI)
call PauseUnit(u,false)
endif
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==2 then
if stage==0 then
call SetUnitAnimationByIndex(u,14)
set tempX=GetRectCenterX(gg_rct_Cronus_Middle)
set tempY=GetRectCenterY(gg_rct_Cronus_Middle)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,4000,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)then
if BossAgro==null then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,l__temp_unit2)
set gunit=l__temp_unit2
elseif BossAgro !=null and gunit !=BossAgro then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,l__temp_unit2)
set gunit=l__temp_unit2
endif
endif
endloop
if gunit==null then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,3,0)
call SaveInteger(udg_Hash,$944CCEB0,2,tempI)
call PauseUnit(u,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
else
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_mx215.mdl",gunit,"origin"),1)
endif
endif
if stage==5 then
call SetUnitTimeScale(u,0)
endif
if stage<=25 then
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))
call SetUnitFacing(u,tempR)
call EXSetUnitFacing(u,tempR)
if stage-(stage/4)*4==0 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_Cr_cronus_effect2.mdl",u,"hand right"))
endif
endif
if stage==22 then
call SetUnitTimeScale(u,1)
endif
if stage==25 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_CronusHowling.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Cronus_SquarAttack.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,tempR)
call DzSetUnitModel(dummy,"war3mapImported\\@EF_Cr_cronus_effect1.mdl")
call SetUnitFlyHeight(dummy,150,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$60F2361F,dummy)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))+20
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,tempR)
call DzSetUnitModel(dummy,"war3mapImported\\@EF_Cr_cronus_effect1.mdl")
call SetUnitFlyHeight(dummy,150,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B1B13F6E,dummy)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))-20
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,tempR)
call DzSetUnitModel(dummy,"war3mapImported\\@EF_Cr_cronus_effect1.mdl")
call SetUnitFlyHeight(dummy,150,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$13FF5B19,dummy)
if LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)or difficulty==4 then
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))+40
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,tempR)
call DzSetUnitModel(dummy,"war3mapImported\\@EF_Cr_cronus_effect1.mdl")
call SetUnitFlyHeight(dummy,150,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$82DF789C,dummy)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))-40
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,tempR)
call DzSetUnitModel(dummy,"war3mapImported\\@EF_Cr_cronus_effect1.mdl")
call SetUnitFlyHeight(dummy,150,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$A6A15787,dummy)
endif
endif
if stage==30 then
call PauseUnit(u,false)
endif
if stage>=25 and stage<=75 then
set temp=0
loop
exitwhen temp==5
if temp==0 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$60F2361F)
elseif temp==1 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$B1B13F6E)
elseif temp==2 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$13FF5B19)
elseif temp==3 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$82DF789C)
elseif temp==4 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$A6A15787)
endif
if dummy !=null then
set ef=AddSpecialEffect("war3mapImported\\@EF_Cr_Cronus_Slam.mdl",GetUnitX(dummy),GetUnitY(dummy))
call EXSetEffectSpeed(ef,2)
call DestroyEffect(ef)
set temp_bo=false
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),200,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)then
if stage-(stage/4)*4==0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",l__temp_unit2,"chest"))
endif
set dmg=GetUnitState(u,ConvertUnitState(0x12))*0.088+(GetUnitState(l__temp_unit2,UNIT_STATE_MAX_LIFE)*0.0022)
call Damage(u,l__temp_unit2,dmg,1,0,false,1,0)
set temp_bo=true
endif
endloop
if temp_bo then
set tempX=GetUnitX(dummy)+(((5)*1.0)*Cos(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((5)*1.0)*Sin(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
elseif not temp_bo then
set tempX=GetUnitX(dummy)+(((100+(stage*2))*1.0)*Cos(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((100+(stage*2))*1.0)*Sin(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
endif
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
elseif not IsPointPathableALL(tempX,tempY)then
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$196CD734+temp)
call SetUnitFacing(dummy,GetUnitFacing(dummy)-180)
call EXSetUnitFacing(dummy,GetUnitFacing(dummy)-180)
call SaveInteger(udg_Hash,GetHandleId(t),$196CD734+temp,0)
else
call SaveInteger(udg_Hash,GetHandleId(t),$196CD734+temp,temp2+1)
endif
endif
set temp=temp+1
endloop
endif
if stage==75 or not UnitAlive(u)then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Cronus_SquarEXP.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set temp=0
loop
exitwhen temp==5
if temp==0 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$60F2361F)
elseif temp==1 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$B1B13F6E)
elseif temp==2 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$13FF5B19)
elseif temp==3 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$82DF789C)
elseif temp==4 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$A6A15787)
endif
if dummy !=null then
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_Cr_CronusE_Eartheffect.mdl",GetUnitX(dummy),GetUnitY(dummy)))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),450,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)then
if not IsUnitInGroup(l__temp_unit2,udg_Mujuk)then
call Stun(u,l__temp_unit2,0.5)
endif
set dmg=GetUnitState(u,ConvertUnitState(0x12))*3+(GetUnitState(l__temp_unit2,UNIT_STATE_MAX_LIFE)*0.25)
call Damage(u,l__temp_unit2,dmg,1,0,false,1,0)
endif
endloop
call RemoveUnit(dummy)
endif
set temp=temp+1
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$196CD734+0,0)
call SaveInteger(udg_Hash,GetHandleId(t),$196CD734+1,0)
call SaveInteger(udg_Hash,GetHandleId(t),$196CD734+2,0)
call SaveInteger(udg_Hash,GetHandleId(t),$196CD734+3,0)
call SaveInteger(udg_Hash,GetHandleId(t),$196CD734+4,0)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,tempI+5)
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==3 then
if stage==0 or stage==37 or stage==67 then
set tempX=GetRectCenterX(gg_rct_Cronus_Middle)
set tempY=GetRectCenterY(gg_rct_Cronus_Middle)
set temp2=0
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,4000,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)and IsUnitType(l__temp_unit2,UNIT_TYPE_HERO)then
set temp2=temp2+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+temp2,l__temp_unit2)
endif
endloop
if temp2==0 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,tempI)
call PauseUnit(u,false)
else
set temp=0
loop
exitwhen gunit !=null
if temp>=temp2 then
set temp=0
endif
set temp=temp+1
if GetRandomInt(1,temp2)==1 then
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+temp)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,gunit)
endif
endloop
set tempX=GetUnitX(gunit)
set tempY=GetUnitY(gunit)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,tempY)
if stage==0 then
call AOE(tempX,tempY,5,1/1.3,1.3)
elseif stage==37 then
call AOE(tempX,tempY,5,1,1)
elseif stage==67 then
call AOE(tempX,tempY,5,1/0.7,0.7)
endif
set temp=0
loop
exitwhen temp==temp2
set temp=temp+1
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+temp,dummy)
call RemoveUnit(dummy)
endloop
endif
endif
if stage==22 or stage==52 or stage==74 then
call SetUnitAnimationByIndex(u,16)
call SetUnitTimeScale(u,0.8)
call UnitAddAbility(u,'SY10')
call SetUnitFlyHeight(u,1500,7500)
if stage==74 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_CronusRiderKick.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
endif
endif
if stage==27 or stage==57 or stage==79 then
call SetUnitFlyHeight(u,0,7500)
set tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
set tempX=tempX+(((-100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=tempY+(((-100)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call SetUnitFacing(u,tempR)
call EXSetUnitFacing(u,tempR)
call KnockBackXY(u,tempX,tempY,0.2,0.02)
endif
if stage==32 or stage==62 or stage==84 then
call SetUnitTimeScale(u,1.5)
call UnitRemoveAbility(u,'SY10')
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_CronusRiderKickEF.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StopSound(udg_SND,false,false)
call StartSound(udg_SND)
set tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_Cr_CronusE_Eartheffect.mdl",tempX,tempY))
set ef=AddSpecialEffect("war3mapImported\\@EF_WindCirclefaster.mdl",tempX,tempY)
call EXSetEffectSize(ef,2)
call DestroyEffect(ef)
set temp=0
loop
exitwhen temp==9
set temp=temp+1
set tempX2=tempX+(((450)*1.0)*Cos(((temp*40)*1.0)*bj_DEGTORAD))
set tempY2=tempY+(((450)*1.0)*Sin(((temp*40)*1.0)*bj_DEGTORAD))
set ef=AddSpecialEffect("war3mapImported\\@EF_Nitu.mdl",tempX2,tempY2)
call EXEffectMatRotateZ(ef,(temp*40)-180)
call EXSetEffectSize(ef,2)
call DestroyEffect(ef)
endloop
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)then
call KnockBackEn(l__temp_unit2,tempX2,tempY2,0.12,0.01)
call Stun(u,l__temp_unit2,0.5)
set dmg=GetUnitState(u,ConvertUnitState(0x12))*3+(GetUnitState(l__temp_unit2,UNIT_STATE_MAX_LIFE)*0.25)
call Damage(u,l__temp_unit2,dmg,1,0,false,1,0)
if not IsUnitInGroup(l__temp_unit2,udg_Mujuk)then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",dummy,"origin"))
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2))
set tempX2=GetUnitX(l__temp_unit2)+(((300)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(l__temp_unit2)+(((300)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
endif
endif
endloop
if stage==62 and not LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)and difficulty<=3 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,tempI)
call SetUnitTimeScale(u,1)
call PauseUnit(u,false)
elseif stage==84 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,tempI)
call SetUnitTimeScale(u,1)
call PauseUnit(u,false)
endif
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==4 then
if stage==0 then
call SetUnitAnimationByIndex(u,14)
call SetUnitTimeScale(u,0.5)
set tempX=GetRectCenterX(gg_rct_Cronus_Middle)
set tempY=GetRectCenterY(gg_rct_Cronus_Middle)
set temp2=0
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,4000,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)and IsUnitType(l__temp_unit2,UNIT_TYPE_HERO)then
set temp2=temp2+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+temp2,l__temp_unit2)
endif
endloop
if temp2==0 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
else
set temp=0
loop
exitwhen gunit !=null
if temp>=temp2 then
set temp=0
endif
set temp=temp+1
if GetRandomInt(1,temp2)==1 then
set gunit=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+temp)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,gunit)
endif
endloop
set tempX=GetUnitX(gunit)
set tempY=GetUnitY(gunit)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,tempY)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))
set tempX=GetUnitX(gunit)+(((100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(gunit)+(((100)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(u),GetUnitY(u)))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
set temp=0
loop
exitwhen temp==temp2
set temp=temp+1
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+temp,dummy)
call RemoveUnit(dummy)
endloop
endif
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call AOE(tempX,tempY,7,1,1)
set temp=0
set tempX=GetRectCenterX(gg_rct_Cronus_Middle)
set tempY=GetRectCenterY(gg_rct_Cronus_Middle)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,4000,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)and IsUnitType(l__temp_unit2,UNIT_TYPE_HERO)then
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2),270)
call DzSetUnitModel(dummy,"war3mapImported\\@EF_SnipingTarget.mdl")
call SetUnitScale(dummy,2,1,1)
call SetUnitFlyHeight(dummy,300,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$1561422F+temp,dummy)
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2),270)
call DzSetUnitModel(dummy,"war3mapImported\\@AOE_AOEIndicator.mdl")
if LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)or difficulty==4 then
call SetUnitScale(dummy,2.5,1,1)
elseif not LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)or difficulty<=3 then
call SetUnitScale(dummy,2,1,1)
endif
call SetUnitTimeScale(dummy,1/1.6)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$82857B65+temp,dummy)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$E7E07DD7+temp,l__temp_unit2)
set temp=temp+1
endif
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$CE74D586,temp)
endif
if stage>=1 and stage<=25 then
set temp=LoadInteger(udg_Hash,GetHandleId(t),$CE74D586)+1
loop
exitwhen temp==0
set temp=temp-1
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$E7E07DD7+temp)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$82857B65+temp)
call SetUnitX(dummy,GetUnitX(l__temp_unit2))
call SetUnitY(dummy,GetUnitY(l__temp_unit2))
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$1561422F+temp)
call SetUnitX(dummy,GetUnitX(l__temp_unit2))
call SetUnitY(dummy,GetUnitY(l__temp_unit2))
endloop
endif
if stage==25 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Cronus_Attack.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StopSound(udg_SND,false,false)
call StartSound(udg_SND)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set ef=AddSpecialEffect("war3mapImported\\@EF_by_wood_effect_yuanbanlin_sand2.mdl",tempX,tempY)
call EXSetEffectSize(ef,2)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_WARRR211.mdl",tempX,tempY)
call EXSetEffectSize(ef,2.5)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_Cr_Cronus_Slam.mdl",tempX,tempY)
call EXSetEffectSize(ef,4)
call DestroyEffect(ef)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,700,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)then
set dmg=GetUnitState(u,ConvertUnitState(0x12))*3.5+(GetUnitState(l__temp_unit2,UNIT_STATE_MAX_LIFE)*0.1)
call Damage(u,l__temp_unit2,dmg,1,0,false,1,0)
endif
endloop
endif
if stage==33 then
call SetUnitAnimationByIndex(u,14)
endif
if stage==40 then
call SetUnitTimeScale(u,1)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_CronusGunShot.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set temp=LoadInteger(udg_Hash,GetHandleId(t),$CE74D586)+1
loop
exitwhen temp==0
set temp=temp-1
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$E7E07DD7+temp,dummy)
call RemoveUnit(dummy)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$82857B65+temp)
call SetUnitVertexColor(dummy,0,0,0,0)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
call RemoveUnit(dummy)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$1561422F+temp)
call SetUnitVertexColor(dummy,0,0,0,0)
call RemoveUnit(dummy)
set ef=AddSpecialEffect("war3mapImported\\@EF_VFX_HITcritverylowRedB.mdl",tempX,tempY)
call EXSetEffectSize(ef,3)
call EXSetEffectZ(ef,-100)
set ef=AddSpecialEffect("war3mapImported\\@EF_AZ_Akasha(2)_F_Caster.mdl",tempX,tempY)
if LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)or difficulty==4 then
call EXSetEffectSize(ef,2)
endif
set ef=AddSpecialEffect("war3mapImported\\@EF_WarStompCaster.mdl",tempX,tempY)
if LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)or difficulty==4 then
call EXSetEffectSize(ef,2)
endif
if LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)or difficulty==4 then
set tempR=250
elseif not LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)or difficulty<=3 then
set tempR=200
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,tempR,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
if not IsUnitInGroup(dummy,udg_Mujuk)then
call Stun(u,dummy,1.0)
endif
set dmg=GetUnitState(u,ConvertUnitState(0x12))*2.5+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.2)
call Damage(u,dummy,dmg,1,0,false,1,0)
endif
endloop
endloop
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,tempI+15)
call SetUnitTimeScale(u,1)
call PauseUnit(u,false)
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==5 then
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_CronusPause.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
call boosCronus__aoefollow(u,3)
set tempX=GetUnitX(u)+(((-100)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-100)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,GetUnitFacing(u))
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_SakuyaWorld.mdl",dummy,"origin"),3)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$F8FDC85E,dummy)
call SetUnitVertexColor(dummy,0,255,0,255)
call SetUnitFlyHeight(dummy,500,0)
call SetUnitAnimationByIndex(dummy,0)
call SetUnitScale(dummy,0.5,1,1)
call SaveBoolean(udg_Hash,GetHandleId(u),$5CE873F2,true)
call SaveReal(udg_Hash,GetHandleId(u),$91803829,0)
endif
if stage>=0 then
set tempX=GetUnitX(u)+(((-100)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-100)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$F8FDC85E)
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call SetUnitFacing(dummy,GetUnitFacing(u)+270)
call EXSetUnitFacing(dummy,GetUnitFacing(u)+270)
endif
if stage==75 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_CronusRestart.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$F8FDC85E)
call RemoveUnit(dummy)
call SaveBoolean(udg_Hash,GetHandleId(u),$5CE873F2,false)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set ef=AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UCancelDeath\\UCancelDeath.mdl",tempX,tempY)
call EXSetEffectSize(ef,4)
call DestroyEffect(ef)
set dmg=LoadReal(udg_Hash,GetHandleId(u),$91803829)
if LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)or difficulty==4 then
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)and not IsUnitInGroup(l__temp_unit2,udg_Mujuk)then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",l__temp_unit2,"origin"))
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2))
set tempX2=GetUnitX(l__temp_unit2)+(((500)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(l__temp_unit2)+(((500)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackEn(l__temp_unit2,tempX2,tempY2,0.4,0.01)
call Stun(u,l__temp_unit2,0.5)
call Damage(u,l__temp_unit2,dmg*0.35,1,0,false,1,0)
endif
endloop
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+(dmg*0.4))
else
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+(dmg*0.2))
endif
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,tempI+15)
call SetUnitTimeScale(u,1)
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==6 then
if stage==0 then
call SetUnitAnimationByIndex(u,9)
call UnitAddAbility(u,'SY10')
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,GetUnitFacing(u)-180)
set ef=AddSpecialEffect("war3mapImported\\@AOE_AOEIndicator_Half.mdl",tempX,tempY)
call EXEffectMatRotateZ(ef,GetUnitFacing(u)-180)
call EXSetEffectSize(ef,5)
call EDestroy(ef,1)
endif
if stage==25 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_CronusHowling2.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call UnitRemoveAbility(u,'SY10')
set temp=6
loop
exitwhen temp==11
set temp=temp+1
set tempX2=tempX+(((350)*1.0)*Cos(((GetUnitFacing(u)+((temp*40)))*1.0)*bj_DEGTORAD))
set tempY2=tempY+(((350)*1.0)*Sin(((GetUnitFacing(u)+((temp*40)))*1.0)*bj_DEGTORAD))
set ef=AddSpecialEffect("war3mapImported\\@EF_Nitu.mdl",tempX2,tempY2)
call EXEffectMatRotateZ(ef,(GetUnitFacing(u)+(temp*40))-180)
call EXSetEffectSize(ef,2)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_AZ_HeroMonkeyking_Q_blast.mdl",tempX2,tempY2)
call EXEffectMatRotateZ(ef,(GetUnitFacing(u)+(temp*40)))
call EXSetEffectSize(ef,2)
call DestroyEffect(ef)
endloop
set temp_bo=false
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,550,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)then
if AngleTrue2(s__Angle_WBW(u,l__temp_unit2),GetUnitFacing(u),90)then
set temp_bo=true
if not IsUnitInGroup(l__temp_unit2,udg_Mujuk)then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",l__temp_unit2,"origin"))
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2))
set tempX2=GetUnitX(l__temp_unit2)+(((600)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(l__temp_unit2)+(((600)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackEn(l__temp_unit2,tempX2,tempY2,0.4,0.01)
call Stun(u,l__temp_unit2,0.5)
endif
set dmg=GetUnitState(u,ConvertUnitState(0x12))*1.5+(GetUnitState(l__temp_unit2,UNIT_STATE_MAX_LIFE)*0.1)
call Damage(u,l__temp_unit2,dmg,1,0,false,1,0)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_Cr_Shot II Green.mdl",l__temp_unit2,"origin"))
endif
endif
endloop
if temp_bo then
call SaveBoolean(udg_Hash,GetHandleId(t),$A073DD6C,true)
elseif not temp_bo then
call SaveBoolean(udg_Hash,GetHandleId(t),$A073DD6C,false)
endif
endif
if stage==35 then
if not LoadBoolean(udg_Hash,GetHandleId(t),$A073DD6C)then
call SetUnitAnimationByIndex(u,8)
endif
endif
if stage==45 then
if not LoadBoolean(udg_Hash,GetHandleId(t),$A073DD6C)then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_CronusGunShot.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
call SetUnitAnimationByIndex(u,8)
set tempX=GetRectCenterX(gg_rct_Cronus_Middle)
set tempY=GetRectCenterY(gg_rct_Cronus_Middle)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,5000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
set ef=AddSpecialEffect("war3mapImported\\@EF_VFX_HITcritverylowRedB.mdl",tempX,tempY)
call EXSetEffectSize(ef,3)
call EXSetEffectZ(ef,-100)
set ef=AddSpecialEffect("war3mapImported\\@EF_AZ_Akasha(2)_F_Caster.mdl",tempX,tempY)
set ef=AddSpecialEffect("war3mapImported\\@EF_WarStompCaster.mdl",tempX,tempY)
if not IsUnitInGroup(dummy,udg_Mujuk)then
call Stun(u,dummy,1.0)
endif
set dmg=GetUnitState(u,ConvertUnitState(0x12))*3.5+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.1)
call Damage(u,dummy,dmg,1,0,false,1,0)
endif
endloop
endif
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,tempI+10)
call SetUnitTimeScale(u,1)
call PauseUnit(u,false)
endif
endif
if UnitAlive(u)and GetUnitState(u,UNIT_STATE_LIFE)<=(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.6)and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)and not LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)then
call SaveBoolean(udg_Hash,GetHandleId(t),$F9F9084D,true)
call PauseUnit(u,true)
call SetUnitInvulnerable(u,true)
call GroupAddUnit(udg_Mujuk,u)
call SetUnitAnimationByIndex(u,11)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,10)
set stage=999
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call BossText("|cffff0000심판은 내려졌다. 운명의 막이 올랐다!","war3mapImported\\@SY_BossWarningCronus.blp")
call SetUnitMoveSpeed(u,825)
call SaveInteger(udg_Hash,GetHandleId(t),$D8F3B093,0)
call SaveInteger(udg_Hash,GetHandleId(t),$6EB21D2D,0)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_01_Cronus.mdl",tempX,tempY))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,2500,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckBossGroupN(dummy)then
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
set tempX=GetUnitX(dummy)+(((500)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((500)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackXY(dummy,tempX,tempY,0.7,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",dummy,"origin"))
endif
endloop
endif
if stage==17 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==10 then
call PauseUnit(u,false)
call SetUnitInvulnerable(u,false)
call GroupRemoveUnit(udg_Mujuk,u)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,tempI)
call SaveInteger(udg_Hash,GetHandleId(t),$7ED631F0,(difficulty*30))
endif
if UnitAlive(u)and GetUnitState(u,UNIT_STATE_LIFE)<=(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.25)and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)and not LoadBoolean(udg_Hash,GetHandleId(t),$1BA59AB5)then
call SaveBoolean(udg_Hash,GetHandleId(t),$1BA59AB5,true)
call PauseUnit(u,true)
call SetUnitInvulnerable(u,true)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call GroupAddUnit(udg_Mujuk,u)
call SetUnitAnimationByIndex(u,10)
call invisible(u,0,100,1,0.04)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,15)
set stage=999
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call BossText("|cffff0000자네들의 가치를 증명하게","war3mapImported\\@SY_BossWarningCronus.blp")
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_01_Cronus.mdl",tempX,tempY))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,2500,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckBossGroupN(dummy)then
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
set tempX=GetUnitX(dummy)+(((700)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((700)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackXY(dummy,tempX,tempY,0.7,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",dummy,"origin"))
endif
endloop
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==15 then
if stage==25 then
call ShowUnit(u,false)
endif
if stage>=50 and stage<=300 then
if stage<=99 then
set tempI=8
elseif stage>=100 and stage<=149 then
set tempI=7
elseif stage>=150 and stage<=199 then
set tempI=6
elseif stage>=200 and stage<=249 then
set tempI=5
elseif stage>=250 then
set tempI=4
endif
if stage-(stage/tempI)*tempI==0 then
call CronusCrossAttack()
endif
endif
if stage==325 then
set tempX=GetRectCenterX(gg_rct_Cronus_Middle)
set tempY=GetRectCenterY(gg_rct_Cronus_Middle)
call SetUnitVertexColor(u,255,255,255,255)
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call ShowUnit(u,true)
endif
if stage==335 then
set Bossunable=true
set BossunableTime=8.0
call BossText("큭!! 이런!","war3mapImported\\@SY_BossWarningCronus.blp")
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call PauseUnit(u,false)
call SetUnitInvulnerable(u,false)
call SetUnitTimeScale(u,1)
call GroupRemoveUnit(udg_Mujuk,u)
endif
endif
call s__party_deallocate((g))
set t=null
set u=null
set dummy=null
set l__temp_unit2=null
set gunit=null
set ef=null
endfunction
function CrSETTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),0)
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local integer a=0
local unit dummy
local integer g=s__party_create()
local real tempX
local real tempY
local real tempR
if stage>=0 and stage<=100 then
call SaveInteger(udg_Hash,GetHandleId(t),0,stage-1)
loop
exitwhen a==Playint
set a=a+1
call SetUnitVertexColor(Charcter[PP[a]],stage+155,stage+155,stage+155,255)
if not IsUnitInRangeXY(Charcter[PP[a]],GetRectCenterX(gg_rct_Cronus_Middle),GetRectCenterY(gg_rct_Cronus_Middle),5000)then
call SetUnitX(Charcter[PP[a]],GetRectCenterX(gg_rct_Cronus_Middle)+(((700)*1.0)*Cos(((270)*1.0)*bj_DEGTORAD)))
call SetUnitY(Charcter[PP[a]],GetRectCenterY(gg_rct_Cronus_Middle)+(((700)*1.0)*Sin(((270)*1.0)*bj_DEGTORAD)))
endif
endloop
call TimerStart(t,0.02,false,function CrSETTimer)
if stage==0 then
call SetUnitTimeScale(Charcter[a],0)
call SaveInteger(udg_Hash,GetHandleId(t),0,101)
set a=0
loop
exitwhen a==Playint
set a=a+1
call FilterBasic(Player(PP[a]-1),6.0,"ReplaceableTextures\\CameraMasks\\White_mask.blp",0.00,0.00,0.00,70.00,0.00,0.00,0.00,100.00)
endloop
endif
if stage==100 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_CronusPause.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set dummy=CreateUnit(Player(11),'sys9',GetRectCenterX(gg_rct_Cronus_Middle)-(((100)*1.0)*Cos(((270)*1.0)*bj_DEGTORAD)),GetRectCenterY(gg_rct_Cronus_Middle)-(((100)*1.0)*Sin(((270)*1.0)*bj_DEGTORAD)),180)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_SakuyaWorld.mdl",dummy,"origin"),5)
call SetUnitVertexColor(dummy,0,255,0,255)
call SetUnitFlyHeight(dummy,500,0)
call SetUnitAnimationByIndex(dummy,0)
call UnitRemove(dummy,5)
endif
endif
if stage==101 then
loop
exitwhen a==Playint
set a=a+1
call PauseUnit(Charcter[PP[a]],true)
endloop
set a=0
loop
exitwhen a==9
set a=a+1
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_Cr_cronus_effect2.mdl",GetRectCenterX(gg_rct_Cronus_Middle),GetRectCenterY(gg_rct_Cronus_Middle))
call EXEffectMatRotateZ(bj_lastCreatedEffect,45*a)
call EDestroy(bj_lastCreatedEffect,0.68)
endloop
call SaveInteger(udg_Hash,$944CCEB0,2,1)
call TimerStart(t,0.68,false,function CrSETTimer)
call SaveInteger(udg_Hash,GetHandleId(t),0,102)
endif
if stage==102 then
set bj_lastCreatedUnit=CreateUnit(Player(11),'EN52',GetRectCenterX(gg_rct_Cronus_Middle),GetRectCenterY(gg_rct_Cronus_Middle),270)
call SaveUnitHandle(udg_Hash,$944CCEB0,1,bj_lastCreatedUnit)
set Boss=bj_lastCreatedUnit
call UnitAddAbility(Boss,'Amrf')
call UnitRemoveAbility(Boss,'Amrf')
call UnitAddAbility(Boss,'SY10')
call PauseUnit(Boss,true)
call SetUnitInvulnerable(Boss,true)
call GroupAddUnit(udg_Mujuk,Boss)
call visible(Boss,60,0,1,0.04)
call KnockBackXY(Boss,GetUnitX(Boss)+(((400)*1.0)*Cos(((270)*1.0)*bj_DEGTORAD)),GetUnitY(Boss)+(((400)*1.0)*Sin(((270)*1.0)*bj_DEGTORAD)),1,0.04)
call SetUnitAnimationByIndex(Boss,13)
call TimerStart(t,0.5,false,function CrSETTimer)
call SaveInteger(udg_Hash,GetHandleId(t),0,103)
call BOSSdifficulty2(Boss)
call SetUnitState(Boss,UNIT_STATE_MAX_MANA,10)
call DPSstart()
endif
if stage==103 then
call SetUnitAnimationByIndex(Boss,13)
call TimerStart(t,0.5,false,function CrSETTimer)
call SaveInteger(udg_Hash,GetHandleId(t),0,104)
endif
if stage==104 then
call TimerStart(t,1,false,function CrSETTimer)
call SetUnitAnimationByIndex(Boss,3)
call SetUnitTimeScale(Boss,1)
call SaveInteger(udg_Hash,GetHandleId(t),0,105)
endif
if stage==105 then
call SetUnitAnimationByIndex(Boss,10)
call TimerStart(t,0.3,false,function CrSETTimer)
call SaveInteger(udg_Hash,GetHandleId(t),0,106)
endif
if stage==106 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_CronusRestart.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set a=0
loop
exitwhen a==Playint
set a=a+1
call FilterBasic(Player(PP[a]-1),1.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,100.00,100.00,0.00,100.00,100.00,100.00,100.00)
call SetUnitVertexColor(Charcter[PP[a]],255,255,255,255)
endloop
call TimerStart(t,0.7,false,function CrSETTimer)
call SaveInteger(udg_Hash,GetHandleId(t),0,107)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_WindCirclefaster.mdl",GetUnitX(Boss),GetUnitY(Boss)))
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_shinratensei.mdl",GetUnitX(Boss),GetUnitY(Boss))
call EXSetEffectSize(bj_lastCreatedEffect,5.0)
call DestroyEffect(bj_lastCreatedEffect)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_Dustwind TX012A.mdl",GetUnitX(Boss),GetUnitY(Boss))
call EXSetEffectSize(bj_lastCreatedEffect,10.0)
call EXEffectMatRotateY(bj_lastCreatedEffect,90)
call DestroyEffect(bj_lastCreatedEffect)
set a=0
loop
exitwhen a==Playint
set a=a+1
call ND(Player(PP[a]-1),0.7,60)
endloop
call GroupEnumUnitsInRange((s__party_G[(g)]),GetRectCenterX(gg_rct_Cronus_Middle),GetRectCenterY(gg_rct_Cronus_Middle),5000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckBossGroupN(dummy)then
set tempR=s__Angle_PBP(GetUnitX(Boss),GetUnitY(Boss),GetUnitX(dummy),GetUnitY(dummy))
set tempX=GetUnitX(dummy)+(((500)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((500)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackXY(dummy,tempX,tempY,0.3,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",dummy,"origin"))
endif
endloop
call RemoveUnit(gg_unit_h006_0127)
call RemoveUnit(gg_unit_h006_0128)
call RemoveUnit(gg_unit_h006_0129)
call RemoveUnit(gg_unit_h006_0130)
endif
if stage==107 then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set a=0
loop
exitwhen a==Playint
set a=a+1
call SaveInteger(udg_Hash,GetHandleId(Charcter[PP[a]]),$AD509D80,LoadInteger(udg_Hash,PP[a],$39F717C6))
endloop
set a=0
loop
exitwhen a==Playint
set a=a+1
call BossBar_Setting(Boss,R2I(GetUnitState(Boss,UNIT_STATE_MAX_LIFE)*0.0001))
call BossBar_Apply(Player(PP[a]-1),Boss)
call PauseUnit(Charcter[PP[a]],false)
call SetUnitTimeScale(Charcter[PP[a]],1)
endloop
call UnitRemoveAbility(Boss,'SY10')
call PauseUnit(Boss,false)
call SetUnitInvulnerable(Boss,false)
call GroupRemoveUnit(udg_Mujuk,Boss)
set t=CreateTimer()
call TimerStart(t,0.5,false,function CrPetton)
call SaveInteger(udg_Hash,GetHandleId(t),$7ED631F0,(difficulty*15))
endif
call s__party_deallocate((g))
set t=null
set u=null
set dummy=null
endfunction
function CrSET takes nothing returns nothing
local integer a=0
local timer t=CreateTimer()
call SaveInteger(udg_Hash,0,$CBA714FE,3)
call SetUnitAnimation(gg_unit_h006_0127,"stand")
call SetUnitAnimation(gg_unit_h006_0128,"stand")
call SetUnitAnimation(gg_unit_h006_0129,"stand")
call SetUnitAnimation(gg_unit_h006_0130,"stand")
call PanCameraToTimed(GetRectCenterX(gg_rct_Cronus_Middle),GetRectCenterY(gg_rct_Cronus_Middle),0.00)
loop
exitwhen a==Playint
set a=a+1
call SetPlayerAbilityAvailable(Player(PP[a]-1),'SY02',false)
call SetUnitX(Charcter[PP[a]],GetRectCenterX(gg_rct_Cronus_Middle)+(((1500)*1.0)*Cos(((270)*1.0)*bj_DEGTORAD)))
call SetUnitY(Charcter[PP[a]],GetRectCenterY(gg_rct_Cronus_Middle)+(((1500)*1.0)*Sin(((270)*1.0)*bj_DEGTORAD)))
call SetUnitState(Charcter[PP[a]],UNIT_STATE_LIFE,GetUnitState(Charcter[PP[a]],UNIT_STATE_MAX_LIFE))
call SetUnitState(Charcter[PP[a]],UNIT_STATE_MANA,GetUnitState(Charcter[PP[a]],UNIT_STATE_MAX_MANA))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(Charcter[a]),GetUnitY(Charcter[a])))
endloop
set target=null
set BossBattle=true
set BossBattleN=false
call SaveBoolean(udg_Hash,$4D0C867E,3,true)
call SaveInteger(udg_Hash,GetHandleId(t),0,100)
call TimerStart(t,3.0,false,function CrSETTimer)
set Bossunable=false
set BossBattleN=true
set BossunableTime=1
set t=null
endfunction
function boosTauren__aoefollowT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),1)
local real time=LoadReal(udg_Hash,GetHandleId(t),2)
call SaveReal(udg_Hash,GetHandleId(t),2,time-0.04)
call SetUnitX(u,GetUnitX(tar))
call SetUnitY(u,GetUnitY(tar))
if time<=0 then
call SetUnitVertexColor(u,0,0,0,0)
call RemoveUnit(u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set tar=null
endfunction
function boosTauren__aoefollow takes unit tar,real time returns nothing
local timer t=CreateTimer()
local unit u
set u=CreateUnit(Player(11),'sys9',GetUnitX(tar),GetUnitY(tar),270)
call DzSetUnitModel(u,"war3mapImported\\@AOE_AOEIndicator.mdl")
call SetUnitTimeScale(u,(1/time))
call SetUnitScale(u,4,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),1,tar)
call SaveReal(udg_Hash,GetHandleId(t),2,time)
call TimerStart(t,0.04,true,function boosTauren__aoefollowT)
set tar=null
set t=null
set u=null
endfunction
function TaurenStoneT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit dummy
local unit c
local integer tempI
local real tempR
local real tempX
local real tempY
local integer point=LoadInteger(udg_Hash,GetHandleId(t),0)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),1)
local unit u=Boss
local real dmg
local integer g=s__party_create()
if stage==0 then
if point==1 then
set tempI=0
loop
exitwhen tempI>=10+(Playint*2)+(difficulty*3)
set tempI=tempI+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$A02BAE3E+tempI)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$85540A96+tempI)
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,270)
call DzSetUnitModel(dummy,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call SetUnitScale(dummy,tempR*2,1,1)
call SetUnitFlyHeight(dummy,2000,0)
call SetUnitFlyHeight(dummy,0,13333)
call UnitApplyTimedLife(dummy,'BHwe',0.15)
endloop
elseif point==2 then
set tempI=0
loop
exitwhen tempI>=18+(Playint*3)+(difficulty*3)
set tempI=tempI+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$A02BAE3E+tempI)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$85540A96+tempI)
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,270)
call DzSetUnitModel(dummy,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call SetUnitScale(dummy,tempR*2,1,1)
call SetUnitFlyHeight(dummy,2000,0)
call SetUnitFlyHeight(dummy,0,13333)
call UnitApplyTimedLife(dummy,'BHwe',0.15)
endloop
endif
call TimerStart(t,0.15,false,function TaurenStoneT)
call SaveInteger(udg_Hash,GetHandleId(t),1,1)
elseif stage==1 then
if point==1 then
set tempI=0
loop
exitwhen tempI>=10+(Playint*2)+(difficulty*3)
set tempI=tempI+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$A02BAE3E+tempI)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$85540A96+tempI)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_WarStompCaster.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,0.5*tempR)
call DestroyEffect(bj_lastCreatedEffect)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,tempR*100,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckBossGroupN(c)then
call Stun(u,c,0.1)
set dmg=GetUnitState(u,ConvertUnitState(0x12))+(GetUnitState(c,UNIT_STATE_MAX_LIFE)*0.1)
call Damage(u,c,dmg,1,0,false,1,0)
endif
endloop
call SetUnitVertexColor(dummy,0,0,0,0)
call RemoveUnit(dummy)
endloop
elseif point==2 then
set tempI=0
loop
exitwhen tempI>=18+(Playint*3)+(difficulty*3)
set tempI=tempI+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$A02BAE3E+tempI)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$85540A96+tempI)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_WarStompCaster.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,0.5*tempR)
call DestroyEffect(bj_lastCreatedEffect)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,tempR*100,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckBossGroupN(c)then
call Stun(u,c,0.1)
set dmg=GetUnitState(u,ConvertUnitState(0x12))+(GetUnitState(c,UNIT_STATE_MAX_LIFE)*0.1)
call Damage(u,c,dmg,1,0,false,1,0)
endif
endloop
call SetUnitVertexColor(dummy,0,0,0,0)
call RemoveUnit(dummy)
endloop
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set dummy=null
set c=null
endfunction
function TaurenStone takes integer point returns nothing
local timer t=CreateTimer()
local unit u=Boss
local unit dummy
local integer tempI=0
local real tempR
local real tempX
local real tempY
loop
exitwhen tempI>=Playint
set tempI=tempI+1
call ND(Player(PP[tempI]-1),0.1,45)
endloop
if point==1 then
set tempI=0
loop
exitwhen tempI>=10+(Playint*2)+(difficulty*3)
set tempI=tempI+1
set tempR=GetRandomReal(0,360)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set tempX=tempX+(((SquareRoot(GetRandomReal(0,(1500.00*1500.00))))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=tempY+(((SquareRoot(GetRandomReal(0,(1500.00*1500.00))))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,270)
call DzSetUnitModel(dummy,"war3mapImported\\@AOE_AOEIndicator.mdl")
set tempR=GetRandomReal(1,3)
call SetUnitScale(dummy,tempR,1,1)
call SaveReal(udg_Hash,GetHandleId(t),$85540A96+tempI,tempR)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$A02BAE3E+tempI,dummy)
endloop
elseif point==2 then
set tempI=0
loop
exitwhen tempI>=18+(Playint*3)+(difficulty*3)
set tempI=tempI+1
set tempR=GetRandomReal(0,360)
set tempX=GetRectCenterX(gg_rct_Taurren_Middle)
set tempY=GetRectCenterY(gg_rct_Taurren_Middle)
set tempX=tempX+(((SquareRoot(GetRandomReal(0,(3000.00*3000.00))))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=tempY+(((SquareRoot(GetRandomReal(0,(3000.00*3000.00))))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,270)
call DzSetUnitModel(dummy,"war3mapImported\\@AOE_AOEIndicator.mdl")
set tempR=GetRandomReal(0.5,3)
call SetUnitScale(dummy,tempR,1,1)
call SaveReal(udg_Hash,GetHandleId(t),$85540A96+tempI,tempR)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$A02BAE3E+tempI,dummy)
endloop
endif
call SaveInteger(udg_Hash,GetHandleId(t),0,point)
call TimerStart(t,0.85,false,function TaurenStoneT)
set t=null
set u=null
endfunction
function TaurenPetton takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local integer stage=LoadInteger(udg_Hash,$944CCEB0,2)
local integer PatonNum=LoadInteger(udg_Hash,$944CCEB0,3)
local integer Fulltime=LoadInteger(udg_Hash,$944CCEB0,4)
local integer unableEF=LoadInteger(udg_Hash,$944CCEB0,5)
local integer temp
local integer temp2
local integer g=s__party_create()
local unit dummy=null
local unit l__temp_unit2=null
local unit gunit=null
local boolean temp_bo=false
local real dmg
local real tempR
local real tempX
local real tempY
local effect ef
local group gl2=CreateGroup()
if not Bossunable then
call SaveInteger(udg_Hash,$944CCEB0,2,stage+1)
call SaveInteger(udg_Hash,$944CCEB0,4,Fulltime+1)
endif
if Bossunable and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)!=0 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
endif
if Bossunable and BossunableTime>0 then
call PauseUnit(u,true)
call SaveInteger(udg_Hash,$944CCEB0,5,unableEF+1)
set BossunableTime=BossunableTime-0.1
if unableEF==0 then
set temp=0
loop
exitwhen temp==5
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@SY_BossStun.mp3"),(null),(107),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
call FilterBasic(Player(temp),3.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,100.00,100.00,0.00,100.00,100.00,100.00,100.00)
set temp=temp+1
endloop
call SetUnitAnimationByIndex(u,10)
set tempX=GetUnitX(u)+(((-150)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-150)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.7,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",u,"origin"))
endif
if unableEF==7 then
call SetUnitTimeScale(u,0)
endif
elseif Bossunable and BossunableTime<=0 then
call PauseUnit(u,false)
set Bossunable=false
set BossunableTime=1
call SaveInteger(udg_Hash,$944CCEB0,5,0)
call SetUnitTimeScale(u,1)
endif
call TimerStart(t,0.1,false,function TaurenPetton)
if UnitAlive(u)then
call UnitAddAbility(u,'A02A')
if LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call UnitAddAbility(u,'A01A')
call UnitAddAbility(u,'SY10')
elseif not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
if not LoadBoolean(udg_Hash,$F61C5FD6,1)then
call UnitRemoveAbility(u,'A01A')
call UnitRemoveAbility(u,'SY10')
endif
endif
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
set dummy=Charcter[PP[temp]]
if not IsUnitInRangeXY(dummy,GetRectCenterX(gg_rct_Taurren_Middle),GetRectCenterY(gg_rct_Taurren_Middle),6000)then
call SetUnitX(dummy,GetRectCenterX(gg_rct_Taurren_Middle))
call SetUnitY(dummy,GetRectCenterY(gg_rct_Taurren_Middle))
endif
endloop
if not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
if not UnitAlive(target)or(target !=null and not IsUnitInRange(u,target,1800))or IsUnitInGroup(target,udg_Mujuk)or(BossAgro !=null and BossAgro !=target)then
set target=null
endif
if target==null then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),5000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)then
if BossAgro==null or IsUnitInGroup(BossAgro,udg_Mujuk)then
set l__temp_unit2=gunit
elseif BossAgro !=null and l__temp_unit2 !=BossAgro then
set l__temp_unit2=gunit
endif
endif
endloop
set target=l__temp_unit2
else
set l__temp_unit2=target
endif
if l__temp_unit2 !=null then
call IssueTargetOrder(u,"attack",l__temp_unit2)
elseif l__temp_unit2==null then
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call DisplayTimedTextToPlayer(Player(PP[temp]-1),0,0,1,"|cffFF0000[시스템] : 생존 중인 플레이어가 없어서 보스의 체력이 회복됩니다.")
endloop
if not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call TimerStart(t,1,false,function TaurenPetton)
endif
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.01))
endif
endif
else
if not LoadBoolean(udg_Hash,GetHandleId(t),$1ECBCEE8)then
call SaveBoolean(udg_Hash,GetHandleId(t),$1ECBCEE8,true)
set stage=0
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call BossText("내가 패배했다고...??","war3mapImported\\@SY_BossWarningTauren.blp")
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call BossBar_End(Player(PP[temp]-1))
endloop
endif
endif
if stage==15 and not UnitAlive(u)then
set BossBattle=false
if LoadInteger(udg_Hash,999,$3862CC76)<=29 then
set BossBattleN=false
endif
call PauseUnit(gg_unit_h000_0013,false)
call FlushChildHashtable(udg_Hash,$944CCEB0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
if LoadInteger(udg_Hash,999,$3862CC76)>=29 then
call BossEND()
endif
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call BossBar_End(Player(PP[temp]-1))
call SetPlayerAbilityAvailable(Player(PP[temp]-1),'SY02',true)
if LoadInteger(udg_Hash,999,$3862CC76)>=29 then
call RemoveUnit(ArtPickProgress[PP[temp]])
endif
set dummy=Charcter[PP[temp]]
call SetUnitX(dummy,GetRectCenterX(gg_rct_AttackZone)+(((500)*1.0)*Cos(((270)*1.0)*bj_DEGTORAD)))
call SetUnitY(dummy,GetRectCenterY(gg_rct_AttackZone)+(((500)*1.0)*Sin(((270)*1.0)*bj_DEGTORAD)))
call PanCameraToTimed(GetRectCenterX(gg_rct_AttackZone),GetRectCenterY(gg_rct_AttackZone),0.00)
if not UnitAlive(dummy)then
call TimerStart(ReviveTimer[PP[temp]],0.01,false,null)
call SaveUnitHandle(System,GetHandleId(ReviveTimer[PP[temp]]),$FAD24066,dummy)
endif
endloop
endif
if stage==25 and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,1)
set ef=AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",u,"weapon")
call DestroyEffect(ef)
call PauseUnit(u,true)
call SetUnitAnimationByIndex(u,5)
call SetUnitTimeScale(u,0.5)
endif
if stage>=35 and stage<=36 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==1 then
set tempX=GetUnitX(u)+(((50)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((50)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,GetUnitFacing(u))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_[tx][jn]hengsao.mdl",dummy,"origin"))
call SetUnitScale(dummy,10,1,1)
call KillUnit(dummy)
endif
if stage==35 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==1 then
set tempX=GetUnitX(u)+(((250)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((250)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,700,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckBossGroupN(gunit)and not IsUnitInGroup(gunit,gl2)then
if not IsUnitInGroup(gunit,udg_Mujuk)then
call jump(gunit,0.2,150,0.01)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))
set tempX=GetUnitX(gunit)+(((500)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(gunit)+(((500)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackXY(gunit,tempX,tempY,0.1,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",gunit,"origin"))
endif
call Stun(u,gunit,0.1)
set dmg=GetUnitState(u,ConvertUnitState(0x12))*1.25+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.05)
call Damage(u,gunit,dmg,1,0,false,1,0)
call GroupAddUnit(gl2,gunit)
endif
endloop
set tempX=GetUnitX(u)+(((250)*1.0)*Cos(((GetUnitFacing(u)+260)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((250)*1.0)*Sin(((GetUnitFacing(u)+260)*1.0)*bj_DEGTORAD))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,700,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckBossGroupN(gunit)and not IsUnitInGroup(gunit,gl2)then
if not IsUnitInGroup(gunit,udg_Mujuk)then
call jump(gunit,0.2,150,0.01)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))
set tempX=GetUnitX(gunit)+(((500)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(gunit)+(((500)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackXY(gunit,tempX,tempY,0.1,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",gunit,"origin"))
endif
call Stun(u,gunit,0.1)
set dmg=GetUnitState(u,ConvertUnitState(0x12))*1.25+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.15)
call Damage(u,gunit,dmg,1,0,false,1,0)
endif
endloop
endif
if stage==40 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==1 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SetUnitTimeScale(u,1)
call PauseUnit(u,false)
endif
if stage==51 then
call SaveInteger(udg_Hash,$944CCEB0,3,PatonNum+1)
endif
if PatonNum<=2 and stage==52 and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,2)
call PauseUnit(u,true)
call SetUnitTimeScale(u,1.75)
call SetUnitAnimation(u,"Spell Slam")
set temp=2
set tempX=GetRectCenterX(gg_rct_Taurren_Middle)
set tempY=GetRectCenterY(gg_rct_Taurren_Middle)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,5000,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)and IsUnitType(l__temp_unit2,UNIT_TYPE_HERO)and temp>=1 then
call SaveInteger(udg_Hash,GetHandleId(l__temp_unit2),$EA1356BB,1)
call boosTauren__aoefollow(l__temp_unit2,0.7)
set temp=temp-1
endif
endloop
endif
if stage==59 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Boss_Tauren7.mp3"),(null),(115),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
call SetUnitTimeScale(u,1)
set ef=AddSpecialEffect("war3mapImported\\@EF_WarStompCaster.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(ef,5)
call DestroyEffect(ef)
set temp=0
set tempX=GetRectCenterX(gg_rct_Taurren_Middle)
set tempY=GetRectCenterY(gg_rct_Taurren_Middle)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,5000,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
set temp_bo=false
if LoadInteger(udg_Hash,GetHandleId(l__temp_unit2),$EA1356BB)==1 then
call SaveInteger(udg_Hash,GetHandleId(l__temp_unit2),$EA1356BB,0)
set temp2=0
loop
exitwhen temp2==60
set temp2=temp2+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$679BD101+temp2)
if dummy !=null and IsUnitInRange(dummy,l__temp_unit2,400)then
set temp=temp+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$10F6E11A+temp,l__temp_unit2)
set temp_bo=true
call RemoveUnit(dummy)
exitwhen true
endif
endloop
if not temp_bo then
set temp2=0
loop
set temp2=temp2+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$679BD101+temp2)
exitwhen temp2==60 or dummy==null
endloop
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2),270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$679BD101+temp2,dummy)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_[sz]xueyuanezhou2.mdl",dummy,"origin"),10)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_[sz]xueyuanezhou2.mdl",dummy,"origin"),10)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_[sz]xueyuanezhou2.mdl",dummy,"origin"),10)
call SetUnitScale(dummy,5,1,1)
call UnitRemove(dummy,10)
endif
endif
endloop
if temp>=1 then
loop
exitwhen temp<=0
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$10F6E11A+temp)
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2),270)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_BY_Wood_Sand_YueKongJi.mdl",GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2)))
call UnitRemove(dummy,2)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2),400,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckBossGroupN(gunit)then
if not IsUnitInGroup(gunit,udg_Mujuk)then
call Stun(u,gunit,0.5)
call jumpEn(gunit,0.5,700,0.01)
endif
set dmg=GetUnitState(u,ConvertUnitState(0x12))*3+(GetUnitState(gunit,UNIT_STATE_MAX_LIFE)*0.3)
call Damage(u,gunit,dmg,1,0,false,1,0)
endif
endloop
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$10F6E11A+temp,dummy)
call RemoveUnit(dummy)
set temp=temp-1
endloop
endif
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*10))
call PauseUnit(u,false)
endif
if PatonNum>=3 and stage>=52 and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
set temp=LoadInteger(udg_Hash,GetHandleId(t),$4A514CE9)
if temp>=3 then
call PauseUnit(u,true)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,4)
call SaveInteger(udg_Hash,GetHandleId(t),$4A514CE9,0)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"네놈들을 주시하겠다.",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,0,0,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
call SetTextTagFadepoint(bj_lastCreatedTextTag,3)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Boss_Tauren1.mp3"),(null),(115),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set tempX=GetRectCenterX(gg_rct_Taurren_Middle)
set tempY=GetRectCenterY(gg_rct_Taurren_Middle)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,5000,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)and IsUnitType(l__temp_unit2,UNIT_TYPE_HERO)then
call boosTauren__aoefollow(l__temp_unit2,1.3)
call EDestroy(AddSpecialEffectTarget("Abilities\\Spells\\Other\\SoulBurn\\SoulBurnbuff.mdl",l__temp_unit2,"overhead"),9.6)
endif
endloop
call SetUnitTimeScale(u,0.5)
call SetUnitAnimation(u,"Attack Slam")
else
set temp=GetRandomint(1,100)
call PauseUnit(u,true)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
if temp<=33 then
set temp=LoadInteger(udg_Hash,GetHandleId(t),$4A514CE9)+1
call SaveInteger(udg_Hash,GetHandleId(t),$4A514CE9,temp)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,3)
call SetUnitAnimationByIndex(u,4)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_by_wood_eff_ord_dange_wav_kuosan_1_4_1s.mdl",GetUnitX(u),GetUnitY(u)))
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"찌그러트려주마!!",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,0,0,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
call SetTextTagFadepoint(bj_lastCreatedTextTag,3)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),5000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckBossGroupN(gunit)then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$8FED586B,gunit)
set l__temp_unit2=gunit
endif
endloop
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_mx215.mdl",l__temp_unit2,"origin"),1.5)
elseif temp>=34 and temp<=66 then
set temp=LoadInteger(udg_Hash,GetHandleId(t),$4A514CE9)+1
call SaveInteger(udg_Hash,GetHandleId(t),$4A514CE9,temp)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,6)
call SetUnitAnimationByIndex(u,4)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"으깨주마!!",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,0,0,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
call SetTextTagFadepoint(bj_lastCreatedTextTag,3)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),2500,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
if CheckFBossGroupN(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
if BossAgro==null then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$8FED586B,dummy)
elseif BossAgro !=null then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$8FED586B,dummy)
set l__temp_unit2=dummy
exitwhen l__temp_unit2==BossAgro
endif
endif
exitwhen dummy==null
endloop
call SetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2)))
call EXSetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2)))
set tempX=GetUnitX(u)+(((350)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((350)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call AOE(tempX,tempY,12,0.66,1.5)
elseif temp>=67 then
set temp=LoadInteger(udg_Hash,GetHandleId(t),$4A514CE9)+1
call SaveInteger(udg_Hash,GetHandleId(t),$4A514CE9,temp)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,5)
call SetUnitAnimation(u,"Attack Slam")
call SetUnitTimeScale(u,0.75)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"가루로 만들어주마!",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,0,0,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
call SetTextTagFadepoint(bj_lastCreatedTextTag,3)
endif
endif
endif
if stage==52 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==3 then
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$8FED586B)
call AOE(GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2),10,0.8,1.25)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,GetUnitX(l__temp_unit2))
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,GetUnitY(l__temp_unit2))
endif
if stage==57 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==3 then
call SetUnitFlyHeight(u,10000,50000)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_az_siwenpf1_w1_hui.mdl",GetUnitX(u),GetUnitY(u)))
call SetUnitInvulnerable(u,true)
call GroupAddUnit(udg_Mujuk,u)
endif
if stage==63 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==3 then
call SetUnitFlyHeight(u,0,50000)
set tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call SetUnitTimeScale(u,2)
call SetUnitAnimation(u,"Spell Slam")
endif
if stage==65 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==3 then
call SetUnitInvulnerable(u,false)
call GroupRemoveUnit(udg_Mujuk,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Boss_Tauren6.mp3"),(null),(115),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
call SetUnitTimeScale(u,1)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),1000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckBossGroupN(gunit)then
if not IsUnitInGroup(gunit,udg_Mujuk)then
call jumpEn(gunit,0.5,250,0.01)
call Stun(u,gunit,1)
endif
set dmg=GetUnitState(u,ConvertUnitState(0x12))*4+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.3)
call Damage(u,gunit,dmg,1,0,false,1,0)
endif
endloop
set ef=AddSpecialEffect("war3mapImported\\@EF_34.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(ef,4)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_Archetype_R4.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(ef,6)
call DestroyEffect(ef)
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_[dz.spell]001.mdl",dummy,"origin"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_[dz.spell]001.mdl",dummy,"origin"))
call SetUnitScale(dummy,2,1,1)
call KillUnit(dummy)
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_WarStompCaster.mdl",dummy,"origin"))
call SetUnitVertexColor(dummy,100,0,0,0)
call SetUnitScale(dummy,5,1,1)
call KillUnit(dummy)
call TaurenStone(1)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,3,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*10))
call PauseUnit(u,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
endif
if stage>=52 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==4 then
if stage==70 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Boss_Tauren2.mp3"),(null),(115),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
elseif stage==90 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Boss_Tauren3.mp3"),(null),(115),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
elseif stage==110 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Boss_Tauren4.mp3"),(null),(115),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
endif
if stage==65 or stage==85 or stage==105 or stage==125 or stage==145 then
call SetUnitAnimation(u,"Attack Slam")
call SetUnitTimeScale(u,0.4)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Boss_Tauren5.mp3"),(null),(115),((1.00)*1.0),false,0,0)
call StopSound(udg_SND,false,false)
call StartSound(udg_SND)
set temp=0
set tempX=GetRectCenterX(gg_rct_Taurren_Middle)
set tempY=GetRectCenterY(gg_rct_Taurren_Middle)
set temp=0
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,5000,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)and IsUnitType(l__temp_unit2,UNIT_TYPE_HERO)then
set temp_bo=false
if stage !=145 then
call boosTauren__aoefollow(l__temp_unit2,2.0)
endif
set temp2=0
loop
exitwhen temp2==60
set temp2=temp2+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$679BD101+temp2)
if dummy !=null and IsUnitInRange(dummy,l__temp_unit2,400)then
set temp=temp+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$10F6E11A+temp,l__temp_unit2)
set temp_bo=true
call RemoveUnit(dummy)
exitwhen true
endif
endloop
if not temp_bo then
set temp2=0
loop
set temp2=temp2+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$679BD101+temp2)
exitwhen temp2==60 or dummy==null
endloop
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2),270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$679BD101+temp2,dummy)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_[sz]xueyuanezhou2.mdl",dummy,"origin"),10)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_[sz]xueyuanezhou2.mdl",dummy,"origin"),10)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_[sz]xueyuanezhou2.mdl",dummy,"origin"),10)
call SetUnitScale(dummy,5,1,1)
call UnitRemove(dummy,10)
endif
endif
endloop
if temp>=1 then
loop
exitwhen temp<=0
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$10F6E11A+temp)
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2),270)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_BY_Wood_Sand_YueKongJi.mdl",GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2)))
call UnitRemove(dummy,2)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2),400,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckBossGroupN(gunit)then
if not IsUnitInGroup(gunit,udg_Mujuk)then
call Stun(u,gunit,0.5)
call jumpEn(gunit,0.5,700,0.01)
endif
set dmg=GetUnitState(u,ConvertUnitState(0x12))*3+(GetUnitState(gunit,UNIT_STATE_MAX_LIFE)*0.3)
call Damage(u,gunit,dmg,1,0,false,1,0)
endif
endloop
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$10F6E11A+temp,dummy)
call RemoveUnit(dummy)
set temp=temp-1
endloop
endif
endif
if stage==145 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,3,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*10))
call SetUnitTimeScale(u,1)
call PauseUnit(u,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
endif
endif
if stage==57 or stage==67 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==5 then
if stage==57 then
call AOE(GetUnitX(u),GetUnitY(u),12,1,1)
elseif stage==67 then
call AOEout(GetUnitX(u),GetUnitY(u),19,1)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"끝내주마!",(11*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,0,0,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
call SetTextTagFadepoint(bj_lastCreatedTextTag,3)
endif
endif
if stage==67 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==5 then
call TaurenStone(1)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Boss_Tauren8.mp3"),(null),(115),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_BY_Wood_Sand_YueKongJi.mdl",dummy,"origin"))
call SetUnitScale(dummy,3,1,1)
call KillUnit(dummy)
set ef=AddSpecialEffect("war3mapImported\\@EF_WindCirclefaster.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(ef,2)
call DestroyEffect(ef)
call SetUnitAnimation(u,"Attack Slam")
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),800,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckBossGroupN(gunit)then
set dmg=GetUnitState(u,ConvertUnitState(0x12))*3+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.2)
call Damage(u,gunit,dmg,1,0,false,1,0)
endif
endloop
endif
if stage==77 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==5 then
call TaurenStone(2)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Boss_Tauren9.mp3"),(null),(115),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_BY_Wood_Sand_YueKongJi.mdl",dummy,"origin"))
call SetUnitScale(dummy,6,1,1)
call KillUnit(dummy)
call SetUnitAnimation(u,"Attack Slam")
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),1900,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckBossGroupN(gunit)and not IsUnitInRange(u,gunit,1200)then
set dmg=GetUnitState(u,ConvertUnitState(0x12))*3+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.2)
set dmg=dmg+(GetUnitStateSwap(UNIT_STATE_MAX_LIFE,gunit)*0.10)
call Damage(u,gunit,dmg,1,0,false,1,0)
endif
endloop
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,3,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*10))
call PauseUnit(u,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==6 then
if stage==62 or stage==68 or stage==74 then
call SetUnitAnimationByIndex(u,12)
set tempX=GetUnitX(u)+(((350)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((350)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
if stage !=62 then
call AOE(tempX,tempY,12,2,0.5)
endif
endif
if stage==67 or stage==73 or stage==79 then
call TaurenStone(2)
set tempX=GetUnitX(u)+(((350)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((350)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set ef=AddSpecialEffect("war3mapImported\\@EF_WindCirclefaster.mdl",tempX,tempY)
call EXSetEffectSize(ef,4)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_WARRR211.mdl",tempX,tempY)
call EXSetEffectSize(ef,4)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_WarStompCaster.mdl",tempX,tempY)
call EXSetEffectSize(ef,5)
call DestroyEffect(ef)
set ef=AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",tempX,tempY)
call EXSetEffectSize(ef,5)
call DestroyEffect(ef)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1200,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckBossGroupN(gunit)then
if not IsUnitInGroup(gunit,udg_Mujuk)then
call jumpEn(gunit,0.25,250,0.01)
call Stun(u,gunit,0.25)
endif
set dmg=GetUnitState(u,ConvertUnitState(0x12))*2.5+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.15)
call Damage(u,gunit,dmg,1,0,false,1,0)
endif
endloop
endif
if stage==79 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,3,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*10))
call PauseUnit(u,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
endif
endif
if Fulltime>=1000 and not Bossunable and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,10)
set stage=999
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call PauseUnit(u,true)
call UnitAddAbility(u,'SY10')
call SetUnitInvulnerable(u,true)
call GroupAddUnit(udg_Mujuk,u)
call BossText("|cffff0000짜증나는 녀석들...! 모두 으깨주마!","war3mapImported\\@SY_BossWarningTauren.blp")
endif
if stage==0 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==10 then
call jump(u,0.45,2000,0.01)
call KnockBackXY(u,GetRectCenterX(gg_rct_Taurren_Middle),GetRectCenterY(gg_rct_Taurren_Middle),0.45,0.01)
endif
if stage==10 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==10 then
call SetUnitAnimationByIndex(u,10)
call SetUnitTimeScale(u,0.2)
endif
if stage>=10 and stage<=25 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==10 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",u,"origin"))
endif
if stage==25 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==10 then
call SetUnitTimeScale(u,1)
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_[dz.spell]001.mdl",dummy,"origin"))
call SetUnitScale(dummy,2.5,1,1)
call KillUnit(dummy)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),8000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckBossGroupN(gunit)then
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))
set tempX=GetUnitX(gunit)+(((-500)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(gunit)+(((-500)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackXY(gunit,tempX,tempY,0.3,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",gunit,"origin"))
if IsUnitInRange(u,gunit,1000.00)then
set dmg=GetUnitState(u,ConvertUnitState(0x12))*100+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.1)
call Damage(u,gunit,dmg,1,0,false,1,0)
endif
endif
endloop
endif
if stage==30 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==10 then
call SetUnitTimeScale(u,9)
call SetUnitAnimation(u,"Attack Slam")
endif
if stage>=31 and stage<=122 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==10 then
call SetUnitAnimation(u,"Attack Slam")
set temp=stage-(stage/2)*2
if temp==0 then
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_WarStompCaster.mdl",dummy,"origin"))
call SetUnitScale(dummy,5,1,1)
call KillUnit(dummy)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),8000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckBossGroupN(gunit)then
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))
set tempX=GetUnitX(gunit)+(((-95)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(gunit)+(((-95)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackXY(gunit,tempX,tempY,0.2,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",gunit,"origin"))
if IsUnitInRange(u,gunit,1000.00)then
set dmg=GetUnitState(u,ConvertUnitState(0x12))*100+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.1)
call Damage(u,gunit,dmg,1,0,false,1,0)
endif
endif
endloop
endif
if stage-(stage/10)*10==0 then
call TaurenStone(2)
endif
endif
if stage==122 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==10 then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,(difficulty*7))
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call PauseUnit(u,false)
call SaveInteger(udg_Hash,$944CCEB0,4,0)
call SetUnitTimeScale(u,1)
call UnitRemoveAbility(u,'SY10')
call SetUnitInvulnerable(u,false)
call GroupRemoveUnit(udg_Mujuk,u)
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
call TimerStart(t,0.04,false,function TaurenPetton)
call SaveInteger(udg_Hash,$944CCEB0,4,Fulltime-1)
endif
if UnitAlive(u)and GetUnitState(u,UNIT_STATE_LIFE)<=(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.6)and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)and not LoadBoolean(udg_Hash,GetHandleId(t),$F9F9084D)then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,11)
call SaveBoolean(udg_Hash,GetHandleId(t),$F9F9084D,true)
call PauseUnit(u,true)
call SetUnitInvulnerable(u,true)
call GroupAddUnit(udg_Mujuk,u)
set stage=999
call SetUnitFlyHeight(u,10000,50000)
call SetUnitAnimation(u,"spell slam")
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call BossText("|cffff0000더이상은 못참겠구나!!","war3mapImported\\@SY_BossWarningTauren.blp")
endif
if stage==5 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
call SetUnitX(u,GetRectCenterX(gg_rct_Taurren_Middle))
call SetUnitY(u,GetRectCenterY(gg_rct_Taurren_Middle))
call SetUnitFlyHeight(u,0,50000)
endif
if stage==10 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
set tempX=GetRectCenterX(gg_rct_Taurren_Middle)
set tempY=GetRectCenterY(gg_rct_Taurren_Middle)
set ef=AddSpecialEffect("war3mapImported\\@EF_WindCirclefaster.mdl",tempX,tempY)
call EXSetEffectSize(ef,3)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_WarStompCaster.mdl",tempX,tempY)
call EXSetEffectSize(ef,5)
call DestroyEffect(ef)
endif
if stage==20 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
set temp=0
loop
exitwhen temp>=3
set temp=temp+1
set tempR=temp*GetRandomReal(100,120)
set dmg=GetRandomReal(1500,1800)
set tempX=GetRectCenterX(gg_rct_Taurren_Middle)+(((dmg)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetRectCenterY(gg_rct_Taurren_Middle)+(((dmg)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'h005',tempX,tempY,tempR)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$DE4B2E42+temp,dummy)
call SetUnitFlyHeight(dummy,10000,0)
call SetUnitFlyHeight(dummy,0,25000)
endloop
endif
if stage==30 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
set temp=0
loop
exitwhen temp>=3
set temp=temp+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$DE4B2E42+temp)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
set ef=AddSpecialEffect("war3mapImported\\@EF_WarStompCaster.mdl",tempX,tempY)
call EXSetEffectSize(ef,3)
call DestroyEffect(ef)
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$FF93FF9E,0)
endif
if stage==55 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
call SetUnitAnimation(u,"spell ready")
set tempX=GetRectCenterX(gg_rct_Taurren_Middle)
set tempY=GetRectCenterY(gg_rct_Taurren_Middle)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,5000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)and IsUnitType(gunit,UNIT_TYPE_HERO)then
if BossAgro==null then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,gunit)
set l__temp_unit2=gunit
elseif BossAgro !=null and l__temp_unit2 !=BossAgro then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,gunit)
set l__temp_unit2=gunit
endif
endif
endloop
call EDestroy(AddSpecialEffectTarget("Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl",l__temp_unit2,"overhead"),1.8)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_SnipingTarget.mdl",l__temp_unit2,"chest"),1.8)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2))
set temp=0
loop
exitwhen temp==7
set temp=temp+1
set tempX=GetUnitX(u)+(((800*temp)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((800*temp)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(11),'sys9',tempX,tempY,tempR)
call DzSetUnitModel(dummy,"war3mapImported\\@AOE_biaoji_jiantou.mdl")
call SetUnitScale(dummy,30,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$9D7EDA31+temp,dummy)
set tempX=GetUnitX(u)+(((500*(temp+1))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((500*(temp+1))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$F13D0F39,temp)
endif
if(stage>=55 and stage<=100)and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2))
set temp=LoadInteger(udg_Hash,GetHandleId(t),$F13D0F39)+1
loop
exitwhen temp==0
set temp=temp-1
set tempX=GetUnitX(u)+(((500*temp)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((500*temp)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$9D7EDA31+temp)
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call EXSetUnitFacing(dummy,tempR)
call SetUnitFacing(dummy,tempR)
endloop
call EXSetUnitFacing(u,tempR)
call SetUnitFacing(u,tempR)
set tempX=GetRectCenterX(gg_rct_Taurren_Middle)
set tempY=GetRectCenterY(gg_rct_Taurren_Middle)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,5000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)then
call SaveInteger(udg_Hash,GetHandleId(gunit),$2F2E5428,0)
endif
endloop
endif
if stage==110 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
set temp=LoadInteger(udg_Hash,GetHandleId(t),$F13D0F39)+1
loop
exitwhen temp==0
set temp=temp-1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$9D7EDA31+temp)
call RemoveUnit(dummy)
endloop
call SetUnitAnimationByIndex(u,13)
endif
if stage>=110 and stage<=498 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
set tempX=GetUnitX(u)+(((stage+50)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((stage+50)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
set ef=AddSpecialEffect("war3mapImported\\@EF_WARRR211.mdl",tempX,tempY)
call EXSetEffectSize(ef,1.75)
call DestroyEffect(ef)
set ef=AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",tempX,tempY)
call EXSetEffectSize(ef,2)
call DestroyEffect(ef)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),500,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)and LoadInteger(udg_Hash,GetHandleId(gunit),$2F2E5428)==0 then
if not IsUnitInGroup(gunit,udg_Mujuk)then
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(gunit),GetUnitY(gunit))
set tempX=GetUnitX(gunit)+(((-1000)*1.0)*Cos(((tempR+90)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(gunit)+(((-1000)*1.0)*Sin(((tempR+90)*1.0)*bj_DEGTORAD))
call KnockBackEn(gunit,tempX,tempY,0.1,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",gunit,"origin"))
call Stun(u,gunit,0.4)
set dmg=GetUnitState(u,ConvertUnitState(0x12))*5+(GetUnitState(gunit,UNIT_STATE_MAX_LIFE)*0.2)
endif
call Damage(u,gunit,dmg,1,0,false,1,0)
call SaveInteger(udg_Hash,GetHandleId(gunit),$2F2E5428,1)
endif
if GetUnitTypeId(gunit)=='h005' and UnitAlive(gunit)then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Boss_Tauren11.mp3"),(null),(115),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
call KillUnit(gunit)
set temp=LoadInteger(udg_Hash,GetHandleId(t),$FF93FF9E)+1
call SaveInteger(udg_Hash,GetHandleId(t),$FF93FF9E,temp)
set temp=LoadInteger(udg_Hash,GetHandleId(t),$4B3D9E93)+1
call SaveInteger(udg_Hash,GetHandleId(t),$4B3D9E93,temp)
call SaveInteger(udg_Hash,$944CCEB0,2,31)
set tempX=GetUnitX(u)+(((-450)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-450)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.4,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",u,"origin"))
call SetUnitAnimationByIndex(u,10)
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call ND(Player(PP[temp]-1),0.1,60)
endloop
endif
endloop
if not IsPointPathableALL(tempX,tempY)then
call TaurenStone(2)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Boss_Tauren11.mp3"),(null),(115),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set tempX=GetUnitX(u)-(((100)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)-(((100)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
set temp=LoadInteger(udg_Hash,GetHandleId(t),$FF93FF9E)+1
call SaveInteger(udg_Hash,GetHandleId(t),$FF93FF9E,temp)
call SaveInteger(udg_Hash,$944CCEB0,2,44)
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call ND(Player(PP[temp]-1),0.1,90)
endloop
set tempX=GetRectCenterX(gg_rct_Taurren_Middle)
set tempY=GetRectCenterY(gg_rct_Taurren_Middle)
set ef=AddSpecialEffect("war3mapImported\\@EF_BY_Wood_Sand_YueKongJi.mdl",tempX,tempY)
call EXSetEffectSize(ef,10)
call DestroyEffect(ef)
set temp=0
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,5000,null)
loop
set l__temp_unit2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),l__temp_unit2)
exitwhen l__temp_unit2==null
if CheckFBossGroupN(l__temp_unit2)and IsUnitType(l__temp_unit2,UNIT_TYPE_HERO)then
set temp_bo=false
set temp2=0
loop
exitwhen temp2==60
set temp2=temp2+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$679BD101+temp2)
if dummy !=null and IsUnitInRange(dummy,l__temp_unit2,400)then
set temp=temp+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$10F6E11A+temp,l__temp_unit2)
set temp_bo=true
call RemoveUnit(dummy)
exitwhen true
endif
endloop
if not temp_bo then
set temp2=0
loop
set temp2=temp2+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$679BD101+temp2)
exitwhen temp2==60 or dummy==null
endloop
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2),270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$679BD101+temp2,dummy)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_[sz]xueyuanezhou2.mdl",dummy,"origin"),10)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_[sz]xueyuanezhou2.mdl",dummy,"origin"),10)
call EDestroy(AddSpecialEffectTarget("war3mapImported\\@EF_[sz]xueyuanezhou2.mdl",dummy,"origin"),10)
call SetUnitScale(dummy,5,1,1)
call UnitRemove(dummy,10)
endif
endif
endloop
if temp>=1 then
loop
exitwhen temp<=0
set l__temp_unit2=LoadUnitHandle(udg_Hash,GetHandleId(t),$10F6E11A+temp)
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2),270)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_BY_Wood_Sand_YueKongJi.mdl",GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2)))
call UnitRemove(dummy,2)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(l__temp_unit2),GetUnitY(l__temp_unit2),400,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckBossGroupN(gunit)then
if not IsUnitInGroup(gunit,udg_Mujuk)then
call jumpEn(gunit,0.5,700,0.01)
call Stun(u,gunit,0.5)
endif
set dmg=GetUnitState(u,ConvertUnitState(0x12))*3+(GetUnitState(gunit,UNIT_STATE_MAX_LIFE)*0.1)
call Damage(u,gunit,dmg,1,0,false,1,0)
endif
endloop
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$10F6E11A+temp,dummy)
call RemoveUnit(dummy)
set temp=temp-1
endloop
endif
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
set tempX=GetUnitX(u)+(((450)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((450)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.4,0.01)
call SetUnitAnimationByIndex(u,10)
endif
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 and LoadInteger(udg_Hash,GetHandleId(t),$4B3D9E93)>=3 and stage<=599 then
set stage=999
call SaveInteger(udg_Hash,$944CCEB0,2,600)
endif
if stage==610 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
set Bossunable=true
set BossunableTime=8.0
call BossText("빌어먹을 쥐새끼들.....!","war3mapImported\\@SY_BossWarningTauren.blp")
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call PauseUnit(u,false)
call SetUnitInvulnerable(u,false)
call SetUnitTimeScale(u,1)
call GroupRemoveUnit(udg_Mujuk,u)
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 and LoadInteger(udg_Hash,GetHandleId(t),$FF93FF9E)>=6 and stage<=499 then
call BossText("|cffff0000끝이다!!","war3mapImported\\@SY_BossWarningTauren.blp")
set stage=999
call SaveInteger(udg_Hash,$944CCEB0,2,500)
call SetUnitFlyHeight(u,10000,25000)
endif
if stage==510 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
set tempX=GetRectCenterX(gg_rct_Taurren_Middle)
set tempY=GetRectCenterY(gg_rct_Taurren_Middle)
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call SetUnitFlyHeight(u,0,25000)
endif
if stage==520 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
set tempX=GetRectCenterX(gg_rct_Taurren_Middle)
set tempY=GetRectCenterY(gg_rct_Taurren_Middle)
set ef=AddSpecialEffect("war3mapImported\\@EF_WindCirclefaster.mdl",tempX,tempY)
call EXSetEffectSize(ef,3)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_WarStompCaster.mdl",tempX,tempY)
call EXSetEffectSize(ef,5)
call DestroyEffect(ef)
endif
if stage==525 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
call SetUnitAnimationByIndex(u,10)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",u,"origin"))
endif
if stage==540 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==11 then
set tempX=GetRectCenterX(gg_rct_Taurren_Middle)
set tempY=GetRectCenterY(gg_rct_Taurren_Middle)
set ef=AddSpecialEffect("war3mapImported\\@EF_BY_Wood_Sand_YueKongJi.mdl",tempX,tempY)
call EXSetEffectSize(ef,10)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_34.mdl",tempX,tempY)
call EXSetEffectSize(ef,13)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_Archetype_R4.mdl",tempX,tempY)
call EXSetEffectSize(ef,20)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_Archetype_R7.mdl",tempX,tempY)
call EXSetEffectSize(ef,5)
call DestroyEffect(ef)
set ef=AddSpecialEffect("war3mapImported\\@EF_BY_Wood_Sand_YueKongJi.mdl",tempX,tempY)
call EXSetEffectSize(ef,10)
call DestroyEffect(ef)
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call ND(Player(PP[temp]-1),0.25,300)
set dummy=Charcter[temp]
set dmg=GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*10000+999999999
call SetUnitInvulnerable(dummy,false)
call GroupRemoveUnit(udg_Mujuk,dummy)
call Damage(u,dummy,dmg,4,0,false,1,0)
endloop
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,5000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if GetUnitTypeId(gunit)=='h005' then
call KillUnit(gunit)
endif
endloop
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,$944CCEB0,2,0)
call PauseUnit(u,false)
call SetUnitInvulnerable(u,false)
call SetUnitTimeScale(u,1)
call GroupRemoveUnit(udg_Mujuk,u)
endif
call s__party_deallocate((g))
call DestroyGroup(gl2)
set t=null
set u=null
set dummy=null
set l__temp_unit2=null
set gl2=null
set gunit=null
set ef=null
endfunction
function TaurenSETTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),0)
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local integer a=0
local unit dummy
if stage==0 then
loop
exitwhen a==Playint
set a=a+1
call CameraSetupApplyForPlayer(true,gg_cam_Tauren,Player(PP[a]-1),0)
call PauseUnit(Charcter[PP[a]],true)
if not IsUnitInRangeXY(Charcter[PP[a]],GetRectCenterX(gg_rct_Taurren_Middle),GetRectCenterY(gg_rct_Taurren_Middle),5000)then
call SetUnitX(Charcter[PP[a]],GetRectCenterX(gg_rct_Taurren_Middle)+(((700)*1.0)*Cos(((270)*1.0)*bj_DEGTORAD)))
call SetUnitY(Charcter[PP[a]],GetRectCenterY(gg_rct_Taurren_Middle)+(((700)*1.0)*Sin(((270)*1.0)*bj_DEGTORAD)))
endif
endloop
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,2500,1.00)
set bj_lastCreatedUnit=CreateUnit(Player(11),'EN50',GetRectCenterX(gg_rct_Tauren),GetRectCenterY(gg_rct_Tauren),240)
call UnitAddAbility(bj_lastCreatedUnit,'Amrf')
call UnitRemoveAbility(bj_lastCreatedUnit,'Amrf')
call SetUnitFlyHeight(bj_lastCreatedUnit,2000,0.00)
call SetUnitFlyHeight(bj_lastCreatedUnit,0,6000.00)
call SaveUnitHandle(udg_Hash,$944CCEB0,1,bj_lastCreatedUnit)
set Boss=bj_lastCreatedUnit
call BOSSdifficulty2(Boss)
call UnitAddAbility(Boss,'SY10')
call PauseUnit(Boss,true)
call SetUnitInvulnerable(Boss,true)
call GroupAddUnit(udg_Mujuk,Boss)
call SaveInteger(udg_Hash,$944CCEB0,2,1)
call TimerStart(t,0.28,false,function TaurenSETTimer)
call SaveInteger(udg_Hash,GetHandleId(t),0,1)
call SetUnitState(Boss,UNIT_STATE_MAX_MANA,10)
call SetUnitMoveSpeed(Boss,785)
call DPSstart()
endif
if stage==1 then
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(u),GetUnitY(u),270)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",dummy,"origin"))
call SetUnitScale(dummy,5,1,1)
call KillUnit(dummy)
set a=0
loop
exitwhen a==Playint
set a=a+1
call vibration2(Player(PP[a]-1),60,0.2)
call BossBar_Setting(Boss,R2I(GetUnitState(Boss,UNIT_STATE_MAX_LIFE)*0.0001))
call BossBar_Apply(Player(PP[a]-1),Boss)
call PauseUnit(Charcter[PP[a]],false)
endloop
call ResetToGameCamera(0)
call TimerStart(t,0.5,false,function TaurenSETTimer)
call SaveInteger(udg_Hash,GetHandleId(t),0,3)
endif
if stage==3 then
call CinematicFilterGenericBJ(0.5,BLEND_MODE_BLEND,"ReplaceableTextures\\CameraMasks\\White_mask.blp",0.00,0.00,0.00,30.00,0,0,0,1000)
loop
exitwhen a==Playint
if(GetLocalPlayer()==Player(a))then
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,udg_int[a+1],1.00)
call SetCameraField(CAMERA_FIELD_FARZ,udg_int[a+1]*2,1.00)
endif
set a=a+1
call SaveInteger(udg_Hash,GetHandleId(Charcter[a]),$AD509D80,LoadInteger(udg_Hash,a,$39F717C6))
endloop
call IssuePointOrderLoc(u,"move",GetRectCenter(gg_rct_Taurren_Middle))
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call UnitRemoveAbility(Boss,'SY10')
call PauseUnit(Boss,false)
call SetUnitInvulnerable(Boss,false)
call GroupRemoveUnit(udg_Mujuk,Boss)
set t=CreateTimer()
call TimerStart(t,0.5,false,function TaurenPetton)
endif
set t=null
set u=null
set dummy=null
endfunction
function TaurenSET takes nothing returns nothing
local integer a=0
local timer t=CreateTimer()
call SaveInteger(udg_Hash,0,$CBA714FE,1)
loop
exitwhen a==Playint
set a=a+1
call PanCameraToTimed(GetRectCenterX(gg_rct_Taurren_Middle),GetRectCenterY(gg_rct_Taurren_Middle),0.00)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'SY02',false)
if not UnitAlive(Charcter[PP[a]])then
call TimerStart(ReviveTimer[PP[a]],0.00,false,null)
endif
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(Charcter[a]),GetUnitY(Charcter[a])))
call SetUnitX(Charcter[PP[a]],GetRectCenterX(gg_rct_Taurren_Middle)+(((700)*1.0)*Cos(((270)*1.0)*bj_DEGTORAD)))
call SetUnitY(Charcter[PP[a]],GetRectCenterY(gg_rct_Taurren_Middle)+(((700)*1.0)*Sin(((270)*1.0)*bj_DEGTORAD)))
call SetUnitState(Charcter[PP[a]],UNIT_STATE_LIFE,GetUnitState(Charcter[PP[a]],UNIT_STATE_MAX_LIFE))
call SetUnitState(Charcter[PP[a]],UNIT_STATE_MANA,GetUnitState(Charcter[PP[a]],UNIT_STATE_MAX_MANA))
endloop
set target=null
set BossBattle=true
set BossBattleN=true
call PauseUnit(gg_unit_h000_0013,true)
call SaveBoolean(udg_Hash,$4D0C867E,1,true)
call SaveInteger(udg_Hash,GetHandleId(t),0,0)
call TimerStart(t,3.0,false,function TaurenSETTimer)
set t=null
endfunction
function illidanPetton takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,$944CCEB0,1)
local integer stage=LoadInteger(udg_Hash,$944CCEB0,2)
local integer PatonNum=LoadInteger(udg_Hash,$944CCEB0,3)
local integer Fulltime=LoadInteger(udg_Hash,$944CCEB0,4)
local integer unableEF=LoadInteger(udg_Hash,$944CCEB0,5)
local integer temp=0
local integer temp2=0
local real dmg=0
local real tempR=0
local real tempX=0
local real tempY=0
local unit dummy=null
local unit gunit=null
local unit c=null
local unit l__temp_unit2=null
local integer g=s__party_create()
call TimerStart(t,0.1,false,function illidanPetton)
if Bossunable or Bossstun then
if Bossstun and LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call SaveInteger(udg_Hash,$944CCEB0,2,stage+1)
call SaveInteger(udg_Hash,$944CCEB0,4,Fulltime+1)
endif
else
call SaveInteger(udg_Hash,$944CCEB0,2,stage+1)
call SaveInteger(udg_Hash,$944CCEB0,4,Fulltime+1)
endif
if Bossunable and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)!=0 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call PauseUnit(u,false)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
endif
if Bossunable and BossunableTime>0 then
call SaveInteger(udg_Hash,$944CCEB0,5,unableEF+1)
set BossunableTime=BossunableTime-0.1
if unableEF==0 then
set temp=0
loop
exitwhen temp==5
call FilterBasic(Player(temp),3.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",0.00,0.00,0.00,20.00,0.00,0.00,0.00,100.00)
set temp=temp+1
endloop
call SetUnitAnimation(u,"death")
set tempX=GetUnitX(u)+(((-150)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-150)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.7,0.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",u,"origin"))
endif
if unableEF==7 then
call SetUnitTimeScale(u,0)
endif
elseif Bossunable and BossunableTime<=0 then
set Bossunable=false
set BossunableTime=1
call SaveInteger(udg_Hash,$944CCEB0,5,0)
call SetUnitTimeScale(u,1)
endif
if UnitAlive(u)then
if LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
call UnitAddAbility(u,'A01A')
call UnitAddAbility(u,'SY10')
elseif not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
if not LoadBoolean(udg_Hash,$F61C5FD6,1)then
call UnitRemoveAbility(u,'A01A')
call UnitRemoveAbility(u,'SY10')
endif
endif
if not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
if not UnitAlive(target)or(target !=null and not IsUnitInRange(u,target,1800))or IsUnitInGroup(target,udg_Mujuk)or(BossAgro !=null and BossAgro !=target)then
set target=null
endif
if target==null then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),2000,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckFBossGroupN(gunit)then
if BossAgro==null or IsUnitInGroup(BossAgro,udg_Mujuk)then
set l__temp_unit2=gunit
elseif BossAgro !=null and l__temp_unit2 !=BossAgro then
set l__temp_unit2=gunit
endif
endif
endloop
set target=l__temp_unit2
else
set l__temp_unit2=target
endif
if l__temp_unit2 !=null then
call IssueTargetOrder(u,"attack",l__temp_unit2)
elseif l__temp_unit2==null then
if IsUnitInRange(u,gg_unit_h000_0013,500)then
call IssueTargetOrder(u,"attack",gg_unit_h000_0013)
else
set tempX=GetRectCenterX(gg_rct_AttackZone)
set tempY=GetRectCenterY(gg_rct_AttackZone)
call IssuePointOrder(u,"attack",tempX,tempY)
endif
endif
endif
if stage>=60 and not LoadBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1)then
set temp=GetRandomint(1,100)
if temp<=25 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,1)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call PauseUnit(u,true)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),1500,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
if CheckFBossGroupN(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
if BossAgro==null then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,dummy)
elseif BossAgro !=null then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,dummy)
set l__temp_unit2=dummy
exitwhen l__temp_unit2==BossAgro
endif
endif
exitwhen dummy==null
endloop
if LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)==null then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,3,0)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*10))
call PauseUnit(u,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
else
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"느려",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,0,172,234,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)
set tempX=GetUnitX(dummy)+(((-150)*1.0)*Cos(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((-150)*1.0)*Sin(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,3)
call DestroyEffect(bj_lastCreatedEffect)
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call SetUnitAnimation(u,"attack")
if difficulty==4 then
call SetUnitAnimationByIndex(u,4)
else
call SetUnitAnimationByIndex(u,5)
endif
call AOE(tempX,tempY,6,1.6,0.6)
endif
elseif temp>=26 and temp<=50 then
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,2)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call PauseUnit(u,true)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),1500,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,dummy)
endif
endloop
if LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)==null then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,3,PatonNum+1)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*10))
call PauseUnit(u,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
else
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)
if difficulty==4 then
call SetUnitAnimationByIndex(u,9)
else
call SetUnitAnimationByIndex(u,6)
call SetUnitTimeScale(u,0.25)
endif
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"죽여주마",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,0,172,234,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeTarget.mdl",tempX,tempY)
call EDestroy(bj_lastCreatedEffect,2.5)
call KnockBackXY(u,tempX,tempY,1.5,0.01)
call jump(u,1.5,400,0.01)
call AOE(tempX,tempY,6,0.65,1.5)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
call EXSetUnitFacing(u,tempR)
set temp=59
loop
set temp=temp+1
set temp2=temp-(temp/2)*2
if temp2==0 then
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(u),GetUnitY(u),tempR)
call DzSetUnitModel(dummy,Model[11])
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA+temp,dummy)
call UnitRemove(dummy,1.25)
if difficulty==4 then
call SetUnitAnimationByIndex(dummy,9)
else
call SetUnitAnimationByIndex(dummy,6)
call SetUnitTimeScale(dummy,0.25)
endif
call SetUnitScale(dummy,3,1,1)
call SetUnitVertexColor(dummy,255,255,255,0)
endif
exitwhen temp==135
endloop
endif
elseif temp>=51 and temp<=75 then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),1500,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
if CheckFBossGroupN(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
if BossAgro==null then
set c=dummy
elseif BossAgro !=null then
set c=dummy
set l__temp_unit2=dummy
exitwhen l__temp_unit2==BossAgro
endif
endif
exitwhen dummy==null
endloop
if c==null then
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,3,PatonNum+1)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*10))
call PauseUnit(u,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
else
set tempR=GetUnitFacing(u)
call SetUnitFacing(u,tempR)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",u,"chest"))
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,3)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call PauseUnit(u,true)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"끝내도록 하지",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,0,172,234,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
set tempX=GetUnitX(u)+(((50)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((50)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call AOEcustom("war3mapImported\\@AOE_Strate200+1000.mdl",tempX,tempY,tempR,0.6)
endif
if difficulty==4 then
call SetUnitAnimationByIndex(u,12)
else
call SetUnitAnimationByIndex(u,9)
endif
elseif temp>=76 then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),1500,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
if CheckFBossGroupN(dummy)and IsUnitType(dummy,UNIT_TYPE_HERO)then
if BossAgro==null then
set c=dummy
elseif BossAgro !=null then
set c=dummy
set l__temp_unit2=dummy
exitwhen l__temp_unit2==BossAgro
endif
endif
exitwhen dummy==null
endloop
if c !=null then
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(c),GetUnitY(c))
call SetUnitFacing(u,tempR)
call EXSetUnitFacing(u,tempR)
set tempR=GetUnitFacing(u)
call SetUnitFacing(u,tempR)
call EXSetUnitFacing(u,tempR)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,4)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,true)
call PauseUnit(u,true)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"피할 수 있을까?",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,0,172,234,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
else
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,3,PatonNum+1)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*10))
call PauseUnit(u,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
endif
endif
endif
if stage>=66 and LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==1 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_[DZ.Spell]006.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,1.3)
call DestroyEffect(bj_lastCreatedEffect)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_[dz.spell]001.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,1.3)
call DestroyEffect(bj_lastCreatedEffect)
set dmg=GetUnitState(u,ConvertUnitState(0x12))*2.5
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),600,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
call Damage(u,dummy,dmg,1,0,false,1,0)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Orc\\OrcSmallDeathExplode\\OrcSmallDeathExplode.mdl",dummy,"origin"))
endif
endloop
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,3,PatonNum+1)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*10))
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,dummy)
call RemoveUnit(dummy)
call PauseUnit(u,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==2 then
if stage>=59 and stage<=136 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA+stage)
call SetUnitFlyHeight(dummy,GetUnitFlyHeight(u),0)
call SetUnitX(dummy,GetUnitX(u))
call SetUnitY(dummy,GetUnitY(u))
call invisible(dummy,55.00,100.00,0.18,0.01)
call UnitRemove(dummy,0.18)
endif
if stage==137 then
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_R_BY_Wood_Effect_Order_DanGe_LiangYiShi_ZhiSiZhiMoYanZhanJi Blue.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,4)
call DestroyEffect(bj_lastCreatedEffect)
set temp=0
loop
exitwhen temp>=12
set temp=temp+1
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set tempX=tempX+(((SquareRoot(GetRandomReal(0,(400.00*400.00))))*1.0)*Cos(((GetRandomReal(0,360))*1.0)*bj_DEGTORAD))
set tempY=tempY+(((SquareRoot(GetRandomReal(0,(400.00*400.00))))*1.0)*Sin(((GetRandomReal(0,360))*1.0)*bj_DEGTORAD))
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_BloodSlashCRIT.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,0.8)
call EXEffectMatRotateY(bj_lastCreatedEffect,GetRandomReal(0,360))
call DestroyEffect(bj_lastCreatedEffect)
endloop
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),600,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
if not IsUnitInGroup(dummy,udg_Mujuk)then
call Stun(u,dummy,0.5)
endif
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*5)+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.12)
call Damage(u,dummy,dmg,1,0,false,1,0)
endif
endloop
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,3,PatonNum+1)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*10))
call SetUnitTimeScale(u,1)
call PauseUnit(u,false)
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$C9D052FE,dummy)
call RemoveUnit(dummy)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
endif
call TimerStart(t,0.02,false,function illidanPetton)
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==3 then
if stage==100 then
set tempX=GetUnitX(u)+(((1000)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((1000)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.3,0.01)
if difficulty==4 then
call SetUnitAnimationByIndex(u,3)
else
call SetUnitAnimationByIndex(u,9)
endif
endif
if stage>=100 and stage<=115 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set tempR=GetUnitFacing(u)
set temp2=stage-(stage/3)*3
if temp2==0 then
set dummy=CreateUnit(Player(9),'sys9',GetUnitX(u),GetUnitY(u),tempR)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_AZ_A_Slash Splash Sky.mdl",dummy,"origin"))
call SetUnitVertexColor(dummy,255,255,255,0)
call SetUnitScale(dummy,3.5,1,1)
call UnitApplyTimedLife(dummy,'BHwe',0.5)
endif
set temp=LoadInteger(udg_Hash,GetHandleId(t),$5EC6CE70)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),350,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)and LoadInteger(udg_Hash,GetHandleId(dummy),$B86D36D5)==0 then
set temp=temp+1
if not IsUnitInGroup(dummy,udg_Mujuk)and GetUnitAbilityLevel(dummy,'A01A')==0 then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$4BFF1577+temp,dummy)
call SaveInteger(udg_Hash,GetHandleId(dummy),$B86D36D5,1)
call UnitAddAbility(dummy,'Amrf')
call UnitRemoveAbility(dummy,'Amrf')
call SetUnitFlyHeight(dummy,GetUnitFlyHeight(dummy)+500,5000)
call Stun(u,dummy,1)
elseif IsUnitInGroup(dummy,udg_Mujuk)or GetUnitAbilityLevel(dummy,'A01A')==1 then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$4BFF1577+temp,dummy)
call SaveInteger(udg_Hash,GetHandleId(dummy),$B86D36D5,2)
call Damage(u,dummy,1,1,0,false,1,0)
endif
endif
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$5EC6CE70,temp)
endif
if stage>=115 and stage<=140 then
set temp=0
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$5EC6CE70)
loop
exitwhen temp==temp2
set temp=temp+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$4BFF1577+temp)
if LoadInteger(udg_Hash,GetHandleId(dummy),$B86D36D5)==1 then
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_BloodSlashCRIT.mdl",tempX,tempY)
call EXSetEffectZ(bj_lastCreatedEffect,GetUnitFlyHeight(dummy))
call DestroyEffect(bj_lastCreatedEffect)
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*0.2)+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.01)
call Damage(u,dummy,dmg,1,0,false,1,0)
endif
endloop
endif
if stage>=145 then
set temp=0
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$5EC6CE70)
loop
exitwhen temp==temp2
set temp=temp+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$4BFF1577+temp)
if LoadInteger(udg_Hash,GetHandleId(dummy),$B86D36D5)==1 then
call SetUnitFlyHeight(dummy,GetUnitFlyHeight(dummy)-500,5000)
endif
endloop
endif
if stage>=150 then
set temp=0
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$5EC6CE70)
loop
exitwhen temp==temp2
set temp=temp+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$4BFF1577+temp)
if LoadInteger(udg_Hash,GetHandleId(dummy),$B86D36D5)==1 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",dummy,"origin"))
endif
call SaveInteger(udg_Hash,GetHandleId(dummy),$B86D36D5,0)
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$4BFF1577+temp,dummy)
call RemoveUnit(dummy)
endloop
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,3,PatonNum+1)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*10))
call PauseUnit(u,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
call SaveInteger(udg_Hash,GetHandleId(t),$5EC6CE70,0)
endif
call TimerStart(t,0.02,false,function illidanPetton)
endif
if LoadInteger(udg_Hash,GetHandleId(t),$CD173435)==4 then
if stage==60 then
set tempR=GetUnitFacing(u)
set tempX=GetUnitX(u)+(((50)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((50)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call SaveInteger(udg_Hash,GetHandleId(t),$6A1939B7,0)
call AOEcustom("war3mapImported\\@AOE_Strate200+800.mdl",tempX,tempY,tempR,0.75)
endif
if stage==97 then
if difficulty==4 then
call SetUnitAnimationByIndex(u,3)
else
call SetUnitAnimationByIndex(u,6)
endif
call SetUnitScale(dummy,3,1,1)
set tempR=GetUnitFacing(u)
set tempX=GetUnitX(u)+(((800)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((800)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.3,0.01)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_Fuzzy Stomp.mdx",GetUnitX(u),GetUnitY(u)))
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_Nitu.mdx",GetUnitX(u),GetUnitY(u)))
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_LB_hdg.mdx",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,0.65)
call EXEffectMatRotateY(bj_lastCreatedEffect,GetRandomReal(0,360))
call DestroyEffect(bj_lastCreatedEffect)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_White-Qiquan-Special.mdx",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,1.5)
call DestroyEffect(bj_lastCreatedEffect)
endif
if stage>=97 and stage<=112 then
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
call DzSetUnitModel(dummy,Model[11])
call invisible(dummy,40.00,100.00,0.28,0.01)
call UnitRemove(dummy,0.28)
call SetUnitScale(dummy,3,1,1)
if difficulty==4 then
call SetUnitAnimationByIndex(dummy,3)
else
call SetUnitAnimationByIndex(dummy,6)
endif
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6A1939B7)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),350,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)and LoadInteger(udg_Hash,GetHandleId(dummy),$31242AC2)==0 then
set temp2=temp2+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$93B00616+temp2,dummy)
call SaveInteger(udg_Hash,GetHandleId(dummy),$31242AC2,1)
if not IsUnitInGroup(dummy,udg_Mujuk)then
call Stun(u,dummy,0.3)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
set tempX=GetUnitX(dummy)+(((-250)*1.0)*Cos(((tempR+90)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((-250)*1.0)*Sin(((tempR+90)*1.0)*bj_DEGTORAD))
call KnockBackEn(dummy,tempX,tempY,0.15,0.01)
endif
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*1.5)+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.1)
call Damage(u,dummy,dmg,1,0,false,1,0)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",dummy,"origin"))
endif
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$6A1939B7,temp2)
endif
if stage==115 then
set temp=0
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6A1939B7)
loop
exitwhen temp==temp2
set temp=temp+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$93B00616+temp)
call SaveInteger(udg_Hash,GetHandleId(dummy),$31242AC2,0)
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$93B00616+temp,dummy)
call RemoveUnit(dummy)
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$6A1939B7,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),3000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
if BossAgro==null then
set l__temp_unit2=dummy
set c=dummy
elseif BossAgro !=null and l__temp_unit2 !=BossAgro then
set l__temp_unit2=dummy
set c=dummy
endif
endif
endloop
if c !=null then
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(c),GetUnitY(c))
call SetUnitFacing(u,tempR)
call EXSetUnitFacing(u,tempR)
else
set tempR=GetUnitFacing(u)
call SetUnitFacing(u,tempR)
call EXSetUnitFacing(u,tempR)
endif
set tempX=GetUnitX(u)+(((50)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((50)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call AOEcustom("war3mapImported\\@AOE_Strate200+800.mdl",tempX,tempY,tempR,0.75)
endif
if stage==152 then
if difficulty==4 then
call SetUnitAnimationByIndex(u,3)
else
call SetUnitAnimationByIndex(u,6)
endif
call SetUnitScale(dummy,3,1,1)
set tempR=GetUnitFacing(u)
set tempX=GetUnitX(u)+(((800)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((800)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.3,0.01)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_Fuzzy Stomp.mdx",GetUnitX(u),GetUnitY(u)))
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_Nitu.mdx",GetUnitX(u),GetUnitY(u)))
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_LB_hdg.mdx",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,0.65)
call EXEffectMatRotateY(bj_lastCreatedEffect,GetRandomReal(0,360))
call DestroyEffect(bj_lastCreatedEffect)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_White-Qiquan-Special.mdx",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,1.5)
call DestroyEffect(bj_lastCreatedEffect)
endif
if stage>=152 and stage<=167 then
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
call DzSetUnitModel(dummy,Model[11])
call invisible(dummy,40.00,100.00,0.28,0.01)
call UnitRemove(dummy,0.28)
call SetUnitScale(dummy,3,1,1)
if difficulty==4 then
call SetUnitAnimationByIndex(dummy,3)
else
call SetUnitAnimationByIndex(dummy,6)
endif
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6A1939B7)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),350,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)and LoadInteger(udg_Hash,GetHandleId(dummy),$31242AC2)==0 then
set temp2=temp2+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$93B00616+temp2,dummy)
call SaveInteger(udg_Hash,GetHandleId(dummy),$31242AC2,1)
if not IsUnitInGroup(dummy,udg_Mujuk)then
call Stun(u,dummy,0.3)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
set tempX=GetUnitX(dummy)+(((-250)*1.0)*Cos(((tempR+90)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((-250)*1.0)*Sin(((tempR+90)*1.0)*bj_DEGTORAD))
call KnockBackEn(dummy,tempX,tempY,0.15,0.01)
endif
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*1.5)+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.1)
call Damage(u,dummy,dmg,1,0,false,1,0)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",dummy,"origin"))
endif
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$6A1939B7,temp2)
endif
if stage==167 then
set temp=0
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6A1939B7)
loop
exitwhen temp==temp2
set temp=temp+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$93B00616+temp)
call SaveInteger(udg_Hash,GetHandleId(dummy),$31242AC2,0)
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$93B00616+temp,dummy)
call RemoveUnit(dummy)
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$6A1939B7,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),3000,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)then
if BossAgro==null then
set l__temp_unit2=dummy
set c=dummy
elseif BossAgro !=null and l__temp_unit2 !=BossAgro then
set l__temp_unit2=dummy
set c=dummy
endif
endif
endloop
if c !=null then
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(c),GetUnitY(c))
call SetUnitFacing(u,tempR)
call EXSetUnitFacing(u,tempR)
else
set tempR=GetUnitFacing(u)
call SetUnitFacing(u,tempR)
call EXSetUnitFacing(u,tempR)
endif
set tempX=GetUnitX(u)+(((50)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((50)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call AOEcustom("war3mapImported\\@AOE_Strate200+800.mdl",tempX,tempY,tempR,0.75)
endif
if stage==204 then
if difficulty==4 then
call SetUnitAnimationByIndex(u,3)
else
call SetUnitAnimationByIndex(u,6)
endif
call SetUnitScale(dummy,3,1,1)
set tempR=GetUnitFacing(u)
set tempX=GetUnitX(u)+(((800)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((800)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.3,0.01)
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_Fuzzy Stomp.mdx",GetUnitX(u),GetUnitY(u)))
call DestroyEffect(AddSpecialEffect("war3mapImported\\@EF_Nitu.mdx",GetUnitX(u),GetUnitY(u)))
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_LB_hdg.mdx",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,0.65)
call EXEffectMatRotateY(bj_lastCreatedEffect,GetRandomReal(0,360))
call DestroyEffect(bj_lastCreatedEffect)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_White-Qiquan-Special.mdx",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,1.5)
call DestroyEffect(bj_lastCreatedEffect)
endif
if stage>=204 and stage<=219 then
set dummy=CreateUnit(Player(11),'sys9',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
call DzSetUnitModel(dummy,Model[11])
call invisible(dummy,40.00,100.00,0.28,0.01)
call UnitRemove(dummy,0.28)
call SetUnitScale(dummy,3,1,1)
if difficulty==4 then
call SetUnitAnimationByIndex(dummy,3)
else
call SetUnitAnimationByIndex(dummy,6)
endif
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6A1939B7)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),350,null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckFBossGroupN(dummy)and LoadInteger(udg_Hash,GetHandleId(dummy),$31242AC2)==0 then
set temp2=temp2+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$93B00616+temp2,dummy)
call SaveInteger(udg_Hash,GetHandleId(dummy),$31242AC2,1)
if not IsUnitInGroup(dummy,udg_Mujuk)then
call Stun(u,dummy,0.3)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(dummy),GetUnitY(dummy))
set tempX=GetUnitX(dummy)+(((-250)*1.0)*Cos(((tempR+90)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((-250)*1.0)*Sin(((tempR+90)*1.0)*bj_DEGTORAD))
call KnockBackEn(dummy,tempX,tempY,0.15,0.01)
endif
set dmg=(GetUnitState(u,ConvertUnitState(0x12))*1.5)+(GetUnitState(dummy,UNIT_STATE_MAX_LIFE)*0.1)
call Damage(u,dummy,dmg,1,0,false,1,0)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",dummy,"origin"))
endif
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$6A1939B7,temp2)
if stage==219 then
set temp=0
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$6A1939B7)
loop
exitwhen temp==temp2
set temp=temp+1
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$93B00616+temp)
call SaveInteger(udg_Hash,GetHandleId(dummy),$31242AC2,0)
set dummy=CreateUnit(Player(11),'sys9',0,0,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$93B00616+temp,dummy)
call RemoveUnit(dummy)
endloop
call SaveInteger(udg_Hash,GetHandleId(t),$6A1939B7,0)
call SaveBoolean(udg_Hash,GetHandleId(t),$6FC2B4D1,false)
call SaveInteger(udg_Hash,$944CCEB0,3,PatonNum+1)
call SaveInteger(udg_Hash,$944CCEB0,2,(difficulty*10))
call PauseUnit(u,false)
call SaveInteger(udg_Hash,GetHandleId(t),$CD173435,0)
endif
endif
call TimerStart(t,0.02,false,function illidanPetton)
endif
else
set BossBattleN=false
call FlushChildHashtable(udg_Hash,$944CCEB0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set temp=0
loop
exitwhen temp==Playint
set temp=temp+1
call BossBar_End(Player(PP[temp]-1))
endloop
endif
call s__party_deallocate((g))
set t=null
set u=null
set dummy=null
set c=null
set l__temp_unit2=null
endfunction
function illidanSET takes nothing returns nothing
local timer t=CreateTimer()
call SaveInteger(udg_Hash,$944CCEB0,2,1)
call TimerStart(t,0.5,false,function illidanPetton)
set Bossunable=false
set BossunableTime=1
call SetUnitState(Boss,UNIT_STATE_MAX_MANA,10)
set BossBattleN=true
set t=null
endfunction
function s__CommandButton_getCommandBarButton takes integer x,integer y returns integer
return JNFrameGetCommandBarButton(x,y)
endfunction
function s__CommandButton__get_data takes integer this returns integer
return(JNMemoryGetInteger((this+0x190)))
endfunction
function SetGameEndCallback takes string func returns nothing
set EndGameHook___userCallbackName=func
set EndGameHook___userCallbackCode=null
endfunction
function SetGameEndCallbackByCode takes code funcHandle returns nothing
set EndGameHook___userCallbackName=null
set EndGameHook___userCallbackCode=funcHandle
endfunction
function s__EndGameHook___MemoryBlock_initSize takes nothing returns nothing
local integer lastIndex=(400-1)/4
set l__GameExitHook__MemoryBlock_block[lastIndex]=0
endfunction
function s__EndGameHook___MemoryBlock_typecast takes nothing returns nothing
local integer l__GameExitHook__MemoryBlock_block
endfunction
function s__EndGameHook___MemoryBlock_onInit takes nothing returns nothing
call s__EndGameHook___MemoryBlock_initSize()
set s__EndGameHook___MemoryBlock_pHead=(JNMemoryGetInteger(((l__GameExitHook__MemoryBlock_block))+((3)*4)))
set s__EndGameHook___MemoryBlock_size=400
endfunction
function EndGameHook___GetGameWar3 takes nothing returns integer
return(JNMemoryGetInteger((pGameDll+0xD305E0)))
endfunction
function EndGameHook___VirtualProtect takes integer lpAddress,integer dwSize,integer flNewProtect,integer pflOldProtect returns integer
local integer pFunc=(JNMemoryGetInteger((pGameDll+0xA6B384)))
call SaveStr(JNProc_ht,JNProc_key,0,"(IIII)I")
call SaveInteger(JNProc_ht,JNProc_key,1,lpAddress)
call SaveInteger(JNProc_ht,JNProc_key,2,dwSize)
call SaveInteger(JNProc_ht,JNProc_key,3,flNewProtect)
call SaveInteger(JNProc_ht,JNProc_key,4,pflOldProtect)
if(JNProcCall(JNProc__stdcall,pFunc,JNProc_ht))then
return LoadInteger(JNProc_ht,JNProc_key,0)
endif
return 0
endfunction
function EndGameHook___sub_8BED60 takes integer this returns integer
local integer pFunc=pGameDll+0x8BED60
call SaveStr(JNProc_ht,JNProc_key,0,"(I)I")
call SaveInteger(JNProc_ht,JNProc_key,1,this)
if(JNProcCall(JNProc__thiscall,pFunc,JNProc_ht))then
return LoadInteger(JNProc_ht,JNProc_key,0)
endif
return 0
endfunction
function EndGameHook___sub_8CB7D0 takes integer this,integer a2 returns integer
local integer pFunc=pGameDll+0x8CB7D0
call SaveStr(JNProc_ht,JNProc_key,0,"(II)I")
call SaveInteger(JNProc_ht,JNProc_key,1,this)
call SaveInteger(JNProc_ht,JNProc_key,2,a2)
if(JNProcCall(JNProc__thiscall,pFunc,JNProc_ht))then
return LoadInteger(JNProc_ht,JNProc_key,0)
endif
return 0
endfunction
function EndGameHook___GetCodeIndex takes code c returns integer
local integer pCode=C2I(c)
local integer v1=(JNMemoryGetInteger((EndGameHook___pGameWar3+8)))
local integer v2=EndGameHook___sub_8BED60(v1)
local integer index=EndGameHook___sub_8CB7D0(v2,pCode)
return index
endfunction
function EndGameHook___MakeMemoryBlockExecutable takes nothing returns nothing
call EndGameHook___VirtualProtect(s__EndGameHook___MemoryBlock_pHead,s__EndGameHook___MemoryBlock_size,0x40,s__EndGameHook___MemoryBlock_pHead)
set EndGameHook___MemoryBlockOldProtect=(JNMemoryGetInteger((s__EndGameHook___MemoryBlock_pHead)))
endfunction
function s__EndGameHook___AssemblyWriter_create takes integer pHead returns integer
local integer this=s__EndGameHook___AssemblyWriter__allocate()
set s__EndGameHook___AssemblyWriter_pCursor[this]=pHead
return this
endfunction
function s__EndGameHook___AssemblyWriter_malloc takes integer this,integer size returns integer
local integer pBlock=s__EndGameHook___AssemblyWriter_pCursor[this]
set s__EndGameHook___AssemblyWriter_pCursor[this]=s__EndGameHook___AssemblyWriter_pCursor[this]+size
return pBlock
endfunction
function s__EndGameHook___AssemblyWriter_writePadding takes integer this,integer size returns nothing
local integer i=0
loop
exitwhen i>=size
call JNMemorySetByte((s__EndGameHook___AssemblyWriter_pCursor[this]),(0xCC))
set s__EndGameHook___AssemblyWriter_pCursor[this]=s__EndGameHook___AssemblyWriter_pCursor[this]+1
set i=i+1
endloop
endfunction
function s__EndGameHook___AssemblyWriter_writeByte takes integer this,integer byteValue returns nothing
call JNMemorySetByte((s__EndGameHook___AssemblyWriter_pCursor[this]),(byteValue))
set s__EndGameHook___AssemblyWriter_pCursor[this]=s__EndGameHook___AssemblyWriter_pCursor[this]+1
endfunction
function s__EndGameHook___AssemblyWriter_writeInt takes integer this,integer intValue returns nothing
call JNMemorySetInteger((s__EndGameHook___AssemblyWriter_pCursor[this]),(intValue))
set s__EndGameHook___AssemblyWriter_pCursor[this]=s__EndGameHook___AssemblyWriter_pCursor[this]+4
endfunction
function s__EndGameHook___AssemblyWriter_writeOffset takes integer this,integer address returns nothing
call JNMemorySetInteger((s__EndGameHook___AssemblyWriter_pCursor[this]),(address-(s__EndGameHook___AssemblyWriter_pCursor[this]+4)))
set s__EndGameHook___AssemblyWriter_pCursor[this]=s__EndGameHook___AssemblyWriter_pCursor[this]+4
endfunction
function EndGameHook___InitMemoryBlock takes nothing returns nothing
local integer asm
local integer headerSize
call EndGameHook___MakeMemoryBlockExecutable()
set asm=s__EndGameHook___AssemblyWriter_create(s__EndGameHook___MemoryBlock_pHead)
set EndGameHook___pDummy1=s__EndGameHook___AssemblyWriter_malloc(asm,4)
set EndGameHook___pDummy2=s__EndGameHook___AssemblyWriter_malloc(asm,4)
call s__EndGameHook___AssemblyWriter_writePadding(asm,8)
set EndGameHook___pCallback=s__EndGameHook___AssemblyWriter_pCursor[asm]
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x55)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x8B)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xEC)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x53)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x51)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x52)
set EndGameHook___pCallbackCodeIndex=s__EndGameHook___AssemblyWriter_pCursor[asm]+1
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xBB)
call s__EndGameHook___AssemblyWriter_writeInt(asm,0x00000000)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x85)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xDB)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x74)
call s__EndGameHook___AssemblyWriter_writeByte(asm,60)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xB9)
call s__EndGameHook___AssemblyWriter_writeInt(asm,EndGameHook___pGameWar3)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xE8)
call s__EndGameHook___AssemblyWriter_writeOffset(asm,pGameDll+0x2135F0)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x53)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x8B)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xC8)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xE8)
call s__EndGameHook___AssemblyWriter_writeOffset(asm,pGameDll+0x2B97A0)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x8B)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xC8)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x6A)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x00)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x6A)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x00)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x6A)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x01)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x68)
call s__EndGameHook___AssemblyWriter_writeInt(asm,EndGameHook___pDummy2)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x68)
call s__EndGameHook___AssemblyWriter_writeInt(asm,EndGameHook___pDummy1)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xE8)
call s__EndGameHook___AssemblyWriter_writeOffset(asm,pGameDll+0x22ABF0)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xA1)
call s__EndGameHook___AssemblyWriter_writeInt(asm,EndGameHook___pDummy2)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x85)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xC0)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x74)
call s__EndGameHook___AssemblyWriter_writeByte(asm,10)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xB9)
call s__EndGameHook___AssemblyWriter_writeInt(asm,EndGameHook___pDummy2)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xE8)
call s__EndGameHook___AssemblyWriter_writeOffset(asm,pGameDll+0x8C2260)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x5A)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x59)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x5B)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x8B)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xE5)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x5D)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xC3)
call s__EndGameHook___AssemblyWriter_writePadding(asm,8)
set EndGameHook___pTrampoline=s__EndGameHook___AssemblyWriter_pCursor[asm]
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x55)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x8B)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xEC)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x83)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xEC)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x08)
set headerSize=s__EndGameHook___AssemblyWriter_pCursor[asm]-EndGameHook___pTrampoline
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xE8)
call s__EndGameHook___AssemblyWriter_writeOffset(asm,EndGameHook___pCallback)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xE9)
call s__EndGameHook___AssemblyWriter_writeOffset(asm,EndGameHook___pSub_35FDF0+headerSize)
call s__EndGameHook___AssemblyWriter_writePadding(asm,8)
call JNMemorySetInteger((EndGameHook___pDummy1),(0))
call JNMemorySetInteger((EndGameHook___pDummy2),(0))
call s__EndGameHook___AssemblyWriter_deallocate(asm)
endfunction
function EndGameHook___IsHookedAlready takes nothing returns boolean
return(JNMemoryGetInteger((EndGameHook___pSub_35FDF0)))!=0x83EC8B55
endfunction
function EndGameHook___HookEndGame takes nothing returns nothing
local integer asm
set EndGameHook___originalSub_35FDF0[0]=(JNMemoryGetInteger(((EndGameHook___pSub_35FDF0))+((0)*4)))
set EndGameHook___originalSub_35FDF0[1]=(JNMemoryGetInteger(((EndGameHook___pSub_35FDF0))+((1)*4)))
set asm=s__EndGameHook___AssemblyWriter_create(EndGameHook___pSub_35FDF0)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0xE9)
call s__EndGameHook___AssemblyWriter_writeOffset(asm,EndGameHook___pTrampoline)
call s__EndGameHook___AssemblyWriter_writeByte(asm,0x90)
call s__EndGameHook___AssemblyWriter_deallocate(asm)
endfunction
function EndGameHook___UnhookEndGame takes nothing returns nothing
call JNMemorySetInteger(((EndGameHook___pSub_35FDF0))+((0)*4),(EndGameHook___originalSub_35FDF0[0]))
call JNMemorySetInteger(((EndGameHook___pSub_35FDF0))+((1)*4),(EndGameHook___originalSub_35FDF0[1]))
endfunction
function EndGameHook___SetEndGameHookCallback takes code func returns nothing
call JNMemorySetInteger((EndGameHook___pCallbackCodeIndex),(EndGameHook___GetCodeIndex(func)))
endfunction
function EndGameHook___Callback takes nothing returns nothing
call EndGameHook___UnhookEndGame()
if(EndGameHook___userCallbackName !=null)then
call ExecuteFunc(EndGameHook___userCallbackName)
elseif(EndGameHook___userCallbackCode !=null)then
call ForForce(GetForceOfPlayer(Player(0)),EndGameHook___userCallbackCode)
endif
endfunction
function EndGameHook___InitHook takes nothing returns nothing
if((JNMemoryGetInteger((EndGameHook___pSub_35FDF0)))!=0x83EC8B55)then
return
endif
call EndGameHook___InitMemoryBlock()
call EndGameHook___HookEndGame()
endfunction
function EndGameHook___Init takes nothing returns nothing
set EndGameHook___pGameWar3=(JNMemoryGetInteger((pGameDll+0xD305E0)))
set EndGameHook___pSub_35FDF0=pGameDll+0x35FDF0
call EndGameHook___InitHook()
call JNMemorySetInteger((EndGameHook___pCallbackCodeIndex),(EndGameHook___GetCodeIndex((function EndGameHook___Callback))))
endfunction
function s__SpecialEffectColor___MemoryBlock_initSize takes nothing returns nothing
local integer lastIndex=(0x8-1)/4
set l__SpecialEffectColor__MemoryBlock_block[lastIndex]=0
endfunction
function s__SpecialEffectColor___MemoryBlock_typecast takes nothing returns nothing
local integer l__SpecialEffectColor__MemoryBlock_block
endfunction
function s__SpecialEffectColor___MemoryBlock_onInit takes nothing returns nothing
call s__SpecialEffectColor___MemoryBlock_initSize()
set s__SpecialEffectColor___MemoryBlock_pHead=(JNMemoryGetInteger(((l__SpecialEffectColor__MemoryBlock_block))+((3)*4)))
set s__SpecialEffectColor___MemoryBlock_size=0x8
endfunction
function SpecialEffectColor___GetObjectSprite takes integer pObject returns integer
if pObject !=0 then
return(JNMemoryGetInteger((pObject+0x28)))
endif
return 0
endfunction
function SpecialEffectColor___jEffectToCEffect takes effect whichEffect returns integer
local integer addr=pGameDll+0x021F4A0
local integer h=GetHandleId(whichEffect)
if h==0 then
return 0
endif
call SaveStr(JNProc_ht,JNProc_key,0,"(I)I")
call SaveInteger(JNProc_ht,JNProc_key,1,h)
if(JNProcCall(JNProc__thiscall,addr,JNProc_ht))then
set whichEffect=null
return LoadInteger(JNProc_ht,JNProc_key,0)
endif
set whichEffect=null
return 0
endfunction
function SetSpecialEffectColorEx takes effect whichEffect,integer red,integer green,integer blue,integer alpha returns nothing
local integer addr
local integer pSprite=SpecialEffectColor___GetObjectSprite(SpecialEffectColor___jEffectToCEffect(whichEffect))
if pSprite>0 then
set addr=(JNMemoryGetInteger(((JNMemoryGetInteger((pSprite)))+0x30)))
call JNMemorySetInteger((s__SpecialEffectColor___MemoryBlock_pHead),(DzGetColor(alpha,red,green,blue)))
call SaveStr(JNProc_ht,JNProc_key,0,"(II)I")
call SaveInteger(JNProc_ht,JNProc_key,1,pSprite)
call SaveInteger(JNProc_ht,JNProc_key,2,s__SpecialEffectColor___MemoryBlock_pHead)
call JNProcCall(JNProc__thiscall,addr,JNProc_ht)
if alpha>=0x00 and alpha<=0xFF then
set addr=(JNMemoryGetInteger(((JNMemoryGetInteger((pSprite)))+0x34)))
call SaveStr(JNProc_ht,JNProc_key,0,"(II)I")
call SaveInteger(JNProc_ht,JNProc_key,1,pSprite)
call SaveInteger(JNProc_ht,JNProc_key,2,alpha)
call JNProcCall(JNProc__thiscall,addr,JNProc_ht)
endif
set addr=(JNMemoryGetInteger(((JNMemoryGetInteger((pSprite)))+0x14)))
call SaveStr(JNProc_ht,JNProc_key,0,"(I)I")
call SaveInteger(JNProc_ht,JNProc_key,1,pSprite)
call JNProcCall(JNProc__thiscall,addr,JNProc_ht)
endif
set whichEffect=null
endfunction
function SetSpecialEffectColor takes effect whichEffect,integer red,integer green,integer blue returns nothing
local integer addr
local integer pSprite=SpecialEffectColor___GetObjectSprite(SpecialEffectColor___jEffectToCEffect(whichEffect))
if pSprite>0 then
set addr=(JNMemoryGetInteger(((JNMemoryGetInteger((pSprite)))+0x30)))
call JNMemorySetInteger((s__SpecialEffectColor___MemoryBlock_pHead),(DzGetColor(0,red,green,blue)))
call SaveStr(JNProc_ht,JNProc_key,0,"(II)I")
call SaveInteger(JNProc_ht,JNProc_key,1,pSprite)
call SaveInteger(JNProc_ht,JNProc_key,2,s__SpecialEffectColor___MemoryBlock_pHead)
call JNProcCall(JNProc__thiscall,addr,JNProc_ht)
set addr=(JNMemoryGetInteger(((JNMemoryGetInteger((pSprite)))+0x14)))
call SaveStr(JNProc_ht,JNProc_key,0,"(I)I")
call SaveInteger(JNProc_ht,JNProc_key,1,pSprite)
call JNProcCall(JNProc__thiscall,addr,JNProc_ht)
endif
set whichEffect=null
endfunction
function SetSpecialEffectAlpha takes effect whichEffect,integer alpha returns nothing
local integer addr
local integer pSprite=SpecialEffectColor___GetObjectSprite(SpecialEffectColor___jEffectToCEffect(whichEffect))
if pSprite !=0 and alpha>=0x00 and alpha<=0xFF then
set addr=(JNMemoryGetInteger(((JNMemoryGetInteger((pSprite)))+0x34)))
call SaveStr(JNProc_ht,JNProc_key,0,"(II)I")
call SaveInteger(JNProc_ht,JNProc_key,1,pSprite)
call SaveInteger(JNProc_ht,JNProc_key,2,alpha)
call JNProcCall(JNProc__thiscall,addr,JNProc_ht)
set addr=(JNMemoryGetInteger(((JNMemoryGetInteger((pSprite)))+0x14)))
call SaveStr(JNProc_ht,JNProc_key,0,"(I)I")
call SaveInteger(JNProc_ht,JNProc_key,1,pSprite)
call JNProcCall(JNProc__thiscall,addr,JNProc_ht)
endif
set whichEffect=null
endfunction
function EsdsTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=(LoadReal(udg_Hashtable,p,$9B58470C)+(GetUnitState(u,UNIT_STATE_MAX_MANA)*0.0025))*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer l__Int=GetHeroInt(u,true)
local integer Qdmg=R2I(l__Int*(0.15+(LoadInteger(udg_Hashtable,p,$FAFE5485)*0.3)))
local integer Wdmg=R2I(l__Int*(5+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6)))
local integer Edmg=R2I(l__Int*(4+(LoadInteger(udg_Hashtable,p,$6074AEF9)*4)))
local integer Edmg2=R2I(l__Int*(1+(LoadInteger(udg_Hashtable,p,$6074AEF9)*3)))
local integer RLv=LoadInteger(udg_Hashtable,p,$BB70E228)
local integer Rdmg=R2I(l__Int*(RLv*8))
local integer Tdmg=R2I(l__Int*(80+(LoadInteger(udg_Hashtable,p,$132FA1F5)*40)))
local integer temp
local real tempR
if LoadBoolean(System,p,$E9917373)then
set Wdmg=Wdmg+R2I(Wm*Kirie[p])
set Edmg=Edmg+R2I(Em*Kirie[p])
set Tdmg=Tdmg+R2I(Tm*Kirie[p])
endif
if LoadInteger(udg_Hashtable,p,$A8D71652)>=1 then
if RLv !=LoadInteger(udg_Hash,GetHandleId(u),$8220E536)then
set tempR=LoadReal(Hash_Stat,p,$BC3801A9)-LoadReal(udg_Hash,GetHandleId(u),$AD6F876A)
set tempR=tempR+(RLv*0.15)
call SaveReal(Hash_Stat,p,$BC3801A9,tempR)
set temp=LoadInteger(Hash_Stat,p,$C18D16A0)-LoadInteger(udg_Hash,GetHandleId(u),$76837FEA)
set temp=temp+(RLv*50)
call SaveInteger(Hash_Stat,p,$C18D16A0,temp)
call SaveInteger(udg_Hash,GetHandleId(u),$76837FEA,(RLv*50))
call SaveReal(udg_Hash,GetHandleId(u),$AD6F876A,(RLv*0.15))
call SaveInteger(udg_Hash,GetHandleId(u),$8220E536,RLv)
call TimerStart(udg_infoRe[p],0.01,false,null)
endif
endif
if LoadBoolean(udg_Hash,p,$8E18D78E)then
call EXSetAbilityString('H161',1,ABILITY_DATA_UBERTIP,"|cff0078FF초당 소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 지점에 연속적으로 고드름을 쏴서 공격합니다. 마나가 전부 소모되거나 해당 지점으로부터 멀어질경우 스킬이 취소됩니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff0000cd얼음속성 |cff4169e1지속 마법\n|cff00ff00슬로우|cffffa500 : 0.5초간 30%\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00최대 유지거리|cffffa500 : 2000\n|cff00ff00범위|cffffa500 : "+I2S(R2I(350*Skrange[p]))+"\n|cff00ff00피해 간격|cffffa500 : 0.16초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(1*ct[p]))+"초\n|cffFF0000EX : |cffffa500매 3번째마다 150%의 피해를 지닌 특수 얼음이 발사된다.")
else
call EXSetAbilityString('H161',1,ABILITY_DATA_UBERTIP,"|cff0078FF초당 소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 지점에 연속적으로 고드름을 쏴서 공격합니다. 마나가 전부 소모되거나 해당 지점으로부터 멀어질경우 스킬이 취소됩니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff0000cd얼음속성 |cff4169e1지속 마법\n|cff00ff00슬로우|cffffa500 : 0.5초간 30%\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00최대 유지거리|cffffa500 : 2000\n|cff00ff00범위|cffffa500 : "+I2S(R2I(350*Skrange[p]))+"\n|cff00ff00피해 간격|cffffa500 : 0.16초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(1*ct[p]))+"초")
endif
call DzSyncData("SKRG",I2S('H161')+"/"+R2S(350*Skrange[p]))
call EXSetAbilityString('H162',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n사용 지점에 거대한 고드름 창을 던져 범위내 적들에게 슬로우를 가합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff0000cd얼음속성 |cff4169e1마법\n|cff00ff00슬로우|cffffa500 : 2초간 60%\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00범위|cffffa500 : "+I2S(R2I(550*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H162')+"/"+R2S(550*Skrange[p]))
if LoadBoolean(udg_Hash,p,$8E18D78E)then
call EXSetAbilityString('H163',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n거대한 얼음을 떨어트린후 해당 지점을 얼음폭풍으로 덮어 지속피해를 가한다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00얼음 데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00폭풍 데미지|cffffa500 : 2초에 걸쳐 "+I2S(Edmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cff0000cd얼음속성 |cff4169e1마법\n|cff00ff00스턴|cffffa500 : 1초\n|cff00ff00방어력 감소|cffffa500 : 5초간 10%\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00범위|cffffa500 : "+I2S(R2I(550*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초\n|cffFF0000EX : |cffffa500얼음 적중시 방어력 감소 효과가 추가된다.")
else
call EXSetAbilityString('H163',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n거대한 얼음을 떨어트린후 해당 지점을 얼음폭풍으로 덮어 지속피해를 가한다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00얼음 데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00폭풍 데미지|cffffa500 : 2초에 걸쳐 "+I2S(Edmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cff0000cd얼음속성 |cff4169e1마법\n|cff00ff00스턴|cffffa500 : 1초\n|cff00ff00사거리|cffffa500 : 1500\n|cff00ff00범위|cffffa500 : "+I2S(R2I(550*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초")
endif
call DzSyncData("SKRG",I2S('H163')+"/"+R2S(550*Skrange[p]))
call EXSetAbilityString('H164',1,ABILITY_DATA_UBERTIP,"얼음 속성 피해량이 상승하고 일정 시간마다 기본 공격시 얼음창이 나가서 추가 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff0000cd얼음속성 |cff4169e1마법\n|cff00ff00얼음 속성 피해량 상승|cffffa500 : "+I2S(RLv*15)+"% \n|cff00ff00공격속도 상승|cffffa500 : "+I2S(RLv*50)+"% \n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(4*ct[p]))+"초")
call EXSetAbilityString('H165',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n시전후 주변을 전부 다 얼려버립니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cff0000cd얼음속성 |cff4169e1마법\n|cff00ff00스턴|cffffa500 : 3초\n|cff00ff00범위|cffffa500 : "+I2S(R2I(1500*Skrange[p]))+"\n|cff00ff00특수|cffffa500 : 시전중 무적을 유지합니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(100*ct[p]))+"초")
set u=null
endfunction
function EsdsEX takes integer p returns nothing
local unit u=Charcter[p]
call SaveBoolean(udg_Hash,p,$8E18D78E,true)
call EsdsTT(p)
if ProduceLV<4 then
call StopSoundBJ(LastBGM,false)
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_EsdeathEx.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
endif
call SaveInteger(udg_Hash,GetHandleId(u),$DA1C90,0)
call SetPlayerName(Player(8),"|cff7b68ee에스데스 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"나는 굴복시키는 쪽이다. 내 의지로 행동한다.")
set u=null
endfunction
function EsdsQD takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real tempR
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit c
local real dmg=GetHeroInt(u,true)*(0.15+(LoadInteger(udg_Hashtable,p,$FAFE5485)*0.3))
local integer slow=LoadInteger(udg_Hash,GetHandleId(u),$35F9AAD8)
local integer ex=LoadInteger(udg_Hash,GetHandleId(u),$DA1C90)
local boolean slowB=false
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(u),$35F9AAD8,slow+1)
if slow>=3 then
set slowB=true
call SaveInteger(udg_Hash,GetHandleId(u),$35F9AAD8,1)
endif
call KillUnit(dummy)
set tempR=GetRandomReal(0,360)
set tempX=tempX+(((SquareRoot(GetRandomReal(0,(250*Skrange[p]*250*Skrange[p]))))*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=tempY+(((SquareRoot(GetRandomReal(0,(250*Skrange[p]*250*Skrange[p]))))*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
if LoadBoolean(udg_Hash,p,$8E18D78E)and slowB then
set dmg=dmg*1.5
call EFsettingXY(p,"war3mapImported\\@EF_FrostNovaTargetWhite4.mdl",0,tempX,tempY,2,270,1,0,0,0)
else
call EFsettingXY(p,"Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl",0,tempX,tempY,2,270,1,0,0,0)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,350*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if slowB then
call SlowApply(u,c,0.5,0.3)
endif
call Damage(u,c,dmg,2,2,true,1,'H161')
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call s__party_deallocate((g))
set t=null
set u=null
set dummy=null
set c=null
endfunction
function EsdsQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit c
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real tempX2
local real tempY2
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
local real tempR
local real tempR2
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local boolean on=LoadBoolean(udg_Hash,GetHandleId(u),$7FDD3CE2)
if not on or not UnitAlive(u)then
call SaveBoolean(udg_Hash,GetHandleId(u),$7FDD3CE2,false)
call SetUnitAbilityLevel(u,'H161',1)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
set tempR=((LoadReal(udg_Hashtable,p,$9B58470C)+(GetUnitState(u,UNIT_STATE_MAX_MANA)*0.0025))*CostM[p])*0.16
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-tempR))
if GetUnitState(u,ConvertUnitState(2))<=tempR or s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)>=2000 then
call SaveBoolean(udg_Hash,GetHandleId(u),$7FDD3CE2,false)
endif
if stage==0 then
set tempR=(GetRandomReal(150,250)*-1)
set tempX2=GetUnitX(u)+(((tempR)*1.0)*Cos(((angle+25)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(u)+(((tempR)*1.0)*Sin(((angle+25)*1.0)*bj_DEGTORAD))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
else
set tempR=(GetRandomReal(150,250)*-1)
set tempX2=GetUnitX(u)+(((tempR)*1.0)*Cos(((angle-25)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(u)+(((tempR)*1.0)*Sin(((angle-25)*1.0)*bj_DEGTORAD))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
endif
set tempR=(s__Distance_PBP(tempX2,tempY2,tempX,tempY)/6000)
set c=CreateUnit(Player(p-1),'sys9',tempX2,tempY2,angle)
call EFsettingU(p,"war3mapImported\\@EF_Ice_Missle.mdl",tempR,c,"origin")
call EFsettingU(p,"Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl",tempR,c,"origin")
call SetUnitAnimationByIndex(c,65)
call SetUnitScale(c,2,1,1)
set tempR2=GetRandomReal(250,425)
call SetUnitFlyHeight(c,tempR2,0)
call SetUnitFlyHeight(c,0,tempR2/tempR)
call KnockBackXYef(c,tempX,tempY,tempR,tempR*0.1)
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$535B7E08,c)
call SaveReal(udg_Hash,GetHandleId(t2),$A99320FA,tempX)
call SaveReal(udg_Hash,GetHandleId(t2),$FDF65382,tempY)
call TimerStart(t2,tempR,false,function EsdsQD)
endif
set t=null
set t2=null
set u=null
set c=null
endfunction
function EsdsW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit c
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real tempX2
local real tempY2
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
local real tempR
local real dmg=GetHeroInt(u,true)*(5+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6))
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local effect ef
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
if GetRandomInt(0,1)==0 then
set tempX2=GetUnitX(u)+(((-250)*1.0)*Cos(((angle+20)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(u)+(((-250)*1.0)*Sin(((angle+20)*1.0)*bj_DEGTORAD))
else
set tempX2=GetUnitX(u)+(((-250)*1.0)*Cos(((angle-20)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(u)+(((-250)*1.0)*Sin(((angle-20)*1.0)*bj_DEGTORAD))
endif
set tempR=(s__Distance_PBP(tempX2,tempY2,tempX,tempY)/9000)
set dummy=CreateUnit(Player(p-1),'sys9',tempX2,tempY2,angle)
call EFsettingXY(p,"Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",0,tempX2,tempY2,3,270,1,0,0,600)
call EFsettingU(p,"war3mapImported\\@EF_Icepartizan.mdl",(tempR*1.05)+0.2,dummy,"origin")
call SetUnitAnimationByIndex(dummy,45)
call SetUnitScale(dummy,2,1,1)
call SetUnitFlyHeight(dummy,600,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
call TimerStart(t,0.2,false,function EsdsW)
elseif stage==1 then
set tempX2=GetUnitX(dummy)
set tempY2=GetUnitY(dummy)
call EFsettingXY(p,"Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",0,tempX2,tempY2,3,angle,1,0,0,600)
set tempR=(s__Distance_PBP(tempX2,tempY2,tempX,tempY)/6000)
call SetUnitFlyHeight(dummy,0,600/tempR)
call KnockBackXYef(dummy,tempX,tempY,tempR,tempR*0.1)
call TimerStart(t,tempR,false,function EsdsW)
elseif stage==2 then
call KillUnit(dummy)
call EFsettingXY(p,"war3mapImported\\@EF_FrozenDT.mdl",0,tempX,tempY,1.75*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Freezingring.mdl",0,tempX,tempY,4*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_29.mdl",0,tempX,tempY,6*Skrange[p],270,1,0,0,-250)
call EFsettingXY(p,"war3mapImported\\@EF_effect_stx1.mdl",0,tempX,tempY,3*Skrange[p],270,1,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,550*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call SlowApply(u,c,2,0.6)
call Damage(u,c,dmg,2,2,false,1,'H162')
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set dummy=null
set ef=null
endfunction
function EsdsE takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit dummy
local unit c
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
local real tempR
local real dmg=GetHeroInt(u,true)*(4+(LoadInteger(udg_Hashtable,p,$6074AEF9)*4))
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local effect ef
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call imagedummySET(p,dummy,"war3mapImported\\@EF_IceMeteor.mdl")
call SetUnitScale(dummy,2,1,1)
call SetUnitTimeScale(dummy,6.67)
call UnitApplyTimedLife(dummy,'BHwe',0.2)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
call TimerStart(t,0.3,false,function EsdsE)
elseif stage==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_EsdeathEef.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call EFsettingXY(p,"war3mapImported\\@EF_AZ B.mdl",2,tempX,tempY,2.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_ESFrost_C1_Caster.mdl",0,tempX,tempY,1*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Nether Blast III Blue.mdl",0,tempX,tempY,2*Skrange[p],270,3,0,0,0)
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_Cr_WindCirclefaster.mdl",tempX,tempY)
call SetSpecialEffectColor(ef,100,100,255)
call EXSetEffectSize(ef,1.25*Skrange[p])
call DestroyEffect(ef)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,550*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if LoadBoolean(udg_Hash,p,$8E18D78E)then
call UnitAddAbility(c,'A028')
call EXSetAbilityDataReal(EXGetUnitAbility(c,'A028'),1,108,(GetUnitState(c,ConvertUnitState(0x20))*0.1)*-1)
call IncUnitAbilityLevel(c,'A028')
call DecUnitAbilityLevel(c,'A028')
call TimerABILL(c,5,'A028')
endif
call Stun(u,c,1)
call Damage(u,c,dmg,2,2,false,1,'H163')
endif
endloop
call TimerStart(t,0.2,true,function EsdsE)
elseif stage>=2 then
if stage==11 then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set dmg=GetHeroInt(u,true)*(1+(LoadInteger(udg_Hashtable,p,$6074AEF9)*3))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,550*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,2,true,0.1,'H163')
endif
endloop
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set dummy=null
set ef=null
endfunction
function EsdsRc takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
call EXSetAbilityState(EXGetUnitAbility(u,'H164'),ABILITY_STATE_COOLDOWN,0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set u=null
set t=null
endfunction
function EsdsT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit c
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real tempX
local real tempY
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempR
local real dmg=GetHeroInt(u,true)*(80+(LoadInteger(udg_Hashtable,p,$132FA1F5)*40))
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real loopA
local real loopB
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call SetUnitAnimationByIndex(u,6)
call TimerStart(t,1,false,function EsdsT)
elseif stage<=14 then
call EFsettingU(p,"war3mapImported\\@EF_Effect_Invisibility_Target_Wave_Blue.mdl",0,u,"chest")
if stage==8 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_finalfieldh.mdl",0.7,tempX,tempY,6*Skrange[p],270,1,0,0,0)
endif
call TimerStart(t,0.1,false,function EsdsT)
elseif stage==15 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_EsdeathTef.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call SetUnitAnimationByIndex(u,5)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_frozenshell.mdl",0,tempX,tempY,25*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Freezingring.mdl",0,tempX,tempY,25*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_FrozenDT.mdl",0,tempX,tempY,5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ERE_LightningStream.mdl",0,tempX,tempY,30*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ERE_LightningStream.mdl",0,tempX,tempY,30*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ERE_LightningStream.mdl",0,tempX,tempY,30*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Vinz Nova Ice.mdl",0,tempX,tempY,4.5*Skrange[p],270,1,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Stun(u,c,3)
call Damage(u,c,dmg,2,2,false,1,'H165')
endif
endloop
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function EsdsSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local real tempR
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local integer tempI
local integer tempI2
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
local unit c
local real Mana
if GetSpellAbilityId()=='H160' then
call BuffCall(u,'B023',20,false,false)
call StatChangeX(p,0.25,"피증",20,"H1601")
call StatChangeX(p,-12,"피감",20,"H1602")
call StatChangeX(p,20,"이속",20,"H1603")
call EFsettingU(p,"war3mapImported\\@EF_bingjia1.mdl",20,u,"origin")
call Animate(u,13)
call DestroyTimer(t)
endif
if GetSpellAbilityId()=='H161' then
if GetUnitAbilityLevel(u,'H161')==3 then
call SaveBoolean(udg_Hash,GetHandleId(u),$7FDD3CE2,false)
call SetUnitAbilityLevel(u,'H161',1)
call DestroyTimer(t)
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_EsdeathQ.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1500 then
set tempX=GetUnitX(u)+(((1500)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((1500)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
call SaveInteger(udg_Hash,GetHandleId(u),$35F9AAD8,10)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,tempY)
call SaveBoolean(udg_Hash,GetHandleId(u),$7FDD3CE2,true)
call TimerStart(t,0.16,true,function EsdsQ)
call SetUnitAbilityLevel(u,'H161',3)
endif
endif
if GetSpellAbilityId()=='H162' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_EsdeathWef.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call Animate(u,9)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1500 then
set tempX=GetUnitX(u)+(((1500)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((1500)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,tempY)
call TimerStart(t,0.02,false,function EsdsW)
endif
if GetSpellAbilityId()=='H163' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_EsdeathE.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call Animate(u,6)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1500 then
set tempX=GetUnitX(u)+(((1500)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((1500)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,tempY)
call TimerStart(t,0.02,false,function EsdsE)
endif
if GetSpellAbilityId()=='H164' then
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call TimerStart(t,0.02,false,function EsdsRc)
endif
if GetSpellAbilityId()=='H165' then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_EsdeathT.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,GetUnitFacing(u))
call Shacull(p)
call Mujuk(p,u)
call TimerStart(t,0.02,false,function EsdsT)
endif
set u=null
set t=null
set c=null
endfunction
function EsdsST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
local real tempR
set ChSkillD[p]='H160'
set ChSkillQ[p]='H161'
set ChSkillW[p]='H162'
set ChSkillE[p]='H163'
set ChSkillR[p]='H164'
set ChSkillT[p]='H165'
set Range[p]=1200
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
call UnitAddAbility(u,'Amrf')
call UnitRemoveAbility(u,'Amrf')
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_EsdsQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_EsdsW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_EsdsE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_EsdsR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_EsdsT.blp",0)
endif
set STRup[p]=9
set AGIup[p]=3
set INTup[p]=8
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,85)
call SaveReal(udg_Hashtable,p,$43C91172,0.35)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.8)
set tempR=LoadReal(Hash_Stat,p,$BC3801A9)+0.05
call SaveReal(Hash_Stat,p,$BC3801A9,tempR)
set ICED[p]=0.05
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$9B58470C,100)
call SaveReal(udg_Hashtable,p,$88E0F85F,50)
call SaveReal(udg_Hashtable,p,$E755DDB8,275)
call SaveReal(udg_Hashtable,p,$ABD3E955,125)
call SaveReal(udg_Hashtable,p,$A2229E00,300)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,200)
call SaveReal(udg_Hashtable,p,$C3EA9E83,0)
call SaveReal(udg_Hashtable,p,$A8D71652,0)
call SaveReal(udg_Hashtable,p,$127510D2,2250)
call SaveReal(udg_Hashtable,p,$B491D29B,1500)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$7312D821,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$E6BB3831,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_EsdsF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc제도의 얼음마녀")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"모든 피해가 얼음 속성으로 자동 변환됩니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00얼음 속성 피해량 상승|cffffa500 : 5%\n|cff00ff00특수|cffffa500 : 둔화 혹은 기절에 걸린 적에게 10%의 추가 피해")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function EsdsSkill)
call SaveInteger(udg_Hashtable,p,$5EFF7683,16)
call EsdsTT(p)
set u=null
set trg=null
endfunction
function Naru__AngleTrue0 takes real A,real A2,real R returns boolean
local boolean n
if RAbsBJ(A-A2)>180 then
if A<0 then
set A=A+360
endif
if A2<0 then
set A2=A2+360
endif
endif
if A-A2>R*-1 and A-A2<R*1 then
set n=true
else
set n=false
endif
return n
endfunction
function NaruTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer Agi=R2I(GetUnitState(u,ConvertUnitState(0x14)))
local integer Qdmg=R2I(Agi*(2+(LoadInteger(udg_Hashtable,p,$FAFE5485)*2)))
local integer Wdmg1=R2I(Agi*(4+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6)))
local integer Wdmg2=R2I(Agi*(5+(LoadInteger(udg_Hashtable,p,$457BCFC0)*5)))
local integer Edmg1=R2I(Agi*((LoadInteger(udg_Hashtable,p,$6074AEF9)*6)))
local integer Edmg2=R2I(Agi*(5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*3)))
local integer Edmg3=R2I(Agi*(3+(LoadInteger(udg_Hashtable,p,$6074AEF9)*5)))
local integer Rdmg1=R2I(Agi*(5+(LoadInteger(udg_Hashtable,p,$BB70E228)*6)))
local integer Rdmg2=R2I(Agi*(1.5+(LoadInteger(udg_Hashtable,p,$BB70E228)*3)))
local integer Tdmg=R2I(Agi*(80+(LoadInteger(udg_Hashtable,p,$132FA1F5)*50)))
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Qm*Kirie[p])
set Wdmg1=Wdmg1+R2I(Wm*Kirie[p])
set Wdmg2=Wdmg2+R2I(Wm*Kirie[p])
set Edmg2=Edmg2+R2I(Em*Kirie[p])
set Edmg3=Edmg3+R2I(Em*Kirie[p])
set Rdmg1=Rdmg1+R2I(Rm*Kirie[p])
set Rdmg2=Rdmg2+R2I(Rm*Kirie[p])
set Tdmg=Tdmg+R2I(Tm*Kirie[p])
endif
if LoadInteger(udg_Hashtable,p,$A8D71652)>=1 and GetUnitAbilityLevel(u,'H204')>=1 and not LoadBoolean(udg_Hash,p,$E0C847CC)then
call SaveBoolean(udg_Hash,p,$E0C847CC,true)
if LoadBoolean(udg_Hash,p,$54547A2B)then
call SetUnitAbilityLevel(u,'H204',1)
else
call SetUnitAbilityLevel(u,'H204',3)
endif
endif
if LoadBoolean(udg_Hash,p,$C75C3005)then
call EXSetAbilityString('H201',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n전방을 빠르게 베어서 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00사거리|cffffa500 : 1200\n|cff00ff00범위|cffffa500 : "+I2S(R2I(240*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(1.2*ct[p]))+"초\n|cffFF0000EX : |cffffa500쿨타임이 1.2초로 감소하고 범위가 2배가 된다.")
call DzSyncData("SKRG",I2S('H201')+"/"+R2S(240*Skrange[p]))
else
call EXSetAbilityString('H201',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n전방을 빠르게 베어서 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00사거리|cffffa500 : 1200\n|cff00ff00범위|cffffa500 : "+I2S(R2I(120*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(2.5*ct[p]))+"초\n|cffFF0000EX : |cffffa500쿨타임이 1.2초로 감소하고 범위가 2배가 된다.")
call DzSyncData("SKRG",I2S('H201')+"/"+R2S(120*Skrange[p]))
endif
call EXSetAbilityString('H202',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n반원 형태로 주변을 베어서 피해를 가합니다. 차징시간에 따라서 피해량이 변경됩니다. 소지중인 나비가 많을수록 차징시간이 빨라집니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg1)+" ~ "+I2S(R2I(Wdmg1*1.5))+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00범위|cffffa500 : "+I2S(R2I(1500*Skrange[p]))+"\n|cff00ff00최대 차징시간|cffffa500 : 1.5초 (최소 0.2초)\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(14*ct[p]))+"초")
call EXSetAbilityString('H206',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n사용 방향으로 이동후 주변에 적이있다면 대상 주변으로 이동해 공격합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00최대 돌진거리|cffffa500 : 800\n|cff00ff00범위|cffffa500 : "+I2S(R2I(350*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(6*ct[p]))+"초")
call EXSetAbilityString('H203',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n사용 지점으로 칼을 던져서 해당 지점에 지속적인 피해를 가합니다. 지속시간내에 재사용시 칼의 위치로 이동해 적들을 공격합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00칼날 지속 데미지|cffffa500 : "+I2S(Edmg1)+"\n|cff00ff00재사용 데미지|cffffa500 : "+I2S(Edmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00최대 사거리|cffffa500 : 1200\n|cff00ff00범위|cffffa500 : "+I2S(R2I(550*Skrange[p]))+"\n|cff00ff00지속시간|cffffa500 : 3초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(11*ct[p]))+"초")
call EXSetAbilityString('H207',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n주변을 베어서 적들에게 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg3)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00범위|cffffa500 : "+I2S(R2I(600*Skrange[p]))+"\n|cff00ff00지연시간|cffffa500 : 0.25초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(7*ct[p]))+"초")
call EXSetAbilityString('H204',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n자세에 따라 효과가 다른 공격을 시행합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg1)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00범위|cffffa500 : "+I2S(R2I(650*Skrange[p]))+"\n|cff00ff00특수|cffffa500 : 사용후 8초내에 쿨타임과 마나소모없이 2번 더 사용이 가능합니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(24*ct[p]))+"초")
call EXSetAbilityString('H204',3,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n자세에 따라 효과가 다른 공격을 시행합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00범위|cffffa500 : "+I2S(R2I(650*Skrange[p]))+"\n|cff00ff00최대사거리|cffffa500 : 750\n|cff00ff00범위|cffffa500 : "+I2S(R2I(300*Skrange[p]))+"\n|cff00ff00특수1|cffffa500 : 대상에게 돌진중 무적을 유지합니다.\n|cff00ff00특수2|cffffa500 : 사용후 8초내에 최대 8번 쿨타임과 마나소모없이 대상에게 재돌진이 가능합니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(24*ct[p]))+"초")
call EXSetAbilityString('H205',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n대상을 여러번 베어서 공격을 가합니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00최대사거리|cffffa500 : 350\n|cff00ff00특수|cffffa500 : 효과중 무적을 유지합니다.\n|cff00ff00스턴|cffffa500 : 4초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(80*ct[p]))+"초")
set u=null
endfunction
function NaruEX takes integer p returns nothing
local unit u=Charcter[p]
call SaveBoolean(udg_Hash,p,$C75C3005,true)
if ProduceLV<4 then
set ProduceLV=4
call StopSound(LastBGM,false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_EX_BGM.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSound(LastEFVoice,false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_EX_Get.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call ProduTime(26,4)
endif
call SetPlayerName(Player(8),"|cffff00ff나루메아 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"나의 앞길을 방해한다면 단지 베어넘길뿐이야..!")
call EXSetAbilityDataReal(EXGetUnitAbility(u,'H201'),1,105,1.2)
call IncUnitAbilityLevel(u,'H201')
call DecUnitAbilityLevel(u,'H201')
if LoadBoolean(udg_Hash,p,$C75C3005)then
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"발도술 적중 혹은 일정시간마다 기본 공격 적중시 나루메아는 '나비'를 획득한다. 나비의 갯수에 따라 다음 스킬 피해량이 강화된다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00나비 최대 갯수|cffffa500 : 7개\n|cff00ff00기본 공격 적중시 나비 획득|cffffa500 : 2개 (쿨타임 1초)\n|cff00ff00다음 스킬 피해량 증가|cffffa500 : 나비 갯수 x 4%의 추가피해\n|cffFF0000EX : |cffffa500기본 공격으로 얻는 나비 갯수가 2개가 되며 스킬 피해량 증가가 4%로 상승한다.")
endif
set u=null
endfunction
function NaruF takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit dummy
local integer tempI=LoadInteger(udg_Hash,GetHandleId(u),$93AB7BC2)
local real tempX
local real tempY
local real tempR=GetUnitFacing(u)
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$E1B97949)
call SetUnitVertexColor(dummy,255,255,255,0)
call SetUnitX(dummy,GetRectCenterX(gg_rct_WisspZone))
call SetUnitY(dummy,GetRectCenterY(gg_rct_WisspZone))
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$588728A4)
call SetUnitVertexColor(dummy,255,255,255,0)
call SetUnitX(dummy,GetRectCenterX(gg_rct_WisspZone))
call SetUnitY(dummy,GetRectCenterY(gg_rct_WisspZone))
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$E240D6CE)
call SetUnitVertexColor(dummy,255,255,255,0)
call SetUnitX(dummy,GetRectCenterX(gg_rct_WisspZone))
call SetUnitY(dummy,GetRectCenterY(gg_rct_WisspZone))
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$8AD58133)
call SetUnitVertexColor(dummy,255,255,255,0)
call SetUnitX(dummy,GetRectCenterX(gg_rct_WisspZone))
call SetUnitY(dummy,GetRectCenterY(gg_rct_WisspZone))
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$483E0BEE)
call SetUnitVertexColor(dummy,255,255,255,0)
call SetUnitX(dummy,GetRectCenterX(gg_rct_WisspZone))
call SetUnitY(dummy,GetRectCenterY(gg_rct_WisspZone))
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$5736C44F)
call SetUnitVertexColor(dummy,255,255,255,0)
call SetUnitX(dummy,GetRectCenterX(gg_rct_WisspZone))
call SetUnitY(dummy,GetRectCenterY(gg_rct_WisspZone))
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$E1C9D00)
call SetUnitVertexColor(dummy,255,255,255,0)
call SetUnitX(dummy,GetRectCenterX(gg_rct_WisspZone))
call SetUnitY(dummy,GetRectCenterY(gg_rct_WisspZone))
if tempI>=1 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$E1B97949)
call SetUnitVertexColor(dummy,255,255,255,255)
set tempX=GetUnitX(u)+(((120)*1.0)*Cos(((316)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((120)*1.0)*Sin(((316)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call SetUnitFacing(dummy,tempR)
endif
if tempI>=2 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$588728A4)
call SetUnitVertexColor(dummy,255,255,255,255)
set tempX=GetUnitX(u)+(((100)*1.0)*Cos(((135)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((100)*1.0)*Sin(((135)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call SetUnitFacing(dummy,tempR)
endif
if tempI>=3 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$E240D6CE)
call SetUnitVertexColor(dummy,255,255,255,255)
set tempX=GetUnitX(u)+(((180)*1.0)*Cos(((224)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((180)*1.0)*Sin(((224)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call SetUnitFacing(dummy,tempR)
endif
if tempI>=4 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$8AD58133)
call SetUnitVertexColor(dummy,255,255,255,255)
set tempX=GetUnitX(u)+(((100)*1.0)*Cos(((61)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((100)*1.0)*Sin(((61)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call SetUnitFacing(dummy,tempR)
endif
if tempI>=5 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$483E0BEE)
call SetUnitVertexColor(dummy,255,255,255,255)
set tempX=GetUnitX(u)+(((160)*1.0)*Cos(((180)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((160)*1.0)*Sin(((180)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call SetUnitFacing(dummy,tempR)
endif
if tempI>=6 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$5736C44F)
call SetUnitVertexColor(dummy,255,255,255,255)
set tempX=GetUnitX(u)+(((120)*1.0)*Cos(((0)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((120)*1.0)*Sin(((0)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call SetUnitFacing(dummy,tempR)
endif
if tempI>=7 then
set dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$E1C9D00)
call SetUnitVertexColor(dummy,255,255,255,255)
set tempX=GetUnitX(u)+(((140)*1.0)*Cos(((90)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((140)*1.0)*Sin(((90)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call SetUnitFacing(dummy,tempR)
endif
set t=null
set u=null
set dummy=null
endfunction
function NaruQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempX
local real tempY
local real tempR
local integer loopA=0
local integer tempI=LoadInteger(udg_Hash,GetHandleId(u),$93AB7BC2)
local unit c
local real dmg=GetUnitState(u,ConvertUnitState(0x14))*(2+(LoadInteger(udg_Hashtable,p,$FAFE5485)*2))
local boolean bo=false
local integer g=s__party_create()
set tempX=GetUnitX(u)+(((250)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((250)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_WindAttack.mdl",0,tempX,tempY,1,angle-180,1,0,0,0)
if LoadBoolean(udg_Hash,p,$C75C3005)then
set tempR=240
set tempX=GetUnitX(u)+(((350)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((350)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_AZ_R_Slash Splash Sky.mdl",0,tempX,tempY,4*Skrange[p],angle,1,0,0,0)
set tempX=GetUnitX(u)+(((700)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((700)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_AZ_R_Slash Splash Sky.mdl",0,tempX,tempY,4*Skrange[p],angle,1,0,0,0)
else
set tempR=120
set tempX=GetUnitX(u)+(((350)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((350)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_AZ_R_Slash Splash Sky.mdl",0,tempX,tempY,2.5*Skrange[p],angle,1,0,0,0)
set tempX=GetUnitX(u)+(((700)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((700)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_AZ_R_Slash Splash Sky.mdl",0,tempX,tempY,2.5*Skrange[p],angle,1,0,0,0)
endif
loop
exitwhen loopA>=10
set loopA=loopA+1
set tempX=GetUnitX(u)+(((loopA*120)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((loopA*120)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,tempR*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and LoadInteger(udg_Hash,GetHandleId(t),GetHandleId(c))==0 then
call SaveInteger(udg_Hash,GetHandleId(t),GetHandleId(c),1)
call Damage(u,c,dmg,2,0,false,1,'H201')
if not bo then
set bo=true
set tempI=tempI+1
if tempI>=7 then
set tempI=7
endif
call SaveInteger(udg_Hash,GetHandleId(u),$93AB7BC2,tempI)
if GetLocalPlayer()==Player(p-1)then
if tempI==1 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack1.blp",0)
endif
if tempI==2 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack2.blp",0)
endif
if tempI==3 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack3.blp",0)
endif
if tempI==4 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack4.blp",0)
endif
if tempI==5 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack5.blp",0)
endif
if tempI==6 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack6.blp",0)
endif
if tempI==7 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack7.blp",0)
endif
endif
endif
endif
endloop
endloop
call ND(Player(p-1),0.1,15)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function NaruW1 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempX
local real tempY
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$30D66C69)
local integer tempI=LoadInteger(udg_Hash,GetHandleId(t),$93AB7BC2)
local unit c
local real dmg=GetUnitState(u,ConvertUnitState(0x14))*(4+(LoadInteger(udg_Hashtable,p,$457BCFC0)*6))
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call SetUnitAnimationByIndex(u,14)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle-180)
if GetLocalPlayer()==Player(p-1)then
call DzSetUnitModel(c,"war3mapImported\\@AOE_AOEIndicator_Half_Naru.mdl")
endif
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,c)
call SetUnitScale(c,15,1,1)
if tempI>=1 then
if tempI==1 then
set tempR=1.25
else
set tempR=tempI
endif
set tempR=1.5/tempR
call SaveReal(udg_Hash,GetHandleId(t),$3E5AC259,tempR)
call SaveReal(udg_Hash,GetHandleId(t),$30D66C69,tempR)
if tempI==1 then
set tempR=1.25
else
set tempR=tempI
endif
call SetUnitTimeScale(u,0.8*tempR)
set tempR=0.66*tempR
else
call SaveReal(udg_Hash,GetHandleId(t),$3E5AC259,1.5)
call SaveReal(udg_Hash,GetHandleId(t),$30D66C69,1.5)
set tempR=0.66
call SetUnitTimeScale(u,0.8)
endif
call SetUnitTimeScale(c,tempR)
endif
if stage>=1 and GetUnitCurrentOrder(u)==String2OrderIdBJ("AImove")then
call SaveReal(udg_Hash,GetHandleId(t),$30D66C69,tempR-0.03)
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_effect_yuanbanlin_sand2.mdl",0,GetUnitX(u),GetUnitY(u),1,GetRandomReal(0,360),1,0,0,0)
if tempR<=0 then
call IssueImmediateOrder(u,"stop")
endif
elseif stage>=1 and GetUnitCurrentOrder(u)!=String2OrderIdBJ("AImove")then
call SetUnitTimeScale(u,1)
call ND(Player(p-1),0.2,40)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_W1_ef2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_R_BY_Wood_DanGe_ZhanJi_DaoGuang_6_12.mdl",0,tempX,tempY,7*Skrange[p],angle,2,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Cleaver0.mdl",0,tempX,tempY,6*Skrange[p],angle+270,2,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Cleaver0.mdl",0,tempX,tempY,6*Skrange[p],angle+210,2,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Cleaver0.mdl",0,tempX,tempY,6*Skrange[p],angle+270,2,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Cleaver0.mdl",0,tempX,tempY,6*Skrange[p],angle+210,2,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ShockStompCaster_YAE_NOFOX.mdl",0.5,tempX,tempY,5*Skrange[p],angle,1,90,0,0)
if tempR<=0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_W1_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set dmg=dmg*1.5
elseif tempR<=LoadReal(udg_Hash,GetHandleId(t),$3E5AC259)*0.5 then
set dmg=dmg*1.25
endif
if LoadBoolean(udg_Hash,p,$C75C3005)then
set dmg=dmg*(1+(tempI*0.04))
else
set dmg=dmg*(1+(tempI*0.03))
endif
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
call RemoveUnit(c)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if Naru__AngleTrue0(s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(c),GetUnitY(c)),angle,90)then
call Damage(u,c,dmg,2,0,false,1,'H202')
endif
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function NaruW2 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit dummy=null
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)
local real tempX2
local real tempY2
local real tempR
local integer tempI=LoadInteger(udg_Hash,GetHandleId(t),$93AB7BC2)
local unit c
local real dmg=GetUnitState(u,ConvertUnitState(0x14))*(3+(LoadInteger(udg_Hashtable,p,$6074AEF9)*4))
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_W2_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_W2_ef1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_windweak.mdx",0,tempX,tempY,0.6,angle,1.5,0,0,50)
call EFsettingXY(p,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",0,tempX,tempY,1,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_DustWindFasterExact.mdx",0,tempX,tempY,1,angle,2.5,0,0,0)
endif
if stage>=1 then
set tempX2=GetUnitX(u)+(((80+(stage*5))*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(u)+(((80+(stage*5))*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)>=200 and IsPointPathableALL(tempX2,tempY2)then
call SetUnitX(u,tempX2)
call SetUnitY(u,tempY2)
call EXSetUnitFacing(u,angle)
call SetUnitFacing(u,angle)
if(stage-(stage/3)*3)==0 then
set tempX2=GetUnitX(u)
set tempY2=GetUnitY(u)
set c=CreateUnit(Player(p-1),'sys9',tempX2,tempY2,angle)
call imagedummySET(p,c,Model[p])
call SetUnitAnimationByIndex(c,11)
call SetUnitTimeScale(c,3)
call SetUnitScale(c,2,1,1)
call UnitRemove(c,0.18)
call invisible(c,40.00,100.00,0.18,0.01)
endif
elseif s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)<200 or not IsPointPathableALL(tempX2,tempY2)then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
set dummy=c
endif
endloop
if dummy !=null then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_W2_ef2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempX=GetUnitX(dummy)+(((150)*1.0)*Cos(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((150)*1.0)*Sin(((GetUnitFacing(dummy))*1.0)*bj_DEGTORAD))
loop
exitwhen IsPointPathableALL(tempX,tempY)
set tempI=GetRandomInt(150,250)
set tempR=GetRandomReal(0,360)
set tempX=GetUnitX(dummy)+(((tempI)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((tempI)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
endloop
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding_Pink.mdl",0,tempX,tempY,1.75*Skrange[p],angle+40,1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding_Pink.mdl",0,tempX,tempY,1.75*Skrange[p],angle-40,1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_afb_satomirentaro_kuding_Pink.mdl",0,tempX,tempY,2.25*Skrange[p],angle,1,90,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,350*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,0,false,1,'H206')
endif
endloop
endif
set stage=999
endif
endif
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)>=5000 then
set stage=999
endif
if stage>=999 then
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set dummy=null
endfunction
function NaruE1 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real tempR
local integer tempI=LoadInteger(udg_Hash,GetHandleId(t),$93AB7BC2)
local unit c
local real dmg1=GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$6074AEF9)*4)
local real dmg2=GetUnitState(u,ConvertUnitState(0x14))*(5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*3))
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call SetUnitAnimationByIndex(u,14)
call ND(Player(p-1),0.1,20)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle-180)
call imagedummySET(p,c,"war3mapImported\\@EF_Cutting Slam.mdl")
call SetUnitScale(c,3,1,1)
set tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
set tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
call KnockBackXY(c,tempX,tempY,0.1,0.01)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,c)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_E1_ef1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
endif
if stage==4 then
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,GetUnitX(c))
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,GetUnitY(c))
endif
if stage-(stage/10)*10==0 then
call EFsettingXY(p,"war3mapImported\\@EF_Sweep_P.mdl",0,tempX,tempY,1.05*Skrange[p],270,1,0,0,75)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,550*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg1,2,0,true,0.1,'H203')
call EFsettingU(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,c,"origin")
endif
endloop
endif
if stage>=1 and stage<=100 then
if LoadInteger(udg_Hash,GetHandleId(u),$D0A5F3D9)==1 then
call Shacull(p)
set stage=900
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,150)
call SetUnitAnimationByIndex(u,21)
call SetUnitFlyHeight(u,4000,26666)
endif
if stage>=100 and stage<=800 then
set stage=999
endif
endif
if stage==160 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_E1_ef2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call SetUnitFlyHeight(u,0,26666)
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
if stage==167 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_E1_ef1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call ND(Player(p-1),0.1,25)
call RemoveShacull(p)
call EFsettingXY(p,"war3mapImported\\@EF_pink-guangzhu-special.mdx",0,tempX,tempY,1.75*Skrange[p],angle,3,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_SakuraExplosion.mdx",0,tempX,tempY,7*Skrange[p],angle,2,0,0,50)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,350*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg2,2,0,false,1,'H203')
endif
endloop
set stage=999
endif
if stage>=999 then
call SaveInteger(udg_Hash,GetHandleId(u),$D0A5F3D9,0)
call SetPlayerAbilityAvailable(Player(p-1),'H208',false)
if not LoadBoolean(udg_Hash,p,$54547A2B)then
call SetPlayerAbilityAvailable(Player(p-1),'H203',true)
endif
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
call RemoveUnit(c)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function NaruE2 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real tempX
local real tempY
local real tempR
local integer tempI=LoadInteger(udg_Hash,GetHandleId(t),$93AB7BC2)
local unit c
local real dmg=GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$6074AEF9)*4)
local integer g=s__party_create()
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_E2_ef.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Akasha(2)_F_Caster.mdl",0,GetUnitX(u),GetUnitY(u),5*Skrange[p],270,1,0,0,0)
set tempI=0
loop
exitwhen tempI>=6
call EFsettingXY(p,"war3mapImported\\@EF_Mr.War3_XZ4_P.mdl",0,GetUnitX(u),GetUnitY(u),1.3*Skrange[p],tempI*60,0.4+(tempI*0.2),60,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Mr.War3_XZ4_P.mdl",0,GetUnitX(u),GetUnitY(u),1.3*Skrange[p],tempI*60,0.4+(tempI*0.2),30,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Mr.War3_XZ4_P.mdl",0,GetUnitX(u),GetUnitY(u),0.9*Skrange[p],tempI*60,1.7-(tempI*0.2),50,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Mr.War3_XZ4_P.mdl",0,GetUnitX(u),GetUnitY(u),0.9*Skrange[p],tempI*60,1.7-(tempI*0.2),25,0,0)
set tempI=tempI+1
endloop
set tempR=GetUnitState(u,ConvertUnitState(0x14))*(3+(LoadInteger(udg_Hashtable,p,$6074AEF9)*5))
if LoadBoolean(udg_Hash,p,$C75C3005)then
set tempR=tempR*(1+(tempI*0.04))
else
set tempR=tempR*(1+(tempI*0.03))
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),600*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,tempR,2,0,false,1,'H207')
endif
endloop
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function NaruR1 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempX
local real tempY
local real tempR
local integer tempI=LoadInteger(udg_Hash,GetHandleId(u),$A027EBFE)
local integer tempI2=LoadInteger(udg_Hash,GetHandleId(u),$4908C65A)
local unit c
local real dmg=GetUnitState(u,ConvertUnitState(0x14))*(5+(LoadInteger(udg_Hashtable,p,$BB70E228)*6))
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
set tempX=GetUnitX(u)+(((250)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((250)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call KnockBackXY(u,tempX,tempY,0.15,0.03)
call Animate(u,19)
call EFsettingXY(p,"war3mapImported\\@EF_1166_mh.mdl",0,tempX,tempY,1,angle-180,1,0,0,0)
if tempI2==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_R1_2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
elseif tempI2==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_R1_3.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
endif
endif
if stage==5 then
call ND(Player(p-1),0.2,30)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_R1_ef.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
if LoadBoolean(udg_Hash,p,$C75C3005)then
set dmg=dmg*(1+(tempI*0.04))
else
set dmg=dmg*(1+(tempI*0.03))
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),650*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,0,false,1,'H204')
endif
endloop
call EFsettingXY(p,"war3mapImported\\@EF_AZ_CMpink_V.mdl",0,GetUnitX(u),GetUnitY(u),3*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Akasha(2)_F_Caster.mdl",0,GetUnitX(u),GetUnitY(u),5*Skrange[p],270,1,0,0,0)
set tempI=0
loop
exitwhen tempI>=9
call EFsettingXY(p,"war3mapImported\\@EF_RoundSlashPink.mdl",0,GetUnitX(u),GetUnitY(u),5*Skrange[p],tempI*40,0.6+(tempI*0.2),60,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_RoundSlashPink.mdl",0,GetUnitX(u),GetUnitY(u),5*Skrange[p],tempI*40,0.6+(tempI*0.2),30,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_RoundSlashPink.mdl",0,GetUnitX(u),GetUnitY(u),4*Skrange[p],tempI*40,2.7-(tempI*0.2),50,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_RoundSlashPink.mdl",0,GetUnitX(u),GetUnitY(u),4*Skrange[p],tempI*40,2.7-(tempI*0.2),25,0,0)
set tempI=tempI+1
endloop
call RemoveShacull(p)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function NaruR2 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(u),$E95EAAE5)
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local real tempX
local real tempY
local real tempR
local integer tempI=LoadInteger(udg_Hash,GetHandleId(u),$A027EBFE)
local integer tempI2=LoadInteger(udg_Hash,GetHandleId(u),$4908C65A)
local real dmg=GetUnitState(u,ConvertUnitState(0x14))*(1.5+(LoadInteger(udg_Hashtable,p,$BB70E228)*3))
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c
local effect ef
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call Mujuk(p,u)
if stage==0 then
call Animate(u,11)
if tempI2==7 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_R2_2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
endif
endif
set tempX=GetUnitX(u)+(((80+(stage*5))*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((80+(stage*5))*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))>=200 then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call EXSetUnitFacing(u,angle)
call SetUnitFacing(u,angle)
if(stage-(stage/3)*3)==0 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call imagedummySET(p,c,Model[p])
call SetUnitAnimationByIndex(c,11)
call SetUnitTimeScale(c,3)
call SetUnitScale(c,2,1,1)
call UnitRemove(c,0.18)
call invisible(c,40.00,100.00,0.18,0.01)
endif
else
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_R2_ef.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
if GetRandomInt(0,1)==0 then
set angle=angle+(tempI*10)
else
set angle=angle-(tempI*10)
endif
set tempX=GetUnitX(tar)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
loop
exitwhen IsPointPathableALL(tempX,tempY)
set angle=GetRandomReal(0,360)
set tempX=GetUnitX(tar)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
endloop
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call SetUnitAnimationByIndex(u,19)
set tempX=GetUnitX(tar)+(((150)*1.0)*Cos(((angle-180)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((150)*1.0)*Sin(((angle-180)*1.0)*bj_DEGTORAD))
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call imagedummySET(p,c,Model[p])
if(tempI2-(tempI2/2)*2)==0 then
call SetUnitAnimationByIndex(c,16)
else
call SetUnitAnimationByIndex(c,18)
endif
call SetUnitTimeScale(c,2)
call SetUnitScale(c,2,1,1)
call UnitRemove(c,0.32)
call invisible(c,40.00,100.00,0.32,0.01)
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
if LoadBoolean(udg_Hash,p,$C75C3005)then
set dmg=dmg*(1+(tempI*0.04))
else
set dmg=dmg*(1+(tempI*0.03))
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,350*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,0,false,1,'H204')
endif
endloop
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF4.mdl",0,tempX,tempY,1.5,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Akiha Claw sakura fall.mdl",0,tempX,tempY,3,GetRandomReal(0,360),1,0,0,0)
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_R_AZ_QiLiu2.mdl",tempX,tempY)
call SetSpecialEffectColor(ef,255,50,255)
call EXSetEffectSize(ef,2*Skrange[p])
call EXEffectMatRotateZ(ef,GetRandomReal(0,360))
call DestroyEffect(ef)
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_R_AZ_QiLiu2.mdl",tempX,tempY)
call SetSpecialEffectColor(ef,255,50,255)
call EXSetEffectSize(ef,2*Skrange[p])
call EXEffectMatRotateZ(ef,GetRandomReal(0,360))
call DestroyEffect(ef)
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_R_AZ_QiLiu2.mdl",tempX,tempY)
call SetSpecialEffectColor(ef,255,50,255)
call EXSetEffectSize(ef,2*Skrange[p])
call EXEffectMatRotateZ(ef,GetRandomReal(0,360))
call DestroyEffect(ef)
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_afb_satomirentaro_kuding.mdl",tempX,tempY)
call SetSpecialEffectColor(ef,255,50,255)
call EXSetEffectSize(ef,1.5*Skrange[p])
call EXEffectMatRotateZ(ef,GetRandomReal(0,360))
call DestroyEffect(ef)
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_afb_satomirentaro_kuding.mdl",tempX,tempY)
call SetSpecialEffectColor(ef,255,50,255)
call EXSetEffectSize(ef,1.5*Skrange[p])
call EXEffectMatRotateZ(ef,GetRandomReal(0,360))
call DestroyEffect(ef)
call ND(Player(p-1),0.12,15)
set stage=999
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,999)
endif
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)>=5000 or not UnitAlive(tar)then
set stage=999
call SetPlayerAbilityAvailable(Player(p-1),'H204',true)
call SetPlayerAbilityAvailable(Player(p-1),'H209',false)
call SaveInteger(udg_Hash,GetHandleId(u),$3C0A0801,0)
endif
if stage>=999 then
call Inv(u,0.12)
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set tar=null
set ef=null
endfunction
function NaruRreset takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
call SetPlayerAbilityAvailable(Player(p-1),'H204',true)
call SetPlayerAbilityAvailable(Player(p-1),'H209',false)
call SaveInteger(udg_Hash,GetHandleId(u),$3C0A0801,0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function NaruT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$580C1005)
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local real tempX
local real tempY
local real tempR
local integer tempI=LoadInteger(udg_Hash,GetHandleId(t),$93AB7BC2)
local real dmg=GetUnitState(u,ConvertUnitState(0x14))*(80+(LoadInteger(udg_Hashtable,p,$132FA1F5)*50))
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c
local effect ef
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call Mujuk(p,u)
if stage==0 then
call SetUnitAnimationByIndex(u,18)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_Tef1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
endif
if stage==20 then
set tempX=GetUnitX(u)+(((250)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((250)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_Anime Slash.mdl",tempX,tempY)
call SetSpecialEffectColor(ef,255,55,155)
call EXSetEffectSize(ef,3)
call EXEffectMatRotateZ(ef,angle)
call DestroyEffect(ef)
if LoadBoolean(udg_Hash,p,$C75C3005)then
set dmg=dmg*(1+(tempI*0.04))
else
set dmg=dmg*(1+(tempI*0.03))
endif
call Stun(u,tar,2)
call Damage(u,tar,dmg,2,0,false,0.1,'H205')
call ND(Player(p-1),0.1,12)
endif
if stage==42 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_T1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempX=GetUnitX(u)+(((250)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((250)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_Anime Slash.mdl",tempX,tempY)
call SetSpecialEffectColor(ef,255,55,155)
call EXSetEffectSize(ef,4)
call EXEffectMatRotateZ(ef,angle)
call EXEffectMatRotateX(ef,20)
call EXSetEffectZ(ef,200)
call DestroyEffect(ef)
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_Anime Slash.mdl",tempX,tempY)
call SetSpecialEffectColor(ef,255,55,155)
call EXSetEffectSize(ef,4)
call EXEffectMatRotateZ(ef,angle)
call EXEffectMatRotateX(ef,160)
call EXSetEffectZ(ef,200)
call DestroyEffect(ef)
if LoadBoolean(udg_Hash,p,$C75C3005)then
set dmg=dmg*(1+(tempI*0.04))
else
set dmg=dmg*(1+(tempI*0.03))
endif
call Stun(u,tar,4)
call Damage(u,tar,dmg,2,0,false,0.2,'H205')
call ND(Player(p-1),0.1,25)
endif
if stage>=42 and stage<=127 then
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
call SetUnitX(c,GetUnitX(tar))
call SetUnitY(c,GetUnitY(tar))
if(stage-(stage/3)*3)==0 then
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW_Pink.mdl",0,GetUnitX(tar),GetUnitY(tar),2,GetRandomReal(0,360),1,0,0,0)
endif
endif
if stage==70 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_Tef3.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(tar),GetUnitY(tar),270)
call imagedummySET(p,c,"war3mapImported\\@EF_aizen-75.mdl")
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,c)
call SetUnitTimeScale(u,2)
endif
if stage==72 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_Tef2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
endif
if stage==105 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_T2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
endif
if stage==127 then
call EFsettingXY(p,"war3mapImported\\@EF_SakuraExplosion.mdl",0,GetUnitX(tar),GetUnitY(tar),10,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_R_BY_Wood_Effect_Order_DanGe_LiangYiShi_ZhiSiZhiMoYanZhanJi Blue.mdl",0,GetUnitX(tar),GetUnitY(tar),4,270,1,0,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_R_Freezingring.mdl",0,GetUnitX(tar),GetUnitY(tar),4,270,0.5,0,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_R_Freezingring.mdl",0,GetUnitX(tar),GetUnitY(tar),4,270,0.75,0,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_R_Freezingring.mdl",0,GetUnitX(tar),GetUnitY(tar),4,270,1,0,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_PinkSphereExplosion.mdl",0,GetUnitX(tar),GetUnitY(tar),5,270,1,0,0,150)
if LoadBoolean(udg_Hash,p,$C75C3005)then
set dmg=dmg*(1+(tempI*0.04))
else
set dmg=dmg*(1+(tempI*0.03))
endif
call Damage(u,tar,dmg,2,0,false,0.7,'H205')
call ND(Player(p-1),0.1,40)
call SetUnitTimeScale(u,1)
set c=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
call KillUnit(c)
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set tar=null
set ef=null
set c=null
endfunction
function NaruSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local real tempR
local integer tempI
local real tempX
local real tempY
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
local unit c
local real Mana
local integer g=s__party_create()
if sk=='H200' then
call DestroyTimer(t)
if LoadBoolean(udg_Hash,p,$54547A2B)then
call SetPlayerAbilityAvailable(Player(p-1),'H206',false)
call SetPlayerAbilityAvailable(Player(p-1),'H207',false)
call SetPlayerAbilityAvailable(Player(p-1),'H202',true)
if LoadInteger(udg_Hash,GetHandleId(u),$D0A5F3D9)==2 then
call SetPlayerAbilityAvailable(Player(p-1),'H203',false)
call SetPlayerAbilityAvailable(Player(p-1),'H208',true)
else
call SetPlayerAbilityAvailable(Player(p-1),'H203',true)
endif
call SaveBoolean(udg_Hash,p,$54547A2B,false)
call EXSetAbilityString('H204',1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_NaruR1.blp")
call SetUnitAbilityLevel(u,'H204',2)
call SetUnitAbilityLevel(u,'H204',1)
set ChSkillW[p]='H202'
set ChSkillE[p]='H203'
set ChSkillWW[p]='H206'
set ChSkillEE[p]='H207'
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_NaruW1.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_NaruE1.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_NaruR1.blp",0)
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_D1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
else
call SetPlayerAbilityAvailable(Player(p-1),'H206',true)
call SetPlayerAbilityAvailable(Player(p-1),'H207',true)
call SetPlayerAbilityAvailable(Player(p-1),'H202',false)
call SetPlayerAbilityAvailable(Player(p-1),'H203',false)
call SetPlayerAbilityAvailable(Player(p-1),'H208',false)
call SaveBoolean(udg_Hash,p,$54547A2B,true)
call EXSetAbilityString('H204',1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_NaruR2.blp")
call SetUnitAbilityLevel(u,'H204',2)
call SetUnitAbilityLevel(u,'H204',3)
set ChSkillW[p]='H206'
set ChSkillE[p]='H207'
set ChSkillWW[p]='H202'
set ChSkillEE[p]='H203'
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_NaruW2.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_NaruE2.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_NaruR2.blp",0)
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_D2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
endif
endif
if sk=='H201' then
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Animate(u,19)
set tempI=GetRandomInt(1,10)
if tempI<=2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_Q1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
elseif tempI>=3 and tempI<=4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_Q2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
endif
if tempI<=5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_Qef1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
elseif tempI>=6 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_Qef2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
endif
call PlaySoundOnUnit(udg_SND,100.00,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_Qef3.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call TimerStart(t,0.01,false,function NaruQ)
endif
if sk=='H202' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_W1_ef1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
set tempI=LoadInteger(udg_Hash,GetHandleId(u),$93AB7BC2)
call SaveInteger(udg_Hash,GetHandleId(u),$93AB7BC2,0)
call SaveInteger(udg_Hash,GetHandleId(t),$93AB7BC2,tempI)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
endif
call TimerStart(t,0.03,true,function NaruW1)
endif
if sk=='H203' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Animate(u,19)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_E1_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call EXSetAbilityState(EXGetUnitAbility(u,'H208'),ABILITY_STATE_COOLDOWN,0.6)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1200 then
set tempX=(GetUnitX(u)+(((1200)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((1200)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
call SetPlayerAbilityAvailable(Player(p-1),'H208',true)
call SetPlayerAbilityAvailable(Player(p-1),'H203',false)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,tempY)
set tempI=LoadInteger(udg_Hash,GetHandleId(u),$93AB7BC2)
call SaveInteger(udg_Hash,GetHandleId(u),$93AB7BC2,0)
call SaveInteger(udg_Hash,GetHandleId(u),$D0A5F3D9,2)
call SaveInteger(udg_Hash,GetHandleId(t),$93AB7BC2,tempI)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
endif
call TimerStart(t,0.03,true,function NaruE1)
endif
if sk=='H208' then
call SetPlayerAbilityAvailable(Player(p-1),'H208',false)
call SetPlayerAbilityAvailable(Player(p-1),'H203',true)
call SaveInteger(udg_Hash,GetHandleId(u),$D0A5F3D9,1)
call DestroyTimer(t)
endif
if sk=='H206' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Animate(u,11)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=800 then
set tempX=(GetUnitX(u)+(((800)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
set tempY=(GetUnitY(u)+(((800)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
call Shacull(p)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,tempY)
set tempI=LoadInteger(udg_Hash,GetHandleId(u),$93AB7BC2)
call SaveInteger(udg_Hash,GetHandleId(u),$93AB7BC2,0)
call SaveInteger(udg_Hash,GetHandleId(t),$93AB7BC2,tempI)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
endif
call TimerStart(t,0.03,true,function NaruW2)
endif
if sk=='H207' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Animate(u,4)
call EFsettingXY(p,"war3mapImported\\@EF_Akiha Claw sakura fall.mdl",0,GetUnitX(u),GetUnitY(u),1.5,GetUnitFacing(u),1,0,0,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_E2_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call Shacull(p)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
set tempI=LoadInteger(udg_Hash,GetHandleId(u),$93AB7BC2)
call SaveInteger(udg_Hash,GetHandleId(u),$93AB7BC2,0)
call SaveInteger(udg_Hash,GetHandleId(t),$93AB7BC2,tempI)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
endif
call TimerStart(t,0.25,true,function NaruE2)
endif
if sk=='H204' then
set Mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call SetPlayerAbilityAvailable(Player(p-1),'H204',false)
call SetPlayerAbilityAvailable(Player(p-1),'H209',true)
if LoadBoolean(udg_Hash,p,$54547A2B)then
call SaveUnitHandle(udg_Hash,GetHandleId(u),$E95EAAE5,tar)
call SaveInteger(udg_Hash,GetHandleId(u),$3C0A0801,2)
call SaveInteger(udg_Hash,GetHandleId(u),$4908C65A,0)
call EXSetAbilityState(EXGetUnitAbility(u,'H209'),ABILITY_STATE_COOLDOWN,0.1)
call EXSetAbilityString('H209',1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_NaruR2.blp")
call SetUnitAbilityLevel(u,'H209',3)
call SetUnitAbilityLevel(u,'H209',2)
call TimerStart(t,0.03,true,function NaruR2)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_R2_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
else
call SaveInteger(udg_Hash,GetHandleId(u),$3C0A0801,1)
call SaveInteger(udg_Hash,GetHandleId(u),$4908C65A,0)
call EXSetAbilityState(EXGetUnitAbility(u,'H209'),ABILITY_STATE_COOLDOWN,0.1)
call EXSetAbilityString('H209',1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_NaruR1.blp")
call SetUnitAbilityLevel(u,'H209',2)
call SetUnitAbilityLevel(u,'H209',1)
call TimerStart(t,0.03,true,function NaruR1)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Naru_R1_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
endif
call Shacull(p)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
set tempI=LoadInteger(udg_Hash,GetHandleId(u),$93AB7BC2)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveInteger(udg_Hash,GetHandleId(u),$93AB7BC2,0)
call SaveInteger(udg_Hash,GetHandleId(u),$A027EBFE,tempI)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
endif
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call TimerStart(t,8,false,function NaruRreset)
call BuffCall(u,'B031',8,false,false)
endif
if sk=='H209' then
if LoadInteger(udg_Hash,GetHandleId(u),$3C0A0801)==2 then
set tempI=LoadInteger(udg_Hash,GetHandleId(u),$4908C65A)+1
call SaveInteger(udg_Hash,GetHandleId(u),$4908C65A,tempI)
if tempI==7 then
call SetPlayerAbilityAvailable(Player(p-1),'H204',true)
call SetPlayerAbilityAvailable(Player(p-1),'H209',false)
call SaveInteger(udg_Hash,GetHandleId(u),$3C0A0801,0)
call BuffCall(u,'B031',0,false,false)
endif
call TimerStart(t,0.03,true,function NaruR2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$3C0A0801)==1 then
set tempI=LoadInteger(udg_Hash,GetHandleId(u),$4908C65A)+1
call SaveInteger(udg_Hash,GetHandleId(u),$4908C65A,tempI)
if tempI==2 then
call SetPlayerAbilityAvailable(Player(p-1),'H204',true)
call SetPlayerAbilityAvailable(Player(p-1),'H209',false)
call SaveInteger(udg_Hash,GetHandleId(u),$3C0A0801,0)
call BuffCall(u,'B031',0,false,false)
endif
call TimerStart(t,0.03,true,function NaruR1)
endif
call Shacull(p)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
endif
if sk=='H205' then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Shacull(p)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$580C1005,tar)
set tempI=LoadInteger(udg_Hash,GetHandleId(u),$93AB7BC2)
call SaveInteger(udg_Hash,GetHandleId(u),$93AB7BC2,0)
call SaveInteger(udg_Hash,GetHandleId(t),$93AB7BC2,tempI)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
endif
call TimerStart(t,0.02,true,function NaruT)
endif
call s__party_deallocate((g))
set u=null
set t=null
set c=null
set tar=null
endfunction
function NaruST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
local timer t=CreateTimer()
set ChSkillD[p]='H200'
set ChSkillQ[p]='H201'
set ChSkillW[p]='H202'
set ChSkillE[p]='H203'
set ChSkillR[p]='H204'
set ChSkillT[p]='H205'
set ChSkillWW[p]='H206'
set ChSkillEE[p]='H207'
set Range[p]=250
call UnitAddAbility(u,'Amrf')
call UnitRemoveAbility(u,'Amrf')
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
call UnitAddAbility(u,'H208')
call SetPlayerAbilityAvailable(Player(p-1),'H208',false)
call UnitAddAbility(u,'H209')
call SetPlayerAbilityAvailable(Player(p-1),'H209',false)
call UnitAddAbility(u,ChSkillWW[p])
call SetPlayerAbilityAvailable(Player(p-1),'H206',false)
call UnitAddAbility(u,ChSkillEE[p])
call SetPlayerAbilityAvailable(Player(p-1),'H207',false)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_NaruQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_NaruW1.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_NaruE1.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_NaruR1.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_NaruT.blp",0)
endif
set STRup[p]=10
set AGIup[p]=2
set INTup[p]=8
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,70)
call SaveReal(udg_Hashtable,p,$43C91172,0.35)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.95)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$9B58470C,60)
call SaveReal(udg_Hashtable,p,$88E0F85F,25)
call SaveReal(udg_Hashtable,p,$E755DDB8,120)
call SaveReal(udg_Hashtable,p,$ABD3E955,60)
call SaveReal(udg_Hashtable,p,$A2229E00,120)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,70)
call SaveReal(udg_Hashtable,p,$C3EA9E83,500)
call SaveReal(udg_Hashtable,p,$A8D71652,250)
call SaveReal(udg_Hashtable,p,$127510D2,1250)
call SaveReal(udg_Hashtable,p,$B491D29B,500)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$FC4D8276,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_NaruF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc유메미도리")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"발도술 적중 혹은 일정시간마다 기본 공격 적중시 나루메아는 '나비'를 획득한다. 나비의 갯수에 따라 다음 스킬 피해량이 강화된다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00나비 최대 갯수|cffffa500 : 7개\n|cff00ff00기본 공격 적중시 나비 획득|cffffa500 : 1개 (쿨타임 1초)\n|cff00ff00다음 스킬 피해량 증가|cffffa500 : 나비 갯수 x 3%의 추가피해")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function NaruSkill)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetAbsolutePoint(DzFrameFindByName("Stack_Mini_Icon",0),JN_FRAMEPOINT_CENTER,0.7338,0.0575)
call DzFrameShow(DzFrameFindByName("Stack_Mini_Icon",0),true)
endif
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
set bj_lastCreatedUnit=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$E1B97949,bj_lastCreatedUnit)
call SetUnitFlyHeight(bj_lastCreatedUnit,150,0)
call DzSetUnitModel(bj_lastCreatedUnit,"war3mapImported\\@EF_hudiedanmu.mdl")
set bj_lastCreatedUnit=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$588728A4,bj_lastCreatedUnit)
call SetUnitFlyHeight(bj_lastCreatedUnit,250,0)
call DzSetUnitModel(bj_lastCreatedUnit,"war3mapImported\\@EF_hudiedanmu.mdl")
set bj_lastCreatedUnit=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$E240D6CE,bj_lastCreatedUnit)
call SetUnitFlyHeight(bj_lastCreatedUnit,200,0)
call DzSetUnitModel(bj_lastCreatedUnit,"war3mapImported\\@EF_hudiedanmu.mdl")
set bj_lastCreatedUnit=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$8AD58133,bj_lastCreatedUnit)
call SetUnitFlyHeight(bj_lastCreatedUnit,250,0)
call DzSetUnitModel(bj_lastCreatedUnit,"war3mapImported\\@EF_hudiedanmu.mdl")
set bj_lastCreatedUnit=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$483E0BEE,bj_lastCreatedUnit)
call SetUnitFlyHeight(bj_lastCreatedUnit,150,0)
call DzSetUnitModel(bj_lastCreatedUnit,"war3mapImported\\@EF_hudiedanmu.mdl")
set bj_lastCreatedUnit=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$5736C44F,bj_lastCreatedUnit)
call SetUnitFlyHeight(bj_lastCreatedUnit,250,0)
call DzSetUnitModel(bj_lastCreatedUnit,"war3mapImported\\@EF_hudiedanmu.mdl")
set bj_lastCreatedUnit=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$E1C9D00,bj_lastCreatedUnit)
call SetUnitFlyHeight(bj_lastCreatedUnit,200,0)
call DzSetUnitModel(bj_lastCreatedUnit,"war3mapImported\\@EF_hudiedanmu.mdl")
call TimerStart(t,0.05,true,function NaruF)
call SaveInteger(udg_Hashtable,p,$5EFF7683,20)
call NaruTT(p)
set t=null
set u=null
set trg=null
endfunction
function ReimuTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=(LoadReal(udg_Hashtable,p,$9B58470C)+(GetUnitState(u,UNIT_STATE_MAX_MANA)*0.0025))*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer l__Int=GetHeroInt(u,true)
local integer Qdmg=R2I(l__Int*(3+(LoadInteger(udg_Hashtable,p,$FAFE5485)*5)))
local integer Wdmg=R2I(l__Int*(3+(LoadInteger(udg_Hashtable,p,$457BCFC0)*7)))
local integer ELv=LoadInteger(udg_Hashtable,p,$6074AEF9)
local integer Edmg=R2I(l__Int*(5+(ELv*6)))
local integer Rdmg=R2I(l__Int*(1+(LoadInteger(udg_Hashtable,p,$BB70E228)*2)))
local integer TLv=LoadInteger(udg_Hashtable,p,$132FA1F5)
local integer Tdmg=R2I(l__Int*(10+(TLv*5)))
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Qm*Kirie[p])
set Wdmg=Wdmg+R2I(Wm*Kirie[p])
set Edmg=Edmg+R2I(Em*Kirie[p])
set Rdmg=Rdmg+R2I((Rm*Kirie[p])*0.11)
set Tdmg=Tdmg+R2I(Tm*Kirie[p])
endif
if LoadBoolean(udg_Hash,p,$1669AAAD)then
call EXSetAbilityString('H190',1,ABILITY_DATA_UBERTIP,"레이무가 자신의 주변을 떠다니는 몽상묘주를 소환합니다. 몽상묘주는 주변 적들을 공격해 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00데미지|cffffa500 : "+I2S(l__Int*5)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100지속 마법\n|cff00ff00특수|cffffa500 : 구체는 소환수 판정을 가지며 레이무가 죽을경우 공격하지않습니다.\n|cffFF0000EX : |cffffa500구체의 피해량이 상승하고 공격속도가 50% 증가한다.")
else
call EXSetAbilityString('H190',1,ABILITY_DATA_UBERTIP,"레이무가 자신의 주변을 떠다니는 몽상묘주를 소환합니다. 몽상묘주는 주변 적들을 공격해 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00데미지|cffffa500 : "+I2S(l__Int*3)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100지속 마법\n|cff00ff00특수|cffffa500 : 구체는 소환수 판정을 가지며 레이무가 죽을경우 공격하지않습니다.")
endif
call EXSetAbilityString('H191',1,ABILITY_DATA_UBERTIP,"|cff0078FF초당 소모 마나 : "+I2S(R2I(Qm))+"|r\n\n레이무가 바운스를 하는 거대한 구체를 던집니다. 구체는 땅에 닿을때마다 크기가 커집니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00사거리|cffffa500 : 1700\n|cff00ff00범위|cffffa500 : "+I2S(R2I(300*Skrange[p]))+"\n|cff00ff00특수|cffffa500 : 땅에 닿을때마다 구체의 범위가 30% 커집니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(7*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H191')+"/"+R2S(300*Skrange[p]))
call EXSetAbilityString('H192',1,ABILITY_DATA_UBERTIP,"|cff0078FF초당 소모 마나 : "+I2S(R2I(Wm))+"|r\n\n레이무가 자신의 앞에 음양보옥을 소환해 터트립니다. 집중시간에 따라서 음양보옥의 크기가 달라집니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00범위|cffffa500 : "+I2S(R2I(300*Skrange[p]))+" ~ "+I2S(R2I(600*Skrange[p]))+"\n|cff00ff00최대 집중 시간|cffffa500 : 1초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(10*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H192')+"/"+R2S(300*Skrange[p]))
call EXSetAbilityString('H193',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n레이무가 사용 위치에 봉마진을 설치합니다. 봉마진에 닿은 적은 피해를 입고 아군은 이동속도가 증가합니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00최대 사거리|cffffa500 : 1500\n|cff00ff00범위|cffffa500 : "+I2S(R2I(300*Skrange[p]))+"\n|cff00ff00특수|cffffa500 : 아군에게 5초간 "+I2S(ELv*5)+"%의 이동속도 증가 부여\n|cff00ff00지속시간|cffffa500 : 4초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초")
call DzSyncData("SKRG",I2S('H193')+"/"+R2S(300*Skrange[p]))
if LoadBoolean(udg_Hash,p,$1669AAAD)then
call EXSetAbilityString('H194',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n레이무가 여러개의 구체를 소환해서 주변 무작위 적들에게 집어던집니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00구체당 데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00구체당 범위|cffffa500 : "+I2S(R2I(550*Skrange[p]))+"\n|cff00ff00구체 인식범위|cffffa500 : 1500\n|cff00ff00구체 갯수|cffffa500 : 13개\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(24*ct[p]))+"초\n|cffFF0000EX : |cffffa500구체 갯수가 증가하고 인식 범위가 증가한다.")
else
call EXSetAbilityString('H194',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n레이무가 여러개의 구체를 소환해서 주변 무작위 적들에게 집어던집니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00구체당 데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00구체당 범위|cffffa500 : "+I2S(R2I(550*Skrange[p]))+"\n|cff00ff00구체 인식범위|cffffa500 : 1200\n|cff00ff00구체 갯수|cffffa500 : 9개\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(24*ct[p]))+"초")
endif
call EXSetAbilityString('H195',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n레이무가 자신의 스탯을 대폭 상승시키며 카운트를 활성화시킵니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00스킬 피해 증폭율|cffffa500 : "+I2S(10+(TLv*10))+"% \n|cff00ff00이동속도 증가|cffffa500 : "+I2S(5+(TLv*10))+"% \n|cff00ff00스킬 가속 증가|cffffa500 : "+I2S(5+(TLv*15))+"\n|cff00ff00특수1|cffffa500 : 지속시간중 카운트 기능을 활성화 시키며 스킬 적중시 카운트가 1회 증가하며 최대 7까지 쌓인다.\n|cff00ff00특수2|cffffa500 : 지속시간중 1회 재사용으로 발산 피해를 가한다.\n|cff00ff00지속시간|cffffa500 : 60초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(120*ct[p]))+"초")
call EXSetAbilityString('H197',1,ABILITY_DATA_UBERTIP,"레이무가 발산 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : 카운트 수 x "+I2S(Tdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100마법\n|cff00ff00특수1|cffffa500 : 스킬 적중시 카운트가 1회 증가하며 최대 7까지 쌓인다.\n|cff00ff00특수2|cffffa500 : 발산 피해 발생직전까지 무적을 유지한다.\n|cff00ff00범위|cffffa500 : "+I2S(R2I(1500*Skrange[p]))+"")
set u=null
endfunction
function ReimuEX takes integer p returns nothing
call SaveBoolean(udg_Hash,p,$1669AAAD,true)
call ReimuTT(p)
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_EX_BGM.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_EX.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call ProduTime(45,4)
endif
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"피해 적중시 대상과 자신의 거리에 따라서 효과를 받습니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00특수1|cffffa500 : 800 거리 이하의 적에게 피해를 입힐경우 20% 추가 피해와 4초간 이동속도 20% 상승\n|cff00ff00특수2|cffffa500 : 800 거리 초과의 적에게 피해를 입힐경우 12% 추가 피해\n|cffFF0000EX : |cffffa500600거리 이하의 적에게 발동하는 효과가 배가된다.")
call SetPlayerName(Player(8),"|cffFF0000하쿠레이 레이무 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"누구도 나에게 손대는것은 못해.")
endfunction
function ReimuD takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local real tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
local real tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer loopA
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle+12)
if angle>=360 then
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,0)
endif
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
if LoadBoolean(udg_Hash,p,$1669AAAD)then
call UnitAddAbility(dummy,'A007')
endif
if CharacterDeath[p]then
call IssuePointOrder(dummy,"smart",tempX,tempY)
endif
if OrderId2StringBJ(GetUnitCurrentOrder(dummy))=="move" then
call RemoveUnit(dummy)
set dummy=CreateUnit(Player(p-1),'h196',tempX,tempY,270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
endif
set t=null
set u=null
set dummy=null
endfunction
function ReimuQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX
local real tempY
local unit c
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local real dmg=GetHeroInt(u,true)*(3+(LoadInteger(udg_Hashtable,p,$FAFE5485)*5))
local boolean ts=LoadBoolean(udg_Hash,GetHandleId(t),$BE9249BD)
local integer tempI2
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call ND(Player(p-1),0.14,20)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_Q_ef1.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,270)
call imagedummySET(p,dummy,"war3mapImported\\@EF_ba gua qiu.mdl")
call SetUnitScale(dummy,4,1,1)
call SetUnitFlyHeight(dummy,125,0)
call jump(dummy,0.2,250,0.02)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,tempX,tempY,1.5*Skrange[p],270,1.5,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,300*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and LoadInteger(udg_Hash,GetHandleId(t),GetHandleId(c))==0 then
call Damage(u,c,dmg,2,0,false,1,'H191')
call SaveInteger(udg_Hash,GetHandleId(t),GetHandleId(c),1)
if not ts then
set tempI2=LoadInteger(udg_Hash,GetHandleId(u),$486B3281)+1
call SaveInteger(udg_Hash,GetHandleId(u),$486B3281,tempI2)
call SaveBoolean(udg_Hash,GetHandleId(t),$BE9249BD,true)
endif
endif
endloop
set tempX=GetUnitX(dummy)+(((300)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((300)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call KnockBackXYef(dummy,tempX,tempY,0.2,0.02)
endif
if stage==10 then
call jump(dummy,0.2,250,0.02)
set tempX=GetUnitX(dummy)+(((390)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((390)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call KnockBackXYef(dummy,tempX,tempY,0.2,0.02)
call SetUnitScale(dummy,5.2,1,1)
call ND(Player(p-1),0.14,20)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_Q_ef2.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(dummy),GetUnitY(dummy),1.95*Skrange[p],270,1.5,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),390*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and LoadInteger(udg_Hash,GetHandleId(t),GetHandleId(c))==0 then
call Damage(u,c,dmg,2,0,false,1,'H191')
call SaveInteger(udg_Hash,GetHandleId(t),GetHandleId(c),1)
if not ts then
set tempI2=LoadInteger(udg_Hash,GetHandleId(u),$486B3281)+1
call SaveInteger(udg_Hash,GetHandleId(u),$486B3281,tempI2)
call SaveBoolean(udg_Hash,GetHandleId(t),$BE9249BD,true)
endif
endif
endloop
endif
if stage==20 then
call jump(dummy,0.2,250,0.02)
set tempX=GetUnitX(dummy)+(((480)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((480)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call KnockBackXYef(dummy,tempX,tempY,0.2,0.02)
call SetUnitScale(dummy,6.4,1,1)
call ND(Player(p-1),0.14,20)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_Q_ef1.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(dummy),GetUnitY(dummy),2.4*Skrange[p],270,1.5,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),480*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and LoadInteger(udg_Hash,GetHandleId(t),GetHandleId(c))==0 then
call Damage(u,c,dmg,2,0,false,1,'H191')
call SaveInteger(udg_Hash,GetHandleId(t),GetHandleId(c),1)
if not ts then
set tempI2=LoadInteger(udg_Hash,GetHandleId(u),$486B3281)+1
call SaveInteger(udg_Hash,GetHandleId(u),$486B3281,tempI2)
call SaveBoolean(udg_Hash,GetHandleId(t),$BE9249BD,true)
endif
endif
endloop
endif
if stage==30 then
call jump(dummy,0.2,250,0.02)
set tempX=GetUnitX(dummy)+(((570)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(dummy)+(((570)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call KnockBackXYef(dummy,tempX,tempY,0.2,0.02)
call SetUnitScale(dummy,7.6,1,1)
call invisible(dummy,0.00,100.00,0.24,0.02)
call ND(Player(p-1),0.14,20)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_Q_ef2.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(dummy),GetUnitY(dummy),2.85*Skrange[p],270,1.5,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),570*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and LoadInteger(udg_Hash,GetHandleId(t),GetHandleId(c))==0 then
call Damage(u,c,dmg,2,2,false,1,'H191')
call SaveInteger(udg_Hash,GetHandleId(t),GetHandleId(c),1)
if not ts then
set tempI2=LoadInteger(udg_Hash,GetHandleId(u),$486B3281)+1
call SaveInteger(udg_Hash,GetHandleId(u),$486B3281,tempI2)
call SaveBoolean(udg_Hash,GetHandleId(t),$BE9249BD,true)
endif
endif
endloop
endif
if stage==40 then
call ND(Player(p-1),0.14,20)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(dummy),GetUnitY(dummy),3.3*Skrange[p],270,1.5,0,0,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_Q_ef1.mp3"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),660*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and LoadInteger(udg_Hash,GetHandleId(t),GetHandleId(c))==0 then
call Damage(u,c,dmg,2,0,false,1,'H191')
call SaveInteger(udg_Hash,GetHandleId(t),GetHandleId(c),1)
if not ts then
set tempI2=LoadInteger(udg_Hash,GetHandleId(u),$486B3281)+1
call SaveInteger(udg_Hash,GetHandleId(u),$486B3281,tempI2)
call SaveBoolean(udg_Hash,GetHandleId(t),$BE9249BD,true)
endif
endif
endloop
call RemoveUnit(dummy)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set dummy=null
endfunction
function ReimuW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real tempX
local real tempY
local unit c=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local real dmg=GetHeroInt(u,true)*(3+(LoadInteger(udg_Hashtable,p,$457BCFC0)*7))
local real tempR
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local boolean ts=LoadBoolean(udg_Hash,GetHandleId(t),$BE9249BD)
local integer tempI2
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_W_Charge.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90.00,u)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SaveReal(udg_Hash,GetHandleId(t),$E6BB3831,3)
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,270)
if GetLocalPlayer()==Player(p-1)then
call DzSetUnitModel(c,"war3mapImported\\@AOE_[I0]Attack1_1.mdl")
endif
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,c)
endif
if GetUnitCurrentOrder(u)==String2OrderIdBJ("autodispel")then
call ND(Player(p-1),0.01,10)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$E6BB3831)+0.06
call SaveReal(udg_Hash,GetHandleId(t),$E6BB3831,tempR)
call SetUnitScale(c,tempR,1,1)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Effect_Invisibility_Target_Wave_Yellow.mdl",0,tempX,tempY,1,GetRandomReal(0,360),1,0,0,150)
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_W_Damage.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90.00,u)
call RemoveUnit(c)
call ND(Player(p-1),0.1,30)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set tempR=LoadReal(udg_Hash,GetHandleId(t),$E6BB3831)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ERE_LightningStreamYellow.mdl",0,tempX,tempY,tempR*Skrange[p],270,1,0,0,0)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$E6BB3831)*1.66
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ERE_LightningcloudYellow.mdl",0,tempX,tempY,tempR*Skrange[p],270,1,0,0,0)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$E6BB3831)*0.5
call EFsettingXY(p,"war3mapImported\\@EF_WarStompCaster.mdl",0,tempX,tempY,tempR*Skrange[p],270,1,0,0,0)
set tempR=LoadReal(udg_Hash,GetHandleId(t),$E6BB3831)*100
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,tempR*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,0,false,1,'H192')
if not ts then
set tempI2=LoadInteger(udg_Hash,GetHandleId(u),$486B3281)+1
call SaveInteger(udg_Hash,GetHandleId(u),$486B3281,tempI2)
call SaveBoolean(udg_Hash,GetHandleId(t),$BE9249BD,true)
endif
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function ReimuE takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local unit c
local real dmg=GetHeroInt(u,true)*(5+(LoadInteger(udg_Hashtable,p,$6074AEF9)*6))
local real tempR
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local boolean ts=LoadBoolean(udg_Hash,GetHandleId(t),$BE9249BD)
local integer tempI2
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,300*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if LoadInteger(udg_Hash,GetHandleId(t),GetHandleId(c))==0 then
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,0,false,1,'H193')
call SaveInteger(udg_Hash,GetHandleId(t),GetHandleId(c),1)
if not ts then
call SaveBoolean(udg_Hash,GetHandleId(t),$BE9249BD,true)
endif
endif
if CheckBossGroupN(c)then
call BuffCall(u,'B028',5,false,false)
call StatChangeX(p,(LoadInteger(udg_Hashtable,p,$6074AEF9)*5),"이속",5,"H1920")
call SaveInteger(udg_Hash,GetHandleId(t),GetHandleId(c),1)
if not ts then
set tempI2=LoadInteger(udg_Hash,GetHandleId(u),$486B3281)+1
call SaveInteger(udg_Hash,GetHandleId(u),$486B3281,tempI2)
call SaveBoolean(udg_Hash,GetHandleId(t),$BE9249BD,true)
endif
endif
endif
endloop
if stage==99 then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function ReimuRBALLT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local real FirstLocX=LoadReal(udg_Hash,GetHandleId(t),$D3F9E925)
local real FirstLocY=LoadReal(udg_Hash,GetHandleId(t),$DECCF61B)
local real MiddleLocX=LoadReal(udg_Hash,GetHandleId(t),$8A2F2B5)
local real MiddleLocY=LoadReal(udg_Hash,GetHandleId(t),$34AA385E)
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$7C15A41A)
local unit u=Charcter[p]
local real dmg=GetHeroInt(u,true)*(9+(LoadInteger(udg_Hashtable,p,$BB70E228)*18))
local unit c
local effect ef
local integer g=s__party_create()
if tempR<=1.00 then
call SetUnitX(dummy,(FirstLocX*((1-tempR)*(1-tempR)))+((GetUnitX(tar)*(tempR*tempR))+MiddleLocX*(2.00*(tempR*(1.00-tempR)))))
call SetUnitY(dummy,(FirstLocY*((1-tempR)*(1-tempR)))+(GetUnitY(tar)*(tempR*tempR))+MiddleLocY*(2.00*(tempR*(1-tempR))))
set tempR=(tempR+0.03)
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,tempR)
call TimerStart(t,0.02,false,function ReimuRBALLT)
else
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),550*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,0,false,0.11,'H194')
endif
endloop
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_Vinz Wrath of Heaven - Light Vortex.mdl",GetUnitX(tar),GetUnitY(tar))
call SetSpecialEffectColor(ef,255,55,55)
call EXSetEffectSize(ef,2*Skrange[p])
call DestroyEffect(ef)
call RemoveUnit(dummy)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set dummy=null
set tar=null
set u=null
set c=null
set ef=null
endfunction
function ReimuRBALL takes unit dummy,unit tar,integer p,real FirstLocX,real FirstLocY,real MiddleLocX,real MiddleLocY,real tempR returns nothing
local timer t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveReal(udg_Hash,GetHandleId(t),$D3F9E925,FirstLocX)
call SaveReal(udg_Hash,GetHandleId(t),$DECCF61B,FirstLocY)
call SaveReal(udg_Hash,GetHandleId(t),$8A2F2B5,MiddleLocX)
call SaveReal(udg_Hash,GetHandleId(t),$34AA385E,MiddleLocY)
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,tempR)
call TimerStart(t,0.0,false,function ReimuRBALLT)
set t=null
set dummy=null
set tar=null
endfunction
function ReimuR takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real tempX
local real tempY
local unit c
local unit tar=null
local real tempR=1200
local integer tempI2
local integer tempI4
local integer tempI3
local integer temp0=8
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local boolean ts=LoadBoolean(udg_Hash,GetHandleId(t),$BE9249BD)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if LoadBoolean(udg_Hash,p,$1669AAAD)then
set temp0=13
endif
if stage<=temp0 then
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set tempI4=0
set tempI3=0
if LoadBoolean(udg_Hash,p,$1669AAAD)then
set tempR=1500
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,tempR,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
set tempI4=tempI4+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI4,c)
endif
endloop
if tempI4 !=0 then
loop
exitwhen tar !=null
set tempI3=tempI3+1
if tempI3>tempI4 then
set tempI3=0
endif
if GetRandomInt(1,tempI4)==1 then
set tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI3)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
endif
endloop
if LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_R_Missale.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,1)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_R_Missale.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_R_Missale.mp3"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,3)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_R_Missale.mp3"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,4)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_R_Missale.mp3"),("5"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,5)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_R_Missale.mp3"),("6"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,90.00,u)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
set c=CreateUnit(Player(p-1),'sys7',tempX,tempY,270)
set tempI2=GetRandomInt(0,2)
if tempI2==0 then
call imagedummySET(p,c,"war3mapImported\\@EF_sphere_red.mdl")
elseif tempI2==1 then
call imagedummySET(p,c,"war3mapImported\\@EF_sphere_blue.mdl")
elseif tempI2==2 then
call imagedummySET(p,c,"war3mapImported\\@EF_sphere_green.mdl")
endif
call SetUnitFlyHeight(c,300,0)
set tempI2=GetRandomInt(1,2)
set angle=s__Angle_PBP(tempX,tempY,GetUnitX(tar),GetUnitY(tar))
call ReimuRBALL(c,tar,p,tempX,tempY,tempX+(((1000)*1.0)*Cos(((angle+(30.00+(100.00*I2R(tempI2))))*1.0)*bj_DEGTORAD)),tempY+(((1000)*1.0)*Sin(((angle+(30.00+(100.00*I2R(tempI2))))*1.0)*bj_DEGTORAD)),0)
if not ts then
set tempI2=LoadInteger(udg_Hash,GetHandleId(u),$486B3281)+1
call SaveInteger(udg_Hash,GetHandleId(u),$486B3281,tempI2)
call SaveBoolean(udg_Hash,GetHandleId(t),$BE9249BD,true)
endif
endif
endif
if stage>=temp0+1 then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set tar=null
endfunction
function ReimuTbuff takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit c=LoadUnitHandle(udg_Hash,GetHandleId(u),$EEEC9CA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer reimuT=LoadInteger(udg_Hash,GetHandleId(u),$486B3281)
local integer reimuT2=LoadInteger(udg_Hash,GetHandleId(t),$486B3281)
local real time=LoadReal(udg_Hash,GetHandleId(t),$6B54C545)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
call SaveReal(udg_Hash,GetHandleId(t),$6B54C545,time-0.04)
call TimerStart(t,0.04,false,function ReimuTbuff)
if stage==0 then
call SetPlayerAbilityAvailable(Player(p-1),'H197',true)
call SetPlayerAbilityAvailable(Player(p-1),'H195',false)
call EXSetAbilityState(EXGetUnitAbility(u,'H197'),ABILITY_STATE_COOLDOWN,1)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
endif
if reimuT>=7 then
set reimuT=7
endif
call SetUnitX(c,GetUnitX(u))
call SetUnitY(c,GetUnitY(u))
if reimuT !=reimuT2 then
call SaveInteger(udg_Hash,GetHandleId(t),$486B3281,reimuT)
if reimuT==1 then
call SetUnitAnimationByIndex(c,3)
elseif reimuT==2 then
call SetUnitAnimationByIndex(c,4)
elseif reimuT==3 then
call SetUnitAnimationByIndex(c,5)
elseif reimuT==4 then
call SetUnitAnimationByIndex(c,6)
elseif reimuT==5 then
call SetUnitAnimationByIndex(c,7)
elseif reimuT==6 then
call SetUnitAnimationByIndex(c,8)
elseif reimuT>=7 then
call SetUnitAnimationByIndex(c,1)
endif
endif
if time<=0 then
call RemoveUnit(c)
call SetPlayerAbilityAvailable(Player(p-1),'H197',false)
call SetPlayerAbilityAvailable(Player(p-1),'H195',true)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set c=null
endfunction
function ReimuT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit c=LoadUnitHandle(udg_Hash,GetHandleId(u),$EEEC9CA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer reimuT=LoadInteger(udg_Hash,GetHandleId(u),$486B3281)
local real dmg
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call EXSetAbilityState(EXGetUnitAbility(u,'H197'),ABILITY_STATE_COOLDOWN,1000)
call SetUnitFlyHeight(c,500,500)
endif
if stage==45 then
call EFsettingXY(p,"war3mapImported\\@EF_Nether Blast III Purple.mdl",0,GetUnitX(u),GetUnitY(u),7*Skrange[p],270,1,0,0,0)
endif
if stage==50 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_T_ef2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90.00,u)
call RemoveUnit(c)
call ND(Player(p-1),0.25,60)
call EFsettingXY(p,"war3mapImported\\@EF_MikaEF13.mdl",0,GetUnitX(u),GetUnitY(u),5*Skrange[p],270,1,0,0,0)
if reimuT>=7 then
set reimuT=7
endif
set dmg=GetHeroInt(u,true)*(reimuT*(8+(LoadInteger(udg_Hashtable,p,$132FA1F5)*5)))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),1500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,0,false,1,'H195')
endif
endloop
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function ReimuSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real tempR
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local integer tempI
local integer tempI2
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
local unit c
local real Mana
if GetSpellAbilityId()=='H191' then
call Animate(u,2)
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_Q.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90.00,u)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveBoolean(udg_Hash,GetHandleId(t),$BE9249BD,false)
call TimerStart(t,0.02,true,function ReimuQ)
endif
if GetSpellAbilityId()=='H192' then
call Animate(u,15)
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_W.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90.00,u)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveBoolean(udg_Hash,GetHandleId(t),$BE9249BD,false)
call TimerStart(t,0.02,true,function ReimuW)
endif
if GetSpellAbilityId()=='H193' then
call Animate(u,5)
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_E.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90.00,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_E_ef.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90.00,u)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1500 then
set tempX=GetUnitX(u)+(((1500)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((1500)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_D2.mdl",4,tempX,tempY,2*Skrange[p],angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_W3.mdl",0,tempX,tempY,2*Skrange[p],angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Blue-Zhendi-Ryougi-Big.mdl",0,tempX,tempY,0.6*Skrange[p],angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@J_File00004536.mdl",4,tempX,tempY,1*Skrange[p],angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@J_File00004536.mdl",4,tempX,tempY,1*Skrange[p],angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@J_File00004536.mdl",4,tempX,tempY,1*Skrange[p],angle,1,0,0,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,tempX)
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,tempY)
call SaveBoolean(udg_Hash,GetHandleId(t),$BE9249BD,false)
call TimerStart(t,0.04,true,function ReimuE)
endif
if GetSpellAbilityId()=='H194' then
call Animate(u,3)
set Mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_R.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90.00,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_R_Start.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90.00,u)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveBoolean(udg_Hash,GetHandleId(t),$BE9249BD,false)
call TimerStart(t,0.12,true,function ReimuR)
endif
if GetSpellAbilityId()=='H195' then
call Animate(u,3)
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_T_start.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90.00,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_T_ef1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90.00,u)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(u),$486B3281,1)
call SaveReal(udg_Hash,GetHandleId(t),$6B54C545,60)
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call DzSetUnitModel(c,"war3mapImported\\@EF_fantasy heaven.mdl")
call SetUnitScale(c,1.5,1,1)
call SetUnitFlyHeight(c,150,0)
call SaveUnitHandle(udg_Hash,GetHandleId(u),$EEEC9CA,c)
call BuffCall(u,'B029',60,false,false)
call StatChangeX(p,(5+(LoadInteger(udg_Hashtable,p,$132FA1F5)*10)),"이속",60,"H1950")
call StatChangeX(p,(5+(LoadInteger(udg_Hashtable,p,$132FA1F5)*15)),"쿨감",60,"H1951")
call StatChangeX(p,(0.05+(LoadInteger(udg_Hashtable,p,$132FA1F5)*0.1)),"스증",60,"H1952")
call EFsettingU(p,"war3mapImported\\@Aura_qicailingyu88.mdl",60,u,"origin")
call TimerStart(t,0.01,false,function ReimuTbuff)
endif
if GetSpellAbilityId()=='H197' then
call Animate(u,6)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Reimu_T_damage.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90.00,u)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call Shacull(p)
call Mujuk(p,u)
call TimerStart(t,0.02,true,function ReimuT)
endif
set u=null
set t=null
set c=null
endfunction
function ReimuST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
local real tempR
local timer t=CreateTimer()
set ChSkillD[p]='H190'
set ChSkillQ[p]='H191'
set ChSkillW[p]='H192'
set ChSkillE[p]='H193'
set ChSkillR[p]='H194'
set ChSkillT[p]='H195'
set Range[p]=800
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
call UnitAddAbility(u,'Amrf')
call UnitRemoveAbility(u,'Amrf')
call UnitAddAbility(u,'H197')
call SetPlayerAbilityAvailable(Player(p-1),'H197',false)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_ReimuQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_ReimuW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_ReimuE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_ReimuR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_ReimuT.blp",0)
endif
set STRup[p]=9
set AGIup[p]=3
set INTup[p]=8
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,90)
call SaveReal(udg_Hashtable,p,$43C91172,0.4)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.8)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$9B58470C,150)
call SaveReal(udg_Hashtable,p,$88E0F85F,75)
call SaveReal(udg_Hashtable,p,$E755DDB8,200)
call SaveReal(udg_Hashtable,p,$ABD3E955,100)
call SaveReal(udg_Hashtable,p,$A2229E00,250)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,200)
call SaveReal(udg_Hashtable,p,$C3EA9E83,400)
call SaveReal(udg_Hashtable,p,$A8D71652,250)
call SaveReal(udg_Hashtable,p,$127510D2,2000)
call SaveReal(udg_Hashtable,p,$B491D29B,750)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$33B724A0,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_ReimuF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc하쿠레이 아뮬렛")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"피해 적중시 대상과 자신의 거리에 따라서 효과를 받습니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00특수1|cffffa500 : 800 거리 이하의 적에게 피해를 입힐경우 10% 추가 피해와 2초간 이동속도 10% 상승\n|cff00ff00특수2|cffffa500 : 800 거리 초과의 적에게 피해를 입힐경우 12% 추가 피해")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function ReimuSkill)
set bj_lastCreatedUnit=CreateUnit(Player(p-1),'h196',GetUnitX(u),GetUnitY(u),270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,bj_lastCreatedUnit)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,0)
call TimerStart(t,0.05,true,function ReimuD)
call SaveInteger(udg_Hashtable,p,$5EFF7683,19)
call ReimuTT(p)
set u=null
set trg=null
set t=null
endfunction
function WakamoTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Wm=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer l__Int=GetHeroInt(u,true)
local integer Qdmg=R2I(l__Int*(4+(LoadInteger(udg_Hashtable,p,$FAFE5485)*3)))
local integer Wdmg=R2I(l__Int*(4.5+(LoadInteger(udg_Hashtable,p,$457BCFC0)*4.5)))
local integer ELv=LoadInteger(udg_Hashtable,p,$6074AEF9)
local integer Edmg=R2I(l__Int*(ELv*3.5))
local integer RLv=LoadInteger(udg_Hashtable,p,$BB70E228)
local integer Tdmg=R2I(l__Int*(60+(LoadInteger(udg_Hashtable,p,$132FA1F5)*20)))
local integer Tdmg2=R2I(l__Int*(25+(LoadInteger(udg_Hashtable,p,$132FA1F5)*25)))
local integer temp=GetHeroLevel(u)
local real tempR
if temp>=200 then
set temp=200
endif
set temp=temp/40
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Wm*Kirie[p])
set Wdmg=Wdmg+R2I(Wm*Kirie[p])
set Edmg=Edmg+R2I(Em*Kirie[p])
set Tdmg=Tdmg+R2I(Tm*Kirie[p])
set Tdmg2=Tdmg2+R2I(Tm*Kirie[p])
endif
if LoadInteger(udg_Hashtable,p,$A8D71652)>=1 then
call SaveReal(Hash_Stat,p,$604CDC2F,RLv*0.07)
endif
call EXSetAbilityString('H220',1,ABILITY_DATA_UBERTIP,"와카모가 특정 스킬로 피해를 입힐경우 적에게 표식을 남깁니다. 표식이 남은 적에게 다시 표식을 새기면 표식이 폭발해 피해를 입힙니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00피해량|cffffa500 : "+I2S(R2I(l__Int*(4+(temp*4.5))))+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cff4169e1마법\n|cff00ff00표식을 남기는 피해|cffffa500 : 투쟁 본능 패시브 피해 혹은 흩날리는 꽃보라\n|cff00ff00표식 지속시간|cffffa500 : 6초\n|cff00ff00특수|cffffa500 : 레벨 40당 스킬 계수가 4.5 상승합니다. (최대 22.5)")
if LoadBoolean(udg_Hash,p,$28E17E86)then
call EXSetAbilityString('H221',1,ABILITY_DATA_UBERTIP,"|cff0078FF초당 소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 방향으로 탄환을 쏩니다. 탄환은 적 한명과 부딪칠경우 사라집니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cff4169e1마법\n|cff00ff00최대 사거리|cffffa500 : 1400\n|cff00ff00범위|cffffa500 : 230\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(2.5*ct[p]))+"초\n|cffFF0000EX : |cffffa500쿨타임이 2.5초로 감소한다.")
else
call EXSetAbilityString('H221',1,ABILITY_DATA_UBERTIP,"|cff0078FF초당 소모 마나 : "+I2S(R2I(Qm))+"|r\n\n사용 방향으로 탄환을 쏩니다. 탄환은 적 한명과 부딪칠경우 사라집니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cff4169e1마법\n|cff00ff00최대 사거리|cffffa500 : 1400\n|cff00ff00범위|cffffa500 : 230\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(4*ct[p]))+"초")
endif
call EXSetAbilityString('H222',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Wm))+"|r\n\n대상에게 산탄 탄환을 발사해 대상과 그 주변의 적들에게 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00데미지|cffffa500 : "+I2S(Wdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cff4169e1마법\n|cff00ff00최대 사거리|cffffa500 : 1200\n|cff00ff00범위|cffffa500 : "+I2S(R2I(500*Skrange[p]))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(4*ct[p]))+"초")
if LoadBoolean(udg_Hash,p,$28E17E86)then
call EXSetAbilityString('H223',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00패시브|cffffa500 : 기본 공격시 "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cff4169e1마법\n|cff00ff00충전중 이동속도 증가|cffffa500 : 80% \n|cff00ff00충전 완료시 지능 증가|cffffa500 :  "+I2S(ELv*150)+" + "+I2S(ELv*3)+"% \n|cff00ff00지속시간|cffffa500 : 8초\n|cff00ff00특수 1|cffffa500 : 충전중 스킬 및 기본 공격 불가능\n|cff00ff00특수 2|cffffa500 : 습득시 진홍빛 재액의 효과가 발동시 3초간 이동속도가 "+I2S(ELv*4)+"% 상승한다.\n|cff00ff00특수 3|cffffa500 : 패시브는 같은 대상에게 재발동하는데 "+I2S(R2I(4*ct[p]))+"초의 쿨타임을 지닙니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초\n|cffFF0000EX : |cffffa500패시브의 재발동 쿨타임이 감소하고 충전완료시 지능증가가 퍼센트도 증가한다.")
else
call EXSetAbilityString('H223',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00패시브|cffffa500 : 기본 공격시 "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cff4169e1마법\n|cff00ff00충전중 이동속도 증가|cffffa500 : 60% \n|cff00ff00충전 완료시 지능 증가|cffffa500 :  "+I2S(ELv*150)+"\n|cff00ff00지속시간|cffffa500 : 8초\n|cff00ff00특수 1|cffffa500 : 충전중 스킬 및 기본 공격 불가능\n|cff00ff00특수 2|cffffa500 : 습득시 진홍빛 재액의 효과가 발동시 3초간 이동속도가 "+I2S(ELv*4)+"% 상승한다.\n|cff00ff00특수 3|cffffa500 : 패시브는 같은 대상에게 재발동하는데 "+I2S(R2I(4*ct[p]))+"초의 쿨타임을 지닙니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초")
endif
call EXSetAbilityString('H224',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n사용시 해당 지점으로 빠르게 이동후 보호막과 스킬 피해 증폭율을 얻습니다.\n\n|cff00ff00타입|cffffa500 : 지점 타겟\n|cff00ff00보호막|cffffa500 : "+I2S((RLv*3000)+(l__Int*(RLv)))+"\n|cff00ff00스킬 피해 증폭율 증가|cffffa500 : "+I2S(RLv*10)+"% \n|cff00ff00특수|cffffa500 : 습득시 단일 대상에게 입히는 스킬 피해량이 "+I2S(RLv*7)+"% 상승\n|cff00ff00지속시간|cffffa500 : 12초\n|cff00ff00최대사거리|cffffa500 : 1200\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(16*ct[p]))+"초")
call EXSetAbilityString('H225',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n사용시 대상에게 연사를 가해 피해를 가한후 대상에게 표식을 남깁니다. 시간이 지나거나 표식의 레벨이 최대치가 되면 표식이 폭발해 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 대상 타겟\n|cff00ff00연사 데미지|cffffa500 : "+I2S(Tdmg)+"\n|cff00ff00표식 폭발 데미지|cffffa500 : "+I2S(Tdmg2)+" ~ "+I2S(Tdmg2*2)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cff4169e1마법\n|cff00ff00표식 지속시간|cffffa500 : 12초\n|cff00ff00특수|cffffa500 : 표식은 진홍빛 재액의 효과가 발동될때마다 레벨이 증가한다. (최초 1레벨 / 최대 3레벨)\n|cff00ff00최대사거리|cffffa500 : 1500\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(65*ct[p]))+"초")
set u=null
endfunction
function WakamoEX takes integer p returns nothing
local unit u=Charcter[p]
call SaveBoolean(udg_Hash,p,$28E17E86,true)
call WakamoTT(p)
call EXSetAbilityDataReal(EXGetUnitAbility(u,'H221'),1,105,2.5)
call IncUnitAbilityLevel(u,'H221')
call DecUnitAbilityLevel(u,'H221')
if ProduceLV<4 then
set ProduceLV=4
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoEx_Bgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoEx_Get.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call ProduTime(36,4)
endif
call SetPlayerName(Player(8),"|cffdc143c코사카 와카모 ")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"당신의 적을 남김없이 제거하겠습니다... 후후후")
set u=null
endfunction
function WakamoDFallow takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if not UnitAlive(u)or stage>=200 or GetUnitAbilityLevel(u,'A046')==0 then
call UnitRemoveAbility(u,'A046')
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
endfunction
function WakamoDstack takes unit u returns nothing
local timer t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,u)
call TimerStart(t,0.03,true,function WakamoDFallow)
set t=null
set u=null
endfunction
function WakamoQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local real tempX
local real tempY
local real dmg=GetHeroInt(u,true)*(4+(LoadInteger(udg_Hashtable,p,$FAFE5485)*3))
local integer tempI
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoQ_ef1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_VFX_RED_WindWeak3b.mdl",0,tempX,tempY,0.5,angle,1,90,0,200)
set c=CreateUnit(Player(p-1),'sys7',tempX,tempY,angle)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,c)
call SetUnitFlyHeight(c,200,0)
call SetUnitScale(c,2,1,1)
call imagedummySET(p,c,"war3mapImported\\@EF_VFX_yae_ribbon_thun_Red.mdl")
call KnockBackXYef(c,GetUnitX(u)+(((1400)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((1400)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)),0.2,0.01)
set tempX=GetUnitX(u)+(((225)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((225)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_VFX_RED_WindWeak3b.mdl",0,tempX,tempY,0.25,angle,1,90,0,200)
set tempX=GetUnitX(u)+(((-50)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-50)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Dustwind Smoke.mdl",0,tempX,tempY,1,angle,1,0,0,0)
endif
if stage>=10 then
call KillUnit(dummy)
endif
if stage>=1 and UnitAlive(dummy)then
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,230,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and GetUnitTypeId(dummy)=='sys7' then
call KillUnit(dummy)
set dummy=c
endif
endloop
if GetUnitTypeId(dummy)!='sys7' then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoQ_ef2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,dummy)
set tempX=GetUnitX(dummy)
set tempY=GetUnitY(dummy)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_yae_ribbon_thun_Red.mdl",0,tempX,tempY,4,angle,1,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_HITcritverylowRed.mdl",0,tempX,tempY,3,angle,1,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_RED_misslieAZ_HIT7_4.mdl",0,tempX,tempY,0.5,angle,1,0,0,50)
if GetUnitAbilityLevel(dummy,'A046')==0 then
call UnitAddAbility(dummy,'A046')
call WakamoDstack(dummy)
call Damage(u,dummy,dmg,2,0,false,1,'H221')
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoD_ef.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,dummy)
call StatChangeX(p,LoadInteger(udg_Hashtable,p,$6074AEF9)*4,"이속",3,"H02234")
call BuffCall(u,'B038',3,false,false)
if dummy==LoadUnitHandle(udg_Hash,GetHandleId(u),$CC761EC2)then
set tempI=LoadInteger(udg_Hash,GetHandleId(dummy),$27B55739)+1
call SaveInteger(udg_Hash,GetHandleId(dummy),$27B55739,tempI)
endif
call UnitRemoveAbility(dummy,'A046')
set tempI=GetHeroLevel(u)
if tempI>=200 then
set tempI=200
endif
set tempI=tempI/40
set dmg=dmg+(GetHeroInt(u,true)*(4+(tempI*4.5)))
call EFsettingXY(p,"war3mapImported\\@EF_az_ts_v2.mdl",0,tempX,tempY,2,270,1,0,0,0)
call Damage(u,dummy,dmg,2,0,false,1,'H221')
endif
set stage=999
endif
elseif stage>=1 and not UnitAlive(dummy)then
set stage=999
endif
if stage>=999 then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set dummy=null
endfunction
function WakamoW takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit c
local real tempX
local real tempY
local real tempR
local real dmg=GetHeroInt(u,true)*(2+(LoadInteger(udg_Hashtable,p,$457BCFC0)*4.5))
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Dash Sfx.mdl",0,tempX,tempY,0.5,angle,1,0,0,200)
set tempX=GetUnitX(u)+(((-75)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-75)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Dustwind Smoke.mdl",0,tempX,tempY,1,angle,1,0,0,0)
set c=CreateUnit(Player(p-1),'sys7',tempX,tempY,angle)
call SetUnitFlyHeight(c,200,0)
call SetUnitScale(c,2,1,1)
call imagedummySET(p,c,"Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl")
set tempR=s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))/4000
call KnockBackXYef(c,GetUnitX(tar),GetUnitY(tar),tempR,0.01)
call UnitApplyTimedLife(c,'BHwe',tempR)
call KnockBackXY(u,tempX,tempY,0.1,0.01)
call TimerStart(t,tempR,false,function WakamoW)
endif
if stage>=1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoW_ef.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,tar)
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,2,0,false,1,'H222')
endif
endloop
call EFsettingXY(p,"war3mapImported\\@EF_1588.mdl",0,tempX,tempY,2,angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_34.mdl",0,tempX,tempY,1*Skrange[p],angle,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_[DZ.Spell]006.mdl",0,tempX,tempY,0.5*Skrange[p],angle,1,0,0,0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set tar=null
endfunction
function WakamoE takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage>=75 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoE2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call SetPlayerAbilityAvailable(Player(p-1),'H221',true)
call SetPlayerAbilityAvailable(Player(p-1),'H222',true)
call SetPlayerAbilityAvailable(Player(p-1),'H224',true)
call SetPlayerAbilityAvailable(Player(p-1),'H225',true)
call UnitRemoveAbility(u,'Abun')
call StatChangeX(p,LoadInteger(udg_Hashtable,p,$6074AEF9)*150,"지능",8,"H02232")
if LoadBoolean(udg_Hash,p,$28E17E86)then
call StatChangeX(p,LoadInteger(udg_Hashtable,p,$6074AEF9)*3,"지퍼",8,"H02233")
endif
call BuffCall(u,'B037',8,false,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
endfunction
function WakamoR takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
call endMujuk(p,u)
call RemoveShacull(p)
call BuffCall(u,'B039',12,false,false)
call ShildSet(u,u,12.0,(GetHeroInt(u,true)*LoadInteger(udg_Hashtable,p,$BB70E228))+(LoadInteger(udg_Hashtable,p,$BB70E228)*3000))
call StatChangeX(p,LoadInteger(udg_Hashtable,p,$BB70E228)*0.1,"스증",12,"H02241")
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function WakamoTexp takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(u),$CC761EC2)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),1)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real dmg=GetHeroInt(u,true)*(25+(LoadInteger(udg_Hashtable,p,$132FA1F5)*25))
local integer tempI=LoadInteger(udg_Hash,GetHandleId(tar),$27B55739)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call SetUnitX(dummy,GetUnitX(tar))
call SetUnitY(dummy,GetUnitY(tar))
if tempI==1 and not LoadBoolean(udg_Hash,GetHandleId(t),2)then
call SaveBoolean(udg_Hash,GetHandleId(t),2,true)
call imagedummySET(p,dummy,"war3mapImported\\@Aura_Rose_Special.mdl")
endif
if tempI>=2 or stage>=600 or not UnitAlive(tar)then
if tempI==1 then
set dmg=dmg*1.5
elseif tempI==2 then
set dmg=dmg*2
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoT_exp.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call EFsettingXY(p,"war3mapImported\\@EF_WakamoEF2.mdl",0,GetUnitX(tar),GetUnitY(tar),1.5,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_Firebrand_Shot_PZRED1.mdl",0,GetUnitX(tar),GetUnitY(tar),10,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_Firebrand_Shot_PZRED.mdl",0,GetUnitX(tar),GetUnitY(tar),8,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_t7_red-texiao-shandian.mdl",0,GetUnitX(tar),GetUnitY(tar),1.5,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_t3_effect_azeffect3.mdl",0,GetUnitX(tar),GetUnitY(tar),1.5,270,1,0,0,0)
call Damage(u,tar,dmg,2,0,false,1,'H225')
call SaveUnitHandle(udg_Hash,GetHandleId(u),$CC761EC2,dummy)
call RemoveUnit(dummy)
call RemoveSavedInteger(udg_Hash,GetHandleId(tar),$27B55739)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set tar=null
set dummy=null
endfunction
function WakamoT takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local unit dummy
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX
local real tempY
local real tempR
local real dmg=GetHeroInt(u,true)*(60+(LoadInteger(udg_Hashtable,p,$132FA1F5)*20))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call SetUnitTimeScale(u,2)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoT1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(u),GetUnitY(u),1,270,1,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",0,GetUnitX(u),GetUnitY(u),1,270,1,0,0,0)
endif
if stage==12 or stage==25 then
if LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Shot1.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,1)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Shot1.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Shot1.mp3"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,3)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)>=3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Shot1.mp3"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,u)
call ND(Player(p-1),0.12,30)
set tempX=GetUnitX(u)+(((125)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((125)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_VFX_Burn_DRedPup2.mdl",0,tempX,tempY,1.5,angle,1,0,0,-100)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_RED_WindWeak3b.mdl",0,tempX,tempY,0.25,angle,1,90,0,150)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call SetUnitFlyHeight(dummy,120,0)
call EFsettingU(p,"war3mapImported\\@EF_VFX_Firebrand_Shot_PZRED1.mdl",0.162,dummy,"origin")
call KnockBackXY(dummy,GetUnitX(tar),GetUnitY(tar),0.162,0.01)
call SetUnitScale(dummy,2,1,1)
call UnitApplyTimedLife(dummy,'BHwe',0.162)
set tempX=GetUnitX(u)+(((200)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((200)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_VFX_RED_WindWeak3b.mdl",0,tempX,tempY,0.15,angle,1,90,0,150)
endif
if stage==16 or stage==29 then
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ERE_LightningcloudRed.mdl",0,tempX,tempY,2,270,1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_RED_misslieAZ_HIT7_4.mdl",0,tempX,tempY,1,270,1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ERE_LightningcloudRed.mdl",0,tempX,tempY,2,270,1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_Singularity I Red.mdl",0,tempX,tempY,2,270,1,0,0,0)
call Damage(u,tar,dmg,2,0,false,0.5,'H225')
endif
if stage==35 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoT2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoT_charge.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call SetUnitAnimationByIndex(u,13)
call SetUnitTimeScale(u,1.5)
set tempX=GetUnitX(u)
set tempY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_WakamoEF1.mdl",0,tempX,tempY,1,270,1,0,0,0)
call EFsettingU(p,"war3mapImported\\@EF_WakamoEF3.mdl",1.3,u,"origin")
endif
if stage==78 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoT_ef2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Dash Sfx.mdl",0,tempX,tempY,0.5,angle,1,0,0,200)
set tempX=GetUnitX(u)+(((-75)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-75)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Dustwind Smoke.mdl",0,tempX,tempY,1,angle,1,0,0,0)
set dummy=CreateUnit(Player(p-1),'sys7',tempX,tempY,angle)
call SetUnitFlyHeight(dummy,200,0)
call SetUnitScale(dummy,2,1,1)
call imagedummySET(p,dummy,"Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl")
set tempR=s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))/4000
call KnockBackXYef(dummy,GetUnitX(tar),GetUnitY(tar),tempR,0.01)
call UnitApplyTimedLife(dummy,'BHwe',tempR)
call KnockBackXY(u,tempX,tempY,0.1,0.01)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,999)
call TimerStart(t,tempR,false,function WakamoT)
call RemoveShacull(p)
endif
if stage>=999 then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t2=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t2),0,u)
call SaveUnitHandle(udg_Hash,GetHandleId(u),$CC761EC2,tar)
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call imagedummySET(p,dummy,"war3mapImported\\@Aura_Rose_Nomral.mdl")
call SetUnitScale(dummy,2,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),1,dummy)
call TimerStart(t2,0.02,true,function WakamoTexp)
endif
set t=null
set t2=null
set u=null
set tar=null
set dummy=null
endfunction
function WakamoSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local real tempR
local real tempX=GetUnitX(u)
local real tempY=GetUnitY(u)
local integer tempI
local integer tempI2
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
local unit c
local real Mana
if sk=='H221' then
set Mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Animate(u,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call TimerStart(t,0.02,true,function WakamoQ)
endif
if sk=='H222' then
set Mana=LoadReal(udg_Hashtable,p,$E755DDB8)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Animate(u,8)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoW.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set c=GetSpellTargetUnit()
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,c)
call TimerStart(t,0.02,false,function WakamoW)
endif
if sk=='H223' then
set Mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoE1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoE_ef.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SetPlayerAbilityAvailable(Player(p-1),'H221',false)
call SetPlayerAbilityAvailable(Player(p-1),'H222',false)
call SetPlayerAbilityAvailable(Player(p-1),'H224',false)
call SetPlayerAbilityAvailable(Player(p-1),'H225',false)
call UnitAddAbility(u,'Abun')
call StatChangeX(p,80,"이속",1.5,"H02231")
call EFsettingU(p,"war3mapImported\\@Aura_VFX_CrippleTargetBlood.mdl",1.5,u,"origin")
call TimerStart(t,0.02,true,function WakamoE)
endif
if sk=='H224' then
set Mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
call Animate(u,6)
set tempR=s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
if tempR<=10 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoR.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoR_ef.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call EFsettingU(p,"war3mapImported\\@Aura_verg_avesta.mdl",tempR,u,"left hand")
call EFsettingU(p,"war3mapImported\\@Aura_verg_avesta.mdl",tempR,u,"right hand")
call EFsettingU(p,"Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",tempR,u,"left hand")
call EFsettingU(p,"Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",tempR,u,"right hand")
call EFsettingXY(p,"war3mapImported\\@EF_AZ_A_Slash Splash Sky.mdl",0,GetUnitX(u),GetUnitY(u),2,angle,1,0,0,0)
call ShildSet(u,u,12.0,GetHeroInt(u,true)*(LoadInteger(udg_Hashtable,p,$BB70E228)*10))
call StatChangeX(p,LoadInteger(udg_Hashtable,p,$BB70E228)*0.1,"스증",12,"H02241")
call DestroyTimer(t)
else
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1200 then
set tempX=GetUnitX(u)+(((1200)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((1200)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
else
set tempX=SkillLocX
set tempY=SkillLocY
endif
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoR.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoR_ef.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,u)
set tempR=s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)/6000
call KnockBackXY(u,tempX,tempY,tempR,tempR*0.1)
call EFsettingU(p,"war3mapImported\\@Aura_verg_avesta.mdl",tempR,u,"left hand")
call EFsettingU(p,"war3mapImported\\@Aura_verg_avesta.mdl",tempR,u,"right hand")
call EFsettingU(p,"Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",tempR,u,"left hand")
call EFsettingU(p,"Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",tempR,u,"right hand")
call EFsettingXY(p,"war3mapImported\\@EF_AZ_A_Slash Splash Sky.mdl",0,GetUnitX(u),GetUnitY(u),2,angle,1,0,0,0)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call Shacull(p)
call Mujuk(p,u)
call TimerStart(t,tempR,true,function WakamoR)
endif
endif
if sk=='H225' then
set Mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-Mana))
set c=GetSpellTargetUnit()
call Animate(u,9)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,c)
call Shacull(p)
call TimerStart(t,0.02,true,function WakamoT)
endif
set u=null
set t=null
set c=null
endfunction
function WakamoST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
local real tempR
set ChSkillD[p]='H220'
set ChSkillQ[p]='H221'
set ChSkillW[p]='H222'
set ChSkillE[p]='H223'
set ChSkillR[p]='H224'
set ChSkillT[p]='H225'
set Range[p]=1200
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
call UnitAddAbility(u,'Amrf')
call UnitRemoveAbility(u,'Amrf')
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_WakamoQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_WakamoW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_WakamoE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_WakamoR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_WakamoT.blp",0)
endif
set STRup[p]=9
set AGIup[p]=3
set INTup[p]=8
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,80)
call SaveReal(udg_Hashtable,p,$43C91172,0.35)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.8)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$9B58470C,100)
call SaveReal(udg_Hashtable,p,$88E0F85F,50)
call SaveReal(udg_Hashtable,p,$E755DDB8,175)
call SaveReal(udg_Hashtable,p,$ABD3E955,100)
call SaveReal(udg_Hashtable,p,$A2229E00,200)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,75)
call SaveReal(udg_Hashtable,p,$C3EA9E83,400)
call SaveReal(udg_Hashtable,p,$A8D71652,250)
call SaveReal(udg_Hashtable,p,$127510D2,1350)
call SaveReal(udg_Hashtable,p,$B491D29B,500)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$FC4D8276,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_WakamoF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc피어난 파괴충동")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"전투 상태 유지 혹은 보스전중 모든 피해 증폭율이 상승한다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00매 초마다 스킬 피해 증폭율 상승|cffffa500 : 1% (최대 10%)\n|cff00ff00특수 1|cffffa500 : 최대치 달성시 스킬 가속 15 상승\n|cff00ff00특수 2|cffffa500 : 보스전중일경우 사망시 모든 스택을 잃는다.")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function WakamoSkill)
call SaveInteger(udg_Hashtable,p,$5EFF7683,22)
call WakamoTT(p)
set u=null
set trg=null
endfunction
function ikkiTT takes integer p returns nothing
local unit u=Charcter[p]
local real Qm=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
local real Em=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
local real Rm=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
local real Tm=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
local integer Agi=GetHeroAgi(u,true)
local integer Ddmg=R2I((Agi+GetUnitState(u,ConvertUnitState(0x14)))*8)
local integer Qdmg=R2I(GetUnitState(u,ConvertUnitState(0x14))*((LoadInteger(udg_Hashtable,p,$FAFE5485)*0.4)))
local integer Wdmg=R2I((Agi*LoadInteger(udg_Hashtable,p,$457BCFC0))+GetUnitState(u,ConvertUnitState(0x14)))
local integer Edmg=R2I((Agi*(LoadInteger(udg_Hashtable,p,$6074AEF9)*10))+(GetUnitState(u,ConvertUnitState(0x14))*LoadInteger(udg_Hashtable,p,$6074AEF9)))
local integer Rdmg=Agi*(10+(LoadInteger(udg_Hashtable,p,$BB70E228)*10))+(R2I((GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$BB70E228)*5))))
local integer TLv=LoadInteger(udg_Hashtable,p,$132FA1F5)
if LoadBoolean(System,p,$E9917373)then
set Qdmg=Qdmg+R2I(Qm*Kirie[p])
set Edmg=Edmg+R2I(Em*Kirie[p])
set Rdmg=Rdmg+R2I(Rm*Kirie[p])
endif
if LoadBoolean(udg_Hash,p,$53D6EE36)then
call EXSetAbilityString('H170',1,ABILITY_DATA_UBERTIP,"적의 검을 읽어 다음 공격을 예측하고 회피합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Ddmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00특수 1|cffffa500 : 받은 피해는 무효로 한다.\n|cff00ff00특수 2|cffffa500 : 발동 성공시 쿨타임이 1.2초로 감소한다.\n|cff00ff00지속시간|cffffa500 : 0.5초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(7*ct[p]))+"초\n|cffFF0000EX : |cffffa500발동 성공시 쿨타임이 1.2초로 감소한다.")
else
call EXSetAbilityString('H170',1,ABILITY_DATA_UBERTIP,"적의 검을 읽어 다음 공격을 예측하고 회피합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Ddmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00특수|cffffa500 : 받은 피해는 무효로 한다.\n|cff00ff00지속시간|cffffa500 : 0.5초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(7*ct[p]))+"초")
endif
call EXSetAbilityString('H171',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Qm))+"|r\n\n다음 기본 공격을 강화합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Qdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(3*ct[p]))+"초")
call EXSetAbilityString('H172',1,ABILITY_DATA_UBERTIP,"같은 대상을 연속해서 공격시 대상에게 현재 체력에 비례한 피해를 입힌다.\n\n|cff00ff00기본 공격 4회시|cffffa500 : "+I2S(Wdmg)+" + 대상의 현재체력의 0.5%\n|cff00ff00타입|cffffa500 : 패시브")
call EXSetAbilityString('H173',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Em))+"|r\n\n방어력도 관통할 강력한 일격으로 공격을 가합니다.\n\n|cff00ff00타입|cffffa500 : 타겟 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Edmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00사거리|cffffa500 : "+I2S(250+R2I(GetUnitState(u,ConvertUnitState(0x16))))+"\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(12*ct[p]))+"초")
call DzSyncData("SKRP",I2S('H173')+"/"+R2S(250+GetUnitState(u,ConvertUnitState(0x16))))
call EXSetAbilityString('H174',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Rm))+"|r\n\n자신의 주변을 여러번 벤후 자신이 있던곳을 빛과 같은 속도로 꽤뚫으며 피해를 가합니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00데미지|cffffa500 : "+I2S(Rdmg)+"\n|cff00ff00데미지 속성|cffffa500 : |cffffffff무속성 |cffFF9100물리\n|cff00ff00범위|cffffa500 : "+I2S(R2I(800*Skrange[p]))+"\n|cff00ff00특수|cffffa500 : 사용중 무적 상태를 유지합니다.\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(25*ct[p]))+"초")
if LoadBoolean(udg_Hash,p,$53D6EE36)then
call EXSetAbilityString('H175',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n자신의 한계를 쥐어짜내 일시적으로 매우 강력해집니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00민첩 스탯 상승|cffffa500 : "+I2S(GetHeroLevel(u)*(5+(TLv*5)))+"\n|cff00ff00공격 간격 감소|cffffa500 : 0.15초\n|cff00ff00이동속도 증가|cffffa500 : 25%\n|cff00ff00모든 피해 증폭|cffffa500 : 15%\n|cff00ff00제 5비검 시차|cffffa500 : 서격 피해량의 50% 만큼 피해랑 추가\n|cff00ff00특수|cffffa500 : 지속시간 종료부터 쿨타임이 작동한다.\n|cff00ff00지속시간|cffffa500 : 30초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(60*ct[p]))+"초\n|cffFF0000EX : |cffffa500보스전중 사용시 보스전이 종료되거나 사망하기전까지 지속된다.")
else
call EXSetAbilityString('H175',1,ABILITY_DATA_UBERTIP,"|cff0078FF소모 마나 : "+I2S(R2I(Tm))+"|r\n\n자신의 한계를 쥐어짜내 일시적으로 매우 강력해집니다.\n\n|cff00ff00타입|cffffa500 : 즉시 사용\n|cff00ff00민첩 스탯 상승|cffffa500 : "+I2S(GetHeroLevel(u)*(5+(TLv*5)))+"\n|cff00ff00공격 간격 감소|cffffa500 : 0.15초\n|cff00ff00이동속도 증가|cffffa500 : 25%\n|cff00ff00모든 피해 증폭|cffffa500 : 15%\n|cff00ff00제 5비검 시차|cffffa500 : 서격 피해량의 50% 만큼 피해랑 추가\n|cff00ff00특수|cffffa500 : 지속시간 종료후부터 쿨타임이 작동한다.\n|cff00ff00지속시간|cffffa500 : 30초\n|cff00ff00쿨타임|cffffa500 : "+I2S(R2I(60*ct[p]))+"초")
endif
set u=null
endfunction
function ikkiEX takes integer p returns nothing
local unit u=Charcter[p]
call SaveBoolean(udg_Hash,p,$53D6EE36,true)
if ProduceLV<4 then
call StopSoundBJ(LastBGM,false)
call StopSoundBJ(LastEFVoice,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikki_Ex.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
endif
call SetPlayerName(Player(8),"|cffFF8200쿠로가네 잇키 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"나의 최약으로 당신의 최강을 때려 부수겠다..!")
set u=null
endfunction
function ikkiR takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local unit c
local real tempX
local real tempY
local real tempX2
local real tempY2
local real tempX3
local real tempY3
local real angle
local real tempR1
local real tempR2
local real tempR3
local real dmg
local integer tempI=0
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$23E22F84)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call Mujuk(p,u)
if stage==0 then
call TimerStart(t,0.2,false,function ikkiR)
elseif stage==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_R3_1.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
set angle=GetRandomReal(0,360.00)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$1E5F3BA0,angle+45)
call SaveReal(udg_Hash,GetHandleId(t),$86138D5D,angle+90)
set tempX=GetUnitX(tar)+(((400)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((400)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
set tempX=GetUnitX(tar)+(((400)*1.0)*Cos(((angle+45)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((400)*1.0)*Sin(((angle+45)*1.0)*bj_DEGTORAD))
call EFsettingU(p,"war3mapImported\\@EF_Ziggurat Missile Ribbon.mdl",1,u,"hand right")
call EFsettingU(p,"war3mapImported\\@EF_Ziggurat Missile Ribbon.mdl",1,u,"hand left")
call EFsettingU(p,"war3mapImported\\@EF_Ziggurat Missile Ribbon.mdl",1,u,"head")
call TimerStart(t,0.0,false,function ikkiR)
elseif stage>=2 and stage<=8 then
loop
exitwhen tempI>3
set angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)+225
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$1E5F3BA0)+225
set tempR3=LoadReal(udg_Hash,GetHandleId(t),$86138D5D)+225
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$1E5F3BA0,tempR2)
call SaveReal(udg_Hash,GetHandleId(t),$86138D5D,tempR3)
set tempX=GetUnitX(tar)+(((600)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((600)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set tempX2=GetUnitX(tar)+(((600)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(tar)+(((600)*1.0)*Sin(((angle-225)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_BLUEshotingR2c.mdl",2,tempX2,tempY2,2.5,angle,1.5,0,0,100)
set tempX=GetUnitX(tar)+(((600)*1.0)*Cos(((tempR2)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((600)*1.0)*Sin(((tempR2)*1.0)*bj_DEGTORAD))
set tempX2=GetUnitX(tar)+(((600)*1.0)*Cos(((tempR2)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(tar)+(((600)*1.0)*Sin(((tempR2-225)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_BLUEshotingR2c.mdl",2,tempX2,tempY2,2.5,tempR2,1.5,0,0,100)
set tempX=GetUnitX(tar)+(((600)*1.0)*Cos(((tempR3)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((600)*1.0)*Sin(((tempR3)*1.0)*bj_DEGTORAD))
set tempX2=GetUnitX(tar)+(((600)*1.0)*Cos(((tempR3)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(tar)+(((600)*1.0)*Sin(((tempR3-225)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_BLUEshotingR2c.mdl",2,tempX2,tempY2,2.5,tempR3,1.5,0,0,100)
set tempI=tempI+1
endloop
call SetUnitAnimationByIndex(u,4)
set angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)+265
set tempR2=LoadReal(udg_Hash,GetHandleId(t),$1E5F3BA0)+265
set tempR3=LoadReal(udg_Hash,GetHandleId(t),$86138D5D)+265
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$1E5F3BA0,tempR2)
call SaveReal(udg_Hash,GetHandleId(t),$86138D5D,tempR3)
set tempX=GetUnitX(tar)+(((800)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((800)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
set tempX2=GetUnitX(tar)+(((800)*1.0)*Cos(((tempR2)*1.0)*bj_DEGTORAD))
set tempY2=GetUnitY(tar)+(((800)*1.0)*Sin(((tempR2)*1.0)*bj_DEGTORAD))
set tempX3=GetUnitX(tar)+(((800)*1.0)*Cos(((tempR3)*1.0)*bj_DEGTORAD))
set tempY3=GetUnitY(tar)+(((800)*1.0)*Sin(((tempR3)*1.0)*bj_DEGTORAD))
if GetRandomInt(1,2)==1 then
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW.mdl",2,GetUnitX(tar),GetUnitY(tar),3,angle-180,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW.mdl",2,GetUnitX(tar),GetUnitY(tar),3,tempR2-180,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW.mdl",2,GetUnitX(tar),GetUnitY(tar),3,tempR3-180,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_effect_order_dange_bh3_daoguang_2.mdl",0,tempX,tempY,8,angle-170,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_effect_order_dange_bh3_daoguang_2.mdl",0,tempX2,tempY2,8,tempR2-170,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_effect_order_dange_bh3_daoguang_2.mdl",0,tempX3,tempY3,8,tempR3-170,1.5,0,0,50)
else
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW.mdx",2,GetUnitX(tar),GetUnitY(tar),3,angle,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW.mdx",2,GetUnitX(tar),GetUnitY(tar),3,tempR2,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW.mdx",2,GetUnitX(tar),GetUnitY(tar),3,tempR3,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_effect_order_dange_bh3_daoguang_2.mdl",0,tempX,tempY,12,angle+180,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_effect_order_dange_bh3_daoguang_2.mdl",0,tempX2,tempY2,12,tempR2+180,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_effect_order_dange_bh3_daoguang_2.mdl",0,tempX3,tempY3,12,tempR3+180,1.5,0,0,50)
endif
set dmg=(GetHeroAgi(Charcter[p],true)*(10+(LoadInteger(udg_Hashtable,p,$BB70E228))*10))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),800*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if u==Charcter[p]then
call Damage(Charcter[p],c,dmg,1,0,false,0.143,'H174')
else
call Damage(Charcter[p],c,dmg,1,0,false,0.0572,'H174')
endif
endif
endloop
call TimerStart(t,0.15,false,function ikkiR)
elseif stage==9 then
set angle=120
set tempR2=240
set tempR3=360
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SaveReal(udg_Hash,GetHandleId(t),$1E5F3BA0,tempR2)
call SaveReal(udg_Hash,GetHandleId(t),$86138D5D,tempR3)
call SetUnitAnimationByIndex(u,12)
call EFsettingU(p,"war3mapImported\\@EF_Effect Cast Blue.mdl",1,u,"hand right")
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikkiR_Charge.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Youmu_Effect_R3_2.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call SetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))
call EXSetUnitFacing(u,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))
call TimerStart(t,0.3,false,function ikkiR)
elseif stage==10 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikkiR_Damage.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call TimerStart(t,0.4,false,function ikkiR)
elseif stage==11 then
call SetUnitAnimationByIndex(u,13)
set tempX=GetUnitX(tar)+(((800)*1.0)*Cos(((s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((800)*1.0)*Sin(((s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))*1.0)*bj_DEGTORAD))
set tempI=0
loop
exitwhen IsPointPathableALL(tempX,tempY)
set tempX=GetUnitX(tar)+(((800-tempI)*1.0)*Cos(((s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(tar)+(((800-tempI)*1.0)*Sin(((s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)))*1.0)*bj_DEGTORAD))
set tempI=tempI+100
endloop
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call EFsettingXY(p,"war3mapImported\\@EF_BLUEshotingR2c.mdl",2,GetUnitX(tar),GetUnitY(tar),5,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar)),1,0,0,100)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW.mdx",2,GetUnitX(tar),GetUnitY(tar),3,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))-30,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_SlashCRITLOW.mdx",2,GetUnitX(tar),GetUnitY(tar),3,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))+45,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_effect_order_dange_bh3_daoguang_2.mdl",0,GetUnitX(tar),GetUnitY(tar),10,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))-180,1.5,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_effect_order_dange_bh3_daoguang_2.mdl",0,GetUnitX(tar),GetUnitY(tar),14,s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))-180,2,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_W3.mdl",0,GetUnitX(tar),GetUnitY(tar),5*Skrange[p],270,2,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_[dz.spell]001_blue_mhg.mdl",0,GetUnitX(tar),GetUnitY(tar),1.65*Skrange[p],270,2,0,0,0)
set dmg=GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$BB70E228)*5)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),800*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(Charcter[p],c,dmg,1,0,false,1,'H174')
endif
endloop
call TimerStart(t,0.65,false,function ikkiR)
elseif stage==12 then
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call RemoveUnit(tar)
endif
call s__party_deallocate((g))
set u=null
set tar=null
set c=null
set t=null
set ef=null
endfunction
function ikkiT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer tempI
local real time=LoadReal(udg_Hash,GetHandleId(t),$6B54C545)
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$23E22F84)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
call Animate(u,11)
call ND(Player(p-1),0.95,15)
call EXSetAbilityState(EXGetUnitAbility(u,'H175'),ABILITY_STATE_COOLDOWN,30000)
if BossBattleN and LoadBoolean(udg_Hash,p,$53D6EE36)then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikkiT_EX.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikkiT.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
endif
if stage<=25 then
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_WindCirclefaster.mdl",GetUnitX(u),GetUnitY(u))
call EXEffectMatRotateZ(ef,GetRandomReal(0,360))
call SetSpecialEffectColorEx(ef,155,155,255,255)
call DestroyEffect(ef)
call EFsettingXY(p,"war3mapImported\\@EF_Effect_Invisibility_Target_Wave_Blue.mdl",0,GetUnitX(u),GetUnitY(u),1,270,1,0,0,0)
call Mujuk(p,u)
endif
if stage==25 then
call ND(Player(p-1),0.1,60)
call RemoveShacull(p)
call endMujuk(p,u)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_ESFrost_C1_Caster.mdl",0,GetUnitX(u),GetUnitY(u),2,270,1,0,0,0)
set ef=EFsettingUcustom(p,"war3mapImported\\@Aura_Blue Aura.mdl",u,"origin")
call SaveEffectHandle(udg_Hash,GetHandleId(t),$23E22F84,ef)
call SaveBoolean(udg_Hash,GetHandleId(u),$BCFEAC47,true)
set tempI=GetHeroLevel(u)*(5+(LoadInteger(udg_Hashtable,p,$132FA1F5)*5))
call StatUP(p,tempI,"공격력")
call SaveInteger(udg_Hash,GetHandleId(t),$FC4F723E,tempI)
call StatUP(p,0.15,"공격간격")
call StatUP(p,25,"이속")
call StatUP(p,0.15,"피증")
if BossBattleN and LoadBoolean(udg_Hash,p,$53D6EE36)then
call BuffCall(u,'B026',99999,false,false)
call SaveReal(udg_Hash,GetHandleId(t),$6B54C545,9999)
else
call BuffCall(u,'B026',30,false,false)
call SaveReal(udg_Hash,GetHandleId(t),$6B54C545,30)
endif
endif
if stage>=26 then
if time<=9999 then
call SaveReal(udg_Hash,GetHandleId(t),$6B54C545,time-0.04)
endif
if time>=7777 and not BossBattleN then
call BuffCall(u,'B026',0,false,false)
set tempI=LoadInteger(udg_Hash,GetHandleId(t),$FC4F723E)*-1
call StatUP(p,tempI,"공격력")
call StatUP(p,-0.15,"공격간격")
call StatUP(p,-25,"이속")
call StatUP(p,-0.15,"피증")
call SaveBoolean(udg_Hash,GetHandleId(u),$BCFEAC47,false)
call CTset(u,p,'H175',0)
call DestroyEffect(ef)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
if not UnitAlive(u)or time<=0 then
call BuffCall(u,'B026',0,false,false)
set tempI=LoadInteger(udg_Hash,GetHandleId(t),$FC4F723E)
call StatUP(p,-tempI,"공격력")
call StatUP(p,-0.15,"공격간격")
call StatUP(p,-25,"이속")
call StatUP(p,-0.15,"피증")
call SaveBoolean(udg_Hash,GetHandleId(u),$BCFEAC47,false)
call CTset(u,p,'H175',0)
call DestroyEffect(ef)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
set t=null
set u=null
set ef=null
endfunction
function ikkiD takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
call UnitRemoveAbility(u,'A01A')
call SaveBoolean(udg_Hash,GetHandleId(u),$DC0032E2,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function ikkiSkill takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer sk=GetSpellAbilityId()
local real tempR
local integer tempI
local real tempX=GetSpellTargetX()
local real tempY=GetSpellTargetY()
local unit c
local real mana
local effect ef
if(GetSpellAbilityId()=='H170')then
call EFsettingXY(p,"Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",0,GetUnitX(u),GetUnitY(u),2,GetUnitFacing(u),1,0,0,0)
call UnitAddAbility(u,'A01A')
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikkiD.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call SaveBoolean(udg_Hash,GetHandleId(u),$DC0032E2,true)
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,u)
call BuffCall(u,'B025',0.5,false,false)
call TimerStart(t,0.50,false,function ikkiD)
endif
if(GetSpellAbilityId()=='H171')then
set mana=LoadReal(udg_Hashtable,p,$9B58470C)*CostM[p]
call SetUnitState(u,UNIT_STATE_MANA,(GetUnitState(u,UNIT_STATE_MANA)-mana))
set ef=LoadEffectHandle(udg_Hash,GetHandleId(u),$9C8B35F)
call DestroyEffect(ef)
call SaveBoolean(udg_Hash,GetHandleId(u),$E3FD8C59,true)
set ef=EFsettingUcustom(p,"war3mapImported\\@Aura_AZ_Goods_Bottle(3).mdl",u,"right hand")
call SaveEffectHandle(udg_Hash,GetHandleId(u),$9C8B35F,ef)
call DestroyTimer(t)
endif
if(GetSpellAbilityId()=='H173')then
call Animate(u,3)
set mana=LoadReal(udg_Hashtable,p,$A2229E00)*CostM[p]
call SetUnitState(u,UNIT_STATE_MANA,(GetUnitState(u,UNIT_STATE_MANA)-mana))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikki_E.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call EFsettingXY(p,"war3mapImported\\@EF_[dz.spell]001_blue_mhg.mdl",0,GetUnitX(tar),GetUnitY(tar),0.5,270,1,0,0,0)
set tempR=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_effect_order_dange_bh3_daoguang_2.mdl",0,GetUnitX(u),GetUnitY(u),4,tempR,1,20,0,150)
set tempR=(((GetHeroAgi(u,true)*(LoadInteger(udg_Hashtable,p,$6074AEF9)*10)))+(GetUnitState(u,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,p,$6074AEF9)*1)))
call Damage(u,tar,tempR,1,0,false,1,'H173')
call Stun(u,tar,1)
call ND(Player(p-1),0.1,35)
call DestroyTimer(t)
endif
if(GetSpellAbilityId()=='H174')then
set mana=LoadReal(udg_Hashtable,p,$C3EA9E83)*CostM[p]
call SetUnitState(u,UNIT_STATE_MANA,(GetUnitState(u,UNIT_STATE_MANA)-mana))
call Shacull(p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
set tar=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call TimerStart(t,0.00,false,function ikkiR)
endif
if(GetSpellAbilityId()=='H175')then
set mana=LoadReal(udg_Hashtable,p,$127510D2)*CostM[p]
call SetUnitState(u,UNIT_STATE_MANA,(GetUnitState(u,UNIT_STATE_MANA)-mana))
call Shacull(p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call TimerStart(t,0.04,true,function ikkiT)
endif
set u=null
set t=null
set c=null
set tar=null
set ef=null
endfunction
function ikkiST takes integer p returns nothing
local unit u=Charcter[p]
local trigger trg=CreateTrigger()
set ChSkillD[p]='H170'
set ChSkillQ[p]='H171'
set ChSkillW[p]='H172'
set ChSkillE[p]='H173'
set ChSkillR[p]='H174'
set ChSkillT[p]='H175'
set Attack2[p]=4
set Range[p]=250
call UnitAddAbility(u,ChSkillD[p])
call UnitAddAbility(u,ChSkillQ[p])
call UnitAddAbility(u,ChSkillW[p])
call UnitAddAbility(u,ChSkillE[p])
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",1),"ReplaceableTextures\\CommandButtons\\BTNC_ikkiQ.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",2),"ReplaceableTextures\\CommandButtons\\BTNC_ikkiW.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",3),"ReplaceableTextures\\CommandButtons\\BTNC_ikkiE.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",4),"ReplaceableTextures\\CommandButtons\\BTNC_ikkiR.blp",0)
call DzFrameSetTexture(DzFrameFindByName("Sk_SkillIcon",5),"ReplaceableTextures\\CommandButtons\\BTNC_ikkiT.blp",0)
endif
set STRup[p]=10
set AGIup[p]=8
set INTup[p]=1
set ADup[p]=5
call SaveReal(udg_Hashtable,p,$8483D54D,70)
call SaveReal(udg_Hashtable,p,$43C91172,0.35)
call SaveReal(udg_Hashtable,p,$836F3EE3,0.95)
call SaveInteger(udg_Hashtable,p,$FAFE5485,1)
call SaveInteger(udg_Hashtable,p,$457BCFC0,1)
call SaveInteger(udg_Hashtable,p,$6074AEF9,1)
call SaveReal(udg_Hashtable,p,$9B58470C,100)
call SaveReal(udg_Hashtable,p,$88E0F85F,100)
call SaveReal(udg_Hashtable,p,$E755DDB8,0)
call SaveReal(udg_Hashtable,p,$ABD3E955,0)
call SaveReal(udg_Hashtable,p,$A2229E00,275)
call SaveReal(udg_Hashtable,p,$5E6EF8DA,150)
call SaveReal(udg_Hashtable,p,$C3EA9E83,600)
call SaveReal(udg_Hashtable,p,$A8D71652,350)
call SaveReal(udg_Hashtable,p,$127510D2,1200)
call SaveReal(udg_Hashtable,p,$B491D29B,700)
call SaveReal(udg_Hashtable,p,$46D2FE81,1.2)
call SaveBoolean(udg_Hashtable,ChSkillD[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillQ[p],$33B724A0,true)
call SaveBoolean(udg_Hashtable,ChSkillW[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillE[p],$FC4D8276,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillR[p],$E6BB3831,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$ABBFF13,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$E3BEC9B6,true)
call SaveBoolean(udg_Hashtable,ChSkillT[p],$33B724A0,true)
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_ART,"ReplaceableTextures\\CommandButtons\\BTNC_ikkiF.blp")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_TIP,"|cff48d1cc블레이드 스틸")
call EXSetAbilityString(CharacterColor[p+5],1,ABILITY_DATA_UBERTIP,"상대방의 검술을 보고 훔쳐올수있는 기술.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00비영웅 유닛에게 가하는 피해 증가|cffffa500 : 20%\n|cff00ff00전투중 공격속도 증가|cffffa500 : 전투중 0 ~ 80%의 공격속도 상승\n|cff00ff00보스전중 공격력 증폭율 획득|cffffa500 : 20%\n|cff00ff00보스전중 모든 받는 피해 감소율|cffffa500 : 10%")
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg,function ikkiSkill)
call SaveInteger(udg_Hashtable,p,$5EFF7683,17)
call ikkiTT(p)
set u=null
set trg=null
endfunction
function InitGlobals takes nothing returns nothing
local integer i=0
set i=0
loop
exitwhen(i>1)
set udg_Character_Shild[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>1)
set udg_Character_Shild_Down[i]=0
set i=i+1
endloop
set udg_PlayerTeam=CreateForce()
set udg_Dialog=DialogCreate()
set udg_Artfact=CreateTimer()
set i=0
loop
exitwhen(i>5)
set udg_PstatTimer[i]=CreateTimer()
set i=i+1
endloop
set udg_regionI=0
set i=0
loop
exitwhen(i>1)
set udg_int[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>10)
set udg_infoRe[i]=CreateTimer()
set i=i+1
endloop
set i=0
loop
exitwhen(i>5)
set udg_cost[i]=CreateTimer()
set i=i+1
endloop
set i=0
loop
exitwhen(i>5)
set udg_group[i]=CreateGroup()
set i=i+1
endloop
set i=0
loop
exitwhen(i>6)
set udg_BattleEND[i]=CreateTimer()
set i=i+1
endloop
set i=0
loop
exitwhen(i>5)
set udg_n007timer[i]=CreateTimer()
set i=i+1
endloop
set i=0
loop
exitwhen(i>5)
set udg_c004timer[i]=CreateTimer()
set i=i+1
endloop
set udg_Mujuk=CreateGroup()
set i=0
loop
exitwhen(i>10)
set udg_CustomDialog[i]=DialogCreate()
set i=i+1
endloop
endfunction
function CreateAllItems takes nothing returns nothing
local integer itemID
set gg_item_I00K_0119=CreateItem('I00K',26686.5,29528.2)
endfunction
function CreateUnitsForPlayer0 takes nothing returns nothing
local player p=Player(0)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n002_0002=CreateUnit(p,'n002',-27570.8,-27793.7,270.000)
endfunction
function CreateUnitsForPlayer1 takes nothing returns nothing
local player p=Player(1)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n002_0004=CreateUnit(p,'n002',-22081.8,-27829.9,270.000)
endfunction
function CreateUnitsForPlayer2 takes nothing returns nothing
local player p=Player(2)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n002_0005=CreateUnit(p,'n002',-16597.4,-27644.8,270.000)
endfunction
function CreateUnitsForPlayer3 takes nothing returns nothing
local player p=Player(3)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n002_0006=CreateUnit(p,'n002',-10989.3,-27644.7,270.000)
endfunction
function CreateUnitsForPlayer4 takes nothing returns nothing
local player p=Player(4)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n002_0023=CreateUnit(p,'n002',-5499.3,-27599.4,270.000)
endfunction
function CreateBuildingsForPlayer9 takes nothing returns nothing
local player p=Player(9)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'h001',-6592.0,5568.0,270.000)
set u=CreateUnit(p,'h001',-3904.0,1920.0,270.000)
set u=CreateUnit(p,'h001',4032.0,-1984.0,270.000)
set u=CreateUnit(p,'h001',-5120.0,-3328.0,270.000)
set u=CreateUnit(p,'h001',2048.0,3136.0,270.000)
set gg_unit_n006_0022=CreateUnit(p,'n006',-6592.0,-3264.0,270.000)
set u=CreateUnit(p,'np08',-3968.0,5632.0,270.000)
set u=CreateUnit(p,'np01',3776.0,3392.0,270.000)
set gg_unit_n007_0027=CreateUnit(p,'n007',-6464.0,-3136.0,270.000)
set gg_unit_n008_0028=CreateUnit(p,'n008',-6464.0,-3328.0,270.000)
set u=CreateUnit(p,'h001',-26624.0,-5120.0,270.000)
set u=CreateUnit(p,'h001',-19840.0,-5120.0,270.000)
set u=CreateUnit(p,'h001',-23616.0,-17536.0,270.000)
set u=CreateUnit(p,'h001',-21760.0,7872.0,270.000)
set u=CreateUnit(p,'h001',-8768.0,-24064.0,270.000)
set u=CreateUnit(p,'h001',-19904.0,15488.0,270.000)
set u=CreateUnit(p,'np09',-5376.0,5952.0,270.000)
set u=CreateUnit(p,'h001',-17024.0,23936.0,270.000)
set gg_unit_n004_0133=CreateUnit(p,'n004',-25280.0,23424.0,270.000)
set u=CreateUnit(p,'h001',-26368.0,23424.0,270.000)
set u=CreateUnit(p,'n003',-6464.0,-3264.0,270.000)
endfunction
function CreateUnitsForPlayer9 takes nothing returns nothing
local player p=Player(9)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_h000_0013=CreateUnit(p,'h000',-1536.0,-3104.0,270.000)
set u=CreateUnit(p,'np02',-6280.9,-1934.1,305.700)
set u=CreateUnit(p,'np03',-3064.4,-1600.5,270.000)
set gg_unit_h007_0030=CreateUnit(p,'h007',26469.0,29533.4,202.980)
set gg_unit_np05_0115=CreateUnit(p,'np05',-6288.4,-1923.8,335.461)
set gg_unit_np04_0116=CreateUnit(p,'np04',-6285.0,-1927.2,334.721)
set gg_unit_np07_0117=CreateUnit(p,'np07',-6285.4,-1937.6,324.690)
set gg_unit_np06_0118=CreateUnit(p,'np06',-6288.4,-1923.8,349.328)
set gg_unit_np10_0134=CreateUnit(p,'np10',-6288.8,-1934.1,298.345)
set gg_unit_np11_0135=CreateUnit(p,'np11',-6286.9,-1930.7,309.134)
set gg_unit_np12_0136=CreateUnit(p,'np12',-6280.9,-1934.1,317.290)
set gg_unit_np13_0138=CreateUnit(p,'np13',-6283.4,-1932.8,317.784)
set gg_unit_np18_0140=CreateUnit(p,'np18',-6282.8,-1922.0,310.302)
set gg_unit_np17_0150=CreateUnit(p,'np17',-6289.7,-1930.0,306.866)
set gg_unit_np14_0151=CreateUnit(p,'np14',-6281.1,-1932.7,315.657)
set gg_unit_np15_0152=CreateUnit(p,'np15',-6286.3,-1938.0,312.830)
set gg_unit_np16_0153=CreateUnit(p,'np16',-6287.7,-1930.0,305.342)
endfunction
function CreateUnitsForPlayer10 takes nothing returns nothing
local player p=Player(10)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'en01',-27357.4,-6129.2,41.903)
set u=CreateUnit(p,'en01',-20654.5,-6055.3,41.903)
set u=CreateUnit(p,'en05',-23194.6,8602.2,225.262)
set u=CreateUnit(p,'en01',-27556.1,-6344.4,287.323)
set u=CreateUnit(p,'en01',-27104.2,-6365.3,150.056)
set u=CreateUnit(p,'en01',-27118.2,-5920.2,264.361)
set u=CreateUnit(p,'en01',-25859.4,-6139.2,152.242)
set u=CreateUnit(p,'en01',-26139.8,-5944.3,303.177)
set u=CreateUnit(p,'en01',-20853.3,-6270.5,287.323)
set u=CreateUnit(p,'en01',-26119.6,-6379.1,184.136)
set u=CreateUnit(p,'en01',-25644.7,-6386.0,200.858)
set u=CreateUnit(p,'en01',-20401.3,-6291.4,150.056)
set u=CreateUnit(p,'en01',-20415.3,-5846.3,264.361)
set u=CreateUnit(p,'en01',-19156.5,-6065.3,152.242)
set u=CreateUnit(p,'en01',-19436.9,-5870.4,303.180)
set u=CreateUnit(p,'en02',-23529.3,-14300.7,267.965)
set u=CreateUnit(p,'en03',-26737.3,-18815.7,127.896)
set u=CreateUnit(p,'en01',-19416.7,-6305.2,184.136)
set u=CreateUnit(p,'en01',-18941.8,-6312.1,200.858)
set u=CreateUnit(p,'en01',-20965.1,-3547.5,184.840)
set u=CreateUnit(p,'en01',-20581.2,-3585.8,49.319)
set u=CreateUnit(p,'en01',-20774.7,-3863.6,214.833)
set u=CreateUnit(p,'en01',-20571.0,-4125.9,341.729)
set u=CreateUnit(p,'en05',-23285.5,8158.2,210.834)
set u=CreateUnit(p,'en05',-23801.5,8216.4,253.561)
set u=CreateUnit(p,'en05',-23889.4,8759.4,45.155)
set u=CreateUnit(p,'en05',-20254.4,8876.8,124.885)
set u=CreateUnit(p,'en05',-20359.8,8329.3,164.767)
set u=CreateUnit(p,'en05',-19936.8,8010.0,348.838)
set u=CreateUnit(p,'en05',-19662.2,8646.8,243.574)
set u=CreateUnit(p,'en05',-20008.3,6701.7,110.416)
set u=CreateUnit(p,'en05',-20409.1,6484.7,16.337)
set u=CreateUnit(p,'en05',-20183.8,6119.5,61.569)
set u=CreateUnit(p,'en05',-19707.5,6169.9,338.971)
set u=CreateUnit(p,'en06',-21863.7,9690.4,270.640)
set u=CreateUnit(p,'en03',-27053.2,-19343.3,208.351)
set u=CreateUnit(p,'en03',-27033.2,-19940.3,178.281)
set u=CreateUnit(p,'en03',-20592.5,-19781.8,257.604)
set u=CreateUnit(p,'en03',-21541.7,-20349.1,174.545)
set u=CreateUnit(p,'en03',-21065.6,-20276.2,3.120)
set u=CreateUnit(p,'en02',-23740.4,-21019.2,85.500)
set u=CreateUnit(p,'en03',-26303.1,-20509.5,23.885)
set u=CreateUnit(p,'en03',-25806.1,-13898.6,306.297)
set u=CreateUnit(p,'en04',-23246.0,-3411.1,224.540)
set u=CreateUnit(p,'en07',-13224.0,-16673.2,40.969)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en08',-8994.5,-15431.0,254.931)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en07',-12837.1,-17607.2,55.087)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en07',-6975.2,-18543.7,40.969)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en07',-12517.4,-16947.0,73.600)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en07',-7270.8,-17785.9,40.969)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en07',-11995.9,-21482.2,40.969)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en07',-11653.8,-21965.3,40.969)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en07',-11572.0,-21109.2,40.969)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en09',-21712.5,17742.5,30.598)
set u=CreateUnit(p,'en07',-6806.1,-17394.7,40.969)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en09',-21982.5,17235.3,110.570)
set u=CreateUnit(p,'en09',-21466.3,17096.6,4.461)
set u=CreateUnit(p,'en09',-18019.1,17825.6,334.368)
set u=CreateUnit(p,'en09',-18356.6,17430.6,116.393)
set u=CreateUnit(p,'en09',-18105.7,17046.6,329.995)
set u=CreateUnit(p,'en09',-21688.1,16166.3,168.975)
set u=CreateUnit(p,'en09',-21992.4,15908.8,331.293)
set u=CreateUnit(p,'en09',-18120.7,16110.0,194.200)
set u=CreateUnit(p,'en09',-18262.6,15710.9,263.405)
set u=CreateUnit(p,'en09',-21496.9,19213.4,111.339)
set u=CreateUnit(p,'en09',-21787.5,19050.8,356.946)
set u=CreateUnit(p,'en09',-18125.4,18955.5,338.587)
set u=CreateUnit(p,'en09',-17970.8,19347.3,232.104)
set u=CreateUnit(p,'en10',-19992.4,19456.9,250.990)
set u=CreateUnit(p,'en11',-16951.6,26871.9,270.760)
set u=CreateUnit(p,'en07',-8145.5,-21140.2,40.969)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en07',-7803.4,-21623.2,40.969)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en07',-7721.6,-20767.1,40.969)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en03',-26684.3,-20367.2,178.281)
set u=CreateUnit(p,'en03',-20903.0,-18659.5,27.697)
set u=CreateUnit(p,'en03',-20617.4,-19172.6,3.120)
set u=CreateUnit(p,'en03',-26243.9,-13934.4,312.834)
set u=CreateUnit(p,'en03',-26639.2,-14181.1,320.558)
set u=CreateUnit(p,'en03',-26877.9,-14651.3,329.451)
set u=CreateUnit(p,'en03',-26571.1,-15220.5,336.316)
set u=CreateUnit(p,'en03',-21452.9,-13723.9,238.106)
set u=CreateUnit(p,'en03',-20934.5,-13731.3,230.180)
set u=CreateUnit(p,'en03',-20575.3,-14069.3,221.408)
set u=CreateUnit(p,'en03',-20297.5,-14486.7,212.475)
set u=CreateUnit(p,'en03',-20304.1,-15050.1,203.208)
set u=CreateUnit(p,'en01',-19072.1,-3566.7,161.108)
set u=CreateUnit(p,'en01',-18667.1,-3573.0,37.915)
set u=CreateUnit(p,'en01',-18863.3,-3869.6,11.151)
set u=CreateUnit(p,'en01',-19116.7,-4148.5,315.954)
set u=CreateUnit(p,'en01',-27804.2,-3523.1,184.840)
set u=CreateUnit(p,'en01',-27420.3,-3561.4,49.319)
set u=CreateUnit(p,'en01',-27613.9,-3839.3,214.833)
set u=CreateUnit(p,'en01',-27410.2,-4101.6,341.729)
set u=CreateUnit(p,'en01',-25911.3,-3542.3,161.108)
set u=CreateUnit(p,'en01',-25506.3,-3548.7,37.915)
set u=CreateUnit(p,'en01',-25702.4,-3845.3,11.151)
set u=CreateUnit(p,'en01',-25955.9,-4124.2,315.954)
set u=CreateUnit(p,'en05',-22783.8,6252.1,338.971)
set u=CreateUnit(p,'en05',-23084.6,6783.9,110.416)
set u=CreateUnit(p,'en05',-23485.3,6566.9,16.337)
set u=CreateUnit(p,'en05',-23260.0,6201.7,61.569)
set u=CreateUnit(p,'en06',-21703.5,4785.2,89.851)
set u=CreateUnit(p,'en07',-6601.6,-18038.6,40.969)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en07',-12171.2,-17712.8,55.087)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en07',-11224.9,-21651.2,55.087)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en07',-7358.2,-21083.5,55.087)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'en04',-23211.3,-6649.7,79.027)
endfunction
function CreateUnitsForPlayer11 takes nothing returns nothing
local player p=Player(11)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_h006_0127=CreateUnit(p,'h006',18919.4,-27492.5,181.473)
set gg_unit_h006_0128=CreateUnit(p,'h006',20599.8,-27521.1,74.182)
set gg_unit_h006_0129=CreateUnit(p,'h006',20464.5,-29448.9,161.878)
set gg_unit_h006_0130=CreateUnit(p,'h006',18910.8,-29476.3,116.799)
set gg_unit_h002_0157=CreateUnit(p,'h002',26608.3,-25647.1,177.880)
endfunction
function CreateNeutralHostile takes nothing returns nothing
local player p=Player(PLAYER_NEUTRAL_AGGRESSIVE)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'sys9',26167.3,29394.7,199.700)
set gg_unit_DM01_0078=CreateUnit(p,'DM01',-5244.0,4293.1,269.530)
endfunction
function CreateNeutralPassiveBuildings takes nothing returns nothing
local player p=Player(PLAYER_NEUTRAL_PASSIVE)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'n001',28928.0,28416.0,270.000)
call SetUnitColor(u,ConvertPlayerColor(0))
set u=CreateUnit(p,'n000',28416.0,28416.0,270.000)
call SetUnitColor(u,ConvertPlayerColor(0))
set gg_unit_n005_0137=CreateUnit(p,'n005',28416.0,27968.0,270.000)
call SetUnitColor(gg_unit_n005_0137,ConvertPlayerColor(0))
endfunction
function CreatePlayerBuildings takes nothing returns nothing
call CreateBuildingsForPlayer9()
endfunction
function CreatePlayerUnits takes nothing returns nothing
call CreateUnitsForPlayer0()
call CreateUnitsForPlayer1()
call CreateUnitsForPlayer2()
call CreateUnitsForPlayer3()
call CreateUnitsForPlayer4()
call CreateUnitsForPlayer9()
call CreateUnitsForPlayer10()
call CreateUnitsForPlayer11()
endfunction
function CreateAllUnits takes nothing returns nothing
call CreateNeutralPassiveBuildings()
call CreateBuildingsForPlayer9()
call CreateNeutralHostile()
call CreatePlayerUnits()
endfunction
function CreateRegions takes nothing returns nothing
local weathereffect we
set gg_rct_DummyUnitSet=Rect(26976.0,29504.0,27104.0,29632.0)
set gg_rct_WisspZone=Rect(27552.0,27264.0,29792.0,29568.0)
set gg_rct_ChangoZone=Rect(28544.0,25856.0,29920.0,26848.0)
set gg_rct_PigRegen=Rect(1568.0,4064.0,2848.0,5440.0)
set gg_rct_Tauren=Rect(14816.0,-256.0,15328.0,352.0)
set gg_rct_Taurren_Middle=Rect(13792.0,-2144.0,15008.0,-832.0)
set gg_rct_wave1=Rect(-2432.0,6240.0,-1920.0,6784.0)
set gg_rct_wave2=Rect(-1792.0,6272.0,-1280.0,6784.0)
set gg_rct_wave3=Rect(-1152.0,6272.0,-608.0,6784.0)
set gg_rct_AttackZone=Rect(-2176.0,-3776.0,-896.0,-2496.0)
set gg_rct_wave2_attack1=Rect(-1792.0,3584.0,-1280.0,4096.0)
set gg_rct_wave2_attack2=Rect(-1792.0,512.0,-1280.0,1024.0)
set gg_rct_wave2_attack3=Rect(-1792.0,-2048.0,-1280.0,-1536.0)
set gg_rct_water_plz=Rect(480.0,-544.0,1568.0,3072.0)
set gg_rct_water_plz2=Rect(3456.0,3040.0,4000.0,3616.0)
set gg_rct_item_plz=Rect(-6656.0,-2336.0,-5952.0,-1536.0)
set gg_rct_traning_room=Rect(-4384.0,5248.0,-3616.0,6112.0)
set gg_rct_TraningRoom1=Rect(-27776.0,-28992.0,-27392.0,-28608.0)
set gg_rct_TraningRoom2=Rect(-22272.0,-29024.0,-21888.0,-28640.0)
set gg_rct_TraningRoom3=Rect(-16768.0,-28864.0,-16384.0,-28480.0)
set gg_rct_TraningRoom4=Rect(-11168.0,-28896.0,-10784.0,-28512.0)
set gg_rct_TraningRoom5=Rect(-5696.0,-28864.0,-5312.0,-28480.0)
set gg_rct_Undead=Rect(-26784.0,-5280.0,-26368.0,-4864.0)
set gg_rct_Winter=Rect(-21888.0,7456.0,-21568.0,7808.0)
set gg_rct_Ent=Rect(-23840.0,-18112.0,-23360.0,-17600.0)
set gg_rct_Orc=Rect(-9376.0,-23616.0,-8992.0,-23168.0)
set gg_rct_Golem=Rect(-20096.0,15680.0,-19776.0,16032.0)
set gg_rct_LegendZone=Rect(-17088.0,24192.0,-16800.0,24512.0)
set gg_rct_itemSerch=Rect(25472.0,28544.0,26304.0,29472.0)
set gg_rct_BB_Middle=Rect(26304.0,-27136.0,26976.0,-26496.0)
set gg_rct_BB=Rect(26496.0,-25568.0,26848.0,-25184.0)
set gg_rct_Cronus_Middle=Rect(19456.0,-28128.0,20384.0,-27168.0)
set gg_rct_MemoryRoom=Rect(-26176.0,23136.0,-25600.0,23776.0)
set gg_rct_MemoryMonster=Rect(-26432.0,25728.0,-25824.0,26432.0)
endfunction
function CreateCameras takes nothing returns nothing
set gg_cam_Tauren=CreateCameraSetup()
call CameraSetupSetField(gg_cam_Tauren,CAMERA_FIELD_ZOFFSET,100.0,0.0)
call CameraSetupSetField(gg_cam_Tauren,CAMERA_FIELD_ROTATION,60.3,0.0)
call CameraSetupSetField(gg_cam_Tauren,CAMERA_FIELD_ANGLE_OF_ATTACK,357.0,0.0)
call CameraSetupSetField(gg_cam_Tauren,CAMERA_FIELD_TARGET_DISTANCE,1500.0,0.0)
call CameraSetupSetField(gg_cam_Tauren,CAMERA_FIELD_ROLL,0.0,0.0)
call CameraSetupSetField(gg_cam_Tauren,CAMERA_FIELD_FIELD_OF_VIEW,70.0,0.0)
call CameraSetupSetField(gg_cam_Tauren,CAMERA_FIELD_FARZ,10000.0,0.0)
call CameraSetupSetDestPosition(gg_cam_Tauren,14037.8,-1623.9,0.0)
set gg_cam_Reset=CreateCameraSetup()
call CameraSetupSetField(gg_cam_Reset,CAMERA_FIELD_ZOFFSET,0.0,0.0)
call CameraSetupSetField(gg_cam_Reset,CAMERA_FIELD_ROTATION,90.0,0.0)
call CameraSetupSetField(gg_cam_Reset,CAMERA_FIELD_ANGLE_OF_ATTACK,304.0,0.0)
call CameraSetupSetField(gg_cam_Reset,CAMERA_FIELD_TARGET_DISTANCE,5000.0,0.0)
call CameraSetupSetField(gg_cam_Reset,CAMERA_FIELD_ROLL,0.0,0.0)
call CameraSetupSetField(gg_cam_Reset,CAMERA_FIELD_FIELD_OF_VIEW,70.0,0.0)
call CameraSetupSetField(gg_cam_Reset,CAMERA_FIELD_FARZ,10000.0,0.0)
call CameraSetupSetDestPosition(gg_cam_Reset,13516.8,-1228.8,0.0)
set gg_cam_BB=CreateCameraSetup()
call CameraSetupSetField(gg_cam_BB,CAMERA_FIELD_ZOFFSET,0.0,0.0)
call CameraSetupSetField(gg_cam_BB,CAMERA_FIELD_ROTATION,90.0,0.0)
call CameraSetupSetField(gg_cam_BB,CAMERA_FIELD_ANGLE_OF_ATTACK,350.0,0.0)
call CameraSetupSetField(gg_cam_BB,CAMERA_FIELD_TARGET_DISTANCE,5000.0,0.0)
call CameraSetupSetField(gg_cam_BB,CAMERA_FIELD_ROLL,0.0,0.0)
call CameraSetupSetField(gg_cam_BB,CAMERA_FIELD_FIELD_OF_VIEW,55.0,0.0)
call CameraSetupSetField(gg_cam_BB,CAMERA_FIELD_FARZ,10000.0,0.0)
call CameraSetupSetDestPosition(gg_cam_BB,26645.0,-26002.6,0.0)
set gg_cam_izayoiT=CreateCameraSetup()
call CameraSetupSetField(gg_cam_izayoiT,CAMERA_FIELD_ZOFFSET,0.0,0.0)
call CameraSetupSetField(gg_cam_izayoiT,CAMERA_FIELD_ROTATION,90.0,0.0)
call CameraSetupSetField(gg_cam_izayoiT,CAMERA_FIELD_ANGLE_OF_ATTACK,270.0,0.0)
call CameraSetupSetField(gg_cam_izayoiT,CAMERA_FIELD_TARGET_DISTANCE,6000.0,0.0)
call CameraSetupSetField(gg_cam_izayoiT,CAMERA_FIELD_ROLL,0.0,0.0)
call CameraSetupSetField(gg_cam_izayoiT,CAMERA_FIELD_FIELD_OF_VIEW,102.0,0.0)
call CameraSetupSetField(gg_cam_izayoiT,CAMERA_FIELD_FARZ,10000.0,0.0)
call CameraSetupSetDestPosition(gg_cam_izayoiT,-5606.4,-3666.5,0.0)
endfunction
function EXExecuteScript2 takes string l__str,integer i,string str2 returns string
return EXExecuteScript("(require'jass.slk')."+l__str+"["+I2S(i)+"]."+str2)
endfunction
function GivenGold takes integer gold,integer p,unit u returns nothing
local integer goldP
local real temp2
local integer tempI
if LoadBoolean(System,p,$73E805F)and GetRandomReal(0,100)<=(Luck[p]/4)then
set temp2=R2I(Luck[p]/0.5)
set temp2=temp2*0.05
set gold=R2I(gold*(1.1+temp2))
endif
set goldP=R2I(I2R(gold)*Gold[p])
if LoadBoolean(udg_Hash,p,$E1F0F073)then
if not LoadBoolean(udg_Hash,p,$A2D0D70C)then
set temp2=6
else
set temp2=3
endif
if GetRandomReal(1,100)<=temp2 then
set goldP=0
set tempI=LoadInteger(udg_Hash,p,$C3870946)+1
if tempI==25 then
if LoadBoolean(udg_Hash,p,$B43205FF)then
call UnitAddAbility(Charcter[p],'A03G')
call SionJoon()
else
call SetPlayerName(Player(8),"|cff00008b요리가미 시온 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"나도 좋아서 가난하게 사는게 아닌데~")
endif
call SaveBoolean(udg_Hash,p,$A2D0D70C,true)
call SaveInteger(udg_Hash,p,$C3870946,tempI)
elseif tempI<=24 then
call SaveInteger(udg_Hash,p,$C3870946,tempI)
call StatUP(p,0.01,"피증")
endif
endif
endif
call SetPlayerState(Player(p-1),ConvertPlayerState(1),GetPlayerState(Player(p-1),ConvertPlayerState(1))+goldP)
if goldP>=1 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"+"+I2S(goldP),(8*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,0,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,64,90)
call SetTextTagVisibility(bj_lastCreatedTextTag,false)
if GetLocalPlayer()==Player(p-1)then
call SetTextTagVisibility(bj_lastCreatedTextTag,true)
endif
endif
set u=null
endfunction
function WhatGold takes integer gold,integer p returns boolean
local integer goldP=gold
local real goldR
local real tempR
if LoadBoolean(udg_Hash,p,$A53D8B7A)then
set tempR=LoadReal(udg_Hash,p,$4C6CE7E9)
if tempR>=0.1 then
set goldR=(goldP*tempR)
endif
endif
if LoadBoolean(udg_Hash,p,$4F281D00)and not LoadBoolean(udg_Hash,p,$B43205FF)then
set goldR=(goldP*0.4)
set goldP=goldP+R2I(goldR)
elseif LoadBoolean(udg_Hash,p,$4F281D00)and LoadBoolean(udg_Hash,p,$B43205FF)then
set goldR=(goldP*0.3)
set goldP=goldP+R2I(goldR)
endif
if GetPlayerState(Player(p-1),ConvertPlayerState(1))>=goldP then
return true
else
return false
endif
endfunction
function SteelGold takes integer gold,integer p returns nothing
local integer goldP=gold
local real goldR
local integer tempI
local real tempR
set tempR=LoadReal(udg_Hash,p,$4C6CE7E9)
if tempR>=0.1 then
set goldP=R2I(goldP*tempR)
endif
if LoadBoolean(udg_Hash,p,$4F281D00)and not LoadBoolean(udg_Hash,p,$B43205FF)then
set goldR=(goldP*0.4)
set goldP=goldP+R2I(goldR)
set goldR=(goldR*0.5)
set gold=R2I(goldR)
set tempI=LoadInteger(udg_Hash,p,$31CCCF83)+gold
if tempI>2000 then
set gold=2000-LoadInteger(udg_Hash,p,$31CCCF83)
call StatUP(p,gold,"주스탯")
call SaveBoolean(udg_Hash,p,$B43205FF,true)
if LoadBoolean(udg_Hash,p,$A2D0D70C)then
call UnitAddAbility(Charcter[p],'A03G')
call SionJoon()
else
call SetPlayerName(Player(8),"|cffFF8200요리가미 조온 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"다 써버리지 못할정도로 빼앗아줄게.")
endif
else
call StatUP(p,gold,"주스탯")
call SaveInteger(udg_Hash,p,$31CCCF83,tempI)
endif
elseif LoadBoolean(udg_Hash,p,$4F281D00)and LoadBoolean(udg_Hash,p,$B43205FF)then
set goldR=(goldP*0.3)
set goldP=goldP+R2I(goldR)
endif
if LoadBoolean(udg_Hash,p,$A53D8B7A)then
set tempR=LoadReal(udg_Hash,p,$C2204BA2)+goldP
call SaveReal(udg_Hash,p,$C2204BA2,tempR)
if not LoadBoolean(udg_Hash,p,$DD70A808)and tempR>=500000 then
call SaveBoolean(udg_Hash,p,$DD70A808,true)
call SaveReal(udg_Hash,p,$4C6CE7E9,0.95)
call DisplayTimedTextToPlayer(Player(p-1),0,0,5.00,"|cffFF0000[시스템] : 신용 등급이 올랐다!")
endif
if not LoadBoolean(udg_Hash,p,$999B730F)and tempR>=1500000 then
call SaveBoolean(udg_Hash,p,$999B730F,true)
call SaveReal(udg_Hash,p,$4C6CE7E9,0.85)
call DisplayTimedTextToPlayer(Player(p-1),0,0,5.00,"|cffFF0000[시스템] : 신용 등급이 올랐다!")
endif
if not LoadBoolean(udg_Hash,p,$DEBAC3B3)and tempR>=4000000 then
call SaveBoolean(udg_Hash,p,$DEBAC3B3,true)
call SaveReal(udg_Hash,p,$4C6CE7E9,0.70)
call DisplayTimedTextToPlayer(Player(p-1),0,0,5.00,"|cffFF0000[시스템] : 신용 등급이 올랐다!")
endif
endif
call SetPlayerState(Player(p-1),ConvertPlayerState(1),GetPlayerState(Player(p-1),ConvertPlayerState(1))-goldP)
endfunction
function GivenExp takes integer exp,integer p returns nothing
local integer expP
set expP=R2I(I2R(exp)*Exp[p])
call AddHeroXP(Charcter[p],expP,true)
endfunction
function FirstReset takes nothing returns nothing
call DisplayTimedTextToForce(GetPlayersAll(),15,"1번 플레이어가 난이도를 선택중입니다.")
call DialogDisplayBJ(true,udg_Dialog,Player(0))
endfunction
function ASE takes player pl returns nothing
local integer p=GetPlayerId(pl)+1
local unit dummy
call RemoveUnit(ArtRerollUnit[p])
set ArtRerollUnit[p]=null
call RemoveUnit(ArtGiveup[p])
set ArtGiveup[p]=null
call SetPlayerAbilityAvailable(pl,ArtSkillCode1[p],false)
call SetPlayerAbilityAvailable(pl,ArtSkillCode2[p],false)
call SetPlayerAbilityAvailable(pl,ArtSkillCode3[p],false)
call SetPlayerAbilityAvailable(pl,ArtSkillCode4[p],false)
set Art1slotLV[p]=0
set Art1[p]=0
set Art2slotLV[p]=0
set Art2[p]=0
set Art3slotLV[p]=0
set Art3[p]=0
set Art4slotLV[p]=0
set Art4[p]=0
call RemoveUnit(ArtPickProgress[p])
set dummy=CreateUnit(Player(p-1),'sys1',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),bj_UNIT_FACING)
set ArtPickProgress[p]=dummy
set ArtChoiceTicket[p]=ArtChoiceTicket[p]-1
call SetPlayerState(Player(p-1),ConvertPlayerState(2),ArtChoiceTicket[p])
if ArtChoiceTicket[p]<=0 then
call RemoveUnit(ArtChoiceTicketU[p])
set ArtChoiceTicketU[p]=null
endif
set pl=null
set dummy=null
endfunction
function StartFunction takes nothing returns nothing
if(udg_Hashtable==null)then
set udg_Hashtable=InitHashtable()
endif
if(udg_Hash==null)then
set udg_Hash=InitHashtable()
endif
endfunction
function PlayerFilterHide takes player p,boolean b returns nothing
if(GetLocalPlayer()==p)then
call DisplayCineFilter(b)
endif
endfunction
function FadeFilterA takes real duration,blendmode bmode,string tex,real red0,real green0,real blue0,real trans0,real red1,real green1,real blue1,real trans1 returns nothing
call SetCineFilterTexture(tex)
call SetCineFilterBlendMode(bmode)
call SetCineFilterTexMapFlags(TEXMAP_FLAG_NONE)
call SetCineFilterStartUV(0,0,1,1)
call SetCineFilterEndUV(0,0,1,1)
call SetCineFilterStartColor(PercentTo255(red0),PercentTo255(green0),PercentTo255(blue0),PercentTo255(100-trans0))
call SetCineFilterEndColor(PercentTo255(red1),PercentTo255(green1),PercentTo255(blue1),PercentTo255(100-trans1))
call SetCineFilterDuration(duration)
call DisplayCineFilter(true)
endfunction
function BetweenLightning1 takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit a=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
local unit b=LoadUnitHandle(udg_Hash,GetHandleId(t),1)
local real Number=LoadReal(udg_Hash,GetHandleId(t),4)
local lightning Bolt=LoadLightningHandle(udg_Hash,GetHandleId(t),3)
local location CastLoc
local location TargetLoc
if(IsUnitDeadBJ(a)==true or IsUnitDeadBJ(b)==true)then
call DestroyLightning(Bolt)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call DestroyTimer(t)
else
if(Number>=LoadReal(udg_Hash,GetHandleId(t),2))then
call DestroyLightning(Bolt)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call DestroyTimer(t)
else
set CastLoc=GetUnitLoc(a)
set TargetLoc=GetUnitLoc(b)
call MoveLightningEx(Bolt,true,GetLocationX(CastLoc),GetLocationY(CastLoc),GetLocationZ(CastLoc)+GetUnitFlyHeight(a),GetLocationX(TargetLoc),GetLocationY(TargetLoc),GetLocationZ(TargetLoc)+GetUnitFlyHeight(b))
call SaveReal(udg_Hash,GetHandleId(t),4,Number+1)
call RemoveLocation(CastLoc)
call RemoveLocation(TargetLoc)
endif
endif
set CastLoc=null
set TargetLoc=null
set t=null
set Bolt=null
set a=null
set b=null
endfunction
function BetweenLightning takes string codeName,unit a,unit b,real c,real d,boolean Color,real e,real f,real g,real h returns lightning
local timer t=CreateTimer()
local location CastLoc=GetUnitLoc(a)
local location TargetLoc=GetUnitLoc(b)
set bj_lastCreatedLightning=AddLightningEx(codeName,true,GetLocationX(CastLoc),GetLocationY(CastLoc),GetLocationZ(CastLoc)+GetUnitFlyHeight(a),GetLocationX(TargetLoc),GetLocationY(TargetLoc),GetLocationZ(TargetLoc)+GetUnitFlyHeight(b))
if(Color==true)then
call SetLightningColor(bj_lastCreatedLightning,e,f,g,h)
endif
call RemoveLocation(CastLoc)
call RemoveLocation(TargetLoc)
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,a)
call SaveUnitHandle(udg_Hash,GetHandleId(t),1,b)
call SaveReal(udg_Hash,GetHandleId(t),2,c/d)
call SaveLightningHandle(udg_Hash,GetHandleId(t),3,bj_lastCreatedLightning)
call TimerStart(t,d,true,function BetweenLightning1)
set CastLoc=null
set TargetLoc=null
set t=null
return bj_lastCreatedLightning
endfunction
function CreateLightning takes string codeName,unit a,unit b,real c,real d,boolean Color,real e,real f,real g,real h returns lightning
local location CastLoc=GetUnitLoc(a)
local location TargetLoc=GetUnitLoc(b)
set bj_lastCreatedLightning=AddLightningEx(codeName,true,GetLocationX(CastLoc),GetLocationY(CastLoc),GetLocationZ(CastLoc)+c,GetLocationX(TargetLoc),GetLocationY(TargetLoc),GetLocationZ(TargetLoc)+d)
if(Color==true)then
call SetLightningColor(bj_lastCreatedLightning,e,f,g,h)
endif
call RemoveLocation(CastLoc)
call RemoveLocation(TargetLoc)
set CastLoc=null
set TargetLoc=null
return bj_lastCreatedLightning
endfunction
function FilterFadeinOut1 takes nothing returns nothing
local timer t=GetExpiredTimer()
local player p=LoadPlayerHandle(udg_Hashtable,GetHandleId(t),$A59BB4C6)
local real time=LoadReal(udg_Hashtable,GetHandleId(t),$6B54C545)
local string String=LoadStr(udg_Hashtable,GetHandleId(t),$ED96B976)
if(GetLocalPlayer()==p)then
call CinematicFilterGenericBJ(time,BLEND_MODE_BLEND,String,100,100,100,0,100,100,100,100)
endif
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set p=null
endfunction
function FilterFadeinOut takes player a,real b,string c returns nothing
local timer t=CreateTimer()
call SavePlayerHandle(udg_Hashtable,GetHandleId(t),$A59BB4C6,a)
call SaveReal(udg_Hashtable,GetHandleId(t),$6B54C545,b/2)
call SaveStr(udg_Hashtable,GetHandleId(t),$ED96B976,c)
if(GetLocalPlayer()==a)then
call CinematicFilterGenericBJ(b/2,BLEND_MODE_BLEND,c,100,100,100,100,100,100,100,0)
endif
call TimerStart(t,b/2,false,function FilterFadeinOut1)
set t=null
endfunction
function compress1 takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit expand=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$ED5EA1E7)
local real BaseSize=LoadReal(udg_Hashtable,GetHandleId(t),$B54F5BCB)
local real MaxSize=LoadReal(udg_Hashtable,GetHandleId(t),$8EBEB15B)
local real SumSize=LoadReal(udg_Hashtable,GetHandleId(t),$A1E69E62)
if(BaseSize<=MaxSize)then
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call RemoveUnit(expand)
call PauseTimer(t)
call DestroyTimer(t)
else
set BaseSize=BaseSize-SumSize
call SetUnitScalePercent(expand,BaseSize,BaseSize,BaseSize)
call SaveReal(udg_Hashtable,GetHandleId(t),$B54F5BCB,BaseSize)
endif
set expand=null
set t=null
endfunction
function compress takes unit a,real b,real c,real d,real e returns nothing
local timer t=CreateTimer()
local real allowed_Time=(b-c)/(e/d)
if(c>=b)then
else
set b=b-allowed_Time
call SetUnitScalePercent(a,b,b,b)
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$ED5EA1E7,a)
call SaveReal(udg_Hashtable,GetHandleId(t),$B54F5BCB,b)
call SaveReal(udg_Hashtable,GetHandleId(t),$A1E69E62,allowed_Time)
call SaveReal(udg_Hashtable,GetHandleId(t),$8EBEB15B,c)
call TimerStart(t,d,true,function compress1)
endif
set t=null
endfunction
function s__playerforCall__getindex takes integer this,integer i returns player
return(LoadPlayerHandle(s__TrigVariables_Hashplayer,0,((this))*s__TrigVariables_arraySize+((i))))
endfunction
function s__playerforCall__setindex takes integer this,integer i,player x returns nothing
call s__TrigVariables_Setplayer((this),(i),(x))
endfunction
function s__forceforCall__getindex takes integer this,integer i returns force
return(LoadForceHandle(s__TrigVariables_Hashforce,0,((this))*s__TrigVariables_arraySize+((i))))
endfunction
function s__forceforCall__setindex takes integer this,integer i,force x returns nothing
call s__TrigVariables_SetforceAutoRemove((this),(i),(x))
endfunction
function s__groupforCall__getindex takes integer this,integer i returns group
return(LoadGroupHandle(s__TrigVariables_Hashgroup,0,((this))*s__TrigVariables_arraySize+((i))))
endfunction
function s__groupforCall__setindex takes integer this,integer i,group x returns nothing
call s__TrigVariables_SetgroupAutoRemove((this),(i),(x))
endfunction
function s__itemforCall__getindex takes integer this,integer i returns item
return(LoadItemHandle(s__TrigVariables_Hashitem,0,((this))*s__TrigVariables_arraySize+((i))))
endfunction
function s__itemforCall__setindex takes integer this,integer i,item x returns nothing
call s__TrigVariables_Setitem((this),(i),(x))
endfunction
function s__effectforCall__getindex takes integer this,integer i returns effect
return(LoadEffectHandle(s__TrigVariables_Hasheffect,0,((this))*s__TrigVariables_arraySize+((i))))
endfunction
function s__effectforCall__setindex takes integer this,integer i,effect x returns nothing
call s__TrigVariables_SeteffectAutoRemove((this),(i),(x))
endfunction
function s__timerforCall__getindex takes integer this,integer i returns timer
return(LoadTimerHandle(s__TrigVariables_Hashtimer,0,((this))*s__TrigVariables_arraySize+((i))))
endfunction
function s__timerforCall__setindex takes integer this,integer i,timer x returns nothing
call s__TrigVariables_Settimer((this),(i),(x))
endfunction
function s__unitforCall__getindex takes integer this,integer i returns unit
return(LoadUnitHandle(s__TrigVariables_Hashunit,0,((this))*s__TrigVariables_arraySize+((i))))
endfunction
function s__unitforCall__setindex takes integer this,integer i,unit x returns nothing
call s__TrigVariables_Setunit((this),(i),(x))
endfunction
function s__locationforCall__getindex takes integer this,integer i returns location
return(LoadLocationHandle(s__TrigVariables_Hashlocation,0,((this))*s__TrigVariables_arraySize+((i))))
endfunction
function s__locationforCall__setindex takes integer this,integer i,location x returns nothing
call s__TrigVariables_SetlocationAutoRemove((this),(i),(x))
endfunction
function s__lightningforCall__getindex takes integer this,integer i returns lightning
return(LoadLightningHandle(s__TrigVariables_Hashlightning,0,((this))*s__TrigVariables_arraySize+((i))))
endfunction
function s__lightningforCall__setindex takes integer this,integer i,lightning x returns nothing
call s__TrigVariables_SetlightningAutoRemove((this),(i),(x))
endfunction
function s__integerforCall__getindex takes integer this,integer i returns integer
return(LoadInteger(s__TrigVariables_Hashinteger,0,((this))*s__TrigVariables_arraySize+((i))))
endfunction
function s__integerforCall__setindex takes integer this,integer i,integer x returns nothing
call s__TrigVariables_Setinteger((this),(i),(x))
endfunction
function s__realforCall__getindex takes integer this,integer i returns real
return(LoadReal(s__TrigVariables_Hashreal,0,((this))*s__TrigVariables_arraySize+((i))))
endfunction
function s__realforCall__setindex takes integer this,integer i,real x returns nothing
call s__TrigVariables_Setreal((this),(i),((x)*1.0))
endfunction
function s__booleanforCall__getindex takes integer this,integer i returns boolean
return(LoadBoolean(s__TrigVariables_Hashboolean,0,((this))*s__TrigVariables_arraySize+((i))))
endfunction
function s__booleanforCall__setindex takes integer this,integer i,boolean x returns nothing
call s__TrigVariables_Setboolean((this),(i),(x))
endfunction
function s__texttagforCall__getindex takes integer this,integer i returns texttag
return(LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,((this))*s__TrigVariables_arraySize+((i))))
endfunction
function s__texttagforCall__setindex takes integer this,integer i,texttag x returns nothing
call s__TrigVariables_Settexttag((this),(i),(x))
endfunction
function s__stringforCall__getindex takes integer this,integer i returns string
return(LoadStr(s__TrigVariables_Hashstring,0,((this))*s__TrigVariables_arraySize+((i))))
endfunction
function s__stringforCall__setindex takes integer this,integer i,string x returns nothing
call s__TrigVariables_Setstring((this),(i),(x))
endfunction
function s__FXCURVEDASH_OnStop takes integer this returns nothing
set s__FXCURVEDASH_Caster[this]=null
endfunction
function s__FXCURVEDASH_OnStart takes integer this returns nothing
endfunction
function s__FXCURVEDASH_OnTick takes integer this returns nothing
local real angle=0
local real x=GetUnitX(s__FXCURVEDASH_Caster[this])
local real y=GetUnitY(s__FXCURVEDASH_Caster[this])
call s__Curve_SetBezier3(s__FXCURVEDASH_X1[this],s__FXCURVEDASH_Y1[this],GetUnitFlyHeight(s__FXCURVEDASH_Caster[this]),s__FXCURVEDASH_X2[this],s__FXCURVEDASH_Y2[this],GetUnitFlyHeight(s__FXCURVEDASH_Caster[this]),s__FXCURVEDASH_X3[this],s__FXCURVEDASH_Y3[this],GetUnitFlyHeight(s__FXCURVEDASH_Caster[this]),s__FXCURVEDASH_X4[this],s__FXCURVEDASH_Y4[this],GetUnitFlyHeight(s__FXCURVEDASH_Caster[this]),(s__FXCURVEDASH_CFXelapsed[(this)])/s__FXCURVEDASH_Time[this])
if not IsPointPathableALL((s__Curve_cX),(s__Curve_cY))then
call sc__FXCURVEDASH_Stop(this)
return
endif
set angle=s__Angle_PBP(x,y,(s__Curve_cX),(s__Curve_cY))
call SetUnitFacing(s__FXCURVEDASH_Caster[this],angle)
call EXSetUnitFacing(s__FXCURVEDASH_Caster[this],angle)
if(s__FXCURVEDASH_CFXelapsed[(this)])<s__FXCURVEDASH_Time[this]then
call SetUnitX(s__FXCURVEDASH_Caster[this],(s__Curve_cX))
call SetUnitY(s__FXCURVEDASH_Caster[this],(s__Curve_cY))
else
call SetUnitX(s__FXCURVEDASH_Caster[this],s__FXCURVEDASH_X4[this])
call SetUnitY(s__FXCURVEDASH_Caster[this],s__FXCURVEDASH_Y4[this])
call sc__FXCURVEDASH_Stop(this)
endif
endfunction
function s__FXCURVEDASH_create takes nothing returns integer
return 0
endfunction
function s__FXCURVEDASH_destroy takes integer this returns nothing
endfunction
function s__FXCURVEDASH__get_New takes nothing returns integer
return s__FXCURVEDASH_CFXLast
endfunction
function s__FXCURVEDASH__get_Last takes nothing returns integer
return s__FXCURVEDASH_CFXLast
endfunction
function s__FXCURVEDASH__get_Count takes nothing returns integer
return s__FXCURVEDASH_CFXCount
endfunction
function s__FXCURVEDASH__get_Exists takes integer this returns boolean
return s__FXCURVEDASH_CFXexists[this]
endfunction
function s__FXCURVEDASH__get_Handle takes integer this returns integer
return s__FXCURVEDASH_CFXhandle[this]
endfunction
function s__FXCURVEDASH__get_Elapsed takes integer this returns real
return s__FXCURVEDASH_CFXelapsed[this]
endfunction
function s__FXCURVEDASH__get_Timeout takes integer this returns real
return TimerGetTimeout(s__FXCURVEDASH_CFXtimer[this])
endfunction
function s__FXCURVEDASH__set_Timeout takes integer this,real v returns nothing
set s__FXCURVEDASH_CFXtimeout[this]=v
endfunction
function s__FXCURVEDASH_CFXAtTick takes nothing returns nothing
local integer this=LoadInteger(CFX_TABLE,0,GetHandleId(GetExpiredTimer()))
set s__FXCURVEDASH_CFXelapsed[this]=s__FXCURVEDASH_CFXelapsed[this]+TimerGetTimeout(s__FXCURVEDASH_CFXtimer[this])
set s__FXCURVEDASH_Stage[this]=s__FXCURVEDASH_Stage[this]+1
call s__FXCURVEDASH_OnTick(this)
if not s__FXCURVEDASH_CFXexists[this]then
return
endif
if s__FXCURVEDASH_CFXtimeout[this]<0.0 then
return
endif
call TimerStart(s__FXCURVEDASH_CFXtimer[this],s__FXCURVEDASH_CFXtimeout[this],true,function s__FXCURVEDASH_CFXAtTick)
set s__FXCURVEDASH_CFXtimeout[this]=-1.0
endfunction
function s__FXCURVEDASH_CFXAtDestroy takes nothing returns nothing
local integer this=LoadInteger(CFX_TABLE,0,GetHandleId(GetExpiredTimer()))
call DestroyTimer(s__FXCURVEDASH_CFXtimer[this])
set s__FXCURVEDASH_CFXtimer[this]=null
call RemoveSavedInteger(CFX_TABLE,0,s__FXCURVEDASH_CFXhandle[this])
set s__FXCURVEDASH_CFXhandle[this]=0
set s__FXCURVEDASH_CFXCount=s__FXCURVEDASH_CFXCount-1
call s__FXCURVEDASH_deallocate(this)
endfunction
function s__FXCURVEDASH_Create takes nothing returns integer
local integer this=s__FXCURVEDASH__allocate()
set s__FXCURVEDASH_CFXexists[this]=true
set s__FXCURVEDASH_CFXtimer[this]=CreateTimer()
set s__FXCURVEDASH_CFXhandle[this]=GetHandleId(s__FXCURVEDASH_CFXtimer[this])
call SaveInteger(CFX_TABLE,0,s__FXCURVEDASH_CFXhandle[this],this)
set s__FXCURVEDASH_CFXelapsed[this]=0.0
set s__FXCURVEDASH_CFXtimeout[this]=-1.0
set s__FXCURVEDASH_Stage[this]=0
set s__FXCURVEDASH_CFXCount=s__FXCURVEDASH_CFXCount+1
set s__FXCURVEDASH_CFXLast=this
return this
endfunction
function s__FXCURVEDASH_Stop takes integer this returns nothing
if not s__FXCURVEDASH_CFXexists[this]then
return
endif
set s__FXCURVEDASH_CFXexists[this]=false
set s__FXCURVEDASH_Caster[(this)]=null
call TimerStart(s__FXCURVEDASH_CFXtimer[this],CFX_GCTIMEOUT,false,function s__FXCURVEDASH_CFXAtDestroy)
endfunction
function s__FXCURVEDASH_Start takes integer this returns nothing
if not s__FXCURVEDASH_CFXexists[this]then
return
endif
call s__FXCURVEDASH_OnStart(this)
call TimerStart(s__FXCURVEDASH_CFXtimer[this],0.015625,true,function s__FXCURVEDASH_CFXAtTick)
endfunction
function MaxCameraRange__Init takes nothing returns nothing
local integer offset=JNMemoryGetInteger(JNGetModuleHandle("Storm.dll")+0x58248)
set offset=JNMemoryGetInteger(offset+0x90)
set offset=JNMemoryGetInteger(offset+0x58)
set offset=JNMemoryGetInteger(offset+0x4)
set offset=JNMemoryGetInteger(offset+0x58)
set offset=JNMemoryGetInteger(offset+0x5C)
set offset=JNMemoryGetInteger(offset+0xC)
call JNMemorySetReal(offset+0x84,MaxCameraRange__MAX_TARGET_FAR)
set offset=JNMemoryGetInteger(JNGetModuleHandle("Storm.dll")+0x58248)
set offset=JNMemoryGetInteger(offset+0x90)
set offset=JNMemoryGetInteger(offset+0x58)
set offset=JNMemoryGetInteger(offset+0x4)
set offset=JNMemoryGetInteger(offset+0x58)
set offset=JNMemoryGetInteger(offset+0x5C)
set offset=JNMemoryGetInteger(offset+0x8)
call JNMemorySetReal(offset+0x84,MaxCameraRange__MAX_TARGET_DISTANCE)
endfunction
function LuckySystem takes real WantP,integer p returns boolean
local integer a
local real b
local integer c
local real d
local integer e
local integer o
set a=GetRandomInt(0,1000)
set b=I2R(a)/100.00
set c=a/100
set d=b-I2R(c)
set d=d*100.00
if Luck[p]>=1.01 then
set WantP=WantP*Luck[p]
endif
set o=GetRandomint(0,100)
if inaba[p]==true and d>WantP and o>70 then
set a=GetRandomInt(0,1000)
set b=I2R(a)/100.00
set c=a/100
set d=b-I2R(c)
set d=d*100.00
if d<=WantP then
return true
else
return false
endif
elseif d<=WantP then
return true
else
return false
endif
endfunction
function ArtefactLuck takes real WantP,integer p returns real
local integer a
local real b
local integer c
local real d
local integer e
local integer o
set a=GetRandomInt(0,1000)
set b=I2R(a)/100.00
set c=a/100
set d=b-I2R(c)
set d=d*100.00
set o=GetRandomint(0,100)
if inaba[p]==true and d>WantP and o>70 then
set a=GetRandomInt(0,1000)
set b=I2R(a)/100.00
set c=a/100
set d=b-I2R(c)
set d=d*100.00
return d
else
return d
endif
endfunction
function Infomation__MouseClick takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerUIEventPlayer())+1
local unit u=LoadUnitHandle(udg_Hashtable,pid,$C91F8651)
call PanCameraToTimed(GetUnitX(u),GetUnitY(u),0.01)
set u=null
endfunction
function Infomation__MouseEnter takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerUIEventPlayer())+1
local integer f=0
local integer f2=DzGetTriggerUIEventFrame()
local unit u=LoadUnitHandle(udg_Hashtable,pid,$C91F8651)
local integer temp
set pid=GetPlayerId(GetOwningPlayer(u))+1
if f2==DzFrameFindByName("Info_Button",0)then
set f=DzFrameFindByName("Info_Back",0)
if Boss==u then
call DzFrameSetText(DzFrameFindByName("Info_DesInf",0),"|cffFF9100물리치확 : 0     |cff0078FF마법치확 : 0%\n|cffFF9100물리치피 : 0%     |cff0078FF마법치피 : 0%\n|cffFF9100물리흡혈 : 0%     |cff0078FF마법흡혈 : 0%\n|cff32cd32행운 : 0% (초기값 100%)|r\n|cffFF9E9B체력 증폭율 : 0%\n주스텟 증폭율 : 0%\n|cffDA70D6올스탯 증폭율 : 0%\n|cffD2691E스킬 범위 증가 : 0%\n|cffFF6EED스킬 가속 : 0 (현재 0%)\n|cffFF7F50방어 관통율 : "+I2S(R2I(ArmorPenetrate[12]*100))+"% (최대 70%)|r\n--------------------\n|cffFFEB5A스킬 피해 증폭 : 0%\n모든 피해 증폭율 : 0%\n모든 받는 피해 감소율 :  "+I2S(DamageDec[12])+"% (최대 70%)\n보스 추가 피해 : 0%\n|CFF808080무 속성 증폭량 : 0%\n|cffCD1039화염 속성 증폭량 : 0%\n|cff28A0FF얼음 속성 증폭량 : 0%\n|cff75FFCA바람 속성 증폭량 : 0%\n|cff6A5ACD번개 속성 증폭량 : 0%\n|cff3CB371회복 효율 : 0%\n|cffE1FFE1경험치 배율 : 0%\n|cffFAEB78골드 배율 : 0%\n|cffFF0000체력|r/|cff0078FF마나 |cff8B4F1D코스트 소모량 : |cffFF0000100|r/|cff0078FF100|cff8B4F1D%")
elseif Boss !=u then
call DzFrameSetText(DzFrameFindByName("Info_DesInf",0),"|cffFF9100물리치확 : "+I2S(R2I(ADcriP[pid]))+"%     |cff0078FF마법치확 : "+I2S(R2I(APcriP[pid]))+"%\n|cffFF9100물리치피 : "+I2S(R2I((ADcriD[pid]*100)+0.5)+100)+"%     |cff0078FF마법치피 : "+I2S(R2I((APcriD[pid]*100)+0.5)+100)+"%\n|cffFF9100물리흡혈 : "+I2S(R2I((BloodAbsolAD[pid]*100)+0.5))+"%     |cff0078FF마법흡혈 : "+I2S(R2I((BloodAbsolAP[pid]*100)+0.5))+"%\n|cff32cd32행운 : "+I2S(R2I(Luck[pid]*100))+"% (초기값 100%)|r\n|cffFF9E9B체력 증폭율 : "+I2S(STRP[pid])+"%\n주스텟 증폭율 : "+I2S(MainSTP[pid])+"%\n|cffDA70D6올스탯 증폭율 : "+I2S(ALLP[pid])+"%\n|cffD2691E스킬 범위 증가 : "+I2S(R2I(((Skrange[pid]-1)+0.001)*100))+"%\n|cffFF6EED스킬 가속 : "+I2S(LoadInteger(Hash_Stat,pid,$B7E7C8AD))+" (현재 "+I2S(R2I(((100*150/(150+LoadInteger(Hash_Stat,pid,$B7E7C8AD))-100)*(-1))))+"%)\n|cffFF7F50방어 관통율 : "+I2S(R2I(ArmorPenetrate[pid]*100+0.1))+"% (최대 70%)|r\n--------------------\n|cffFFEB5A스킬 피해 증폭 : "+I2S(R2I(SkillD[pid]*100+0.1))+"%\n모든 피해 증폭율 : "+I2S(R2I(DamageAmp[pid]*100+0.1))+"%\n모든 받는 피해 감소율 :  "+I2S(DamageDec[pid])+"% (최대 70%)\n보스 추가 피해 : "+I2S(R2I(BOOSD[pid]*100+0.1))+"%\n|CFF808080무 속성 증폭량 : "+I2S(R2I(NONE[pid]*100+0.1))+"%\n|cffCD1039화염 속성 증폭량 : "+I2S(R2I(FIRED[pid]*100+0.1))+"%\n|cff28A0FF얼음 속성 증폭량 : "+I2S(R2I(ICED[pid]*100+0.1))+"%\n|cff75FFCA바람 속성 증폭량 : "+I2S(R2I(WINDD[pid]*100+0.1))+"%\n|cff6A5ACD번개 속성 증폭량 : "+I2S(R2I(ThunD[pid]*100+0.1))+"%\n|cff3CB371회복 효율 : "+I2S(R2I(HealEF[pid]*100+0.1))+"%\n|cffE1FFE1경험치 배율 : "+I2S(R2I(Exp[pid]*100+0.1))+"%\n|cffFAEB78골드 배율 : "+I2S(R2I(Gold[pid]*100+0.1))+"%\n|cffFF0000체력|r/|cff0078FF마나 |cff8B4F1D코스트 소모량 : |cffFF0000"+I2S(R2I(CostH[pid]*100+0.1))+"|r/|cff0078FF"+I2S(R2I(CostM[pid]*100+0.1))+"|cff8B4F1D%")
endif
call DzFrameShow(f,true)
elseif f2==DzFrameFindByName("HPMPinfo_Button",0)then
set f=DzFrameFindByName("HPMPinfo_Back",0)
call DzFrameShow(f,true)
if GetUnitTypeId(u)=='h000' then
call DzFrameSetText(DzFrameFindByName("HPMPinfo_DesInf",0),"최대체력 : "+I2S(R2I(GetUnitState(u,UNIT_STATE_MAX_LIFE)))+"\n체력 재생율 : "+I2S(R2I(LoadReal(Hash_Stat,GetHandleId(u),$7FAFA384)))+"\n최대마나 : "+I2S(R2I(GetUnitState(u,UNIT_STATE_MAX_MANA)))+"")
elseif Boss==u then
call DzFrameSetText(DzFrameFindByName("HPMPinfo_DesInf",0),"최대체력 : "+I2S(R2I(GetUnitState(u,UNIT_STATE_MAX_LIFE)))+"\n체력 재생율 : "+I2S(R2I((I2R(GetHeroStr(u,true))*0.015)*LoadReal(Hash_Stat,12,$7FAFA384)))+"")
elseif Boss !=u then
call DzFrameSetText(DzFrameFindByName("HPMPinfo_DesInf",0),"최대체력 : "+I2S(R2I(GetUnitState(u,UNIT_STATE_MAX_LIFE)))+"\n체력 재생율 : "+I2S(R2I((I2R(GetHeroStr(u,true))*0.02)*LoadReal(Hash_Stat,pid,$7FAFA384)))+"\n최대마나 : "+I2S(R2I(GetUnitState(u,UNIT_STATE_MAX_MANA)))+"\n마나 재생율 : "+R2S((LoadReal(Hash_Stat,pid,$1144FCF9))*LoadReal(Hash_Stat,pid,$A62A5B82))+"\n레벨업시 얻는 최대마나 : "+I2S(R2I(LoadReal(udg_Hashtable,pid,$8483D54D)))+"\n레벨업시 마나재생율 : "+R2S(LoadReal(udg_Hashtable,pid,$43C91172))+"")
endif
elseif f2==DzFrameFindByName("EXP_Button",0)then
set f=DzFrameFindByName("EXP_Back",0)
call DzFrameShow(f,true)
elseif f2==DzFrameFindByName("AA_Button",0)then
set f=DzFrameFindByName("AA_Back",0)
set temp=R2I(GetUnitState(u,ConvertUnitState(0x12)))
call DzFrameSetText(DzFrameFindByName("AA_DesInf2",0),"내 공격력 정보 :\n공격력 : "+I2S(temp)+" + "+I2S(R2I(GetUnitState(u,ConvertUnitState(0x13))))+"\n공격력 증폭율 : "+I2S(NormalP[pid])+" %\n공격속도 : "+I2S(R2I(GetUnitState(u,ConvertUnitState(0x51))*100))+"%\n공격 사거리 : "+I2S(R2I(GetUnitState(u,ConvertUnitState(0x16))))+"\n공격 간격 : "+R2S(GetUnitState(u,ConvertUnitState(0x25)))+"\n레벨당 공격력 증가율 : "+I2S(ADup[pid])+"")
call DzFrameShow(f,true)
elseif f2==DzFrameFindByName("BB_Button",0)then
set f=DzFrameFindByName("BB_Back",0)
if u==Charcter[pid]then
set temp=LoadInteger(Hash_Stat,pid,$ED314123)
set temp=temp+LoadInteger(Hash_Stat,pid,$4309A2D3)
call DzFrameSetText(DzFrameFindByName("BB_DesInf2",0),"내 방어력 정보 :\n일반 방어력 : "+I2S(R2I(LoadReal(Hash_Stat,pid,$92D803F1)))+"\n방어력 증폭율 : "+I2S(temp)+"\n방어율 : "+I2S((R2I(((100*400/(400+GetUnitState(u,ConvertUnitState(0x20)))-100)*(-1)))))+"% \n이동속도 : "+I2S(R2I(GetUnitMoveSpeed(u)))+"\n레벨당 방어력 : "+R2S(LoadReal(udg_Hashtable,pid,$836F3EE3))+"")
elseif u !=Charcter[pid]then
call DzFrameSetText(DzFrameFindByName("BB_DesInf2",0),"내 방어력 정보 :\n일반 방어력 : "+I2S(R2I(GetUnitState(u,ConvertUnitState(0x20))))+"\n방어력 증폭율 : 0\n방어율 : "+I2S((R2I(((100*400/(400+GetUnitState(u,ConvertUnitState(0x20)))-100)*(-1)))))+"% \n이동속도 : "+I2S(R2I(GetUnitMoveSpeed(u)))+"\n레벨당 방어력 : 0")
endif
call DzFrameShow(f,true)
elseif f2==DzFrameFindByName("Stat_Mini_Button",20)then
set f=DzFrameFindByName("STR_MiniIconNameBack",20)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOM,f2,JN_FRAMEPOINT_TOP,0,0.001)
call DzFrameSetPoint(DzFrameFindByName("STR_MiniIconNameText",20),JN_FRAMEPOINT_BOTTOM,f2,JN_FRAMEPOINT_TOP,0,0.01)
call DzFrameSetText(DzFrameFindByName("STR_MiniIconNameText",20),"체력\n스탯당 최대 체력 10 증가\n레벨업당 스탯 증가량 : "+I2S(STRup[pid])+"\n스탯 : "+I2S(GetHeroStr(u,false))+" ("+I2S(STRP[pid])+")%")
elseif f2==DzFrameFindByName("Stat_Mini_Button",21)then
set f=DzFrameFindByName("AGI_MiniIconNameBack",21)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOM,f2,JN_FRAMEPOINT_TOP,0,0.001)
set temp=LoadInteger(Hash_Stat,pid,$C46B0D8B)
set temp=temp+LoadInteger(Hash_Stat,pid,$5FFC130D)
set temp=temp+LoadInteger(Hash_Stat,pid,$753B4F2F)
if CharcterStat[pid]then
set temp=temp+LoadInteger(Hash_Stat,pid,$9298D98F)
call DzFrameSetPoint(DzFrameFindByName("AGI_MiniIconNameText",21),JN_FRAMEPOINT_BOTTOM,f2,JN_FRAMEPOINT_TOP,0,0.01)
call DzFrameSetText(DzFrameFindByName("AGI_MiniIconNameText",21),"민첩\n스탯당 일반 공격력 1 증가\n레벨업당 스탯 증가량 : "+I2S(AGIup[pid])+"\n스탯 : "+I2S(GetHeroAgi(u,false))+" ("+I2S(temp)+")%")
else
call DzFrameSetPoint(DzFrameFindByName("AGI_MiniIconNameText",21),JN_FRAMEPOINT_BOTTOM,f2,JN_FRAMEPOINT_TOP,0,0.015)
call DzFrameSetText(DzFrameFindByName("AGI_MiniIconNameText",21),"민첩\n레벨업당 스탯 증가량 : "+I2S(AGIup[pid])+"\n스탯 : "+I2S(GetHeroAgi(u,false))+" ("+I2S(temp)+")%")
endif
elseif f2==DzFrameFindByName("Stat_Mini_Button",22)then
set f=DzFrameFindByName("INT_MiniIconNameBack",22)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOM,f2,JN_FRAMEPOINT_TOP,0,0.001)
set temp=LoadInteger(Hash_Stat,pid,$5B2587EB)
set temp=temp+LoadInteger(Hash_Stat,pid,$422E7865)
set temp=temp+LoadInteger(Hash_Stat,pid,$753B4F2F)
if CharcterStat[pid]then
call DzFrameSetPoint(DzFrameFindByName("INT_MiniIconNameText",22),JN_FRAMEPOINT_BOTTOM,f2,JN_FRAMEPOINT_TOP,0,0.015)
call DzFrameSetText(DzFrameFindByName("INT_MiniIconNameText",22),"지능\n레벨업당 스탯 증가량 : "+I2S(INTup[pid])+"\n스탯 : "+I2S(GetHeroInt(u,false))+" ("+I2S(temp)+")%")
else
set temp=temp+LoadInteger(Hash_Stat,pid,$9298D98F)
call DzFrameSetPoint(DzFrameFindByName("INT_MiniIconNameText",22),JN_FRAMEPOINT_BOTTOM,f2,JN_FRAMEPOINT_TOP,0,0.01)
call DzFrameSetText(DzFrameFindByName("INT_MiniIconNameText",22),"지능\n스탯당 일반 공격력 1 증가\n레벨업당 스탯 증가량 : "+I2S(INTup[pid])+"\n스탯 : "+I2S(GetHeroInt(u,false))+" ("+I2S(temp)+")%")
endif
elseif f2==DzFrameFindByName("Stat_Mini_Button",1)then
set f=DzFrameFindByName("Stat_Mini_Back",1)
call DzFrameShow(f,true)
elseif f2==DzFrameFindByName("Stat_Mini_Button",2)then
set f=DzFrameFindByName("Stat_Mini_Back",2)
call DzFrameShow(f,true)
elseif f2==DzFrameFindByName("Stat_Mini_Button",3)then
set f=DzFrameFindByName("Stat_Mini_Back",3)
call DzFrameShow(f,true)
elseif f2==DzFrameFindByName("Stat_Mini_Button",4)then
set f=DzFrameFindByName("Stat_Mini_Back",4)
call DzFrameShow(f,true)
elseif f2==DzFrameFindByName("Stat_Mini_Button",5)then
set f=DzFrameFindByName("Stat_Mini_Back",5)
call DzFrameShow(f,true)
elseif f2==DzFrameFindByName("Stat_Mini_Button",6)then
set f=DzFrameFindByName("Stat_Mini_Back",6)
call DzFrameShow(f,true)
elseif f2==DzFrameFindByName("Stat_Mini_Button",7)then
set f=DzFrameFindByName("Stat_Mini_Back",7)
call DzFrameShow(f,true)
endif
set u=null
endfunction
function Infomation__MouseLeave takes nothing returns nothing
local integer i
local integer f=0
local integer f2=DzGetTriggerUIEventFrame()
if f2==DzFrameFindByName("Info_Button",0)then
set f=DzFrameFindByName("Info_Back",0)
call DzFrameShow(f,false)
elseif f2==DzFrameFindByName("HPMPinfo_Button",0)then
set f=DzFrameFindByName("HPMPinfo_Back",0)
call DzFrameShow(f,false)
elseif f2==DzFrameFindByName("EXP_Button",0)then
set f=DzFrameFindByName("EXP_Back",0)
call DzFrameShow(f,false)
elseif f2==DzFrameFindByName("AA_Button",0)then
set f=DzFrameFindByName("AA_Back",0)
call DzFrameShow(f,false)
elseif f2==DzFrameFindByName("BB_Button",0)then
set f=DzFrameFindByName("BB_Back",0)
call DzFrameShow(f,false)
elseif f2==DzFrameFindByName("Stat_Mini_Button",20)then
set f=DzFrameFindByName("STR_MiniIconNameBack",20)
call DzFrameShow(f,false)
elseif f2==DzFrameFindByName("Stat_Mini_Button",21)then
set f=DzFrameFindByName("AGI_MiniIconNameBack",21)
call DzFrameShow(f,false)
elseif f2==DzFrameFindByName("Stat_Mini_Button",22)then
set f=DzFrameFindByName("INT_MiniIconNameBack",22)
call DzFrameShow(f,false)
elseif f2==DzFrameFindByName("Stat_Mini_Button",1)then
set f=DzFrameFindByName("Stat_Mini_Back",1)
call DzFrameShow(f,false)
elseif f2==DzFrameFindByName("Stat_Mini_Button",2)then
set f=DzFrameFindByName("Stat_Mini_Back",2)
call DzFrameShow(f,false)
elseif f2==DzFrameFindByName("Stat_Mini_Button",3)then
set f=DzFrameFindByName("Stat_Mini_Back",3)
call DzFrameShow(f,false)
elseif f2==DzFrameFindByName("Stat_Mini_Button",4)then
set f=DzFrameFindByName("Stat_Mini_Back",4)
call DzFrameShow(f,false)
elseif f2==DzFrameFindByName("Stat_Mini_Button",5)then
set f=DzFrameFindByName("Stat_Mini_Back",5)
call DzFrameShow(f,false)
elseif f2==DzFrameFindByName("Stat_Mini_Button",6)then
set f=DzFrameFindByName("Stat_Mini_Back",6)
call DzFrameShow(f,false)
elseif f2==DzFrameFindByName("Stat_Mini_Button",7)then
set f=DzFrameFindByName("Stat_Mini_Back",7)
call DzFrameShow(f,false)
endif
endfunction
function Infomation__DelayedInit takes nothing returns nothing
local integer UI=DzGetGameUI()
local integer Main
local integer f
local integer f2
local integer loopA
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Main=DzCreateFrame("Info_Button",UI,0)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.253,0.074)
call DzFrameShow(Main,true)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_ENTER,function Infomation__MouseEnter,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_LEAVE,function Infomation__MouseLeave,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_CONTROL_CLICK,function Infomation__MouseClick,false)
set Main=DzCreateFrame("Info_Back",UI,0)
call DzFrameSetAlpha(Main,200)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.283,0.294)
call DzFrameShow(Main,false)
call DzFrameSetAlpha(DzFrameFindByName("Info_DesInf",0),255)
set f=DzSimpleFrameFindByName("SimpleInfoPanelUnitDetail",0)
call DzFrameClearAllPoints(f)
call DzFrameSetAbsolutePoint(f,JN_FRAMEPOINT_BOTTOMRIGHT,-0.8,0.6)
call DzFrameSetSize(f,0.1,0.1)
set f=JNGetFrameByName("SimpleNameValue",0)
call DzFrameClearAllPoints(f)
call DzFrameSetAbsolutePoint(f,JN_FRAMEPOINT_CENTER,0.403,0.1075)
set Main=DzCreateFrame("HPMPinfo_Button",UI,0)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.255,0.015)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_ENTER,function Infomation__MouseEnter,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_LEAVE,function Infomation__MouseLeave,false)
call DzFrameShow(Main,true)
set Main=DzCreateFrame("HPMPinfo_Back",UI,0)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.255,0.170)
call DzFrameShow(Main,false)
set Main=DzCreateFrame("AA_Button",UI,0)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_ENTER,function Infomation__MouseEnter,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_LEAVE,function Infomation__MouseLeave,false)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.325,0.064)
call DzFrameSetTexture(DzFrameFindByName("AA_Icon",0),"ReplaceableTextures\\CommandButtons\\BTNSteelMelee.blp",0)
call DzFrameSetAbsolutePoint(DzFrameFindByName("AA_Icon",0),JN_FRAMEPOINT_CENTER,0.3335,0.064)
call DzFrameSetAbsolutePoint(DzFrameFindByName("AA_DesInf",0),JN_FRAMEPOINT_CENTER,0.438,0.065)
call DzFrameSetText(DzFrameFindByName("AA_DesInf",0),"|CFFFFCC00일반 공격력 : \n100")
call DzFrameShow(Main,false)
set Main=DzCreateFrame("AA_Back",UI,0)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.330,0.1255)
call DzFrameShow(Main,false)
set Main=DzCreateFrame("BB_Button",UI,0)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_ENTER,function Infomation__MouseEnter,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_LEAVE,function Infomation__MouseLeave,false)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.325,0.032)
call DzFrameSetTexture(DzFrameFindByName("BB_Icon",0),"ReplaceableTextures\\CommandButtons\\BTNHumanArmorUpOne.blp",0)
call DzFrameSetAbsolutePoint(DzFrameFindByName("BB_Icon",0),JN_FRAMEPOINT_CENTER,0.3335,0.032)
call DzFrameSetAbsolutePoint(DzFrameFindByName("BB_DesInf",0),JN_FRAMEPOINT_CENTER,0.438,0.035)
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n20")
call DzFrameShow(Main,false)
set Main=DzCreateFrame("BB_Back",UI,0)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.330,0.08)
call DzFrameShow(Main,false)
set Main=DzCreateFrame("Stat_Mini_Button",UI,20)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_ENTER,function Infomation__MouseEnter,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_LEAVE,function Infomation__MouseLeave,false)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.435,0.07)
call DzFrameSetTexture(DzFrameFindByName("Stat_Mini_Icon",20),"war3mapImported\\BTNsystem_STR.blp",0)
call DzFrameSetAbsolutePoint(DzFrameFindByName("Stat_Mini_Icon",20),JN_FRAMEPOINT_CENTER,0.435,0.07)
call DzCreateFrame("STR_MiniIconNameBack",Main,20)
call DzCreateFrame("Stat_Mini_DesInf0",UI,0)
call DzFrameSetAbsolutePoint(DzFrameFindByName("Stat_Mini_DesInf0",0),JN_FRAMEPOINT_CENTER,0.530,0.071)
call DzFrameShow(Main,false)
set Main=DzCreateFrame("Stat_Mini_Button",UI,21)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_ENTER,function Infomation__MouseEnter,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_LEAVE,function Infomation__MouseLeave,false)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.435,0.05)
call DzFrameSetTexture(DzFrameFindByName("Stat_Mini_Icon",21),"war3mapImported\\BTNsystem_AGI.blp",0)
call DzFrameSetAbsolutePoint(DzFrameFindByName("Stat_Mini_Icon",21),JN_FRAMEPOINT_CENTER,0.435,0.05)
call DzCreateFrame("AGI_MiniIconNameBack",Main,21)
call DzCreateFrame("Stat_Mini_DesInf0",UI,1)
call DzFrameSetAbsolutePoint(DzFrameFindByName("Stat_Mini_DesInf0",1),JN_FRAMEPOINT_CENTER,0.530,0.051)
call DzFrameShow(Main,false)
set Main=DzCreateFrame("Stat_Mini_Button",UI,22)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_ENTER,function Infomation__MouseEnter,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_LEAVE,function Infomation__MouseLeave,false)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.435,0.03)
call DzFrameSetTexture(DzFrameFindByName("Stat_Mini_Icon",22),"war3mapImported\\BTNsystem_INT.blp",0)
call DzFrameSetAbsolutePoint(DzFrameFindByName("Stat_Mini_Icon",22),JN_FRAMEPOINT_CENTER,0.435,0.03)
call DzCreateFrame("INT_MiniIconNameBack",Main,22)
call DzCreateFrame("Stat_Mini_DesInf0",UI,2)
call DzFrameSetAbsolutePoint(DzFrameFindByName("Stat_Mini_DesInf0",2),JN_FRAMEPOINT_CENTER,0.530,0.03)
call DzFrameShow(Main,false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_DesInf0",0),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_DesInf0",1),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_DesInf0",2),false)
set loopA=0
loop
exitwhen loopA==7
set loopA=loopA+1
set Main=DzCreateFrame("Stat_Mini_Button",UI,loopA)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_ENTER,function Infomation__MouseEnter,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_LEAVE,function Infomation__MouseLeave,false)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.37+(loopA*0.015),0.01)
call DzFrameSetAbsolutePoint(DzFrameFindByName("Stat_Mini_Icon",loopA),JN_FRAMEPOINT_CENTER,0.37+(loopA*0.015),0.01)
call DzFrameSetTexture(DzFrameFindByName("Stat_Mini_Icon",loopA),"UI\\Widgets\\Console\\Human\\infocard-heroattributes-int.blp",0)
call DzCreateFrame("Stat_Mini_Back",Main,loopA)
call DzFrameSetAbsolutePoint(DzFrameFindByName("Stat_Mini_Back",loopA),JN_FRAMEPOINT_CENTER,0.37+(loopA*0.015),0.055)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Back",loopA),false)
call DzFrameShow(Main,false)
set f=DzCreateFrame("InVe_MiniIconCooldown",Main,loopA)
call DzFrameSetModel(f,"UI\\Feedback\\Cooldown\\UI-Cooldown-Indicator.mdx",0,0)
call DzFrameSetAnimate(f,0,false)
call DzFrameSetPoint(f,JN_FRAMEPOINT_CENTER,DzFrameFindByName("Stat_Mini_Button",loopA),JN_FRAMEPOINT_CENTER,0,0)
call DzFrameSetPoint(DzFrameFindByName("Stat_Mini_Title",loopA),JN_FRAMEPOINT_TOP,DzFrameFindByName("Stat_Mini_Back",loopA),JN_FRAMEPOINT_TOP,0,-0.002)
call DzFrameSetPoint(DzFrameFindByName("Stat_Mini_DesInf",loopA),JN_FRAMEPOINT_TOP,DzFrameFindByName("Stat_Mini_Back",loopA),JN_FRAMEPOINT_TOP,0.001,-0.013)
call DzFrameSetPoint(DzFrameFindByName("Stat_Mini_TIME",loopA),JN_FRAMEPOINT_BOTTOM,DzFrameFindByName("Stat_Mini_Back",loopA),JN_FRAMEPOINT_BOTTOM,0.001,0.005)
endloop
set Main=DzCreateFrame("Stack_Mini_Icon",UI,0)
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack0.blp",0)
call DzFrameShow(DzFrameFindByName("Stack_Mini_Icon",0),true)
call DzFrameShow(Main,false)
set Main=DzCreateFrame("BossWarningBarImage",UI,0)
call DzFrameSetAbsolutePoint(DzFrameFindByName("BossWarningBarImage",0),JN_FRAMEPOINT_CENTER,0.4,0.472)
call DzFrameShow(DzFrameFindByName("BossWarningBarImage",0),false)
set Main=DzCreateFrame("BossWarningBar",UI,0)
call DzFrameSetAbsolutePoint(DzFrameFindByName("BossWarningBar",0),JN_FRAMEPOINT_CENTER,0.4,0.45)
call DzFrameShow(DzFrameFindByName("BossWarningBar",0),false)
endfunction
function Infomation__OnInit takes nothing returns nothing
local integer i
local trigger trg
call TimerStart(CreateTimer(),0.05,false,function Infomation__DelayedInit)
set trg=null
endfunction
function CharacterToolTip takes integer p returns nothing
if LoadInteger(udg_Hashtable,p,$5EFF7683)==1 then
call ichigoTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==3 then
call MikaTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==4 then
call GutsTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==5 then
call YaeTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==6 then
call ShikiTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==7 then
call AyaTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==8 then
call RyougiTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==9 then
call ArisTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==10 then
call YoumuTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==11 then
call MikuTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==12 then
call MeilingTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==13 then
call KazusaTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==14 then
call ArchTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==15 then
call IzayoiTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==16 then
call EsdsTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==17 then
call ikkiTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==18 then
call KanekiTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==19 then
call ReimuTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==20 then
call NaruTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==21 then
call KaliTT(p)
endif
if LoadInteger(udg_Hashtable,p,$5EFF7683)==22 then
call WakamoTT(p)
endif
endfunction
function IcgoA takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hashtable,GetHandleId(t),$4412B2A1)
local unit u=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$AF75B4A5)
local unit dummy
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real a=LoadReal(udg_Hashtable,GetHandleId(t),$8F71ED95)
local real b=LoadReal(udg_Hashtable,GetHandleId(t),$475AC1C)
local real tempX
local real tempY
call SaveInteger(udg_Hashtable,GetHandleId(t),$4412B2A1,stage+1)
if stage<=9 then
if b<=40 then
set stage=10
else
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),a)
call imagedummy(p,dummy,0.12,2,"walk",Model[p])
call invisible(dummy,40.00,100.00,0.12,0.01)
set tempX=GetUnitX(u)+(((60)*1.0)*Cos(((a)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((60)*1.0)*Sin(((a)*1.0)*bj_DEGTORAD))
if IsPointPathableALL(tempX,tempY)then
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
endif
call SaveReal(udg_Hashtable,GetHandleId(t),$475AC1C,b-60)
endif
endif
if stage>=10 and stage<=19 then
call SaveInteger(udg_Hashtable,GetHandleId(t),$4412B2A1,20)
if GetUnitAbilityLevel(u,'AF00')==2 then
call TimerStart(t,0.5,false,function IcgoA)
elseif Ichigointeger[3]==3 or Ichigointeger[3]==4 then
call TimerStart(t,10,false,function IcgoA)
elseif Ichigointeger[3]==7 or Ichigointeger[3]==8 then
call TimerStart(t,6,false,function IcgoA)
elseif Ichigointeger[3]==9 then
call TimerStart(t,4,false,function IcgoA)
elseif Ichigointeger[3]==5 or Ichigointeger[3]==10 then
call TimerStart(t,2,false,function IcgoA)
endif
elseif stage !=20 then
call TimerStart(t,0.02,false,function IcgoA)
endif
if stage>=20 then
call SaveBoolean(udg_Hashtable,p,$4E03D594,true)
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set dummy=null
endfunction
function Trig_IchigoSkill_Actions takes nothing returns nothing
local timer t
local unit u=GetTriggerUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real a
local real b
set a=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetOrderPointX(),GetOrderPointY())
set b=s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetOrderPointX(),GetOrderPointY())
if GetIssuedOrderIdBJ()==String2OrderIdBJ("attack")and LoadBoolean(udg_Hashtable,p,$4E03D594)and b>=50 then
set t=CreateTimer()
call SaveInteger(udg_Hashtable,GetHandleId(t),$4412B2A1,0)
call SaveReal(udg_Hashtable,GetHandleId(t),$8F71ED95,a)
call SaveReal(udg_Hashtable,GetHandleId(t),$475AC1C,b)
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$AF75B4A5,u)
call SaveBoolean(udg_Hashtable,p,$4E03D594,false)
call TimerStart(t,0.02,false,function IcgoA)
call EFsettingXY(p,"war3mapImported\\@EF_nitu2.mdl",0,GetUnitX(u),GetUnitY(u),1.0,a,1,0,0,0)
endif
set t=null
set u=null
endfunction
function InitTrig_IchigoSkill takes nothing returns nothing
set gg_trg_IchigoSkill=CreateTrigger()
call DisableTrigger(gg_trg_IchigoSkill)
call TriggerAddAction(gg_trg_IchigoSkill,function Trig_IchigoSkill_Actions)
endfunction
function ArisCL takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),1)
local real time=LoadReal(udg_Hash,GetHandleId(u),$7AB01B75)
call SaveReal(udg_Hash,GetHandleId(u),$7AB01B75,time-0.08)
if UnitAlive(dummy)then
call SetUnitX(dummy,GetUnitX(u))
call SetUnitY(dummy,GetUnitY(u))
endif
if time<=0 then
call EnableTrigger(gg_trg_ArisLight)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set dummy=null
endfunction
function Trig_ArisLight_Actions takes nothing returns nothing
local timer t=CreateTimer()
local integer p=GetPlayerId(GetTriggerPlayer())+1
local unit u=Charcter[p]
local unit dummy
call FilterBasic(Player(p-1),1.0,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",20.00,20.00,100.00,30.00,20.00,20.00,100.00,100.00)
call ND(Player(p-1),0.25,25)
call StatChange(p,0.3,"피증",30)
call StatChange(p,15,"피감",30)
call EFsettingU(p,"war3mapImported\\@Aura_790Aris2.mdl",30,u,"origin")
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call imagedummySET(p,dummy,"war3mapImported\\@EF_935.mdl")
call SetUnitScale(dummy,0.5,1,1)
call UnitApplyTimedLife(dummy,'BHwe',30)
call BuffCall(u,'AT18',30,false,false)
call BuffCall(u,'AT20',90,false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_Aris_Light.mp3"),(null),(110),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),1,dummy)
call SaveReal(udg_Hash,GetHandleId(u),$7AB01B75,90)
call TimerStart(t,0.08,true,function ArisCL)
call DisableTrigger(gg_trg_ArisLight)
set t=null
set u=null
set dummy=null
endfunction
function InitTrig_ArisLight takes nothing returns nothing
set gg_trg_ArisLight=CreateTrigger()
call TriggerAddAction(gg_trg_ArisLight,function Trig_ArisLight_Actions)
endfunction
function ArtPectCodeSetting takes integer abn,integer artC,player p returns nothing
local integer a
local integer lv=S2I((EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((artC))+"]."+("oldLevel"))))
local integer tempI
if abn==1 then
set a=ArtSkillCode1[GetPlayerId(p)+1]
set Art1[GetPlayerId(p)+1]=artC
set Art1slotLV[GetPlayerId(p)+1]=saveLV[GetPlayerId(p)+1]
elseif abn==2 then
set a=ArtSkillCode2[GetPlayerId(p)+1]
set Art2[GetPlayerId(p)+1]=artC
set Art2slotLV[GetPlayerId(p)+1]=saveLV[GetPlayerId(p)+1]
elseif abn==3 then
set a=ArtSkillCode3[GetPlayerId(p)+1]
set Art3[GetPlayerId(p)+1]=artC
set Art3slotLV[GetPlayerId(p)+1]=saveLV[GetPlayerId(p)+1]
elseif abn==4 then
set a=ArtSkillCode4[GetPlayerId(p)+1]
set Art4[GetPlayerId(p)+1]=artC
set Art4slotLV[GetPlayerId(p)+1]=saveLV[GetPlayerId(p)+1]
endif
call SetPlayerAbilityAvailable(p,a,true)
if(GetLocalPlayer()==p)then
call ClearSelection()
endif
if artC=='R038' then
set tempI=GetRandomInt(1,100)
if tempI<=15 then
elseif tempI<=16 and tempI<=30 then
call EXSetAbilityString(a,1,ABILITY_DATA_ART,(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S(('N045'))+"]."+("Art"))))
elseif tempI<=31 and tempI<=45 then
call EXSetAbilityString(a,1,ABILITY_DATA_ART,(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S(('N048'))+"]."+("Art"))))
elseif tempI<=46 and tempI<=60 then
call EXSetAbilityString(a,1,ABILITY_DATA_ART,(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S(('N039'))+"]."+("Art"))))
elseif tempI<=61 and tempI<=75 then
call EXSetAbilityString(a,1,ABILITY_DATA_ART,(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S(('N044'))+"]."+("Art"))))
elseif tempI<=76 and tempI<=90 then
call EXSetAbilityString(a,1,ABILITY_DATA_ART,(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S(('N018'))+"]."+("Art"))))
else
call EXSetAbilityString(a,1,ABILITY_DATA_ART,(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S(('N041'))+"]."+("Art"))))
endif
else
call EXSetAbilityString(a,1,ABILITY_DATA_ART,(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((artC))+"]."+("Art"))))
endif
call EXSetAbilityString(a,1,ABILITY_DATA_TIP,(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((artC))+"]."+("Tip"))))
call EXSetAbilityString(a,1,ABILITY_DATA_UBERTIP,GradeName[S2I((EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((artC))+"]."+("Level"))))]+" "+ClassName[lv]+"\n\n|cffffffff"+(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((artC))+"]."+("Ubertip"))))
if(GetLocalPlayer()==p)then
call ClearSelection()
call SelectUnit(ArtPickUnit[GetPlayerId(p)+1],true)
endif
set p=null
endfunction
function item_Pickup takes nothing returns nothing
local item i=GetEnumItem()
local item Invenitem
local integer loopA=0
local unit u=chango[temp_integer]
if GetWidgetLife(i)>=1 then
if GetItemTypeId(i)=='I00N' or GetItemTypeId(i)=='I00F' or GetItemTypeId(i)=='I00O' or GetItemTypeId(i)=='I00P' or GetItemTypeId(i)=='I00Q' or GetItemTypeId(i)=='I00R' or GetItemTypeId(i)=='I00S' or GetItemTypeId(i)=='I00T' or GetItemTypeId(i)=='I00V' or GetItemTypeId(i)=='I00U' or GetItemTypeId(i)=='I00W' then
loop
set Invenitem=UnitItemInSlot(u,loopA)
if GetItemTypeId(Invenitem)!=GetItemTypeId(i)then
set Invenitem=null
endif
exitwhen GetItemTypeId(Invenitem)==GetItemTypeId(i)
set loopA=loopA+1
exitwhen loopA>=6
endloop
if GetItemCharges(Invenitem)>=1 and i !=Invenitem then
set loopA=GetItemCharges(Invenitem)+GetItemCharges(i)
call SetItemPosition(i,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call RemoveItem(i)
call SetItemCharges(Invenitem,loopA)
else
call UnitAddItem(u,i)
endif
else
if GetItemType(i)!=ConvertItemType(3)and GetItemType(i)!=ConvertItemType(1)then
call UnitAddItem(u,i)
endif
endif
endif
set i=null
set Invenitem=null
set u=null
endfunction
function ChangoReset takes unit u,string l__str,player pl returns nothing
local integer p=GetPlayerId(pl)+1
call UnitRemoveAbility(u,'A02E')
call DzSetUnitModel(u,l__str)
call SetUnitScale(u,1,1,1)
call SetPlayerAbilityAvailable(pl,'A02I',false)
call SetPlayerAbilityAvailable(pl,'A02V',false)
call SetPlayerAbilityAvailable(pl,'A04G',false)
set u=null
set pl=null
endfunction
function Trig_GachaUnit_Actions takes nothing returns nothing
local integer a
local integer b
local integer artC
local real tempR
local unit u=GetTriggerUnit()
local unit dummy
local player pl=GetOwningPlayer(u)
local integer p=GetPlayerId(pl)+1
local integer pid=GetPlayerId(pl)
local integer invenslot
local string l__str
local string str2
local boolean bo=false
if GetSpellAbilityId()=='A00A' then
call MoveRectTo(gg_rct_itemSerch,GetSpellTargetX(),GetSpellTargetY())
set temp_integer=p
call EnumItemsInRect(gg_rct_itemSerch,null,function item_Pickup)
call DestroyBoolExpr(null)
endif
if GetSpellAbilityId()=='GC00' then
set a=0
set b=0
loop
exitwhen a>31
if LoadBoolean(Hash,p-1,$FD5E106+a)then
set b=b+1
endif
set a=a+1
endloop
set invenslot=b
call MultiboardSetItemValueBJ2(GetLastCreatedMultiboard(),4,PR[p]+1,I2S(invenslot))
call SaveInteger(Hash,p-1,$E79F32FE,invenslot)
if invenslot>=30 then
call DisplayTimedTextToPlayer(pl,0,0,10.00,"|cffff0000[!] 아티팩트 칸이 가득찼다.")
else
call SaveBoolean(udg_Hash,p,$31DA12A9,true)
set ArtRerollChance[p]=ArtRerollMaxChance[p]
call DisplayTimedTextToPlayer(pl,0,0,10.00,"|cffff0000[!] 	|cffff8c00남은 리롤 횟수 : |cff0000ff"+I2S(ArtRerollChance[p]))
if ArtRerollChance[p]>=1 then
set dummy=CreateUnit(pl,'sys2',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),270)
set ArtRerollUnit[p]=dummy
endif
set dummy=CreateUnit(pl,'sys3',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),270)
set ArtGiveup[p]=dummy
call RemoveUnit(ArtPickProgress[p])
set ArtPickProgress[p]=null
set a=1
loop
exitwhen ArtpickSlot[p]<a
set artC=ArtefactSys2(p)
call ArtPectCodeSetting(a,artC,pl)
set a=a+1
endloop
if Ichigointeger[4]==p and Ichigointeger[3]==6 and ArtChoiceTicket[p]>=2 and not LoadBoolean(udg_Hash,p,$69B3F052)then
call ArtReset(Art1slotLV[p],Art1[p],pl)
set ArtChoiceTicket[p]=ArtChoiceTicket[p]-1
call ArtPectCodeSetting(1,'R008',pl)
set Art1slotLV[p]=0
endif
if Ichigointeger[4]==p and Ichigointeger[3]==7 and not IchigoSET[p]and ArtChoiceTicket[p]>=3 and not LoadBoolean(udg_Hash,p,$69B3F052)then
call ArtReset(Art1slotLV[p],Art1[p],pl)
set ArtChoiceTicket[p]=ArtChoiceTicket[p]-2
call ArtPectCodeSetting(1,'U005',pl)
set Art1slotLV[p]=0
endif
if Ichigointeger[4]==p and Ichigointeger[3]==9 and not IchigoSET[p]and not LoadBoolean(udg_Hash,p,$69B3F052)and IchigoSET[8]and ArtChoiceTicket[p]>=3 then
call ArtReset(Art1slotLV[p],Art1[p],pl)
set ArtChoiceTicket[p]=ArtChoiceTicket[p]-2
call ArtPectCodeSetting(1,'US10',pl)
set Art1slotLV[p]=0
endif
if Ichigointeger[4]==p and not IchigoSET[6]and Ichigointeger[3]==3 and not LoadBoolean(udg_Hash,p,$9F2E9EB4)then
set a=LoadInteger(udg_Hash,p,$801F32C4)+1
call SaveInteger(udg_Hash,p,$801F32C4,a)
if a==10 then
call SaveBoolean(udg_Hash,p,$9F2E9EB4,true)
call ArtiCutR(p,'R006')
call SArtADD('R006',p)
endif
endif
if Ichigointeger[4]==p and LoadBoolean(udg_Hash,p,$AAD35199)and not LoadBoolean(udg_Hash,p,$9F2E9EB4)then
set a=LoadInteger(udg_Hash,p,$801F32C4)+1
call SaveInteger(udg_Hash,p,$801F32C4,a)
if a==15 then
call SaveBoolean(udg_Hash,p,$9F2E9EB4,true)
call ArtiCutU(p,'U006')
call SArtADD('U006',p)
endif
endif
endif
endif
if GetSpellAbilityId()=='GC01' then
call ArtReset(Art1slotLV[p],Art1[p],pl)
call ArtReset(Art2slotLV[p],Art2[p],pl)
call ArtReset(Art3slotLV[p],Art3[p],pl)
call ArtReset(Art4slotLV[p],Art4[p],pl)
if ArtpickSlot[p]==2 then
set Art3slotLV[p]=0
set Art3[p]=0
endif
if ArtpickSlot[p]==3 then
set Art4slotLV[p]=0
set Art4[p]=0
endif
set ArtRerollChance[p]=ArtRerollChance[p]-1
if LoadBoolean(System,p,$D0046BDC)and GetRandomint(0,100)<=16 then
call DisplayTimedTextToPlayer(pl,0,0,10.00,"|cffff0000[!] 	|cffff8c00행운의 주사위가 발동했다!")
set ArtRerollChance[p]=ArtRerollChance[p]+1
endif
call DisplayTimedTextToPlayer(pl,0,0,10.00,"|cffff0000[!] 	|cffff8c00남은 리롤 횟수 : |cff0000ff"+I2S(ArtRerollChance[p]))
if ArtRerollChance[p]<=0 then
call RemoveUnit(ArtRerollUnit[p])
set ArtRerollUnit[p]=null
endif
set a=1
loop
exitwhen ArtpickSlot[p]<a
set artC=ArtefactSys2(p)
call ArtPectCodeSetting(a,artC,pl)
set a=a+1
endloop
endif
if GetSpellAbilityId()=='GC02' then
call ArtReset(Art1slotLV[p],Art1[p],pl)
call ArtReset(Art2slotLV[p],Art2[p],pl)
call ArtReset(Art3slotLV[p],Art3[p],pl)
call ArtReset(Art4slotLV[p],Art4[p],pl)
call SaveBoolean(udg_Hash,p,$31DA12A9,false)
call ASE(pl)
endif
if GetSpellAbilityId()==ArtSkillCode1[p]then
call ArtReset(Art2slotLV[p],Art2[p],pl)
call ArtReset(Art3slotLV[p],Art3[p],pl)
call ArtReset(Art4slotLV[p],Art4[p],pl)
call EXSetAbilityState(EXGetUnitAbility(u,'GC00'),ABILITY_STATE_COOLDOWN,0.5)
call SaveBoolean(udg_Hash,p,$31DA12A9,false)
set temp_integer=Art1[p]
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
call ASE(pl)
endif
if GetSpellAbilityId()==ArtSkillCode2[p]then
call ArtReset(Art1slotLV[p],Art1[p],pl)
call ArtReset(Art3slotLV[p],Art3[p],pl)
call ArtReset(Art4slotLV[p],Art4[p],pl)
call EXSetAbilityState(EXGetUnitAbility(u,'GC00'),ABILITY_STATE_COOLDOWN,0.5)
call SaveBoolean(udg_Hash,p,$31DA12A9,false)
set temp_integer=Art2[p]
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
call ASE(pl)
endif
if GetSpellAbilityId()==ArtSkillCode3[p]then
call ArtReset(Art1slotLV[p],Art1[p],pl)
call ArtReset(Art2slotLV[p],Art2[p],pl)
call ArtReset(Art4slotLV[p],Art4[p],pl)
call EXSetAbilityState(EXGetUnitAbility(u,'GC00'),ABILITY_STATE_COOLDOWN,0.5)
call SaveBoolean(udg_Hash,p,$31DA12A9,false)
set temp_integer=Art3[p]
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
call ASE(pl)
endif
if GetSpellAbilityId()==ArtSkillCode4[p]then
call ArtReset(Art1slotLV[p],Art1[p],pl)
call ArtReset(Art2slotLV[p],Art2[p],pl)
call ArtReset(Art3slotLV[p],Art3[p],pl)
call EXSetAbilityState(EXGetUnitAbility(u,'GC00'),ABILITY_STATE_COOLDOWN,0.5)
call SaveBoolean(udg_Hash,p,$31DA12A9,false)
set temp_integer=Art4[p]
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
call ASE(pl)
endif
if GetSpellAbilityId()==ArtSkillCode1[p]or GetSpellAbilityId()==ArtSkillCode2[p]or GetSpellAbilityId()==ArtSkillCode3[p]or GetSpellAbilityId()==ArtSkillCode4[p]then
if LoadBoolean(System,p,$19E2666D)then
call SaveBoolean(System,p,$19E2666D,false)
call RemoveSavedBoolean(System,p,$19E2666D)
set UniqueDrop[p]=6
endif
if LoadBoolean(System,p,$F4D3AE1B)then
call SaveBoolean(System,p,$F4D3AE1B,false)
call RemoveSavedBoolean(System,p,$F4D3AE1B)
set RareDrop[p]=20
set UniqueDrop[p]=6
endif
if LoadBoolean(System,p,$3EC6ADCD)then
call SaveBoolean(System,p,$3EC6ADCD,false)
call RemoveSavedBoolean(System,p,$3EC6ADCD)
set RareDrop[p]=6
set UniqueDrop[p]=20
set UncarmonDrop[p]=30
endif
if LoadBoolean(udg_Hash,p,$9CE7B80)then
call SaveBoolean(udg_Hash,p,$9CE7B80,false)
call RemoveSavedBoolean(udg_Hash,p,$9CE7B80)
set RareDrop[p]=6
set UniqueDrop[p]=20
set UncarmonDrop[p]=30
endif
endif
if GetSpellAbilityId()=='A01G' then
if LoadInteger(udg_Hash,p,$D4397677)==1 then
if not LoadBoolean(udg_Hash,p,$C32582AF+1)then
call ArtiCutN(p,'N060')
call SArtADD('N060',p)
call RemoveItem(GetItemOfTypeFromUnit(u,'I01R'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 획득한 아티팩트다.")
endif
elseif LoadInteger(udg_Hash,p,$D4397677)==2 then
if not LoadBoolean(udg_Hash,p,$C32582AF+2)then
call ArtiCutN(p,'N059')
call SArtADD('N059',p)
call RemoveItem(GetItemOfTypeFromUnit(u,'I01R'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 획득한 아티팩트다.")
endif
elseif LoadInteger(udg_Hash,p,$D4397677)==3 then
if not LoadBoolean(udg_Hash,p,$C32582AF+3)then
call ArtiCutN(p,'N061')
call SArtADD('N061',p)
call RemoveItem(GetItemOfTypeFromUnit(u,'I01R'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 획득한 아티팩트다.")
endif
elseif LoadInteger(udg_Hash,p,$D4397677)==4 then
if not LoadBoolean(udg_Hash,p,$C32582AF+4)then
call ArtiCutC(p,'C035')
call SArtADD('C035',p)
call RemoveItem(GetItemOfTypeFromUnit(u,'I01R'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 획득한 아티팩트다.")
endif
elseif LoadInteger(udg_Hash,p,$D4397677)==5 then
if not LoadBoolean(udg_Hash,p,$C32582AF+5)then
call ArtiCutC(p,'C036')
call SArtADD('C036',p)
call RemoveItem(GetItemOfTypeFromUnit(u,'I01R'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 획득한 아티팩트다.")
endif
elseif LoadInteger(udg_Hash,p,$D4397677)==6 then
if not LoadBoolean(udg_Hash,p,$C32582AF+6)then
call ArtiCutR(p,'R037')
call SArtADD('R037',p)
call RemoveItem(GetItemOfTypeFromUnit(u,'I01R'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 획득한 아티팩트다.")
endif
elseif LoadInteger(udg_Hash,p,$D4397677)==7 then
if not LoadBoolean(udg_Hash,p,$C32582AF+7)then
call ArtiCutR(p,'R036')
call SArtADD('R036',p)
call RemoveItem(GetItemOfTypeFromUnit(u,'I01R'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 획득한 아티팩트다.")
endif
endif
endif
if GetSpellAbilityId()=='A01T' then
call DialogDisplay(pl,udg_CustomDialog[5],true)
endif
if GetSpellAbilityId()=='A01U' then
set b=0
set a=0
loop
exitwhen a>=6
if UnitItemInSlot(Charcter[p],a)==null then
exitwhen true
elseif UnitItemInSlot(Charcter[p],a)!=null and a==5 then
set b=1
endif
set a=a+1
endloop
if b==0 then
call UnitAddItem(Charcter[p],GetSpellTargetItem())
endif
endif
if GetSpellAbilityId()=='A00U' then
if WhatGold(100000,p)then
call SteelGold(100000,p)
set tempR=LoadReal(Hash_Stat,p,$A053013A)+0.1
call SaveReal(Hash_Stat,p,$A053013A,tempR)
set Luck[p]=tempR
call RemoveItem(GetItemOfTypeFromUnit(u,'I01C'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700행운 클로버를 흡수했다!")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000사용 조건이 맞지않아 실패했다.")
endif
endif
if GetSpellAbilityId()=='A04C' then
if not LoadBoolean(udg_Hash,p,$31DA12A9)then
call SaveBoolean(udg_Hash,p,$9CE7B80,true)
set RareDrop[p]=0
set UniqueDrop[p]=0
set UncarmonDrop[p]=0
set ArtChoiceTicket[p]=ArtChoiceTicket[p]+1
call SetPlayerState(Player(p-1),ConvertPlayerState(2),ArtChoiceTicket[p])
set a=0
set b=0
loop
exitwhen a>31
if LoadBoolean(Hash,p-1,$FD5E106+a)then
set b=b+1
endif
set a=a+1
endloop
set invenslot=b
call MultiboardSetItemValueBJ2(GetLastCreatedMultiboard(),4,PR[p]+1,I2S(invenslot))
call SaveInteger(Hash,p-1,$E79F32FE,invenslot)
if invenslot>=30 then
call DisplayTimedTextToPlayer(pl,0,0,10.00,"|cffff0000[!] 아티팩트 칸이 가득찼다.")
else
call SaveBoolean(udg_Hash,p,$31DA12A9,true)
set ArtRerollChance[p]=99
call DisplayTimedTextToPlayer(pl,0,0,10.00,"|cffff0000[!] 	|cffff8c00남은 리롤 횟수 : |cff0000ff"+I2S(ArtRerollChance[p]))
if ArtRerollChance[p]>=1 then
set dummy=CreateUnit(pl,'sys2',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),270)
set ArtRerollUnit[p]=dummy
endif
set dummy=CreateUnit(pl,'sys3',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),270)
set ArtGiveup[p]=dummy
call RemoveUnit(ArtPickProgress[p])
set ArtPickProgress[p]=null
set a=1
loop
exitwhen ArtpickSlot[p]<a
set artC=ArtefactSys2(p)
call ArtPectCodeSetting(a,artC,pl)
set a=a+1
endloop
endif
else
call itemgiven(p,u,'I02U')
endif
endif
if GetSpellAbilityId()=='A04D' then
call RemoveItem(GetItemOfTypeFromUnit(u,'A04D'))
set ArtChoiceTicket[p]=ArtChoiceTicket[p]+1
call SetPlayerState(Player(p-1),ConvertPlayerState(2),ArtChoiceTicket[p])
if ArtChoiceTicket[p]>=1 and ArtChoiceTicketU[p]==null then
set dummy=CreateUnit(Player(p-1),'sys4',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),0)
set ArtChoiceTicketU[p]=dummy
endif
set temp_integer='N063'
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
endif
if GetSpellAbilityId()=='A04E' then
call RemoveItem(GetItemOfTypeFromUnit(u,'A04E'))
set ArtChoiceTicket[p]=ArtChoiceTicket[p]+1
call SetPlayerState(Player(p-1),ConvertPlayerState(2),ArtChoiceTicket[p])
if ArtChoiceTicket[p]>=1 and ArtChoiceTicketU[p]==null then
set dummy=CreateUnit(Player(p-1),'sys4',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),0)
set ArtChoiceTicketU[p]=dummy
endif
set temp_integer='C057'
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
endif
if GetSpellAbilityId()=='A04F' then
call RemoveItem(GetItemOfTypeFromUnit(u,'A04F'))
set ArtChoiceTicket[p]=ArtChoiceTicket[p]+1
call SetPlayerState(Player(p-1),ConvertPlayerState(2),ArtChoiceTicket[p])
if ArtChoiceTicket[p]>=1 and ArtChoiceTicketU[p]==null then
set dummy=CreateUnit(Player(p-1),'sys4',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),0)
set ArtChoiceTicketU[p]=dummy
endif
set temp_integer='R060'
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
endif
if GetSpellAbilityId()=='A02E' then
call ChangoReset(u,LoadStr(udg_Hash,$471FBE10+p,1),pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02E'))
endif
if GetSpellAbilityId()=='A02J' then
call ChangoReset(u,"war3mapImported\\@_Ichigo5.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02J'))
endif
if GetSpellAbilityId()=='A02K' then
call ChangoReset(u,"war3mapImported\\@C_ysyz_mh_sym.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02K'))
endif
if GetSpellAbilityId()=='A02L' then
call ChangoReset(u,"war3mapImported\\@C_Guts.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02L'))
endif
if GetSpellAbilityId()=='A02M' then
call ChangoReset(u,"war3mapImported\\@C_Model Yae Miko.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02M'))
endif
if GetSpellAbilityId()=='A02N' then
call ChangoReset(u,"war3mapImported\\@C_qiye.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02N'))
endif
if GetSpellAbilityId()=='A02O' then
call ChangoReset(u,"war3mapImported\\@C_Aya.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02O'))
endif
if GetSpellAbilityId()=='A02P' then
call ChangoReset(u,"war3mapImported\\@C_Hero Ryougi Shiki.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02P'))
endif
if GetSpellAbilityId()=='A02Q' then
call ChangoReset(u,"war3mapImported\\@C_Model_Aris.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02Q'))
endif
if GetSpellAbilityId()=='A02R' then
call ChangoReset(u,"war3mapImported\\@C_yaomeng.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02R'))
endif
if GetSpellAbilityId()=='A02S' then
call ChangoReset(u,"war3mapImported\\@C_Miku_TSUMI.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02S'))
endif
if GetSpellAbilityId()=='A02T' then
call ChangoReset(u,"war3mapImported\\@C_Meiring01.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02T'))
endif
if GetSpellAbilityId()=='A02U' then
call ChangoReset(u,"war3mapImported\\@C_kazusa_Origin.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02U'))
endif
if GetSpellAbilityId()=='A02W' then
call ChangoReset(u,"war3mapImported\\@C_Archetype_Earth11.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02W'))
endif
if GetSpellAbilityId()=='A02X' then
call ChangoReset(u,"war3mapImported\\@C_Izayoi.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02X'))
endif
if GetSpellAbilityId()=='A02Y' then
call ChangoReset(u,"war3mapImported\\@C_Esdeath.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02Y'))
endif
if GetSpellAbilityId()=='A02Z' then
call ChangoReset(u,"war3mapImported\\@C_iKki.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A02Z'))
endif
if GetSpellAbilityId()=='A030' then
call ChangoReset(u,"war3mapImported\\@C_Kaneki_NoMask4.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A030'))
endif
if GetSpellAbilityId()=='A031' then
call ChangoReset(u,"war3mapImported\\@C_hero_reimu.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A031'))
endif
if GetSpellAbilityId()=='A03J' then
call ChangoReset(u,"war3mapImported\\@C_Narmaya.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A03J'))
endif
if GetSpellAbilityId()=='A03K' then
call ChangoReset(u,"war3mapImported\\@C_Cally.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A03K'))
endif
if GetSpellAbilityId()=='A04H' then
call ChangoReset(u,"war3mapImported\\@C_wakamo.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A03H'))
endif
if GetSpellAbilityId()=='A03C' then
call ChangoReset(u,"war3mapImported\\@C_Model Izuna2.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A03C'))
endif
if GetSpellAbilityId()=='A03E' then
call ChangoReset(u,"war3mapImported\\@C_kanade.mdl",pl)
call SaveStr(udg_Hash,p,$73F604A9,I2S('A03E'))
endif
if GetSpellAbilityId()=='A033' then
call SetPlayerAbilityAvailable(pl,'A032',false)
call SaveStr(udg_Hash,p,$72EA03D0,I2S('A033'))
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU1C Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU1C 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU1C 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU1C 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU1C 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU1C 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU1C 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU1C 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU1C 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU1C 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU1C 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU1D Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU1D 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU1D 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU1D 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU1D 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU1D 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU1D 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU1D 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU1D 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU1D 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU1D 9.mdl")
endif
if GetSpellAbilityId()=='A034' then
set fontPlus[p]=50
call SetPlayerAbilityAvailable(pl,'A032',false)
call SaveStr(udg_Hash,p,$72EA03D0,I2S('A034'))
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU1E Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU1E 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU1E 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU1E 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU1E 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU1E 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU1E 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU1E 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU1E 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU1E 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU1E 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU1F Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU1F 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU1F 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU1F 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU1F 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU1F 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU1F 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU1F 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU1F 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU1F 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU1F 9.mdl")
endif
if GetSpellAbilityId()=='A035' then
call SetPlayerAbilityAvailable(pl,'A032',false)
call SaveStr(udg_Hash,p,$72EA03D0,I2S('A035'))
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU1G Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU1G 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU1G 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU1G 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU1G 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU1G 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU1G 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU1G 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU1G 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU1G 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU1G 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU1H Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU1H 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU1H 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU1H 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU1H 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU1H 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU1H 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU1H 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU1H 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU1H 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU1H 9.mdl")
endif
if GetSpellAbilityId()=='A036' then
call SetPlayerAbilityAvailable(pl,'A032',false)
call SaveStr(udg_Hash,p,$72EA03D0,I2S('A036'))
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU1I Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU1I 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU1I 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU1I 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU1I 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU1I 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU1I 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU1I 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU1I 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU1I 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU1I 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU1J Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU1J 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU1J 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU1J 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU1J 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU1J 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU1J 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU1J 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU1J 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU1J 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU1J 9.mdl")
endif
if GetSpellAbilityId()=='A037' then
set fontPlus[p]=62
call SetPlayerAbilityAvailable(pl,'A032',false)
call SaveStr(udg_Hash,p,$72EA03D0,I2S('A037'))
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU2A Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU2A 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU2A 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU2A 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU2A 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU2A 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU2A 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU2A 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU2A 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU2A 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU2A 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU2B Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU2B 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU2B 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU2B 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU2B 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU2B 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU2B 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU2B 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU2B 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU2B 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU2B 9.mdl")
endif
if GetSpellAbilityId()=='A038' then
set fontPlus[p]=65
set fontSize[p]=2
call SetPlayerAbilityAvailable(pl,'A032',false)
call SaveStr(udg_Hash,p,$72EA03D0,I2S('A038'))
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU2C Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU2C 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU2C 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU2C 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU2C 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU2C 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU2C 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU2C 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU2C 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU2C 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU2C 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU2D Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU2D 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU2D 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU2D 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU2D 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU2D 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU2D 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU2D 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU2D 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU2D 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU2D 9.mdl")
endif
if GetSpellAbilityId()=='A039' then
call SaveStr(udg_Hash,p,$72EA03D0,I2S('A039'))
call SetPlayerAbilityAvailable(pl,'A032',false)
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU2E Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU2E 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU2E 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU2E 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU2E 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU2E 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU2E 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU2E 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU2E 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU2E 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU2E 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU2F Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU2F 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU2F 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU2F 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU2F 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU2F 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU2F 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU2F 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU2F 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU2F 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU2F 9.mdl")
endif
if GetSpellAbilityId()=='A03A' then
call SaveStr(udg_Hash,p,$72EA03D0,I2S('A03A'))
call SetPlayerAbilityAvailable(pl,'A032',false)
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU2G Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU2G 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU2G 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU2G 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU2G 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU2G 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU2G 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU2G 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU2G 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU2G 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU2G 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU2H Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU2H 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU2H 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU2H 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU2H 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU2H 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU2H 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU2H 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU2H 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU2H 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU2H 9.mdl")
endif
if GetSpellAbilityId()=='A03B' then
call SaveStr(udg_Hash,p,$72EA03D0,I2S('A03B'))
call SetPlayerAbilityAvailable(pl,'A032',false)
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU2I Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU2I 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU2I 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU2I 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU2I 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU2I 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU2I 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU2I 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU2I 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU2I 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU2I 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU2J Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU2J 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU2J 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU2J 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU2J 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU2J 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU2J 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU2J 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU2J 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU2J 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU2J 9.mdl")
endif
if GetSpellAbilityId()=='A03L' then
call SetPlayerAbilityAvailable(Player(pid),'A03L',false)
set l__str=LoadStr(udg_Hash,p,$73F604A9)
set str2=StashLoad(PLAYER_DATA[pid],"창고서버등록","0")
if l__str !=str2 or l__str !="0" then
call StashSave(PLAYER_DATA[pid],"창고서버등록",l__str)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000창고 - 서버에 등록되었습니다.")
set bo=true
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000창고 - 같은 스킨을 등록하려고했거나 설정되지않아서 서버에 저장하지않았습니다.")
endif
set l__str=LoadStr(udg_Hash,p,$72EA03D0)
set str2=StashLoad(PLAYER_DATA[pid],"창고폰트등록","0")
if l__str !=str2 or l__str !="0" then
call StashSave(PLAYER_DATA[pid],"창고폰트등록",l__str)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000폰트 - 서버에 등록되었습니다.")
set bo=true
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000폰트 - 같은 스킨을 등록하려고했거나 설정되지않아서 서버에 저장하지않았습니다.")
endif
if bo then
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
endif
endif
if GetSpellAbilityId()=='A03N' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Kyaru_1.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A03O' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Kyaru_2.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A03P' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Kyaru_3.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A03Q' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Kyaru_4.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A03R' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Kyaru_5.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A03S' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Kyaru_6.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A03T' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Kyaru_7.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A03U' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Kyaru_8.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A03V' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Kyaru_9.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A03X' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Tamamo_1.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A03Y' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Tamamo_2.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A03Z' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Tamamo_3.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A040' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Tamamo_4.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A041' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Tamamo_5.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A042' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Tamamo_6.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A043' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Tamamo_7.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A044' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Tamamo_8.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A045' then
call ImotesettingU(p,"war3mapImported\\@IM_imoticon_Tamamo_9.mdl",3,Charcter[p],"overhead")
endif
if GetSpellAbilityId()=='A018' then
if EX[p]then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000사용 조건이 맞지않아 실패했다.")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
if GetUnitTypeId(Charcter[p])=='HR01' then
if not LoadBoolean(udg_Hash,0,$AA794A28)then
call ArtiCutN(p,'N019')
call SArtADD('N019',p)
endif
elseif GetUnitTypeId(Charcter[p])=='HR03' then
call ArtiCutU(p,'U009')
call SArtADD('U009',p)
elseif GetUnitTypeId(Charcter[p])=='HR04' then
call ArtiCutU(p,'U030')
call SArtADD('U030',p)
elseif GetUnitTypeId(Charcter[p])=='HR05' then
call ArtiCutU(p,'U042')
call SArtADD('U042',p)
elseif GetUnitTypeId(Charcter[p])=='HR06' then
call ArtiCutU(p,'U027')
call SArtADD('U027',p)
elseif GetUnitTypeId(Charcter[p])=='HR07' then
call ArtiCutU(p,'U026')
call SArtADD('U026',p)
elseif GetUnitTypeId(Charcter[p])=='HR08' then
call ArtiCutU(p,'U028')
call SArtADD('U028',p)
elseif GetUnitTypeId(Charcter[p])=='HR09' then
if not LoadBoolean(udg_Hash,0,$39D38E32)then
call ArtiCutU(p,'U002')
call SArtADD('U002',p)
endif
elseif GetUnitTypeId(Charcter[p])=='HR10' then
call ArtiCutU(p,'U043')
call SArtADD('U043',p)
elseif GetUnitTypeId(Charcter[p])=='HR11' then
call ArtiCutU(p,'U044')
call SArtADD('U044',p)
elseif GetUnitTypeId(Charcter[p])=='HR12' then
call ArtiCutU(p,'U053')
call SArtADD('U053',p)
elseif GetUnitTypeId(Charcter[p])=='HR13' then
call ArtiCutU(p,'U051')
call SArtADD('U051',p)
elseif GetUnitTypeId(Charcter[p])=='HR14' then
call ArtiCutU(p,'U052')
call SArtADD('U052',p)
elseif GetUnitTypeId(Charcter[p])=='HR15' then
call ArtiCutR(p,'R050')
call SArtADD('R050',p)
elseif GetUnitTypeId(Charcter[p])=='HR16' then
call ArtiCutU(p,'U055')
call SArtADD('U055',p)
elseif GetUnitTypeId(Charcter[p])=='HR17' then
call ArtiCutU(p,'U062')
call SArtADD('U062',p)
elseif GetUnitTypeId(Charcter[p])=='HR18' then
call ArtiCutU(p,'U060')
call SArtADD('U060',p)
elseif GetUnitTypeId(Charcter[p])=='HR19' then
call ArtiCutU(p,'U069')
call SArtADD('U069',p)
elseif GetUnitTypeId(Charcter[p])=='HR20' then
call ArtiCutU(p,'U074')
call SArtADD('U074',p)
elseif GetUnitTypeId(Charcter[p])=='HR21' then
call ArtiCutR(p,'R009')
call SArtADD('R009',p)
elseif GetUnitTypeId(Charcter[p])=='HR22' then
call ArtiCutU(p,'U077')
call SArtADD('U077',p)
endif
endif
endif
set u=null
set pl=null
set dummy=null
endfunction
function InitTrig_GachaUnit takes nothing returns nothing
set gg_trg_GachaUnit=CreateTrigger()
call TriggerAddAction(gg_trg_GachaUnit,function Trig_GachaUnit_Actions)
endfunction
function supply takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
local integer id=LoadInteger(udg_Hash,GetHandleId(t),1)
if id==1 then
call SaveBoolean(System,p,$3EC6ADCD,true)
set RareDrop[p]=0
set UniqueDrop[p]=0
set UncarmonDrop[p]=100
endif
if id==2 then
call SaveBoolean(System,p,$F4D3AE1B,true)
call SaveInteger(System,p,$D86AB0AD,20)
set RareDrop[p]=100
set UniqueDrop[p]=0
endif
if id==3 then
call SaveBoolean(System,p,$3EC6ADCD,true)
call SaveBoolean(System,p,$19E2666D,true)
call SaveInteger(System,p,$B449EC64,10)
set UniqueDrop[p]=100
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function ActGet takes unit u,integer p,integer itid returns nothing
local timer t
local player pl=Player(p-1)
local integer loopA
local integer loopB
local integer invenslot
local integer a
local integer temp0
local integer temp
local real temp2
local real temp3
local real tempR
local real tempR2
local item it
set temp0=LoadInteger(Hash_Stat,itid,$FCD961C9)
if temp0 !=0 then
call UnitAddAbility(Charcter[p],'AIl2')
call EXSetAbilityDataReal(EXGetUnitAbility(Charcter[p],'AIl2'),1,108,I2R(temp0*-1))
call IncUnitAbilityLevel(Charcter[p],'AIl2')
call DecUnitAbilityLevel(Charcter[p],'AIl2')
call UnitRemoveAbility(Charcter[p],'AIl2')
endif
set temp0=LoadInteger(Hash_Stat,itid,$4203D9C2)
if temp0 !=0 then
call UnitAddAbility(Charcter[p],'AImz')
call EXSetAbilityDataReal(EXGetUnitAbility(Charcter[p],'AImz'),1,108,I2R(temp0*-1))
call IncUnitAbilityLevel(Charcter[p],'AImz')
call DecUnitAbilityLevel(Charcter[p],'AImz')
call UnitRemoveAbility(Charcter[p],'AImz')
endif
set temp0=LoadInteger(Hash_Stat,itid,$3181F127)
if LoadBoolean(System,p,$BCFC08DC)then
set temp0=R2I(temp0*0.7)
endif
if LoadBoolean(System,p,$261D0D16)then
set temp0=R2I(temp0*0.5)
endif
if temp0 !=0 then
set temp2=GetUnitState(Charcter[p],ConvertUnitState(0x12))
set temp=R2I(temp2)+temp0
call SetUnitState(Charcter[p],ConvertUnitState(0x12),temp)
endif
set temp0=LoadInteger(Hash_Stat,itid,$D8C9D96B)
if temp0 !=0 then
if LoadBoolean(System,p,$261D0D16)then
set temp0=R2I(temp0*0.8)
endif
set temp=LoadInteger(Hash_Stat,p,$D8C9D96B)+temp0
call SaveInteger(Hash_Stat,p,$D8C9D96B,temp)
set NormalP[p]=temp
endif
set temp0=LoadInteger(Hash_Stat,itid,$EFFA2021)
if LoadBoolean(System,p,$BCFC08DC)then
set temp0=R2I(temp0*0.7)
endif
if LoadBoolean(System,p,$261D0D16)then
set temp0=R2I(temp0*0.5)
endif
if temp0 !=0 then
set temp=temp0
if temp0<0 and GetHeroStr(Charcter[p],false)<=temp0*-1 then
set temp0=temp0+(GetHeroStr(Charcter[p],false)-temp0)
endif
call SetHeroStr(Charcter[p],GetHeroStr(Charcter[p],false)+temp0,true)
set temp0=temp
if temp0<0 and GetHeroAgi(Charcter[p],false)<=temp0*-1 then
set temp0=temp0+(GetHeroAgi(Charcter[p],false)-temp0)
endif
call SetHeroAgi(Charcter[p],GetHeroAgi(Charcter[p],false)+temp0,true)
set temp0=temp
if temp0<0 and GetHeroInt(Charcter[p],false)<=temp0*-1 then
set temp0=temp0+(GetHeroInt(Charcter[p],false)-temp0)
endif
call SetHeroInt(Charcter[p],GetHeroInt(Charcter[p],false)+temp0,true)
set temp2=GetUnitState(Charcter[p],ConvertUnitState(0x12))
set temp=R2I(temp2)+temp0
call SetUnitState(Charcter[p],ConvertUnitState(0x12),temp)
endif
set temp0=LoadInteger(Hash_Stat,itid,$753B4F2F)
if temp0 !=0 then
if LoadBoolean(System,p,$261D0D16)then
set temp0=R2I(temp0*0.8)
endif
set temp=LoadInteger(Hash_Stat,p,$753B4F2F)+temp0
call SaveInteger(Hash_Stat,p,$753B4F2F,temp)
set ALLP[p]=temp
endif
set temp0=LoadInteger(Hash_Stat,itid,$D20F099)
if LoadBoolean(System,p,$BCFC08DC)then
set temp0=R2I(temp0*0.7)
endif
if LoadBoolean(System,p,$261D0D16)then
set temp0=R2I(temp0*0.5)
endif
if temp0<0 and GetHeroStr(Charcter[p],false)<=temp0*-1 then
set temp0=temp0+(GetHeroStr(Charcter[p],false)-temp0)
endif
call SetHeroStr(Charcter[p],GetHeroStr(Charcter[p],false)+temp0,true)
set temp0=LoadInteger(Hash_Stat,itid,$B38BEB44)
if temp0 !=0 then
set temp=LoadInteger(Hash_Stat,p,$B38BEB44)+temp0
call SaveInteger(Hash_Stat,p,$B38BEB44,temp)
set STRP[p]=temp
endif
set temp0=LoadInteger(Hash_Stat,itid,$A3A34F6C)
if LoadBoolean(System,p,$BCFC08DC)then
set temp0=R2I(temp0*0.7)
endif
if LoadBoolean(System,p,$261D0D16)then
set temp0=R2I(temp0*0.5)
endif
if temp0<0 and GetHeroAgi(Charcter[p],false)<=temp0*-1 then
set temp0=temp0+(GetHeroAgi(Charcter[p],false)-temp0)
endif
call SetHeroAgi(Charcter[p],GetHeroAgi(Charcter[p],false)+temp0,true)
if CharcterStat[p]==true and temp0 !=0 then
set temp2=GetUnitState(Charcter[p],ConvertUnitState(0x12))
set temp=R2I(temp2)+temp0
call SetUnitState(Charcter[p],ConvertUnitState(0x12),temp)
endif
set temp0=LoadInteger(Hash_Stat,itid,$C46B0D8B)
if temp0 !=0 then
if LoadBoolean(System,p,$261D0D16)then
set temp0=R2I(temp0*0.8)
endif
set temp=LoadInteger(Hash_Stat,p,$C46B0D8B)+temp0
call SaveInteger(Hash_Stat,p,$C46B0D8B,temp)
endif
set temp0=LoadInteger(Hash_Stat,itid,$1D27E6A1)
if LoadBoolean(System,p,$BCFC08DC)then
set temp0=R2I(temp0*0.7)
endif
if LoadBoolean(System,p,$261D0D16)then
set temp0=R2I(temp0*0.5)
endif
if temp0<0 and GetHeroInt(Charcter[p],false)<=temp0*-1 then
set temp0=temp0+(GetHeroInt(Charcter[p],false)-temp0)
endif
call SetHeroInt(Charcter[p],GetHeroInt(Charcter[p],false)+temp0,true)
if CharcterStat[p]==false and temp0 !=0 then
set temp2=GetUnitState(Charcter[p],ConvertUnitState(0x12))
set temp=R2I(temp2)+temp0
call SetUnitState(Charcter[p],ConvertUnitState(0x12),temp)
endif
set temp0=LoadInteger(Hash_Stat,itid,$5B2587EB)
if temp0 !=0 then
if LoadBoolean(System,p,$261D0D16)then
set temp0=R2I(temp0*0.8)
endif
set temp=LoadInteger(Hash_Stat,p,$5B2587EB)
call SaveInteger(Hash_Stat,p,$5B2587EB,temp0+temp)
endif
set temp2=LoadReal(Hash_Stat,itid,$92D803F1)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$92D803F1)+temp2
call SaveReal(Hash_Stat,p,$92D803F1,temp3)
endif
set temp0=LoadInteger(Hash_Stat,itid,$ED314123)
if temp0 !=0 then
set temp=LoadInteger(Hash_Stat,p,$ED314123)
call SaveInteger(Hash_Stat,p,$ED314123,temp0+temp)
endif
set temp0=LoadInteger(Hash_Stat,p,$ED314123)
set temp0=temp0+LoadInteger(Hash_Stat,p,$4309A2D3)
set ArmorP[p]=temp0
set temp2=LoadReal(Hash_Stat,p,$92D803F1)*(I2R(temp0)*0.01)
set temp2=LoadReal(Hash_Stat,p,$92D803F1)+temp2
call SetUnitState(Charcter[p],ConvertUnitState(0x20),temp2)
set temp0=LoadInteger(Hash_Stat,itid,$22601A7A)
if temp0 !=0 then
if LoadBoolean(System,p,$BCFC08DC)then
set temp0=R2I(temp0*0.7)
endif
if LoadBoolean(System,p,$261D0D16)then
set temp0=R2I(temp0*0.5)
endif
set temp2=GetUnitState(Charcter[p],ConvertUnitState(0x12))
set temp3=temp2+I2R(temp0)
call SetUnitState(Charcter[p],ConvertUnitState(0x12),temp3)
if CharcterStat[p]then
call SetHeroAgi(Charcter[p],GetHeroAgi(Charcter[p],false)+temp0,true)
else
call SetHeroInt(Charcter[p],GetHeroInt(Charcter[p],false)+temp0,true)
endif
endif
set temp0=LoadInteger(Hash_Stat,itid,$9298D98F)
if temp0 !=0 then
if LoadBoolean(System,p,$261D0D16)then
set temp0=R2I(temp0*0.8)
endif
set temp=LoadInteger(Hash_Stat,p,$9298D98F)
call SaveInteger(Hash_Stat,p,$9298D98F,temp0+temp)
endif
set temp0=LoadInteger(Hash_Stat,itid,$C18D16A0)
if temp0 !=0 then
set temp=LoadInteger(Hash_Stat,p,$C18D16A0)+temp0
call SaveInteger(Hash_Stat,p,$C18D16A0,temp)
set AttackSpd[p]=temp
endif
set temp0=LoadInteger(Hash_Stat,itid,$924944F9)
if temp0 !=0 then
set temp=LoadInteger(Hash_Stat,p,$924944F9)+temp0
call SaveInteger(Hash_Stat,p,$924944F9,temp)
set MoveSpd[p]=temp
endif
set temp0=LoadInteger(Hash_Stat,itid,$8885555B)
if temp0 !=0 then
set temp=LoadInteger(Hash_Stat,p,$8885555B)+temp0
call SaveInteger(Hash_Stat,p,$8885555B,temp)
set DamageDec[p]=temp
call SetUnitAbilityLevel(Charcter[p],'SY00',DamageDec[p]+51)
endif
set temp2=LoadReal(Hash_Stat,itid,$7FAFA384)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$7FAFA384)+temp2
call SaveReal(Hash_Stat,p,$7FAFA384,temp3)
endif
set temp2=LoadReal(Hash_Stat,itid,$A62A5B82)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$A62A5B82)+temp2
call SaveReal(Hash_Stat,p,$A62A5B82,temp3)
endif
set temp2=LoadReal(Hash_Stat,itid,$34D9AB92)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$34D9AB92)+temp2
call SaveReal(Hash_Stat,p,$34D9AB92,temp3)
set ADcriP[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$540C61C7)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$540C61C7)+temp2
call SaveReal(Hash_Stat,p,$540C61C7,temp3)
set APcriP[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$337F1BA1)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$337F1BA1)+temp2
call SaveReal(Hash_Stat,p,$337F1BA1,temp3)
set ADcriD[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$1486341)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$1486341)+temp2
call SaveReal(Hash_Stat,p,$1486341,temp3)
set APcriD[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$164C40C9)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$164C40C9)+temp2
call SaveReal(Hash_Stat,p,$164C40C9,temp3)
set DamageAmp[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$8EB4E7D9)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$8EB4E7D9)+temp2
call SaveReal(Hash_Stat,p,$8EB4E7D9,temp3)
set BloodAbsolAD[p]=temp3
if CharcterStat[p]then
set temp3=LoadReal(Hash_Stat,p,$84545917)+temp2
call SaveReal(Hash_Stat,p,$84545917,temp3)
endif
endif
set temp2=LoadReal(Hash_Stat,itid,$6DC36456)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$6DC36456)+temp2
call SaveReal(Hash_Stat,p,$6DC36456,temp3)
set BloodAbsolAP[p]=temp3
if not CharcterStat[p]then
set temp3=LoadReal(Hash_Stat,p,$84545917)+temp2
call SaveReal(Hash_Stat,p,$84545917,temp3)
endif
endif
set temp2=LoadReal(Hash_Stat,itid,$45E22B52)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$45E22B52)+temp2
call SaveReal(Hash_Stat,p,$45E22B52,temp3)
set SkillD[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$5C6093F2)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$5C6093F2)+temp2
call SaveReal(Hash_Stat,p,$5C6093F2,temp3)
set FIRED[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$BC3801A9)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$BC3801A9)+temp2
call SaveReal(Hash_Stat,p,$BC3801A9,temp3)
set ICED[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$50B06B2)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$50B06B2)+temp2
call SaveReal(Hash_Stat,p,$50B06B2,temp3)
set WINDD[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$2034A1E3)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$2034A1E3)+temp2
call SaveReal(Hash_Stat,p,$2034A1E3,temp3)
set ThunD[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$5FF1A35F)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$5FF1A35F)+temp2
call SaveReal(Hash_Stat,p,$5FF1A35F,temp3)
set BOOSD[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$2E182EFC)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$2E182EFC)+temp2
call SaveReal(Hash_Stat,p,$2E182EFC,temp3)
set HealEF[p]=temp3
endif
set temp0=LoadInteger(Hash_Stat,itid,$B7E7C8AD)
if temp0 !=0 then
set temp=LoadInteger(Hash_Stat,p,$B7E7C8AD)+temp0
call SaveInteger(Hash_Stat,p,$B7E7C8AD,temp)
set temp=R2I((100*200/(200+temp)))
set ct[p]=temp*0.01
endif
set temp2=LoadReal(Hash_Stat,itid,$62BD2901)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$62BD2901)+temp2
call SaveReal(Hash_Stat,p,$62BD2901,temp3)
set Exp[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$3362B68D)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$3362B68D)+temp2
call SaveReal(Hash_Stat,p,$3362B68D,temp3)
set Gold[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$F3FDA8C9)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$F3FDA8C9)+temp2
call SaveReal(Hash_Stat,p,$F3FDA8C9,temp3)
set ArmorPenetrate[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$10BA18C8)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$10BA18C8)+temp2
call SaveReal(Hash_Stat,p,$10BA18C8,temp3)
set Skrange[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$A7543052)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$A7543052)+temp2
call SaveReal(Hash_Stat,p,$A7543052,temp3)
set CostM[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$9BC8E22B)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$9BC8E22B)+temp2
call SaveReal(Hash_Stat,p,$9BC8E22B,temp3)
set CostH[p]=temp3
endif
set temp2=LoadReal(Hash_Stat,itid,$A053013A)
if temp2 !=0 then
set temp3=LoadReal(Hash_Stat,p,$A053013A)+temp2
call SaveReal(Hash_Stat,p,$A053013A,temp3)
set Luck[p]=temp3
endif
set u=Charcter[p]
if itid=='N002' then
call SaveBoolean(System,p,$1684E464,true)
call SaveInteger(System,p,$6B9459DC,0)
endif
if itid=='N006' then
if not LoadBoolean(udg_Hash,p,$7EA003E)then
if GetUnitTypeId(LoadUnitHandle(udg_Hash,p,$BF53BD32))=='ndm1' then
set temp2=LoadReal(udg_Hash,p,$FF8638AE)
call SaveReal(udg_Hash,p,$FF8638AE,temp2+0.03)
endif
if LoadBoolean(System,p,$F3C2DB66)then
set loopA=LoadInteger(System,p,$5A7CB292)
call SaveInteger(System,p,$5A7CB292,loopA+1)
endif
if N008[p]then
if LoadBoolean(System,p,$261D0D16)then
call StatUP(p,12,"일공")
else
call StatUP(p,25,"일공")
endif
endif
if LoadBoolean(System,p,$FE738A1E)then
set loopA=LoadInteger(Hash_Stat,p,$B38BEB44)+1
call SaveInteger(Hash_Stat,p,$B38BEB44,loopA)
call TimerStart(udg_infoRe[p],0.02,false,null)
endif
if LoadBoolean(System,p,$D4E79325)then
set Range[p]=Range[p]+15
call TimerStart(udg_infoRe[p],0.02,false,null)
endif
if C004[p]then
set C004sec[p]=C004sec[p]+1
endif
if US01[p]then
set US01damage[p]=US01damage[p]+0.02
endif
if LoadBoolean(System,p,$E9917373)then
set Kirie[p]=Kirie[p]+1
endif
if LoadBoolean(udg_Hash,p,$1AE5ABCE)then
call SetPlayerAbilityAvailable(Player(p-1),'AF01',true)
endif
if LoadBoolean(udg_Hash,p,$E9840BCF)then
if LoadBoolean(System,p,$261D0D16)then
set loopA=LoadInteger(Hash_Stat,p,$C46B0D8B)+1
call SaveInteger(Hash_Stat,p,$C46B0D8B,loopA)
set loopA=LoadInteger(Hash_Stat,p,$5B2587EB)+1
call SaveInteger(Hash_Stat,p,$5B2587EB,loopA)
else
set loopA=LoadInteger(Hash_Stat,p,$C46B0D8B)+2
call SaveInteger(Hash_Stat,p,$C46B0D8B,loopA)
set loopA=LoadInteger(Hash_Stat,p,$5B2587EB)+2
call SaveInteger(Hash_Stat,p,$5B2587EB,loopA)
endif
call TimerStart(udg_infoRe[p],0.02,false,null)
endif
if LoadBoolean(udg_Hash,p,$89619C0C)then
set loopA=LoadInteger(Hash_Stat,p,$D8C9D96B)+1
call SaveInteger(Hash_Stat,p,$D8C9D96B,loopA)
endif
if LoadBoolean(System,p,$224E7B1B)then
set loopA=LoadInteger(Hash_Stat,p,$C18D16A0)+5
call SaveInteger(Hash_Stat,p,$C18D16A0,loopA)
endif
if LoadBoolean(System,p,$D8E4D1A5)then
set temp2=LoadReal(System,p,$79444859)+0.02
call SaveReal(System,p,$79444859,temp2)
endif
if LoadBoolean(System,p,$35361B7A)then
set temp2=LoadReal(Hash_Stat,p,$92D803F1)+5
call SaveReal(Hash_Stat,p,$92D803F1,temp2)
endif
else
if GetUnitTypeId(LoadUnitHandle(udg_Hash,p,$BF53BD32))=='ndm1' and LoadInteger(System,p,$8CD7D666)==3 then
call SetPlayerName(Player(8),"|cffFF0000??? |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFF0000안 돼.... 안돼안돼 안돼!!!")
call SaveInteger(System,p,$8CD7D666,4)
call UArtADD('U013',p)
endif
if GetUnitTypeId(LoadUnitHandle(udg_Hash,p,$BF53BD32))=='ndm1' and LoadInteger(System,p,$8CD7D666)==2 then
call SetPlayerName(Player(8),"|cffFF0000??? |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFAFAA0안 돼... 난 못하겠어... 선생님 미안해.. 미안해...")
call SaveInteger(System,p,$8CD7D666,3)
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='N007' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('US05'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
endif
if GetUnitTypeId(LoadUnitHandle(udg_Hash,p,$BF53BD32))=='ndm1' and LoadInteger(System,p,$8CD7D666)==1 then
call SetPlayerName(Player(8),"|cffFF0000??? |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFAFAA0이걸로 선생님을 지키는 수단은 더 이상 없어..")
call SaveInteger(System,p,$8CD7D666,2)
endif
endif
endif
if itid=='N001' then
call SaveBoolean(System,$70739E58+p,1,true)
if LoadBoolean(System,$70739E58+p,1)and LoadBoolean(System,$70739E58+p,2)and not LoadBoolean(System,$70739E58+p,3)and not LoadBoolean(System,$70739E58,4)then
call HF(p)
else
set N001timer[p]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_N001,N001timer[p])
call TimerStart(N001timer[p],8.00,true,null)
endif
endif
if itid=='N003' then
call SaveInteger(System,p,$F63BCD1E,1)
if LoadInteger(System,p,$F63BCD1E)==1 and LoadInteger(System,p,$DA550BF7)==1 and LoadInteger(System,p,$10B8F688)==1 then
call SaveInteger(System,p,$BA86D6C4,1)
endif
endif
if itid=='N004' then
call SaveBoolean(System,$70739E58+p,2,true)
call SaveBoolean(System,p,$F8748BEC,true)
if LoadBoolean(System,$70739E58+p,1)and LoadBoolean(System,$70739E58+p,2)and not LoadBoolean(System,$70739E58+p,3)and not LoadBoolean(System,$70739E58,4)then
call HF(p)
call PauseTimer(N001timer[p])
call DestroyTimer(N001timer[p])
endif
if not UnitAlive(Charcter[p])then
call SaveBoolean(System,p,$2D17DDB,true)
else
set loopA=1
loop
exitwhen loopA>=7
if UnitItemInSlot(Charcter[p],loopA-1)==null then
exitwhen true
elseif UnitItemInSlot(Charcter[p],loopA-1)!=null and loopA==6 then
call RemoveItem(UnitItemInSlot(Charcter[p],loopA-1))
call DisplayTimedTextToPlayer(pl,0,0,10.00,"|cffff8C00당신의 장비가 진흙에 침식되었다!")
endif
set loopA=loopA+1
endloop
set bj_lastCreatedItem=CreateItem('I999',GetUnitX(Charcter[p]),GetUnitY(Charcter[p]))
call UnitAddItem(Charcter[p],bj_lastCreatedItem)
endif
endif
if itid=='N005' then
set growthStone[p]=growthStone[p]+1
call DisplayTimedTextToPlayer(pl,0,0,10.00,"|cffff8C00현재 성장의 돌 갯수 : |cff0000ff"+I2S(growthStone[p]))
endif
if growthStone[p]==5 then
call SaveInteger(NormalArt,p,5,0)
call SetHeroStr(Charcter[p],GetHeroStr(Charcter[p],false)+50,false)
set temp2=GetUnitState(Charcter[p],ConvertUnitState(0x12))+75
call SetUnitState(Charcter[p],ConvertUnitState(0x12),temp2)
if CharcterStat[p]then
call SetHeroAgi(Charcter[p],GetHeroAgi(Charcter[p],false)+75,false)
else
call SetHeroInt(Charcter[p],GetHeroInt(Charcter[p],false)+75,false)
endif
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='N005' then
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzSyncData("RCT",I2S(a))
endif
endif
set a=a+1
endloop
endif
if itid=='N007' then
set bj_lastCreatedUnit=CreateUnit(pl,'ndm1',GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),270)
call SaveUnitHandle(udg_Hash,p,$BF53BD32,bj_lastCreatedUnit)
call SaveReal(udg_Hash,p,$FF8638AE,1)
call TriggerRegisterTimerExpireEvent(gg_trg_dron_move,udg_n007timer[p])
call TimerStart(udg_n007timer[p],1.00,true,null)
set a=LoadInteger(Hash_Stat,p,$19A960C6)+1
call SaveInteger(Hash_Stat,p,$19A960C6,a)
endif
if itid=='N008' then
set N008[p]=true
if C004[p]then
set C004Max[p]=C004Max[p]+3
endif
if LoadBoolean(System,p,$D4E79325)and LoadBoolean(System,p,$FE738A1E)and N008[p]and C004[p]then
call Solver68(p)
endif
endif
if itid=='N009' then
call SaveBoolean(System,p,$FE738A1E,true)
if C004[p]then
set C004Max[p]=C004Max[p]+3
endif
if LoadBoolean(System,p,$D4E79325)and LoadBoolean(System,p,$FE738A1E)and N008[p]and C004[p]then
call Solver68(p)
endif
endif
if itid=='N010' then
set Range[p]=Range[p]+100
call TimerStart(udg_infoRe[p],0.02,false,null)
call SaveBoolean(System,p,$D4E79325,true)
if C004[p]then
set C004Max[p]=C004Max[p]+3
endif
if LoadBoolean(System,p,$D4E79325)and LoadBoolean(System,p,$FE738A1E)and N008[p]and C004[p]then
call Solver68(p)
endif
endif
if itid=='C004' then
set C004[p]=true
set C004Max[p]=12
set C004sec[p]=1
call TriggerRegisterTimerExpireEvent(gg_trg_leader_timer,udg_c004timer[p])
call TimerStart(udg_c004timer[p],1.00,true,null)
if LoadBoolean(System,p,$D4E79325)then
set C004Max[p]=C004Max[p]+3
endif
if LoadBoolean(System,p,$FE738A1E)then
set C004Max[p]=C004Max[p]+3
endif
if N008[p]then
set C004Max[p]=C004Max[p]+3
endif
if LoadBoolean(System,p,$D4E79325)and LoadBoolean(System,p,$FE738A1E)and N008[p]and C004[p]then
call Solver68(p)
endif
endif
if itid=='N011' then
call ShildSet(Charcter[p],Charcter[p],120,GetUnitState(Charcter[p],UNIT_STATE_MAX_LIFE)*0.3+500)
call SaveBoolean(udg_Hash,p,$402AEB67,true)
endif
if itid=='N059' then
set a=LoadInteger(udg_Hash,p,$C84A16EB)
call SaveInteger(udg_Hash,p,$C84A16EB,a+1)
call SaveBoolean(udg_Hash,p,$C32582AF+2,true)
endif
if itid=='N060' then
call SaveBoolean(System,p,$DDE7686D,true)
set a=LoadInteger(udg_Hash,p,$C84A16EB)
call SaveInteger(udg_Hash,p,$C84A16EB,a+1)
call SaveBoolean(udg_Hash,p,$C32582AF+1,true)
endif
if itid=='N061' then
call SaveBoolean(System,p,$313F0640,true)
set a=LoadInteger(udg_Hash,p,$C84A16EB)
call SaveInteger(udg_Hash,p,$C84A16EB,a+1)
call SaveBoolean(udg_Hash,p,$C32582AF+3,true)
endif
if itid=='N063' then
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call SaveInteger(udg_Hash,GetHandleId(t),1,1)
call TimerStart(t,0.02,false,function supply)
set t=null
endif
if itid=='N019' then
call SaveBoolean(udg_Hash,0,$AA794A28,true)
set IchigoSET[p]=true
set Ichigointeger[0]=1
set Ichigointeger[1]=0
set Ichigointeger[2]=0
set Ichigointeger[3]=0
set IchigoString="사신 대행"
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='N019' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='N019' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='N019' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='N019' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(NormalArt,PP[temp],a)
if temp0=='N019' then
call SaveInteger(NormalArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
set Ichigointeger[4]=p
if GetUnitTypeId(Charcter[p])=='HR01' then
call ichigoEX(p)
set EX[p]=true
endif
endif
if itid=='N021' then
set IchigoSET[p]=true
set Ichigointeger[0]=1
set Ichigointeger[1]=0
set Ichigointeger[3]=2
set IchigoString="시해 - 참월"
call ArtThrow('N020',p)
endif
if itid=='C009' then
set IchigoSET[p]=true
set Ichigointeger[0]=1
set Ichigointeger[1]=0
set Ichigointeger[3]=3
set IchigoString="만해 - 천쇄참월"
call ArtThrow('N021',p)
call RArtADD('R006',p)
call SaveBoolean(udg_Hashtable,p,$4E03D594,true)
call EnableTrigger(gg_trg_IchigoSkill)
call TriggerRegisterUnitEvent(gg_trg_IchigoSkill,u,EVENT_UNIT_ISSUED_POINT_ORDER)
endif
if itid=='R006' then
set IchigoSET[6]=true
call SaveInteger(udg_Hash,p,$801F32C4,0)
call SaveBoolean(udg_Hash,p,$9F2E9EB4,false)
if not IchigoSET[p]then
call SArtADD('C010',p)
endif
set Ichigointeger[4]=p
endif
if itid=='C010' then
set IchigoSET[p]=true
set Ichigointeger[0]=1
set Ichigointeger[1]=0
set IchigoString="호로화"
set Ichigointeger[3]=4
call ArtThrow('C009',p)
endif
if itid=='R008' then
set IchigoSET[p]=true
set IchigoSET[7]=true
set Ichigointeger[0]=1
set Ichigointeger[1]=0
set IchigoString="호로의 힘"
set Ichigointeger[3]=7
call SaveBoolean(udg_Hash,p,$69B3F052,true)
call ArtThrow('R907',p)
call Artfect_get('U004',Player(p-1))
call EnableTrigger(gg_trg_IchigoSkill)
endif
if itid=='U005' then
set Ichigointeger[1]=0
set Ichigointeger[3]=8
call SaveBoolean(udg_Hash,p,$69B3F052,true)
call ArtThrow('U004',p)
call StopSound(LastEFVoice,false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_U005_get.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
call SetPlayerName(Player(8),"|cFFFF0000참월 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cFFF06464이 힘을 쓰게된다면 너는 사신의 힘을 전부 잃게된다. 작별이다.. 이치고!")
call UnitAddAbility(Charcter[p],'AF00')
call SetPlayerAbilityAvailable(Player(p-1),'AF00',false)
endif
if itid=='U006' then
set IchigoSET[p]=true
set Ichigointeger[0]=1
set Ichigointeger[1]=0
call SaveBoolean(udg_Hash,p,$69B3F052,true)
set IchigoString="진 참월"
set Ichigointeger[3]=9
call SaveBoolean(udg_Hash,p,$AAD35199,false)
call SaveBoolean(udg_Hash,p,$9F2E9EB4,true)
call EnableTrigger(gg_trg_IchigoSkill)
endif
if itid=='U007' then
call ArtThrow('R006',p)
set IchigoSET[8]=true
call SaveBoolean(System,p,$4C5AB3C1,true)
endif
if itid=='US10' then
call ArtThrow('U006',p)
set Ichigointeger[3]=10
call ichigoMaxHoro(p)
call UnitAddAbility(Charcter[p],'UE00')
call UnitMakeAbilityPermanent(Charcter[p],true,'UE00')
endif
if itid=='N035' then
call SaveInteger(System,p,$46A3A450,0)
call SaveInteger(System,p,$BF172B11,0)
call SaveBoolean(System,p,$CAD3E3B1,true)
set STRup[p]=STRup[p]+5
endif
if itid=='N036' then
call ArtThrow('N035',p)
call SaveInteger(System,p,$46A3A450,1)
call SaveInteger(System,p,$BF172B11,0)
call SaveBoolean(System,p,$CAD3E3B1,true)
set STRup[p]=STRup[p]+5
endif
if itid=='N037' then
call ArtThrow('N036',p)
call SaveInteger(System,p,$46A3A450,2)
call SaveInteger(System,p,$BF172B11,0)
call SaveBoolean(System,p,$CAD3E3B1,true)
call SaveBoolean(System,p,$48C752C6,true)
endif
if itid=='C015' then
call ArtThrow('N037',p)
call SaveInteger(System,p,$46A3A450,3)
call SaveInteger(System,p,$BF172B11,0)
call SaveBoolean(System,p,$CAD3E3B1,true)
set N035timer3[p]=CreateTimer()
call TimerStart(N035timer3[p],15.00,true,null)
call TriggerRegisterTimerExpireEvent(gg_trg_N035heal,N035timer3[p])
endif
if itid=='R014' then
call ArtThrow('C015',p)
call SaveInteger(System,p,$46A3A450,4)
call SaveInteger(System,p,$BF172B11,0)
call SaveBoolean(System,p,$CAD3E3B1,true)
set N035timer2[p]=CreateTimer()
call TimerStart(N035timer2[p],20.00,true,null)
call TriggerRegisterTimerExpireEvent(gg_trg_N035barrior,N035timer2[p])
endif
if itid=='U015' then
call ArtThrow('R014',p)
set STRup[p]=STRup[p]+5
call SaveBoolean(System,p,$567B85B4,true)
set N035timer[p]=CreateTimer()
call TimerStart(N035timer2[p],12.00,true,null)
call TriggerRegisterTimerExpireEvent(gg_trg_N035counter,N035timer[p])
endif
if itid=='N031' then
call SaveReal(udg_Hashtable,p,$DA557887,60)
call SaveInteger(udg_Hashtable,p,$A6A7F4EC,0)
set N031timer[p]=CreateTimer()
call TimerStart(N031timer[p],1,true,null)
call TriggerRegisterTimerExpireEvent(gg_trg_N031,N031timer[p])
set N031timer3[p]=CreateTimer()
call TimerStart(N031timer3[p],6,true,null)
call TriggerRegisterTimerExpireEvent(gg_trg_N031stat,N031timer3[p])
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='N031' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='N031' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='N031' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='N031' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(NormalArt,PP[temp],a)
if temp0=='N031' then
call SaveInteger(NormalArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
endif
if itid=='N038' then
set poisonPlus[p]=poisonPlus[p]+0.12
endif
if itid=='N062' then
set a=LoadInteger(System,p,$185EBEBA)+1
call SaveInteger(System,p,$185EBEBA,a)
call DisplayTimedTextToPlayer(pl,0,0,10.00,"|cffff8C00현재 이야기 보따리의 갯수 : |cff0000ff"+I2S(a))
if a==5 then
set invenClick[p]=false
set temp0=0
loop
exitwhen temp0>31
if LoadInteger(Hash,p-1,$DA437F80+temp0)=='R043' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(temp0)+"/"+I2S('U047'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp0=temp0+1
endloop
call SaveBoolean(System,p,$12CF1142,true)
set U047timer[p]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_U047,U047timer[p])
set a=0
loop
set a=a+1
if LoadInteger(NormalArt,p,a)=='N062' then
call SaveInteger(NormalArt,p,a,0)
endif
exitwhen a==NormalMax
endloop
endif
endif
if itid=='C012' then
call SaveBoolean(System,p,$F3C2DB66,true)
call SaveBoolean(System,p,$E1F35AF7,false)
call SaveInteger(System,p,$5A7CB292,12)
if LoadBoolean(udg_Hash,p,$7EA003E)and not LoadBoolean(udg_Hash,p,$72822878)then
set invenClick[p]=false
set temp0=0
loop
exitwhen temp0>31
if LoadInteger(Hash,p-1,$DA437F80+temp0)=='C012' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(temp0)+"/"+I2S('C052'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp0=temp0+1
endloop
if LoadBoolean(System,p,$F3C2DB66)and LoadBoolean(System,p,$224E7B1B)and LoadBoolean(System,p,$D8E4D1A5)and LoadBoolean(System,p,$35361B7A)then
call SaveInteger(System,p,$8CD7D666,1)
endif
endif
endif
if itid=='C001' then
call SaveBoolean(System,p,$5842DED4,true)
call SaveInteger(System,p,$6E915502,0)
endif
if itid=='C002' then
call SaveBoolean(System,p,$B76CE2A6,true)
call SaveInteger(System,p,$29CCA62F,0)
endif
if itid=='C003' then
call SaveBoolean(System,p,$D21EF0EE,true)
call SaveInteger(System,p,$C5F5E739,0)
endif
if itid=='R001' then
call SaveBoolean(System,p,$B9956ACE,true)
call SaveInteger(System,p,$15991CE1,0)
endif
if itid=='C005' then
set C005timer[p]=CreateTimer()
call HevensFeelC(p)
call TriggerRegisterTimerExpireEvent(gg_trg_C005,C005timer[p])
call SaveBoolean(System,p,$70739E58,true)
call SaveInteger(System,p,$86FA2B12,1)
call ArtThrow('N001',p)
endif
if itid=='C006' then
call SaveInteger(System,p,$DA550BF7,1)
if LoadInteger(System,p,$F63BCD1E)==1 and LoadInteger(System,p,$DA550BF7)==1 and LoadInteger(System,p,$10B8F688)==1 then
call SaveInteger(System,p,$BA86D6C4,1)
endif
endif
if itid=='C016' then
set loopA=0
loop
exitwhen loopA>Playint
set loopA=loopA+1
call StatChange(PP[loopA],1,"경험치",90)
call StatChange(PP[loopA],0.25,"골드",90)
call StatChange(PP[loopA],300,"이속",90)
call BuffCall(Charcter[PP[loopA]],'AT01',90,false,false)
call SaveBoolean(System,PP[loopA],$1F67FD0C,true)
endloop
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_C016.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call ArtThrowTimer('C016',p,90)
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='C016' or Art1[PP[temp]]=='C017' or Art1[PP[temp]]=='C018' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='C016' or Art2[PP[temp]]=='C017' or Art2[PP[temp]]=='C018' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='C016' or Art3[PP[temp]]=='C017' or Art3[PP[temp]]=='C018' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='C016' or Art4[PP[temp]]=='C017' or Art4[PP[temp]]=='C018' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(UncarmonArt,PP[temp],a)
if temp0=='C016' then
call SaveInteger(UncarmonArt,PP[temp],a,0)
endif
if temp0=='C017' then
call SaveInteger(UncarmonArt,PP[temp],a,0)
endif
if temp0=='C018' then
call SaveInteger(UncarmonArt,PP[temp],a,0)
endif
endloop
endloop
endif
if itid=='C017' then
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='C016' or Art1[PP[temp]]=='C017' or Art1[PP[temp]]=='C018' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='C016' or Art2[PP[temp]]=='C017' or Art2[PP[temp]]=='C018' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='C016' or Art3[PP[temp]]=='C017' or Art3[PP[temp]]=='C018' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='C016' or Art4[PP[temp]]=='C017' or Art4[PP[temp]]=='C018' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(UncarmonArt,PP[temp],a)
if temp0=='C016' then
call SaveInteger(UncarmonArt,PP[temp],a,0)
endif
if temp0=='C017' then
call SaveInteger(UncarmonArt,PP[temp],a,0)
endif
if temp0=='C018' then
call SaveInteger(UncarmonArt,PP[temp],a,0)
endif
endloop
endloop
call UnitAddAbility(Charcter[p],'AF04')
call SetPlayerAbilityAvailable(Player(p-1),'AF04',false)
endif
if itid=='C018' then
set loopA=0
loop
exitwhen loopA>Playint
set loopA=loopA+1
call StatChange(PP[loopA],10,"리롤",56)
call BuffCall(Charcter[PP[loopA]],'AT02',56,false,false)
set ArtChoiceTicket[PP[loopA]]=ArtChoiceTicket[PP[loopA]]+2
call SetPlayerStateBJ(Player(PP[loopA]-1),PLAYER_STATE_RESOURCE_LUMBER,ArtChoiceTicket[PP[loopA]])
if ArtChoiceTicket[PP[loopA]]>=1 and ArtChoiceTicketU[PP[loopA]]==null then
set bj_lastCreatedUnit=CreateUnit(Player(PP[loopA]-1),'sys4',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),0)
set ArtChoiceTicketU[PP[loopA]]=bj_lastCreatedUnit
endif
endloop
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_C018.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call ArtThrowTimer('C018',p,56)
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='C016' or Art1[PP[temp]]=='C017' or Art1[PP[temp]]=='C018' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='C016' or Art2[PP[temp]]=='C017' or Art2[PP[temp]]=='C018' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='C016' or Art3[PP[temp]]=='C017' or Art3[PP[temp]]=='C018' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='C016' or Art4[PP[temp]]=='C017' or Art4[PP[temp]]=='C018' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(UncarmonArt,PP[temp],a)
if temp0=='C016' then
call SaveInteger(UncarmonArt,PP[temp],a,0)
endif
if temp0=='C017' then
call SaveInteger(UncarmonArt,PP[temp],a,0)
endif
if temp0=='C018' then
call SaveInteger(UncarmonArt,PP[temp],a,0)
endif
endloop
endloop
endif
if itid=='C019' then
set DashCool[p]=DashCool[p]-0.5
call SaveInteger(udg_Hash,p,$EADDF8B6,1)
endif
if itid=='C021' then
set bj_lastCreatedUnit=CreateUnit(pl,'cdm1',GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),270)
call SaveUnitHandle(udg_Hash,p,$995E4AAA,bj_lastCreatedUnit)
call SaveInteger(udg_Hash,p,$F5CC8461,0)
call SaveInteger(udg_Hash,p,$8DAD119A,0)
call TriggerRegisterTimerExpireEvent(gg_trg_dron_move,udg_n007timer[p])
call TimerStart(udg_n007timer[p],1.00,true,null)
set a=LoadInteger(Hash_Stat,p,$19A960C6)+1
call SaveInteger(Hash_Stat,p,$19A960C6,a)
endif
if itid=='R004' then
call SaveInteger(System,p,$86FA2B12,2)
endif
if itid=='R009' then
call SaveBoolean(System,p,$D163EB76,true)
call SaveInteger(System,p,$FC009EBA,10)
if GetUnitTypeId(Charcter[p])=='HR21' then
call KaliEX(p)
set EX[p]=true
endif
endif
if itid=='U008' then
set RedMist[p]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_RedMist,RedMist[p])
call TimerStart(RedMist[p],15,true,null)
call UnitAddAbility(Charcter[p],'AF10')
call SetPlayerAbilityAvailable(Player(p-1),'AF10',false)
endif
if itid=='U003' then
call HevensFeelU(p)
call SaveInteger(System,p,$86FA2B12,3)
endif
if itid=='C008' then
set a=0
loop
exitwhen a==100
set a=a+1
if LoadInteger(RareArt,p,a)=='R005' then
call SaveInteger(RareArt,p,a,0)
exitwhen true
endif
endloop
call SaveBoolean(System,$2805C2AF,1,true)
set a=0
loop
exitwhen a>=Playint
set a=a+1
call StatUP(PP[a],10,"치확")
call StatUP(PP[a],0.1,"치피")
endloop
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='C008' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='C008' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='C008' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='C008' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(UncarmonArt,PP[temp],a)
if temp0=='C008' then
call SaveInteger(UncarmonArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
endif
if itid=='C007' then
if bam==false then
call StatUP(a,250,"주스탯")
endif
call SaveBoolean(System,p,$F1BF676D,true)
endif
if itid=='C024' then
call SaveBoolean(System,p,$8E3ACD3,true)
set a=LoadInteger(Hash_Stat,p,$19A960C6)+1
call SaveInteger(Hash_Stat,p,$19A960C6,a)
endif
if itid=='C023' then
call SaveBoolean(System,p,$BCFC08DC,true)
if LoadBoolean(udg_Hash,p,$D884A12A)then
call SaveBoolean(System,p,$BCFC08DC,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 악마와의 계약|cffffa500이 해주됬다!")
endif
if ArtpickSlot[p]<=3 then
set ArtpickSlot[p]=ArtpickSlot[p]+1
endif
call SetHeroStr(Charcter[p],GetHeroStr(Charcter[p],false)-R2I(GetHeroStr(Charcter[p],false)*0.3),true)
call SetHeroAgi(Charcter[p],GetHeroAgi(Charcter[p],false)-R2I(GetHeroAgi(Charcter[p],false)*0.3),true)
call SetHeroInt(Charcter[p],GetHeroInt(Charcter[p],false)-R2I(GetHeroInt(Charcter[p],false)*0.3),true)
set tempR=GetUnitState(Charcter[p],ConvertUnitState(0x12))-(GetUnitState(Charcter[p],ConvertUnitState(0x12))*0.3)
call SetUnitState(Charcter[p],ConvertUnitState(0x12),tempR)
set STRup[p]=R2I(STRup[p]*0.7)
set AGIup[p]=R2I(AGIup[p]*0.7)
set INTup[p]=R2I(INTup[p]*0.7)
set ADup[p]=R2I(ADup[p]*0.7)
endif
if itid=='C025' then
call SaveBoolean(System,p,$261D0D16,true)
endif
if itid=='C026' then
set STRup[p]=STRup[p]-8
call SaveBoolean(System,p,$C175B12C,true)
endif
if itid=='C027' then
call SaveBoolean(System,p,$534A17A0,true)
call SaveBoolean(System,p,$5C08BDDA,true)
endif
if itid=='C028' then
call SaveBoolean(System,p,$643D1E47,true)
call SaveInteger(System,p,$5C87BBE5,1)
endif
if itid=='C030' then
call SaveBoolean(System,p,$1BD50DC0,true)
endif
if itid=='C032' then
call SaveBoolean(System,p,$16431182,true)
set C0321timer[p]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_C032,C0321timer[p])
set C0322timer[p]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_C032,C0322timer[p])
endif
if itid=='C033' then
set poisonPlus[p]=poisonPlus[p]+0.15
endif
if itid=='C034' then
call SaveBoolean(System,p,$D0046BDC,true)
endif
if itid=='C035' then
set a=LoadInteger(udg_Hash,p,$C84A16EB)
call SaveInteger(udg_Hash,p,$C84A16EB,a+1)
call SaveBoolean(udg_Hash,p,$C32582AF+4,true)
endif
if itid=='C036' then
set a=LoadInteger(udg_Hash,p,$C84A16EB)
call SaveInteger(udg_Hash,p,$C84A16EB,a+1)
call SaveBoolean(udg_Hash,p,$C32582AF+5,true)
endif
if itid=='C037' then
if CharcterStat[p]then
set AGIup[p]=AGIup[p]+5
else
set INTup[p]=INTup[p]+5
endif
call SaveBoolean(System,p,$4A8F0CA3,true)
endif
if itid=='C038' then
call SaveBoolean(System,p,$B9553A1F,true)
endif
if itid=='C039' then
call SaveBoolean(System,p,$CFE83757,true)
endif
if itid=='C041' then
set temp2=LoadReal(udg_Hashtable,p,$8483D54D)+15
call SaveReal(udg_Hashtable,p,$8483D54D,temp2)
set temp2=LoadReal(udg_Hashtable,p,$43C91172)+0.1
call SaveReal(udg_Hashtable,p,$43C91172,temp2)
endif
if itid=='C043' then
set a=LoadInteger(udg_Hash,p,$254000DE)+1
call SaveInteger(udg_Hash,p,$254000DE,a)
if GetLocalPlayer()==Player(p-1)then
if a==5 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack5.blp",0)
elseif a==4 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack4.blp",0)
elseif a==3 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack3.blp",0)
elseif a==2 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack2.blp",0)
elseif a==1 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack1.blp",0)
elseif a==6 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack6.blp",0)
endif
endif
set a=LoadInteger(udg_Hash,p,$D9CFDBAB)+1
call SaveInteger(udg_Hash,p,$D9CFDBAB,a)
set a=LoadInteger(udg_Hash,p,$6748D1B7)+5
call SaveInteger(udg_Hash,p,$6748D1B7,a)
endif
if itid=='C044' then
set a=LoadInteger(udg_Hash,p,$382CD415)-3
call SaveInteger(udg_Hash,p,$382CD415,a)
call SaveBoolean(System,p,$B3A22BFE,true)
endif
if itid=='C045' then
set a=LoadInteger(udg_Hash,p,$382CD415)-2
call SaveInteger(udg_Hash,p,$382CD415,a)
call SaveBoolean(System,p,$FB1F5E57,true)
endif
if itid=='C046' then
set a=LoadInteger(udg_Hash,p,$6748D1B7)+5
call SaveInteger(udg_Hash,p,$6748D1B7,a)
set a=LoadInteger(udg_Hash,p,$382CD415)-3
call SaveInteger(udg_Hash,p,$382CD415,a)
endif
if itid=='R052' then
call SaveBoolean(System,p,$AC5AA7BB,true)
set a=LoadInteger(udg_Hash,p,$382CD415)-4
call SaveInteger(udg_Hash,p,$382CD415,a)
endif
if itid=='C047' then
set loopA=LoadInteger(udg_Hashtable,p,$FAFE5485)
set loopB=1
if loopA<LoadInteger(udg_Hashtable,p,$457BCFC0)then
set loopA=LoadInteger(udg_Hashtable,p,$457BCFC0)
set loopB=2
endif
if loopA<LoadInteger(udg_Hashtable,p,$6074AEF9)then
set loopA=LoadInteger(udg_Hashtable,p,$6074AEF9)
set loopB=3
endif
if loopB==1 then
set a=LoadInteger(udg_Hashtable,p,$FAFE5485)
call SaveInteger(udg_Hashtable,p,$FAFE5485,a+1)
set temp2=LoadReal(udg_Hashtable,p,$9B58470C)+(LoadReal(udg_Hashtable,p,$88E0F85F))
call SaveReal(udg_Hashtable,p,$9B58470C,temp2)
elseif loopB==2 then
set a=LoadInteger(udg_Hashtable,p,$457BCFC0)
call SaveInteger(udg_Hashtable,p,$457BCFC0,a+1)
set temp2=LoadReal(udg_Hashtable,p,$E755DDB8)+(LoadReal(udg_Hashtable,p,$ABD3E955))
call SaveReal(udg_Hashtable,p,$E755DDB8,temp2)
elseif loopB==3 then
set a=LoadInteger(udg_Hashtable,p,$6074AEF9)
call SaveInteger(udg_Hashtable,p,$6074AEF9,a+1)
set temp2=LoadReal(udg_Hashtable,p,$A2229E00)+(LoadReal(udg_Hashtable,p,$5E6EF8DA))
call SaveReal(udg_Hashtable,p,$A2229E00,temp2)
endif
endif
if itid=='C048' then
call SaveBoolean(System,p,$224E7B1B,true)
if LoadBoolean(udg_Hash,p,$7EA003E)and not LoadBoolean(udg_Hash,p,$72822878)then
set invenClick[p]=false
set temp0=0
loop
exitwhen temp0>31
if LoadInteger(Hash,p-1,$DA437F80+temp0)=='C048' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(temp0)+"/"+I2S('C050'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp0=temp0+1
endloop
if LoadBoolean(System,p,$F3C2DB66)and LoadBoolean(System,p,$224E7B1B)and LoadBoolean(System,p,$D8E4D1A5)and LoadBoolean(System,p,$35361B7A)then
call SaveInteger(System,p,$8CD7D666,1)
endif
endif
endif
if itid=='C049' then
call SaveBoolean(System,p,$D8E4D1A5,true)
call SaveReal(System,p,$79444859,0.3)
call UnitAddAbility(Charcter[p],'AF17')
call SetPlayerAbilityAvailable(Player(p-1),'AF17',false)
if LoadBoolean(udg_Hash,p,$7EA003E)and not LoadBoolean(udg_Hash,p,$72822878)then
set invenClick[p]=false
set temp0=0
loop
exitwhen temp0>31
if LoadInteger(Hash,p-1,$DA437F80+temp0)=='C049' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(temp0)+"/"+I2S('C051'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp0=temp0+1
endloop
if LoadBoolean(System,p,$F3C2DB66)and LoadBoolean(System,p,$224E7B1B)and LoadBoolean(System,p,$D8E4D1A5)and LoadBoolean(System,p,$35361B7A)then
call SaveInteger(System,p,$8CD7D666,1)
endif
endif
endif
if itid=='C053' then
set inaba[p]=true
endif
if itid=='C055' then
set tempR=FIRED[p]
set tempR2=1
if tempR<ICED[p]then
set tempR=ICED[p]
set tempR2=2
endif
if tempR<WINDD[p]then
set tempR=WINDD[p]
set tempR2=3
endif
if tempR<ThunD[p]then
set tempR=ThunD[p]
set tempR2=4
endif
if tempR2==1 then
set temp2=LoadReal(Hash_Stat,p,$5C6093F2)+0.1
call SaveReal(Hash_Stat,p,$5C6093F2,temp2)
elseif tempR2==2 then
set temp2=LoadReal(Hash_Stat,p,$BC3801A9)+0.1
call SaveReal(Hash_Stat,p,$BC3801A9,temp2)
elseif tempR2==3 then
set temp2=LoadReal(Hash_Stat,p,$50B06B2)+0.1
call SaveReal(Hash_Stat,p,$50B06B2,temp2)
elseif tempR2==4 then
set temp2=LoadReal(Hash_Stat,p,$2034A1E3)+0.1
call SaveReal(Hash_Stat,p,$2034A1E3,temp2)
endif
call TimerStart(udg_infoRe[p],0.01,false,null)
endif
if itid=='C056' then
call SaveBoolean(System,p,$46E8BA0A,true)
call TimerStart(udg_infoRe[p],0.02,false,null)
endif
if itid=='C057' then
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call SaveInteger(udg_Hash,GetHandleId(t),1,2)
call TimerStart(t,0.02,false,function supply)
set t=null
endif
if itid=='C058' then
call SaveBoolean(udg_Hash,p,$D0FE2EC2,true)
endif
if itid=='C059' then
call SaveBoolean(udg_Hash,p,$CB6EFCC2,true)
endif
if itid=='C060' then
call SaveBoolean(udg_Hash,p,$79377829,true)
endif
if itid=='C061' then
call SaveBoolean(udg_Hash,p,$5CAEE4EC,true)
endif
if itid=='C062' then
set bj_lastCreatedUnit=CreateUnit(pl,'cdm2',GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),270)
call SaveUnitHandle(udg_Hash,p,$F0F3C9CD,bj_lastCreatedUnit)
call TriggerRegisterTimerExpireEvent(gg_trg_dron_move,udg_n007timer[p])
call TimerStart(udg_n007timer[p],1.00,true,null)
set a=LoadInteger(Hash_Stat,p,$19A960C6)+1
call SaveInteger(Hash_Stat,p,$19A960C6,a)
endif
if itid=='C063' then
call SaveBoolean(udg_Hash,p,$8C79D441,true)
endif
if itid=='C064' then
call SaveBoolean(udg_Hash,p,$C2D4DCB3,true)
endif
if itid=='C065' then
call SaveBoolean(udg_Hash,p,$CC771750,true)
endif
if itid=='C066' then
call SaveBoolean(udg_Hash,p,$395FAFE6,true)
if LoadBoolean(udg_Hash,p,$D884A12A)then
call SaveBoolean(udg_Hash,p,$395FAFE6,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 저주받은 검|cffffa500이 해주됬다!")
endif
call StatUP(p,0.05,"공격간격")
endif
if itid=='C068' then
call SaveBoolean(udg_Hash,p,$A53D8B7A,true)
endif
if itid=='R074' then
call SaveBoolean(udg_Hash,p,$4F281D00,true)
endif
if itid=='R075' then
call SaveBoolean(udg_Hash,p,$E1F0F073,true)
endif
if itid=='R076' then
call StatUP(p,0.05,"공격간격")
endif
if itid=='R077' then
call SaveBoolean(udg_Hash,p,$C67FEEB4,true)
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='R077' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='R077' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='R077' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='R077' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(RareArt,PP[temp],a)
if temp0=='R077' then
call SaveInteger(RareArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
endif
if itid=='R078' then
call SaveBoolean(udg_Hash,p,$64A710AD,true)
endif
if itid=='R042' then
set a=0
loop
exitwhen a==100
set a=a+1
if LoadInteger(RareArt,p,a)=='R079' then
call SaveInteger(RareArt,p,a,0)
exitwhen true
endif
endloop
endif
if itid=='R079' then
set a=0
loop
exitwhen a==100
set a=a+1
if LoadInteger(RareArt,p,a)=='R042' then
call SaveInteger(RareArt,p,a,0)
exitwhen true
endif
endloop
endif
if itid=='R003' then
call SaveInteger(System,p,$10B8F688,1)
if LoadInteger(System,p,$F63BCD1E)==1 and LoadInteger(System,p,$DA550BF7)==1 and LoadInteger(System,p,$10B8F688)==1 then
call SaveInteger(System,p,$BA86D6C4,1)
endif
endif
if itid=='R005' then
if not LoadBoolean(System,$2805C2AF,1)then
set a=0
loop
exitwhen a==100
set a=a+1
if LoadInteger(UncarmonArt,p,a)=='C008' then
call SaveInteger(UncarmonArt,p,a,0)
exitwhen true
endif
endloop
endif
call SaveBoolean(System,p,$C4A612DF,true)
endif
if itid=='R010' then
set loopA=LoadInteger(udg_Hash,p,$B3487195)
if LoadBoolean(udg_Hash,p,$152E74D6)and loopA<5 then
call SaveInteger(udg_Hash,p,$B3487195,loopA+1)
set temp2=LoadReal(Hash_Stat,p,$10BA18C8)
call SaveReal(Hash_Stat,p,$10BA18C8,temp2+0.05)
set temp2=LoadReal(Hash_Stat,p,$164C40C9)
call SaveReal(Hash_Stat,p,$164C40C9,temp2+0.08)
set a=LoadInteger(Hash_Stat,p,$753B4F2F)
call SaveInteger(Hash_Stat,p,$753B4F2F,a+8)
if loopA==0 then
set temp_integer='N024'
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
endif
if loopA==1 then
set temp_integer='N026'
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
endif
if loopA==2 then
set temp_integer='N027'
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
endif
if loopA==3 then
set temp_integer='N028'
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
endif
if loopA==4 then
set temp_integer='N029'
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
call SetPlayerAbilityAvailable(Player(p-1),'AF02',true)
set a=0
loop
set a=a+1
if LoadInteger(RareArt,p,a)=='R010' then
call SaveInteger(RareArt,p,a,0)
endif
exitwhen a==RareMax
endloop
endif
endif
call TimerStart(udg_infoRe[p],0.01,false,null)
endif
if itid=='R004' then
call SaveInteger(System,p,$86FA2B12,2)
endif
if itid=='R017' then
call SaveBoolean(udg_Hash,p,$F96AA2DA,true)
endif
if itid=='R018' then
set DashCool[p]=DashCool[p]+1.5
call SaveBoolean(udg_Hash,p,$3C47E971,true)
if CharcterStat[p]then
call SetHeroAgi(Charcter[p],GetHeroAgi(Charcter[p],false)+750,true)
set loopA=LoadInteger(Hash_Stat,p,$9298D98F)+15
call SaveInteger(Hash_Stat,p,$9298D98F,loopA)
set temp2=LoadReal(Hash_Stat,p,$34D9AB92)+10
call SaveReal(Hash_Stat,p,$34D9AB92,temp2)
else
call SetHeroInt(Charcter[p],GetHeroInt(Charcter[p],false)+750,true)
set loopA=LoadInteger(Hash_Stat,p,$9298D98F)+15
call SaveInteger(Hash_Stat,p,$9298D98F,loopA)
set temp2=LoadReal(Hash_Stat,p,$540C61C7)+10
call SaveReal(Hash_Stat,p,$540C61C7,temp2)
endif
set temp2=GetUnitState(Charcter[p],ConvertUnitState(0x12))+750
call SetUnitState(Charcter[p],ConvertUnitState(0x12),temp2)
call TimerStart(udg_infoRe[p],0.01,false,null)
endif
if itid=='R019' then
call SaveBoolean(udg_Hash,p,$7A069023,true)
endif
if itid=='R021' then
call SaveBoolean(udg_Hash,p,$C24D2DFB,true)
if LoadBoolean(udg_Hash,p,$D884A12A)then
call SaveBoolean(udg_Hash,p,$C24D2DFB,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 만상저주|cffffa500가 해주됬다!")
set temp2=LoadReal(Hash_Stat,p,$62BD2901)+0.6
call SaveReal(Hash_Stat,p,$62BD2901,temp2)
set temp2=LoadReal(Hash_Stat,p,$34D9AB92)+50
call SaveReal(Hash_Stat,p,$34D9AB92,temp2)
set temp2=LoadReal(Hash_Stat,p,$540C61C7)+50
call SaveReal(Hash_Stat,p,$540C61C7,temp2)
endif
endif
if itid=='R023' then
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='R023' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='R023' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='R023' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='R023' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(RareArt,PP[temp],a)
if temp0=='R023' then
call SaveInteger(RareArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
call UnitAddAbility(Charcter[p],'AF09')
call SetPlayerAbilityAvailable(Player(p-1),'AF09',false)
set temp2=LoadReal(Hash_Stat,p,$164C40C9)-0.2
call SaveReal(Hash_Stat,p,$164C40C9,temp2)
call TimerStart(udg_infoRe[p],0.01,false,null)
call SaveBoolean(udg_Hash,p,$42A9ECD3,true)
if LoadBoolean(udg_Hash,p,$D884A12A)then
call SaveBoolean(udg_Hash,p,$42A9ECD3,false)
set temp2=LoadReal(Hash_Stat,p,$164C40C9)+0.2
call SaveReal(Hash_Stat,p,$164C40C9,temp2)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 아포칼립스 바이러스|cffffa500가 해주됬다!")
endif
call SaveBoolean(udg_Hash,p,$42A9ECD3+1,false)
call SaveBoolean(udg_Hash,p,$42A9ECD3+2,false)
call SaveBoolean(udg_Hash,p,$42A9ECD3+3,false)
call SaveBoolean(udg_Hash,p,$42A9ECD3+4,false)
call SaveStr(udg_Hash,p,$17336529+1,"|CFF808080")
call SaveStr(udg_Hash,p,$17336529+2,"|CFF808080")
call SaveStr(udg_Hash,p,$17336529+3,"|CFF808080")
call SaveStr(udg_Hash,p,$17336529+4,"|CFF808080")
set ShuText[p]="☞ '보이드 게놈' : 이 아티팩트를 오른쪽 클릭 시 특수 능력(C) 키를 통해 사용할 수 있게 된다. \n▶ 아군에게 사용시 다음 효과들중 하나를 영구적으로 획득한다. (쿨타임 60초)\n\n|CFF808080① 방패 : 방어력이 40 증가한다.|r\n|CFF808080② 붕대 : 매 초마다 체력을 0.15% 회복한다.|r\n|CFF808080③ 의족 : 이동속도가 10% 증가한다.|r\n|CFF808080④ 대검 : 체력 스탯이 1000 상승하고 모든 받는 피해 감소가 8% 증가한다.|r\n\nㆍ |cffff00ff저주 - '아포칼립스 바이러스'|r : |cffff0000모든 피해 증가율이 20% 감소한다.|r"
endif
if itid=='R024' then
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='R024' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='R024' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='R024' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='R024' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(RareArt,PP[temp],a)
if temp0=='R024' then
call SaveInteger(RareArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
set HealEFfriend[p]=HealEFfriend[p]+0.05
call SaveBoolean(udg_Hash,0,$EB76B4D9,true)
call SaveBoolean(udg_Hash,p,$B7D5798E,true)
if LoadBoolean(udg_Hash,p,$42A9ECD3)then
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 아포칼립스 바이러스|cffffa500가 해주됬다!")
set temp2=LoadReal(Hash_Stat,p,$164C40C9)+0.2
call SaveReal(Hash_Stat,p,$164C40C9,temp2)
call SaveBoolean(udg_Hash,p,$42A9ECD3,false)
endif
set loopA=0
loop
exitwhen loopA>Playint
set loopA=loopA+1
set temp2=LoadReal(Hash_Stat,PP[loopA],$2E182EFC)+0.05
call SaveReal(Hash_Stat,PP[loopA],$2E182EFC,temp2)
call TimerStart(udg_infoRe[PP[loopA]],0.02,false,null)
endloop
endif
if itid=='R022' then
call SaveBoolean(udg_Hash,p,$85959104,true)
call SaveReal(udg_Hash,p,$648997DA,0)
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='R022' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='R022' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='R022' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='R022' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(RareArt,PP[temp],a)
if temp0=='R022' then
call SaveInteger(RareArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
if LoadBoolean(udg_Hash,p,$D884A12A)then
call SaveBoolean(udg_Hash,p,$85959104,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 여행하는 마도서|cffffa500가 해주됬다!")
endif
endif
if itid=='R025' then
call SaveBoolean(System,p,$98AB695D,true)
call SaveReal(System,p,$B5B7CEDB,20.0)
call SaveInteger(System,p,$C25FCCE9,0)
call SaveBoolean(System,p,$22EF887E,false)
endif
if itid=='R026' then
call SaveBoolean(System,p,$E449503C,true)
endif
if itid=='R027' then
call SaveBoolean(System,p,$C7E47719,true)
if LoadBoolean(udg_Hash,p,$A5EB2F5F)then
call UArtADD('U029',p)
endif
endif
if itid=='R028' then
call SaveBoolean(System,p,$1904ABF9,true)
call UnitAddAbility(Charcter[p],'AF08')
call SetPlayerAbilityAvailable(Player(p-1),'AF08',false)
endif
if itid=='R029' then
call SaveBoolean(System,p,$D0192BF3,true)
set R029timer[p]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_R029,R029timer[p])
endif
if itid=='R030' then
call SaveBoolean(System,p,$553EE692,true)
endif
if itid=='R031' then
call SaveBoolean(System,p,$1DCE1310,true)
set R031timer[p]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_R031,R031timer[p])
endif
if itid=='R032' then
call SaveBoolean(System,p,$CE6ED0DC,true)
endif
if itid=='R034' then
call SaveBoolean(System,p,$953C43EA,true)
set poisonPlus[p]=poisonPlus[p]+0.15
set R034timer[p]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_R034,R034timer[p])
endif
if itid=='R035' then
call SaveBoolean(System,p,$820FB5AF,true)
set DashMove[p]=DashMove[p]+20
endif
if itid=='R036' then
set a=LoadInteger(udg_Hash,p,$C84A16EB)
call SaveInteger(udg_Hash,p,$C84A16EB,a+1)
call SaveBoolean(udg_Hash,p,$C32582AF+7,true)
endif
if itid=='R037' then
set ArtRerollMaxChance[p]=ArtRerollMaxChance[p]+1
set a=LoadInteger(udg_Hash,p,$C84A16EB)
call SaveInteger(udg_Hash,p,$C84A16EB,a+1)
call SaveBoolean(udg_Hash,p,$C32582AF+6,true)
endif
if itid=='R039' then
call SaveBoolean(System,p,$F61DFFEB,true)
if LoadBoolean(System,p,$6C86C3C8)then
call StatUP(p,0.18,"치피")
call StatUP(p,18,"치확")
endif
endif
if itid=='R040' then
call SaveBoolean(System,p,$6C86C3C8,true)
if LoadBoolean(System,p,$F61DFFEB)then
call StatUP(p,0.18,"치피")
call StatUP(p,18,"치확")
endif
endif
if itid=='R051' then
set a=LoadInteger(udg_Hash,p,$39F717C6)
call SaveInteger(udg_Hash,p,$39F717C6,a+1)
set a=LoadInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80)+1
call SaveInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80,a)
call MultiboardSetItemValueBJ2(bj_lastCreatedMultiboard,5,PR[p]+1,I2S(a))
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='R051' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='R051' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='R051' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='R051' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(RareArt,PP[temp],a)
if temp0=='R051' then
call SaveInteger(RareArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
endif
if itid=='R053' then
call UnitAddAbility(Charcter[p],'AF16')
call SetPlayerAbilityAvailable(Player(p-1),'AF16',false)
endif
if itid=='R054' then
set a=LoadInteger(udg_Hashtable,p,$BB70E228)
call SaveInteger(udg_Hashtable,p,$BB70E228,a+1)
set temp2=LoadReal(udg_Hashtable,p,$C3EA9E83)+(LoadReal(udg_Hashtable,p,$A8D71652))
call SaveReal(udg_Hashtable,p,$C3EA9E83,temp2)
endif
if itid=='R056' then
call SaveBoolean(System,p,$DA44070,true)
endif
if itid=='R057' then
call SaveBoolean(System,p,$42D99B02,true)
if LoadBoolean(udg_Hash,p,$D884A12A)then
call SaveBoolean(System,p,$42D99B02,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 흡혈 충동|cffffa500이 해주됬다!")
endif
call TimerStart(udg_infoRe[p],0.02,false,null)
endif
if itid=='R058' then
call SaveBoolean(System,p,$6A4D87E8,true)
call TimerStart(udg_infoRe[p],0.02,false,null)
endif
if itid=='R059' then
call SaveBoolean(System,p,$A797817B,true)
call TimerStart(udg_infoRe[p],0.02,false,null)
endif
if itid=='R060' then
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call SaveInteger(udg_Hash,GetHandleId(t),1,3)
call TimerStart(t,0.02,false,function supply)
set t=null
endif
if itid=='R063' then
set loopA=0
loop
exitwhen loopA>Playint
set loopA=loopA+1
if PP[loopA]!=p then
set loopB=LoadInteger(Hash_Stat,PP[loopA],$8885555B)+6
call SaveInteger(Hash_Stat,PP[loopA],$8885555B,loopB)
call TimerStart(udg_infoRe[PP[loopA]],0.02,false,null)
endif
endloop
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='R063' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='R063' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='R063' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='R063' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(RareArt,PP[temp],a)
if temp0=='R063' then
call SaveInteger(RareArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
endif
if itid=='R064' then
set bj_lastCreatedUnit=gg_unit_h000_0013
set tempR=LoadReal(Hash_Stat,GetHandleId(bj_lastCreatedUnit),$7FAFA384)
call SaveReal(Hash_Stat,GetHandleId(bj_lastCreatedUnit),$7FAFA384,tempR+100)
call SetUnitState(bj_lastCreatedUnit,ConvertUnitState(0x20),GetUnitState(bj_lastCreatedUnit,ConvertUnitState(0x20))+300)
call SetUnitState(bj_lastCreatedUnit,UNIT_STATE_MAX_LIFE,GetUnitState(bj_lastCreatedUnit,UNIT_STATE_MAX_LIFE)+10000)
call SaveBoolean(System,p,$30CF6E3,true)
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='R064' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='R064' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='R064' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='R064' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(RareArt,PP[temp],a)
if temp0=='R064' then
call SaveInteger(RareArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
endif
if itid=='U054' then
call SaveBoolean(System,p,$32B05931,true)
if GetHeroLevel(Charcter[p])>=200 then
call SuspendHeroXP(Charcter[p],false)
endif
set STRup[p]=STRup[p]+5
set AGIup[p]=AGIup[p]+5
set INTup[p]=INTup[p]+5
endif
if itid=='R043' then
call SaveInteger(System,p,$185EBEBA,0)
set a=GetRandomInt(1,NormalMax)
loop
exitwhen LoadInteger(NormalArt,p,a)==0
set a=GetRandomInt(1,NormalMax)
endloop
call SaveInteger(NormalArt,p,a,'N062')
set a=GetRandomInt(1,NormalMax)
loop
exitwhen LoadInteger(NormalArt,p,a)==0
set a=GetRandomInt(1,NormalMax)
endloop
call SaveInteger(NormalArt,p,a,'N062')
endif
if itid=='R046' then
call SaveBoolean(System,p,$EAB0C3BA,true)
if LoadBoolean(udg_Hash,p,$D884A12A)then
call SaveBoolean(System,p,$EAB0C3BA,false)
set temp2=LoadReal(Hash_Stat,p,$164C40C9)+0.12
call SaveReal(Hash_Stat,p,$164C40C9,a)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 고양이에게 홀리다|cffffa500가 해주됬다!")
endif
endif
if itid=='R047' then
call SaveBoolean(System,p,$15CACCF1,true)
set ADup[p]=ADup[p]+10
if GetHeroLevel(Charcter[p])>=200 then
call SaveBoolean(System,p,$7C9D0EF0,true)
call StatUP(p,10,"일공증")
endif
endif
if itid=='R048' then
call SaveBoolean(System,p,$E2768D31,true)
endif
if itid=='R050' then
call SaveBoolean(System,p,$EF91E6F0,true)
if GetUnitTypeId(Charcter[p])=='HR15' then
call SaveBoolean(System,p,$EF91E6F0,false)
call SaveBoolean(System,p,$F018D681,true)
if not UnitAlive(Charcter[p])then
call SaveBoolean(System,p,$ABA407AB,true)
else
set invenClick[p]=false
set temp0=0
loop
exitwhen temp0>31
if LoadInteger(Hash,p-1,$DA437F80+temp0)=='R050' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(temp0)+"/"+I2S('U016'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp0=temp0+1
endloop
endif
set EX[p]=true
call IzayoiEX(p)
set STRup[p]=STRup[p]+20
if CharcterStat[p]then
set AGIup[p]=AGIup[p]+10
endif
if GetUnitLevel(Charcter[p])>=100 then
call SaveBoolean(System,p,$D4C20600,true)
call StatUP(p,0.1,"피증")
endif
if GetUnitLevel(Charcter[p])>=150 then
call SaveBoolean(System,p,$13F4CAEA,true)
call StatUP(p,5,"피감")
endif
if GetUnitLevel(Charcter[p])>=200 then
call SaveBoolean(System,p,$C4AD086D,true)
call StatUP(p,15,"올탯퍼")
endif
else
set STRup[p]=STRup[p]+12
if CharcterStat[p]then
set AGIup[p]=AGIup[p]+8
else
set INTup[p]=INTup[p]+8
endif
endif
endif
if itid=='R065' then
call UnitAddAbility(u,'AF21')
call SetPlayerAbilityAvailable(Player(p-1),'AF21',false)
call SaveBoolean(System,p,$2143868,true)
endif
if itid=='R066' then
call SaveBoolean(System,p,$79954775,true)
endif
if itid=='R067' then
call SaveBoolean(System,p,$379C4E8,true)
endif
if itid=='R068' then
call SaveBoolean(System,p,$D9A065CA,true)
endif
if itid=='R069' then
call SaveBoolean(System,p,$AFFD60C8,true)
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='R069' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='R069' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='R069' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='R069' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(RareArt,PP[temp],a)
if temp0=='R069' then
call SaveInteger(RareArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
endif
if itid=='R070' then
set bj_lastCreatedUnit=CreateUnit(pl,'rdm3',GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),270)
call SaveUnitHandle(udg_Hash,p,$CD56E738,bj_lastCreatedUnit)
call TriggerRegisterTimerExpireEvent(gg_trg_dron_move,udg_n007timer[p])
call TimerStart(udg_n007timer[p],1.00,true,null)
set a=LoadInteger(Hash_Stat,p,$19A960C6)+1
call SaveInteger(Hash_Stat,p,$19A960C6,a)
endif
if itid=='R071' then
call SaveBoolean(System,p,$1F134776,true)
call SetPlayerAbilityAvailable(Player(p-1),'A03D',true)
set a=LoadInteger(Hash_Stat,p,$19A960C6)+1
call SaveInteger(Hash_Stat,p,$19A960C6,a)
endif
if LoadBoolean(System,p,$1F134776)and LoadInteger(Hash_Stat,p,$19A960C6)>=4 and not LoadBoolean(System,p,$6DE61E54)then
call SaveBoolean(System,p,$6DE61E54,true)
call SetPlayerAbilityAvailable(Player(p-1),'A03F',true)
endif
if itid=='R072' then
call SaveBoolean(System,p,$E4CAF050,true)
endif
if itid=='R073' then
call SaveBoolean(System,p,$FD13BA27,true)
endif
if itid=='U001' then
call SaveBoolean(System,$70739E58+p,3,true)
endif
if itid=='U002' then
call SaveBoolean(udg_Hash,0,$39D38E32,true)
set a=1
loop
exitwhen LoadInteger(UniqueArt,p,a)==0
set a=a+1
endloop
call SaveInteger(UniqueArt,p,a,'US02')
call SaveBoolean(udg_Hash,p,$1AE5ABCE,true)
call SaveReal(udg_Hash,p,$5B414C32,0.01)
if GetUnitTypeId(Charcter[p])=='HR09' then
set EX[p]=true
endif
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='U002' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='U002' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='U002' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='U002' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(UniqueArt,PP[temp],a)
if temp0=='U002' then
call SaveInteger(UniqueArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
endif
if itid=='US02' then
call SaveBoolean(udg_Hash,p,$E9840BCF,true)
endif
if itid=='U009' then
call SaveBoolean(System,p,$E9917373,true)
set Kirie[p]=5.0
if GetUnitTypeId(Charcter[p])=='HR03' then
call MikaEX(p)
set EX[p]=true
endif
endif
if itid=='U013' then
call PrenaPates(p)
endif
if itid=='R041' then
call SaveBoolean(System,p,$F7E2B67,true)
if ArtpickSlot[p]<=3 then
set ArtpickSlot[p]=ArtpickSlot[p]+1
endif
endif
if itid=='U017' then
call DialogSetMessageBJ(udg_CustomDialog[0],"현자의 돌 효과 선택")
call DialogDisplayBJ(true,udg_CustomDialog[0],Player(p-1))
endif
if itid=='U019' then
call SetPlayerAbilityAvailable(Player(p-1),'AF05',false)
set loopA=0
if LoadBoolean(System,p,$261D0D16)and LoadBoolean(udg_Hash,p,$F96AA2DA)and LoadBoolean(udg_Hash,p,$3C47E971)and LoadBoolean(udg_Hash,p,$7A069023)and LoadBoolean(System,p,$C175B12C)and LoadBoolean(System,p,$534A17A0)then
call SaveBoolean(System,p,$A2CB6CF4,true)
endif
if LoadBoolean(udg_Hash,p,$85959104)then
call SaveBoolean(udg_Hash,p,$85959104,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 여행하는 마도서|cffffa500가 해주됬다!")
set loopA=loopA+1
endif
if LoadBoolean(udg_Hash,p,$F96AA2DA)then
call SaveBoolean(udg_Hash,p,$F96AA2DA,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 이단자의 가면|cffffa500이 해주됬다!")
set a=LoadInteger(Hash_Stat,p,$8885555B)+10
call SaveInteger(Hash_Stat,p,$8885555B,a)
set a=LoadInteger(Hash_Stat,p,$924944F9)+5
call SaveInteger(Hash_Stat,p,$924944F9,a)
set loopA=loopA+1
endif
if LoadBoolean(udg_Hash,p,$3C47E971)then
call SaveBoolean(udg_Hash,p,$3C47E971,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 옅게 오염된 칼날|cffffa500이 해주됬다!")
set a=LoadInteger(Hash_Stat,p,$924944F9)+20
call SaveInteger(Hash_Stat,p,$924944F9,a)
set DashCool[p]=DashCool[p]-1.5
set loopA=loopA+2
endif
if LoadBoolean(udg_Hash,p,$7A069023)then
call SaveBoolean(udg_Hash,p,$7A069023,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 님필리아의 반지|cffffa500가 해주됬다!")
set temp2=LoadReal(Hash_Stat,p,$2E182EFC)+0.75
call SaveReal(Hash_Stat,p,$2E182EFC,temp2)
set loopA=loopA+1
endif
if LoadBoolean(udg_Hash,p,$42A9ECD3)then
call SaveBoolean(udg_Hash,p,$42A9ECD3,false)
set temp2=LoadReal(Hash_Stat,p,$164C40C9)+0.2
call SaveReal(Hash_Stat,p,$164C40C9,temp2)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 아포칼립스 바이러스|cffffa500가 해주됬다!")
set loopA=loopA+1
endif
if LoadBoolean(udg_Hash,p,$C24D2DFB)then
call SaveBoolean(udg_Hash,p,$C24D2DFB,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 만상저주|cffffa500가 해주됬다!")
set temp2=LoadReal(Hash_Stat,p,$62BD2901)+0.6
call SaveReal(Hash_Stat,p,$62BD2901,temp2)
set temp2=LoadReal(Hash_Stat,p,$34D9AB92)+50
call SaveReal(Hash_Stat,p,$34D9AB92,temp2)
set temp2=LoadReal(Hash_Stat,p,$540C61C7)+50
call SaveReal(Hash_Stat,p,$540C61C7,temp2)
set loopA=loopA+1
endif
if LoadBoolean(System,p,$BCFC08DC)then
call SaveBoolean(System,p,$BCFC08DC,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 악마와의 계약|cffffa500이 해주됬다!")
set loopA=loopA+1
endif
if LoadBoolean(System,p,$C175B12C)then
call SaveBoolean(System,p,$C175B12C,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 오염된 것 - 더러워진 은재 목주|cffffa500가 해주됬다!")
set STRup[p]=STRup[p]+8
set loopA=loopA+1
endif
if LoadBoolean(System,p,$534A17A0)then
call SaveBoolean(System,p,$534A17A0,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 오염된 것 - 처형인의 장갑|cffffa500이 해주됬다!")
set loopA=loopA+1
endif
if LoadBoolean(System,p,$8ACA14E7)then
call SaveBoolean(System,p,$8ACA14E7,false)
set a=LoadInteger(Hash_Stat,p,$8885555B)+12
call SaveInteger(Hash_Stat,p,$8885555B,a)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 광전사|cffffa500가 해주됬다!")
set loopA=loopA+1
endif
if LoadBoolean(System,p,$EAB0C3BA)then
call SaveBoolean(System,p,$EAB0C3BA,false)
set temp2=LoadReal(Hash_Stat,p,$164C40C9)+0.12
call SaveReal(Hash_Stat,p,$164C40C9,temp2)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 고양이에게 홀리다|cffffa500가 해주됬다!")
set loopA=loopA+1
endif
if LoadBoolean(System,p,$42D99B02)then
call SaveBoolean(System,p,$42D99B02,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 흡혈 충동|cffffa500이 해주됬다!")
set loopA=loopA+1
endif
if LoadBoolean(udg_Hash,p,$395FAFE6)then
call SaveBoolean(udg_Hash,p,$395FAFE6,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 저주받은 검|cffffa500이 해주됬다!")
set loopA=loopA+1
endif
if LoadBoolean(System,p,$261D0D16)then
call SaveBoolean(System,p,$261D0D16,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 저주받은 꽃|cffffa500이 해주됬다!")
set invenClick[p]=false
set temp0=0
loop
exitwhen temp0>31
if LoadInteger(Hash,p-1,$DA437F80+temp0)=='C025' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(temp0)+"/"+I2S('R020'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp0=temp0+1
endloop
set loopA=loopA+1
call SetHeroStr(Charcter[p],GetHeroStr(Charcter[p],false)+(loopA*50),true)
call SetHeroAgi(Charcter[p],GetHeroAgi(Charcter[p],false)+(loopA*50),true)
call SetHeroInt(Charcter[p],GetHeroInt(Charcter[p],false)+(loopA*50),true)
set a=LoadInteger(Hash_Stat,p,$753B4F2F)+(loopA*3)
call SaveInteger(Hash_Stat,p,$753B4F2F,a)
set a=LoadInteger(System,p,$9D58DA4A)
call StatUP(p,a*100,"올스탯")
set a=LoadInteger(Hash_Stat,p,$753B4F2F)+(a*2)
call SaveInteger(Hash_Stat,p,$753B4F2F,a)
endif
set a=LoadInteger(Hash_Stat,p,$9298D98F)+5
call SaveInteger(Hash_Stat,p,$9298D98F,a)
set a=LoadInteger(Hash_Stat,p,$C18D16A0)+15
call SaveInteger(Hash_Stat,p,$C18D16A0,a)
set a=LoadInteger(Hash_Stat,p,$B7E7C8AD)+10
call SaveInteger(Hash_Stat,p,$B7E7C8AD,a)
if loopA>=1 then
if loopA>=3 then
set loopA=3
endif
set a=LoadInteger(Hash_Stat,p,$9298D98F)+(loopA*5)
call SaveInteger(Hash_Stat,p,$9298D98F,a)
set a=LoadInteger(Hash_Stat,p,$C18D16A0)+(loopA*15)
call SaveInteger(Hash_Stat,p,$C18D16A0,a)
set a=LoadInteger(Hash_Stat,p,$B7E7C8AD)+(loopA*10)
call SaveInteger(Hash_Stat,p,$B7E7C8AD,a)
endif
call TimerStart(udg_infoRe[p],0.02,false,null)
endif
if itid=='US11' then
call SaveBoolean(udg_Hash,p,$D884A12A,true)
set a=LoadInteger(Hash_Stat,p,$9298D98F)+10
call SaveInteger(Hash_Stat,p,$9298D98F,a)
set a=LoadInteger(Hash_Stat,p,$C18D16A0)+15
call SaveInteger(Hash_Stat,p,$C18D16A0,a)
call StatUP(p,0.1,"공격간격")
set a=LoadInteger(Hash_Stat,p,$B7E7C8AD)+15
call SaveInteger(Hash_Stat,p,$B7E7C8AD,a)
call SkillLVUP(p,4,1)
call SkillLVUP(p,5,1)
call CharacterToolTip(p)
call TimerStart(udg_infoRe[p],0.02,false,null)
endif
if itid=='U022' then
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='U022' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='U022' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='U022' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='U022' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(UniqueArt,PP[temp],a)
if temp0=='U022' then
call SaveInteger(UniqueArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
call SaveBoolean(System,$92F8D280+p,$92F8D280,true)
call SaveInteger(System,$92F8D280+p,$5FD7D9D1,0)
call SaveReal(System,$92F8D280+p,$E106329E+1,0.1)
call SaveReal(System,$92F8D280+p,$E106329E+2,15)
call SaveReal(System,$92F8D280+p,$E106329E+3,0.15)
call SaveReal(System,$92F8D280+p,$E106329E+4,0.15)
call SaveReal(System,$92F8D280+p,$E106329E+5,12.0)
call SaveReal(System,$92F8D280+p,$E106329E+6,0.2)
call SaveReal(System,$92F8D280+p,$E106329E+7,50)
call SaveReal(System,$92F8D280+p,$E106329E+8,80)
call SaveReal(System,$92F8D280+p,$E106329E+9,10)
call SaveReal(System,$92F8D280+p,$E106329E+10,0.05)
call SaveReal(System,$92F8D280+p,$E106329E+11,0.1)
call SaveReal(System,$92F8D280+p,$E106329E+12,30)
call SaveReal(System,$92F8D280+p,$E106329E+13,10)
call SaveReal(System,$92F8D280+p,$E106329E+14,0.3)
call SaveReal(System,$92F8D280+p,$E106329E+15,1)
call SaveReal(System,$92F8D280+p,$E106329E+16,1)
call SaveReal(System,$92F8D280+p,$E106329E+17,1)
call SaveReal(System,$92F8D280+p,$E106329E+18,1)
call SaveStr(System,$92F8D280+p,$B9FE8360+1,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+2,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+3,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+4,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+5,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+6,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+7,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+8,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+9,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+10,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+11,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+12,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+13,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+14,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+15,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+16,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+17,"|CFF808080")
call SaveStr(System,$92F8D280+p,$B9FE8360+18,"|CFF808080")
endif
if itid=='U025' then
call SaveBoolean(System,p,$29AE479D,true)
call SetPlayerAbilityAvailable(Player(p-1),'A005',true)
call UnitAddAbility(Charcter[p],'AF06')
call SetPlayerAbilityAvailable(Player(p-1),'AF06',false)
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_U025bgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='U025' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='U025' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='U025' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='U025' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(UniqueArt,PP[temp],a)
if temp0=='U025' then
call SaveInteger(UniqueArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
endif
if itid=='U026' then
if GetUnitTypeId(Charcter[p])=='HR07' then
call AyaEX(p)
set EX[p]=true
endif
call SaveBoolean(System,p,$7C8B4FCC,true)
endif
if itid=='U027' then
call SaveBoolean(System,p,$28D58E2F,true)
set loopA=LoadInteger(udg_Hash,p,$A13CC7F9)
call StatUP(p,loopA/3,"공격력")
if GetUnitTypeId(Charcter[p])=='HR06' then
call ShikiEX(p)
set EX[p]=true
if LoadBoolean(System,p,$C7E47719)then
call UArtADD('U029',p)
endif
endif
endif
if itid=='U029' then
call SaveBoolean(System,p,$B362FB6C,true)
endif
if itid=='U028' then
call SkillLVUP(p,5,1)
call CharacterToolTip(p)
if GetUnitTypeId(Charcter[p])=='HR08' then
call RyougiEX(p)
set EX[p]=true
endif
endif
if itid=='U030' then
call SaveBoolean(System,p,$8ACA14E7,true)
call SaveBoolean(System,p,$55D3C47F,true)
call SaveBoolean(System,p,$77EBFF9B,false)
if LoadBoolean(udg_Hash,p,$D884A12A)then
call SaveBoolean(System,p,$8ACA14E7,false)
set a=LoadInteger(Hash_Stat,p,$8885555B)+12
call SaveInteger(Hash_Stat,p,$8885555B,a)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 광전사|cffffa500가 해주됬다!")
endif
if GetUnitTypeId(Charcter[p])=='HR04' then
call GutsEX(p)
set EX[p]=true
endif
endif
if itid=='U031' then
call DialogDisplayBJ(true,udg_CustomDialog[1],Player(p-1))
endif
if itid=='U037' then
call SaveBoolean(System,p,$3D7856A0,true)
set U037timer[p]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_U037,U037timer[p])
endif
if itid=='U038' then
call SaveBoolean(System,p,$649C7D8F,true)
endif
if itid=='U039' then
call SaveBoolean(System,p,$E05324DC,true)
endif
if itid=='U040' then
call SaveBoolean(System,p,$C9D437E0,true)
call SaveInteger(System,p,$6B2285BC,0)
set U040timer[p]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_U040,U040timer[p])
call TimerStart(U040timer[p],600.00,true,null)
endif
if itid=='U041' then
set poisonPlus[p]=poisonPlus[p]+0.14
call SaveBoolean(System,p,$91113F5D,true)
endif
if itid=='U042' then
set a=LoadInteger(Hash_Stat,p,$19A960C6)+1
call SaveInteger(Hash_Stat,p,$19A960C6,a)
call SaveBoolean(System,p,$FCA81098,true)
if GetUnitTypeId(Charcter[p])=='HR05' then
call YaeEX(p)
set EX[p]=true
endif
endif
if itid=='U043' then
call SaveBoolean(System,p,$FA9949B7,true)
if GetUnitTypeId(Charcter[p])=='HR10' then
call YoumuEX(p)
set EX[p]=true
endif
endif
if itid=='U044' then
set U044timer[p]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_U044,U044timer[p])
call SaveBoolean(System,p,$95A9830D,true)
if GetUnitTypeId(Charcter[p])=='HR11' then
call MikuEX(p)
set EX[p]=true
endif
endif
if itid=='U045' then
call UArtADD('U046',p)
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='U045' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='U045' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='U045' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='U045' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(UniqueArt,PP[temp],a)
if temp0=='U045' then
call SaveInteger(UniqueArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
set a=LoadInteger(udg_Hash,p,$C84A16EB)
call SaveInteger(udg_Hash,p,$C84A16EB,a+1)
set a=LoadInteger(udg_Hash,p,$39F717C6)
call SaveInteger(udg_Hash,p,$39F717C6,a+1)
set a=LoadInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80)+1
call SaveInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80,a)
call MultiboardSetItemValueBJ2(bj_lastCreatedMultiboard,5,PR[p]+1,I2S(a))
call itemgiven(p,Charcter[p],'I01R')
endif
if itid=='U046' then
call SaveBoolean(udg_Hash,p,$4627608F,true)
call SetPlayerAbilityAvailable(Player(p-1),'AF13',false)
endif
if LoadBoolean(udg_Hash,p,$4627608F)then
if LoadInteger(udg_Hash,p,$C84A16EB)>=2 and not LoadBoolean(udg_Hash,p,$17320511)then
call StatUP(p,10,"방퍼")
call SaveBoolean(udg_Hash,p,$17320511,true)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffffd700아르카나에 성스러운 힘이 깃들었다.")
endif
if LoadInteger(udg_Hash,p,$C84A16EB)>=4 and not LoadBoolean(udg_Hash,p,$AB7E7F75)then
call TriggerRegisterTimerExpireEvent(gg_trg_U045,U045timer1)
call SaveUnitHandle(udg_Hash,GetHandleId(U045timer1),0,Charcter[p])
call TimerStart(U045timer1,8,true,null)
call SaveBoolean(udg_Hash,p,$AB7E7F75,true)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffffd700아르카나에 성스러운 힘이 깃들었다.")
endif
if LoadInteger(udg_Hash,p,$C84A16EB)>=6 and not LoadBoolean(udg_Hash,p,$F59322CF)then
call TriggerRegisterTimerExpireEvent(gg_trg_U045,U045timer2)
call SaveUnitHandle(udg_Hash,GetHandleId(U045timer2),0,Charcter[p])
call TimerStart(U045timer2,25,false,null)
call SaveBoolean(udg_Hash,p,$F59322CF,true)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffffd700아르카나에 성스러운 힘이 깃들었다.")
endif
if LoadInteger(udg_Hash,p,$C84A16EB)>=8 then
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cffffd700성스러운 힘을 받들어라.")
call SetPlayerAbilityAvailable(Player(p-1),'AF13',true)
call SaveBoolean(udg_Hash,p,$4627608F,false)
endif
endif
if itid=='U048' then
call SaveBoolean(System,p,$6CEA8530,true)
set temp2=LoadReal(udg_Hashtable,p,$836F3EE3)+1
call SaveReal(udg_Hashtable,p,$836F3EE3,temp2)
endif
if itid=='U049' then
call UnitAddAbility(Charcter[p],'AF12')
call SetPlayerAbilityAvailable(Player(p-1),'AF12',false)
endif
if itid=='U050' then
call UnitAddAbility(Charcter[p],'AF14')
call SetPlayerAbilityAvailable(Player(p-1),'AF14',false)
call StatUP(p,0.05,"공격간격")
endif
if itid=='U051' then
call SaveBoolean(udg_Hash,p,$89619C0C,true)
if GetUnitTypeId(Charcter[p])=='HR13' then
call KazusaEX(p)
set EX[p]=true
endif
endif
if itid=='U052' then
call SaveBoolean(udg_Hash,p,$A3A49573,true)
if GetUnitTypeId(Charcter[p])=='HR14' then
call ArchEX(p)
set EX[p]=true
endif
call TimerStart(udg_infoRe[p],0.02,false,null)
endif
if itid=='U053' then
call SaveBoolean(udg_Hash,p,$6F31CAFD,true)
if GetUnitTypeId(Charcter[p])=='HR12' then
call MeilingEX(p)
set EX[p]=true
endif
endif
if itid=='U055' then
call SaveBoolean(udg_Hash,p,$31F10326,true)
set poisonPlus[p]=poisonPlus[p]+0.15
if GetUnitTypeId(Charcter[p])=='HR16' then
call EsdsEX(p)
set EX[p]=true
endif
endif
if itid=='U056' then
call SaveBoolean(System,p,$73C0D841,true)
call UnitAddAbility(Charcter[p],'AF15')
call SetPlayerAbilityAvailable(Player(p-1),'AF15',false)
endif
if itid=='U057' then
call SaveBoolean(System,p,$35361B7A,true)
if LoadBoolean(udg_Hash,p,$7EA003E)and not LoadBoolean(udg_Hash,p,$72822878)then
set invenClick[p]=false
set temp0=0
loop
exitwhen temp0>31
if LoadInteger(Hash,p-1,$DA437F80+temp0)=='U057' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(temp0)+"/"+I2S('U058'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp0=temp0+1
endloop
if LoadBoolean(System,p,$F3C2DB66)and LoadBoolean(System,p,$224E7B1B)and LoadBoolean(System,p,$D8E4D1A5)and LoadBoolean(System,p,$35361B7A)then
call SaveInteger(System,p,$8CD7D666,1)
endif
endif
endif
if itid=='U060' then
call SaveBoolean(System,p,$71E32348,true)
call TimerStart(udg_infoRe[p],0.02,false,null)
if GetUnitTypeId(Charcter[p])=='HR18' then
call KanekiEX(p)
set EX[p]=true
endif
endif
if itid=='U061' then
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='U061' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='U061' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='U061' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='U061' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(UniqueArt,PP[temp],a)
if temp0=='U061' then
call SaveInteger(UniqueArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
endif
if itid=='U062' then
call StatUP(p,GetHeroLevel(Charcter[p])*8,"공격력")
call StatUP(p,0.1,"공격간격")
set ADup[p]=ADup[p]+12
if GetUnitTypeId(Charcter[p])=='HR17' then
call ikkiEX(p)
set EX[p]=true
endif
endif
if itid=='U063' then
call SaveBoolean(System,p,$73E805F,true)
endif
if itid=='U064' then
call SaveBoolean(System,p,$D5C635B6,true)
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='U064' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='U064' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='U064' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='U064' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(UniqueArt,PP[temp],a)
if temp0=='U064' then
call SaveInteger(UniqueArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
endif
if itid=='U065' then
call SaveBoolean(System,p,$4E2511C8,true)
endif
if itid=='U066' then
if LoadReal(Hash_Stat,p,$5C6093F2)<=0 and LoadReal(Hash_Stat,p,$BC3801A9)<=0 and LoadReal(Hash_Stat,p,$50B06B2)<=0 and LoadReal(Hash_Stat,p,$2034A1E3)<=0 then
set tempR=LoadReal(Hash_Stat,p,$20CA2916)+0.1
call SaveReal(Hash_Stat,p,$20CA2916,tempR)
else
set tempR=FIRED[p]
set tempR2=1
if tempR<ICED[p]then
set tempR=ICED[p]
set tempR2=2
endif
if tempR<WINDD[p]then
set tempR=WINDD[p]
set tempR2=3
endif
if tempR<ThunD[p]then
set tempR=ThunD[p]
set tempR2=4
endif
if tempR2==1 then
set temp2=LoadReal(Hash_Stat,p,$5C6093F2)+0.1
call SaveReal(Hash_Stat,p,$5C6093F2,temp2)
elseif tempR2==2 then
set temp2=LoadReal(Hash_Stat,p,$BC3801A9)+0.1
call SaveReal(Hash_Stat,p,$BC3801A9,temp2)
elseif tempR2==3 then
set temp2=LoadReal(Hash_Stat,p,$50B06B2)+0.1
call SaveReal(Hash_Stat,p,$50B06B2,temp2)
elseif tempR2==4 then
set temp2=LoadReal(Hash_Stat,p,$2034A1E3)+0.1
call SaveReal(Hash_Stat,p,$2034A1E3,temp2)
endif
endif
endif
if itid=='U067' then
call SaveBoolean(System,p,$8916B6E2,true)
set a=LoadInteger(udg_Hash,p,$39F717C6)
call SaveInteger(udg_Hash,p,$39F717C6,a+1)
set a=LoadInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80)+1
call SaveInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80,a)
call MultiboardSetItemValueBJ2(bj_lastCreatedMultiboard,5,PR[p]+1,I2S(a))
endif
if itid=='U068' then
call SaveBoolean(System,p,$A276AA4F,true)
set bj_lastCreatedUnit=CreateUnit(pl,'udm1',GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),270)
call SaveUnitHandle(udg_Hash,p,$C4FF9F9D,bj_lastCreatedUnit)
set bj_lastCreatedUnit=CreateUnit(pl,'udm2',GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),270)
call SaveUnitHandle(udg_Hash,p,$7FCE9EC2,bj_lastCreatedUnit)
set bj_lastCreatedUnit=CreateUnit(pl,'udm2',GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),270)
call SaveUnitHandle(udg_Hash,p,$49963496,bj_lastCreatedUnit)
set bj_lastCreatedUnit=CreateUnit(pl,'udm2',GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),270)
call SaveUnitHandle(udg_Hash,p,$13000FD8,bj_lastCreatedUnit)
call TriggerRegisterTimerExpireEvent(gg_trg_dron_move,udg_n007timer[p])
call TimerStart(udg_n007timer[p],1.00,true,null)
call SaveReal(udg_Hash,p,$B00D0FFF,90)
call SaveReal(udg_Hash,p,$7A61E869,320)
call SaveReal(udg_Hash,p,$7A61E869,220)
set U068timer[p]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_U068,U068timer[p])
call TimerStart(U068timer[p],0.04,true,null)
set a=LoadInteger(Hash_Stat,p,$19A960C6)+1
call SaveInteger(Hash_Stat,p,$19A960C6,a)
endif
if LoadBoolean(System,p,$A276AA4F)and not LoadBoolean(System,p,$4F8578CE)then
set a=LoadInteger(Hash_Stat,p,$19A960C6)
if a>=4 then
call SaveBoolean(System,p,$4F8578CE,true)
endif
endif
if itid=='U069' then
call SaveBoolean(System,p,$FC6750F6,true)
if GetUnitTypeId(Charcter[p])=='HR19' then
call ReimuEX(p)
set EX[p]=true
endif
endif
if itid=='U070' then
call SaveBoolean(System,p,$A9CA72B,true)
endif
if itid=='U071' then
call SaveBoolean(System,p,$E6F56F2B,true)
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='U071' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='U071' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='U071' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='U071' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(UniqueArt,PP[temp],a)
if temp0=='U071' then
call SaveInteger(UniqueArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
endif
if itid=='U076' then
call SaveBoolean(System,p,$AA808F7B,true)
endif
if itid=='US13' then
call SaveBoolean(System,p,$868CD39,true)
call KissShot(p)
endif
if itid=='U072' then
call SaveBoolean(System,p,$B6BC37D2,true)
endif
if itid=='U073' then
call SaveBoolean(System,p,$B3C8CCC2,true)
endif
if itid=='U074' then
call SaveBoolean(System,p,$AA506E80,true)
set U074timer[p]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_U074,U074timer[p])
if GetUnitTypeId(Charcter[p])=='HR20' then
call NaruEX(p)
set EX[p]=true
endif
endif
if itid=='U075' then
call SaveBoolean(System,p,$C9172039,true)
endif
if itid=='U077' then
call SaveBoolean(System,p,$654BE169,true)
if GetUnitTypeId(Charcter[p])=='HR22' then
call WakamoEX(p)
set EX[p]=true
endif
endif
if itid=='C069' then
call SaveBoolean(System,p,$C0D815BA,true)
endif
if itid=='R080' then
call SaveBoolean(System,p,$B3139CCF,true)
endif
if itid=='C070' then
call SaveBoolean(System,p,$972C0AFE,true)
endif
if itid=='R081' then
call SaveBoolean(System,p,$972C0AFE,false)
call RemoveSavedBoolean(System,p,$972C0AFE)
endif
if itid=='C072' then
call SaveBoolean(System,p,$F9D34A3D,true)
endif
if itid=='R086' then
call SaveBoolean(System,p,$F9D34A3D,false)
call RemoveSavedBoolean(System,p,$F9D34A3D)
endif
if itid=='R082' then
call SaveBoolean(System,p,$7E8487A1,true)
endif
if itid=='R084' then
call SaveBoolean(System,p,$1F2F434A,true)
endif
if itid=='U081' then
call SaveBoolean(System,p,$1F2F434A,false)
call RemoveSavedBoolean(System,p,$1F2F434A)
endif
if itid=='R085' then
call SaveBoolean(System,p,$3577A5CF,true)
endif
if itid=='U082' then
call SaveBoolean(System,p,$3577A5CF,false)
call RemoveSavedBoolean(System,p,$3577A5CF)
set ArtRerollMaxChance[p]=ArtRerollMaxChance[p]+2
endif
if itid=='U079' then
set temp=0
loop
exitwhen temp>=Playint
set temp=temp+1
set a=0
if Art1[PP[temp]]=='U079' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode1[PP[temp]],false)
set Art1slotLV[PP[temp]]=0
endif
if Art2[PP[temp]]=='U079' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode2[PP[temp]],false)
set Art2slotLV[PP[temp]]=0
endif
if Art3[PP[temp]]=='U079' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode3[PP[temp]],false)
set Art3slotLV[PP[temp]]=0
endif
if Art4[PP[temp]]=='U079' then
call SetPlayerAbilityAvailable(Player(PP[temp]-1),ArtSkillCode4[PP[temp]],false)
set Art4slotLV[PP[temp]]=0
endif
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(UniqueArt,PP[temp],a)
if temp0=='U079' then
call SaveInteger(UniqueArt,PP[temp],a,0)
exitwhen true
endif
endloop
endloop
endif
if itid=='US15' then
call SaveBoolean(System,p,$A222B918,true)
endif
call TimerStart(udg_infoRe[p],0.01,false,null)
if not infiniteArt(itid)and itid !='N063' and itid !='C057' and itid !='R060' then
set a=0
loop
exitwhen a==100
set a=a+1
set temp0=LoadInteger(NormalArt,p,a)
if temp0==itid then
call SaveInteger(NormalArt,p,a,0)
endif
set temp0=LoadInteger(UncarmonArt,p,a)
if temp0==itid then
call SaveInteger(UncarmonArt,p,a,0)
endif
set temp0=LoadInteger(RareArt,p,a)
if temp0==itid then
call SaveInteger(RareArt,p,a,0)
endif
set temp0=LoadInteger(UniqueArt,p,a)
if temp0==itid then
call SaveInteger(UniqueArt,p,a,0)
endif
endloop
endif
set t=null
set u=null
set it=null
set pl=null
endfunction
function Artfect_get_t takes integer artid,integer p returns nothing
local item itemname
local integer invenslot
local integer loopA
local integer f
set invenslot=LoadInteger(Hash,p-1,$E79F32FE)
if invenslot>=30 then
call DisplayTimedTextToPlayer(Player(p-1),0,0,15.00,"|cffFAEB78아티팩트 획득에 실패했다!|r")
else
set itemname=CreateItem(artid,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call RemoveItemTimer(itemname)
set invenslot=GetItemTypeId(itemname)
if GetItemType(itemname)==ITEM_TYPE_CHARGED then
set loopA=0
loop
exitwhen loopA>31
if not LoadBoolean(Hash,p-1,$FD5E106+loopA)then
exitwhen true
endif
set loopA=loopA+1
endloop
if loopA<30 then
call SaveBoolean(Hash,p-1,$FD5E106+loopA,true)
call SaveInteger(Hash,p-1,$DA437F80+loopA,invenslot)
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",loopA),(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((invenslot))+"]."+("Art"))),0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",loopA),(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((invenslot))+"]."+("Art"))),0)
if invenslot=='US04' then
set f=DzFrameFindByName("Inve_Legend_EF",4)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("InVe_SlotA",loopA),JN_FRAMEPOINT_CENTER,0,0)
call SaveBoolean(Hash,p-1,$873CEC38+4,true)
endif
if invenslot=='US06' then
set f=DzFrameFindByName("Inve_Legend_EF",6)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("InVe_SlotA",loopA),JN_FRAMEPOINT_CENTER,0,0)
call SaveBoolean(Hash,p-1,$873CEC38+6,true)
endif
if invenslot=='US07' then
set f=DzFrameFindByName("Inve_Legend_EF",7)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("InVe_SlotA",loopA),JN_FRAMEPOINT_CENTER,0,0)
call SaveBoolean(Hash,p-1,$873CEC38+7,true)
endif
if invenslot=='US08' then
set f=DzFrameFindByName("Inve_Legend_EF",8)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("InVe_SlotA",loopA),JN_FRAMEPOINT_CENTER,0,0)
call SaveBoolean(Hash,p-1,$873CEC38+8,true)
endif
if invenslot=='US09' then
set f=DzFrameFindByName("Inve_Legend_EF",9)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("InVe_SlotA",loopA),JN_FRAMEPOINT_CENTER,0,0)
call SaveBoolean(Hash,p-1,$873CEC38+9,true)
endif
if invenslot=='US10' then
set f=DzFrameFindByName("Inve_Legend_EF",10)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("InVe_SlotA",loopA),JN_FRAMEPOINT_CENTER,0,0)
call SaveBoolean(Hash,p-1,$873CEC38+10,true)
endif
if invenslot=='US11' then
set f=DzFrameFindByName("Inve_Legend_EF",11)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("InVe_SlotA",loopA),JN_FRAMEPOINT_CENTER,0,0)
call SaveBoolean(Hash,p-1,$873CEC38+11,true)
endif
if invenslot=='R025' then
set f=DzFrameFindByName("Inve_Legend_EF",12)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("InVe_SlotA",loopA),JN_FRAMEPOINT_CENTER,0,0)
call SaveBoolean(Hash,p-1,$873CEC38+12,true)
endif
if invenslot=='US12' then
set f=DzFrameFindByName("Inve_Legend_EF",13)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("InVe_SlotA",loopA),JN_FRAMEPOINT_CENTER,0,0)
call SaveBoolean(Hash,p-1,$873CEC38+13,true)
endif
if invenslot=='US13' then
set f=DzFrameFindByName("Inve_Legend_EF",14)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("InVe_SlotA",loopA),JN_FRAMEPOINT_CENTER,0,0)
call SaveBoolean(Hash,p-1,$873CEC38+14,true)
endif
if invenslot=='US14' then
set f=DzFrameFindByName("Inve_Legend_EF",15)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("InVe_SlotA",loopA),JN_FRAMEPOINT_CENTER,0,0)
call SaveBoolean(Hash,p-1,$873CEC38+15,true)
endif
if invenslot=='US15' then
set f=DzFrameFindByName("Inve_Legend_EF",16)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("InVe_SlotA",loopA),JN_FRAMEPOINT_CENTER,0,0)
call SaveBoolean(Hash,p-1,$873CEC38+16,true)
endif
endif
endif
set invenslot=LoadInteger(Hash,p-1,$E79F32FE)+1
call SaveInteger(Hash,p-1,$E79F32FE,invenslot)
call MultiboardSetItemValueBJ2(bj_lastCreatedMultiboard,4,PR[p]+1,I2S(invenslot))
endif
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cff7fff00"+GetPlayerName(Player(p-1))+"|r|cffcd853f님이 |r"+GetItemName(itemname)+"|cffcd853f 아티팩트를 획득하셨습니다.|r")
call ActGet(ArtPickUnit[p],p,artid)
endif
set itemname=null
endfunction
function Trig_Artefactget_Actions takes nothing returns nothing
local integer artid=temp_integer
local integer p=temp_integer2
call Artfect_get_t(artid,p)
endfunction
function InitTrig_Artefactget takes nothing returns nothing
set gg_trg_Artefactget=CreateTrigger()
call TriggerAddAction(gg_trg_Artefactget,function Trig_Artefactget_Actions)
endfunction
function Trig_Philosopher_stone_Actions takes nothing returns nothing
local integer a
local player pl=GetTriggerPlayer()
local integer p=GetPlayerId(pl)+1
call DialogDisplay(pl,udg_CustomDialog[0],false)
call DisplayTimedTextToPlayer(pl,0,0,15.00,"|cffFAEB78현자의 돌을 성공적으로 사용했다!|r")
call EFsettingU(p,"Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",0,Charcter[p],"origin")
if GetClickedButton()==customDialogButton[0]then
set a=LoadInteger(udg_Hash,p,$39F717C6)
call SaveInteger(udg_Hash,p,$39F717C6,a+2)
set a=LoadInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80)+2
call SaveInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80,a)
call MultiboardSetItemValueBJ2(GetLastCreatedMultiboard(),5,PR[p]+1,I2S(a))
elseif GetClickedButton()==customDialogButton[1]then
if ArtpickSlot[p]<=3 then
set ArtpickSlot[p]=ArtpickSlot[p]+1
endif
elseif GetClickedButton()==customDialogButton[2]then
call ArtThrow(LoadInteger(Hash,p-1,$DA437F80+0),p)
call ArtThrow(LoadInteger(Hash,p-1,$DA437F80+1),p)
call ArtThrow('U017',p)
endif
set pl=null
endfunction
function InitTrig_Philosopher_stone takes nothing returns nothing
set gg_trg_Philosopher_stone=CreateTrigger()
call TriggerRegisterDialogEvent(gg_trg_Philosopher_stone,udg_CustomDialog[0])
call TriggerAddAction(gg_trg_Philosopher_stone,function Trig_Philosopher_stone_Actions)
endfunction
function Trig_Bending_Actions takes nothing returns nothing
local integer a
local player pl=GetTriggerPlayer()
local integer p=GetPlayerId(pl)+1
call DialogDisplay(pl,udg_CustomDialog[1],false)
call ArtThrow('U031',p)
call SaveBoolean(System,p,$29B16D77,true)
if GetClickedButton()==customDialogButton[3]then
call SaveInteger(System,p,$12E580E,1)
call Artfect_get('U032',Player(p-1))
call EFsettingXY(p,"war3mapImported\\@EF_1 (241).mdl",0,GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),1,0,1,0,0,0)
call DisplayTimedTextToPlayer(pl,0,0,15.00,"|cffFAEB78무 속성 > 불 속성으로 변경 되었습니다.|r")
elseif GetClickedButton()==customDialogButton[4]then
call SaveInteger(System,p,$12E580E,2)
call Artfect_get('U033',Player(p-1))
call EFsettingXY(p,"war3mapImported\\@EF_AZ_ESFrost_C1_Caster.mdl",0,GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),1,0,1,0,0,0)
call DisplayTimedTextToPlayer(pl,0,0,15.00,"|cffFAEB78무 속성 > 얼음 속성으로 변경 되었습니다.|r")
elseif GetClickedButton()==customDialogButton[5]then
call SaveInteger(System,p,$12E580E,3)
call Artfect_get('U034',Player(p-1))
call EFsettingXY(p,"war3mapImported\\@EF_by_wood_effect_yuanbanlin_sand2.mdl",0,GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),1,0,1,0,0,0)
call DisplayTimedTextToPlayer(pl,0,0,15.00,"|cffFAEB78무 속성 > 바람 속성으로 변경 되었습니다.|r")
elseif GetClickedButton()==customDialogButton[6]then
call SaveInteger(System,p,$12E580E,4)
call Artfect_get('U035',Player(p-1))
call EFsettingXY(p,"war3mapImported\\@EF_lightningrhit_small.mdl",0,GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),3,0,1,0,0,0)
call DisplayTimedTextToPlayer(pl,0,0,15.00,"|cffFAEB78무 속성 > 번개 속성으로 변경 되었습니다.|r")
endif
set pl=null
endfunction
function InitTrig_Bending takes nothing returns nothing
set gg_trg_Bending=CreateTrigger()
call TriggerRegisterDialogEvent(gg_trg_Bending,udg_CustomDialog[1])
call TriggerAddAction(gg_trg_Bending,function Trig_Bending_Actions)
endfunction
function Trig_Taro_Conditions takes nothing returns boolean
if SubString(GetEventPlayerChatString(),0,1)=="-" then
return true
endif
return false
endfunction
function Trig_Taro_Actions takes nothing returns nothing
local player pl=GetTriggerPlayer()
local integer p=GetPlayerId(pl)+1
if SubString(GetEventPlayerChatString(),1,2)=="1" then
call SaveInteger(udg_Hash,p,$D4397677,1)
elseif SubString(GetEventPlayerChatString(),1,2)=="2" then
call SaveInteger(udg_Hash,p,$D4397677,2)
elseif SubString(GetEventPlayerChatString(),1,2)=="3" then
call SaveInteger(udg_Hash,p,$D4397677,3)
elseif SubString(GetEventPlayerChatString(),1,2)=="4" then
call SaveInteger(udg_Hash,p,$D4397677,4)
elseif SubString(GetEventPlayerChatString(),1,2)=="5" then
call SaveInteger(udg_Hash,p,$D4397677,5)
elseif SubString(GetEventPlayerChatString(),1,2)=="6" then
call SaveInteger(udg_Hash,p,$D4397677,6)
elseif SubString(GetEventPlayerChatString(),1,2)=="7" then
call SaveInteger(udg_Hash,p,$D4397677,7)
endif
set pl=null
endfunction
function InitTrig_Taro takes nothing returns nothing
set gg_trg_Taro=CreateTrigger()
call TriggerAddCondition(gg_trg_Taro,Condition(function Trig_Taro_Conditions))
call TriggerAddAction(gg_trg_Taro,function Trig_Taro_Actions)
endfunction
function Init___GameEnd takes nothing returns nothing
call DzFrameSetUpdateCallback("")
endfunction
function Init___OnInit takes nothing returns nothing
call DzLoadToc("FDE Import.toc")
set GradeName[1]="|CffFF0000신|CffF56E6E화"
set GradeName[2]="|CFF14970B중복"
set GradeName[3]="|cffff4500유일"
set GradeName[5]="|cff7ef190스폐셜"
set ClassName[1]="|cffffffff노말"
set ClassName[2]="|cff00ffff언커먼"
set ClassName[3]="|cff1e90ff레어"
set ClassName[4]="|cff9400d3유니크"
set ClassName[5]="|cffFABCBC각|cffFFF0F0성"
set ClassName[6]="|cffff0000초월"
set ClassName[7]="|cffffffff노말|r |cffffa500소환수|r |cffffff00학생"
set ClassName[8]="|cffffffff노말|r |cffffff00학생"
set ClassName[9]="|cffffffff노말|r |cffbdbd3d진화"
set ClassName[10]="|cff00ffff언커먼|r |cffffff00학생"
set ClassName[11]="|cff00ffff언커먼|r |cffffa500소환수"
set ClassName[12]="|cff00ffff언커먼|r |cffff00ff저주"
set ClassName[13]="|cff00ffff언커먼|r |cffbdbd3d진화|r |cffff00ff저주"
set ClassName[14]="|cff00ffff언커먼|r |cffbdbd3d진화"
set ClassName[15]="|cff1e90ff레어|r |cffbdbd3d진화"
set ClassName[16]="|cff1e90ff레어|r |cffff00ff저주"
set ClassName[17]="|cff1e90ff레어|r |cffbdbd3d진화|r |cffff00ff저주"
set ClassName[18]="|cff1e90ff레어|r |cffbfc4ff해주"
set ClassName[19]="|cff1e90ff레어|r |cffffa500소환수|r |cffbdbd3d진화"
set ClassName[20]="|cff9400d3유니크|r |cffffff00학생"
set ClassName[21]="|cff9400d3유니크|r |cffbfc4ff해주"
set ClassName[22]="|cff9400d3유니크|r |cffff00ff저주"
set ClassName[23]="|cff9400d3유니크|r |cffbdbd3d진화"
set ClassName[24]="|cff9400d3유니크|r |cffffa500소환수"
set ClassName[25]="|cffFABCBC각|cffFFF0F0성|r |cffffa500소환수"
set ClassName[26]="|cffFABCBC각|cffFFF0F0성|r |cffbfc4ff해주"
set ClassName[27]="|cffffffff노말|r |cff00bfff타로"
set ClassName[28]="|cff00ffff언커먼|r  |cff00bfff타로"
set ClassName[29]="|cff1e90ff레어|r |cff00bfff타로"
set ClassName[30]="|cff9400d3유니크|r |cff00bfff타로"
set ClassName[31]="|cffFABCBC각|cffFFF0F0성|r |cff00bfff타로"
set ClassName[32]="|cff9400d3유니크|r |cff00bfff타로"
set ClassName[33]="|cff00ffff언커먼|r |cffbc8f8f물약"
set ClassName[34]="|cff1e90ff레어|r |cffbc8f8f물약"
set ClassName[35]="|cff1e90ff레어|r |cffffa500소환수|r"
call SetGameEndCallbackByCode(function Init___GameEnd)
endfunction
function UpdateCallback_Start takes nothing returns nothing
local real r1
local real r2
if Inventory_AreYouPickUp then
set r1=I2R(DzGetMouseXRelative())/I2R(DzGetWindowWidth())*0.8+0.0025
set r2=I2R(DzGetWindowHeight()-42-DzGetMouseYRelative())/I2R(DzGetWindowHeight()-42)*0.6
call DzFrameSetAbsolutePoint(DzFrameFindByName("InVe_MouseItem",0),JN_FRAMEPOINT_CENTER,r1,r2)
elseif Inventory_Drag and Inventory_Snap then
set r1=RMinBJ(I2R(DzGetMouseXRelative())/I2R(DzGetWindowWidth())*0.8+0.0025,0.695)
set r2=RMinBJ(I2R(DzGetWindowHeight()-42-DzGetMouseYRelative())/I2R(DzGetWindowHeight()-42)*0.6,0.555)
set r1=RMaxBJ(r1,0.105)
set r2=RMaxBJ(r2,0.19)
call DzFrameClearAllPoints(DzFrameFindByName("InVe_Back",0))
call DzFrameSetAbsolutePoint(DzFrameFindByName("InVe_Back",0),JN_FRAMEPOINT_TOP,r1,r2+0.0175)
call DzFrameSetTexture(DzFrameFindByName("InVe_MiniIconPositionA",0),"UI\\Widgets\\Console\\Human\\human-formation-off.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_MiniIconPositionB",0),"UI\\Widgets\\Console\\Human\\human-formation-off.blp",0)
else
call DzFrameSetUpdateCallback("")
endif
endfunction
function Inventory_RefreshItemDes takes integer pid,integer itid,integer f,boolean bol returns nothing
local integer f2=DzFrameFindByName("InVe_DesBack",0)
local integer f3
local integer temp
local integer i
local integer lv=S2I((EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((itid))+"]."+("oldLevel"))))
call DzFrameShow(f2,true)
call DzFrameSetPoint(f2,JN_FRAMEPOINT_BOTTOMRIGHT,f,JN_FRAMEPOINT_BOTTOMLEFT,-0.01,-0.132)
call DzFrameSetTexture(DzFrameFindByName("InVe_DesIcon",0),(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((itid))+"]."+("Art"))),0)
call DzFrameSetText(DzFrameFindByName("InVe_DesName",0),(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((itid))+"]."+("Tip"))))
call DzFrameSetText(DzFrameFindByName("InVe_DesClass",0),GradeName[S2I((EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((itid))+"]."+("Level"))))]+" "+ClassName[lv])
if itid=='U023' or itid=='US14' then
call DzFrameSetText(DzFrameFindByName("InVe_DesOpt",0),OtinusText[pid+1])
elseif itid=='R023' then
call DzFrameSetText(DzFrameFindByName("InVe_DesOpt",0),ShuText[pid+1])
else
call DzFrameSetText(DzFrameFindByName("InVe_DesOpt",0),JNStringSplit((EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((itid))+"]."+("Ubertip"))),",",0))
endif
call DzFrameSetText(DzFrameFindByName("InVe_DesInf",0),"|CFF808080"+JNStringSplit((EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((itid))+"]."+("Description"))),",",0))
if itid=='U023' then
call DzFrameSetSize(f2,0.18,0.21+(JNStringCount(JNStringSplit((EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((itid))+"]."+("Ubertip"))),",",0),"-")+130/10)*0.009)
elseif itid=='US01' or itid=='U015' or itid=='R014' or itid=='C015' then
call DzFrameSetSize(f2,0.18,0.21+(JNStringCount(JNStringSplit((EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((itid))+"]."+("Ubertip"))),",",0),"-")+180/10)*0.012)
else
call DzFrameSetSize(f2,0.18,0.32+(JNStringCount(JNStringSplit((EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((itid))+"]."+("Ubertip"))),",",0),"-")+JNStringLength(JNStringSplit((EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((itid))+"]."+("Description"))),",",0))/10)*0.01)
endif
endfunction
function Inventory___MouseEnter takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerUIEventPlayer())
local integer f=DzGetTriggerUIEventFrame()
local integer fid=LoadInteger(Hash,f,$FA4531C3)
local integer itid=LoadInteger(Hash,pid,$DA437F80+fid)
set Inventory_FrameIn[fid]=true
if LoadBoolean(Hash,pid,$FD5E106+fid)and not Inventory_AreYouPickUp then
call Inventory_RefreshItemDes(pid,itid,f,true)
endif
endfunction
function Inventory___MouseLeave takes nothing returns nothing
local integer i
call DzFrameShow(DzFrameFindByName("InVe_DesBack",0),false)
set Inventory_FrameIn[LoadInteger(Hash,DzGetTriggerUIEventFrame(),$FA4531C3)]=false
endfunction
function Inventory___SyncMCEA takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerSyncPlayer())
local string data=DzGetTriggerSyncData()
local integer last=S2I(JNStringSplit(data,"/",0))
local integer fid=S2I(JNStringSplit(data,"/",1))
local integer f
call SaveInteger(Hash,pid,$DA437F80+fid,LoadInteger(Hash,pid,$DA437F80+last))
call SaveInteger(Hash,pid,$DA437F80+last,S2I(JNStringSplit(data,"/",2)))
if GetLocalPlayer()==Player(pid)and S2I((EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((LoadInteger(Hash,pid,$DA437F80+fid)))+"]."+("lumbercost"))))>=1 then
set f=S2I((EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((LoadInteger(Hash,pid,$DA437F80+fid)))+"]."+("lumbercost"))))
call DzFrameSetPoint(DzFrameFindByName("Inve_Legend_EF",f),JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("InVe_SlotA",fid),JN_FRAMEPOINT_CENTER,0,0)
endif
endfunction
function Inventory___SyncMCM takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerSyncPlayer())
local string data=DzGetTriggerSyncData()
local integer fid=S2I(JNStringSplit(data,"/",0))
local integer last=S2I(JNStringSplit(data,"/",1))
local integer f
call SaveBoolean(Hash,pid,$FD5E106+fid,true)
call SaveInteger(Hash,pid,$DA437F80+fid,LoadInteger(Hash,pid,$DA437F80+last))
call RemoveSavedBoolean(Hash,pid,$FD5E106+last)
call RemoveSavedInteger(Hash,pid,$DA437F80+last)
if GetLocalPlayer()==Player(pid)and S2I((EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((LoadInteger(Hash,pid,$DA437F80+fid)))+"]."+("lumbercost"))))>=1 then
set f=S2I((EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((LoadInteger(Hash,pid,$DA437F80+fid)))+"]."+("lumbercost"))))
call DzFrameSetPoint(DzFrameFindByName("Inve_Legend_EF",f),JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("InVe_SlotA",fid),JN_FRAMEPOINT_CENTER,0,0)
endif
endfunction
function Inventory___MouseClick takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerUIEventPlayer())
local integer f=DzGetTriggerUIEventFrame()
local integer f2=DzFrameFindByName("InVe_SelectedBack",0)
local integer f3=DzFrameFindByName("InVe_MouseItem",0)
local integer fid=LoadInteger(Hash,f,$FA4531C3)
local integer itid
local integer temp
local real r1
local real r2
if invenClick[pid+1]then
if LoadBoolean(Hash,pid,$FD5E106+fid)then
if fid==Inventory_LastSelected then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(f2,false)
call DzFrameShow(f3,false)
else
if Inventory_AreYouPickUp then
set temp=LoadInteger(Hash,pid,$DA437F80+fid)
set itid=LoadInteger(Hash,pid,$DA437F80+Inventory_LastSelected)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",fid),(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((itid))+"]."+("Art"))),0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",fid),(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((itid))+"]."+("Art"))),0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",Inventory_LastSelected),(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((temp))+"]."+("Art"))),0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",Inventory_LastSelected),(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((temp))+"]."+("Art"))),0)
call DzSyncData("MCEA",I2S(Inventory_LastSelected)+"/"+I2S(fid)+"/"+I2S(temp))
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(f2,false)
call DzFrameShow(f3,false)
call Inventory_RefreshItemDes(pid,itid,DzFrameFindByName("InVe_SlotA",fid),true)
else
set Inventory_LastSelected=fid
set Inventory_AreYouPickUp=true
call DzFrameSetUpdateCallbackByCode(function UpdateCallback_Start)
call DzFrameShow(f2,true)
call DzFrameShow(f3,true)
call DzFrameSetPoint(f2,JN_FRAMEPOINT_CENTER,f,JN_FRAMEPOINT_CENTER,0,0)
call DzFrameSetTexture(f3,(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((LoadInteger(Hash,pid,$DA437F80+fid)))+"]."+("Art"))),0)
set r1=I2R(DzGetMouseXRelative())/I2R(DzGetWindowWidth())*0.8+0.0025
set r2=I2R(DzGetWindowHeight()-42-DzGetMouseYRelative())/I2R(DzGetWindowHeight()-42)*0.6
call DzFrameSetAbsolutePoint(f3,JN_FRAMEPOINT_CENTER,r1,r2)
endif
endif
elseif Inventory_AreYouPickUp then
set itid=LoadInteger(Hash,pid,$DA437F80+Inventory_LastSelected)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",fid),(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((itid))+"]."+("Art"))),0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",fid),(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((itid))+"]."+("Art"))),0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",Inventory_LastSelected),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",Inventory_LastSelected),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzSyncData("MCM",I2S(fid)+"/"+I2S(Inventory_LastSelected))
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(f2,false)
call DzFrameShow(f3,false)
call Inventory_RefreshItemDes(pid,itid,DzFrameFindByName("InVe_SlotA",fid),true)
endif
endif
endfunction
function Inventory___SnapEnter takes nothing returns nothing
set Inventory_Snap=true
endfunction
function Inventory___SnapLeave takes nothing returns nothing
if not Inventory_Drag then
set Inventory_Snap=false
endif
endfunction
function Inventory_FrameShow takes boolean bol returns nothing
local player p=DzGetTriggerUIEventPlayer()
local integer f=DzFrameFindByName("InVe_IconTriangle",0)
local integer a
if GetLocalPlayer()==p then
call DzFrameShow(DzFrameFindByName("InVe_Back",0),Inventory_Visility)
call DzFrameShow(DzFrameFindByName("InVe_IconDisable",0),Inventory_Visility)
endif
if Inventory_Visility then
call DzFrameShow(DzFrameFindByName("InVe_Back",0),true)
call DzFrameSetText(DzFrameFindByName("InVe_IconName",0),"|cffff7f50아티팩트|CFFFFCC00(B)")
call DzFrameSetTexture(f,"UI\\Widgets\\Glues\\SinglePlayerSkirmish-ScrollBarDownButton.blp",0)
call DzFrameSetPoint(f,JN_FRAMEPOINT_TOPRIGHT,DzFrameFindByName("InVe_Icon",0),JN_FRAMEPOINT_TOPRIGHT,-0.0015,-0.0014)
set a=0
loop
exitwhen a>=Inventory_MaxEF
set a=a+1
if LoadBoolean(Hash,GetPlayerId(p),$873CEC38+a)then
call DzFrameShow(DzFrameFindByName("Inve_Legend_EF",a),true)
endif
endloop
else
if GetLocalPlayer()==p then
call DzFrameSetText(DzFrameFindByName("InVe_IconName",0),"|cffff7f50아티팩트|CFFFFCC00(B)")
call DzFrameSetTexture(f,"UI\\Widgets\\Glues\\SinglePlayerSkirmish-ScrollBarUpButton.blp",0)
call DzFrameSetPoint(f,JN_FRAMEPOINT_TOPRIGHT,DzFrameFindByName("InVe_Icon",0),JN_FRAMEPOINT_TOPRIGHT,-0.0015,-0.002)
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
set a=0
loop
exitwhen a>=Inventory_MaxEF
set a=a+1
if LoadBoolean(Hash,GetPlayerId(p),$873CEC38+a)then
call DzFrameShow(DzFrameFindByName("Inve_Legend_EF",a),false)
endif
endloop
endif
endif
set p=null
endfunction
function Inventory_FrameShowKeyBorad takes boolean bol,integer typ returns nothing
local player p=DzGetTriggerKeyPlayer()
local integer f=DzFrameFindByName("InVe_IconTriangle",0)
local integer a
if typ==1 then
set p=DzGetTriggerKeyPlayer()
else
set p=GetTriggerPlayer()
endif
if GetLocalPlayer()==p then
call DzFrameShow(DzFrameFindByName("InVe_Back",0),Inventory_Visility)
call DzFrameShow(DzFrameFindByName("InVe_IconDisable",0),Inventory_Visility)
endif
if Inventory_Visility then
call DzFrameShow(DzFrameFindByName("InVe_Back",0),true)
call DzFrameSetText(DzFrameFindByName("InVe_IconName",0),"|cffff7f50아티팩트|CFFFFCC00(B)")
call DzFrameSetTexture(f,"UI\\Widgets\\Glues\\SinglePlayerSkirmish-ScrollBarDownButton.blp",0)
call DzFrameSetPoint(f,JN_FRAMEPOINT_TOPRIGHT,DzFrameFindByName("InVe_Icon",0),JN_FRAMEPOINT_TOPRIGHT,-0.0015,-0.0014)
set a=0
loop
exitwhen a>=Inventory_MaxEF
set a=a+1
if LoadBoolean(Hash,GetPlayerId(p),$873CEC38+a)then
call DzFrameShow(DzFrameFindByName("Inve_Legend_EF",a),true)
endif
endloop
else
if GetLocalPlayer()==p then
call DzFrameSetText(DzFrameFindByName("InVe_IconName",0),"|cffff7f50아티팩트|CFFFFCC00(B)")
call DzFrameSetTexture(f,"UI\\Widgets\\Glues\\SinglePlayerSkirmish-ScrollBarUpButton.blp",0)
call DzFrameSetPoint(f,JN_FRAMEPOINT_TOPRIGHT,DzFrameFindByName("InVe_Icon",0),JN_FRAMEPOINT_TOPRIGHT,-0.0015,-0.002)
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
set a=0
loop
exitwhen a>=Inventory_MaxEF
set a=a+1
if LoadBoolean(Hash,GetPlayerId(p),$873CEC38+a)then
call DzFrameShow(DzFrameFindByName("Inve_Legend_EF",a),false)
endif
endloop
endif
endif
set p=null
endfunction
function Inventory___KeyB takes nothing returns nothing
if JNMemoryGetByte(JNGetModuleHandle("Game.dll")+0xD04FEC)==0 then
set Inventory_Visility=not Inventory_Visility
call Inventory_FrameShowKeyBorad(Inventory_Visility,1)
endif
endfunction
function Inventory___IconClick takes nothing returns nothing
set Inventory_Visility=not Inventory_Visility
call Inventory_FrameShow(Inventory_Visility)
endfunction
function Inventory___ESC takes nothing returns nothing
if Inventory_Visility then
set Inventory_Visility=false
call Inventory_FrameShowKeyBorad(Inventory_Visility,2)
endif
endfunction
function Inventory___MiniButtonEnter takes nothing returns nothing
local integer f=DzFrameFindByName("InVe_MiniIconNameBack",0)
local integer f2=DzGetTriggerUIEventFrame()
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOM,f2,JN_FRAMEPOINT_TOP,0,-0.0005)
if f2==DzFrameFindByName("InVe_MiniIconPosition",0)then
call DzFrameSetText(DzFrameFindByName("InVe_MiniIconNameText",0),"|CFFFFCC00원위치")
elseif f2==DzFrameFindByName("InVe_MiniIconLine",0)then
call DzFrameSetText(DzFrameFindByName("InVe_MiniIconNameText",0),"|CFFFFCC00정렬하기")
endif
endfunction
function Inventory___MiniButtonLeave takes nothing returns nothing
call DzFrameShow(DzFrameFindByName("InVe_MiniIconNameBack",0),false)
endfunction
function Inventory___MiniIconPosition takes nothing returns nothing
local integer f=DzFrameFindByName("InVe_Back",0)
call DzFrameClearAllPoints(f)
call DzFrameSetAbsolutePoint(f,JN_FRAMEPOINT_CENTER,0.69,0.26)
call DzFrameSetTexture(DzFrameFindByName("InVe_MiniIconPositionA",0),"UI\\Widgets\\Console\\Human\\human-formation-on.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_MiniIconPositionB",0),"UI\\Widgets\\Console\\Human\\human-formation-on.blp",0)
endfunction
function Inventory___LineUp takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer tid=GetHandleId(t)
local integer pid=LoadInteger(Hash,tid,$6857FE53)
local integer lv
local integer lv2
local integer loopA
local integer lowest
local integer temp
local integer i=LoadInteger(Hash,tid,$25DAB820)
call SaveInteger(Hash,tid,$25DAB820,i+1)
if i<=41 then
if LoadBoolean(Hash,pid,$FD5E106+i)then
set loopA=0
loop
exitwhen loopA>i
if not LoadBoolean(Hash,pid,$FD5E106+loopA)then
call SaveBoolean(Hash,pid,$FD5E106+loopA,true)
call SaveInteger(Hash,pid,$DA437F80+loopA,LoadInteger(Hash,pid,$DA437F80+i))
call RemoveSavedBoolean(Hash,pid,$FD5E106+i)
call RemoveSavedInteger(Hash,pid,$DA437F80+i)
if GetLocalPlayer()==Player(pid)then
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",loopA),(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((LoadInteger(Hash,pid,$DA437F80+loopA)))+"]."+("Art"))),0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",loopA),(EXExecuteScript("(require'jass.slk')."+("item")+"["+I2S((LoadInteger(Hash,pid,$DA437F80+loopA)))+"]."+("Art"))),0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",i),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",i),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set loopA=loopA+1
endloop
endif
call TimerStart(t,0,false,function Inventory___LineUp)
elseif i==42 then
if GetLocalPlayer()==Player(pid)then
call DzFrameSetModel(DzFrameFindByName("InVe_MiniIconCooldown",0),"UI\\Feedback\\Cooldown\\UI-Cooldown-Indicator.mdx",0,0)
endif
call TimerStart(t,1,false,function Inventory___LineUp)
else
call RemoveSavedInteger(Hash,tid,$25DAB820)
call RemoveSavedInteger(Hash,pid,$DA437F80+30)
if GetLocalPlayer()==Player(pid)then
call DzFrameSetEnable(DzFrameFindByName("InVe_MiniIconLine",0),true)
endif
call PauseTimer(t)
endif
set t=null
endfunction
function Inventory___SyncMIL takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerSyncPlayer())
call SaveInteger(Hash,GetHandleId(Inventory___LineTimer[pid]),$25DAB820,0)
call TimerStart(Inventory___LineTimer[pid],0,false,function Inventory___LineUp)
endfunction
function Inventory___MiniIconLine takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerUIEventPlayer())
call DzFrameSetEnable(DzFrameFindByName("InVe_MiniIconLine",0),false)
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
call DzSyncData("MIL","")
endfunction
function Inventory___GloryButtonEnter takes nothing returns nothing
local integer f=DzFrameFindByName("GloryWater_Back2",0)
local integer f2=DzGetTriggerUIEventFrame()
local integer p=GetPlayerId(DzGetTriggerUIEventPlayer())+1
if GetLocalPlayer()==Player(p-1)then
call DzFrameShow(f,true)
call DzFrameSetText(DzFrameFindByName("GloryWater_DesInf",0),"보스전에서 제한 횟수 : "+I2S(LoadInteger(udg_Hash,p,$254000DE))+"\n성수의 체력 회복량 : "+I2S(LoadInteger(udg_Hash,p,$6748D1B7))+"% \n성수의 마나 회복량 : "+I2S(LoadInteger(udg_Hash,p,$6748D1B7))+"% \n성수의 쿨타임 : "+I2S(LoadInteger(udg_Hash,p,$382CD415))+"초")
endif
endfunction
function Inventory___GloryButtonLeave takes nothing returns nothing
call DzFrameShow(DzFrameFindByName("GloryWater_Back2",0),false)
endfunction
function Inventory___GloryButtonClick takes nothing returns nothing
local integer p=GetPlayerId(DzGetTriggerUIEventPlayer())+1
if not LoadBoolean(udg_Hash,p,$BB7F90E8)then
call DzSyncData("GLY","")
endif
endfunction
function Inventory___KeyV takes nothing returns nothing
local integer p=GetPlayerId(DzGetTriggerKeyPlayer())+1
if JNMemoryGetByte(JNGetModuleHandle("Game.dll")+0xD04FEC)==0 and not LoadBoolean(udg_Hash,p,$BB7F90E8)then
call DzSyncData("GLY","")
endif
endfunction
function Inventory___DelayedInit takes nothing returns nothing
local integer UI=DzGetGameUI()
local integer Main
local integer loopA
local integer loopB
local integer temp
local integer f
local real offset=0.032
local real offset1=0.415
local real offset2=0.427
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Main=DzCreateFrame("GloryWater",UI,0)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.5225,0.1575)
call DzFrameSetTexture(DzFrameFindByName("GloryWater_Back",0),"ReplaceableTextures\\CommandButtons\\BTNGloryWater.blp",0)
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack3.blp",0)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_ENTER,function Inventory___GloryButtonEnter,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_LEAVE,function Inventory___GloryButtonLeave,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_CONTROL_CLICK,function Inventory___GloryButtonClick,false)
call DzFrameSetModel(DzFrameFindByName("GloryWater_Cooldown",0),"war3mapImported\\@SY_UI-Cooldown-Indicator2.mdx",0,0)
call DzFrameSetAnimate(DzFrameFindByName("GloryWater_Cooldown",0),0,false)
call DzFrameShow(DzFrameFindByName("GloryWater_Cooldown",0),false)
set f=DzCreateFrame("GloryWater_Back2",UI,0)
call DzFrameSetAbsolutePoint(f,JN_FRAMEPOINT_CENTER,0.5225,0.2175)
call DzFrameSetText(DzFrameFindByName("GloryWater_DesInf",0),"보스전에서 제한 횟수 : 3\n성수의 체력 회복량 : 40%\n성수의 마나 회복량 : 40%\n성수의 쿨타임 : 15초")
call DzFrameShow(f,false)
if Playint==5 then
set offset1=0.415
set offset2=0.427
elseif Playint==4 then
set offset1=0.430
set offset2=0.442
elseif Playint==3 then
set offset1=0.445
set offset2=0.457
elseif Playint==2 then
set offset1=0.460
set offset2=0.472
elseif Playint==1 then
set offset1=0.475
set offset2=0.487
endif
set f=DzCreateFrame("DPS_Fahter",UI,0)
set loopA=0
loop
exitwhen loopA==Playint
set loopA=loopA+1
call DzFrameSetAbsolutePoint(f,JN_FRAMEPOINT_CENTER,0.01,0.01)
set Main=DzCreateFrameByTagName("SPRITE","DPS_Gage",f,"",loopA)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.74,(offset1-(loopA*0.025)))
call DzFrameSetModel(Main,"war3mapImported\\@SY_BuildProgressBar2.mdx",0,0)
call DzFrameSetAnimate(Main,0,false)
set Main=DzCreateFrame("DPS_PlayerName",f,loopA)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.703,(offset2-(loopA*0.025)))
call DzFrameSetText(Main,GetPlayerName(Player(loopA-1)))
endloop
call DzFrameShow(f,false)
set f=DzCreateFrame("InVe_Icon",UI,0)
call DzFrameSetAbsolutePoint(f,JN_FRAMEPOINT_CENTER,0.555,0.1575)
call DzFrameShow(DzFrameFindByName("InVe_IconDisable",0),false)
call DzFrameSetScriptByCode(DzFrameFindByName("InVe_Icon",0),JN_FRAMEEVENT_CONTROL_CLICK,function Inventory___IconClick,false)
set Main=DzCreateFrame("InVe_Back",UI,0)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.69,0.26)
call DzFrameShow(Main,false)
call DzFrameSetScriptByCode(DzFrameFindByName("InVe_Snap",0),JN_FRAMEEVENT_MOUSE_ENTER,function Inventory___SnapEnter,false)
call DzFrameSetScriptByCode(DzFrameFindByName("InVe_Snap",0),JN_FRAMEEVENT_MOUSE_LEAVE,function Inventory___SnapLeave,false)
call DzFrameSetScriptByCode(DzFrameFindByName("InVe_Close",0),JN_FRAMEEVENT_CONTROL_CLICK,function Inventory___IconClick,false)
set f=DzFrameFindByName("InVe_MiniIconPosition",0)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_MOUSE_ENTER,function Inventory___MiniButtonEnter,false)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_MOUSE_LEAVE,function Inventory___MiniButtonLeave,false)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_CONTROL_CLICK,function Inventory___MiniIconPosition,false)
set f=DzFrameFindByName("InVe_MiniIconLine",0)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_MOUSE_ENTER,function Inventory___MiniButtonEnter,false)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_MOUSE_LEAVE,function Inventory___MiniButtonLeave,false)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_CONTROL_CLICK,function Inventory___MiniIconLine,false)
set loopA=0
loop
exitwhen loopA>4
set loopB=0
loop
exitwhen loopB>5
set temp=loopB+loopA*6
set f=DzCreateFrame("InVe_Slot",Main,temp)
call DzFrameSetPoint(f,JN_FRAMEPOINT_TOPLEFT,Main,JN_FRAMEPOINT_TOPLEFT,0.005+loopB*offset,-0.037-loopA*offset)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_MOUSE_ENTER,function Inventory___MouseEnter,false)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_MOUSE_LEAVE,function Inventory___MouseLeave,false)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_CONTROL_CLICK,function Inventory___MouseClick,false)
call SaveInteger(Hash,f,$FA4531C3,temp)
call DzFrameShow(DzFrameFindByName("InVe_SlotBlack",temp),false)
set f=DzFrameFindByName("InVe_SlotS",temp)
call DzFrameSetModel(f,"UI-ModalButtonOn2.mdx",0,0)
call DzFrameShow(f,false)
set loopB=loopB+1
endloop
set loopA=loopA+1
endloop
call DzFrameShow(DzCreateFrame("InVe_SelectedBack",Main,0),false)
call DzCreateFrame("InVe_MiniIconNameBack",Main,0)
set f=DzCreateFrameByTagName("SPRITE","Inve_Legend_EF",Main,"",4)
call DzFrameSetModel(f,"war3mapImported\\@AE_us04EF.mdx",0,0)
call DzFrameShow(f,false)
set f=DzCreateFrameByTagName("SPRITE","Inve_Legend_EF",Main,"",6)
call DzFrameSetModel(f,"war3mapImported\\@AE_us06EF.mdx",0,0)
call DzFrameShow(f,false)
set f=DzCreateFrameByTagName("SPRITE","Inve_Legend_EF",Main,"",7)
call DzFrameSetModel(f,"war3mapImported\\@AE_us07EF.mdx",0,0)
call DzFrameShow(f,false)
set f=DzCreateFrameByTagName("SPRITE","Inve_Legend_EF",Main,"",8)
call DzFrameSetModel(f,"war3mapImported\\@AE_us09EF.mdx",0,0)
call DzFrameShow(f,false)
set f=DzCreateFrameByTagName("SPRITE","Inve_Legend_EF",Main,"",9)
call DzFrameSetModel(f,"war3mapImported\\@AE_us09EF.mdx",0,0)
call DzFrameShow(f,false)
set f=DzCreateFrameByTagName("SPRITE","Inve_Legend_EF",Main,"",10)
call DzFrameSetModel(f,"war3mapImported\\@AE_us010EF.mdx",0,0)
call DzFrameShow(f,false)
set f=DzCreateFrameByTagName("SPRITE","Inve_Legend_EF",Main,"",11)
call DzFrameSetModel(f,"war3mapImported\\@AE_us011EF.mdx",0,0)
call DzFrameShow(f,false)
set f=DzCreateFrameByTagName("SPRITE","Inve_Legend_EF",Main,"",12)
call DzFrameSetModel(f,"war3mapImported\\@AE_Train0.mdx",0,0)
call DzFrameShow(f,false)
set f=DzCreateFrameByTagName("SPRITE","Inve_Legend_EF",Main,"",13)
call DzFrameSetModel(f,"war3mapImported\\@AE_us12EF.mdx",0,0)
call DzFrameShow(f,false)
set f=DzCreateFrameByTagName("SPRITE","Inve_Legend_EF",Main,"",14)
call DzFrameSetModel(f,"war3mapImported\\@AE_us13EF.mdx",0,0)
call DzFrameShow(f,false)
set f=DzCreateFrameByTagName("SPRITE","Inve_Legend_EF",Main,"",15)
call DzFrameSetModel(f,"war3mapImported\\@AE_us14EF.mdx",0,0)
call DzFrameShow(f,false)
set f=DzCreateFrameByTagName("SPRITE","Inve_Legend_EF",Main,"",16)
call DzFrameSetModel(f,"war3mapImported\\@AE_us15EF.mdx",0,0)
call DzFrameShow(f,false)
set f=DzCreateFrame("InVe_MiniIconCooldown",Main,0)
call DzFrameSetPoint(f,JN_FRAMEPOINT_CENTER,DzFrameFindByName("InVe_MiniIconLineBack",0),JN_FRAMEPOINT_CENTER,0,0)
call DzCreateFrame("InVe_DesBack",UI,0)
call DzCreateFrame("InVe_MouseItem",Main,0)
set loopA=0
loop
exitwhen loopA>11
set Inventory_LastSelected=-1
set Inventory___LineTimer[loopA]=CreateTimer()
call SaveInteger(Hash,GetHandleId(Inventory___LineTimer[loopA]),$6857FE53,loopA)
set loopA=loopA+1
endloop
endfunction
function Inventory___OnInit takes nothing returns nothing
local integer i
local trigger trg
set trg=CreateTrigger()
call DzTriggerRegisterKeyEventByCode(trg,JN_OSKEY_B,0,false,function Inventory___KeyB)
set trg=CreateTrigger()
call DzTriggerRegisterKeyEventByCode(trg,JN_OSKEY_V,0,false,function Inventory___KeyV)
set trg=CreateTrigger()
set i=0
loop
exitwhen i>5
call TriggerRegisterPlayerEvent(trg,Player(i),EVENT_PLAYER_END_CINEMATIC)
set i=i+1
endloop
call TriggerAddAction(trg,function Inventory___ESC)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"MCEA",false)
call TriggerAddAction(trg,function Inventory___SyncMCEA)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"MCM",false)
call TriggerAddAction(trg,function Inventory___SyncMCM)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"MIL",false)
call TriggerAddAction(trg,function Inventory___SyncMIL)
call TimerStart(CreateTimer(),0.01,false,function Inventory___DelayedInit)
set trg=null
endfunction
function itemthrow___SyncRCT takes nothing returns nothing
local player p=DzGetTriggerSyncPlayer()
local integer pid=GetPlayerId(p)
local integer fid=S2I(DzGetTriggerSyncData())
local integer invenslot
if GetLocalPlayer()==p then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
endif
call RemoveSavedBoolean(Hash,pid,$FD5E106+fid)
call RemoveSavedInteger(Hash,pid,$DA437F80+fid)
if GetLocalPlayer()==p then
call DzFrameSetEnable(DzFrameFindByName("InVe_Slot",fid),true)
endif
set invenslot=LoadInteger(Hash,pid,$E79F32FE)-1
call SaveInteger(Hash,pid,$E79F32FE,invenslot)
call MultiboardSetItemValueBJ2(bj_lastCreatedMultiboard,4,PR[pid+1]+1,I2S(invenslot))
set p=null
endfunction
function itemthrow___SyncRCTGT takes nothing returns nothing
local player p=DzGetTriggerSyncPlayer()
local integer pid=GetPlayerId(p)
local string data=DzGetTriggerSyncData()
local integer fid=S2I(JNStringSplit(data,"/",0))
local integer fid2=S2I(JNStringSplit(data,"/",1))
local integer invenslot
local integer temp0
set invenClick[pid+1]=true
if GetLocalPlayer()==p then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
endif
call RemoveSavedBoolean(Hash,pid,$FD5E106+fid)
call RemoveSavedInteger(Hash,pid,$DA437F80+fid)
if GetLocalPlayer()==p then
call DzFrameSetEnable(DzFrameFindByName("InVe_Slot",fid),true)
endif
set invenslot=LoadInteger(Hash,pid,$E79F32FE)-1
call SaveInteger(Hash,pid,$E79F32FE,invenslot)
call MultiboardSetItemValueBJ2(bj_lastCreatedMultiboard,4,PR[pid+1]+1,I2S(invenslot))
set temp_integer=fid2
set temp_integer2=pid+1
call TriggerExecute(gg_trg_Artefactget)
set p=null
endfunction
function itemthrow___SyncING takes nothing returns nothing
local player p=DzGetTriggerSyncPlayer()
local integer pid=GetPlayerId(p)
local integer fid=S2I(DzGetTriggerSyncData())
call SaveInteger(udg_Hash,pid+1,$7B014FA1,fid)
call TimerStart(udg_PstatTimer[pid+1],0,false,null)
set p=null
endfunction
function itemthrow___SyncSKL takes nothing returns nothing
local player p=DzGetTriggerSyncPlayer()
local integer pid=GetPlayerId(p)
local integer fid=S2I(DzGetTriggerSyncData())
call UnitAddAbility(Charcter[pid+1],fid)
if fid=='H104' then
call UnitAddAbility(Charcter[pid+1],'H105')
call UnitAddAbility(Charcter[pid+1],'H106')
call UnitAddAbility(Charcter[pid+1],'H107')
call SetPlayerAbilityAvailable(p,'H106',false)
call SetPlayerAbilityAvailable(p,'H107',false)
endif
set p=null
endfunction
function itemthrow___SyncSKR takes nothing returns nothing
local player p=DzGetTriggerSyncPlayer()
local integer pid=GetPlayerId(p)
local integer fid=S2I(DzGetTriggerSyncData())
call UnitRemoveAbility(Charcter[pid+1],fid)
set p=null
endfunction
function itemthrow___SyncSAP takes nothing returns nothing
local player p=DzGetTriggerSyncPlayer()
local string data=DzGetTriggerSyncData()
local integer id=S2I(JNStringSplit(data,"/",0))
local string fid=JNStringSplit(data,"/",1)
local integer pl=GetPlayerId(p)+1
if fid=="true" then
if(id=='AF16' and LoadInteger(udg_Hash,pl,$BA82A5AA)==2)or(id=='AF09' and LoadBoolean(udg_Hash,pl,$79E59778))then
else
call UnitAddAbility(Charcter[pl],id)
call SetPlayerAbilityAvailable(p,id,true)
endif
elseif fid=="false" then
call SetPlayerAbilityAvailable(p,id,false)
endif
set p=null
endfunction
function itemthrow___booltimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveBoolean(udg_Hash,p,$9CB2F91A,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function itemthrow___SyncBool takes nothing returns nothing
local timer t
local player p=DzGetTriggerSyncPlayer()
local string data=DzGetTriggerSyncData()
local string id=JNStringSplit(data,"/",0)
local string fid=JNStringSplit(data,"/",1)
if fid=="true" then
call SaveBoolean(udg_Hash,GetPlayerId(p)+1,StringHash(id),true)
elseif fid=="false" then
call SaveBoolean(udg_Hash,GetPlayerId(p)+1,StringHash(id),false)
endif
if id=="SKUPok" then
set t=CreateTimer()
call TimerStart(t,0.1,false,function itemthrow___booltimer)
call SaveInteger(udg_Hash,GetHandleId(t),0,GetPlayerId(p)+1)
endif
set p=null
set t=null
endfunction
function itemthrow___SyncKNG takes nothing returns nothing
local player p=DzGetTriggerSyncPlayer()
local integer pid=GetPlayerId(p)+1
local unit u=Charcter[pid]
local integer fid=S2I(DzGetTriggerSyncData())
call SaveInteger(udg_Hash,GetHandleId(u),$D3B20A2B,fid)
call TimerStart(udg_PstatTimer[pid],0,false,null)
set p=null
set u=null
endfunction
function itemthrow___SyncKool takes nothing returns nothing
local player pl=DzGetTriggerSyncPlayer()
local integer p=GetPlayerId(pl)+1
local unit u=Charcter[p]
local string data=DzGetTriggerSyncData()
local string id=JNStringSplit(data,"/",0)
local string fid=JNStringSplit(data,"/",1)
local integer temp
if fid=="true" then
call SaveBoolean(udg_Hashtable,GetHandleId(u),StringHash(id),true)
elseif fid=="false" then
call SaveBoolean(udg_Hashtable,GetHandleId(u),StringHash(id),false)
endif
if id=="Qupgrade" then
call EXSetAbilityDataReal(EXGetUnitAbility(u,'H131'),1,105,4)
call IncUnitAbilityLevel(u,'H131')
call DecUnitAbilityLevel(u,'H131')
endif
if id=="Dupgrade" then
call EXSetAbilityString('H130',1,ABILITY_DATA_UBERTIP,"기본 공격시 공격속도가 상승하며 최대치 중첩시 공격 간격이 감소합니다.\n\n|cff00ff00타입|cffffa500 : 패시브\n|cff00ff00공격속도 상승|cffffa500 : 4%\n|cff00ff00최대 중첩량|cffffa500 : 20\n|cff00ff00최대치 중첩시 공격 간격 감소|cffffa500 : 0.1\n|cff00ff00지속시간|cffffa500 : 30초")
endif
if id=="Aupgrade" then
set temp=LoadInteger(udg_Hash,GetHandleId(u),$1EAE4B11)
call SaveInteger(udg_Hash,GetHandleId(u),$1EAE4B11,temp)
call StatUP(p,40,"공격력")
call StatUP(p,10,"공속")
endif
if id=="Rupgrade" then
call SaveBoolean(udg_Hashtable,ChSkillR[p],$D931D9C9,true)
endif
set pl=null
set u=null
endfunction
function itemthrow___SyncSKLV takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerSyncPlayer())+1
local string data=DzGetTriggerSyncData()
local string id=JNStringSplit(data,"/",0)
local integer fid=S2I(JNStringSplit(data,"/",1))
call SaveInteger(udg_Hashtable,pid,StringHash(id),fid)
endfunction
function itemthrow___SyncSKMN takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerSyncPlayer())+1
local string data=DzGetTriggerSyncData()
local string id=JNStringSplit(data,"/",0)
local real fid=S2R(JNStringSplit(data,"/",1))
call SaveReal(udg_Hashtable,pid,StringHash(id),fid)
endfunction
function itemthrow___GloryCOOL takes nothing returns nothing
local timer t=GetExpiredTimer()
local real time=LoadReal(udg_Hash,GetHandleId(t),0)
local real fulltime=LoadReal(udg_Hash,GetHandleId(t),1)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),2)
local real tempR=(1-(time/fulltime))
call SaveReal(udg_Hash,GetHandleId(t),0,time-0.04)
if time<=0 then
call SaveBoolean(udg_Hash,p,$BB7F90E8,false)
if GetLocalPlayer()==Player(p-1)then
call DzFrameShow(DzFrameFindByName("GloryWater_Cooldown",0),false)
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetAnimateOffset(DzFrameFindByName("GloryWater_Cooldown",0),tempR)
endif
endif
call TimerStart(t,0.04,false,function itemthrow___GloryCOOL)
set t=null
endfunction
function itemthrow___SyncGLY takes nothing returns nothing
local timer t=CreateTimer()
local integer p=GetPlayerId(DzGetTriggerSyncPlayer())+1
local unit u=Charcter[p]
local integer tempI=LoadInteger(udg_Hash,p,$254000DE)
local real tempR=LoadInteger(udg_Hash,p,$6748D1B7)
local boolean a=false
if not LoadBoolean(udg_Hash,p,$BB7F90E8)then
call SaveBoolean(udg_Hash,p,$BB7F90E8,true)
if BossBattle and tempI>=1 then
call SaveInteger(udg_Hash,p,$254000DE,tempI-1)
if GetLocalPlayer()==Player(p-1)then
if tempI-1==5 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack5.blp",0)
elseif tempI-1==4 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack4.blp",0)
elseif tempI-1==3 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack3.blp",0)
elseif tempI-1==2 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack2.blp",0)
elseif tempI-1==1 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack1.blp",0)
elseif tempI-1==0 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack0.blp",0)
call DzFrameSetTexture(DzFrameFindByName("GloryWater_Back",0),"ReplaceableTextures\\CommandButtons\\BTNGloryWaterX.blp",0)
endif
endif
elseif BossBattle and tempI<=0 then
set a=true
call SaveBoolean(udg_Hash,p,$BB7F90E8,false)
endif
if a==false then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@SY_GloryWater.mp3"),(null),(127),((1.00)*1.0),false,0,0)
if GetLocalPlayer()==Player(p-1)then
call StartSound(udg_SND)
endif
call EFsettingU(p,"war3mapImported\\@EF_DispelMagicTarget_Yellow.mdx",0,u,"origin")
call EFsettingU(p,"war3mapImported\\@Aura_effect_around_03.mdl",1,u,"origin")
if GetLocalPlayer()==Player(p-1)then
call DzFrameShow(DzFrameFindByName("GloryWater_Cooldown",0),true)
endif
call recoveryHP(u,u,(GetUnitState(u,UNIT_STATE_MAX_LIFE)*(tempR*0.01)),"","origin")
call recoveryMP(u,u,(GetUnitState(u,UNIT_STATE_MAX_MANA)*(tempR*0.01)),"","origin")
if LoadBoolean(System,p,$B3A22BFE)then
call ShildSet(u,u,12,GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.15)
endif
if LoadBoolean(System,p,$FB1F5E57)then
call BuffCall(u,'AT14',12,false,false)
call StatChangeX(p,0.10,"피증",12,"C0451")
call StatChangeX(p,8,"이속",12,"C0452")
endif
if LoadBoolean(System,p,$AC5AA7BB)then
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillD[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillD[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillD[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillD[p]),ABILITY_STATE_COOLDOWN)*0.03))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillQ[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillQ[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillQ[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillQ[p]),ABILITY_STATE_COOLDOWN)*0.03))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillW[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillW[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillW[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillW[p]),ABILITY_STATE_COOLDOWN)*0.03))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillE[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillE[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillE[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillE[p]),ABILITY_STATE_COOLDOWN)*0.03))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillR[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillR[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillR[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillR[p]),ABILITY_STATE_COOLDOWN)*0.03))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillT[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillT[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillT[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillT[p]),ABILITY_STATE_COOLDOWN)*0.03))
endif
call StatUP(p,5,"체력")
endif
call SaveReal(udg_Hash,GetHandleId(t),0,LoadInteger(udg_Hash,p,$382CD415)-0.001)
call SaveReal(udg_Hash,GetHandleId(t),1,LoadInteger(udg_Hash,p,$382CD415))
call SaveInteger(udg_Hash,GetHandleId(t),2,p)
call TimerStart(t,0.00,false,function itemthrow___GloryCOOL)
endif
endif
set u=null
set t=null
endfunction
function itemthrow___SyncSKRG takes nothing returns nothing
local integer p=GetPlayerId(DzGetTriggerSyncPlayer())+1
local string data=DzGetTriggerSyncData()
local integer id=S2I(JNStringSplit(data,"/",0))
local real fid=S2R(JNStringSplit(data,"/",1))
local unit u=Charcter[p]
call EXSetAbilityDataReal(EXGetUnitAbility(u,id),1,106,fid)
call IncUnitAbilityLevel(u,id)
call DecUnitAbilityLevel(u,id)
set u=null
endfunction
function itemthrow___SyncSKRP takes nothing returns nothing
local integer p=GetPlayerId(DzGetTriggerSyncPlayer())+1
local string data=DzGetTriggerSyncData()
local integer id=S2I(JNStringSplit(data,"/",0))
local real fid=S2R(JNStringSplit(data,"/",1))
local unit u=Charcter[p]
call EXSetAbilityDataReal(EXGetUnitAbility(u,id),1,107,fid)
call IncUnitAbilityLevel(u,id)
call DecUnitAbilityLevel(u,id)
set u=null
endfunction
function itemthrow___OnInit takes nothing returns nothing
local trigger trg
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"RCT",false)
call TriggerAddAction(trg,function itemthrow___SyncRCT)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"RCTGT",false)
call TriggerAddAction(trg,function itemthrow___SyncRCTGT)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"ING",false)
call TriggerAddAction(trg,function itemthrow___SyncING)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"SKL",false)
call TriggerAddAction(trg,function itemthrow___SyncSKL)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"SKR",false)
call TriggerAddAction(trg,function itemthrow___SyncSKR)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"SKLV",false)
call TriggerAddAction(trg,function itemthrow___SyncSKLV)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"SKMN",false)
call TriggerAddAction(trg,function itemthrow___SyncSKMN)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"SAP",false)
call TriggerAddAction(trg,function itemthrow___SyncSAP)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"Bool",false)
call TriggerAddAction(trg,function itemthrow___SyncBool)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"KNG",false)
call TriggerAddAction(trg,function itemthrow___SyncKNG)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"Kool",false)
call TriggerAddAction(trg,function itemthrow___SyncKool)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"GLY",false)
call TriggerAddAction(trg,function itemthrow___SyncGLY)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"SKRG",false)
call TriggerAddAction(trg,function itemthrow___SyncSKRG)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"SKRP",false)
call TriggerAddAction(trg,function itemthrow___SyncSKRP)
set trg=null
endfunction
function Setting___MouseClick takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerUIEventPlayer())
local integer f=DzGetTriggerUIEventFrame()
local integer fid=LoadInteger(Hash,f,$3F3A767F)
if fid==1 then
if myEffectSys[pid]==false then
set myEffectSys[pid]=true
if(GetLocalPlayer()==Player(pid))then
call DzFrameSetText(f,"내 이펙트 보기 : ON")
endif
else
set myEffectSys[pid]=false
if(GetLocalPlayer()==Player(pid))then
call DzFrameSetText(f,"내 이펙트 보기 : OFF")
endif
endif
endif
if fid==2 then
if frEffectSys[pid]==false then
set frEffectSys[pid]=true
if(GetLocalPlayer()==ConvertedPlayer(pid+1))then
call DzFrameSetText(f,"아군 이펙트 보기 : ON")
endif
else
set frEffectSys[pid]=false
if(GetLocalPlayer()==ConvertedPlayer(pid+1))then
call DzFrameSetText(f,"아군 이펙트 보기 : OFF")
endif
endif
endif
endfunction
function Setting___FrameShow takes boolean bol returns nothing
local integer f=DzFrameFindByName("SeTs_IconTriangle",0)
call DzFrameShow(DzFrameFindByName("SeTs_Back",0),Setting_Visility)
call DzFrameShow(DzFrameFindByName("SeTs_IconDisable",0),Setting_Visility)
if Setting_Visility then
call DzFrameShow(DzFrameFindByName("SeTs_Back",0),true)
call DzFrameSetText(DzFrameFindByName("SeTs_IconName",0),"|CFFBF9900설정")
call DzFrameSetTexture(f,"UI\\Widgets\\Glues\\SinglePlayerSkirmish-ScrollBarDownButton.blp",0)
call DzFrameSetPoint(f,JN_FRAMEPOINT_TOPRIGHT,DzFrameFindByName("SeTs_Icon",0),JN_FRAMEPOINT_TOPRIGHT,-0.0015,-0.0014)
else
call DzFrameSetText(DzFrameFindByName("SeTs_IconName",0),"|CFFFFCC00설정")
call DzFrameSetTexture(f,"UI\\Widgets\\Glues\\SinglePlayerSkirmish-ScrollBarUpButton.blp",0)
call DzFrameSetPoint(f,JN_FRAMEPOINT_TOPRIGHT,DzFrameFindByName("SeTs_Icon",0),JN_FRAMEPOINT_TOPRIGHT,-0.0015,-0.002)
endif
endfunction
function Setting___IconClick takes nothing returns nothing
set Setting_Visility=not Setting_Visility
call Setting___FrameShow(Setting_Visility)
endfunction
function Setting___ESC takes nothing returns nothing
if Setting_Visility then
set Setting_Visility=false
call Setting___FrameShow(Setting_Visility)
endif
endfunction
function Setting___DelayedInit takes nothing returns nothing
local integer UI=DzGetGameUI()
local integer Main
local integer loopA
local integer loopB
local integer temp
local integer f
local real offset=0.05
set f=DzCreateFrame("SeTs_Icon",UI,0)
call DzFrameSetAbsolutePoint(f,JN_FRAMEPOINT_CENTER,0.060,0.5575)
call DzFrameShow(DzFrameFindByName("SeTs_IconDisable",0),false)
call DzFrameSetScriptByCode(DzFrameFindByName("SeTs_Icon",0),JN_FRAMEEVENT_CONTROL_CLICK,function Setting___IconClick,false)
set Main=DzCreateFrame("SeTs_Back",UI,0)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.405,0.355)
call DzFrameShow(Main,false)
call DzFrameSetScriptByCode(DzFrameFindByName("SeTs_Close",0),JN_FRAMEEVENT_CONTROL_CLICK,function Setting___IconClick,false)
set loopA=0
loop
exitwhen loopA>1
set loopB=0
set temp=loopB+loopA*20
set f=DzCreateFrame("ScriptDialogButton",Main,temp)
call DzFrameSetPoint(f,JN_FRAMEPOINT_TOPLEFT,Main,JN_FRAMEPOINT_TOPLEFT,0.007+loopB*offset,-0.042-loopA*offset)
call DzFrameSetSize(f,0.185,0.04)
call SaveInteger(Hash,f,$FA4531C3,temp)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_CONTROL_CLICK,function Setting___MouseClick,false)
if loopA==0 then
call SaveInteger(Hash,f,$3F3A767F,1)
call DzFrameSetText(f,"내 이펙트 보기 : ON")
elseif loopA==1 then
call SaveInteger(Hash,f,$3F3A767F,2)
call DzFrameSetText(f,"아군 이펙트 보기 : ON")
endif
set loopB=loopB+1
set loopA=loopA+1
endloop
endfunction
function Setting___OnInit takes nothing returns nothing
local integer i
local trigger trg
set trg=CreateTrigger()
set i=0
loop
exitwhen i>6
call TriggerRegisterPlayerEvent(trg,Player(i),EVENT_PLAYER_END_CINEMATIC)
set i=i+1
endloop
call TriggerAddAction(trg,function Setting___ESC)
call TimerStart(CreateTimer(),0,false,function Setting___DelayedInit)
set trg=null
endfunction
function SkillUP_RefreshSkillDes takes integer pid,integer Spid,integer f returns nothing
local integer f3=DzFrameFindByName("Sk_DesBack",0)
local integer temp
local integer i
local unit u=Charcter[pid+1]
local integer Lv
if Spid==ChSkillQ[pid+1]then
set Lv=LoadInteger(udg_Hashtable,pid+1,$FAFE5485)
elseif Spid==ChSkillW[pid+1]then
set Lv=LoadInteger(udg_Hashtable,pid+1,$457BCFC0)
elseif Spid==ChSkillE[pid+1]then
set Lv=LoadInteger(udg_Hashtable,pid+1,$6074AEF9)
elseif Spid==ChSkillR[pid+1]then
set Lv=LoadInteger(udg_Hashtable,pid+1,$BB70E228)
elseif Spid==ChSkillT[pid+1]then
set Lv=LoadInteger(udg_Hashtable,pid+1,$132FA1F5)
elseif Spid=='P999' then
set Lv=0
elseif Spid=='P998' then
set Lv=0
endif
call DzFrameShow(f3,true)
call DzFrameSetPoint(f3,JN_FRAMEPOINT_BOTTOM,f,JN_FRAMEPOINT_TOP,0,0)
call DzFrameSetTexture(DzFrameFindByName("Sk_DesIcon",0),EXGetAbilityString(Spid,1,ABILITY_DATA_ART),0)
call DzFrameSetText(DzFrameFindByName("Sk_DesName",0),EXGetAbilityString(Spid,2,ABILITY_DATA_TIP))
call DzFrameSetText(DzFrameFindByName("Sk_DesClass",0),"스킬 레벨 : "+I2S(Lv))
if Spid=='P998' then
call DzFrameSetText(DzFrameFindByName("Sk_DesOpt",0),I2S(LoadInteger(udg_Hash,pid+1,$D161E339))+EXGetAbilityString(Spid,2,ABILITY_DATA_UBERTIP))
else
call DzFrameSetText(DzFrameFindByName("Sk_DesOpt",0),EXGetAbilityString(Spid,2,ABILITY_DATA_UBERTIP))
endif
call DzFrameSetSize(f3,0.18,0.15+JNStringCount(EXGetAbilityString(Spid,2,ABILITY_DATA_UBERTIP),"")*0.0003)
set u=null
endfunction
function SkillUP___SkillTextIn takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerUIEventPlayer())
local integer f=DzGetTriggerUIEventFrame()
local integer fid=LoadInteger(udg_Hash,f,$FA4531C3)
local unit u=Charcter[pid+1]
if fid==1 then
set fid=ChSkillQ[pid+1]
endif
if fid==2 then
set fid=ChSkillW[pid+1]
endif
if fid==3 then
set fid=ChSkillE[pid+1]
endif
if fid==4 and LoadBoolean(udg_Hash,pid+1,$C1C91B0E)then
set fid=ChSkillR[pid+1]
elseif fid==4 and not LoadBoolean(udg_Hash,pid+1,$C1C91B0E)then
set fid='P999'
endif
if fid==5 and GetUnitLevel(u)>=LoadInteger(udg_Hash,pid+1,$D161E339)then
set fid=ChSkillT[pid+1]
elseif fid==5 and GetUnitLevel(u)<LoadInteger(udg_Hash,pid+1,$D161E339)then
set fid='P998'
endif
call SkillUP_RefreshSkillDes(pid,fid,f)
set u=null
endfunction
function SkillUP___SkillTextOut takes nothing returns nothing
call DzFrameShow(DzFrameFindByName("Sk_DesBack",0),false)
endfunction
function SkillUP___SkillClick takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerUIEventPlayer())
local integer f=DzGetTriggerUIEventFrame()
local integer fid=LoadInteger(udg_Hash,f,$FA4531C3)
local unit u=Charcter[pid+1]
local integer SkillPoint=LoadInteger(udg_Hash,pid+1,$7B014FA1)
local boolean a=false
local integer f2
local integer Lv
local integer LvUP
local real mana
if SkillPoint>=1 and not LoadBoolean(udg_Hash,pid+1,$9CB2F91A)then
if fid==1 then
set fid=ChSkillQ[pid+1]
set Lv=LoadInteger(udg_Hashtable,pid+1,$FAFE5485)
set LvUP=LoadInteger(udg_Hashtable,pid+1,$88E0F85F)
endif
if fid==2 then
set fid=ChSkillW[pid+1]
set Lv=LoadInteger(udg_Hashtable,pid+1,$457BCFC0)
set LvUP=LoadInteger(udg_Hashtable,pid+1,$ABD3E955)
endif
if fid==3 then
set fid=ChSkillE[pid+1]
set Lv=LoadInteger(udg_Hashtable,pid+1,$6074AEF9)
set LvUP=LoadInteger(udg_Hashtable,pid+1,$5E6EF8DA)
endif
if fid==4 and GetUnitLevel(u)>=30 then
set fid=ChSkillR[pid+1]
set Lv=LoadInteger(udg_Hashtable,pid+1,$BB70E228)
set LvUP=LoadInteger(udg_Hashtable,pid+1,$A8D71652)
elseif fid==4 and GetUnitLevel(u)<30 then
set fid='P999'
endif
if fid==5 and GetUnitLevel(u)>=LoadInteger(udg_Hash,pid+1,$D161E339)then
set fid=ChSkillT[pid+1]
set Lv=LoadInteger(udg_Hashtable,pid+1,$132FA1F5)
set LvUP=LoadInteger(udg_Hashtable,pid+1,$B491D29B)
elseif fid==5 and GetUnitLevel(u)<LoadInteger(udg_Hash,pid+1,$D161E339)then
set fid='P998'
endif
if fid==ChSkillT[pid+1]and LvUP==0 then
call DzSyncData("SKL",I2S(fid))
call DzFrameShow(DzFrameFindByName("Sk_SkillIconChain",5),true)
call DzFrameShow(DzFrameFindByName("Sk_SkillIconBlack",5),true)
set Lv=Lv+1
call DzSyncData("SKLV","TLv"+"/"+I2S(Lv))
call DzSyncData("SKLV","TLvUP"+"/"+I2S(1))
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cff90ee90T 스킬을 습득했다!")
call CharacterToolTip(pid+1)
set SkillPoint=SkillPoint-1
if SkillPoint<=0 then
set SkillUP_Visility=false
call DzFrameSetModel(DzFrameFindByName("SkillLvUP",0),"war3mapImported\\@SY_SkillLVupDis.mdx",0,0)
call DzFrameShow(DzFrameFindByName("Sk_Back",0),false)
endif
set a=true
endif
if fid==ChSkillR[pid+1]and LvUP==0 then
call DzSyncData("SKL",I2S(fid))
set Lv=Lv+1
call DzSyncData("SKLV","RLv"+"/"+I2S(Lv))
call DzSyncData("SKLV","RLvUP"+"/"+I2S(1))
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cff90ee90R 스킬을 습득했다!")
call CharacterToolTip(pid+1)
set SkillPoint=SkillPoint-1
if GetUnitLevel(u)<=44 then
call SaveBoolean(udg_Hash,pid+1,$C1C91B0E,false)
if GetLocalPlayer()==Player(pid)then
call DzFrameShow(DzFrameFindByName("Sk_SkillIconBlack",4),true)
call DzFrameShow(DzFrameFindByName("Sk_SkillIconChain",4),true)
endif
endif
if SkillPoint<=0 then
set SkillUP_Visility=false
call DzFrameSetModel(DzFrameFindByName("SkillLvUP",0),"war3mapImported\\@SY_SkillLVupDis.mdx",0,0)
call DzFrameShow(DzFrameFindByName("Sk_Back",0),false)
endif
set a=true
endif
if fid=='P999' or fid=='P998' or(fid==ChSkillR[pid+1]and((LvUP==1 and GetUnitLevel(u)<=44)or(LvUP==2 and GetUnitLevel(u)<=59)))then
set a=true
endif
if not a then
if fid==ChSkillR[pid+1]and LvUP==3 then
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cffdb7093R 스킬은 최대 3번만 강화가 가능합니다.")
elseif fid==ChSkillT[pid+1]and LvUP==1 then
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cffdb7093T 스킬은 습득만 가능합니다.")
elseif LvUP==4 then
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cffdb7093Q / W / E 스킬은 최대 4번만 강화가 가능합니다.")
else
set Lv=Lv+1
set LvUP=LvUP+1
if fid==ChSkillQ[pid+1]then
call DzSyncData("SKLV","QLv"+"/"+I2S(Lv))
call DzSyncData("SKLV","QLvUP"+"/"+I2S(LvUP))
set mana=LoadReal(udg_Hashtable,pid+1,$9B58470C)
set mana=mana+LoadReal(udg_Hashtable,pid+1,$88E0F85F)
call DzSyncData("SKMN","Qmana"+"/"+R2S(mana))
call CharacterToolTip(pid+1)
endif
if fid==ChSkillW[pid+1]then
call DzSyncData("SKLV","WLv"+"/"+I2S(Lv))
call DzSyncData("SKLV","WLvUP"+"/"+I2S(LvUP))
set mana=LoadReal(udg_Hashtable,pid+1,$E755DDB8)
set mana=mana+LoadReal(udg_Hashtable,pid+1,$ABD3E955)
call DzSyncData("SKMN","Wmana"+"/"+R2S(mana))
call CharacterToolTip(pid+1)
endif
if fid==ChSkillE[pid+1]then
call DzSyncData("SKLV","ELv"+"/"+I2S(Lv))
call DzSyncData("SKLV","ELvUP"+"/"+I2S(LvUP))
set mana=LoadReal(udg_Hashtable,pid+1,$A2229E00)
set mana=mana+LoadReal(udg_Hashtable,pid+1,$5E6EF8DA)
call DzSyncData("SKMN","Emana"+"/"+R2S(mana))
call CharacterToolTip(pid+1)
endif
if fid==ChSkillR[pid+1]then
call DzSyncData("SKLV","RLv"+"/"+I2S(Lv))
call DzSyncData("SKLV","RLvUP"+"/"+I2S(LvUP))
set mana=LoadReal(udg_Hashtable,pid+1,$C3EA9E83)
set mana=mana+LoadReal(udg_Hashtable,pid+1,$A8D71652)
call DzSyncData("SKMN","Rmana"+"/"+R2S(mana))
call CharacterToolTip(pid+1)
if GetUnitLevel(u)<=60 then
call SaveBoolean(udg_Hash,pid+1,$C1C91B0E,false)
if GetLocalPlayer()==Player(pid)then
call DzFrameShow(DzFrameFindByName("Sk_SkillIconBlack",4),true)
call DzFrameShow(DzFrameFindByName("Sk_SkillIconChain",4),true)
endif
endif
endif
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cff90ee90"+GetObjectName(fid)+" 스킬의 레벨이 상승했습니다.")
set SkillPoint=SkillPoint-1
if SkillPoint<=0 then
set SkillUP_Visility=false
if GetLocalPlayer()==Player(pid)then
call DzFrameSetModel(DzFrameFindByName("SkillLvUP",0),"war3mapImported\\@SY_SkillLVupDis.mdx",0,0)
call DzFrameShow(DzFrameFindByName("Sk_Back",0),false)
endif
endif
endif
endif
if fid==ChSkillR[pid+1]and LvUP==3 and not LoadBoolean(udg_Hash,pid+1,$8B3E03E8)then
call DzFrameShow(DzFrameFindByName("Sk_SkillIconChain",4),true)
call DzFrameShow(DzFrameFindByName("Sk_SkillIconBlack",4),true)
call SaveBoolean(udg_Hash,pid+1,$8B3E03E8,false)
endif
if fid==ChSkillQ[pid+1]and LvUP==4 and not LoadBoolean(udg_Hash,pid+1,$D831B949)then
call DzFrameShow(DzFrameFindByName("Sk_SkillIconChain",1),true)
call DzFrameShow(DzFrameFindByName("Sk_SkillIconBlack",1),true)
call SaveBoolean(udg_Hash,pid+1,$D831B949,false)
endif
if fid==ChSkillW[pid+1]and LvUP==4 and not LoadBoolean(udg_Hash,pid+1,$14FFAF99)then
call DzFrameShow(DzFrameFindByName("Sk_SkillIconChain",2),true)
call DzFrameShow(DzFrameFindByName("Sk_SkillIconBlack",2),true)
call SaveBoolean(udg_Hash,pid+1,$14FFAF99,false)
endif
if fid==ChSkillE[pid+1]and LvUP==4 and not LoadBoolean(udg_Hash,pid+1,$A4FDD264)then
call DzFrameShow(DzFrameFindByName("Sk_SkillIconChain",3),true)
call DzFrameShow(DzFrameFindByName("Sk_SkillIconBlack",3),true)
call SaveBoolean(udg_Hash,pid+1,$A4FDD264,false)
endif
call DzSyncData("ING",I2S(SkillPoint))
call SaveBoolean(udg_Hash,pid+1,$9CB2F91A,true)
call DzSyncData("Bool","SKUPok/true")
else
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cffffa500스킬포인트가 부족하거나 연타로 인해 무효처리됬습니다.")
endif
set u=null
endfunction
function SkillUP___ESC takes nothing returns nothing
if GetLocalPlayer()==GetTriggerPlayer()then
if SkillUP_Visility then
set SkillUP_Visility=false
call DzFrameShow(DzFrameFindByName("Sk_Back",0),false)
endif
endif
endfunction
function SkillUP___MiniButtonEnter takes nothing returns nothing
local integer f=DzFrameFindByName("Sk_MiniIconNameBack",0)
local integer f2=DzGetTriggerUIEventFrame()
local integer pid=GetPlayerId(DzGetTriggerUIEventPlayer())
local integer Sp=LoadInteger(udg_Hash,pid+1,$7B014FA1)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOM,f2,JN_FRAMEPOINT_TOP,0,0.001)
call DzFrameSetText(DzFrameFindByName("Sk_MiniIconNameText",0),"|CFFFFCC00남은 스킬 포인트 : "+I2S(Sp))
endfunction
function SkillUP___MiniButtonLeave takes nothing returns nothing
call DzFrameShow(DzFrameFindByName("Sk_MiniIconNameBack",0),false)
endfunction
function SkillUP___MiniButtonClick takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerUIEventPlayer())
if GetLocalPlayer()==Player(pid)then
if SkillUP_Visility==false then
set SkillUP_Visility=true
call DzFrameShow(DzFrameFindByName("Sk_Back",0),true)
call DzFrameShow(DzFrameFindByName("Sk2_Back",0),false)
else
set SkillUP_Visility=false
call DzFrameShow(DzFrameFindByName("Sk_Back",0),false)
endif
endif
endfunction
function SkillUP___DelayedInit takes nothing returns nothing
local integer UI=DzGetGameUI()
local integer Main
local integer f
local integer f2
local integer loopA
local integer temp
local real offset=0.045
set Main=DzCreateFrame("Sk_Button",UI,0)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.195,0.129)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_ENTER,function SkillUP___MiniButtonEnter,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_LEAVE,function SkillUP___MiniButtonLeave,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_CONTROL_CLICK,function SkillUP___MiniButtonClick,false)
call DzFrameShow(Main,false)
call DzCreateFrame("Sk_MiniIconNameBack",Main,0)
call DzFrameShow(Main,false)
set Main=DzCreateFrameByTagName("SPRITE","SkillLvUP",UI,"",0)
call DzFrameSetPoint(Main,JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("Sk_Button",0),JN_FRAMEPOINT_CENTER,0,0)
call DzFrameSetModel(Main,"war3mapImported\\@SY_SkillLVupDis.mdx",0,0)
call DzFrameShow(Main,false)
set Main=DzCreateFrame("Sk_Back",UI,0)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.325,0.159)
call DzFrameShow(Main,false)
set loopA=1
loop
exitwhen loopA>5
set temp=loopA
set f=DzCreateFrame("Sk_Slot",Main,temp)
call DzFrameSetPoint(f,JN_FRAMEPOINT_TOPLEFT,Main,JN_FRAMEPOINT_TOPLEFT,-0.031+loopA*offset,-0.01)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_MOUSE_ENTER,function SkillUP___SkillTextIn,false)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_MOUSE_LEAVE,function SkillUP___SkillTextOut,false)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_CONTROL_CLICK,function SkillUP___SkillClick,false)
call SaveInteger(udg_Hash,f,$FA4531C3,temp)
set f2=DzCreateFrame("Sk_SkillIcon",Main,temp)
call DzFrameSetPoint(f2,JN_FRAMEPOINT_CENTER,f,JN_FRAMEPOINT_CENTER,0,0)
call DzFrameSetTexture(f2,"",0)
set f2=DzCreateFrame("Sk_SkillIconChain",Main,temp)
call DzFrameSetPoint(f2,JN_FRAMEPOINT_CENTER,f,JN_FRAMEPOINT_CENTER,0,0)
if loopA==4 or loopA==5 then
call DzFrameShow(f2,true)
else
call DzFrameShow(f2,false)
endif
set f2=DzCreateFrame("Sk_SkillIconBlack",Main,temp)
call DzFrameSetPoint(f2,JN_FRAMEPOINT_CENTER,f,JN_FRAMEPOINT_CENTER,0,0)
if loopA==4 or loopA==5 then
call DzFrameShow(f2,true)
else
call DzFrameShow(f2,false)
endif
set loopA=loopA+1
endloop
call DzCreateFrame("Sk_DesBack",UI,0)
endfunction
function SkillUP___OnInit takes nothing returns nothing
local trigger trg
local integer i
set trg=CreateTrigger()
set i=0
loop
exitwhen i>6
call TriggerRegisterPlayerEvent(trg,Player(i),EVENT_PLAYER_END_CINEMATIC)
set i=i+1
endloop
call TriggerAddAction(trg,function SkillUP___ESC)
call TimerStart(CreateTimer(),0.07,false,function SkillUP___DelayedInit)
set trg=null
endfunction
function MouseInCommon___izenCheck takes integer a returns boolean
if a=='N031' or a=='N032' or a=='N033' or a=='C013' or a=='C014' or a=='R011' or a=='R012' or a=='R013' or a=='U014' then
return true
else
return false
endif
endfunction
function MouseInCommon___ichigoCheck takes integer a returns boolean
if a=='N019' or a=='N020' or a=='N021' or a=='C009' or a=='C010' or a=='U004' or a=='U006' then
return true
else
return false
endif
endfunction
function MouseInCommon___MouseLeftClick takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerKeyPlayer())
local integer i
if not Inventory_AreYouPickUp and Inventory_Snap and not Inventory_Drag then
set Inventory_Drag=true
call DzFrameSetUpdateCallbackByCode(function UpdateCallback_Start)
endif
endfunction
function MouseInCommon___MouseLeftDetach takes nothing returns nothing
if Inventory_Drag then
set Inventory_Drag=false
endif
endfunction
function MouseInCommon___MouseRightClick takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerKeyPlayer())
local integer i
local integer itid
local integer temp
if RightClickEnable then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
else
if Inventory_Visility==true then
set i=0
loop
exitwhen i>30
if Inventory_FrameIn[i]and LoadBoolean(Hash,pid,$FD5E106+i)==true and not ArtSkillBlock[pid+1]then
if skc[pid+1]!=0 then
if Articool[pid+1]then
call DzSyncData("SAP",I2S(skc[pid+1])+"/false")
else
call DzSyncData("SKR",I2S(skc[pid+1]))
endif
endif
set temp=LoadInteger(Hash,pid,$DA437F80+i)
set Articool[pid+1]=false
if temp=='U005' then
set skc[pid+1]='AF00'
set Articool[pid+1]=true
elseif temp=='U002' then
set skc[pid+1]='AF01'
elseif temp=='US02' then
set skc[pid+1]='AF02'
elseif MouseInCommon___izenCheck(temp)then
set skc[pid+1]=0
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cffFF0000다음 진화까지 남은 시간 : "+I2S(R2I(LoadReal(udg_Hashtable,pid+1,$DA557887))))
elseif MouseInCommon___ichigoCheck(temp)then
set skc[pid+1]=0
call DisplayTimedTextToPlayer(Player(pid),0,0,5.00,"|cffFF0000처치 진행도 : "+I2S(Ichigointeger[1]))
elseif temp=='C068' then
set skc[pid+1]=0
call DisplayTimedTextToPlayer(Player(pid),0,0,5.00,"|cffFF0000고객님이 소모한 골드 : "+I2S(R2I(LoadReal(udg_Hash,pid+1,$C2204BA2))))
elseif temp=='C021' then
set skc[pid+1]='AF03'
elseif temp=='C017' and not BossBattle then
set skc[pid+1]='AF04'
set Articool[pid+1]=true
elseif temp=='U019' then
set skc[pid+1]='AF05'
elseif temp=='U025' then
set skc[pid+1]='AF06'
set Articool[pid+1]=true
elseif temp=='R025' then
set skc[pid+1]='AF07'
elseif temp=='R028' then
set skc[pid+1]='AF08'
set Articool[pid+1]=true
elseif temp=='R023' then
set skc[pid+1]='AF09'
set Articool[pid+1]=true
elseif temp=='U008' then
set skc[pid+1]='AF10'
set Articool[pid+1]=true
elseif temp=='R044' then
set skc[pid+1]='AF11'
elseif temp=='U049' then
set skc[pid+1]='AF12'
set Articool[pid+1]=true
elseif temp=='U046' then
set skc[pid+1]='AF13'
elseif temp=='U050' then
set skc[pid+1]='AF14'
set Articool[pid+1]=true
elseif temp=='U056' then
set skc[pid+1]='AF15'
set Articool[pid+1]=true
elseif temp=='R053' then
set skc[pid+1]='AF16'
set Articool[pid+1]=true
elseif temp=='C049' or temp=='C051' or temp=='US07' then
set skc[pid+1]='AF17'
set Articool[pid+1]=true
elseif temp=='C054' then
set skc[pid+1]='AF18'
elseif temp=='R055' then
set skc[pid+1]='AF19'
elseif temp=='U061' then
set skc[pid+1]='AF20'
elseif temp=='R065' then
set skc[pid+1]='AF21'
set Articool[pid+1]=true
elseif temp=='U078' then
set skc[pid+1]='AF22'
elseif temp=='U079' then
set skc[pid+1]='AF23'
elseif temp=='U083' then
set skc[pid+1]='AF24'
else
set skc[pid+1]=0
endif
if skc[pid+1]!=0 then
if Articool[pid+1]==true then
call DzSyncData("SAP",I2S(skc[pid+1])+"/true")
else
call DzSyncData("SKL",I2S(skc[pid+1]))
endif
endif
exitwhen true
endif
set i=i+1
endloop
endif
endif
endif
endfunction
function MouseInCommon___OnInit takes nothing returns nothing
local trigger trg=CreateTrigger()
call DzTriggerRegisterMouseEventByCode(trg,JN_MOUSE_BUTTON_TYPE_LEFT,1,false,function MouseInCommon___MouseLeftClick)
set trg=CreateTrigger()
call DzTriggerRegisterMouseEventByCode(trg,JN_MOUSE_BUTTON_TYPE_LEFT,0,false,function MouseInCommon___MouseLeftDetach)
set trg=CreateTrigger()
call DzTriggerRegisterMouseEventByCode(trg,JN_MOUSE_BUTTON_TYPE_MIDDLE,0,false,function MouseInCommon___MouseRightClick)
set trg=null
endfunction
function Trig_Player_Out_Actions takes nothing returns nothing
local integer i=0
local integer p=GetPlayerId(GetTriggerPlayer())+1
call SaveBoolean(System,p,$98AB695D,false)
call SetPlayerName(GetTriggerPlayer(),"|cff808080"+LoadStr(udg_Hash,p,$78BD9BC9))
loop
exitwhen i>5
call DisplayTimedTextToPlayer(Player(i),0,0,10,"|cffFF0000[시스템] - "+GetPlayerName(GetTriggerPlayer())+"|cffFF0000가 도망갔다.")
set i=i+1
endloop
endfunction
function InitTrig_Player_Out takes nothing returns nothing
local integer i=0
set gg_trg_Player_Out=CreateTrigger()
loop
exitwhen i>5
call TriggerRegisterPlayerEvent(gg_trg_Player_Out,Player(i),EVENT_PLAYER_LEAVE)
set i=i+1
endloop
call TriggerAddAction(gg_trg_Player_Out,function Trig_Player_Out_Actions)
endfunction
function Setting takes nothing returns nothing
if GetOwningPlayer(GetEnumUnit())==Player(10)then
set udg_regionI=(udg_regionI+1)
call SaveUnitHandle(System,10,udg_regionI,GetEnumUnit())
call SaveReal(System,$A99320FA,udg_regionI,GetUnitX(GetEnumUnit()))
call SaveReal(System,$FDF65382,udg_regionI,GetUnitY(GetEnumUnit()))
endif
endfunction
function downloadCallback takes nothing returns nothing
local player user=(JNStashNet__EV_USER)
if(JNStashNet__EV_FINISHED)then
if(JNStashNet__EV_RESULT)then
set PLAYER_DATA[GetPlayerId(user)]=(JNStashNet__EV_STASH)
endif
endif
endfunction
function Sets takes nothing returns nothing
local integer a
local integer c
local integer b
local timer t
local group setU=CreateGroup()
local location loc=GetRectCenter(gg_rct_WisspZone)
local unit u
call StartFunction()
set a=1
set randomSeed=R2I(GetRandomReal(1,2)*100)
set seedtimesec=0
call SetMaxMoveSpeedLimit(1000)
set Sandback=gg_unit_DM01_0078
call SaveInteger(udg_Hash,0,$46FBB73B,1)
call SaveInteger(udg_Hash,0,$3E003FA5,1)
call SaveInteger(udg_Hash,0,$7653121A,1)
set ApplyDM=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),'sys8',GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone),270)
call UnitAddAbility(ApplyDM,'A015')
call SetTimeOfDay(6.00)
set bam=false
set UniqueMax=45
set RareMax=70
set UncarmonMax=67
set NormalMax=60
set SpecialArtMax=5
set Playint=0
set LastBGM=udg_SND
set LastEFVoice=udg_SND
set PlayerColor[1]="|cffff0000"
set PlayerColor[2]="|cff0000ff"
set PlayerColor[3]="|cff00ffff"
set PlayerColor[4]="|cff9932cc"
set PlayerColor[5]="|cffffff00"
call FogEnableOff()
call FogMaskEnableOff()
call SetTerrainFogEx(1,0,0,0,0,0,0)
call GroupEnumUnitsInRect(setU,bj_mapInitialPlayableArea,null)
call ForGroupBJ(setU,function Setting)
call GroupClear(setU)
call DestroyGroup(setU)
call StopMusic(false)
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"도움말","-50 ~ -300 시야를 조절합니다\n-kill 캐릭터를 즉시 사망시킵니다.\n-sandback 숫자 샌드백의 방어력을 조절합니다.\n-point 숙련도 점수를 확인합니다.\n-이모티콘 이모티콘을 안보이게 숨깁니다.\n-이치고 이치고 아티팩트 대쉬가 오류났을때 입력시 디버깅됩니다.\n\n아군 체력 표시 :\n-hp 1 ~ -hp 5\n다시 입력할경우 사라집니다.\n\n스텟 표시 안하기 :\n-OFF 를 입력할경우 캐릭터 포트레잇을 클릭해서 상호작용이 가능해집니다.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"Special Thanks","제정신이아님\nscvgogo\n평타천국","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"모델지원","Cyn3\n흑형되기직전\n그외 다른분들\n\n감사합니다.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"레벨 업 정보","캐릭터의 레벨이 3 증가할때마다 아티팩트 뽑기권을 1장 얻습니다.\n아티팩트 뽑기권은 나무의 숫자로 확인하실수있습니다.\n\n캐릭터의 레벨이 5 증가할때마다 캐릭터 그림의 좌측 상단의 버튼을 눌러 스킬의 레벨을 상승시킬수있습니다.\n스킬은 Q / W / E는 각각 4번 , R스킬은 3번 강화가 가능합니다.\nR스킬과 T스킬을 사용하기위해서는 스킬포인트를 하나 소모해서 습득해야합니다.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call TriggerRegisterPlayerUnitEvent(gg_trg_CreepRegion,Player(10),EVENT_PLAYER_UNIT_DEATH,null)
call TriggerRegisterEnterRectSimple(gg_trg_wave_unit_setting1,gg_rct_wave2_attack1)
call TriggerRegisterEnterRectSimple(gg_trg_wave_unit_setting2,gg_rct_wave2_attack2)
call TriggerRegisterEnterRectSimple(gg_trg_wave_unit_setting3,gg_rct_wave2_attack3)
call TriggerRegisterEnterRectSimple(gg_trg_wave_unit_setting4,gg_rct_AttackZone)
call DialogSetMessageBJ(udg_Dialog,"난이도 선택")
call DialogAddButtonBJ(udg_Dialog,"|cff00ff7f쉬움")
set udg_Dialog_B[1]=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(udg_Dialog,"|cffff7f50어려움")
set udg_Dialog_B[2]=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(udg_Dialog,"|cffff0000지옥")
set udg_Dialog_B[3]=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(udg_Dialog,"|cffb22222악|cff8b4513몽")
set udg_Dialog_B[4]=GetLastCreatedButtonBJ()
set customDialogButton[0]=DialogAddButton(udg_CustomDialog[0],"1번 효과 - 목숨 2개 증가",0)
set customDialogButton[1]=DialogAddButton(udg_CustomDialog[0],"2번 효과 - 아티팩트 선택지 증가",0)
set customDialogButton[2]=DialogAddButton(udg_CustomDialog[0],"3번 효과 - 창고에서 아티팩트 소거",0)
call DialogSetMessageBJ(udg_CustomDialog[1],"무속성 > 선택한 속성으로 변경")
set customDialogButton[3]=DialogAddButton(udg_CustomDialog[1],"불 속성 - 파이어벤딩",0)
set customDialogButton[4]=DialogAddButton(udg_CustomDialog[1],"얼음 속성 - 워터벤딩",0)
set customDialogButton[5]=DialogAddButton(udg_CustomDialog[1],"바람 속성 - 에어벤딩",0)
set customDialogButton[6]=DialogAddButton(udg_CustomDialog[1],"번개 속성 - 라이트닝벤딩",0)
set customDialogButton[7]=DialogAddButton(udg_CustomDialog[2],"해주하기 : 이단자의 가면",0)
set customDialogButton[8]=DialogAddButton(udg_CustomDialog[2],"해주하기 : 옅게 오염된 칼날",0)
set customDialogButton[9]=DialogAddButton(udg_CustomDialog[2],"해주하기 : 님필리아의 반지",0)
set customDialogButton[10]=DialogAddButton(udg_CustomDialog[2],"해주하기 : 더러워진 은재 목주",0)
set customDialogButton[11]=DialogAddButton(udg_CustomDialog[2],"해주하기 : 집행인의 장갑",0)
set customDialogButton[12]=DialogAddButton(udg_CustomDialog[2],"해주하기 : 저주받은 꽃",0)
set customDialogButton[13]=DialogAddButton(udg_CustomDialog[2],"다음 페이지로",0)
set customDialogButton[14]=DialogAddButton(udg_CustomDialog[2],"결정 취소",0)
set customDialogButton[15]=DialogAddButton(udg_CustomDialog[3],"해주하기 : 어둠의 서",0)
set customDialogButton[16]=DialogAddButton(udg_CustomDialog[3],"해주하기 : 아포칼립스 바이러스",0)
set customDialogButton[17]=DialogAddButton(udg_CustomDialog[3],"해주하기 : 이세상 모든 악",0)
set customDialogButton[18]=DialogAddButton(udg_CustomDialog[3],"해주하기 : 악마와의 계약",0)
set customDialogButton[19]=DialogAddButton(udg_CustomDialog[3],"해주하기 : 광전사",0)
set customDialogButton[21]=DialogAddButton(udg_CustomDialog[3],"해주하기 : 사와리네코",0)
set customDialogButton[22]=DialogAddButton(udg_CustomDialog[3],"해주하기 : 뱀파이어의 혈액",0)
set customDialogButton[23]=DialogAddButton(udg_CustomDialog[3],"해주하기 : 다인슬라이프",0)
set customDialogButton[20]=DialogAddButton(udg_CustomDialog[3],"결정 취소",0)
set customDialogButton[50]=DialogAddButton(udg_CustomDialog[5],"사용 횟수 증가",0)
set customDialogButton[51]=DialogAddButton(udg_CustomDialog[5],"회복량 증가",0)
set customDialogButton[52]=DialogAddButton(udg_CustomDialog[5],"쿨타임 감소",0)
set u=gg_unit_h000_0013
call SaveReal(Hash_Stat,GetHandleId(u),$7FAFA384,100)
call UnitAddAbility(gg_unit_h000_0013,'SY00')
call UnitRemoveAbility(gg_unit_h000_0013,'SY00')
set ArtSkillCode1[1]='P101'
set ArtSkillCode2[1]='P102'
set ArtSkillCode3[1]='P103'
set ArtSkillCode4[1]='P104'
set ArtSkillCode1[2]='P201'
set ArtSkillCode2[2]='P202'
set ArtSkillCode3[2]='P203'
set ArtSkillCode4[2]='P204'
set ArtSkillCode1[3]='P301'
set ArtSkillCode2[3]='P302'
set ArtSkillCode3[3]='P303'
set ArtSkillCode4[3]='P304'
set ArtSkillCode1[4]='P401'
set ArtSkillCode2[4]='P402'
set ArtSkillCode3[4]='P403'
set ArtSkillCode4[4]='P404'
set ArtSkillCode1[5]='P501'
set ArtSkillCode2[5]='P502'
set ArtSkillCode3[5]='P503'
set ArtSkillCode4[5]='P504'
set CharacterColor[1]='SY05'
set CharacterColor[2]='SY06'
set CharacterColor[3]='SY07'
set CharacterColor[4]='SY08'
set CharacterColor[5]='SY09'
set CharacterColor[6]='P110'
set CharacterColor[7]='P210'
set CharacterColor[8]='P310'
set CharacterColor[9]='P410'
set CharacterColor[10]='P510'
set ChSkillQ[10]='P511'
set ChSkillW[10]='P512'
set ChSkillE[10]='P513'
set ChSkillR[10]='P514'
set ChSkillT[10]='P515'
set TowerStat[1]='A00Z'
set TowerStat[2]='A011'
set TowerStat[3]='A012'
set TowerStat[4]='A013'
set TowerStat[5]='A014'
call UnitAddAbility(gg_unit_n002_0002,TowerStat[1])
call UnitAddAbility(gg_unit_n002_0004,TowerStat[2])
call UnitAddAbility(gg_unit_n002_0005,TowerStat[3])
call UnitAddAbility(gg_unit_n002_0006,TowerStat[4])
call UnitAddAbility(gg_unit_n002_0023,TowerStat[5])
set TraningRoom[1]=gg_rct_TraningRoom1
set TraningRoom[2]=gg_rct_TraningRoom2
set TraningRoom[3]=gg_rct_TraningRoom3
set TraningRoom[4]=gg_rct_TraningRoom4
set TraningRoom[5]=gg_rct_TraningRoom5
call SaveInteger(udg_Hash,999,$3862CC76,1)
call DzSetUnitModel(gg_unit_np05_0115,".mdx")
call DzSetUnitModel(gg_unit_np04_0116,".mdx")
call DzSetUnitModel(gg_unit_np07_0117,".mdx")
call DzSetUnitModel(gg_unit_np06_0118,".mdx")
call DzSetUnitModel(gg_unit_np10_0134,".mdx")
call DzSetUnitModel(gg_unit_np11_0135,".mdx")
call DzSetUnitModel(gg_unit_np12_0136,".mdx")
call DzSetUnitModel(gg_unit_np13_0138,".mdx")
call DzSetUnitModel(gg_unit_np14_0151,".mdx")
call DzSetUnitModel(gg_unit_np15_0152,".mdx")
call DzSetUnitModel(gg_unit_np16_0153,".mdx")
call DzSetUnitModel(gg_unit_np17_0150,".mdx")
call DzSetUnitModel(gg_unit_np18_0140,".mdx")
call DzSetUnitModel(gg_unit_n006_0022,".mdx")
call DzSetUnitModel(gg_unit_n007_0027,".mdx")
call DzSetUnitModel(gg_unit_n008_0028,".mdx")
call TriggerRegisterUnitEvent(gg_trg_Room_Skill,gg_unit_n002_0002,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Room_Skill,gg_unit_n002_0004,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Room_Skill,gg_unit_n002_0005,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Room_Skill,gg_unit_n002_0006,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Room_Skill,gg_unit_n002_0023,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Room_Skill,gg_unit_n004_0133,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerExpireEvent(gg_trg_U061,U061timer)
loop
exitwhen a==6
set c=a-1
call SaveInteger(udg_Hash,a,$41F28DE0,10)
set Charcter[a]=gg_unit_h007_0030
set CharacterDeath[a]=false
set invenClick[a]=true
call SaveReal(System,$11910FBA,a,30)
set ReviveTimer[a]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_Revilve_Hero,ReviveTimer[a])
call SaveInteger(udg_Hash,a,$C8ADDEFD,1)
set Articool[a]=false
set Art3slotLV[a]=0
set Art4slotLV[a]=0
set Art3[a]=0
set Art4[a]=0
set ArtpickSlot[a]=2
set UniqueDrop[a]=6
set RareDrop[a]=20
set UncarmonDrop[a]=30
set HealEF[a]=1.0001
set SpecialArtSET[a]=0
set Skrange[a]=1.0001
set CriticalCheck[a]=false
set N008[a]=false
set Battle[a]=false
set ArtSkillBlock[a]=false
set udg_int[a]=6000
set DashCool[a]=6.00
set poisonPlus[a]=0.00
set ct[a]=1.0001
set Luck[a]=1.0001
set DamageAmp[a]=0.0001
set SandeBisut[a]=false
set DashMove[a]=60
set bj_lastCreatedUnit=CreateUnit(Player(11),'sys8',GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone),270)
set ShacullUnit[a]=bj_lastCreatedUnit
call SaveInteger(udg_Hash,a,$254000DE,3)
call SaveInteger(udg_Hash,a,$D9CFDBAB,3)
call SaveInteger(udg_Hash,a,$6748D1B7,40)
call SaveInteger(udg_Hash,a,$382CD415,25)
call SaveInteger(udg_Hash,a,$39F717C6,0)
call SaveInteger(udg_Hash,a,$9D8A16C2,100)
call SaveReal(Hash_Stat,a,$A053013A,1.0001)
call SaveInteger(udg_Hash,a,$D161E339,60)
call SaveReal(Hash_Stat,a,$10BA18C8,1.0001)
call SaveReal(Hash_Stat,a,$2E182EFC,1.0001)
call SaveReal(Hash_Stat,a,$62BD2901,1.0001)
call SaveReal(Hash_Stat,a,$3362B68D,1.0001)
call SaveReal(Hash_Stat,a,$164C40C9,0.0001)
call SaveReal(Hash_Stat,a,$9BC8E22B,1.0001)
call SaveReal(Hash_Stat,a,$A7543052,1.0001)
call SaveReal(Hash_Stat,a,$7FAFA384,1.0001)
call SaveReal(Hash_Stat,a,$A62A5B82,1.0001)
call SaveInteger(udg_Hash,a,$56202239,1)
call SaveInteger(udg_Hash,a,$F299275B,1)
call SaveInteger(udg_Hash,a,$F33658E0,16)
call SaveInteger(udg_Hash,a,$94DFA24E,50)
call TriggerRegisterPlayerChatEvent(gg_trg_HP_bar_add,Player(a-1),"-hp 1",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HP_bar_add,Player(a-1),"-hp 2",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HP_bar_add,Player(a-1),"-hp 3",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HP_bar_add,Player(a-1),"-hp 4",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HP_bar_add,Player(a-1),"-hp 5",true)
call TriggerRegisterPlayerChatEvent(gg_trg_INFO_OFF,Player(a-1),"-off",true)
call SaveBoolean(System,$711534E2,a-1,true)
call TriggerRegisterTimerExpireEventBJ(gg_trg_cost,udg_cost[a])
call TriggerRegisterTimerExpireEventBJ(gg_trg_BattleEND,udg_BattleEND[a])
set Charcter1[a]=null
set Charcter2[a]=null
set Charcter3[a]=null
set Charcter4[a]=null
set Charcter5[a]=null
set Ccooltime[a]=0
set ArmorPenetrate[a]=0
set Exp[a]=1.0001
set Gold[a]=1.0001
set CostH[a]=1.0001
set CostM[a]=1.0001
set Check[a]=false
set skc[a]=0
set IchigoSET[a]=false
set ADcriD[a]=0.2
set APcriD[a]=0.2
call SaveReal(Hash_Stat,a,$337F1BA1,0.2)
call SaveReal(Hash_Stat,a,$1486341,0.2)
call SetPlayerAlliance(Player(a-1),Player(a-1),ALLIANCE_HELP_REQUEST,false)
call SetPlayerAlliance(Player(a-1),Player(a-1),ALLIANCE_HELP_RESPONSE,false)
set Frig[a]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_Frig,Frig[a])
set Mono[a]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_Mono,Mono[a])
set Room[a]=CreateTimer()
set YoumuNBT[a]=CreateTimer()
set PhoenixGirl[a]=CreateTimer()
set Latika[a]=CreateTimer()
set Garom[a]=CreateTimer()
set Mono[a]=CreateTimer()
set Aluzard[a]=CreateTimer()
set Hackter[a]=CreateTimer()
set Ann[a]=CreateTimer()
set Garom[a]=CreateTimer()
set Tobari[a]=CreateTimer()
set Elbira[a]=CreateTimer()
set Luni[a]=CreateTimer()
set Chubaki[a]=CreateTimer()
set Walbert[a]=CreateTimer()
set Nio[a]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_Mono,Mono[a])
call TriggerRegisterTimerExpireEvent(gg_trg_Latika,Latika[a])
call TriggerRegisterTimerExpireEvent(gg_trg_HackterTrig,Hackter[a])
call TriggerRegisterTimerExpireEventBJ(gg_trg_info_Rejoin,udg_infoRe[a])
call TriggerRegisterPlayerChatEvent(gg_trg_Seeya,Player(a-1),"-",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Taro,Player(a-1),"-",false)
call PanCameraToTimedLocForPlayer(Player(a-1),loc,0)
call SetCameraFieldForPlayer(ConvertedPlayer(a),CAMERA_FIELD_TARGET_DISTANCE,3000.00,0)
call TriggerRegisterTimerExpireEventBJ(gg_trg_Pstat,udg_PstatTimer[a])
if GetPlayerSlotState(Player(a-1))==PLAYER_SLOT_STATE_PLAYING then
set Playint=Playint+1
set PP[Playint]=a
set PR[a]=Playint
call SaveStr(udg_Hash,a,$AC6659BB,GetPlayerName(Player(c)))
call SaveStr(udg_Hash,a,$78BD9BC9,GetPlayerName(Player(c)))
call JNStashNetDownloadUser(Player(c),MapId,GetPlayerName(Player(c)),SecretKey,DOWNLOAD_CALLBACK)
endif
set growthStone[a]=0
set inaba[a]=false
set myEffectSys[a-1]=true
set frEffectSys[a-1]=true
set myImoteSys[a-1]=true
set frImoteSys[a-1]=true
call ForceAddPlayerSimple(Player(a),udg_PlayerTeam)
set ArtRerollChance[a]=1
set ArtRerollMaxChance[a]=1
call CreateNUnitsAtLoc(1,'sys1',ConvertedPlayer(a),GetRectCenter(gg_rct_DummyUnitSet),bj_UNIT_FACING)
set ArtPickProgress[a]=GetLastCreatedUnit()
call SetPlayerAbilityAvailable(Player(a-1),ArtSkillCode1[a],false)
call SetPlayerAbilityAvailable(Player(a-1),ArtSkillCode2[a],false)
call SetPlayerAbilityAvailable(Player(a-1),ArtSkillCode3[a],false)
call SetPlayerAbilityAvailable(Player(a-1),ArtSkillCode4[a],false)
call SetPlayerAbilityAvailable(Player(a-1),'A02E',false)
call SetPlayerAbilityAvailable(Player(a-1),'A001',false)
call SetPlayerAbilityAvailable(Player(a-1),'SY01',false)
call SetPlayerAbilityAvailable(Player(a-1),'A03D',false)
call SetPlayerAbilityAvailable(Player(a-1),'A03F',false)
call SetPlayerAbilityAvailable(Player(a-1),'SY99',false)
call SetPlayerAbilityAvailable(Player(a-1),'AF01',false)
call SetPlayerAbilityAvailable(Player(a-1),'AF02',false)
call SetPlayerAbilityAvailable(Player(a-1),'A005',false)
call SetPlayerAbilityAvailable(Player(a-1),'AF24',false)
call SetPlayerAbilityAvailable(Player(a-1),'A03L',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02I',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02V',false)
call SetPlayerAbilityAvailable(Player(a-1),'A04G',false)
call SetPlayerAbilityAvailable(Player(a-1),'A032',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02J',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02K',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02L',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02M',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02N',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02O',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02P',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02Q',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02R',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02S',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02T',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02U',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02W',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02X',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02Y',false)
call SetPlayerAbilityAvailable(Player(a-1),'A02Z',false)
call SetPlayerAbilityAvailable(Player(a-1),'A030',false)
call SetPlayerAbilityAvailable(Player(a-1),'A031',false)
call SetPlayerAbilityAvailable(Player(a-1),'A03C',false)
call SetPlayerAbilityAvailable(Player(a-1),'A03E',false)
call SetPlayerAbilityAvailable(Player(a-1),'A03J',false)
call SetPlayerAbilityAvailable(Player(a-1),'A03K',false)
call SetPlayerAbilityAvailable(Player(a-1),'A04H',false)
call SetPlayerAbilityAvailable(Player(a-1),'A033',false)
call SetPlayerAbilityAvailable(Player(a-1),'A034',false)
call SetPlayerAbilityAvailable(Player(a-1),'A035',false)
call SetPlayerAbilityAvailable(Player(a-1),'A036',false)
call SetPlayerAbilityAvailable(Player(a-1),'A037',false)
call SetPlayerAbilityAvailable(Player(a-1),'A038',false)
call SetPlayerAbilityAvailable(Player(a-1),'A039',false)
call SetPlayerAbilityAvailable(Player(a-1),'A03A',false)
call SetPlayerAbilityAvailable(Player(a-1),'A03B',false)
set fontPlus[a]=45
set fontSize[a]=2.5
set a=a+1
endloop
call SaveReal(Hash_Stat,12,$7FAFA384,1.0001)
call SaveReal(Hash_Stat,12,$A62A5B82,1.0001)
set t=CreateTimer()
call TimerStart(t,4,false,function FirstReset)
set t=null
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cff7fffd4최적화중입니다. 잠시 기다려주세요.")
set a=0
loop
exitwhen a==Playint
set a=a+1
call SaveInteger(NormalArt,PP[a],1,'N001')
call SaveInteger(NormalArt,PP[a],2,'N002')
call SaveInteger(NormalArt,PP[a],3,'N003')
call SaveInteger(NormalArt,PP[a],4,'N004')
call SaveInteger(NormalArt,PP[a],5,'N005')
call SaveInteger(NormalArt,PP[a],6,'N006')
call SaveInteger(NormalArt,PP[a],7,'N007')
call SaveInteger(NormalArt,PP[a],8,'N008')
call SaveInteger(NormalArt,PP[a],9,'N009')
call SaveInteger(NormalArt,PP[a],10,'N010')
call SaveInteger(NormalArt,PP[a],11,'N011')
call SaveInteger(NormalArt,PP[a],12,'N012')
call SaveInteger(NormalArt,PP[a],13,'N013')
call SaveInteger(NormalArt,PP[a],14,'N014')
call SaveInteger(NormalArt,PP[a],15,'N015')
call SaveInteger(NormalArt,PP[a],16,'N016')
call SaveInteger(NormalArt,PP[a],17,'N017')
call SaveInteger(NormalArt,PP[a],18,'N018')
call SaveInteger(NormalArt,PP[a],19,'N019')
call SaveInteger(NormalArt,PP[a],20,'N031')
call SaveInteger(NormalArt,PP[a],21,'N035')
call SaveInteger(NormalArt,PP[a],22,'N038')
call SaveInteger(NormalArt,PP[a],23,'N039')
call SaveInteger(NormalArt,PP[a],24,'N041')
call SaveInteger(NormalArt,PP[a],25,'N042')
call SaveInteger(NormalArt,PP[a],26,'N043')
call SaveInteger(NormalArt,PP[a],27,'N044')
call SaveInteger(NormalArt,PP[a],28,'N045')
call SaveInteger(NormalArt,PP[a],29,'N046')
call SaveInteger(NormalArt,PP[a],30,'N047')
call SaveInteger(NormalArt,PP[a],31,'N048')
call SaveInteger(NormalArt,PP[a],32,'N049')
call SaveInteger(NormalArt,PP[a],33,'N050')
call SaveInteger(NormalArt,PP[a],34,'N051')
call SaveInteger(NormalArt,PP[a],35,'N052')
call SaveInteger(NormalArt,PP[a],36,'N053')
call SaveInteger(NormalArt,PP[a],37,'N054')
call SaveInteger(NormalArt,PP[a],38,'N055')
call SaveInteger(NormalArt,PP[a],39,'N056')
call SaveInteger(NormalArt,PP[a],42,'N059')
call SaveInteger(NormalArt,PP[a],43,'N060')
call SaveInteger(NormalArt,PP[a],44,'N061')
call SaveInteger(NormalArt,PP[a],45,'N063')
call SaveInteger(UncarmonArt,PP[a],1,'C001')
call SaveInteger(UncarmonArt,PP[a],2,'C002')
call SaveInteger(UncarmonArt,PP[a],3,'C003')
call SaveInteger(UncarmonArt,PP[a],4,'C004')
call SaveInteger(UncarmonArt,PP[a],6,'C006')
call SaveInteger(UncarmonArt,PP[a],7,'C007')
call SaveInteger(UncarmonArt,PP[a],8,'C008')
call SaveInteger(UncarmonArt,PP[a],10,'C012')
call SaveInteger(UncarmonArt,PP[a],11,'C016')
call SaveInteger(UncarmonArt,PP[a],12,'C017')
call SaveInteger(UncarmonArt,PP[a],13,'C018')
call SaveInteger(UncarmonArt,PP[a],14,'C019')
call SaveInteger(UncarmonArt,PP[a],15,'C020')
call SaveInteger(UncarmonArt,PP[a],16,'C021')
call SaveInteger(UncarmonArt,PP[a],17,'C022')
call SaveInteger(UncarmonArt,PP[a],18,'C023')
call SaveInteger(UncarmonArt,PP[a],19,'C024')
call SaveInteger(UncarmonArt,PP[a],20,'C025')
call SaveInteger(UncarmonArt,PP[a],21,'C026')
call SaveInteger(UncarmonArt,PP[a],22,'C027')
call SaveInteger(UncarmonArt,PP[a],23,'C028')
call SaveInteger(UncarmonArt,PP[a],24,'C029')
call SaveInteger(UncarmonArt,PP[a],25,'C030')
call SaveInteger(UncarmonArt,PP[a],26,'C031')
call SaveInteger(UncarmonArt,PP[a],27,'C032')
call SaveInteger(UncarmonArt,PP[a],28,'C033')
call SaveInteger(UncarmonArt,PP[a],29,'C034')
call SaveInteger(UncarmonArt,PP[a],30,'C035')
call SaveInteger(UncarmonArt,PP[a],31,'C036')
call SaveInteger(UncarmonArt,PP[a],32,'C037')
call SaveInteger(UncarmonArt,PP[a],33,'C038')
call SaveInteger(UncarmonArt,PP[a],34,'C039')
call SaveInteger(UncarmonArt,PP[a],35,'C040')
call SaveInteger(UncarmonArt,PP[a],36,'C041')
call SaveInteger(UncarmonArt,PP[a],37,'C042')
call SaveInteger(UncarmonArt,PP[a],38,'C043')
call SaveInteger(UncarmonArt,PP[a],39,'C044')
call SaveInteger(UncarmonArt,PP[a],40,'C045')
call SaveInteger(UncarmonArt,PP[a],41,'C046')
call SaveInteger(UncarmonArt,PP[a],42,'C047')
call SaveInteger(UncarmonArt,PP[a],43,'C048')
call SaveInteger(UncarmonArt,PP[a],44,'C049')
call SaveInteger(UncarmonArt,PP[a],45,'C053')
call SaveInteger(UncarmonArt,PP[a],46,'C054')
call SaveInteger(UncarmonArt,PP[a],47,'C055')
call SaveInteger(UncarmonArt,PP[a],48,'C056')
call SaveInteger(UncarmonArt,PP[a],49,'C057')
call SaveInteger(UncarmonArt,PP[a],50,'C058')
call SaveInteger(UncarmonArt,PP[a],51,'C059')
call SaveInteger(UncarmonArt,PP[a],52,'C060')
call SaveInteger(UncarmonArt,PP[a],53,'C061')
call SaveInteger(UncarmonArt,PP[a],54,'C062')
call SaveInteger(UncarmonArt,PP[a],55,'C063')
call SaveInteger(UncarmonArt,PP[a],56,'C064')
call SaveInteger(UncarmonArt,PP[a],57,'C065')
call SaveInteger(UncarmonArt,PP[a],58,'C066')
call SaveInteger(UncarmonArt,PP[a],59,'C067')
call SaveInteger(UncarmonArt,PP[a],60,'C068')
call SaveInteger(UncarmonArt,PP[a],61,'C069')
call SaveInteger(UncarmonArt,PP[a],62,'C070')
call SaveInteger(UncarmonArt,PP[a],63,'C071')
call SaveInteger(UncarmonArt,PP[a],64,'C072')
call SaveInteger(RareArt,PP[a],1,'R001')
call SaveInteger(RareArt,PP[a],3,'R003')
call SaveInteger(RareArt,PP[a],4,'R005')
call SaveInteger(RareArt,PP[a],5,'R009')
call SaveInteger(RareArt,PP[a],6,'R015')
call SaveInteger(RareArt,PP[a],7,'R017')
call SaveInteger(RareArt,PP[a],8,'R018')
call SaveInteger(RareArt,PP[a],9,'R019')
call SaveInteger(RareArt,PP[a],10,'R021')
call SaveInteger(RareArt,PP[a],11,'R022')
call SaveInteger(RareArt,PP[a],12,'R023')
call SaveInteger(RareArt,PP[a],13,'R024')
call SaveInteger(RareArt,PP[a],14,'R025')
call SaveInteger(RareArt,PP[a],16,'R027')
call SaveInteger(RareArt,PP[a],17,'R028')
call SaveInteger(RareArt,PP[a],18,'R029')
call SaveInteger(RareArt,PP[a],19,'R030')
call SaveInteger(RareArt,PP[a],20,'R031')
call SaveInteger(RareArt,PP[a],21,'R032')
call SaveInteger(RareArt,PP[a],22,'R033')
call SaveInteger(RareArt,PP[a],23,'R034')
call SaveInteger(RareArt,PP[a],24,'R035')
call SaveInteger(RareArt,PP[a],25,'R036')
call SaveInteger(RareArt,PP[a],26,'R037')
call SaveInteger(RareArt,PP[a],27,'R038')
call SaveInteger(RareArt,PP[a],28,'R039')
call SaveInteger(RareArt,PP[a],29,'R040')
call SaveInteger(RareArt,PP[a],30,'R041')
call SaveInteger(RareArt,PP[a],31,'R042')
call SaveInteger(RareArt,PP[a],32,'R043')
call SaveInteger(RareArt,PP[a],33,'R044')
call SaveInteger(RareArt,PP[a],34,'R045')
call SaveInteger(RareArt,PP[a],35,'R046')
call SaveInteger(RareArt,PP[a],36,'R047')
call SaveInteger(RareArt,PP[a],37,'R048')
call SaveInteger(RareArt,PP[a],38,'R049')
call SaveInteger(RareArt,PP[a],39,'R050')
call SaveInteger(RareArt,PP[a],40,'R051')
call SaveInteger(RareArt,PP[a],41,'R052')
call SaveInteger(RareArt,PP[a],42,'R053')
call SaveInteger(RareArt,PP[a],43,'R054')
call SaveInteger(RareArt,PP[a],44,'R056')
call SaveInteger(RareArt,PP[a],45,'R057')
call SaveInteger(RareArt,PP[a],46,'R058')
call SaveInteger(RareArt,PP[a],47,'R059')
call SaveInteger(RareArt,PP[a],48,'R060')
call SaveInteger(RareArt,PP[a],49,'R061')
call SaveInteger(RareArt,PP[a],50,'R063')
call SaveInteger(RareArt,PP[a],51,'R064')
call SaveInteger(RareArt,PP[a],52,'R065')
call SaveInteger(RareArt,PP[a],53,'R066')
call SaveInteger(RareArt,PP[a],54,'R067')
call SaveInteger(RareArt,PP[a],55,'R068')
call SaveInteger(RareArt,PP[a],56,'R069')
call SaveInteger(RareArt,PP[a],57,'R070')
call SaveInteger(RareArt,PP[a],58,'R071')
call SaveInteger(RareArt,PP[a],59,'R072')
call SaveInteger(RareArt,PP[a],60,'R073')
call SaveInteger(RareArt,PP[a],61,'R074')
call SaveInteger(RareArt,PP[a],62,'R075')
call SaveInteger(RareArt,PP[a],63,'R076')
call SaveInteger(RareArt,PP[a],64,'R077')
call SaveInteger(RareArt,PP[a],65,'R078')
call SaveInteger(RareArt,PP[a],66,'R079')
call SaveInteger(RareArt,PP[a],67,'R082')
call SaveInteger(RareArt,PP[a],68,'R084')
call SaveInteger(RareArt,PP[a],69,'R085')
call SaveInteger(UniqueArt,PP[a],2,'U002')
call SaveInteger(UniqueArt,PP[a],3,'U009')
call SaveInteger(UniqueArt,PP[a],5,'U017')
call SaveInteger(UniqueArt,PP[a],6,'U019')
call SaveInteger(UniqueArt,PP[a],7,'U022')
call SaveInteger(UniqueArt,PP[a],8,'U025')
call SaveInteger(UniqueArt,PP[a],9,'U026')
call SaveInteger(UniqueArt,PP[a],10,'U027')
call SaveInteger(UniqueArt,PP[a],11,'U028')
call SaveInteger(UniqueArt,PP[a],12,'U030')
call SaveInteger(UniqueArt,PP[a],13,'U031')
call SaveInteger(UniqueArt,PP[a],14,'U037')
call SaveInteger(UniqueArt,PP[a],15,'U038')
call SaveInteger(UniqueArt,PP[a],16,'U039')
call SaveInteger(UniqueArt,PP[a],17,'U040')
call SaveInteger(UniqueArt,PP[a],18,'U041')
call SaveInteger(UniqueArt,PP[a],19,'U042')
call SaveInteger(UniqueArt,PP[a],20,'U043')
call SaveInteger(UniqueArt,PP[a],21,'U044')
call SaveInteger(UniqueArt,PP[a],22,'U045')
call SaveInteger(UniqueArt,PP[a],23,'U048')
call SaveInteger(UniqueArt,PP[a],24,'U049')
call SaveInteger(UniqueArt,PP[a],25,'U050')
call SaveInteger(UniqueArt,PP[a],26,'U051')
call SaveInteger(UniqueArt,PP[a],27,'U052')
call SaveInteger(UniqueArt,PP[a],28,'U053')
call SaveInteger(UniqueArt,PP[a],29,'U054')
call SaveInteger(UniqueArt,PP[a],30,'U055')
call SaveInteger(UniqueArt,PP[a],31,'U056')
call SaveInteger(UniqueArt,PP[a],32,'U057')
call SaveInteger(UniqueArt,PP[a],33,'U060')
call SaveInteger(UniqueArt,PP[a],34,'U061')
call SaveInteger(UniqueArt,PP[a],35,'U062')
call SaveInteger(UniqueArt,PP[a],36,'U063')
call SaveInteger(UniqueArt,PP[a],37,'U064')
call SaveInteger(UniqueArt,PP[a],38,'U065')
call SaveInteger(UniqueArt,PP[a],39,'U066')
call SaveInteger(UniqueArt,PP[a],40,'U067')
call SaveInteger(UniqueArt,PP[a],41,'U068')
call SaveInteger(UniqueArt,PP[a],42,'U069')
call SaveInteger(UniqueArt,PP[a],43,'U070')
call SaveInteger(UniqueArt,PP[a],44,'U071')
call SaveInteger(UniqueArt,PP[a],45,'U072')
call SaveInteger(UniqueArt,PP[a],46,'U073')
call SaveInteger(UniqueArt,PP[a],47,'U074')
call SaveInteger(UniqueArt,PP[a],48,'U075')
call SaveInteger(UniqueArt,PP[a],49,'U077')
call SaveInteger(UniqueArt,PP[a],50,'U078')
call SaveInteger(UniqueArt,PP[a],51,'U079')
endloop
set a=0
loop
exitwhen a==Playint
set a=a+1
if GetPlayerName(Player(PP[a]-1))=="WorldEdit" then
if GetLocalPlayer()==Player(PP[a]-1)then
call DzSetUnitModel(gg_unit_n005_0137,"buildings\\other\\Tavern\\Tavern.mdx")
endif
endif
if GetPlayerName(Player(PP[a]-1))=="Wiseyo" then
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'ALEX',true)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A02E',true)
call SaveStr(udg_Hash,$471FBE10+(PP[a]),1,"war3mapImported\\@C_Model Izuna2.mdl")
call SetPlayerName(Player(PP[a]-1),"|cffE1F6FA배|cffB9E2FA신의 왕 |cff87CEFA캐르릉 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"배신의 왕 캐르릉 ")
if GetLocalPlayer()==Player(PP[a]-1)then
call DzSetUnitModel(gg_unit_n005_0137,"buildings\\other\\Tavern\\Tavern.mdx")
endif
endif
if GetPlayerName(Player(PP[a]-1))=="notiscream" then
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR01',true)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A02E',true)
call SaveStr(udg_Hash,$471FBE10+(PP[a]),1,"war3mapImported\\@C_Model_Lappland.mdl")
call SetPlayerName(Player(PP[a]-1),"|cff000000Black|cff5D5D5D&|cffFFFFFFWhite ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"Black&White ")
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A03L',true)
endif
if GetPlayerName(Player(PP[a]-1))=="1591592s" then
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR03',true)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A02E',true)
call SaveStr(udg_Hash,$471FBE10+(PP[a]),1,"war3mapImported\\@C_Model Hoshino Mizugi.mdl")
call SetPlayerName(Player(PP[a]-1),"|cffFFDF24たか|cff12EAFFなし|cffFFD9EC星野 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"たかなし星野 ")
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A03L',true)
endif
if GetPlayerName(Player(PP[a]-1))=="SCP087" then
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR15',true)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A02E',true)
call SaveStr(udg_Hash,$471FBE10+(PP[a]),1,"war3mapImported\\@C_heitu.mdl")
call SetPlayerName(Player(PP[a]-1),"|cff050099최악의|cffFFE400문제아 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"최악의문제아 ")
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A03L',true)
endif
if GetPlayerName(Player(PP[a]-1))=="tiamat" then
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR09',true)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A02E',true)
call SaveStr(udg_Hash,$471FBE10+(PP[a]),1,"war3mapImported\\@C_smoller_gawr_gura.mdl")
call SetPlayerName(Player(PP[a]-1),"|cffC6FFDD띠|cffFBD786맷 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"띠맷 ")
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A03L',true)
endif
if GetPlayerName(Player(PP[a]-1))=="Ria.." then
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR03',true)
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR09',true)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A02E',true)
call SaveStr(udg_Hash,$471FBE10+(PP[a]),1,"war3mapImported\\@C_hero_016.mdl")
call SetPlayerName(Player(PP[a]-1),"|cffFF0000리|cffFFFF8F아 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"리아 ")
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A03L',true)
endif
if GetPlayerName(Player(PP[a]-1))=="pu_ding" then
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR16',true)
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR13',true)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A02E',true)
call SaveStr(udg_Hash,$471FBE10+(PP[a]),1,"war3mapImported\\@C_yasina_skin01.mdl")
call SetPlayerName(Player(PP[a]-1),"|cffFAED7D푸딩 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"푸딩 ")
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A03L',true)
endif
if GetPlayerName(Player(PP[a]-1))=="EHoles" then
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR11',true)
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR16',true)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A02E',true)
call SaveStr(udg_Hash,$471FBE10+(PP[a]),1,"war3mapImported\\@C_UNIT0229huojin.mdl")
call SetPlayerName(Player(PP[a]-1),"|cff00ccff버|cff22d4ff츄|cff44ddff얼 |cff66e5ff아|cffaaf6ff이|cffccffff돌 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"버츄얼 아이돌 ")
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A03L',true)
endif
if GetPlayerName(Player(PP[a]-1))=="ZNFNAL" then
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR06',true)
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR12',true)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A02E',true)
call SaveStr(udg_Hash,$471FBE10+(PP[a]),1,"war3mapImported\\@C_Panda.mdl")
call SetPlayerName(Player(PP[a]-1),"|cff66FFFF직|cff77DDFF사|cff88BBFF의 |cff9999FF마|cffAA77FF안 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"직사의 마안 ")
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A03L',true)
endif
if GetPlayerName(Player(PP[a]-1))=="K-1" then
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR01',true)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A02E',true)
call SaveStr(udg_Hash,$471FBE10+(PP[a]),1,"war3mapImported\\@C_IchigoTrue.mdl")
call SetPlayerName(Player(PP[a]-1),"|cff7DFE74케|cff119208원 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"케원 ")
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A03L',true)
endif
if GetPlayerName(Player(PP[a]-1))=="Shinonome" then
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR09',true)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A02E',true)
call SaveStr(udg_Hash,$471FBE10+(PP[a]),1,"war3mapImported\\@C_C1.mdl")
call SetPlayerName(Player(PP[a]-1),"|cffEE82EE시노 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"시노 ")
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A03L',true)
endif
if GetPlayerName(Player(PP[a]-1))=="petrichor" then
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR09',true)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A02E',true)
call SaveStr(udg_Hash,$471FBE10+(PP[a]),1,"war3mapImported\\@C_aris2.mdl")
call SetPlayerName(Player(PP[a]-1),"|cff6D6DA4토에 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"토에 ")
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A03L',true)
endif
if GetPlayerName(Player(PP[a]-1))=="lve8610" then
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR15',true)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A02E',true)
call SaveStr(udg_Hash,$471FBE10+(PP[a]),1,"war3mapImported\\@C_Shio_Dio_The_World.mdl")
call SetPlayerName(Player(PP[a]-1),"|cffCC2EFA常|cffBF00FF闇|cffA901DB眷|cff8904B1? ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"常闇眷? ")
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A03L',true)
endif
if GetPlayerName(Player(PP[a]-1))=="night_raid" then
call SaveBoolean(udg_Hash,$D922CD2C+(PP[a]),'HR09',true)
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A02E',true)
call SaveStr(udg_Hash,$471FBE10+(PP[a]),1,"war3mapImported\\@C_czh0.mdl")
call SetPlayerName(Player(PP[a]-1),"|cff1DDB16반디 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"반디 ")
call SetPlayerAbilityAvailable(Player(PP[a]-1),'A03L',true)
endif
if GetPlayerName(Player(PP[a]-1))=="BopalRabbit" then
call SetPlayerName(Player(PP[a]-1),"|cffffc1cc토끼 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"토끼 ")
endif
if GetPlayerName(Player(PP[a]-1))=="T.Rain" then
call SetPlayerName(Player(PP[a]-1),"|cffFFFFFF『가면의 우인』 |cffFF0000스파클 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"『가면의 우인』 스파클 ")
endif
if GetPlayerName(Player(PP[a]-1))=="R.S-5504" then
call SetPlayerName(Player(PP[a]-1),"|cffFFFF66시체상자 |cffFFFFCC여왕 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"시체상자 여왕 ")
endif
if GetPlayerName(Player(PP[a]-1))=="no1712" then
call SetPlayerName(Player(PP[a]-1),"|cff76395D카즈카세 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"카즈카세 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Nananano" then
call SetPlayerName(Player(PP[a]-1),"|cffFFB2F5무리무리 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"무리무리 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Nananano" then
call SetPlayerName(Player(PP[a]-1),"|cffFFB2F5무리무리 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"무리무리 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Koishi_JB" then
call SetPlayerName(Player(PP[a]-1),"|cFFAEF0C2【코|cFFC8F4D6이|cFFDFF9E7시】 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"【코이시】 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Syu" then
call SetPlayerName(Player(PP[a]-1),"|cff7401DF백|cffFE9A2E면|cff2ECCFA금|cffF7FE2E모|cffF781F3구미호 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"백면금모구미호 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Hei" then
call SetPlayerName(Player(PP[a]-1),"|cffffff00길가메쉬 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"길가메쉬 ")
endif
if GetPlayerName(Player(PP[a]-1))=="seek2849" then
call SetPlayerName(Player(PP[a]-1),"|cff9fb2fc마|cffabc4ff탄|cffb6ccfe의|cffc1d3fe사|cffccdbfd수 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"마탄의사수 ")
endif
if GetPlayerName(Player(PP[a]-1))=="mbmb685974" then
call SetPlayerName(Player(PP[a]-1),"|cff880000마|cff7CFC00도|cff00008B학|cffFFFF00자 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"마도학자 ")
endif
if GetPlayerName(Player(PP[a]-1))=="tjrgns7944" then
call SetPlayerName(Player(PP[a]-1),"|cffFFFFFF『|cffE0FFFFヨスガ|cffF8F8FFソラ|cffFFFFFF』 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"『ヨスガソラ』 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Rusria" then
call SetPlayerName(Player(PP[a]-1),"|cffFFFFFF은|cff000000하 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"은하 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Astarotte" then
call SetPlayerName(Player(PP[a]-1),"|cffff69b4다|cffff69b4락|cffffb6c1방|cfffff0f5의 |cffffe4e1공|cffffe4e1주|cffffff00님 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"다락방의 공주님 ")
endif
if GetPlayerName(Player(PP[a]-1))=="vmfkdl8" then
call SetPlayerName(Player(PP[a]-1),"|cffF2E5A0히|cffF2E5A0요|cffF2E5A0리 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"히요리 ")
endif
if GetPlayerName(Player(PP[a]-1))=="ShinTime" then
call SetPlayerName(Player(PP[a]-1),"|cffFFC19E이|cffFFFF8F랴 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"이랴 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Marquess" then
call SetPlayerName(Player(PP[a]-1),"|cff48FFFF버 서 커 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"버 서 커 ")
endif
if GetPlayerName(Player(PP[a]-1))=="KimSyrup" then
call SetPlayerName(Player(PP[a]-1),"|cff850000마|cffDF4D4D카|cffFFA7A7롱 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"마카롱 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Murasame" then
call SetPlayerName(Player(PP[a]-1),"|cffAFF794무라사메 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"무라사메 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Murasame" then
call SetPlayerName(Player(PP[a]-1),"|cffAFF794무라사메 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"무라사메 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Elysium" then
call SetPlayerName(Player(PP[a]-1),"|CFFB9E2FA차|CFFD2E1FF생|CFFF4FFFF의 |CFFFFC0CB은|CFFFFF0F5익 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"차생의 은익 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Mochi-" then
call SetPlayerName(Player(PP[a]-1),"|cff8bcef5칠|cffb2def8영|cffd8effc나|r비 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"칠영나비 ")
endif
if GetPlayerName(Player(PP[a]-1))=="kimabb" then
call SetPlayerName(Player(PP[a]-1),"|cFF322C19『쿠|cFF322C14로|cFF322C1E사|cFF322C28키 |cFF322C32이|cFF322C3C치|cFF1E2C28고』 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"쿠로사키 이치고 ")
endif
if GetPlayerName(Player(PP[a]-1))=="tjdml131" then
call SetPlayerName(Player(PP[a]-1),"|cFFADB4DA쿠|cFFADB4DA나 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"쿠나 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Niconiconl" then
call SetPlayerName(Player(PP[a]-1),"|cFFCF3DB8[색욕]|cFFFFFFFF - 니코 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"[색욕] - 니코 ")
endif
if GetPlayerName(Player(PP[a]-1))=="RyuMu" then
call SetPlayerName(Player(PP[a]-1),"|cFFFFD9E5려|cFFFFF3F6무 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"려무 ")
endif
if GetPlayerName(Player(PP[a]-1))=="fbgocks1" then
call SetPlayerName(Player(PP[a]-1),"|cff000000허접 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"허접 ")
endif
if GetPlayerName(Player(PP[a]-1))=="T.H.A" then
call SetPlayerName(Player(PP[a]-1),"|cFFFFE0EE미소노 미카 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"미소노 미카 ")
endif
if GetPlayerName(Player(PP[a]-1))=="ukso3o" then
call SetPlayerName(Player(PP[a]-1),"|cFFFFB2F5말  |cFFF29661랑 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"말  랑 ")
endif
if GetPlayerName(Player(PP[a]-1))=="bibian" then
call SetPlayerName(Player(PP[a]-1),"|cFF415074미카로버스타기 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"미카로버스타기 ")
endif
if GetPlayerName(Player(PP[a]-1))=="taegeun" then
call SetPlayerName(Player(PP[a]-1),"|cFFFAECC5한|cFFEDCE7A입|cFFFAECC5만|cFFEDCE7A줘|cFFFAECC5요 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"한입만줘요 ")
endif
if GetPlayerName(Player(PP[a]-1))=="kjhdj6583" then
call SetPlayerName(Player(PP[a]-1),"|cFFB2EBF4시로의주인 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"시로의주인 ")
endif
if GetPlayerName(Player(PP[a]-1))=="seele" then
call SetPlayerName(Player(PP[a]-1),"|cFF98D4F8혜성 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"혜성 ")
endif
if GetPlayerName(Player(PP[a]-1))=="seele" then
call SetPlayerName(Player(PP[a]-1),"|cFF98D4F8혜성 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"혜성 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Yulmu" then
call SetPlayerName(Player(PP[a]-1),"|cFF834fff나|cFF9b6eff루메|cFFba9cfe아 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"나루메아 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Psycho" then
call SetPlayerName(Player(PP[a]-1),"|cFF5A5A5A싸이코 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"싸이코 ")
endif
if GetPlayerName(Player(PP[a]-1))=="SalSaengBoo" then
call SetPlayerName(Player(PP[a]-1),"|cFFFF0000ヒノカミかぐら ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"ヒノカミかぐら ")
endif
if GetPlayerName(Player(PP[a]-1))=="SugaryCake" then
call SetPlayerName(Player(PP[a]-1),"|cFF6799FF반인|cFFF6F6F6반령 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"반인반령 ")
endif
if GetPlayerName(Player(PP[a]-1))=="j2684" then
call SetPlayerName(Player(PP[a]-1),"|cFFB2CCFF와카파농쪽 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"와카파농쪽 ")
endif
if GetPlayerName(Player(PP[a]-1))=="blood-tempest" then
call SetPlayerName(Player(PP[a]-1),"|cFFF6F6F6네코 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"네코 ")
endif
if GetPlayerName(Player(PP[a]-1))=="reck" then
call SetPlayerName(Player(PP[a]-1),"|cFF00D8FF왕 초 보 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"왕 초 보 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Leticiavanmavis" then
call SetPlayerName(Player(PP[a]-1),"천일화 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"천일화 ")
endif
if GetPlayerName(Player(PP[a]-1))=="GodGay" then
call SetPlayerName(Player(PP[a]-1),"「 주력의 핵심 」 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"「 주력의 핵심 」 ")
endif
if GetPlayerName(Player(PP[a]-1))=="reisalinstout" then
call SetPlayerName(Player(PP[a]-1),"|cFFC6BACD폐허 속의 공주님 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"폐허 속의 공주님 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Ayana_" then
call SetPlayerName(Player(PP[a]-1),"|cFF00D8FF노우사기 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"노우사기 ")
endif
if GetPlayerName(Player(PP[a]-1))=="kin316s1" then
call SetPlayerName(Player(PP[a]-1),"|cFF0078FF키|cFF148CFF타|cFF28A0FF가|cFF3CB4FF와 |cFF50C8FF마|cFF5AD2FF린 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"키타가와 마린 ")
endif
if GetPlayerName(Player(PP[a]-1))=="Jotkainu" then
call SetPlayerName(Player(PP[a]-1),"|cFFDB70DB재의마녀 |cFFE6E6FA일레이나 ")
call SaveStr(udg_Hash,PP[a],$78BD9BC9,"재의마녀 일레이나 ")
endif
endloop
if not JNUse()then
set a=0
loop
exitwhen a==Playint
set a=a+1
call DisplayTimedTextToPlayer(Player(PP[a]-1),0,0,30,"|cffFF0000서버와의 연결이 안되있습니다!!!!!! 신버전인지 확인하거나 서버 연결 상태를 확인하세요!!")
call DisplayTimedTextToPlayer(Player(PP[a]-1),0,0,30,"|cffFF0000서버와의 연결이 안되있습니다!!!!!! 신버전인지 확인하거나 서버 연결 상태를 확인하세요!!")
call DisplayTimedTextToPlayer(Player(PP[a]-1),0,0,30,"|cffFF0000서버와의 연결이 안되있습니다!!!!!! 신버전인지 확인하거나 서버 연결 상태를 확인하세요!!")
call DisplayTimedTextToPlayer(Player(PP[a]-1),0,0,30,"|cffFF0000서버와의 연결이 안되있습니다!!!!!! 신버전인지 확인하거나 서버 연결 상태를 확인하세요!!")
endloop
endif
set sec=0
set min=0
call CreateMultiboardBJ(5,Playint+2,"Project : DF")
call MultiboardSetItemWidthBJ(GetLastCreatedMultiboard(),1,0,7.00)
call MultiboardSetItemWidthBJ(GetLastCreatedMultiboard(),2,0,5.00)
call MultiboardSetItemWidthBJ(GetLastCreatedMultiboard(),3,0,5.00)
call MultiboardSetItemWidthBJ(GetLastCreatedMultiboard(),4,0,2.50)
call MultiboardSetItemWidthBJ(GetLastCreatedMultiboard(),5,0,2.50)
call MultiboardSetItemWidthBJ(GetLastCreatedMultiboard(),3,Playint+2,15.00)
call MultiboardSetItemStyleBJ(GetLastCreatedMultiboard(),1,1,true,false)
call MultiboardSetItemStyleBJ(GetLastCreatedMultiboard(),1,Playint+2,true,false)
call MultiboardSetItemStyleBJ(GetLastCreatedMultiboard(),2,0,true,false)
call MultiboardSetItemStyleBJ(GetLastCreatedMultiboard(),3,0,true,false)
call MultiboardSetItemStyleBJ(GetLastCreatedMultiboard(),4,0,true,false)
call MultiboardSetItemStyleBJ(GetLastCreatedMultiboard(),5,0,true,false)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,1,"플레이어")
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,1,"캐릭터")
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),3,1,"킬수")
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),4,1,"아티팩트")
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),5,1,"목숨")
call MultiboardSetItemStyleBJ(GetLastCreatedMultiboard(),5,Playint+2,false,false)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),4,Playint+2,"경과한 시간 : 00분 00초")
set a=2
loop
exitwhen a==Playint+2
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,a,PlayerColor[PP[a-1]]+GetPlayerName(Player(PP[a-1]-1)))
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,a,"-")
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),3,a,"0")
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),4,a,"0")
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),5,a,"0")
set a=a+1
endloop
call MultiboardMinimizeBJ(true,GetLastCreatedMultiboard())
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cff7fffd4아티팩트 리셋 성공.")
call SaveStr(udg_Hash,0,$28C8CC8E+1,"units\\orc\\Peon\\Peon.mdl")
call SaveReal(udg_Hash,0,$63E433C9+1,250)
call SaveStr(udg_Hash,0,$28C8CC8E+2,"units\\orc\\Grunt\\Grunt.mdx")
call SaveReal(udg_Hash,0,$63E433C9+2,250)
call SaveStr(udg_Hash,0,$28C8CC8E+3,"units\\orc\\WolfRider\\WolfRider.mdx")
call SaveReal(udg_Hash,0,$63E433C9+3,250)
call SaveStr(udg_Hash,0,$28C8CC8E+4,"units\\orc\\Shaman\\Shaman.mdx")
call SaveReal(udg_Hash,0,$63E433C9+4,600)
call SaveStr(udg_Hash,0,$28C8CC8E+5,"units\\human\\TheCaptain\\TheCaptain.mdx")
call SaveReal(udg_Hash,0,$63E433C9+5,250)
call SaveStr(udg_Hash,0,$28C8CC8E+6,"units\\human\\Sorceress\\Sorceress.mdx")
call SaveReal(udg_Hash,0,$63E433C9+6,250)
call SaveStr(udg_Hash,0,$28C8CC8E+7,"units\\creeps\\Bandit\\Bandit.mdx")
call SaveReal(udg_Hash,0,$63E433C9+7,250)
call SaveStr(udg_Hash,0,$28C8CC8E+8,"units\\orc\\Tauren\\Tauren.mdx")
call SaveReal(udg_Hash,0,$63E433C9+8,175)
call SaveStr(udg_Hash,0,$28C8CC8E+9,"units\\creeps\\HighElfArcher\\HighElfArcher.mdx")
call SaveReal(udg_Hash,0,$63E433C9+9,600)
call SaveStr(udg_Hash,0,$28C8CC8E+10,"units\\orc\\Spiritwolf\\Spiritwolf.mdx")
call SaveReal(udg_Hash,0,$63E433C9+10,250)
call SaveStr(udg_Hash,0,$28C8CC8E+11,"units\\creeps\\OrcWarlockRed\\OrcWarlockRed.mdx")
call SaveReal(udg_Hash,0,$63E433C9+11,600)
call SaveStr(udg_Hash,0,$28C8CC8E+12,"units\\creeps\\GrizzlyBear\\GrizzlyBear.mdx")
call SaveReal(udg_Hash,0,$63E433C9+12,250)
call SaveStr(udg_Hash,0,$28C8CC8E+13,"units\\creeps\\IronGolem\\IronGolem.mdx")
call SaveReal(udg_Hash,0,$63E433C9+13,250)
call SaveStr(udg_Hash,0,$28C8CC8E+14,"units\\undead\\Banshee\\Banshee.mdx")
call SaveReal(udg_Hash,0,$63E433C9+14,250)
call SaveStr(udg_Hash,0,$28C8CC8E+15,"units\\undead\\Shade\\Shade.mdx")
call SaveReal(udg_Hash,0,$63E433C9+15,250)
call SaveStr(udg_Hash,0,$28C8CC8E+16,"units\\undead\\Skeleton\\Skeleton.mdx")
call SaveReal(udg_Hash,0,$63E433C9+16,250)
call SaveStr(udg_Hash,0,$28C8CC8E+17,"units\\undead\\SkeletonMage\\SkeletonMage.mdx")
call SaveReal(udg_Hash,0,$63E433C9+17,600)
call SaveStr(udg_Hash,0,$28C8CC8E+18,"units\\creeps\\Zombie\\Zombie.mdx")
call SaveReal(udg_Hash,0,$63E433C9+18,250)
call SaveStr(udg_Hash,0,$28C8CC8E+19,"units\\undead\\Abomination\\Abomination.mdx")
call SaveReal(udg_Hash,0,$63E433C9+19,250)
call SaveStr(udg_Hash,0,$28C8CC8E+20,"units\\nightelf\\Huntress\\Huntress.mdx")
call SaveReal(udg_Hash,0,$63E433C9+20,250)
call SaveStr(udg_Hash,0,$28C8CC8E+21,"units\\nightelf\\FaerieDragon\\FaerieDragon.mdx")
call SaveReal(udg_Hash,0,$63E433C9+21,250)
call SaveStr(udg_Hash,0,$28C8CC8E+22,"units\\nightelf\\Dryad\\Dryad.mdx")
call SaveReal(udg_Hash,0,$63E433C9+22,600)
call SaveStr(udg_Hash,0,$28C8CC8E+21,"units\\nightelf\\Ent\\Ent.mdx")
call SaveReal(udg_Hash,0,$63E433C9+21,250)
call SaveStr(udg_Hash,0,$28C8CC8E+22,"units\\nightelf\\Vengeance\\Vengeance.mdx")
call SaveReal(udg_Hash,0,$63E433C9+22,250)
call SaveStr(udg_Hash,0,$28C8CC8E+23,"units\\creeps\\assassin\\assassin.mdx")
call SaveReal(udg_Hash,0,$63E433C9+23,250)
call SaveStr(udg_Hash,0,$28C8CC8E+24,"Units\\Creeps\\MurgulReaver\\MurgulReaver.mdx")
call SaveReal(udg_Hash,0,$63E433C9+24,250)
call SaveStr(udg_Hash,0,$28C8CC8E+25,"units\\creeps\\MurgulSlave\\MurgulSlave.mdx")
call SaveReal(udg_Hash,0,$63E433C9+25,250)
call SaveStr(udg_Hash,0,$28C8CC8E+26,"Units\\Creeps\\DragonSeaTurtleRange\\DragonSeaTurtleRange.mdx")
call SaveReal(udg_Hash,0,$63E433C9+26,250)
call SaveStr(udg_Hash,0,$28C8CC8E+27,"units\\naga\\NagaRoyalGuard\\NagaRoyalGuard.mdx")
call SaveReal(udg_Hash,0,$63E433C9+27,250)
call SaveStr(udg_Hash,0,$28C8CC8E+28,"units\\naga\\NagaMyrmidon\\NagaMyrmidon.mdx")
call SaveReal(udg_Hash,0,$63E433C9+28,250)
call SaveStr(udg_Hash,0,$28C8CC8E+29,"Units\\Naga\\NagaSiren\\NagaSiren.mdx")
call SaveReal(udg_Hash,0,$63E433C9+29,250)
call DestroyTrigger(GetTriggeringTrigger())
set setU=null
call RemoveLocation(loc)
set loc=null
set u=null
endfunction
function InitTrig_Set takes nothing returns nothing
local trigger trg
set trg=CreateTrigger()
call TimerStart(CreateTimer(),0.00,false,function Sets)
call TriggerAddAction(DOWNLOAD_CALLBACK,function downloadCallback)
set trg=null
endfunction
function ArtSets takes nothing returns nothing
local integer a
local integer b
local string l__str
call SaveReal(Hash_Stat,'N003',$5FF1A35F,0.08)
call SaveInteger(Hash_Stat,'N004',$B7E7C8AD,5)
call SaveReal(Hash_Stat,'N005',$62BD2901,0.05)
call SaveInteger(Hash_Stat,'N005',$22601A7A,75)
call SaveInteger(Hash_Stat,'N005',$D20F099,100)
call SaveInteger(Hash_Stat,'N008',$3181F127,100)
call SaveInteger(Hash_Stat,'N009',$B38BEB44,9)
call SaveReal(Hash_Stat,'N012',$5C6093F2,0.1)
call SaveReal(Hash_Stat,'N013',$BC3801A9,0.1)
call SaveReal(Hash_Stat,'N014',$50B06B2,0.1)
call SaveReal(Hash_Stat,'N015',$2034A1E3,0.1)
call SaveInteger(Hash_Stat,'N016',$3181F127,150)
call SaveInteger(Hash_Stat,'N016',$22601A7A,150)
call SaveInteger(Hash_Stat,'N016',$C18D16A0,20)
call SaveInteger(Hash_Stat,'N017',$3181F127,600)
call SaveInteger(Hash_Stat,'N017',$22601A7A,150)
call SaveInteger(Hash_Stat,'N017',$C18D16A0,-25)
call SaveReal(Hash_Stat,'N018',$2E182EFC,0.1)
call SaveInteger(Hash_Stat,'N034',$5B2587EB,5)
call SaveReal(Hash_Stat,'N036',$2E182EFC,0.12)
call SaveReal(Hash_Stat,'N036',$62BD2901,0.05)
call SaveReal(Hash_Stat,'N037',$62BD2901,0.05)
call SaveInteger(Hash_Stat,'N039',$ED314123,8)
call SaveInteger(Hash_Stat,'N041',$B38BEB44,8)
call SaveInteger(Hash_Stat,'N042',$A3A34F6C,300)
call SaveInteger(Hash_Stat,'N042',$C46B0D8B,8)
call SaveInteger(Hash_Stat,'N043',$1D27E6A1,300)
call SaveInteger(Hash_Stat,'N043',$5B2587EB,8)
call SaveReal(Hash_Stat,'N044',$45E22B52,0.08)
call SaveReal(Hash_Stat,'N045',$34D9AB92,8)
call SaveReal(Hash_Stat,'N046',$337F1BA1,0.12)
call SaveReal(Hash_Stat,'N047',$540C61C7,8)
call SaveReal(Hash_Stat,'N048',$1486341,0.12)
call SaveInteger(Hash_Stat,'N049',$924944F9,10)
call SaveReal(Hash_Stat,'N050',$9AB1A577,0.1)
call SaveInteger(Hash_Stat,'N051',$B7E7C8AD,5)
call SaveReal(Hash_Stat,'N052',$8EB4E7D9,0.01)
call SaveReal(Hash_Stat,'N053',$6DC36456,0.01)
call SaveReal(Hash_Stat,'N054',$9BC8E22B,-0.1)
call SaveReal(Hash_Stat,'N055',$A7543052,-0.1)
call SaveReal(Hash_Stat,'N056',$A053013A,0.05)
call SaveReal(Hash_Stat,'N059',$A7543052,-0.05)
call SaveReal(Hash_Stat,'N059',$9BC8E22B,-0.05)
call SaveInteger(Hash_Stat,'N062',$1D27E6A1,50)
call SaveInteger(Hash_Stat,'N062',$5B2587EB,3)
call SaveInteger(Hash_Stat,'C005',$8885555B,5)
call SaveInteger(Hash_Stat,'C009',$C18D16A0,30)
call SaveInteger(Hash_Stat,'C009',$924944F9,10)
call SaveInteger(Hash_Stat,'C010',$C18D16A0,15)
call SaveInteger(Hash_Stat,'C010',$924944F9,2)
call SaveReal(Hash_Stat,'C013',$164C40C9,0.05)
call SaveInteger(Hash_Stat,'C013',$924944F9,5)
call SaveReal(Hash_Stat,'C014',$164C40C9,0.05)
call SaveInteger(Hash_Stat,'C014',$924944F9,5)
call SaveReal(Hash_Stat,'C015',$2E182EFC,0.3)
call SaveReal(Hash_Stat,'C015',$62BD2901,0.05)
call SaveInteger(Hash_Stat,'C020',$D8C9D96B,10)
call SaveInteger(Hash_Stat,'C020',$22601A7A,250)
call SaveInteger(Hash_Stat,'C020',$C18D16A0,40)
call SaveInteger(Hash_Stat,'C020',$4203D9C2,-400)
call SaveReal(Hash_Stat,'C022',$164C40C9,0.15)
call SaveInteger(Hash_Stat,'C022',$8885555B,-8)
call SaveInteger(Hash_Stat,'C025',$EFFA2021,1000)
call SaveInteger(Hash_Stat,'C025',$753B4F2F,20)
call SaveInteger(Hash_Stat,'C026',$B38BEB44,30)
call SaveInteger(Hash_Stat,'C028',$22601A7A,444)
call SaveInteger(Hash_Stat,'C029',$B38BEB44,20)
call SaveReal(Hash_Stat,'C029',$164C40C9,-0.08)
call SaveInteger(Hash_Stat,'C030',$C46B0D8B,18)
call SaveInteger(Hash_Stat,'C031',$5B2587EB,18)
call SaveReal(Hash_Stat,'C031',$A7543052,0.1)
call SaveReal(Hash_Stat,'C033',$2E182EFC,-0.06)
call SaveReal(Hash_Stat,'C035',$164C40C9,0.1)
call SaveReal(Hash_Stat,'C036',$A053013A,0.15)
call SaveInteger(Hash_Stat,'C038',$A3A34F6C,400)
call SaveInteger(Hash_Stat,'C038',$C46B0D8B,8)
call SaveReal(Hash_Stat,'C038',$34D9AB92,8)
call SaveReal(Hash_Stat,'C039',$92D803F1,30)
call SaveInteger(Hash_Stat,'C040',$B7E7C8AD,10)
call SaveInteger(Hash_Stat,'C042',$1D27E6A1,350)
call SaveInteger(Hash_Stat,'C042',$5B2587EB,10)
call SaveReal(Hash_Stat,'C042',$540C61C7,8)
call SaveInteger(Hash_Stat,'C042',$B7E7C8AD,5)
call SaveInteger(Hash_Stat,'C048',$C18D16A0,50)
call SaveReal(Hash_Stat,'C054',$A053013A,0.10)
call SaveReal(Hash_Stat,'C055',$5C6093F2,0.05)
call SaveReal(Hash_Stat,'C055',$BC3801A9,0.05)
call SaveReal(Hash_Stat,'C055',$50B06B2,0.05)
call SaveReal(Hash_Stat,'C055',$2034A1E3,0.05)
call SaveReal(Hash_Stat,'C056',$8EB4E7D9,0.02)
call SaveReal(Hash_Stat,'C056',$6DC36456,0.02)
call SaveReal(Hash_Stat,'C058',$A053013A,0.10)
call SaveReal(Hash_Stat,'C058',$540C61C7,5)
call SaveReal(Hash_Stat,'C058',$34D9AB92,5)
call SaveReal(Hash_Stat,'C059',$A053013A,0.10)
call SaveInteger(Hash_Stat,'C060',$B38BEB44,15)
call SaveInteger(Hash_Stat,'C061',$D20F099,500)
call SaveReal(Hash_Stat,'C061',$92D803F1,20)
call SaveReal(Hash_Stat,'C062',$45E22B52,0.05)
call SaveInteger(Hash_Stat,'C063',$D20F099,750)
call SaveInteger(Hash_Stat,'C063',$B38BEB44,10)
call SaveReal(Hash_Stat,'C064',$45E22B52,0.1)
call SaveReal(Hash_Stat,'C064',$A7543052,0.20)
call SaveReal(Hash_Stat,'C064',$A62A5B82,0.50)
call SaveReal(Hash_Stat,'C065',$3362B68D,0.10)
call SaveInteger(Hash_Stat,'C066',$D8C9D96B,5)
call SaveInteger(Hash_Stat,'C066',$3181F127,500)
call SaveReal(Hash_Stat,'C067',$F3FDA8C9,0.06)
call SaveReal(Hash_Stat,'C068',$3362B68D,0.05)
call SaveReal(Hash_Stat,'C069',$A053013A,0.05)
call SaveReal(Hash_Stat,'C070',$A053013A,0.05)
call SaveReal(Hash_Stat,'C070',$337F1BA1,0.10)
call SaveReal(Hash_Stat,'C070',$1486341,0.10)
call SaveReal(Hash_Stat,'C071',$A053013A,0.1)
call SaveInteger(Hash_Stat,'C071',$924944F9,6)
call SaveReal(Hash_Stat,'C072',$A053013A,0.1)
call SaveInteger(Hash_Stat,'C072',$B7E7C8AD,10)
call SaveInteger(Hash_Stat,'R003',$EFFA2021,500)
call SaveInteger(Hash_Stat,'R003',$8885555B,5)
call SaveReal(Hash_Stat,'R001',$F3FDA8C9,0.03)
call SaveInteger(Hash_Stat,'R004',$8885555B,3)
call SaveInteger(Hash_Stat,'R004',$B7E7C8AD,15)
call SaveReal(Hash_Stat,'R005',$34D9AB92,15)
call SaveReal(Hash_Stat,'R005',$337F1BA1,0.15)
call SaveInteger(Hash_Stat,'R006',$8885555B,10)
call SaveInteger(Hash_Stat,'R007',$C46B0D8B,30)
call SaveInteger(Hash_Stat,'R007',$C18D16A0,55)
call SaveInteger(Hash_Stat,'R007',$924944F9,13)
call SaveInteger(Hash_Stat,'R907',$C46B0D8B,-30)
call SaveInteger(Hash_Stat,'R907',$C18D16A0,-100)
call SaveInteger(Hash_Stat,'R907',$924944F9,-25)
call SaveInteger(Hash_Stat,'R008',$C18D16A0,30)
call SaveInteger(Hash_Stat,'R008',$924944F9,15)
call SaveReal(Hash_Stat,'R009',$3362B68D,-0.30)
call SaveInteger(Hash_Stat,'R011',$5B2587EB,10)
call SaveInteger(Hash_Stat,'R015',$4203D9C2,1000)
call SaveReal(Hash_Stat,'R015',$A62A5B82,1.00)
call SaveReal(Hash_Stat,'R015',$A7543052,-0.15)
call SaveInteger(Hash_Stat,'R016',$B38BEB44,15)
call SaveInteger(Hash_Stat,'R017',$924944F9,10)
call SaveReal(Hash_Stat,'R017',$A7543052,-0.10)
call SaveInteger(Hash_Stat,'R017',$8885555B,-10)
call SaveInteger(Hash_Stat,'R018',$924944F9,-20)
call SaveReal(Hash_Stat,'R019',$2E182EFC,-0.55)
call SaveReal(Hash_Stat,'R019',$34D9AB92,15)
call SaveReal(Hash_Stat,'R019',$540C61C7,15)
call SaveInteger(Hash_Stat,'R019',$9298D98F,10)
call SaveReal(Hash_Stat,'R021',$62BD2901,-0.40)
call SaveReal(Hash_Stat,'R021',$34D9AB92,-50)
call SaveReal(Hash_Stat,'R021',$540C61C7,-50)
call SaveReal(Hash_Stat,'R021',$337F1BA1,0.2)
call SaveReal(Hash_Stat,'R021',$1486341,0.2)
call SaveInteger(Hash_Stat,'R021',$C18D16A0,35)
call SaveInteger(Hash_Stat,'R021',$924944F9,15)
call SaveReal(Hash_Stat,'R024',$2E182EFC,0.05)
call SaveReal(Hash_Stat,'R027',$34D9AB92,8)
call SaveReal(Hash_Stat,'R027',$540C61C7,8)
call SaveReal(Hash_Stat,'R027',$F3FDA8C9,0.10)
call SaveReal(Hash_Stat,'R028',$A7543052,-0.30)
call SaveReal(Hash_Stat,'R029',$3362B68D,0.2)
call SaveInteger(Hash_Stat,'R030',$B38BEB44,20)
call SaveInteger(Hash_Stat,'R031',$A3A34F6C,400)
call SaveInteger(Hash_Stat,'R031',$C46B0D8B,12)
call SaveInteger(Hash_Stat,'R032',$1D27E6A1,400)
call SaveInteger(Hash_Stat,'R032',$5B2587EB,12)
call SaveReal(Hash_Stat,'R033',$45E22B52,0.15)
call SaveReal(Hash_Stat,'R033',$10BA18C8,0.10)
call SaveInteger(Hash_Stat,'R036',$B7E7C8AD,15)
call SaveInteger(Hash_Stat,'R036',$ED314123,10)
call SaveReal(Hash_Stat,'R038',$34D9AB92,15)
call SaveReal(Hash_Stat,'R038',$540C61C7,15)
call SaveInteger(Hash_Stat,'R038',$22601A7A,350)
call SaveInteger(Hash_Stat,'R039',$22601A7A,350)
call SaveReal(Hash_Stat,'R039',$34D9AB92,12)
call SaveInteger(Hash_Stat,'R040',$22601A7A,350)
call SaveReal(Hash_Stat,'R040',$540C61C7,12)
call SaveReal(Hash_Stat,'R042',$F3FDA8C9,0.15)
call SaveReal(Hash_Stat,'R043',$540C61C7,10)
call SaveInteger(Hash_Stat,'R044',$B38BEB44,12)
call SaveReal(Hash_Stat,'R044',$9AB1A577,0.12)
call SaveInteger(Hash_Stat,'R045',$B7E7C8AD,25)
call SaveInteger(Hash_Stat,'R046',$B7E7C8AD,40)
call SaveReal(Hash_Stat,'R046',$164C40C9,-0.12)
call SaveInteger(Hash_Stat,'R048',$22601A7A,250)
call SaveReal(Hash_Stat,'R048',$34D9AB92,10)
call SaveReal(Hash_Stat,'R048',$540C61C7,10)
call SaveReal(Hash_Stat,'R049',$34D9AB92,15)
call SaveReal(Hash_Stat,'R049',$540C61C7,15)
call SaveReal(Hash_Stat,'R049',$337F1BA1,0.1)
call SaveReal(Hash_Stat,'R049',$1486341,0.1)
call SaveInteger(Hash_Stat,'R049',$D8C9D96B,20)
call SaveReal(Hash_Stat,'R049',$A053013A,-0.40)
call SaveReal(Hash_Stat,'R051',$2E182EFC,0.15)
call SaveReal(Hash_Stat,'R056',$A053013A,0.10)
call SaveReal(Hash_Stat,'R057',$8EB4E7D9,0.05)
call SaveReal(Hash_Stat,'R057',$6DC36456,0.05)
call SaveReal(Hash_Stat,'R057',$34D9AB92,10)
call SaveReal(Hash_Stat,'R057',$337F1BA1,0.10)
call SaveReal(Hash_Stat,'R057',$540C61C7,10)
call SaveReal(Hash_Stat,'R057',$1486341,0.1)
call SaveReal(Hash_Stat,'R058',$8EB4E7D9,0.03)
call SaveReal(Hash_Stat,'R058',$6DC36456,0.03)
call SaveInteger(Hash_Stat,'R058',$22601A7A,250)
call SaveReal(Hash_Stat,'R059',$8EB4E7D9,0.03)
call SaveReal(Hash_Stat,'R059',$6DC36456,0.03)
call SaveInteger(Hash_Stat,'R059',$3181F127,250)
call SaveReal(Hash_Stat,'R061',$34D9AB92,8)
call SaveReal(Hash_Stat,'R061',$540C61C7,8)
call SaveReal(Hash_Stat,'R061',$F3FDA8C9,0.10)
call SaveReal(Hash_Stat,'R062',$A053013A,0.05)
call SaveReal(Hash_Stat,'R062',$540C61C7,5)
call SaveReal(Hash_Stat,'R062',$34D9AB92,5)
call SaveReal(Hash_Stat,'R063',$62BD2901,0.30)
call SaveReal(Hash_Stat,'R063',$92D803F1,50)
call SaveInteger(Hash_Stat,'R063',$ED314123,5)
call SaveInteger(Hash_Stat,'R065',$8885555B,5)
call SaveReal(Hash_Stat,'R066',$8EB4E7D9,0.03)
call SaveReal(Hash_Stat,'R066',$6DC36456,0.03)
call SaveReal(Hash_Stat,'R066',$2E182EFC,0.05)
call SaveReal(Hash_Stat,'R067',$45E22B52,0.15)
call SaveReal(Hash_Stat,'R067',$A7543052,0.20)
call SaveReal(Hash_Stat,'R067',$A62A5B82,1.00)
call SaveReal(Hash_Stat,'R068',$45E22B52,0.1)
call SaveReal(Hash_Stat,'R068',$A7543052,0.20)
call SaveReal(Hash_Stat,'R068',$A62A5B82,0.5)
call SaveInteger(Hash_Stat,'R069',$B38BEB44,15)
call SaveReal(Hash_Stat,'R069',$2E182EFC,-0.05)
call SaveReal(Hash_Stat,'R070',$164C40C9,0.05)
call SaveInteger(Hash_Stat,'R071',$9298D98F,15)
call SaveInteger(Hash_Stat,'R073',$3181F127,750)
call SaveInteger(Hash_Stat,'R073',$D8C9D96B,5)
call SaveReal(Hash_Stat,'R075',$3362B68D,-0.30)
call SaveInteger(Hash_Stat,'R076',$3181F127,500)
call SaveInteger(Hash_Stat,'R076',$D20F099,-250)
call SaveInteger(Hash_Stat,'R076',$C18D16A0,100)
call SaveInteger(Hash_Stat,'R077',$D20F099,1000)
call SaveInteger(Hash_Stat,'R078',$D8C9D96B,10)
call SaveInteger(Hash_Stat,'R078',$B38BEB44,15)
call SaveInteger(Hash_Stat,'R078',$ED314123,10)
call SaveReal(Hash_Stat,'R079',$F3FDA8C9,0.15)
call SaveReal(Hash_Stat,'R080',$A053013A,0.05)
call SaveReal(Hash_Stat,'R081',$A053013A,0.05)
call SaveReal(Hash_Stat,'R081',$337F1BA1,0.10)
call SaveReal(Hash_Stat,'R081',$1486341,0.10)
call SaveReal(Hash_Stat,'R082',$A053013A,0.1)
call SaveInteger(Hash_Stat,'R082',$22601A7A,500)
call SaveInteger(Hash_Stat,'R082',$D20F099,250)
call SaveReal(Hash_Stat,'R083',$A053013A,0.05)
call SaveInteger(Hash_Stat,'R083',$924944F9,6)
call SaveReal(Hash_Stat,'R084',$A053013A,0.1)
call SaveReal(Hash_Stat,'R085',$A053013A,0.1)
call SaveReal(Hash_Stat,'R086',$A053013A,0.05)
call SaveInteger(Hash_Stat,'R086',$B7E7C8AD,10)
call SaveInteger(Hash_Stat,'U003',$8885555B,4)
call SaveInteger(Hash_Stat,'U004',$C46B0D8B,15)
call SaveInteger(Hash_Stat,'U004',$C18D16A0,70)
call SaveInteger(Hash_Stat,'U004',$924944F9,15)
call SaveInteger(Hash_Stat,'U005',$C46B0D8B,5)
call SaveInteger(Hash_Stat,'U005',$C18D16A0,20)
call SaveInteger(Hash_Stat,'U005',$D8C9D96B,5)
call SaveInteger(Hash_Stat,'U006',$C46B0D8B,25)
call SaveInteger(Hash_Stat,'U006',$D8C9D96B,10)
call SaveInteger(Hash_Stat,'U006',$C18D16A0,125)
call SaveInteger(Hash_Stat,'U006',$924944F9,20)
call SaveReal(Hash_Stat,'U006',$164C40C9,0.1)
call SaveReal(Hash_Stat,'U008',$3362B68D,0.30)
call SaveReal(Hash_Stat,'U008',$5FF1A35F,0.15)
call SaveInteger(Hash_Stat,'U008',$EFFA2021,1000)
call SaveReal(Hash_Stat,'U009',$540C61C7,20)
call SaveReal(Hash_Stat,'U009',$A7543052,0.5)
call SaveInteger(Hash_Stat,'US02',$C46B0D8B,10)
call SaveInteger(Hash_Stat,'US02',$5B2587EB,10)
call SaveInteger(Hash_Stat,'U010',$B38BEB44,20)
call SaveInteger(Hash_Stat,'U010',$9298D98F,15)
call SaveReal(Hash_Stat,'U010',$10BA18C8,0.20)
call SaveReal(Hash_Stat,'U010',$164C40C9,0.1)
call SaveInteger(Hash_Stat,'U014',$5B2587EB,5)
call SaveReal(Hash_Stat,'U015',$2E182EFC,0.05)
call SaveReal(Hash_Stat,'U015',$62BD2901,0.05)
call SaveInteger(Hash_Stat,'U018',$9298D98F,10)
call SaveReal(Hash_Stat,'U018',$164C40C9,0.1)
call SaveReal(Hash_Stat,'U020',$45E22B52,0.12)
call SaveReal(Hash_Stat,'U025',$F3FDA8C9,0.10)
call SaveInteger(Hash_Stat,'U025',$753B4F2F,10)
call SaveReal(Hash_Stat,'U026',$50B06B2,0.20)
call SaveInteger(Hash_Stat,'U026',$924944F9,10)
call SaveReal(Hash_Stat,'U027',$34D9AB92,20)
call SaveInteger(Hash_Stat,'U027',$924944F9,8)
call SaveInteger(Hash_Stat,'U028',$B7E7C8AD,20)
call SaveInteger(Hash_Stat,'U030',$8885555B,-12)
call SaveReal(Hash_Stat,'U030',$9BC8E22B,0.20)
call SaveReal(Hash_Stat,'U032',$5C6093F2,0.20)
call SaveReal(Hash_Stat,'U033',$BC3801A9,0.20)
call SaveReal(Hash_Stat,'U034',$50B06B2,0.20)
call SaveReal(Hash_Stat,'U035',$2034A1E3,0.20)
call SaveInteger(Hash_Stat,'U037',$B38BEB44,30)
call SaveReal(Hash_Stat,'U037',$2E182EFC,0.12)
call SaveInteger(Hash_Stat,'U038',$C46B0D8B,18)
call SaveInteger(Hash_Stat,'U039',$5B2587EB,18)
call SaveReal(Hash_Stat,'U040',$45E22B52,0.2)
call SaveReal(Hash_Stat,'U042',$164C40C9,0.1)
call SaveInteger(Hash_Stat,'U042',$C18D16A0,50)
call SaveInteger(Hash_Stat,'U043',$C46B0D8B,12)
call SaveInteger(Hash_Stat,'U043',$B7E7C8AD,20)
call SaveReal(Hash_Stat,'U044',$540C61C7,10)
call SaveReal(Hash_Stat,'U044',$1486341,0.2)
call SaveReal(Hash_Stat,'U047',$540C61C7,5)
call SaveReal(Hash_Stat,'U047',$1486341,0.12)
call SaveReal(Hash_Stat,'U048',$92D803F1,25)
call SaveReal(Hash_Stat,'U048',$62BD2901,0.30)
call SaveInteger(Hash_Stat,'U049',$B7E7C8AD,35)
call SaveInteger(Hash_Stat,'U050',$D8C9D96B,5)
call SaveInteger(Hash_Stat,'U051',$D8C9D96B,12)
call SaveReal(Hash_Stat,'U052',$5C6093F2,0.1)
call SaveReal(Hash_Stat,'U052',$BC3801A9,0.1)
call SaveReal(Hash_Stat,'U052',$50B06B2,0.1)
call SaveReal(Hash_Stat,'U052',$2034A1E3,0.1)
call SaveReal(Hash_Stat,'U053',$2E182EFC,0.15)
call SaveInteger(Hash_Stat,'U053',$ED314123,20)
call SaveReal(Hash_Stat,'U054',$62BD2901,0.20)
call SaveReal(Hash_Stat,'U055',$BC3801A9,0.2)
call SaveReal(Hash_Stat,'U057',$92D803F1,80)
call SaveInteger(Hash_Stat,'U057',$ED314123,10)
call SaveReal(Hash_Stat,'U060',$8EB4E7D9,0.05)
call SaveReal(Hash_Stat,'U060',$6DC36456,0.05)
call SaveReal(Hash_Stat,'U062',$5FF1A35F,0.15)
call SaveInteger(Hash_Stat,'U062',$D8C9D96B,8)
call SaveReal(Hash_Stat,'U063',$A053013A,0.20)
call SaveInteger(Hash_Stat,'U064',$5B2587EB,10)
call SaveInteger(Hash_Stat,'U064',$B7E7C8AD,15)
call SaveReal(Hash_Stat,'U065',$164C40C9,0.05)
call SaveReal(Hash_Stat,'U065',$92D803F1,50)
call SaveInteger(Hash_Stat,'U065',$ED314123,15)
call SaveReal(Hash_Stat,'U066',$337F1BA1,0.15)
call SaveReal(Hash_Stat,'U066',$1486341,0.15)
call SaveReal(Hash_Stat,'U067',$164C40C9,0.10)
call SaveReal(Hash_Stat,'U069',$45E22B52,0.12)
call SaveReal(Hash_Stat,'U069',$924944F9,8)
call SaveReal(Hash_Stat,'U070',$45E22B52,0.2)
call SaveReal(Hash_Stat,'U070',$A7543052,0.30)
call SaveReal(Hash_Stat,'U070',$A62A5B82,1)
call SaveReal(Hash_Stat,'U071',$8EB4E7D9,0.05)
call SaveReal(Hash_Stat,'U071',$6DC36456,0.05)
call SaveReal(Hash_Stat,'U072',$540C61C7,20)
call SaveReal(Hash_Stat,'U073',$A7543052,0.30)
call SaveReal(Hash_Stat,'U073',$A62A5B82,2)
call SaveReal(Hash_Stat,'U074',$34D9AB92,10)
call SaveReal(Hash_Stat,'U074',$540C61C7,10)
call SaveInteger(Hash_Stat,'U075',$D8C9D96B,10)
call SaveInteger(Hash_Stat,'U075',$C18D16A0,100)
call SaveReal(Hash_Stat,'U077',$45E22B52,0.10)
call SaveInteger(Hash_Stat,'U077',$5B2587EB,10)
call SaveReal(Hash_Stat,'U078',$F3FDA8C9,0.15)
call SaveReal(Hash_Stat,'U078',$164C40C9,0.08)
call SaveReal(Hash_Stat,'U080',$A053013A,0.05)
call SaveInteger(Hash_Stat,'U080',$22601A7A,500)
call SaveInteger(Hash_Stat,'U080',$D20F099,250)
call SaveReal(Hash_Stat,'U081',$A053013A,0.05)
call SaveReal(Hash_Stat,'U081',$F3FDA8C9,0.15)
call SaveReal(Hash_Stat,'U082',$A053013A,0.05)
call SaveReal(Hash_Stat,'U083',$A053013A,0.15)
call SaveReal(Hash_Stat,'U083',$34D9AB92,0.1)
call SaveReal(Hash_Stat,'U083',$540C61C7,0.1)
call SaveReal(Hash_Stat,'US01',$B38BEB44,2)
call SaveInteger(Hash_Stat,'US06',$8885555B,10)
call SaveInteger(Hash_Stat,'US08',$B7E7C8AD,30)
call SaveReal(Hash_Stat,'US08',$164C40C9,0.05)
call SaveInteger(Hash_Stat,'US08',$8885555B,3)
call SaveReal(Hash_Stat,'US08',$45E22B52,0.15)
call SaveReal(Hash_Stat,'US08',$A7543052,-0.20)
call SaveReal(Hash_Stat,'US08',$9BC8E22B,-0.20)
call SaveInteger(Hash_Stat,'US10',$C46B0D8B,5)
call SaveInteger(Hash_Stat,'US10',$C18D16A0,75)
call SaveInteger(Hash_Stat,'US10',$D8C9D96B,10)
call SaveInteger(Hash_Stat,'US04',$9298D98F,15)
call SaveInteger(Hash_Stat,'US13',$924944F9,10)
call SaveReal(Hash_Stat,'US13',$164C40C9,0.07)
call SaveReal(Hash_Stat,'US13',$8EB4E7D9,0.05)
call SaveReal(Hash_Stat,'US13',$6DC36456,0.05)
call SaveReal(Hash_Stat,'US13',$337F1BA1,0.15)
call SaveReal(Hash_Stat,'US13',$1486341,0.15)
call SaveReal(Hash_Stat,'US15',$34D9AB92,25)
call SaveReal(Hash_Stat,'US15',$540C61C7,25)
call SaveReal(Hash_Stat,'US15',$337F1BA1,0.2)
call SaveReal(Hash_Stat,'US15',$1486341,0.2)
call SaveReal(Hash_Stat,'US15',$F3FDA8C9,0.1)
call SaveReal(Hash_Stat,'US15',$164C40C9,0.15)
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cff7fffd4아티팩트 옵션 적용 완료.")
call SaveInteger(Hash_Stat,'I200',$A3A34F6C,150)
call SaveInteger(Hash_Stat,'I200',$B7E7C8AD,4)
call SaveInteger(Hash_Stat,'I300',$A3A34F6C,500)
call SaveInteger(Hash_Stat,'I300',$C46B0D8B,5)
call SaveInteger(Hash_Stat,'I300',$B7E7C8AD,8)
call SaveInteger(Hash_Stat,'I400',$A3A34F6C,1000)
call SaveInteger(Hash_Stat,'I400',$C46B0D8B,10)
call SaveInteger(Hash_Stat,'I400',$B7E7C8AD,12)
call SaveInteger(Hash_Stat,'I500',$A3A34F6C,2000)
call SaveInteger(Hash_Stat,'I500',$C46B0D8B,15)
call SaveInteger(Hash_Stat,'I500',$B7E7C8AD,16)
call SaveInteger(Hash_Stat,'I600',$A3A34F6C,4000)
call SaveInteger(Hash_Stat,'I600',$C46B0D8B,30)
call SaveInteger(Hash_Stat,'I600',$B7E7C8AD,20)
call SaveInteger(Hash_Stat,'I201',$A3A34F6C,150)
call SaveInteger(Hash_Stat,'I301',$A3A34F6C,500)
call SaveInteger(Hash_Stat,'I301',$C46B0D8B,5)
call SaveInteger(Hash_Stat,'I401',$A3A34F6C,1000)
call SaveInteger(Hash_Stat,'I401',$C46B0D8B,10)
call SaveInteger(Hash_Stat,'I501',$A3A34F6C,2000)
call SaveInteger(Hash_Stat,'I501',$C46B0D8B,15)
call SaveInteger(Hash_Stat,'I601',$A3A34F6C,4000)
call SaveInteger(Hash_Stat,'I601',$C46B0D8B,30)
call SaveInteger(Hash_Stat,'I235',$A3A34F6C,120)
call SaveInteger(Hash_Stat,'I335',$A3A34F6C,400)
call SaveInteger(Hash_Stat,'I335',$C46B0D8B,4)
call SaveInteger(Hash_Stat,'I435',$A3A34F6C,800)
call SaveInteger(Hash_Stat,'I435',$C46B0D8B,8)
call SaveInteger(Hash_Stat,'I535',$A3A34F6C,1600)
call SaveInteger(Hash_Stat,'I535',$C46B0D8B,12)
call SaveInteger(Hash_Stat,'I635',$A3A34F6C,3200)
call SaveInteger(Hash_Stat,'I635',$C46B0D8B,24)
call SaveInteger(Hash_Stat,'I236',$A3A34F6C,120)
call SaveInteger(Hash_Stat,'I336',$A3A34F6C,400)
call SaveInteger(Hash_Stat,'I336',$C46B0D8B,4)
call SaveInteger(Hash_Stat,'I436',$A3A34F6C,800)
call SaveInteger(Hash_Stat,'I436',$C46B0D8B,8)
call SaveInteger(Hash_Stat,'I536',$A3A34F6C,1600)
call SaveInteger(Hash_Stat,'I536',$C46B0D8B,12)
call SaveInteger(Hash_Stat,'I636',$A3A34F6C,3200)
call SaveInteger(Hash_Stat,'I636',$C46B0D8B,24)
call SaveInteger(Hash_Stat,'I224',$A3A34F6C,150)
call SaveReal(Hash_Stat,'I224',$8EB4E7D9,0.01)
call SaveInteger(Hash_Stat,'I324',$A3A34F6C,500)
call SaveInteger(Hash_Stat,'I324',$C46B0D8B,5)
call SaveReal(Hash_Stat,'I324',$8EB4E7D9,0.02)
call SaveInteger(Hash_Stat,'I424',$A3A34F6C,1000)
call SaveInteger(Hash_Stat,'I424',$C46B0D8B,10)
call SaveReal(Hash_Stat,'I424',$8EB4E7D9,0.03)
call SaveInteger(Hash_Stat,'I524',$A3A34F6C,2000)
call SaveInteger(Hash_Stat,'I524',$C46B0D8B,15)
call SaveReal(Hash_Stat,'I524',$8EB4E7D9,0.04)
call SaveInteger(Hash_Stat,'I624',$A3A34F6C,4000)
call SaveInteger(Hash_Stat,'I624',$C46B0D8B,30)
call SaveReal(Hash_Stat,'I624',$8EB4E7D9,0.05)
call SaveInteger(Hash_Stat,'I237',$1D27E6A1,150)
call SaveReal(Hash_Stat,'I237',$45E22B52,0.04)
call SaveInteger(Hash_Stat,'I337',$1D27E6A1,500)
call SaveInteger(Hash_Stat,'I337',$5B2587EB,5)
call SaveReal(Hash_Stat,'I337',$45E22B52,0.08)
call SaveInteger(Hash_Stat,'I437',$1D27E6A1,1000)
call SaveInteger(Hash_Stat,'I437',$5B2587EB,10)
call SaveReal(Hash_Stat,'I437',$45E22B52,0.12)
call SaveInteger(Hash_Stat,'I537',$1D27E6A1,2000)
call SaveInteger(Hash_Stat,'I537',$5B2587EB,15)
call SaveReal(Hash_Stat,'I537',$45E22B52,0.16)
call SaveInteger(Hash_Stat,'I637',$1D27E6A1,4000)
call SaveInteger(Hash_Stat,'I637',$5B2587EB,30)
call SaveReal(Hash_Stat,'I637',$45E22B52,0.2)
call SaveInteger(Hash_Stat,'I204',$1D27E6A1,165)
call SaveInteger(Hash_Stat,'I204',$4203D9C2,2000)
call SaveReal(Hash_Stat,'I204',$A7543052,0.04)
call SaveInteger(Hash_Stat,'I304',$1D27E6A1,550)
call SaveInteger(Hash_Stat,'I304',$5B2587EB,6)
call SaveInteger(Hash_Stat,'I304',$4203D9C2,4000)
call SaveReal(Hash_Stat,'I304',$A7543052,0.08)
call SaveInteger(Hash_Stat,'I404',$1D27E6A1,1100)
call SaveInteger(Hash_Stat,'I404',$5B2587EB,11)
call SaveInteger(Hash_Stat,'I404',$4203D9C2,6000)
call SaveReal(Hash_Stat,'I404',$A7543052,0.12)
call SaveInteger(Hash_Stat,'I504',$1D27E6A1,2200)
call SaveInteger(Hash_Stat,'I504',$5B2587EB,17)
call SaveInteger(Hash_Stat,'I504',$4203D9C2,8000)
call SaveReal(Hash_Stat,'I504',$A7543052,0.16)
call SaveInteger(Hash_Stat,'I604',$1D27E6A1,4400)
call SaveInteger(Hash_Stat,'I604',$5B2587EB,33)
call SaveInteger(Hash_Stat,'I604',$4203D9C2,10000)
call SaveReal(Hash_Stat,'I604',$A7543052,0.2)
call SaveInteger(Hash_Stat,'I238',$1D27E6A1,175)
call SaveReal(Hash_Stat,'I238',$6DC36456,0.01)
call SaveInteger(Hash_Stat,'I238',$8885555B,-10)
call SaveInteger(Hash_Stat,'I338',$1D27E6A1,575)
call SaveInteger(Hash_Stat,'I338',$5B2587EB,6)
call SaveReal(Hash_Stat,'I338',$6DC36456,0.02)
call SaveInteger(Hash_Stat,'I338',$8885555B,-10)
call SaveInteger(Hash_Stat,'I438',$1D27E6A1,1150)
call SaveInteger(Hash_Stat,'I438',$5B2587EB,12)
call SaveReal(Hash_Stat,'I438',$6DC36456,0.03)
call SaveInteger(Hash_Stat,'I438',$8885555B,-10)
call SaveInteger(Hash_Stat,'I538',$1D27E6A1,2300)
call SaveInteger(Hash_Stat,'I538',$5B2587EB,17)
call SaveReal(Hash_Stat,'I538',$6DC36456,0.04)
call SaveInteger(Hash_Stat,'I538',$8885555B,-10)
call SaveInteger(Hash_Stat,'I638',$1D27E6A1,4600)
call SaveInteger(Hash_Stat,'I638',$5B2587EB,35)
call SaveReal(Hash_Stat,'I638',$6DC36456,0.05)
call SaveInteger(Hash_Stat,'I638',$8885555B,-10)
call SaveInteger(Hash_Stat,'I240',$1D27E6A1,150)
call SaveReal(Hash_Stat,'I240',$A053013A,0.02)
call SaveInteger(Hash_Stat,'I340',$1D27E6A1,500)
call SaveInteger(Hash_Stat,'I340',$5B2587EB,5)
call SaveReal(Hash_Stat,'I340',$A053013A,0.04)
call SaveInteger(Hash_Stat,'I440',$1D27E6A1,1000)
call SaveInteger(Hash_Stat,'I440',$5B2587EB,10)
call SaveReal(Hash_Stat,'I440',$A053013A,0.06)
call SaveInteger(Hash_Stat,'I540',$1D27E6A1,2000)
call SaveInteger(Hash_Stat,'I540',$5B2587EB,15)
call SaveReal(Hash_Stat,'I540',$A053013A,0.08)
call SaveInteger(Hash_Stat,'I640',$1D27E6A1,4000)
call SaveInteger(Hash_Stat,'I640',$5B2587EB,30)
call SaveReal(Hash_Stat,'I640',$A053013A,0.1)
call SaveInteger(Hash_Stat,'I253',$1D27E6A1,135)
call SaveInteger(Hash_Stat,'I253',$B7E7C8AD,4)
call SaveInteger(Hash_Stat,'I353',$1D27E6A1,450)
call SaveInteger(Hash_Stat,'I353',$B7E7C8AD,8)
call SaveInteger(Hash_Stat,'I353',$5B2587EB,4)
call SaveInteger(Hash_Stat,'I453',$1D27E6A1,900)
call SaveInteger(Hash_Stat,'I453',$B7E7C8AD,12)
call SaveInteger(Hash_Stat,'I453',$5B2587EB,9)
call SaveInteger(Hash_Stat,'I553',$1D27E6A1,1800)
call SaveInteger(Hash_Stat,'I553',$B7E7C8AD,16)
call SaveInteger(Hash_Stat,'I553',$5B2587EB,14)
call SaveInteger(Hash_Stat,'I653',$1D27E6A1,3600)
call SaveInteger(Hash_Stat,'I653',$B7E7C8AD,20)
call SaveInteger(Hash_Stat,'I653',$5B2587EB,27)
call SaveInteger(Hash_Stat,'I241',$3181F127,400)
call SaveInteger(Hash_Stat,'I241',$B7E7C8AD,3)
call SaveInteger(Hash_Stat,'I241',$C18D16A0,20)
call SaveInteger(Hash_Stat,'I341',$3181F127,1500)
call SaveInteger(Hash_Stat,'I341',$D8C9D96B,6)
call SaveInteger(Hash_Stat,'I341',$B7E7C8AD,6)
call SaveInteger(Hash_Stat,'I341',$C18D16A0,40)
call SaveInteger(Hash_Stat,'I441',$3181F127,3250)
call SaveInteger(Hash_Stat,'I441',$D8C9D96B,6)
call SaveInteger(Hash_Stat,'I441',$B7E7C8AD,9)
call SaveInteger(Hash_Stat,'I441',$C18D16A0,60)
call SaveInteger(Hash_Stat,'I541',$3181F127,5250)
call SaveInteger(Hash_Stat,'I541',$D8C9D96B,12)
call SaveInteger(Hash_Stat,'I541',$B7E7C8AD,12)
call SaveInteger(Hash_Stat,'I541',$C18D16A0,80)
call SaveInteger(Hash_Stat,'I641',$3181F127,9000)
call SaveInteger(Hash_Stat,'I641',$D8C9D96B,24)
call SaveInteger(Hash_Stat,'I641',$B7E7C8AD,15)
call SaveInteger(Hash_Stat,'I641',$C18D16A0,100)
call SaveInteger(Hash_Stat,'I242',$1D27E6A1,150)
call SaveInteger(Hash_Stat,'I242',$5B2587EB,6)
call SaveReal(Hash_Stat,'I242',$9AB1A577,0.06)
call SaveInteger(Hash_Stat,'I342',$1D27E6A1,500)
call SaveInteger(Hash_Stat,'I342',$5B2587EB,5)
call SaveReal(Hash_Stat,'I342',$9AB1A577,0.12)
call SaveInteger(Hash_Stat,'I442',$1D27E6A1,1000)
call SaveInteger(Hash_Stat,'I442',$5B2587EB,10)
call SaveReal(Hash_Stat,'I442',$9AB1A577,0.18)
call SaveInteger(Hash_Stat,'I542',$1D27E6A1,2000)
call SaveInteger(Hash_Stat,'I542',$5B2587EB,15)
call SaveReal(Hash_Stat,'I542',$9AB1A577,0.24)
call SaveInteger(Hash_Stat,'I642',$1D27E6A1,4000)
call SaveInteger(Hash_Stat,'I642',$5B2587EB,20)
call SaveReal(Hash_Stat,'I642',$9AB1A577,0.3)
call SaveInteger(Hash_Stat,'I243',$EFFA2021,105)
call SaveInteger(Hash_Stat,'I343',$EFFA2021,350)
call SaveInteger(Hash_Stat,'I343',$753B4F2F,4)
call SaveInteger(Hash_Stat,'I443',$EFFA2021,700)
call SaveInteger(Hash_Stat,'I443',$753B4F2F,7)
call SaveInteger(Hash_Stat,'I543',$EFFA2021,1400)
call SaveInteger(Hash_Stat,'I543',$753B4F2F,11)
call SaveInteger(Hash_Stat,'I643',$EFFA2021,2800)
call SaveInteger(Hash_Stat,'I643',$753B4F2F,21)
call SaveInteger(Hash_Stat,'I743',$EFFA2021,3000)
call SaveInteger(Hash_Stat,'I743',$753B4F2F,25)
call SaveInteger(Hash_Stat,'I843',$EFFA2021,3500)
call SaveInteger(Hash_Stat,'I843',$753B4F2F,30)
call SaveInteger(Hash_Stat,'I943',$EFFA2021,4000)
call SaveInteger(Hash_Stat,'I943',$753B4F2F,35)
call SaveInteger(Hash_Stat,'I202',$3181F127,500)
call SaveInteger(Hash_Stat,'I202',$C18D16A0,25)
call SaveInteger(Hash_Stat,'I302',$3181F127,2000)
call SaveInteger(Hash_Stat,'I302',$C18D16A0,50)
call SaveInteger(Hash_Stat,'I402',$3181F127,4500)
call SaveInteger(Hash_Stat,'I402',$C18D16A0,75)
call SaveInteger(Hash_Stat,'I502',$3181F127,6500)
call SaveInteger(Hash_Stat,'I502',$C18D16A0,120)
call SaveInteger(Hash_Stat,'I602',$3181F127,12000)
call SaveInteger(Hash_Stat,'I602',$C18D16A0,200)
call SaveInteger(Hash_Stat,'I203',$3181F127,500)
call SaveInteger(Hash_Stat,'I203',$D8C9D96B,5)
call SaveInteger(Hash_Stat,'I303',$3181F127,2000)
call SaveInteger(Hash_Stat,'I303',$D8C9D96B,10)
call SaveInteger(Hash_Stat,'I403',$3181F127,4500)
call SaveInteger(Hash_Stat,'I403',$D8C9D96B,20)
call SaveInteger(Hash_Stat,'I503',$3181F127,6500)
call SaveInteger(Hash_Stat,'I503',$D8C9D96B,30)
call SaveInteger(Hash_Stat,'I603',$3181F127,12000)
call SaveInteger(Hash_Stat,'I603',$D8C9D96B,50)
call SaveInteger(Hash_Stat,'I246',$3181F127,500)
call SaveReal(Hash_Stat,'I246',$34D9AB92,10)
call SaveReal(Hash_Stat,'I246',$540C61C7,10)
call SaveReal(Hash_Stat,'I246',$337F1BA1,-0.2)
call SaveReal(Hash_Stat,'I246',$1486341,-0.2)
call SaveInteger(Hash_Stat,'I346',$3181F127,2000)
call SaveReal(Hash_Stat,'I346',$34D9AB92,20)
call SaveReal(Hash_Stat,'I346',$540C61C7,20)
call SaveReal(Hash_Stat,'I346',$337F1BA1,-0.2)
call SaveReal(Hash_Stat,'I346',$1486341,-0.2)
call SaveInteger(Hash_Stat,'I446',$3181F127,4500)
call SaveReal(Hash_Stat,'I446',$34D9AB92,30)
call SaveReal(Hash_Stat,'I446',$540C61C7,30)
call SaveReal(Hash_Stat,'I446',$337F1BA1,-0.2)
call SaveReal(Hash_Stat,'I446',$1486341,-0.2)
call SaveInteger(Hash_Stat,'I546',$3181F127,6500)
call SaveReal(Hash_Stat,'I546',$34D9AB92,40)
call SaveReal(Hash_Stat,'I546',$540C61C7,40)
call SaveReal(Hash_Stat,'I546',$337F1BA1,-0.2)
call SaveReal(Hash_Stat,'I546',$1486341,-0.2)
call SaveInteger(Hash_Stat,'I646',$3181F127,12000)
call SaveReal(Hash_Stat,'I646',$34D9AB92,50)
call SaveReal(Hash_Stat,'I646',$540C61C7,50)
call SaveReal(Hash_Stat,'I646',$337F1BA1,-0.2)
call SaveReal(Hash_Stat,'I646',$1486341,-0.2)
call SaveInteger(Hash_Stat,'I249',$3181F127,650)
call SaveReal(Hash_Stat,'I249',$2034A1E3,0.04)
call SaveInteger(Hash_Stat,'I349',$3181F127,2600)
call SaveReal(Hash_Stat,'I349',$2034A1E3,0.08)
call SaveInteger(Hash_Stat,'I449',$3181F127,5850)
call SaveReal(Hash_Stat,'I449',$2034A1E3,0.12)
call SaveInteger(Hash_Stat,'I549',$3181F127,8450)
call SaveReal(Hash_Stat,'I549',$2034A1E3,0.16)
call SaveInteger(Hash_Stat,'I649',$3181F127,15600)
call SaveReal(Hash_Stat,'I649',$2034A1E3,0.2)
call SaveReal(Hash_Stat,'I226',$5C6093F2,0.08)
call SaveReal(Hash_Stat,'I326',$5C6093F2,0.16)
call SaveReal(Hash_Stat,'I426',$5C6093F2,0.24)
call SaveReal(Hash_Stat,'I526',$5C6093F2,0.32)
call SaveReal(Hash_Stat,'I626',$5C6093F2,0.4)
call SaveReal(Hash_Stat,'I227',$BC3801A9,0.08)
call SaveReal(Hash_Stat,'I327',$BC3801A9,0.16)
call SaveReal(Hash_Stat,'I427',$BC3801A9,0.24)
call SaveReal(Hash_Stat,'I527',$BC3801A9,0.32)
call SaveReal(Hash_Stat,'I627',$BC3801A9,0.4)
call SaveReal(Hash_Stat,'I228',$50B06B2,0.08)
call SaveReal(Hash_Stat,'I328',$50B06B2,0.16)
call SaveReal(Hash_Stat,'I428',$50B06B2,0.24)
call SaveReal(Hash_Stat,'I528',$50B06B2,0.32)
call SaveReal(Hash_Stat,'I628',$50B06B2,0.4)
call SaveReal(Hash_Stat,'I229',$2034A1E3,0.08)
call SaveReal(Hash_Stat,'I329',$2034A1E3,0.16)
call SaveReal(Hash_Stat,'I429',$2034A1E3,0.24)
call SaveReal(Hash_Stat,'I529',$2034A1E3,0.32)
call SaveReal(Hash_Stat,'I629',$2034A1E3,0.4)
call SaveInteger(Hash_Stat,'I205',$D20F099,40)
call SaveReal(Hash_Stat,'I205',$92D803F1,50)
call SaveInteger(Hash_Stat,'I305',$D20F099,150)
call SaveReal(Hash_Stat,'I305',$92D803F1,100)
call SaveInteger(Hash_Stat,'I405',$D20F099,600)
call SaveReal(Hash_Stat,'I405',$92D803F1,150)
call SaveInteger(Hash_Stat,'I505',$D20F099,1250)
call SaveReal(Hash_Stat,'I505',$92D803F1,200)
call SaveInteger(Hash_Stat,'I605',$D20F099,2500)
call SaveReal(Hash_Stat,'I605',$92D803F1,250)
call SaveInteger(Hash_Stat,'I206',$D20F099,40)
call SaveReal(Hash_Stat,'I206',$92D803F1,50)
call SaveInteger(Hash_Stat,'I206',$8885555B,2)
call SaveInteger(Hash_Stat,'I306',$D20F099,150)
call SaveReal(Hash_Stat,'I306',$92D803F1,100)
call SaveInteger(Hash_Stat,'I306',$8885555B,4)
call SaveInteger(Hash_Stat,'I406',$D20F099,600)
call SaveReal(Hash_Stat,'I406',$92D803F1,150)
call SaveInteger(Hash_Stat,'I406',$8885555B,6)
call SaveInteger(Hash_Stat,'I506',$D20F099,1250)
call SaveReal(Hash_Stat,'I506',$92D803F1,200)
call SaveInteger(Hash_Stat,'I506',$8885555B,8)
call SaveInteger(Hash_Stat,'I606',$D20F099,2500)
call SaveReal(Hash_Stat,'I606',$92D803F1,250)
call SaveInteger(Hash_Stat,'I606',$8885555B,10)
call SaveInteger(Hash_Stat,'I207',$D20F099,40)
call SaveReal(Hash_Stat,'I207',$92D803F1,50)
call SaveInteger(Hash_Stat,'I207',$C18D16A0,10)
call SaveInteger(Hash_Stat,'I207',$924944F9,2)
call SaveInteger(Hash_Stat,'I307',$D20F099,150)
call SaveReal(Hash_Stat,'I307',$92D803F1,100)
call SaveInteger(Hash_Stat,'I307',$C18D16A0,20)
call SaveInteger(Hash_Stat,'I307',$924944F9,4)
call SaveInteger(Hash_Stat,'I407',$D20F099,600)
call SaveReal(Hash_Stat,'I407',$92D803F1,150)
call SaveInteger(Hash_Stat,'I407',$C18D16A0,30)
call SaveInteger(Hash_Stat,'I407',$924944F9,6)
call SaveInteger(Hash_Stat,'I507',$D20F099,1250)
call SaveReal(Hash_Stat,'I507',$92D803F1,200)
call SaveInteger(Hash_Stat,'I507',$C18D16A0,40)
call SaveInteger(Hash_Stat,'I507',$924944F9,8)
call SaveInteger(Hash_Stat,'I607',$D20F099,2500)
call SaveReal(Hash_Stat,'I607',$92D803F1,250)
call SaveInteger(Hash_Stat,'I607',$C18D16A0,50)
call SaveInteger(Hash_Stat,'I607',$924944F9,10)
call SaveInteger(Hash_Stat,'I208',$D20F099,70)
call SaveReal(Hash_Stat,'I208',$92D803F1,40)
call SaveReal(Hash_Stat,'I208',$7FAFA384,0.50)
call SaveInteger(Hash_Stat,'I308',$D20F099,255)
call SaveReal(Hash_Stat,'I308',$92D803F1,75)
call SaveReal(Hash_Stat,'I308',$7FAFA384,0.75)
call SaveInteger(Hash_Stat,'I408',$D20F099,1020)
call SaveReal(Hash_Stat,'I408',$92D803F1,90)
call SaveReal(Hash_Stat,'I408',$7FAFA384,0.95)
call SaveInteger(Hash_Stat,'I508',$D20F099,2125)
call SaveReal(Hash_Stat,'I508',$92D803F1,150)
call SaveReal(Hash_Stat,'I508',$7FAFA384,1.15)
call SaveInteger(Hash_Stat,'I608',$D20F099,4250)
call SaveReal(Hash_Stat,'I608',$92D803F1,190)
call SaveReal(Hash_Stat,'I608',$7FAFA384,1.50)
call SaveInteger(Hash_Stat,'I209',$D20F099,40)
call SaveReal(Hash_Stat,'I209',$92D803F1,50)
call SaveInteger(Hash_Stat,'I209',$C46B0D8B,3)
call SaveInteger(Hash_Stat,'I309',$D20F099,150)
call SaveReal(Hash_Stat,'I309',$92D803F1,100)
call SaveInteger(Hash_Stat,'I309',$C46B0D8B,6)
call SaveInteger(Hash_Stat,'I409',$D20F099,600)
call SaveReal(Hash_Stat,'I409',$92D803F1,150)
call SaveInteger(Hash_Stat,'I409',$C46B0D8B,9)
call SaveInteger(Hash_Stat,'I509',$D20F099,1250)
call SaveReal(Hash_Stat,'I509',$92D803F1,200)
call SaveInteger(Hash_Stat,'I509',$C46B0D8B,12)
call SaveInteger(Hash_Stat,'I609',$D20F099,2500)
call SaveReal(Hash_Stat,'I609',$92D803F1,250)
call SaveInteger(Hash_Stat,'I609',$C46B0D8B,15)
call SaveInteger(Hash_Stat,'I210',$D20F099,35)
call SaveReal(Hash_Stat,'I210',$92D803F1,45)
call SaveInteger(Hash_Stat,'I210',$4203D9C2,2000)
call SaveInteger(Hash_Stat,'I310',$D20F099,135)
call SaveReal(Hash_Stat,'I310',$92D803F1,95)
call SaveInteger(Hash_Stat,'I310',$4203D9C2,4000)
call SaveInteger(Hash_Stat,'I410',$D20F099,540)
call SaveReal(Hash_Stat,'I410',$92D803F1,145)
call SaveInteger(Hash_Stat,'I410',$4203D9C2,6000)
call SaveInteger(Hash_Stat,'I510',$D20F099,1125)
call SaveReal(Hash_Stat,'I510',$92D803F1,190)
call SaveInteger(Hash_Stat,'I510',$4203D9C2,8000)
call SaveInteger(Hash_Stat,'I610',$D20F099,2250)
call SaveReal(Hash_Stat,'I610',$92D803F1,240)
call SaveInteger(Hash_Stat,'I610',$4203D9C2,10000)
call SaveInteger(Hash_Stat,'I230',$D20F099,50)
call SaveReal(Hash_Stat,'I230',$92D803F1,50)
call SaveInteger(Hash_Stat,'I230',$B38BEB44,4)
call SaveInteger(Hash_Stat,'I330',$D20F099,180)
call SaveReal(Hash_Stat,'I330',$92D803F1,100)
call SaveInteger(Hash_Stat,'I300',$B38BEB44,8)
call SaveInteger(Hash_Stat,'I430',$D20F099,720)
call SaveReal(Hash_Stat,'I430',$92D803F1,150)
call SaveInteger(Hash_Stat,'I430',$B38BEB44,12)
call SaveInteger(Hash_Stat,'I530',$D20F099,1500)
call SaveReal(Hash_Stat,'I530',$92D803F1,200)
call SaveInteger(Hash_Stat,'I530',$B38BEB44,16)
call SaveInteger(Hash_Stat,'I630',$D20F099,2400)
call SaveReal(Hash_Stat,'I630',$92D803F1,250)
call SaveInteger(Hash_Stat,'I630',$B38BEB44,20)
call SaveInteger(Hash_Stat,'I244',$D20F099,45)
call SaveReal(Hash_Stat,'I244',$92D803F1,40)
call SaveInteger(Hash_Stat,'I244',$5B2587EB,2)
call SaveInteger(Hash_Stat,'I344',$D20F099,165)
call SaveReal(Hash_Stat,'I344',$92D803F1,85)
call SaveInteger(Hash_Stat,'I344',$5B2587EB,4)
call SaveInteger(Hash_Stat,'I444',$D20F099,660)
call SaveReal(Hash_Stat,'I444',$92D803F1,130)
call SaveInteger(Hash_Stat,'I444',$5B2587EB,6)
call SaveInteger(Hash_Stat,'I544',$D20F099,1375)
call SaveReal(Hash_Stat,'I544',$92D803F1,170)
call SaveInteger(Hash_Stat,'I544',$5B2587EB,8)
call SaveInteger(Hash_Stat,'I644',$D20F099,2750)
call SaveReal(Hash_Stat,'I644',$92D803F1,215)
call SaveInteger(Hash_Stat,'I644',$5B2587EB,10)
call SaveInteger(Hash_Stat,'I245',$D20F099,50)
call SaveReal(Hash_Stat,'I245',$92D803F1,55)
call SaveInteger(Hash_Stat,'I345',$D20F099,180)
call SaveReal(Hash_Stat,'I345',$92D803F1,105)
call SaveInteger(Hash_Stat,'I445',$D20F099,720)
call SaveReal(Hash_Stat,'I445',$92D803F1,160)
call SaveInteger(Hash_Stat,'I545',$D20F099,1500)
call SaveReal(Hash_Stat,'I545',$92D803F1,210)
call SaveInteger(Hash_Stat,'I645',$D20F099,3000)
call SaveReal(Hash_Stat,'I645',$92D803F1,265)
call SaveInteger(Hash_Stat,'I234',$D20F099,25)
call SaveReal(Hash_Stat,'I234',$92D803F1,35)
call SaveInteger(Hash_Stat,'I334',$D20F099,105)
call SaveReal(Hash_Stat,'I334',$92D803F1,70)
call SaveInteger(Hash_Stat,'I434',$D20F099,420)
call SaveReal(Hash_Stat,'I434',$92D803F1,105)
call SaveInteger(Hash_Stat,'I534',$D20F099,875)
call SaveReal(Hash_Stat,'I534',$92D803F1,140)
call SaveInteger(Hash_Stat,'I634',$D20F099,1750)
call SaveReal(Hash_Stat,'I634',$92D803F1,175)
call SaveInteger(Hash_Stat,'I247',$D20F099,35)
call SaveReal(Hash_Stat,'I247',$92D803F1,45)
call SaveInteger(Hash_Stat,'I247',$B7E7C8AD,3)
call SaveInteger(Hash_Stat,'I347',$D20F099,135)
call SaveReal(Hash_Stat,'I347',$92D803F1,95)
call SaveInteger(Hash_Stat,'I347',$B7E7C8AD,6)
call SaveInteger(Hash_Stat,'I447',$D20F099,540)
call SaveReal(Hash_Stat,'I447',$92D803F1,145)
call SaveInteger(Hash_Stat,'I447',$B7E7C8AD,9)
call SaveInteger(Hash_Stat,'I547',$D20F099,1125)
call SaveReal(Hash_Stat,'I547',$92D803F1,190)
call SaveInteger(Hash_Stat,'I547',$B7E7C8AD,12)
call SaveInteger(Hash_Stat,'I647',$D20F099,2250)
call SaveReal(Hash_Stat,'I647',$92D803F1,240)
call SaveInteger(Hash_Stat,'I647',$B7E7C8AD,15)
call SaveInteger(Hash_Stat,'I248',$D20F099,35)
call SaveReal(Hash_Stat,'I248',$92D803F1,35)
call SaveInteger(Hash_Stat,'I248',$D8C9D96B,2)
call SaveInteger(Hash_Stat,'I348',$D20F099,120)
call SaveReal(Hash_Stat,'I348',$92D803F1,70)
call SaveInteger(Hash_Stat,'I348',$D8C9D96B,4)
call SaveInteger(Hash_Stat,'I448',$D20F099,480)
call SaveReal(Hash_Stat,'I448',$92D803F1,105)
call SaveInteger(Hash_Stat,'I448',$D8C9D96B,6)
call SaveInteger(Hash_Stat,'I548',$D20F099,1000)
call SaveReal(Hash_Stat,'I548',$92D803F1,140)
call SaveInteger(Hash_Stat,'I548',$D8C9D96B,8)
call SaveInteger(Hash_Stat,'I648',$D20F099,2000)
call SaveReal(Hash_Stat,'I648',$92D803F1,175)
call SaveInteger(Hash_Stat,'I648',$D8C9D96B,10)
call SaveInteger(Hash_Stat,'I250',$D20F099,35)
call SaveReal(Hash_Stat,'I250',$92D803F1,45)
call SaveInteger(Hash_Stat,'I250',$B7E7C8AD,3)
call SaveInteger(Hash_Stat,'I350',$D20F099,135)
call SaveReal(Hash_Stat,'I350',$92D803F1,95)
call SaveInteger(Hash_Stat,'I350',$B7E7C8AD,6)
call SaveInteger(Hash_Stat,'I450',$D20F099,540)
call SaveReal(Hash_Stat,'I450',$92D803F1,145)
call SaveInteger(Hash_Stat,'I450',$B7E7C8AD,9)
call SaveInteger(Hash_Stat,'I550',$D20F099,1125)
call SaveReal(Hash_Stat,'I550',$92D803F1,190)
call SaveInteger(Hash_Stat,'I550',$B7E7C8AD,12)
call SaveInteger(Hash_Stat,'I650',$D20F099,2250)
call SaveReal(Hash_Stat,'I650',$92D803F1,240)
call SaveInteger(Hash_Stat,'I650',$B7E7C8AD,15)
call SaveInteger(Hash_Stat,'I254',$D20F099,50)
call SaveReal(Hash_Stat,'I254',$92D803F1,55)
call SaveInteger(Hash_Stat,'I354',$D20F099,180)
call SaveReal(Hash_Stat,'I354',$92D803F1,110)
call SaveInteger(Hash_Stat,'I454',$D20F099,720)
call SaveReal(Hash_Stat,'I454',$92D803F1,135)
call SaveInteger(Hash_Stat,'I554',$D20F099,1500)
call SaveReal(Hash_Stat,'I554',$92D803F1,220)
call SaveInteger(Hash_Stat,'I654',$D20F099,2400)
call SaveReal(Hash_Stat,'I654',$92D803F1,275)
call SaveInteger(Hash_Stat,'I754',$D20F099,3000)
call SaveReal(Hash_Stat,'I754',$92D803F1,300)
call SaveReal(Hash_Stat,'I211',$34D9AB92,10)
call SaveReal(Hash_Stat,'I211',$540C61C7,10)
call SaveReal(Hash_Stat,'I211',$337F1BA1,0.04)
call SaveReal(Hash_Stat,'I211',$1486341,0.04)
call SaveReal(Hash_Stat,'I311',$34D9AB92,20)
call SaveReal(Hash_Stat,'I311',$540C61C7,20)
call SaveReal(Hash_Stat,'I311',$337F1BA1,0.08)
call SaveReal(Hash_Stat,'I311',$1486341,0.08)
call SaveReal(Hash_Stat,'I411',$34D9AB92,30)
call SaveReal(Hash_Stat,'I411',$540C61C7,30)
call SaveReal(Hash_Stat,'I411',$337F1BA1,0.12)
call SaveReal(Hash_Stat,'I411',$1486341,0.12)
call SaveReal(Hash_Stat,'I511',$34D9AB92,40)
call SaveReal(Hash_Stat,'I511',$540C61C7,40)
call SaveReal(Hash_Stat,'I511',$337F1BA1,0.16)
call SaveReal(Hash_Stat,'I511',$1486341,0.16)
call SaveReal(Hash_Stat,'I611',$34D9AB92,50)
call SaveReal(Hash_Stat,'I611',$540C61C7,50)
call SaveReal(Hash_Stat,'I611',$337F1BA1,0.20)
call SaveReal(Hash_Stat,'I611',$1486341,0.20)
call SaveInteger(Hash_Stat,'I213',$B7E7C8AD,15)
call SaveInteger(Hash_Stat,'I313',$B7E7C8AD,25)
call SaveInteger(Hash_Stat,'I413',$B7E7C8AD,35)
call SaveInteger(Hash_Stat,'I513',$B7E7C8AD,45)
call SaveInteger(Hash_Stat,'I613',$B7E7C8AD,60)
call SaveReal(Hash_Stat,'I215',$10BA18C8,0.04)
call SaveReal(Hash_Stat,'I315',$10BA18C8,0.08)
call SaveReal(Hash_Stat,'I415',$10BA18C8,0.12)
call SaveReal(Hash_Stat,'I515',$10BA18C8,0.16)
call SaveReal(Hash_Stat,'I615',$10BA18C8,0.2)
call SaveInteger(Hash_Stat,'I216',$C18D16A0,30)
call SaveInteger(Hash_Stat,'I316',$C18D16A0,60)
call SaveInteger(Hash_Stat,'I416',$C18D16A0,90)
call SaveInteger(Hash_Stat,'I516',$C18D16A0,120)
call SaveInteger(Hash_Stat,'I616',$C18D16A0,150)
call SaveReal(Hash_Stat,'I616',$BE471C4,0.1)
call SaveInteger(Hash_Stat,'I217',$924944F9,4)
call SaveInteger(Hash_Stat,'I317',$924944F9,8)
call SaveInteger(Hash_Stat,'I417',$924944F9,12)
call SaveInteger(Hash_Stat,'I517',$924944F9,16)
call SaveInteger(Hash_Stat,'I617',$924944F9,20)
call SaveReal(Hash_Stat,'I218',$F3FDA8C9,0.05)
call SaveReal(Hash_Stat,'I318',$F3FDA8C9,0.1)
call SaveReal(Hash_Stat,'I418',$F3FDA8C9,0.15)
call SaveReal(Hash_Stat,'I518',$F3FDA8C9,0.2)
call SaveReal(Hash_Stat,'I618',$F3FDA8C9,0.3)
call SaveInteger(Hash_Stat,'I220',$C46B0D8B,10)
call SaveInteger(Hash_Stat,'I320',$C46B0D8B,15)
call SaveInteger(Hash_Stat,'I420',$C46B0D8B,20)
call SaveInteger(Hash_Stat,'I520',$C46B0D8B,25)
call SaveInteger(Hash_Stat,'I620',$C46B0D8B,30)
call SaveInteger(Hash_Stat,'I221',$B38BEB44,8)
call SaveInteger(Hash_Stat,'I321',$B38BEB44,16)
call SaveInteger(Hash_Stat,'I421',$B38BEB44,24)
call SaveInteger(Hash_Stat,'I521',$B38BEB44,32)
call SaveInteger(Hash_Stat,'I621',$B38BEB44,40)
call SaveInteger(Hash_Stat,'I222',$5B2587EB,10)
call SaveInteger(Hash_Stat,'I322',$5B2587EB,15)
call SaveInteger(Hash_Stat,'I422',$5B2587EB,20)
call SaveInteger(Hash_Stat,'I522',$5B2587EB,25)
call SaveInteger(Hash_Stat,'I622',$5B2587EB,30)
call SaveReal(Hash_Stat,'I223',$3362B68D,0.1)
call SaveReal(Hash_Stat,'I323',$3362B68D,0.2)
call SaveReal(Hash_Stat,'I423',$3362B68D,0.3)
call SaveReal(Hash_Stat,'I523',$3362B68D,0.4)
call SaveReal(Hash_Stat,'I623',$3362B68D,0.6)
call SaveReal(Hash_Stat,'I223',$A053013A,0.05)
call SaveReal(Hash_Stat,'I323',$A053013A,0.1)
call SaveReal(Hash_Stat,'I423',$A053013A,0.15)
call SaveReal(Hash_Stat,'I523',$A053013A,0.2)
call SaveReal(Hash_Stat,'I623',$A053013A,0.4)
call SaveReal(Hash_Stat,'I225',$2E182EFC,0.06)
call SaveReal(Hash_Stat,'I225',$9AB1A577,0.06)
call SaveReal(Hash_Stat,'I325',$2E182EFC,0.12)
call SaveReal(Hash_Stat,'I325',$9AB1A577,0.12)
call SaveReal(Hash_Stat,'I425',$2E182EFC,0.18)
call SaveReal(Hash_Stat,'I425',$9AB1A577,0.18)
call SaveReal(Hash_Stat,'I525',$2E182EFC,0.24)
call SaveReal(Hash_Stat,'I525',$9AB1A577,0.24)
call SaveReal(Hash_Stat,'I625',$2E182EFC,0.3)
call SaveReal(Hash_Stat,'I625',$9AB1A577,0.3)
call SaveReal(Hash_Stat,'I233',$A7543052,-0.06)
call SaveReal(Hash_Stat,'I233',$9BC8E22B,-0.06)
call SaveReal(Hash_Stat,'I333',$A7543052,-0.12)
call SaveReal(Hash_Stat,'I333',$9BC8E22B,-0.12)
call SaveReal(Hash_Stat,'I433',$A7543052,-0.18)
call SaveReal(Hash_Stat,'I433',$9BC8E22B,-0.18)
call SaveReal(Hash_Stat,'I533',$A7543052,-0.24)
call SaveReal(Hash_Stat,'I533',$9BC8E22B,-0.24)
call SaveReal(Hash_Stat,'I633',$A7543052,-0.3)
call SaveReal(Hash_Stat,'I633',$9BC8E22B,-0.3)
call SaveReal(Hash_Stat,'I251',$337F1BA1,0.07)
call SaveReal(Hash_Stat,'I251',$1486341,0.07)
call SaveReal(Hash_Stat,'I351',$337F1BA1,0.14)
call SaveReal(Hash_Stat,'I351',$1486341,0.14)
call SaveReal(Hash_Stat,'I451',$337F1BA1,0.21)
call SaveReal(Hash_Stat,'I451',$1486341,0.21)
call SaveReal(Hash_Stat,'I551',$337F1BA1,0.28)
call SaveReal(Hash_Stat,'I551',$1486341,0.28)
call SaveReal(Hash_Stat,'I651',$337F1BA1,0.35)
call SaveReal(Hash_Stat,'I651',$1486341,0.35)
call SaveInteger(Hash_Stat,'I252',$ED314123,4)
call SaveInteger(Hash_Stat,'I352',$ED314123,8)
call SaveInteger(Hash_Stat,'I452',$ED314123,12)
call SaveInteger(Hash_Stat,'I552',$ED314123,16)
call SaveInteger(Hash_Stat,'I652',$ED314123,20)
call SaveInteger(Hash_Stat,'I019',$D20F099,99999)
call SaveReal(Hash_Stat,'I019',$92D803F1,700)
call SaveReal(Hash_Stat,'I019',$34D9AB92,100)
call SaveReal(Hash_Stat,'I019',$540C61C7,100)
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function InitTrig_ArtSet takes nothing returns nothing
local trigger trg
set trg=CreateTrigger()
call TimerStart(CreateTimer(),0.3,false,function ArtSets)
set trg=null
endfunction
function TimerBroke takes nothing returns nothing
local timer t=GetExpiredTimer()
local timerdialog td=LoadTimerDialogHandle(System,GetHandleId(t),$FAD24066)
call DestroyTimerDialog(td)
call FlushChildHashtable(System,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set RoundTimer=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_Round_Start,RoundTimer)
call TimerStart(RoundTimer,110,false,null)
call SaveInteger(udg_Hash,GetHandleId(RoundTimer),$3862CC76,1)
set td=CreateTimerDialog(RoundTimer)
call TimerDialogSetTitle(td,"1 웨이브")
call TimerDialogDisplay(td,true)
call SaveTimerDialogHandle(udg_Hash,GetHandleId(RoundTimer),$72981BBD,td)
set t=null
set td=null
endfunction
function Trig_Difficulty_set_Actions takes nothing returns nothing
local integer a
local timer t=RoundTimer
local timerdialog td
call DestroyTrigger(GetTriggeringTrigger())
call DialogDisplayBJ(false,udg_Dialog,Player(0))
if GetClickedButtonBJ()==udg_Dialog_B[1]then
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700난이도 : |cff00ff7f'쉬움'")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700보스전 기본 목숨 부여 :|cffff0000 100개")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700보스 데미지 감소율 :|cffff0000 0%")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700보스 스텟 배율 변동 :|cffff0000 0%")
set difficulty=1
set a=2
loop
exitwhen a==Playint+2
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),5,a,"100")
set a=a+1
endloop
set a=0
loop
exitwhen a>=Playint
set a=a+1
call SaveInteger(udg_Hash,PP[a],$39F717C6,100)
endloop
elseif GetClickedButtonBJ()==udg_Dialog_B[2]then
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700난이도 : |cffff7f50'어려움'")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700보스전 기본 목숨 부여 :|cffff0000 10개")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700보스 데미지 감소율 :|cffff0000 10%")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700보스 스텟 배율 변동 :|cffff0000 소량")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700모든 몬스터 강화 :|cffff0000 강력해짐")
set difficulty=2
set ArmorPenetrate[12]=0.2
call SetPlayerTechResearched(Player(10),'UP01',1)
set a=0
set DamageDec[12]=10
set a=2
loop
exitwhen a==Playint+2
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),5,a,"10")
set a=a+1
endloop
set a=0
loop
exitwhen a>=Playint
set a=a+1
call SaveInteger(udg_Hash,PP[a],$39F717C6,10)
endloop
elseif GetClickedButtonBJ()==udg_Dialog_B[3]then
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700난이도 : |cffff0000'지옥'")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700보스전 기본 목숨 부여 :|cffff0000 3개")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700보스 데미지 감소율 :|cffff0000 25%")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700보스 스텟 배율 변동 :|cffff0000 높음")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700모든 몬스터 변화 :|cffff0000 난폭해짐")
set difficulty=3
set ArmorPenetrate[12]=0.3
call SetPlayerTechResearched(Player(10),'UP01',2)
set DamageDec[12]=25
set a=2
loop
exitwhen a==Playint+2
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),5,a,"3")
set a=a+1
endloop
set a=0
loop
exitwhen a>=Playint
set a=a+1
call SaveInteger(udg_Hash,PP[a],$39F717C6,3)
endloop
elseif GetClickedButtonBJ()==udg_Dialog_B[4]then
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700난이도 : |cffff7f50'|cffb22222악|cff8b4513몽|cffff7f50'")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700보스전 기본 목숨 부여 :|cffff0000 0개")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700보스 데미지 감소율 :|cffff0000 40%")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700보스 스텟 배율 변동 :|cffff0000 매우 높음")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd700모든 몬스터 변화 :|cffff0000 절망적")
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffff0000[ 주의 ] - 보스에게 정체를 알수없는 이변 발생")
set difficulty=4
set ArmorPenetrate[12]=0.4
call SetPlayerTechResearched(Player(10),'UP01',3)
set DamageDec[12]=40
set a=0
loop
exitwhen a>=Playint
set a=a+1
call SaveInteger(udg_Hash,PP[a],$39F717C6,0)
endloop
endif
call DisplayTimedTextToForce(GetPlayersAll(),15,"|cffffd70060초내에 캐릭터 선택을 완료해주세요.")
call TimerStart(t,60,false,function TimerBroke)
set td=CreateTimerDialogBJ(t,"캐릭터 선택 남은 시간")
call SaveTimerDialogHandle(System,GetHandleId(t),$FAD24066,td)
set a=0
loop
exitwhen a>=Playint
set a=a+1
set str=StashLoad(PLAYER_DATA[(PP[a]-1)],"선행권","0")
if str !="0" then
if GetLocalPlayer()==Player(PP[a]-1)then
call DzSetUnitModel(gg_unit_n005_0137,"buildings\\other\\Tavern\\Tavern.mdx")
endif
endif
call CreateNUnitsAtLoc(1,'e000',ConvertedPlayer(PP[a]),GetRectCenter(gg_rct_WisspZone),bj_UNIT_FACING)
set udg_PickUpunit[PP[a]]=GetLastCreatedUnit()
endloop
set t=null
set td=null
endfunction
function InitTrig_Difficulty_set takes nothing returns nothing
set gg_trg_Difficulty_set=CreateTrigger()
call TriggerRegisterDialogEventBJ(gg_trg_Difficulty_set,udg_Dialog)
call TriggerAddAction(gg_trg_Difficulty_set,function Trig_Difficulty_set_Actions)
endfunction
function WaveUnitCreate takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer Round=LoadInteger(udg_Hash,GetHandleId(t),$721404A7)
local real tempX
local real tempY
local unit c
local string model=LoadStr(udg_Hash,0,$28C8CC8E+Round)
local real WaveRange=LoadReal(udg_Hash,0,$63E433C9+Round)
local integer UnitDamage=R2I((((Round*(Round*0.5))*(20+difficulty*4))+((Round*Round)*8)+135)*(0.7+(difficulty*0.1)))
local real UnitHP
local real Armor=(5+(Round*5)+(Round*6))*(0.9+(difficulty*0.1))
local integer loopA
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if Round<=5 then
set UnitHP=(500+((Round*(Round*1.5))*200)+((Round*(Round*1.5))*200))
elseif Round>5 and Round<=10 then
set UnitHP=(350+((Round*(Round*1.5))*200)+((Round*(Round*2))*200))
elseif Round>10 and Round<=15 then
set UnitHP=(100+((Round*(Round*1.5))*200)+((Round*(Round*2.5))*200))
elseif Round>15 and Round<=20 then
set UnitHP=((Round*(Round*1.5))*200)+((Round*(Round*3))*200)
elseif Round>20 and Round<=25 then
set UnitHP=((Round*(Round*1.5))*200)+((Round*(Round*3.25))*200)
elseif Round>25 and Round<=30 then
set UnitHP=((Round*(Round*1.5))*200)+((Round*(Round*3.5))*250)
endif
set UnitHP=UnitHP*(0.6+(difficulty*0.2))
if stage==10 and Round==5 or Round==15 or Round==25 then
set tempX=GetRectCenterX(gg_rct_wave2)
set tempY=GetRectCenterY(gg_rct_wave2)
set loopA=0
loop
exitwhen loopA==Playint
set loopA=loopA+1
call FilterBasic(Player(PP[loopA]-1),3.50,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,0.00,0.00,20.00,100.00,0.00,0.00,100.00)
endloop
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@SY_warningSyne.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
if Round==5 then
set c=CreateUnit(Player(12),'EN99',tempX,tempY,270)
set Boss=c
call illidanSET()
set Model[11]="units\\nightelf\\HeroDemonHunter\\HeroDemonHunter.mdl"
call DPSstart()
endif
if Round==15 then
set c=CreateUnit(Player(12),'EN98',tempX,tempY,270)
set Boss=c
call DoomGuardSET()
set Model[11]="units\\demon\\DoomGuard\\DoomGuard.mdl"
call DPSstart()
endif
if Round==25 then
set c=CreateUnit(Player(12),'EN97',tempX,tempY,270)
set Boss=c
call SeaWitchSET()
set Model[11]="units\\naga\\HeroNagaSeawitch\\HeroNagaSeawitch.mdl"
call DPSstart()
endif
call BOSSdifficulty(c)
call SaveUnitHandle(udg_Hash,$944CCEB0,1,Boss)
set tempX=GetRectCenterX(gg_rct_AttackZone)
set tempY=GetRectCenterY(gg_rct_AttackZone)
call IssuePointOrder(c,"attack",tempX,tempY)
set loopA=0
loop
exitwhen loopA==Playint
set loopA=loopA+1
call BossBar_Setting(Boss,R2I(GetUnitState(Boss,UNIT_STATE_MAX_LIFE)*0.0001))
call BossBar_Apply(Player(PP[loopA]-1),Boss)
endloop
endif
if stage==16 then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
set tempX=GetRectCenterX(gg_rct_wave1)
set tempY=GetRectCenterY(gg_rct_wave1)
set c=CreateUnit(Player(12),'wv00',tempX,tempY,270)
call DzSetUnitModel(c,model)
call SetUnitState(c,ConvertUnitState(0x16),WaveRange)
call SetUnitState(c,ConvertUnitState(0x12),UnitDamage)
call SetUnitState(c,UNIT_STATE_MAX_LIFE,UnitHP)
call SetUnitState(c,UNIT_STATE_LIFE,GetUnitState(c,UNIT_STATE_MAX_LIFE))
call SetUnitState(c,ConvertUnitState(0x20),Armor)
set tempX=GetRectCenterX(gg_rct_wave2_attack1)
set tempY=GetRectCenterY(gg_rct_wave2_attack1)
call IssuePointOrder(c,"patrol",tempX,tempY)
set tempX=GetRectCenterX(gg_rct_wave2)
set tempY=GetRectCenterY(gg_rct_wave2)
set c=CreateUnit(Player(12),'wv00',tempX,tempY,270)
call DzSetUnitModel(c,model)
call SetUnitState(c,ConvertUnitState(0x16),WaveRange)
call SetUnitState(c,ConvertUnitState(0x12),UnitDamage)
call SetUnitState(c,UNIT_STATE_MAX_LIFE,UnitHP)
call SetUnitState(c,UNIT_STATE_LIFE,GetUnitState(c,UNIT_STATE_MAX_LIFE))
call SetUnitState(c,ConvertUnitState(0x20),Armor)
set tempX=GetRectCenterX(gg_rct_wave2_attack1)
set tempY=GetRectCenterY(gg_rct_wave2_attack1)
call IssuePointOrder(c,"patrol",tempX,tempY)
set tempX=GetRectCenterX(gg_rct_wave3)
set tempY=GetRectCenterY(gg_rct_wave3)
set c=CreateUnit(Player(12),'wv00',tempX,tempY,270)
call DzSetUnitModel(c,model)
call SetUnitState(c,ConvertUnitState(0x16),WaveRange)
call SetUnitState(c,ConvertUnitState(0x12),UnitDamage)
call SetUnitState(c,UNIT_STATE_MAX_LIFE,UnitHP)
call SetUnitState(c,UNIT_STATE_LIFE,GetUnitState(c,UNIT_STATE_MAX_LIFE))
call SetUnitState(c,ConvertUnitState(0x20),Armor)
set tempX=GetRectCenterX(gg_rct_wave2_attack1)
set tempY=GetRectCenterY(gg_rct_wave2_attack1)
call IssuePointOrder(c,"patrol",tempX,tempY)
call TimerStart(t,2.5,false,function WaveUnitCreate)
endif
set t=null
set c=null
endfunction
function Trig_Round_Start_Actions takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2=CreateTimer()
local integer Round=LoadInteger(udg_Hash,999,$3862CC76)
local timerdialog td=LoadTimerDialogHandle(udg_Hash,GetHandleId(t),$72981BBD)
local integer p=0
call SaveInteger(udg_Hash,999,$3862CC76,Round+1)
call TimerDialogSetTitle(td,I2S(Round+1)+" 웨이브")
loop
exitwhen p==Playint
set p=p+1
if LoadBoolean(System,PP[p],$15CACCF1)then
call StatUP(PP[p],50,"일공")
endif
if Round==15 then
if LoadInteger(udg_Hash,p,$B45CB0BF)==2 then
call SaveInteger(udg_Hash,p,$9D8A16C2,145)
endif
if LoadInteger(udg_Hash,p,$B45CB0BF)==3 then
call SaveInteger(udg_Hash,p,$9D8A16C2,210)
endif
if LoadInteger(udg_Hash,p,$B45CB0BF)==4 then
call SaveInteger(udg_Hash,p,$9D8A16C2,304)
endif
if LoadInteger(udg_Hash,p,$B45CB0BF)==5 then
call SaveInteger(udg_Hash,p,$9D8A16C2,440)
endif
if LoadInteger(udg_Hash,p,$B45CB0BF)==6 then
call SaveInteger(udg_Hash,p,$9D8A16C2,638)
endif
call EXSetAbilityString('A00Y',1,ABILITY_DATA_UBERTIP,"|cffffa500수련의 방에서 나오는 몬스터들이 드랍하는 골드를 45% 상승시킵니다. (탑 제외)\n15라운드가 지나서 45%로 증가했습니다.\n\n골드 드랍 : 145 / 2175\n\n|cffffd700업그레이드 필요 골드 : 20000")
call EXSetAbilityString('A00Y',2,ABILITY_DATA_UBERTIP,"|cffffa500수련의 방에서 나오는 몬스터들이 드랍하는 골드를 45% 상승시킵니다. (탑 제외)\n15라운드가 지나서 45%로 증가했습니다.\n\n골드 드랍 : 210 / 3150\n\n|cffffd700업그레이드 필요 골드 : 50000")
call EXSetAbilityString('A00Y',3,ABILITY_DATA_UBERTIP,"|cffffa500수련의 방에서 나오는 몬스터들이 드랍하는 골드를 45% 상승시킵니다. (탑 제외)\n15라운드가 지나서 45%로 증가했습니다.\n\n골드 드랍 : 304 / 4560\n\n|cffffd700업그레이드 필요 골드 : 90000")
call EXSetAbilityString('A00Y',4,ABILITY_DATA_UBERTIP,"|cffffa500수련의 방에서 나오는 몬스터들이 드랍하는 골드를 45% 상승시킵니다. (탑 제외)\n15라운드가 지나서 45%로 증가했습니다.\n\n골드 드랍 : 440 / 6600\n\n|cffffd700업그레이드 필요 골드 : 160000")
call EXSetAbilityString('A00Y',5,ABILITY_DATA_UBERTIP,"|cffffa500수련의 방에서 나오는 몬스터들이 드랍하는 골드를 45% 상승시킵니다. (탑 제외)\n15라운드가 지나서 45%로 증가했습니다.\n\n골드 드랍 : 638 / 9570\n\n|cffffd700업그레이드 필요 골드 : 300000")
call EXSetAbilityString('A00Y',6,ABILITY_DATA_UBERTIP,"|cffffa500골드 드랍 : 638 / 9570\n\n|cffFF0000더이상 강화할수 없다.")
endif
endloop
if Round !=10 and Round !=20 and Round !=30 then
call TimerStart(t2,2.5,false,function WaveUnitCreate)
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,0)
call SaveInteger(udg_Hash,GetHandleId(t2),$721404A7,Round)
endif
if Round==5 or Round==15 or Round==25 then
call TimerStart(RoundTimer,140,false,null)
else
call TimerStart(RoundTimer,110,false,null)
endif
if Round==10 or Round==20 or Round==30 then
call PauseTimer(RoundTimer)
set p=GetRandomInt(1,3)
loop
exitwhen not LoadBoolean(udg_Hash,$4D0C867E,p)
set p=GetRandomInt(1,3)
endloop
if p==1 then
call TaurenSET()
elseif p==2 then
call BBSET()
elseif p==3 then
call CrSET()
endif
endif
set t=null
set t2=null
set td=null
endfunction
function InitTrig_Round_Start takes nothing returns nothing
set gg_trg_Round_Start=CreateTrigger()
call TriggerAddAction(gg_trg_Round_Start,function Trig_Round_Start_Actions)
endfunction
function Trig_wave_unit_setting_Actions takes nothing returns nothing
local real tempX
local real tempY
local unit u=GetEnteringUnit()
if GetOwningPlayer(u)==Player(12)then
set tempX=GetRectCenterX(gg_rct_wave2_attack2)
set tempY=GetRectCenterY(gg_rct_wave2_attack2)
call IssuePointOrder(u,"patrol",tempX,tempY)
endif
set u=null
endfunction
function InitTrig_wave_unit_setting1 takes nothing returns nothing
set gg_trg_wave_unit_setting1=CreateTrigger()
call TriggerAddAction(gg_trg_wave_unit_setting1,function Trig_wave_unit_setting_Actions)
endfunction
function Trig_wave_unit_setting2_Actions takes nothing returns nothing
local real tempX
local real tempY
local unit u=GetEnteringUnit()
if GetOwningPlayer(u)==Player(12)then
set tempX=GetRectCenterX(gg_rct_wave2_attack3)
set tempY=GetRectCenterY(gg_rct_wave2_attack3)
call IssuePointOrder(u,"patrol",tempX,tempY)
endif
set u=null
endfunction
function InitTrig_wave_unit_setting2 takes nothing returns nothing
set gg_trg_wave_unit_setting2=CreateTrigger()
call TriggerAddAction(gg_trg_wave_unit_setting2,function Trig_wave_unit_setting2_Actions)
endfunction
function Trig_wave_unit_setting3_Actions takes nothing returns nothing
local real tempX
local real tempY
local unit u=GetEnteringUnit()
if GetOwningPlayer(u)==Player(12)then
set tempX=GetRectCenterX(gg_rct_AttackZone)
set tempY=GetRectCenterY(gg_rct_AttackZone)
call IssuePointOrder(u,"patrol",tempX,tempY)
endif
set u=null
endfunction
function InitTrig_wave_unit_setting3 takes nothing returns nothing
set gg_trg_wave_unit_setting3=CreateTrigger()
call TriggerAddAction(gg_trg_wave_unit_setting3,function Trig_wave_unit_setting3_Actions)
endfunction
function Trig_wave_unit_setting4_Actions takes nothing returns nothing
local real tempX
local real tempY
local unit u=GetEnteringUnit()
if GetOwningPlayer(u)==Player(12)then
endif
set u=null
endfunction
function InitTrig_wave_unit_setting4 takes nothing returns nothing
set gg_trg_wave_unit_setting4=CreateTrigger()
call TriggerAddAction(gg_trg_wave_unit_setting4,function Trig_wave_unit_setting4_Actions)
endfunction
function Trig_INFO_OFF_Actions takes nothing returns nothing
local integer p=GetPlayerId(GetTriggerPlayer())
if LoadBoolean(System,$711534E2,p)then
call SaveBoolean(System,$711534E2,p,false)
if GetLocalPlayer()==GetTriggerPlayer()then
call DzFrameShow(DzFrameFindByName("Info_Button",0),false)
endif
else
call SaveBoolean(System,$711534E2,p,true)
if GetLocalPlayer()==GetTriggerPlayer()then
call DzFrameShow(DzFrameFindByName("Info_Button",0),true)
endif
endif
endfunction
function InitTrig_INFO_OFF takes nothing returns nothing
set gg_trg_INFO_OFF=CreateTrigger()
call TriggerAddAction(gg_trg_INFO_OFF,function Trig_INFO_OFF_Actions)
endfunction
function ichigoDebug takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hashtable,GetHandleId(t),0)
call SaveBoolean(udg_Hashtable,p,$F94C6437,false)
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function Trig_Seeya_Actions takes nothing returns nothing
local timer t
local integer pid=GetPlayerId(GetTriggerPlayer())
local integer p=pid+1
local unit dummy
local integer tempI
local integer tempI2
local integer tempI3
if SubStringBJ(GetEventPlayerChatString(),1,1)=="-" and S2I(SubStringBJ(GetEventPlayerChatString(),2,4))>=50 and S2I(SubStringBJ(GetEventPlayerChatString(),2,4))<=400 then
set udg_int[GetConvertedPlayerId(GetTriggerPlayer())]=(S2I(SubStringBJ(GetEventPlayerChatString(),2,4))*20)
if(GetLocalPlayer()==GetTriggerPlayer())then
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,udg_int[GetConvertedPlayerId(GetTriggerPlayer())],1.00)
call SetCameraField(CAMERA_FIELD_FARZ,udg_int[GetConvertedPlayerId(GetTriggerPlayer())]*2,1.00)
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,5)=="-kill" or SubStringBJ(GetEventPlayerChatString(),1,5)=="-KILL" then
call KillUnit(Charcter[GetPlayerId(GetTriggerPlayer())+1])
endif
if SubStringBJ(GetEventPlayerChatString(),1,4)=="-fly" or SubStringBJ(GetEventPlayerChatString(),1,4)=="-FLY" then
call SetUnitFlyHeight(Charcter[GetPlayerId(GetTriggerPlayer())+1],0,0)
endif
if SubStringBJ(GetEventPlayerChatString(),1,6)=="-artre" or SubStringBJ(GetEventPlayerChatString(),1,6)=="-ARTRE" then
if LoadInteger(udg_Hash,999,$3862CC76)<=30 and not LoadBoolean(udg_Hash,p,$31DA12A9)then
call RemoveUnit(ArtPickProgress[p])
set dummy=CreateUnit(Player(p-1),'sys1',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),bj_UNIT_FACING)
set ArtPickProgress[p]=dummy
if ArtChoiceTicket[p]>=1 then
call RemoveUnit(ArtChoiceTicketU[p])
set dummy=CreateUnit(Player(p-1),'sys4',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),0)
set ArtChoiceTicketU[p]=dummy
endif
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,6)=="-point" or SubStringBJ(GetEventPlayerChatString(),1,6)=="-POINT" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],GetUnitName(Charcter[p]),"0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
set tempI3=S2I(StashLoad(PLAYER_DATA[pid],"MapLevel","0"))
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460캐릭터의 점수 : |cff6a5acd"+I2S(tempI)+"\n|cfff4a460당신의 맵 포인트 : |cff6a5acd"+I2S(tempI2)+"\n|cfff4a460당신의 맵 레벨 점수 : |cff6a5acd"+I2S(tempI3)+"")
endif
if SubStringBJ(GetEventPlayerChatString(),1,7)=="-무간" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"무간","0"))
if tempI==1 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460무간에 갇힌자 조건 : |cff6a5acd\n|cfff4a46013호정 5번대 대장을 습득후 유일한 이해자까지 아티팩트 진화후 시간이 0초가 되면 사망시 진화")
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,10)=="-흥신소" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"흥신소","0"))
if tempI==1 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460흥신소68 조건 : |cff6a5acd\n|cfff4a4604개의 흥신소 멤버를 모두 습득.")
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,10)=="-보이드" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"보이드","0"))
if tempI==1 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460언제나 함께야 조건 : |cff6a5acd\n|cfff4a460죄악의 왕관(레어/유일) 보이드 4개 추출후 에고이스트의 보컬(레어/유일)을 지닌 아군에게 보이드 추출 사용")
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,13)=="-의식반전" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"의식반전","0"))
if tempI==1 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460의식 반전 조건 : |cff6a5acd\n|cfff4a460살인귀의 밤과 나나츠요루 습득시 유니크 배열에 그날의 기억 추가. 밤 0시에 D스킬 사용시 의식반전 획득.")
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,7)=="-완호" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"완호","0"))
if tempI==1 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460완전 호로화의 신화 각성 조건 : |cff6a5acd\n|cfff4a460사신 대행 - 진 참월의 스택을 최대치까지 달성후 퀸시의 핏줄 습득 그후 뽑기권 3개를 가진 상태로 뽑기 진행.")
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,13)=="-아르카나" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"아르카나","0"))
if tempI==1 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460빛의 아르카나의 신화 각성 조건 : |cff6a5acd\n|cfff4a460XXI.The World(유니크/유일) 획득후 배열에 추가된 검은 빛의 아르카나 획득. 그후 7개의 '타로' 키워드를 가진 아티팩트 습득후 검은 빛의 아르카나 오른쪽 클릭해서 각성.")
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,7)=="-색채" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"색채","0"))
if tempI==1 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460색채의 인도자 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 잠들어있는 왕녀 (유니크,유일) 습득후 시간경과에 따라 깨어난 마왕 앨리스로 깨울것\n2. ???\n3. ???")
endif
if tempI==2 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460색채의 인도자 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 잠들어있는 왕녀 (유니크,유일) 습득후 시간경과에 따라 깨어난 마왕 앨리스로 깨울것\n2. 아비도스 소속(분노의 고양이귀 소녀 / 혼날 시간이에요 / 전투지원품 배달 / 아이언 호루스)의 4개 아티팩트를 습득해서 특수 아티팩트로 변환.\n3. ???")
endif
if tempI==3 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460색채의 인도자 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 잠들어있는 왕녀 (유니크,유일) 습득후 시간경과에 따라 깨어난 마왕 앨리스로 깨울것\n2. 아비도스 소속(분노의 고양이귀 소녀 / 혼날 시간이에요 / 전투지원품 배달 / 아이언 호루스)의 4개 아티팩트를 습득해서 특수 아티팩트로 변환.\n3. 화력 지원용 드론을 습득한채로 모두의 선생님을 총 3회 획득후 아티팩트 배열에 추가된 결단(유니크) 습득.")
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,7)=="-용사" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"용사","0"))
if tempI==1 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460빛의 용사 아리스 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 잠들어있는 왕녀 (유니크,유일) 습득후 깨어나기 전에 배열에 추가된 게임개발부(유니크) 획득\n2. ???\n3. ???")
endif
if tempI==2 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460빛의 용사 아리스 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 잠들어있는 왕녀 (유니크,유일) 습득후 깨어나기 전에 배열에 추가된 게임개발부(유니크) 획득\n2. 배열상에 추가된 행복한 추억(레어) 아티팩트 5개 획득\n3. ???")
endif
if tempI==3 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460빛의 용사 아리스 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 잠들어있는 왕녀 (유니크,유일) 습득후 깨어나기 전에 배열에 추가된 게임개발부(유니크) 획득\n2. 배열상에 추가된 행복한 추억(레어) 아티팩트 5개 획득\n3. 모든 추억을 획득후 게임개발부를 오른쪽 클릭해서 빛의 용사 아리스 깨우기")
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,7)=="-기도" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"기도","0"))
if tempI==1 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460새벽의 기도 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 6종류의 저주를 획득 (저주받은 꽃 / 오염된것 2종 / 이단자의 가면 / 옅게 오염된 칼날 / 님필리아의 반지)\n2. ???\n3. ???")
endif
if tempI==2 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460새벽의 기도 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 6종류의 저주를 획득 (저주받은 꽃 / 오염된것 2종 / 이단자의 가면 / 옅게 오염된 칼날 / 님필리아의 반지)\n2. 저주받은 꽃의 오염도 100% 달성후 해당 6종류의 저주를 엔더릴리즈(유니크)를 통해 한번에 해주\n3. ???")
endif
if tempI==3 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460새벽의 기도 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 6종류의 저주를 획득 (저주받은 꽃 / 오염된것 2종 / 이단자의 가면 / 옅게 오염된 칼날 / 님필리아의 반지)\n2. 저주받은 꽃의 오염도 100% 달성후 해당 6종류의 저주를 엔더릴리즈(유니크)를 통해 한번에 해주\n3. 죽음의 비(유니크) 스탯 반환치가 1000이 넘은 상태로 액티브 사용후 엔더 릴리즈를 오른쪽 클릭해 각성")
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,13)=="-헤븐즈필" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"헤븐즈필","0"))
if tempI==1 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460헤븐즈 필 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 투영 개시와 허황된 꿈 습득시 해당 플레이어에게 그녀만을 위한 정의의 사도(언커먼) 배열 추가\n2. ???\n3. ???")
endif
if tempI==2 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460헤븐즈 필 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 투영 개시와 허황된 꿈 습득시 해당 플레이어에게 그녀만을 위한 정의의 사도(언커먼) 배열 추가\n2. 그녀만을 위한 정의의 사도를 유니크까지 업그레이드후 아조트검,성해포,파계되야할 모든 부적 습득\n3. ???")
endif
if tempI==3 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460헤븐즈 필 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 투영 개시와 허황된 꿈 습득시 해당 플레이어에게 그녀만을 위한 정의의 사도(언커먼) 배열 추가\n2. 그녀만을 위한 정의의 사도를 유니크까지 업그레이드후 아조트검,성해포,파계되야할 모든 부적 습득\n3. 최대스택까지 쌓은후 체력이 10% 이하인상태에서 스킬 사용시 각성")
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,13)=="-오티누스" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"오티누스","0"))
if tempI==1 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460구원받은 자의 신화 각성 조건 : |cff6a5acd\n|cfff4a460잠들어있는 신과 학원도시의 최약 획득후 잠들어있는 신을 최대치로 깨울것. (단. 이 경우 깨어날 확률은 3배로 증가함.)")
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,10)=="-키스샷" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"키스샷","0"))
if tempI==1 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460키스샷 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 흡혈귀의 잔재 아티팩트 습득\n2. ???\n3. ???")
endif
if tempI==2 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460키스샷 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 흡혈귀의 잔재 아티팩트 습득\n2. 아티팩트 획득으로만 자신에게 맞는 흡혈률 20% 달성후 배열에 추가된 괴이의 왕(유니크) 습득\n3. ???")
endif
if tempI==3 then
call DisplayTimedTextToPlayer(Player(pid),0,0,10,"|cfff4a460키스샷 신화 각성 조건 : |cff6a5acd\n|cfff4a4601. 흡혈귀의 잔재 아티팩트 습득\n2. 아티팩트 획득으로만 자신에게 맞는 흡혈률 20% 달성후 배열에 추가된 괴이의 왕(유니크) 습득\n3. 특정량을 흡혈시 문구 밤의 세계에 어서와라를 보게된후 배열에 추가된 키스샷 아티팩트 습득.")
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,7)=="-캬루" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"캬루콘","0"))
if tempI>=1 and GetUnitAbilityLevel(chango[p],'A03W')==1 then
call UnitRemoveAbility(chango[p],'A03W')
call UnitAddAbility(chango[p],'A03M')
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,10)=="-타마모" then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"타마콘","0"))
if tempI>=1 and GetUnitAbilityLevel(chango[p],'A03M')==1 then
call UnitRemoveAbility(chango[p],'A03M')
call UnitAddAbility(chango[p],'A03W')
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,13)=="-이모티콘" then
if myImoteSys[pid]then
set myImoteSys[pid]=false
else
set myImoteSys[pid]=true
endif
if frImoteSys[pid]then
set frImoteSys[pid]=false
else
set frImoteSys[pid]=true
endif
endif
if SubStringBJ(GetEventPlayerChatString(),1,10)=="-이치고" and Ichigointeger[4]==p and not LoadBoolean(udg_Hashtable,p,$F94C6437)then
call SaveBoolean(udg_Hashtable,p,$4E03D594,true)
call SaveBoolean(udg_Hashtable,p,$F94C6437,true)
set t=CreateTimer()
call TimerStart(t,30,false,function ichigoDebug)
call SaveInteger(udg_Hashtable,GetHandleId(t),0,p)
endif
set dummy=null
set t=null
endfunction
function InitTrig_Seeya takes nothing returns nothing
set gg_trg_Seeya=CreateTrigger()
call TriggerAddAction(gg_trg_Seeya,function Trig_Seeya_Actions)
endfunction
function mothing takes nothing returns nothing
call SetUnitAnimationByIndex(GetEnumUnit(),S2I(SubStringBJ(GetEventPlayerChatString(),2,3)))
endfunction
function Trig_test_mothin_Actions takes nothing returns nothing
call ForGroupBJ(GetUnitsInRectAll(GetPlayableMapRect()),function mothing)
endfunction
function InitTrig_test_mothin takes nothing returns nothing
set gg_trg_test_mothin=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_test_mothin,Player(0),"-",false)
call TriggerAddAction(gg_trg_test_mothin,function Trig_test_mothin_Actions)
call DisableTrigger(gg_trg_test_mothin)
endfunction
function Trig_test4_Actions takes nothing returns nothing
local integer p=GetPlayerId(GetTriggerPlayer())+1
call UnitResetCooldown(Charcter[p])
call SetUnitManaPercentBJ(Charcter[p],100)
endfunction
function InitTrig_test4 takes nothing returns nothing
set gg_trg_test4=CreateTrigger()
call TriggerRegisterPlayerEventEndCinematic(gg_trg_test4,Player(0))
call TriggerRegisterPlayerEventEndCinematic(gg_trg_test4,Player(1))
call TriggerAddAction(gg_trg_test4,function Trig_test4_Actions)
call DisableTrigger(gg_trg_test4)
endfunction
function Trig_test_Actions takes nothing returns nothing
local integer p=GetPlayerId(GetTriggerPlayer())+1
local real tempR
local string l__str
if GetPlayerName(GetTriggerPlayer())=="|cffE1F6FA배|cffB9E2FA신의 왕 |cff87CEFA캐르릉 " or GetPlayerName(GetTriggerPlayer())=="Zerozaki_Maiori" or GetPlayerName(GetTriggerPlayer())=="WorldEdit" then
if SubStringBJ(GetEventPlayerChatString(),7,8)=="as" or SubStringBJ(GetEventPlayerChatString(),7,8)=="AS" then
call SaveInteger(Hash_Stat,p,$C18D16A0,S2I(SubStringBJ(GetEventPlayerChatString(),10,12)))
call TimerStart(udg_PstatTimer[p],0.01,false,null)
endif
if SubStringBJ(GetEventPlayerChatString(),7,8)=="ar" or SubStringBJ(GetEventPlayerChatString(),7,8)=="AR" then
set Range[p]=S2R(SubStringBJ(GetEventPlayerChatString(),10,13))
call TimerStart(udg_infoRe[p],0.02,false,null)
endif
if SubStringBJ(GetEventPlayerChatString(),7,9)=="ass" or SubStringBJ(GetEventPlayerChatString(),7,9)=="ASS" then
call StatUP(p,S2R(SubStringBJ(GetEventPlayerChatString(),11,13)),"공격간격")
endif
if SubStringBJ(GetEventPlayerChatString(),7,8)=="ad" or SubStringBJ(GetEventPlayerChatString(),7,8)=="AD" then
call StatUP(p,S2R(SubStringBJ(GetEventPlayerChatString(),10,13)),"일공")
endif
if SubStringBJ(GetEventPlayerChatString(),7,8)=="hp" or SubStringBJ(GetEventPlayerChatString(),7,8)=="HP" then
call SetUnitState((Charcter[p]),UNIT_STATE_MAX_LIFE,((S2R(SubStringBJ(GetEventPlayerChatString(),10,15)))*1.0))
endif
if SubStringBJ(GetEventPlayerChatString(),7,11)=="money" or SubStringBJ(GetEventPlayerChatString(),7,11)=="MONEY" then
call AdjustPlayerStateBJ(S2I(SubStringBJ(GetEventPlayerChatString(),13,19)),Player(p-1),PLAYER_STATE_RESOURCE_GOLD)
endif
if SubStringBJ(GetEventPlayerChatString(),7,11)=="buff" or SubStringBJ(GetEventPlayerChatString(),7,11)=="BUFF" then
call BuffCall(Charcter[p],'BS00',10,false,false)
endif
if SubStringBJ(GetEventPlayerChatString(),7,8)=="CT" or SubStringBJ(GetEventPlayerChatString(),7,8)=="ct" then
call SaveInteger(Hash_Stat,p,$B7E7C8AD,S2I(SubStringBJ(GetEventPlayerChatString(),10,13)))
call TimerStart(udg_infoRe[p],0.00,false,null)
endif
if SubStringBJ(GetEventPlayerChatString(),7,9)=="CTT" or SubStringBJ(GetEventPlayerChatString(),7,9)=="ctt" then
call EnableTrigger(gg_trg_test4)
endif
if SubStringBJ(GetEventPlayerChatString(),7,8)=="af" or SubStringBJ(GetEventPlayerChatString(),7,8)=="AF" then
call Artfect_get(S2I(SubStringBJ(GetEventPlayerChatString(),10,19)),Player(p-1))
endif
if SubStringBJ(GetEventPlayerChatString(),7,10)=="wave" or SubStringBJ(GetEventPlayerChatString(),7,10)=="WAVE" then
call PauseTimer(RoundTimer)
endif
if SubStringBJ(GetEventPlayerChatString(),7,11)=="waves" or SubStringBJ(GetEventPlayerChatString(),7,11)=="WAVES" then
call ResumeTimer(RoundTimer)
endif
if SubStringBJ(GetEventPlayerChatString(),7,8)=="CD" or SubStringBJ(GetEventPlayerChatString(),7,8)=="cd" then
set UncarmonDrop[p]=S2R(SubStringBJ(GetEventPlayerChatString(),10,13))
endif
if SubStringBJ(GetEventPlayerChatString(),7,8)=="RD" or SubStringBJ(GetEventPlayerChatString(),7,8)=="rd" then
set RareDrop[p]=S2R(SubStringBJ(GetEventPlayerChatString(),10,13))
endif
if SubStringBJ(GetEventPlayerChatString(),7,8)=="UD" or SubStringBJ(GetEventPlayerChatString(),7,8)=="ud" then
set UniqueDrop[p]=S2R(SubStringBJ(GetEventPlayerChatString(),10,13))
endif
if SubStringBJ(GetEventPlayerChatString(),7,9)=="get" or SubStringBJ(GetEventPlayerChatString(),7,9)=="GET" then
call Artfect_get('US13',Player(p-1))
call Artfect_get('US14',Player(p-1))
endif
if SubStringBJ(GetEventPlayerChatString(),7,9)=="MAX" or SubStringBJ(GetEventPlayerChatString(),7,9)=="max" then
call SetHeroLevelBJ(Charcter[p],(GetUnitLevel(Charcter[p])+300),true)
endif
if SubStringBJ(GetEventPlayerChatString(),7,10)=="move" or SubStringBJ(GetEventPlayerChatString(),7,10)=="MOVE" then
set tempR=S2R(SubStringBJ(GetEventPlayerChatString(),12,15))
call SetUnitX(Charcter[p],GetUnitX(Charcter[p])+(((tempR)*1.0)*Cos(((GetUnitFacing(Charcter[p]))*1.0)*bj_DEGTORAD)))
call SetUnitY(Charcter[p],GetUnitY(Charcter[p])+(((tempR)*1.0)*Sin(((GetUnitFacing(Charcter[p]))*1.0)*bj_DEGTORAD)))
endif
if SubStringBJ(GetEventPlayerChatString(),7,8)=="TK" or SubStringBJ(GetEventPlayerChatString(),7,8)=="tk" then
set ArtRerollMaxChance[p]=S2I(SubStringBJ(GetEventPlayerChatString(),10,13))
endif
if SubStringBJ(GetEventPlayerChatString(),7,11)=="round" or SubStringBJ(GetEventPlayerChatString(),7,8)=="ROUND" then
call SaveInteger(udg_Hash,999,$3862CC76,S2I(SubStringBJ(GetEventPlayerChatString(),13,14)))
endif
if SubStringBJ(GetEventPlayerChatString(),7,9)=="mct" or SubStringBJ(GetEventPlayerChatString(),7,9)=="MCT" then
call SaveReal(Hash_Stat,p,$540C61C7,S2I(SubStringBJ(GetEventPlayerChatString(),10,13)))
call TimerStart(udg_infoRe[p],0.00,false,null)
endif
if SubStringBJ(GetEventPlayerChatString(),7,8)=="lb" or SubStringBJ(GetEventPlayerChatString(),7,8)=="LB" then
call SaveReal(System,$11910FBA,p,S2R(SubStringBJ(GetEventPlayerChatString(),10,13)))
endif
if SubStringBJ(GetEventPlayerChatString(),7,10)=="kill" or SubStringBJ(GetEventPlayerChatString(),7,10)=="KILL" then
call KillUnit(Boss)
endif
if SubStringBJ(GetEventPlayerChatString(),7,12)=="killme" or SubStringBJ(GetEventPlayerChatString(),7,12)=="KILLME" then
call KillUnit(Charcter[p])
endif
if SubStringBJ(GetEventPlayerChatString(),7,9)=="mkr" or SubStringBJ(GetEventPlayerChatString(),7,9)=="MKR" then
call SaveInteger(udg_Hash,GetHandleId(Charcter[p]),$D3B20A2B,S2I(SubStringBJ(GetEventPlayerChatString(),11,14)))
endif
if SubStringBJ(GetEventPlayerChatString(),7,8)=="EX" or SubStringBJ(GetEventPlayerChatString(),7,8)=="ex" then
call itemgiven(p,Charcter[p],'I01P')
endif
if SubStringBJ(GetEventPlayerChatString(),7,9)=="mot" or SubStringBJ(GetEventPlayerChatString(),7,9)=="MOT" then
call EnableTrigger(gg_trg_test_mothin)
endif
if SubStringBJ(GetEventPlayerChatString(),7,9)=="bam" or SubStringBJ(GetEventPlayerChatString(),7,9)=="BAM" then
call SetTimeOfDay(18.00)
endif
if SubStringBJ(GetEventPlayerChatString(),7,13)=="morning" or SubStringBJ(GetEventPlayerChatString(),7,13)=="MORNING" then
call SetTimeOfDay(6.00)
endif
if SubStringBJ(GetEventPlayerChatString(),7,8)=="bb" or SubStringBJ(GetEventPlayerChatString(),7,8)=="BB" then
call BBSET()
endif
if SubStringBJ(GetEventPlayerChatString(),7,8)=="cr" or SubStringBJ(GetEventPlayerChatString(),7,8)=="CR" then
call CrSET()
endif
if SubStringBJ(GetEventPlayerChatString(),7,10)=="skip" or SubStringBJ(GetEventPlayerChatString(),7,10)=="SKIP" then
call TimerStart(RoundTimer,1,false,null)
endif
if SubStringBJ(GetEventPlayerChatString(),7,8)=="RE" or SubStringBJ(GetEventPlayerChatString(),7,8)=="re" then
call SetPlayerAbilityAvailable(Player(p-1),'A02I',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02V',true)
call SetPlayerAbilityAvailable(Player(p-1),'A032',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02J',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02K',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02L',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02M',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02N',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02O',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02P',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02Q',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02R',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02S',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02T',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02U',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02W',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02X',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02Y',true)
call SetPlayerAbilityAvailable(Player(p-1),'A02Z',true)
call SetPlayerAbilityAvailable(Player(p-1),'A030',true)
call SetPlayerAbilityAvailable(Player(p-1),'A031',true)
call SetPlayerAbilityAvailable(Player(p-1),'A03C',true)
call SetPlayerAbilityAvailable(Player(p-1),'A03E',true)
call SetPlayerAbilityAvailable(Player(p-1),'A04H',true)
call SetPlayerAbilityAvailable(Player(p-1),'A04G',true)
call SetPlayerAbilityAvailable(Player(p-1),'A033',true)
call SetPlayerAbilityAvailable(Player(p-1),'A034',true)
call SetPlayerAbilityAvailable(Player(p-1),'A035',true)
call SetPlayerAbilityAvailable(Player(p-1),'A036',true)
call SetPlayerAbilityAvailable(Player(p-1),'A037',true)
call SetPlayerAbilityAvailable(Player(p-1),'A038',true)
call SetPlayerAbilityAvailable(Player(p-1),'A039',true)
call SetPlayerAbilityAvailable(Player(p-1),'A03A',true)
call SetPlayerAbilityAvailable(Player(p-1),'A03B',true)
if CharcterStat[p]then
set CharcterStat[p]=false
else
set CharcterStat[p]=true
endif
endif
endif
endfunction
function InitTrig_test takes nothing returns nothing
set gg_trg_test=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_test,Player(0),"-test ",false)
call TriggerRegisterPlayerChatEvent(gg_trg_test,Player(1),"-test ",false)
call TriggerRegisterPlayerChatEvent(gg_trg_test,Player(2),"-test ",false)
call TriggerRegisterPlayerChatEvent(gg_trg_test,Player(3),"-test ",false)
call TriggerRegisterPlayerChatEvent(gg_trg_test,Player(4),"-test ",false)
call TriggerAddAction(gg_trg_test,function Trig_test_Actions)
endfunction
function ChangoReset2 takes unit u,string l__str,player pl returns nothing
local integer p=GetPlayerId(pl)+1
call UnitRemoveAbility(u,'A02E')
call DzSetUnitModel(u,l__str)
call SetUnitScale(u,1,1,1)
set u=null
set pl=null
endfunction
function Trig_Select_Actions takes nothing returns nothing
local unit u=GetSoldUnit()
local player pl=GetOwningPlayer(u)
local integer pid=GetPlayerId(pl)
local integer p=pid+1
local real x=GetUnitX(gg_unit_h000_0013)+(((500)*1.0)*Cos(((90)*1.0)*bj_DEGTORAD))
local real y=GetUnitY(gg_unit_h000_0013)+(((500)*1.0)*Sin(((90)*1.0)*bj_DEGTORAD))
local unit temp
local integer tempI
local string l__str
local integer a
call RemoveUnit(udg_PickUpunit[p])
call SaveReal(Hash_Stat,p,$92D803F1,20)
call TimerStart(udg_cost[p],0.063,true,null)
set Charcter[p]=u
if GetLocalPlayer()==Player(p-1)then
call DzFrameShow(DzFrameFindByName("Sk_Button",0),true)
call DzFrameShow(DzFrameFindByName("Sk_MiniIconNameBack",0),true)
call DzFrameShow(DzFrameFindByName("SkillLvUP",0),true)
endif
if GetUnitTypeId(u)=='HR01' then
set CharcterStat[p]=true
set Model[p]="war3mapImported\\@C_Ichigo5.mdl"
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"쿠로사키 이치고")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH001.blp")
call ichigoST(p)
endif
if GetUnitTypeId(u)=='HR03' then
set CharcterStat[p]=false
set Model[p]="war3mapImported\\@C_ysyz_mh_sym.mdl"
call MikaST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"미소노 미카")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH003.blp")
endif
if GetUnitTypeId(u)=='HR04' then
set CharcterStat[p]=true
set Model[p]="war3mapImported\\@C_Guts.mdl"
call GutsST(p)
call PauseTimer(udg_cost[p])
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"가츠")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH004.blp")
endif
if GetUnitTypeId(u)=='HR05' then
set CharcterStat[p]=false
set Model[p]="war3mapImported\\@C_Model Yae Miko.mdl"
call YaeST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"야에 미코")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH005.blp")
endif
if GetUnitTypeId(u)=='HR06' then
set CharcterStat[p]=true
set Model[p]="war3mapImported\\@C_qiye.mdl"
call ShikiST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"토오노 시키")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH006.blp")
endif
if GetUnitTypeId(u)=='HR07' then
set CharcterStat[p]=true
set Model[p]="war3mapImported\\@C_Aya.mdl"
call AyaST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"샤메이마루 아야")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH007.blp")
endif
if GetUnitTypeId(u)=='HR08' then
set CharcterStat[p]=true
set Model[p]="war3mapImported\\@C_Hero Ryougi Shiki.mdl"
call RyougiST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"료우기 시키")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH008.blp")
endif
if GetUnitTypeId(u)=='HR09' then
set CharcterStat[p]=false
set Model[p]="war3mapImported\\@C_Model_Aris.mdl"
call ArisST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"텐도 아리스")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH009.blp")
endif
if GetUnitTypeId(u)=='HR10' then
set CharcterStat[p]=true
set Model[p]="war3mapImported\\@C_yaomeng.mdl"
call YoumuST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"콘파쿠 요우무")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH010.blp")
endif
if GetUnitTypeId(u)=='HR11' then
set CharcterStat[p]=false
set Model[p]="war3mapImported\\@C_Miku_TSUMI.mdl"
call MikuST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"하츠네 미쿠")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH011.blp")
endif
if GetUnitTypeId(u)=='HR12' then
set CharcterStat[p]=false
set Model[p]="war3mapImported\\@C_Meiring01.mdl"
call MeilingST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"홍 메이링")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH012.blp")
endif
if GetUnitTypeId(u)=='HR13' then
set CharcterStat[p]=true
set Model[p]="war3mapImported\\@C_kazusa_Origin.mdl"
call KazusaST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"쿄야마 카즈사")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH013.blp")
endif
if GetUnitTypeId(u)=='HR14' then
set CharcterStat[p]=false
set Model[p]="war3mapImported\\@C_Archetype_Earth11.mdl"
call ArchST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"아키타입 어스")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH014.blp")
endif
if GetUnitTypeId(u)=='HR15' then
set CharcterStat[p]=true
set Model[p]="war3mapImported\\@C_Izayoi.mdl"
call IzayoiST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"사카마키 이자요이")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH015.blp")
endif
if GetUnitTypeId(u)=='HR16' then
set CharcterStat[p]=false
set Model[p]="war3mapImported\\@C_Esdeath.mdl"
call EsdsST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"에스데스")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH016.blp")
endif
if GetUnitTypeId(u)=='HR17' then
set CharcterStat[p]=true
set Model[p]="war3mapImported\\@C_iKki.mdl"
call ikkiST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"쿠로가네 잇키")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH017.blp")
endif
if GetUnitTypeId(u)=='HR18' then
set CharcterStat[p]=true
set Model[p]="war3mapImported\\@C_Kaneki_NoMask4.mdl"
call KanekiST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"카네키 켄")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH018.blp")
endif
if GetUnitTypeId(u)=='HR19' then
set CharcterStat[p]=false
set Model[p]="war3mapImported\\@C_hero_reimu.mdl"
call ReimuST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"하쿠레이 레이무")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH019.blp")
endif
if GetUnitTypeId(u)=='HR20' then
set CharcterStat[p]=false
set Model[p]="war3mapImported\\@C_Narmaya.mdl"
call NaruST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"나루메아")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH020.blp")
endif
if GetUnitTypeId(u)=='HR21' then
set CharcterStat[p]=true
set Model[p]="war3mapImported\\@C_Cally.mdl"
call KaliST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"칼리")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH021.blp")
endif
if GetUnitTypeId(u)=='HR22' then
set CharcterStat[p]=false
set Model[p]="war3mapImported\\@C_wakamo.mdl"
call WakamoST(p)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,PR[p]+1,"코사카 와카모")
call MultiboardSetItemIconBJ(GetLastCreatedMultiboard(),1,PR[p]+1,"ReplaceableTextures\\CommandButtons\\BTNH022.blp")
endif
if GetLocalPlayer()==Player(pid)then
call JNObjectCharacterInit(MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,GetUnitName(u))
endif
set tempI=S2I(StashLoad(PLAYER_DATA[pid],GetUnitName(u),"0"))
if tempI>=200 then
call SaveBoolean(udg_Hash,$D922CD2C+p,GetUnitTypeId(u),true)
endif
if LoadBoolean(udg_Hash,$D922CD2C+p,GetUnitTypeId(u))or LoadBoolean(udg_Hash,$D922CD2C+p,'ALEX')then
set bj_lastCreatedItem=CreateItem('I01P',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,bj_lastCreatedItem)
endif
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU1A Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU1A 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU1A 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU1A 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU1A 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU1A 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU1A 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU1A 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU1A 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU1A 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU1A 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU1B Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU1B 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU1B 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU1B 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU1B 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU1B 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU1B 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU1B 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU1B 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU1B 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU1B 9.mdl")
call UnitAddAbility(Charcter[p],'SY02')
call UnitMakeAbilityPermanent(Charcter[p],true,'SY02')
call UnitAddAbility(Charcter[p],'PD00')
call UnitMakeAbilityPermanent(Charcter[p],true,'PD00')
call UnitAddAbility(Charcter[p],CharacterColor[p])
call UnitMakeAbilityPermanent(Charcter[p],true,CharacterColor[p])
call UnitAddAbility(Charcter[p],CharacterColor[p+5])
call UnitMakeAbilityPermanent(Charcter[p],true,CharacterColor[p+5])
call UnitAddAbility(Charcter[p],'SY01')
call UnitMakeAbilityPermanent(Charcter[p],true,'SY01')
call SetUnitAbilityLevel(Charcter[p],'SY00',51)
call UnitMakeAbilityPermanent(Charcter[p],true,'SY00')
call UnitMakeAbilityPermanent(Charcter[p],true,'A005')
call TriggerRegisterUnitEvent(gg_trg_Hero_Death,Charcter[p],EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(gg_trg_Skill_Cool_and_Arti_Skill,Charcter[p],EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Lv_up,Charcter[p],EVENT_UNIT_HERO_LEVEL)
call TriggerRegisterUnitEvent(gg_trg_Main_Skill,Charcter[p],EVENT_UNIT_PICKUP_ITEM)
call TriggerRegisterUnitEvent(gg_trg_Item_Lost,Charcter[p],EVENT_UNIT_DROP_ITEM)
set temp=CreateUnit(GetOwningPlayer(u),'sysc',GetRectCenterX(gg_rct_ChangoZone),GetRectCenterY(gg_rct_ChangoZone),270)
set chango[p]=temp
call DzSetUnitModel(temp,"units\\critters\\Frog\\Frog.mdl")
call SetUnitMoveSpeed(temp,1000)
call TriggerRegisterUnitEvent(gg_trg_GachaUnit,temp,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Main_Skill,temp,EVENT_UNIT_PICKUP_ITEM)
set temp=CreateUnit(GetOwningPlayer(u),'SYS0',GetRectCenterX(gg_rct_ChangoZone),GetRectCenterY(gg_rct_ChangoZone),270)
set ArtPickUnit[p]=temp
call UnitAddAbility(ArtPickUnit[p],ArtSkillCode1[p])
call UnitAddAbility(ArtPickUnit[p],ArtSkillCode2[p])
call UnitAddAbility(ArtPickUnit[p],ArtSkillCode3[p])
call UnitAddAbility(ArtPickUnit[p],ArtSkillCode4[p])
call TriggerRegisterUnitEvent(gg_trg_GachaUnit,ArtPickUnit[p],EVENT_UNIT_SPELL_EFFECT)
call SetUnitX(u,x)
call SetUnitY(u,y)
if(GetLocalPlayer()==Player(p-1))then
call PanCameraToTimed(x,y,0.1)
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,5000,1.00)
call SetCameraField(CAMERA_FIELD_FARZ,10000,1.00)
endif
call JNSetUnitBaseDamage(u,100,1)
call JNSetUnitArmor(u,20)
call SaveInteger(udg_Hash,GetHandleId(u),$AD509D80,LoadInteger(udg_Hash,p,$39F717C6))
set l__str=StashLoad(PLAYER_DATA[pid],"창고서버등록","0")
if l__str=="0" then
set l__str=StashLoad(PLAYER_DATA[pid],"창고이치고","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02I',true)
call SetPlayerAbilityAvailable(Player(pid),'A02J',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고미카","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02I',true)
call SetPlayerAbilityAvailable(Player(pid),'A02K',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고가츠","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02I',true)
call SetPlayerAbilityAvailable(Player(pid),'A02L',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고미코","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02I',true)
call SetPlayerAbilityAvailable(Player(pid),'A02M',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고토오노","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02I',true)
call SetPlayerAbilityAvailable(Player(pid),'A02N',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고아야","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02I',true)
call SetPlayerAbilityAvailable(Player(pid),'A02O',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고료우기","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02I',true)
call SetPlayerAbilityAvailable(Player(pid),'A02P',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고아리스","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02I',true)
call SetPlayerAbilityAvailable(Player(pid),'A02Q',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고요우무","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02I',true)
call SetPlayerAbilityAvailable(Player(pid),'A02R',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고미쿠","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02I',true)
call SetPlayerAbilityAvailable(Player(pid),'A02S',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고홍메","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02I',true)
call SetPlayerAbilityAvailable(Player(pid),'A02T',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고카즈사","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02V',true)
call SetPlayerAbilityAvailable(Player(pid),'A02U',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고어스","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02V',true)
call SetPlayerAbilityAvailable(Player(pid),'A02W',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고이자","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02V',true)
call SetPlayerAbilityAvailable(Player(pid),'A02X',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고에데","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02V',true)
call SetPlayerAbilityAvailable(Player(pid),'A02Y',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고잇키","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02V',true)
call SetPlayerAbilityAvailable(Player(pid),'A02Z',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고켄","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02V',true)
call SetPlayerAbilityAvailable(Player(pid),'A030',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고레이무","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02V',true)
call SetPlayerAbilityAvailable(Player(pid),'A031',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고나루","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02V',true)
call SetPlayerAbilityAvailable(Player(pid),'A03J',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고칼리","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02V',true)
call SetPlayerAbilityAvailable(Player(pid),'A03K',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고와카모","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A04H',true)
call SetPlayerAbilityAvailable(Player(pid),'A04G',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고이즈나","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02V',true)
call SetPlayerAbilityAvailable(Player(pid),'A03C',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고카나데","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A02V',true)
call SetPlayerAbilityAvailable(Player(pid),'A03E',true)
endif
else
if l__str==I2S('A02E')then
call ChangoReset2(chango[p],LoadStr(udg_Hash,$471FBE10+p,1),pl)
endif
if l__str==I2S('A02J')then
call ChangoReset2(chango[p],"war3mapImported\\@_Ichigo5.mdl",pl)
endif
if l__str==I2S('A02K')then
call ChangoReset2(chango[p],"war3mapImported\\@C_ysyz_mh_sym.mdl",pl)
endif
if l__str==I2S('A02L')then
call ChangoReset2(chango[p],"war3mapImported\\@C_Guts.mdl",pl)
endif
if l__str==I2S('A02M')then
call ChangoReset2(chango[p],"war3mapImported\\@C_Model Yae Miko.mdl",pl)
endif
if l__str==I2S('A02N')then
call ChangoReset2(chango[p],"war3mapImported\\@C_qiye.mdl",pl)
endif
if l__str==I2S('A02O')then
call ChangoReset2(chango[p],"war3mapImported\\@C_Aya.mdl",pl)
endif
if l__str==I2S('A02P')then
call ChangoReset2(chango[p],"war3mapImported\\@C_Hero Ryougi Shiki.mdl",pl)
endif
if l__str==I2S('A02Q')then
call ChangoReset2(chango[p],"war3mapImported\\@C_Model_Aris.mdl",pl)
endif
if l__str==I2S('A02R')then
call ChangoReset2(chango[p],"war3mapImported\\@C_yaomeng.mdl",pl)
endif
if l__str==I2S('A02S')then
call ChangoReset2(chango[p],"war3mapImported\\@C_Miku_TSUMI.mdl",pl)
endif
if l__str==I2S('A02T')then
call ChangoReset2(chango[p],"war3mapImported\\@C_Meiring01.mdl",pl)
endif
if l__str==I2S('A02U')then
call ChangoReset2(chango[p],"war3mapImported\\@C_kazusa_Origin.mdl",pl)
endif
if l__str==I2S('A02W')then
call ChangoReset2(chango[p],"war3mapImported\\@C_Archetype_Earth11.mdl",pl)
endif
if l__str==I2S('A02X')then
call ChangoReset2(chango[p],"war3mapImported\\@C_Izayoi.mdl",pl)
endif
if l__str==I2S('A02Y')then
call ChangoReset2(chango[p],"war3mapImported\\@C_Esdeath.mdl",pl)
endif
if l__str==I2S('A02Z')then
call ChangoReset2(chango[p],"war3mapImported\\@C_iKki.mdl",pl)
endif
if l__str==I2S('A030')then
call ChangoReset2(chango[p],"war3mapImported\\@C_Kaneki_NoMask4.mdl",pl)
endif
if l__str==I2S('A031')then
call ChangoReset2(chango[p],"war3mapImported\\@C_hero_reimu.mdl",pl)
endif
if l__str==I2S('A03J')then
call ChangoReset2(chango[p],"war3mapImported\\@C_Narmaya.mdl",pl)
endif
if l__str==I2S('A03K')then
call ChangoReset2(chango[p],"war3mapImported\\@C_Cally.mdl",pl)
endif
if l__str==I2S('A03C')then
call ChangoReset2(chango[p],"war3mapImported\\@C_Model Izuna2.mdl",pl)
endif
if l__str==I2S('A03E')then
call ChangoReset2(chango[p],"war3mapImported\\@C_kanade.mdl",pl)
endif
if l__str==I2S('A04H')then
call ChangoReset2(chango[p],"war3mapImported\\@C_wakamo.mdl",pl)
endif
endif
set l__str=StashLoad(PLAYER_DATA[pid],"창고폰트등록","0")
if l__str=="0" then
set l__str=StashLoad(PLAYER_DATA[pid],"폰트1","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A032',true)
call SetPlayerAbilityAvailable(Player(pid),'A033',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"폰트2","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A032',true)
call SetPlayerAbilityAvailable(Player(pid),'A034',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"폰트3","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A032',true)
call SetPlayerAbilityAvailable(Player(pid),'A035',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"폰트4","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A032',true)
call SetPlayerAbilityAvailable(Player(pid),'A036',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"폰트5","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A032',true)
call SetPlayerAbilityAvailable(Player(pid),'A037',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"폰트6","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A032',true)
call SetPlayerAbilityAvailable(Player(pid),'A038',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"폰트7","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A032',true)
call SetPlayerAbilityAvailable(Player(pid),'A039',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"폰트8","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A032',true)
call SetPlayerAbilityAvailable(Player(pid),'A03A',true)
endif
set l__str=StashLoad(PLAYER_DATA[pid],"폰트9","0")
if l__str !="0" then
call SetPlayerAbilityAvailable(Player(pid),'A03L',true)
call SetPlayerAbilityAvailable(Player(pid),'A032',true)
call SetPlayerAbilityAvailable(Player(pid),'A03B',true)
endif
else
if l__str==I2S('A033')then
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU1C Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU1C 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU1C 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU1C 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU1C 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU1C 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU1C 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU1C 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU1C 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU1C 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU1C 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU1D Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU1D 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU1D 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU1D 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU1D 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU1D 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU1D 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU1D 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU1D 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU1D 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU1D 9.mdl")
endif
if l__str==I2S('A034')then
set fontPlus[p]=50
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU1E Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU1E 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU1E 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU1E 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU1E 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU1E 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU1E 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU1E 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU1E 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU1E 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU1E 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU1F Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU1F 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU1F 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU1F 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU1F 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU1F 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU1F 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU1F 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU1F 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU1F 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU1F 9.mdl")
endif
if l__str==I2S('A035')then
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU1G Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU1G 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU1G 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU1G 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU1G 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU1G 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU1G 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU1G 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU1G 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU1G 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU1G 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU1H Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU1H 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU1H 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU1H 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU1H 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU1H 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU1H 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU1H 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU1H 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU1H 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU1H 9.mdl")
endif
if l__str==I2S('A036')then
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU1I Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU1I 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU1I 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU1I 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU1I 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU1I 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU1I 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU1I 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU1I 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU1I 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU1I 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU1J Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU1J 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU1J 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU1J 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU1J 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU1J 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU1J 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU1J 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU1J 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU1J 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU1J 9.mdl")
endif
if l__str==I2S('A037')then
set fontPlus[p]=62
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU2A Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU2A 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU2A 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU2A 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU2A 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU2A 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU2A 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU2A 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU2A 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU2A 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU2A 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU2B Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU2B 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU2B 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU2B 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU2B 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU2B 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU2B 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU2B 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU2B 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU2B 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU2B 9.mdl")
endif
if l__str==I2S('A038')then
set fontPlus[p]=65
set fontSize[p]=2
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU2C Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU2C 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU2C 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU2C 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU2C 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU2C 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU2C 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU2C 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU2C 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU2C 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU2C 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU2D Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU2D 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU2D 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU2D 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU2D 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU2D 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU2D 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU2D 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU2D 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU2D 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU2D 9.mdl")
endif
if l__str==I2S('A039')then
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU2E Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU2E 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU2E 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU2E 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU2E 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU2E 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU2E 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU2E 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU2E 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU2E 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU2E 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU2F Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU2F 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU2F 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU2F 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU2F 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU2F 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU2F 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU2F 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU2F 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU2F 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU2F 9.mdl")
endif
if l__str==I2S('A03A')then
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU2G Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU2G 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU2G 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU2G 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU2G 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU2G 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU2G 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU2G 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU2G 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU2G 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU2G 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU2H Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU2H 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU2H 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU2H 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU2H 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU2H 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU2H 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU2H 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU2H 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU2H 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU2H 9.mdl")
endif
if l__str==I2S('A03B')then
call SaveStr(udg_Hash,p,$7D9D4D5C,"war3mapImported\\[SHZT]TIETU2I Cri.mdl")
call SaveStr(udg_Hash,p,$2C69309C,"war3mapImported\\[SHZT]TIETU2I 0.mdl")
call SaveStr(udg_Hash,p,$93C85373,"war3mapImported\\[SHZT]TIETU2I 1.mdl")
call SaveStr(udg_Hash,p,$7A7EF6A5,"war3mapImported\\[SHZT]TIETU2I 2.mdl")
call SaveStr(udg_Hash,p,$FB048DC1,"war3mapImported\\[SHZT]TIETU2I 3.mdl")
call SaveStr(udg_Hash,p,$476D2208,"war3mapImported\\[SHZT]TIETU2I 4.mdl")
call SaveStr(udg_Hash,p,$E0D07590,"war3mapImported\\[SHZT]TIETU2I 5.mdl")
call SaveStr(udg_Hash,p,$6CB8443A,"war3mapImported\\[SHZT]TIETU2I 6.mdl")
call SaveStr(udg_Hash,p,$F2BEC8C9,"war3mapImported\\[SHZT]TIETU2I 7.mdl")
call SaveStr(udg_Hash,p,$13CCAFD,"war3mapImported\\[SHZT]TIETU2I 8.mdl")
call SaveStr(udg_Hash,p,$4A88E55F,"war3mapImported\\[SHZT]TIETU2I 9.mdl")
call SaveStr(udg_Hash,p,$BEDDEBCD,"war3mapImported\\[SHZT]TIETU2J Cri.mdl")
call SaveStr(udg_Hash,p,$26352B4,"war3mapImported\\[SHZT]TIETU2J 0.mdl")
call SaveStr(udg_Hash,p,$8B0682AF,"war3mapImported\\[SHZT]TIETU2J 1.mdl")
call SaveStr(udg_Hash,p,$19ABC757,"war3mapImported\\[SHZT]TIETU2J 2.mdl")
call SaveStr(udg_Hash,p,$8339B35E,"war3mapImported\\[SHZT]TIETU2J 3.mdl")
call SaveStr(udg_Hash,p,$68D25CFA,"war3mapImported\\[SHZT]TIETU2J 4.mdl")
call SaveStr(udg_Hash,p,$2D0B2257,"war3mapImported\\[SHZT]TIETU2J 5.mdl")
call SaveStr(udg_Hash,p,$A3FC889C,"war3mapImported\\[SHZT]TIETU2J 6.mdl")
call SaveStr(udg_Hash,p,$91B5B24,"war3mapImported\\[SHZT]TIETU2J 7.mdl")
call SaveStr(udg_Hash,p,$1235F210,"war3mapImported\\[SHZT]TIETU2J 8.mdl")
call SaveStr(udg_Hash,p,$DBB44304,"war3mapImported\\[SHZT]TIETU2J 9.mdl")
endif
endif
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"캬루콘","0"))
if tempI>=1 then
call UnitAddAbility(chango[p],'A03M')
endif
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"타마콘","0"))
if tempI>=1 then
if GetUnitAbilityLevel(chango[p],'A03M')==0 then
call UnitAddAbility(chango[p],'A03W')
endif
endif
set u=null
set temp=null
endfunction
function InitTrig_Select takes nothing returns nothing
set gg_trg_Select=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Select,EVENT_PLAYER_UNIT_SELL)
call TriggerAddAction(gg_trg_Select,function Trig_Select_Actions)
endfunction
function Trig_Attack_Mosun_Actions takes nothing returns nothing
local unit u=GetAttacker()
if IsUnitAlly(u,Player(9))then
if GetUnitTypeId(u)=='HR04' then
if GetRandomInt(1,2)==1 then
call SetUnitAnimationByIndex(GetAttacker(),17)
set GutsAttack=false
else
call SetUnitAnimationByIndex(GetAttacker(),1)
set GutsAttack=true
endif
endif
if GetUnitTypeId(u)=='HR12' and GetUnitAbilityLevel(u,'A019')==1 then
call SetUnitAnimationByIndex(u,18)
call EFsettingU(GetPlayerId(GetOwningPlayer(u))+1,"Abilities\\Spells\\Other\\Charm\\CharmTarget.mdx",0,u,"hand left")
endif
if GetTriggerUnit()==gg_unit_h000_0013 and IsUnitAlly(u,Player(9))then
call IssueImmediateOrder(u,"stop")
endif
endif
set u=null
endfunction
function InitTrig_Attack_Mosun takes nothing returns nothing
set gg_trg_Attack_Mosun=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Attack_Mosun,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(gg_trg_Attack_Mosun,function Trig_Attack_Mosun_Actions)
endfunction
function SelectNone takes player pl returns nothing
if GetLocalPlayer()==pl then
call DzFrameShow(DzFrameFindByName("Stack_Mini_Icon",0),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",20),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",21),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",22),false)
call DzFrameShow(DzFrameFindByName("AA_Button",0),false)
call DzFrameShow(DzFrameFindByName("BB_Button",0),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_DesInf0",0),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_DesInf0",1),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_DesInf0",2),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",1),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",2),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",3),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",4),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",5),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",6),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",7),false)
endif
set pl=null
endfunction
function SelectGO takes unit u,player pl returns nothing
local integer temp
local integer buf
local integer p=GetPlayerId(pl)+1
if GetLocalPlayer()==pl then
call DzFrameShow(DzFrameFindByName("Stack_Mini_Icon",0),false)
if(GetUnitTypeId(u)=='HR05' or GetUnitTypeId(u)=='HR07' or GetUnitTypeId(u)=='HR10' or GetUnitTypeId(u)=='HR20')and GetOwningPlayer(u)==pl then
call DzFrameShow(DzFrameFindByName("Stack_Mini_Icon",0),true)
endif
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",20),true)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",21),true)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",22),true)
call DzFrameShow(DzFrameFindByName("AA_Button",0),true)
call DzFrameShow(DzFrameFindByName("BB_Button",0),true)
call DzFrameShow(DzFrameFindByName("Stat_Mini_DesInf0",0),true)
call DzFrameShow(DzFrameFindByName("Stat_Mini_DesInf0",1),true)
call DzFrameShow(DzFrameFindByName("Stat_Mini_DesInf0",2),true)
call DzFrameSetText(DzFrameFindByName("Stat_Mini_DesInf0",0),I2S(GetHeroStr(u,true)))
call DzFrameSetText(DzFrameFindByName("Stat_Mini_DesInf0",1),I2S(GetHeroAgi(u,true)))
call DzFrameSetText(DzFrameFindByName("Stat_Mini_DesInf0",2),I2S(GetHeroInt(u,true)))
set temp=0
loop
exitwhen temp==7
set temp=temp+1
if LoadInteger(udg_Hash,GetHandleId(u),$3E8527F6+temp)!=0 then
set buf=LoadInteger(udg_Hash,GetHandleId(u),$3E8527F6+temp)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",temp),true)
call DzFrameSetTexture(DzFrameFindByName("Stat_Mini_Icon",temp),EXExecuteScript("(require'jass.slk').buff["+I2S(buf)+"].BuffArt"),0)
call DzFrameSetText(DzFrameFindByName("Stat_Mini_Title",temp),EXExecuteScript("(require'jass.slk').buff["+I2S(buf)+"].Bufftip"))
call DzFrameSetText(DzFrameFindByName("Stat_Mini_DesInf",temp),EXExecuteScript("(require'jass.slk').buff["+I2S(buf)+"].Buffubertip"))
else
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",temp),false)
endif
endloop
call DzFrameSetText(DzFrameFindByName("AA_DesInf",0),"|CFFFFCC00공격력 : \n"+I2S(R2I(GetUnitState(u,ConvertUnitState(0x14))))+"")
if IsUnitInGroup(u,udg_Mujuk)then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n|cffFF0000무적")
else
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n"+I2S(R2I(GetUnitState(u,ConvertUnitState(0x20))))+"")
endif
endif
set u=null
set pl=null
endfunction
function unitselect___Selected_Inter takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer tid=GetHandleId(t)
local integer pid=LoadInteger(udg_Hashtable,tid,$6857FE53)
set unitselect___SelectBol[pid]=false
set unitselect___SelectCount[pid]=0
call FlushChildHashtable(udg_Hashtable,tid)
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function unitselect___Deselected takes nothing returns nothing
set unitselect___SelectedUnit[GetPlayerId(GetTriggerPlayer())+1]=null
call SelectNone(GetTriggerPlayer())
endfunction
function unitselect___Selected takes nothing returns nothing
local player p=GetTriggerPlayer()
local integer pid=GetPlayerId(p)+1
local unit u=GetTriggerUnit()
local integer uid=GetUnitTypeId(u)
local timer t
set unitselect___SelectCount[pid]=unitselect___SelectCount[pid]+1
if unitselect___SelectCount[pid]>1 and LoadUnitHandle(udg_Hashtable,pid,$C91F8651)!=u and not IsUnitType(u,UNIT_TYPE_MECHANICAL)then
set u=null
else
if unitselect___SelectedUnit[pid]!=null and unitselect___SelectedUnit[pid]!=u and not IsUnitType(u,UNIT_TYPE_MECHANICAL)then
set u=null
endif
endif
if not unitselect___SelectBol[pid]then
set unitselect___SelectBol[pid]=true
set t=CreateTimer()
call SaveInteger(udg_Hashtable,GetHandleId(t),$6857FE53,pid)
call TimerStart(t,0,false,function unitselect___Selected_Inter)
endif
if u==Charcter1[pid]then
set u=Charcter[1]
elseif u==Charcter2[pid]then
set u=Charcter[2]
elseif u==Charcter3[pid]then
set u=Charcter[3]
elseif u==Charcter4[pid]then
set u=Charcter[4]
elseif u==Charcter5[pid]then
set u=Charcter[5]
endif
if IsUnitType(u,UNIT_TYPE_MECHANICAL)and GetUnitTypeId(u)!='h000' then
set unitselect___SelectedUnit[pid]=u
call SelectNone(p)
elseif u==null then
set unitselect___SelectedUnit[pid]=Charcter[pid]
call SelectGO(Charcter[pid],p)
else
set unitselect___SelectedUnit[pid]=u
call SelectGO(u,p)
endif
call SaveUnitHandle(udg_Hashtable,pid,$C91F8651,unitselect___SelectedUnit[pid])
set u=null
set t=null
endfunction
function unitselect___OnInit takes nothing returns nothing
local trigger trg=CreateTrigger()
set unitselect___SelectBol[1]=false
set unitselect___SelectBol[2]=false
set unitselect___SelectBol[3]=false
set unitselect___SelectBol[4]=false
set unitselect___SelectBol[5]=false
call TriggerRegisterPlayerUnitEvent(trg,Player(0),EVENT_PLAYER_UNIT_DESELECTED,null)
call TriggerRegisterPlayerUnitEvent(trg,Player(1),EVENT_PLAYER_UNIT_DESELECTED,null)
call TriggerRegisterPlayerUnitEvent(trg,Player(2),EVENT_PLAYER_UNIT_DESELECTED,null)
call TriggerRegisterPlayerUnitEvent(trg,Player(3),EVENT_PLAYER_UNIT_DESELECTED,null)
call TriggerRegisterPlayerUnitEvent(trg,Player(4),EVENT_PLAYER_UNIT_DESELECTED,null)
call TriggerAddAction(trg,function unitselect___Deselected)
set trg=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(trg,Player(0),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(trg,Player(1),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(trg,Player(2),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(trg,Player(3),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(trg,Player(4),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerAddAction(trg,function unitselect___Selected)
set trg=null
endfunction
function Trig_HP_bar_add_Actions takes nothing returns nothing
local unit u
local integer p=GetPlayerId(GetTriggerPlayer())+1
local integer unittemp
if GetEventPlayerChatString()=="-hp 1" and p !=1 then
if Charcter1[p]==null then
set unittemp=GetUnitTypeId(Charcter[1])
set u=CreateUnit(Player(p-1),unittemp,GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),0)
set Charcter1[p]=u
call DzSetUnitModel(u,".mdx")
call UnitAddAbility(u,'Avul')
call GroupAddUnit(udg_Mujuk,u)
call EXSetUnitMoveType(u,'0x10')
call SetUnitMoveSpeed(u,1)
call UnitAddAbility(u,'Aeth')
call UnitAddAbility(u,'Abun')
call UnitRemoveAbility(u,'AInv')
call SetUnitPathing(u,false)
call UnitAddType(u,UNIT_TYPE_MECHANICAL)
call SetUnitUseFood(u,false)
else
call RemoveUnit(Charcter1[p])
set Charcter1[p]=null
endif
endif
if GetEventPlayerChatString()=="-hp 2" and p !=2 then
if Charcter2[p]==null and GetTriggerPlayer()!=Player(1)then
set unittemp=GetUnitTypeId(Charcter[2])
set u=CreateUnit(Player(p-1),unittemp,GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),0)
set Charcter2[p]=u
call DzSetUnitModel(u,".mdx")
call UnitAddAbility(u,'Avul')
call GroupAddUnit(udg_Mujuk,u)
call EXSetUnitMoveType(u,'0x10')
call SetUnitMoveSpeed(u,1)
call UnitAddAbility(u,'Aeth')
call UnitAddAbility(u,'Abun')
call UnitRemoveAbility(u,'AInv')
call SetUnitPathing(u,false)
call UnitAddType(u,UNIT_TYPE_MECHANICAL)
call SetUnitUseFood(u,false)
else
call RemoveUnit(Charcter2[p])
set Charcter2[p]=null
endif
endif
if GetEventPlayerChatString()=="-hp 3" and p !=3 then
if Charcter3[p]==null and GetTriggerPlayer()!=Player(2)then
set unittemp=GetUnitTypeId(Charcter[3])
set u=CreateUnit(Player(p-1),unittemp,GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),0)
set Charcter3[p]=u
call DzSetUnitModel(u,".mdx")
call UnitAddAbility(u,'Avul')
call GroupAddUnit(udg_Mujuk,u)
call EXSetUnitMoveType(u,'0x10')
call SetUnitMoveSpeed(u,1)
call UnitAddAbility(u,'Aeth')
call UnitAddAbility(u,'Abun')
call UnitRemoveAbility(u,'AInv')
call SetUnitPathing(u,false)
call UnitAddType(u,UNIT_TYPE_MECHANICAL)
call SetUnitUseFood(u,false)
else
call RemoveUnit(Charcter3[p])
set Charcter3[p]=null
endif
endif
if GetEventPlayerChatString()=="-hp 4" and p !=4 then
if Charcter4[p]==null and GetTriggerPlayer()!=Player(3)then
set unittemp=GetUnitTypeId(Charcter[4])
set u=CreateUnit(Player(p-1),unittemp,GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),0)
set Charcter4[p]=u
call DzSetUnitModel(u,".mdx")
call UnitAddAbility(u,'Avul')
call GroupAddUnit(udg_Mujuk,u)
call EXSetUnitMoveType(u,'0x10')
call SetUnitMoveSpeed(u,1)
call UnitAddAbility(u,'Aeth')
call UnitAddAbility(u,'Abun')
call UnitRemoveAbility(u,'AInv')
call SetUnitPathing(u,false)
call UnitAddType(u,UNIT_TYPE_MECHANICAL)
call SetUnitUseFood(u,false)
else
call RemoveUnit(Charcter4[p])
set Charcter4[p]=null
endif
endif
if GetEventPlayerChatString()=="-hp 5" and p !=5 then
if Charcter5[p]==null and GetTriggerPlayer()!=Player(4)then
set unittemp=GetUnitTypeId(Charcter[5])
set u=CreateUnit(Player(p-1),unittemp,GetUnitX(Charcter[p]),GetUnitY(Charcter[p]),0)
set Charcter5[p]=u
call DzSetUnitModel(u,".mdx")
call UnitAddAbility(u,'Avul')
call GroupAddUnit(udg_Mujuk,u)
call EXSetUnitMoveType(u,'0x10')
call SetUnitMoveSpeed(u,1)
call UnitAddAbility(u,'Aeth')
call UnitRemoveAbility(u,'AInv')
call UnitAddAbility(u,'Abun')
call SetUnitPathing(u,false)
call UnitAddType(u,UNIT_TYPE_MECHANICAL)
call SetUnitUseFood(u,false)
else
call RemoveUnit(Charcter5[p])
set Charcter5[p]=null
endif
endif
set u=null
endfunction
function InitTrig_HP_bar_add takes nothing returns nothing
set gg_trg_HP_bar_add=CreateTrigger()
call TriggerAddAction(gg_trg_HP_bar_add,function Trig_HP_bar_add_Actions)
endfunction
function Trig_HP_bar_set_Actions takes nothing returns nothing
local integer a
local real Bossclean=LoadReal(udg_Hash,$F61C5FD6,0)
local real tempR
set a=0
if Boss !=null then
call SetUnitState(Boss,ConvertUnitState(2),Bossclean)
endif
loop
exitwhen a==5
set a=a+1
if LoadBoolean(System,a,$E449503C)then
if GetUnitState(Charcter[a],ConvertUnitState(0))>GetUnitState(Charcter[a],ConvertUnitState(1))/2 then
call SetUnitState(Charcter[a],ConvertUnitState(0),GetUnitState(Charcter[a],ConvertUnitState(1))/2)
endif
set tempR=(GetUnitState(Charcter[a],ConvertUnitState(1))-GetUnitState(Charcter[a],ConvertUnitState(0)))/GetUnitState(Charcter[a],ConvertUnitState(1))*3000
call StatChange(a,tempR,"주스탯",0.059)
set tempR=(GetUnitState(Charcter[a],ConvertUnitState(1))-GetUnitState(Charcter[a],ConvertUnitState(0)))/GetUnitState(Charcter[a],ConvertUnitState(1))*30
call StatChange(a,tempR,"주탯퍼",0.059)
endif
if Charcter1[a]!=null then
if CharacterDeath[1]then
call SetUnitState(Charcter1[a],ConvertUnitState(0),1)
elseif not CharacterDeath[1]then
call SetUnitState(Charcter1[a],ConvertUnitState(1),GetUnitState(Charcter[1],ConvertUnitState(1)))
call SetUnitState(Charcter1[a],ConvertUnitState(0),GetUnitState(Charcter[1],ConvertUnitState(0)))
call SetUnitX(Charcter1[a],GetUnitX(Charcter[1]))
call SetUnitY(Charcter1[a],GetUnitY(Charcter[1]))
endif
endif
if Charcter2[a]!=null then
if CharacterDeath[2]then
call SetUnitState(Charcter2[a],ConvertUnitState(0),1)
elseif not CharacterDeath[2]then
call SetUnitState(Charcter2[a],ConvertUnitState(1),GetUnitState(Charcter[2],ConvertUnitState(1)))
call SetUnitState(Charcter2[a],ConvertUnitState(0),GetUnitState(Charcter[2],ConvertUnitState(0)))
call SetUnitX(Charcter2[a],GetUnitX(Charcter[2]))
call SetUnitY(Charcter2[a],GetUnitY(Charcter[2]))
endif
endif
if Charcter3[a]!=null then
if CharacterDeath[3]then
call SetUnitState(Charcter3[a],ConvertUnitState(0),1)
elseif not CharacterDeath[3]then
call SetUnitState(Charcter3[a],ConvertUnitState(1),GetUnitState(Charcter[3],ConvertUnitState(1)))
call SetUnitState(Charcter3[a],ConvertUnitState(0),GetUnitState(Charcter[3],ConvertUnitState(0)))
call SetUnitX(Charcter3[a],GetUnitX(Charcter[3]))
call SetUnitY(Charcter3[a],GetUnitY(Charcter[3]))
endif
endif
if Charcter4[a]!=null then
if CharacterDeath[4]then
call SetUnitState(Charcter4[a],ConvertUnitState(0),1)
elseif not CharacterDeath[4]then
call SetUnitState(Charcter4[a],ConvertUnitState(1),GetUnitState(Charcter[4],ConvertUnitState(1)))
call SetUnitState(Charcter4[a],ConvertUnitState(0),GetUnitState(Charcter[4],ConvertUnitState(0)))
call SetUnitX(Charcter4[a],GetUnitX(Charcter[4]))
call SetUnitY(Charcter4[a],GetUnitY(Charcter[4]))
endif
endif
if Charcter5[a]!=null then
if CharacterDeath[5]then
call SetUnitState(Charcter5[a],ConvertUnitState(0),1)
elseif not CharacterDeath[5]then
call SetUnitState(Charcter5[a],ConvertUnitState(1),GetUnitState(Charcter[5],ConvertUnitState(1)))
call SetUnitState(Charcter5[a],ConvertUnitState(0),GetUnitState(Charcter[5],ConvertUnitState(0)))
call SetUnitX(Charcter5[a],GetUnitX(Charcter[5]))
call SetUnitY(Charcter5[a],GetUnitY(Charcter[5]))
endif
endif
endloop
endfunction
function InitTrig_timer_set takes nothing returns nothing
set gg_trg_timer_set=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_timer_set,0.06)
call TriggerAddAction(gg_trg_timer_set,function Trig_HP_bar_set_Actions)
endfunction
function Trig_cost_Actions takes nothing returns nothing
local integer a
local real cost
local integer f
local unit u
set a=1
loop
exitwhen GetExpiredTimer()==udg_cost[a]
set a=a+1
endloop
set cost=LoadReal(udg_Hashtable,a,$9B58470C)*CostM[a]
set u=LoadUnitHandle(udg_Hashtable,a,$BE7F75D2)
if LoadBoolean(System,a,$A9CA72B)and CostM[a]>=1.5 then
set cost=cost*0.5
endif
if cost>=GetUnitState(Charcter[a],ConvertUnitState(2))then
if u !=null then
call RemoveUnit(u)
call SaveUnitHandle(udg_Hashtable,a,$BE7F75D2,null)
endif
elseif cost<=GetUnitState(Charcter[a],ConvertUnitState(2))then
if u==null then
set u=CreateUnit(Player(a-1),'sysQ',GetRectCenterX(gg_rct_ChangoZone),GetRectCenterY(gg_rct_ChangoZone),270)
call SaveUnitHandle(udg_Hashtable,a,$BE7F75D2,u)
endif
endif
set cost=LoadReal(udg_Hashtable,a,$E755DDB8)*CostM[a]
set u=LoadUnitHandle(udg_Hashtable,a,$3600813B)
if LoadBoolean(System,a,$A9CA72B)and CostM[a]>=1.5 then
set cost=cost*0.5
endif
if cost>=GetUnitState(Charcter[a],ConvertUnitState(2))then
if u !=null then
call RemoveUnit(u)
call SaveUnitHandle(udg_Hashtable,a,$3600813B,null)
endif
elseif cost<=GetUnitState(Charcter[a],ConvertUnitState(2))then
if u==null then
set u=CreateUnit(Player(a-1),'sysW',GetRectCenterX(gg_rct_ChangoZone),GetRectCenterY(gg_rct_ChangoZone),270)
call SaveUnitHandle(udg_Hashtable,a,$3600813B,u)
endif
endif
set cost=LoadReal(udg_Hashtable,a,$A2229E00)*CostM[a]
set u=LoadUnitHandle(udg_Hashtable,a,$D3C39EF7)
if LoadBoolean(System,a,$A9CA72B)and CostM[a]>=1.5 then
set cost=cost*0.5
endif
if cost>=GetUnitState(Charcter[a],ConvertUnitState(2))then
if u !=null then
call RemoveUnit(u)
call SaveUnitHandle(udg_Hashtable,a,$D3C39EF7,null)
endif
elseif cost<=GetUnitState(Charcter[a],ConvertUnitState(2))then
if u==null then
set u=CreateUnit(Player(a-1),'sysE',GetRectCenterX(gg_rct_ChangoZone),GetRectCenterY(gg_rct_ChangoZone),270)
call SaveUnitHandle(udg_Hashtable,a,$D3C39EF7,u)
endif
endif
set cost=LoadReal(udg_Hashtable,a,$C3EA9E83)*CostM[a]
set u=LoadUnitHandle(udg_Hashtable,a,$781F8641)
if LoadBoolean(System,a,$A9CA72B)and CostM[a]>=1.5 then
set cost=cost*0.5
endif
if cost>=GetUnitState(Charcter[a],ConvertUnitState(2))then
if u !=null then
call RemoveUnit(u)
call SaveUnitHandle(udg_Hashtable,a,$781F8641,null)
endif
elseif cost<=GetUnitState(Charcter[a],ConvertUnitState(2))then
if u==null then
set u=CreateUnit(Player(a-1),'sysR',GetRectCenterX(gg_rct_ChangoZone),GetRectCenterY(gg_rct_ChangoZone),270)
call SaveUnitHandle(udg_Hashtable,a,$781F8641,u)
endif
endif
set cost=LoadReal(udg_Hashtable,a,$127510D2)*CostM[a]
set u=LoadUnitHandle(udg_Hashtable,a,$B4DDB8CF)
if LoadBoolean(System,a,$A9CA72B)and CostM[a]>=1.5 then
set cost=cost*0.5
endif
if cost>=GetUnitState(Charcter[a],ConvertUnitState(2))then
if u !=null then
call RemoveUnit(u)
call SaveUnitHandle(udg_Hashtable,a,$B4DDB8CF,null)
endif
elseif cost<=GetUnitState(Charcter[a],ConvertUnitState(2))then
if u==null then
set u=CreateUnit(Player(a-1),'sysT',GetRectCenterX(gg_rct_ChangoZone),GetRectCenterY(gg_rct_ChangoZone),270)
call SaveUnitHandle(udg_Hashtable,a,$B4DDB8CF,u)
endif
endif
set u=null
endfunction
function InitTrig_cost takes nothing returns nothing
set gg_trg_cost=CreateTrigger()
call TriggerAddAction(gg_trg_cost,function Trig_cost_Actions)
endfunction
function Trig_Lv_up_Actions takes nothing returns nothing
local unit u=GetLevelingUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer lv=GetUnitLevel(u)
local integer a=lv-LoadInteger(udg_Hash,p,$56202239)
local integer b=LoadInteger(udg_Hash,p,$27886B4A)+a
local integer c=0
local integer d=0
local integer e=LoadInteger(udg_Hash,p,$F33658E0)
local integer f=LoadInteger(udg_Hash,p,$94DFA24E)
local real temp2
local integer temp
local unit dummy
if e>=0 then
set d=LoadInteger(udg_Hash,p,$F299275B)+a
endif
call SetHeroStr(Charcter[p],GetHeroStr(Charcter[p],false)+STRup[p]*a,true)
call SetHeroAgi(Charcter[p],GetHeroAgi(Charcter[p],false)+AGIup[p]*a,true)
call SetHeroInt(Charcter[p],GetHeroInt(Charcter[p],false)+INTup[p]*a,true)
call SetUnitState(Charcter[p],ConvertUnitState(3),GetUnitState(Charcter[p],ConvertUnitState(3))+(LoadReal(udg_Hashtable,p,$8483D54D)*a))
call SetUnitState(Charcter[p],ConvertUnitState(2),GetUnitState(Charcter[p],ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$8483D54D)*a))
set temp2=LoadReal(Hash_Stat,p,$1144FCF9)+(LoadReal(udg_Hashtable,p,$43C91172)*a)
call SaveReal(Hash_Stat,p,$1144FCF9,temp2)
set temp2=LoadReal(Hash_Stat,p,$92D803F1)+(LoadReal(udg_Hashtable,p,$836F3EE3)*a)
call SaveReal(Hash_Stat,p,$92D803F1,temp2)
call SetUnitState(Charcter[a],ConvertUnitState(0x20),temp2)
set temp=LoadInteger(Hash_Stat,a,$ED314123)
set temp=temp+LoadInteger(Hash_Stat,a,$4309A2D3)
set ArmorP[a]=temp
set temp2=LoadReal(Hash_Stat,p,$92D803F1)*(I2R(temp)*0.01)
set temp2=LoadReal(Hash_Stat,a,$92D803F1)+temp2
call SetUnitState(u,ConvertUnitState(0x20),temp2)
set temp2=GetUnitState(Charcter[p],ConvertUnitState(0x12))
if CharcterStat[p]then
set c=R2I(temp2)+((AGIup[p]+ADup[p])*a)
else
set c=R2I(temp2)+((INTup[p]+ADup[p])*a)
endif
call SetUnitState(Charcter[p],ConvertUnitState(0x12),c)
if LoadBoolean(System,p,$6CEA8530)then
call recoveryHP(u,u,(GetUnitState(u,ConvertUnitState(1))*0.4),"Abilities\\Spells\\Items\\AIhe\\AIheTarget.mdl","origin")
call recoveryMP(u,u,(GetUnitState(u,ConvertUnitState(3))*0.4),"","origin")
endif
if LoadBoolean(System,p,$EF91E6F0)then
set c=LoadInteger(System,p,$D255ADD2)+a
if c>=50 then
set temp=0
loop
exitwhen temp>31
if LoadInteger(Hash,p-1,$DA437F80+temp)=='R050' then
if GetLocalPlayer()==Player(p-1)then
call DzSyncData("RCTGT",I2S(temp)+"/"+I2S('U016'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp=temp+1
endloop
call SaveBoolean(System,p,$F018D681,true)
call SaveBoolean(System,p,$EF91E6F0,false)
set STRup[p]=STRup[p]+5
if CharcterStat[p]then
set AGIup[p]=AGIup[p]+2
else
set INTup[p]=INTup[p]+2
endif
else
call SaveInteger(System,p,$D255ADD2,c)
endif
endif
if LoadBoolean(System,p,$15CACCF1)then
if GetHeroLevel(Charcter[p])>=200 and not LoadBoolean(System,p,$7C9D0EF0)then
call SaveBoolean(System,p,$7C9D0EF0,true)
call StatUP(p,10,"일공증")
endif
endif
if LoadBoolean(System,p,$F018D681)then
if GetUnitLevel(Charcter[p])>=100 and not LoadBoolean(System,p,$D4C20600)then
call SaveBoolean(System,p,$D4C20600,true)
call StatUP(p,0.1,"피증")
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff00bfff[시스템] - |cffffd700기프트 카드의 힘을 얻었다.")
endif
if GetUnitLevel(Charcter[p])>=150 and not LoadBoolean(System,p,$13F4CAEA)then
call SaveBoolean(System,p,$13F4CAEA,true)
call StatUP(p,5,"피감")
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff00bfff[시스템] - |cffffd700기프트 카드의 힘을 얻었다.")
endif
if GetUnitLevel(Charcter[p])>=200 and not LoadBoolean(System,p,$C4AD086D)then
call SaveBoolean(System,p,$C4AD086D,true)
call StatUP(p,15,"올탯퍼")
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff00bfff[시스템] - |cffffd700기프트 카드의 힘을 얻었다.")
endif
endif
loop
if b>=3 and f>=1 then
set b=b-3
set ArtChoiceTicket[p]=ArtChoiceTicket[p]+1
call SetPlayerState(Player(p-1),ConvertPlayerState(2),ArtChoiceTicket[p])
if ArtChoiceTicket[p]>=1 and ArtChoiceTicketU[p]==null then
set dummy=CreateUnit(Player(p-1),'sys4',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),0)
set ArtChoiceTicketU[p]=dummy
endif
set f=f-1
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff00bfff[시스템] - |cffffd700레벨업으로 아티팩트 티켓을 1장 얻었다.")
endif
exitwhen b<=2 or f<=0
endloop
if LoadBoolean(System,p,$CAD3E3B1)then
set temp=LoadInteger(System,p,$BF172B11)+a
if temp>=3 and LoadInteger(System,p,$46A3A450)==0 then
call NArtADD('N036',p)
call SaveBoolean(System,p,$CAD3E3B1,false)
elseif temp>=4 and LoadInteger(System,p,$46A3A450)==1 then
call NArtADD('N037',p)
call SaveBoolean(System,p,$CAD3E3B1,false)
elseif temp>=5 and LoadInteger(System,p,$46A3A450)==2 then
call CArtADD('C015',p)
call SaveBoolean(System,p,$CAD3E3B1,false)
elseif temp>=10 and LoadInteger(System,p,$46A3A450)==3 then
call RArtADD('R014',p)
call SaveBoolean(System,p,$CAD3E3B1,false)
elseif temp>=15 and LoadInteger(System,p,$46A3A450)==4 then
call UArtADD('U015',p)
call SaveBoolean(System,p,$CAD3E3B1,false)
else
call SaveInteger(System,p,$BF172B11,temp)
endif
endif
loop
exitwhen d<=4 or e<=0
if d>=5 then
set d=d-5
set c=LoadInteger(udg_Hash,p,$7B014FA1)
set c=c+1
call SaveInteger(udg_Hash,p,$7B014FA1,c)
set e=e-1
call SaveInteger(udg_Hash,p,$F33658E0,e)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff00bfff[시스템] - |cffffd700레벨업으로 스킬 포인트를 얻었다.")
if c==1 then
if GetLocalPlayer()==Player(p-1)then
call DzFrameSetModel(DzFrameFindByName("SkillLvUP",0),"war3mapImported\\@SY_SkillLVup3.mdx",0,0)
endif
endif
endif
endloop
if lv>=30 and not LoadBoolean(udg_Hash,p,$C1C91B0E)and not LoadBoolean(udg_Hash,p,$50D79EB3)then
call SaveBoolean(udg_Hash,p,$C1C91B0E,true)
call SaveBoolean(udg_Hash,p,$50D79EB3,true)
if GetLocalPlayer()==Player(p-1)then
call DzFrameShow(DzFrameFindByName("Sk_SkillIconBlack",4),false)
call DzFrameShow(DzFrameFindByName("Sk_SkillIconChain",4),false)
endif
endif
if lv>=45 and not LoadBoolean(udg_Hash,p,$C1C91B0E)and not LoadBoolean(udg_Hash,p,$3F6BD5D0)then
call SaveBoolean(udg_Hash,p,$C1C91B0E,true)
call SaveBoolean(udg_Hash,p,$3F6BD5D0,true)
if GetLocalPlayer()==Player(p-1)then
call DzFrameShow(DzFrameFindByName("Sk_SkillIconBlack",4),false)
call DzFrameShow(DzFrameFindByName("Sk_SkillIconChain",4),false)
endif
endif
if lv>=60 and not LoadBoolean(udg_Hash,p,$C1C91B0E)and not LoadBoolean(udg_Hash,p,$6AFF262A)then
call SaveBoolean(udg_Hash,p,$C1C91B0E,true)
call SaveBoolean(udg_Hash,p,$6AFF262A,true)
if GetLocalPlayer()==Player(p-1)then
call DzFrameShow(DzFrameFindByName("Sk_SkillIconBlack",4),false)
call DzFrameShow(DzFrameFindByName("Sk_SkillIconChain",4),false)
endif
endif
if lv>=LoadInteger(udg_Hash,p,$D161E339)and not LoadBoolean(udg_Hash,p,$8EB7E137)then
call SaveBoolean(udg_Hash,p,$8EB7E137,true)
if GetLocalPlayer()==Player(p-1)then
call DzFrameShow(DzFrameFindByName("Sk_SkillIconBlack",5),false)
call DzFrameShow(DzFrameFindByName("Sk_SkillIconChain",5),false)
endif
endif
if lv>=200 and not LoadBoolean(System,p,$32B05931)then
call SuspendHeroXP(u,true)
endif
call SaveInteger(udg_Hash,p,$56202239,lv)
call SaveInteger(udg_Hash,p,$27886B4A,b)
call SaveInteger(udg_Hash,p,$F299275B,d)
call SaveInteger(udg_Hash,p,$94DFA24E,f)
call TimerStart(udg_infoRe[p],0.02,false,null)
set u=null
set dummy=null
endfunction
function InitTrig_Lv_up takes nothing returns nothing
set gg_trg_Lv_up=CreateTrigger()
call TriggerAddAction(gg_trg_Lv_up,function Trig_Lv_up_Actions)
endfunction
function Otinus takes integer p,integer loopMAX returns nothing
local integer loopA=0
local real tempR
local integer tempI
local real tempR2
local integer tempI2
local unit u=Charcter[p]
loop
exitwhen loopA>=loopMAX
set loopA=loopA+1
loop
set tempI=GetRandomInt(1,18)
set tempR=LoadReal(System,$92F8D280+p,$E106329E+tempI)
if tempR !=0 then
exitwhen true
endif
endloop
call SaveStr(System,$92F8D280+p,$B9FE8360+tempI,"|cffffffff")
if tempI==1 then
set tempR2=LoadReal(Hash_Stat,p,$F3FDA8C9)
call SaveReal(Hash_Stat,p,$F3FDA8C9,tempR2+tempR)
elseif tempI==2 then
if CharcterStat[p]then
call SetHeroAgi(u,GetHeroAgi(u,false)+500,true)
else
call SetHeroInt(u,GetHeroInt(u,false)+500,true)
endif
set tempI2=LoadInteger(Hash_Stat,p,$9298D98F)+R2I(tempR)
call SaveInteger(Hash_Stat,p,$9298D98F,tempI2)
elseif tempI==3 then
set tempR2=LoadReal(Hash_Stat,p,$164C40C9)
call SaveReal(Hash_Stat,p,$164C40C9,tempR2+tempR)
elseif tempI==4 then
set tempR2=LoadReal(Hash_Stat,p,$45E22B52)
call SaveReal(Hash_Stat,p,$45E22B52,tempR2+tempR)
elseif tempI==5 then
set tempR2=LoadReal(Hash_Stat,p,$34D9AB92)
call SaveReal(Hash_Stat,p,$34D9AB92,tempR2+tempR)
set tempR2=LoadReal(Hash_Stat,p,$540C61C7)
call SaveReal(Hash_Stat,p,$540C61C7,tempR2+tempR)
elseif tempI==6 then
set tempR2=LoadReal(Hash_Stat,p,$337F1BA1)
call SaveReal(Hash_Stat,p,$337F1BA1,tempR2+tempR)
set tempR2=LoadReal(Hash_Stat,p,$1486341)
call SaveReal(Hash_Stat,p,$1486341,tempR2+tempR)
elseif tempI==7 then
set tempI2=LoadInteger(Hash_Stat,p,$92D803F1)+R2I(tempR)
call SaveInteger(Hash_Stat,p,$92D803F1,tempI2)
elseif tempI==8 then
set tempI2=LoadInteger(Hash_Stat,p,$C18D16A0)+R2I(tempR)
call SaveInteger(Hash_Stat,p,$C18D16A0,tempI2)
elseif tempI==9 then
set tempI2=LoadInteger(Hash_Stat,p,$924944F9)+R2I(tempR)
call SaveInteger(Hash_Stat,p,$924944F9,tempI2)
elseif tempI==10 then
set tempR2=LoadReal(udg_Hashtable,p,$46D2FE81)-tempR
call SetUnitState(u,ConvertUnitState(0x25),tempR2)
elseif tempI==11 then
set tempR2=LoadReal(Hash_Stat,p,$10BA18C8)
call SaveReal(Hash_Stat,p,$10BA18C8,tempR2+tempR)
elseif tempI==12 then
set tempI2=LoadInteger(Hash_Stat,p,$B7E7C8AD)+R2I(tempR)
call SaveInteger(Hash_Stat,p,$B7E7C8AD,tempI2)
elseif tempI==13 then
set tempI2=LoadInteger(Hash_Stat,p,$8885555B)+R2I(tempR)
call SaveInteger(Hash_Stat,p,$8885555B,tempI2)
elseif tempI==14 then
call SaveBoolean(udg_Hashtable,p,$EC03648A,true)
elseif tempI==15 then
call SkillLVUP(p,1,1)
call SkillLVUP(p,2,1)
call SkillLVUP(p,3,1)
call CharacterToolTip(p)
elseif tempI==16 then
call SkillLVUP(p,4,1)
call CharacterToolTip(p)
elseif tempI==17 then
call SkillLVUP(p,5,1)
call CharacterToolTip(p)
elseif tempI==18 then
call SaveBoolean(udg_Hashtable,p,$6148D9B2,true)
endif
call SaveReal(System,$92F8D280+p,$E106329E+tempI,0)
endloop
set u=null
endfunction
function HellTrain5count takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit c
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local player pl=Player(p-1)
local real tempR
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer g=s__party_create()
local real tempX=0
local real tempY=0
local integer temp=360
local integer time=LoadInteger(udg_Hash,GetHandleId(t),$6B54C545)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,0.05,false,function HellTrain5count)
if stage==0 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff8f3d21지옥열차가 당신을 지켜봅니다... ")
call SaveInteger(udg_Hash,GetHandleId(t),$6B54C545,GetRandomInt(5,15))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_HellTrainAlarm1.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set dummy=CreateUnit(Player(12),'sys7',GetUnitX(u),GetUnitY(u),270)
call imagedummySET(p,dummy,"war3mapImported\\@AF_Model Thomas.mdl")
call SetUnitScale(dummy,5.0,1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
set angle=GetRandomReal(0,360)
call SetUnitX(dummy,GetUnitX(u)+(((1000)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(dummy,GetUnitY(u)+(((1000)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call SetUnitScale(dummy,5.0,1,1)
endif
if stage>=1 then
if stage<=(time*20)then
call SetUnitX(dummy,GetUnitX(u)+(((1000)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(dummy,GetUnitY(u)+(((1000)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
call EXSetUnitFacing(dummy,s__Angle_PBP(GetUnitX(dummy),GetUnitY(dummy),GetUnitX(u),GetUnitY(u)))
call SetUnitFacing(dummy,s__Angle_PBP(GetUnitX(dummy),GetUnitY(dummy),GetUnitX(u),GetUnitY(u)))
if stage==(time*20)then
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,s__Angle_PBP(GetUnitX(dummy),GetUnitY(dummy),GetUnitX(u),GetUnitY(u)))
call StopSound(LastBGM,false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_HellTrainWTF.mp3"),(null),(20),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
endif
endif
if stage>(time*20)and stage<=(time*20)+10 then
call SetUnitX(dummy,GetUnitX(dummy)+(((150.0)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(dummy,GetUnitY(dummy)+(((150.0)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),500,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if c==Charcter[p]then
call EFsettingXY(p,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",0,GetUnitX(dummy),GetUnitY(dummy),2.0,0,1.0,0,0,0)
call Damage(dummy,c,(GetUnitState(c,UNIT_STATE_MAX_LIFE)*100)+99999,4,0,false,1,0)
call ND(Player(p-1),1.0,100)
call FilterBasic(Player(p-1),1.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",255.0,0.0,0.0,0.00,0.00,0.00,0.00,100.00)
endif
endloop
elseif stage>(time*20)+10 then
call SaveBoolean(System,p,$22EF887E,false)
call RemoveUnit(dummy)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set dummy=null
set pl=null
endfunction
function Trig_sec1_Actions takes nothing returns nothing
local integer a=0
local real tempR
local integer tempI
local integer tempI2
local unit u
local timer t
local integer Plumeria=0
local integer Plumeria2=0
local unit dummy
loop
exitwhen a==Playint
set a=a+1
set u=Charcter[PP[a]]
if LoadBoolean(udg_Hash,PP[a],$1AE5ABCE)then
set tempR=LoadReal(udg_Hash,PP[a],$5B414C32)
if GetRandomReal(0,100)<=tempR and UnitAlive(u)then
call Aris(PP[a])
call SaveBoolean(udg_Hash,PP[a],$1AE5ABCE,false)
endif
call SaveReal(udg_Hash,PP[a],$5B414C32,tempR+0.001)
endif
if LoadBoolean(System,PP[a],$F8748BEC)then
call SetItemCharges(GetItemOfTypeFromUnit(u,'I999'),(GetItemCharges(GetItemOfTypeFromUnit(u,'I999'))+1))
if GetItemCharges(GetItemOfTypeFromUnit(u,'I999'))>=100 and UnitAlive(u)then
call RemoveItem(GetItemOfTypeFromUnit(u,'I999'))
set bj_lastCreatedItem=CreateItem('I998',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,bj_lastCreatedItem)
call StatUP(PP[a],-0.1,"마나코스트")
call StatUP(PP[a],-0.1,"체력코스트")
call StatUP(PP[a],0.1,"스증")
call SaveBoolean(System,PP[a],$F8748BEC,false)
call SaveBoolean(System,PP[a],$48726432,true)
call SaveBoolean(System,PP[a],$EB09C778,true)
endif
endif
if LoadBoolean(System,PP[a],$48726432)and LoadBoolean(System,PP[a],$EB09C778)then
call SetItemCharges(GetItemOfTypeFromUnit(u,'I998'),(GetItemCharges(GetItemOfTypeFromUnit(u,'I998'))+1))
call StatUP(PP[a],2,"체력")
call StatUP(PP[a],2,"주스탯")
if GetItemCharges(GetItemOfTypeFromUnit(u,'I998'))==200 then
call SaveBoolean(System,PP[a],$EB09C778,false)
endif
endif
if LoadBoolean(System,PP[a],$1684E464)then
call SetPlayerState(Player(PP[a]-1),ConvertPlayerState(1),GetPlayerState(Player(PP[a]-1),ConvertPlayerState(1))+50)
set tempI=LoadInteger(System,PP[a],$6B9459DC)
if tempI<=2 then
if GetRandomReal(0,100)<=0.2 then
set tempI=tempI+1
set ArtChoiceTicket[PP[a]]=ArtChoiceTicket[PP[a]]+1
call SetPlayerState(Player(PP[a]-1),ConvertPlayerState(2),ArtChoiceTicket[PP[a]])
if ArtChoiceTicket[PP[a]]>=1 and ArtChoiceTicketU[PP[a]]==null then
set dummy=CreateUnit(Player(PP[a]-1),'sys4',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),0)
set ArtChoiceTicketU[PP[a]]=dummy
endif
call SaveInteger(System,PP[a],$6B9459DC,tempI)
call DisplayTimedTextToPlayer(Player(PP[a]-1),0,0,10,"|cffffd700[시스템] - 럭키~ 길을 가다가 아티팩트 티켓을 얻었다! |cffff0000"+I2S(tempI)+"장째.")
endif
endif
endif
if LoadBoolean(udg_Hash,PP[a],$CB6EFCC2)then
call SetPlayerState(Player(PP[a]-1),ConvertPlayerState(1),GetPlayerState(Player(PP[a]-1),ConvertPlayerState(1))+50)
endif
if LoadBoolean(udg_Hash,PP[a],$D0FE2EC2)then
set tempR=0.1*(Luck[PP[a]]*4)
if GetRandomReal(0,100)<=tempR and UnitAlive(u)then
set invenClick[PP[a]]=false
set tempI=0
loop
exitwhen tempI>31
if LoadInteger(Hash,PP[a]-1,$DA437F80+tempI)=='C058' then
if GetLocalPlayer()==Player(PP[a]-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(tempI)+"/"+I2S('R062'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set tempI=tempI+1
endloop
call SaveBoolean(udg_Hash,PP[a],$D0FE2EC2,false)
call SaveBoolean(udg_Hash,PP[a],$F61FF70C,true)
elseif inaba[PP[a]]==true and GetRandomReal(0,100)>70 and UnitAlive(u)then
if GetRandomReal(0,100)<=tempR and UnitAlive(u)then
set invenClick[PP[a]]=false
set tempI=0
loop
exitwhen tempI>31
if LoadInteger(Hash,PP[a]-1,$DA437F80+tempI)=='C058' then
if GetLocalPlayer()==Player(PP[a]-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(tempI)+"/"+I2S('R062'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set tempI=tempI+1
endloop
call SaveBoolean(udg_Hash,PP[a],$D0FE2EC2,false)
call SaveBoolean(udg_Hash,PP[a],$F61FF70C,true)
endif
endif
endif
if LoadBoolean(System,PP[a],$F7E2B67)then
call SetPlayerState(Player(PP[a]-1),ConvertPlayerState(1),GetPlayerState(Player(PP[a]-1),ConvertPlayerState(1))+50)
if LoadInteger(Hash,PP[a]-1,$DA437F80+29)=='R041' and LoadInteger(Hash,PP[a]-1,$DA437F80+28)==0 and LoadInteger(Hash,PP[a]-1,$DA437F80+22)==0 and LoadInteger(Hash,PP[a]-1,$DA437F80+23)==0 then
else
set tempI=LoadInteger(System,PP[a],$E6F4AB19)+1
call SaveInteger(System,PP[a],$E6F4AB19,tempI)
call DisplayTimedTextToPlayer(Player(PP[a]-1),0,0,1,"|cffff0000히토리 봇치 : 주..주변에 사람이 너무많아요!!!! 봇치가 죽기까지.. : "+I2S(100-tempI))
call Damage(u,u,GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.01,3,0,false,1,0)
if tempI==100 then
call SaveBoolean(System,PP[a],$F7E2B67,false)
set invenClick[PP[a]]=false
set tempI=0
loop
exitwhen tempI>31
if LoadInteger(Hash,PP[a]-1,$DA437F80+tempI)=='R041' then
if GetLocalPlayer()==Player(PP[a]-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(tempI)+"/"+I2S('U024'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set tempI=tempI+1
endloop
if ArtpickSlot[PP[a]]==3 then
call ArtReset(Art3slotLV[PP[a]],Art3[PP[a]],Player(PP[a]-1))
set Art3slotLV[PP[a]]=0
set Art3[PP[a]]=0
endif
if ArtpickSlot[PP[a]]==4 then
call ArtReset(Art4slotLV[PP[a]],Art4[PP[a]],Player(PP[a]-1))
set Art4slotLV[PP[a]]=0
set Art4[PP[a]]=0
endif
set ArtpickSlot[PP[a]]=ArtpickSlot[PP[a]]-1
endif
endif
endif
if LoadBoolean(System,$92F8D280+PP[a],$92F8D280)then
set tempI=LoadInteger(System,$92F8D280+PP[a],$5FD7D9D1)
set tempI2=5
if LoadBoolean(udg_Hash,PP[a],$C67FEEB4)then
set tempI2=15
endif
if GetRandomint(0,100)<=tempI2 then
call SaveBoolean(System,$92F8D280+PP[a],$92F8D280,false)
if tempI==0 then
if LoadBoolean(udg_Hash,PP[a],$C67FEEB4)then
call SaveBoolean(udg_Hashtable,PP[a],$516BEBC3,true)
call SaveReal(System,$92F8D280+PP[a],$E106329E+18,0)
call OtinusGET2(PP[a])
else
call OtinusGET(PP[a])
endif
call Otinus(PP[a],10)
elseif tempI>=1 and tempI<20 then
call Otinus(PP[a],5)
elseif tempI>=20 and tempI<50 then
call Otinus(PP[a],3)
elseif tempI>=50 then
call Otinus(PP[a],1)
endif
if LoadBoolean(udg_Hashtable,PP[a],$516BEBC3)then
set OtinusText[PP[a]]=LoadStr(System,$92F8D280+PP[a],$B9FE8360+1)+"ㆍ 방어구 관통율이 10% 증가한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+2)+"ㆍ 주스탯이 500 + 10% 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+3)+"ㆍ 모든 피해 증폭율이 15% 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+4)+"ㆍ 스킬 피해 증폭율이 15% 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+5)+"ㆍ 모든 치명타 확률이 12% 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+6)+"ㆍ 모든 치명타 피해량이 20% 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+7)+"ㆍ 방어력이 50 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+8)+"ㆍ 공격속도가 80% 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+9)+"ㆍ 이동속도가 10% 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+10)+"ㆍ 공격 간격이 0.05 감소한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+11)+"ㆍ 모든 스킬 범위가 10% 증가한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+12)+"ㆍ 스킬 가속이 30 증가한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+13)+"ㆍ 모든 피해 감소율이 10% 증가한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+14)+"ㆍ 부활 대기 시간이 30% 감소한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+15)+"ㆍ Q / W / E 스킬의 레벨이 1 증가한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+16)+"ㆍ R 스킬의 레벨이 1 증가한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+17)+"ㆍ T 스킬의 레벨이 1 증가한다.\n|cffffffff∴ 신창 궁그닐 : 피해를 입힐때 모든 피해 증폭율이 0% ~ 50%가 추가된다."
else
set OtinusText[PP[a]]=LoadStr(System,$92F8D280+PP[a],$B9FE8360+1)+"ㆍ 방어구 관통율이 10% 증가한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+2)+"ㆍ 주스탯이 500 + 10% 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+3)+"ㆍ 모든 피해 증폭율이 15% 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+4)+"ㆍ 스킬 피해 증폭율이 15% 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+5)+"ㆍ 모든 치명타 확률이 12% 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+6)+"ㆍ 모든 치명타 피해량이 20% 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+7)+"ㆍ 방어력이 50 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+8)+"ㆍ 공격속도가 80% 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+9)+"ㆍ 이동속도가 10% 상승한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+10)+"ㆍ 공격 간격이 0.05 감소한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+11)+"ㆍ 모든 스킬 범위가 10% 증가한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+12)+"ㆍ 스킬 가속이 30 증가한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+13)+"ㆍ 모든 피해 감소율이 10% 증가한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+14)+"ㆍ 부활 대기 시간이 30% 감소한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+15)+"ㆍ Q / W / E 스킬의 레벨이 1 증가한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+16)+"ㆍ R 스킬의 레벨이 1 증가한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+17)+"ㆍ T 스킬의 레벨이 1 증가한다.\n"+LoadStr(System,$92F8D280+PP[a],$B9FE8360+18)+"ㆍ 모든 피해증폭율이 -50% ~ +50%의 변동율을 가진다."
endif
call FlushChildHashtable(System,$92F8D280+PP[a])
set invenClick[PP[a]]=false
set tempI=0
loop
exitwhen tempI>31
if LoadInteger(Hash,PP[a]-1,$DA437F80+tempI)=='U022' then
if GetLocalPlayer()==Player(PP[a]-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
if LoadBoolean(udg_Hashtable,PP[a],$516BEBC3)then
call DzSyncData("RCTGT",I2S(tempI)+"/"+I2S('US14'))
else
call DzSyncData("RCTGT",I2S(tempI)+"/"+I2S('U023'))
endif
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set tempI=tempI+1
endloop
call TimerStart(udg_infoRe[PP[a]],0.01,false,null)
else
call SaveInteger(System,$92F8D280+PP[a],$5FD7D9D1,tempI+1)
endif
endif
if LoadBoolean(udg_Hash,PP[a],$85959104)then
set tempR=GetUnitState(u,ConvertUnitState(3))*0.02
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))-tempR))
set tempR=LoadReal(udg_Hash,PP[a],$648997DA)+tempR
if tempR<=99999 then
call SaveReal(udg_Hash,PP[a],$648997DA,tempR)
elseif tempR>=99999 and tempR<999998 then
set invenClick[PP[a]]=false
set tempI=0
loop
exitwhen tempI>31
if LoadInteger(Hash,PP[a]-1,$DA437F80+tempI)=='R022' then
if GetLocalPlayer()==Player(PP[a]-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(tempI)+"/"+I2S('U020'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set tempI=tempI+1
endloop
call TimerStart(U020timer,12,true,null)
call SaveInteger(udg_Hash,GetHandleId(U020timer),1,PP[a])
call TriggerRegisterTimerExpireEvent(gg_trg_U020trg,U020timer)
call SaveBoolean(udg_Hash,PP[a],$57EF94CC,true)
call SkillLVUP(PP[a],5,1)
call SaveReal(udg_Hash,PP[a],$648997DA,999999)
endif
endif
if LoadBoolean(udg_Hash,PP[a],$57EF94CC)then
if GetUnitState(u,ConvertUnitState(2))<=GetUnitState(u,ConvertUnitState(3))*0.9 then
set tempR=GetUnitState(u,ConvertUnitState(2))/GetUnitState(u,ConvertUnitState(3))*100
set tempR=0.0075+((100-tempR)*0.00025)
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(GetUnitState(u,ConvertUnitState(3))*tempR)))
endif
endif
if LoadBoolean(System,PP[a],$261D0D16)then
set tempI=LoadInteger(System,PP[a],$1FC31BCA)+1
if tempI>=30 and LoadInteger(System,PP[a],$9D58DA4A)<=9 then
set tempI2=LoadInteger(Hash_Stat,PP[a],$753B4F2F)-2
call SaveInteger(Hash_Stat,PP[a],$753B4F2F,tempI2)
call StatUP(PP[a],-100,"올스탯")
call SaveInteger(System,PP[a],$1FC31BCA,0)
set tempI2=LoadInteger(System,PP[a],$9D58DA4A)+1
call SaveInteger(System,PP[a],$9D58DA4A,tempI2)
call DisplayTimedTextToPlayer(Player(PP[a]-1),0,0,10,"|cffff0000[저주 : 저주받은 꽃] - 오염도 : "+I2S(tempI2*10)+"%")
else
call SaveInteger(System,PP[a],$1FC31BCA,tempI)
endif
endif
if LoadBoolean(System,PP[a],$8E3ACD3)then
set tempI=LoadInteger(System,PP[a],$C322B9F8)+1
if tempI>=100 then
call SaveBoolean(System,PP[a],$8E3ACD3,false)
set invenClick[PP[a]]=false
set tempI=0
loop
exitwhen tempI>31
if LoadInteger(Hash,PP[a]-1,$DA437F80+tempI)=='C024' then
if GetLocalPlayer()==Player(PP[a]-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(tempI)+"/"+I2S('R016'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set tempI=tempI+1
endloop
set bj_lastCreatedUnit=CreateUnit(Player(PP[a]-1),'rdm1',GetUnitX(u),GetUnitY(u),270)
call SaveUnitHandle(udg_Hash,PP[a],$7B23B649,bj_lastCreatedUnit)
call SaveInteger(udg_Hash,PP[a],$3782B6B0,1)
call TriggerRegisterTimerExpireEvent(gg_trg_dron_move,udg_n007timer[PP[a]])
call TimerStart(udg_n007timer[PP[a]],1.00,true,null)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_R016get.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
call SaveInteger(System,PP[a],$C322B9F8,tempI)
endif
if LoadBoolean(System,PP[a],$29AE479D)then
set tempI=GetRandomInt(1,3)
if tempI==1 then
if GetHeroStr(u,true)>=3 then
call StatUP(PP[a],-2,"체력")
set tempI=LoadInteger(System,PP[a],$F5D93FAA)+2
call SaveInteger(System,PP[a],$F5D93FAA,tempI)
endif
elseif tempI==2 then
if GetHeroAgi(u,true)>=3 then
call StatUP(PP[a],-2,"공격력")
set tempI=LoadInteger(System,PP[a],$6B309F2)+2
call SaveInteger(System,PP[a],$6B309F2,tempI)
endif
elseif tempI==3 then
if GetHeroInt(u,true)>=3 then
call StatUP(PP[a],-2,"지능")
set tempI=LoadInteger(System,PP[a],$3630D7A0)+2
call SaveInteger(System,PP[a],$3630D7A0,tempI)
endif
endif
call TimerStart(udg_PstatTimer[PP[a]],0.01,false,null)
endif
if LoadInteger(Hash_Stat,PP[a],$5521A0C)!=0 then
set Plumeria=LoadInteger(Hash_Stat,PP[a],$5521A0C)
set Plumeria2=LoadInteger(Hash_Stat,PP[a],$82EB3EEE)
endif
if LoadBoolean(udg_Hash,0,$EB76B4D9)then
call SetUnitState(u,UNIT_STATE_LIFE,(GetUnitState(u,UNIT_STATE_LIFE)+(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.0025)))
endif
if LoadBoolean(System,PP[a],$98AB695D)then
set tempR=LoadReal(System,PP[a],$B5B7CEDB)
set tempI=LoadInteger(System,PP[a],$C25FCCE9)
if GetLocalPlayer()==Player(PP[a]-1)then
set tempI2=DzFrameFindByName("Inve_Legend_EF",12)
if tempI==1 then
call DzFrameSetModel(tempI2,"war3mapImported\\@AE_Train1.mdx",0,0)
elseif tempI==2 then
call DzFrameSetModel(tempI2,"war3mapImported\\@AE_Train2.mdx",0,0)
elseif tempI==3 then
call DzFrameSetModel(tempI2,"war3mapImported\\@AE_Train3.mdx",0,0)
elseif tempI==4 then
call DzFrameSetModel(tempI2,"war3mapImported\\@AE_Train4.mdx",0,0)
else
call DzFrameSetModel(tempI2,"war3mapImported\\@AE_Train0.mdx",0,0)
endif
endif
if tempI==5 then
call SaveReal(System,PP[a],$B5B7CEDB,20.0)
call SaveInteger(System,PP[a],$C25FCCE9,0)
call SaveBoolean(System,PP[a],$22EF887E,true)
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,PP[a])
call TimerStart(t,0.0,false,function HellTrain5count)
set t=null
elseif tempR<=1.0 then
call SaveReal(System,PP[a],$B5B7CEDB,20.0)
call SaveInteger(System,PP[a],$C25FCCE9,tempI+1)
endif
if LoadBoolean(System,PP[a],$22EF887E)==false then
set tempR=LoadReal(System,PP[a],$B5B7CEDB)
call SaveReal(System,PP[a],$B5B7CEDB,tempR-1.0)
endif
endif
if LoadBoolean(System,PP[a],$CFE83757)and GetUnitState(u,UNIT_STATE_LIFE)>=GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.6 then
call StatChange(PP[a],8,"방퍼",0.99)
call StatChange(PP[a],30,"방어력",0.99)
endif
if LoadBoolean(System,PP[a],$7C8B4FCC)then
set tempI=MoveSpd[PP[a]]/3
call StatChange(PP[a],I2R(tempI)*0.01,"피증",0.99)
endif
if LoadBoolean(System,PP[a],$77EBFF9B)then
call SetUnitState(u,UNIT_STATE_LIFE,(GetUnitState(u,UNIT_STATE_LIFE)+(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.01)))
endif
if LoadBoolean(udg_Hash,PP[a],$42A9ECD3+2)then
call recoveryHP(u,u,(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.0015),"","")
endif
if LoadBoolean(System,PP[a],$1904ABF9)then
set tempI=LoadInteger(udg_Hash,PP[a],$2BFE616B)+1
if tempI==2 then
call ShildSet(u,u,1,GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.02+1000)
call SaveInteger(udg_Hash,PP[a],$2BFE616B,0)
else
call SaveInteger(udg_Hash,PP[a],$2BFE616B,tempI)
endif
endif
if LoadBoolean(System,PP[a],$1BD50DC0)and Battle[PP[a]]then
if GetUnitState(u,UNIT_STATE_LIFE)>GetUnitState(u,UNIT_STATE_LIFE)*0.003 then
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)-(GetUnitState(u,UNIT_STATE_LIFE)*0.003))
else
call SetUnitState(u,UNIT_STATE_LIFE,1)
endif
endif
if LoadBoolean(System,PP[a],$42D99B02)then
if GetUnitState(u,UNIT_STATE_LIFE)>GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.005 then
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)-(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.005))
else
call SetUnitState(u,UNIT_STATE_LIFE,1)
endif
endif
if LoadBoolean(System,PP[a],$553EE692)then
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+((GetUnitState(u,UNIT_STATE_MAX_LIFE)-GetUnitState(u,UNIT_STATE_LIFE))*0.01))
endif
if LoadBoolean(Hash_Stat,PP[a],$5F87D772)then
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.005))
endif
if LoadBoolean(System,PP[a],$313F0640)and not bam then
if LoadBoolean(Hash_Stat,PP[a],$B9F5AC29)then
call recoveryHP(u,u,(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.006),"","")
else
call recoveryHP(u,u,(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.003),"","")
endif
endif
if GetUnitTypeId(u)=='HR15' then
if LoadBoolean(udg_Hash,PP[a],$B83FA88D)then
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+((GetUnitState(u,UNIT_STATE_MAX_LIFE)-GetUnitState(u,UNIT_STATE_LIFE))*0.015))
else
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+((GetUnitState(u,UNIT_STATE_MAX_LIFE)-GetUnitState(u,UNIT_STATE_LIFE))*0.01))
endif
endif
call SetUnitState(u,UNIT_STATE_LIFE,(GetUnitState(u,UNIT_STATE_LIFE)+(I2R(GetHeroStr(u,true))*0.02)*LoadReal(Hash_Stat,PP[a],$7FAFA384)))
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+LoadReal(Hash_Stat,PP[a],$1144FCF9)*LoadReal(Hash_Stat,PP[a],$A62A5B82)))
endloop
if Plumeria !=0 then
set a=0
loop
exitwhen a==Playint
set a=a+1
call StatChange(PP[a],Plumeria*0.01,"피증",0.99)
call StatChange(PP[a],Plumeria2,"방어력",0.99)
endloop
endif
if UnitAlive(Boss)and Boss !=null then
call SetUnitState(Boss,UNIT_STATE_LIFE,(GetUnitState(Boss,UNIT_STATE_LIFE)+(I2R(GetHeroStr(Boss,true))*0.03)*LoadReal(Hash_Stat,12,$7FAFA384)))
endif
set sec=sec+1
if sec>=60 then
set sec=0
set min=min+1
endif
call MultiboardSetItemValueBJ2(bj_lastCreatedMultiboard,4,Playint+2,"경과한 시간 : "+I2S(min)+"분 "+I2S(sec)+"초")
set u=null
set dummy=null
set t=null
endfunction
function InitTrig_sec1 takes nothing returns nothing
set gg_trg_sec1=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_sec1,1.00)
call TriggerAddAction(gg_trg_sec1,function Trig_sec1_Actions)
endfunction
function Trig_Morning_Actions takes nothing returns nothing
local integer a=0
local integer temp
set bam=false
loop
exitwhen a==Playint
set a=a+1
if LoadBoolean(System,PP[a],$F1BF676D)then
call StatUP(PP[a],250,"주스탯")
endif
endloop
endfunction
function InitTrig_Morning takes nothing returns nothing
set gg_trg_Morning=CreateTrigger()
call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Morning,EQUAL,6.00)
call TriggerAddAction(gg_trg_Morning,function Trig_Morning_Actions)
endfunction
function Trig_Night_Actions takes nothing returns nothing
local integer a=0
local integer temp
set bam=true
loop
exitwhen a==Playint
set a=a+1
if LoadBoolean(System,PP[a],$F1BF676D)then
call StatUP(PP[a],-250,"주스탯")
endif
endloop
endfunction
function InitTrig_Night takes nothing returns nothing
set gg_trg_Night=CreateTrigger()
call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Night,EQUAL,18.00)
call TriggerAddAction(gg_trg_Night,function Trig_Night_Actions)
endfunction
function Trig_leader_timer_Actions takes nothing returns nothing
local integer a=0
local real tempR
local integer tempI
loop
exitwhen GetExpiredTimer()==udg_c004timer[a]
set a=a+1
endloop
if Battle[PP[a]]then
if C004[PP[a]]then
set tempR=LoadReal(udg_Hash,PP[a],$14A4C253)
set tempI=LoadInteger(Hash_Stat,PP[a],$D8C9D96B)-R2I(tempR)
set tempR=LoadReal(udg_Hash,PP[a],$14A4C253)+C004sec[PP[a]]
if tempR>=C004Max[PP[a]]then
set tempR=C004Max[PP[a]]
endif
set tempI=tempI+R2I(tempR)
call SaveInteger(Hash_Stat,PP[a],$D8C9D96B,tempI)
call SaveReal(udg_Hash,PP[a],$14A4C253,tempR)
call UnitAddAbility(Charcter[PP[a]],'A01R')
call EXSetAbilityDataReal(EXGetUnitAbility(Charcter[PP[a]],'A01R'),1,108,tempR*25)
call IncUnitAbilityLevel(Charcter[PP[a]],'A01R')
call DecUnitAbilityLevel(Charcter[PP[a]],'A01R')
call TimerStart(udg_PstatTimer[PP[a]],0.00,false,null)
endif
else
if LoadReal(udg_Hash,PP[a],$14A4C253)>=1 then
set tempR=LoadReal(udg_Hash,PP[a],$14A4C253)
set tempI=LoadInteger(Hash_Stat,PP[a],$D8C9D96B)-R2I(tempR)
call SaveInteger(Hash_Stat,PP[a],$D8C9D96B,tempI)
call SaveReal(udg_Hash,PP[a],$14A4C253,0)
call UnitRemoveAbility(Charcter[PP[a]],'A01R')
call TimerStart(udg_PstatTimer[PP[a]],0.00,false,null)
endif
endif
endfunction
function InitTrig_leader_timer takes nothing returns nothing
set gg_trg_leader_timer=CreateTrigger()
call TriggerAddAction(gg_trg_leader_timer,function Trig_leader_timer_Actions)
endfunction
function Trig_dron_move_Actions takes nothing returns nothing
local integer a=0
local integer b=0
local unit u
local unit u2
local real r
local real tempX
local real tempY
local integer tempI
local timer t=GetExpiredTimer()
local boolean tr=false
loop
exitwhen t==udg_n007timer[a]
set a=a+1
endloop
set u=Charcter[a]
set tempI=LoadInteger(udg_Hash,a,$9D404CE0)+1
if tempI==5 then
set tr=true
call SaveInteger(udg_Hash,a,$9D404CE0,0)
else
call SaveInteger(udg_Hash,a,$9D404CE0,tempI)
endif
set u2=LoadUnitHandle(udg_Hash,a,$BF53BD32)
if GetUnitTypeId(u2)=='ndm1' then
set r=GetRandomReal(0,360)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(u2),GetUnitY(u2))>=1500 then
call SetUnitX(u2,GetUnitX(u))
call SetUnitY(u2,GetUnitY(u))
call EFsettingU(a,"war3mapImported\\@NS_MassTeleportCaster2.mdll",0,u2,"origin")
else
set tempX=GetUnitX(u)+(((500)*1.0)*Cos(((r)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((500)*1.0)*Sin(((r)*1.0)*bj_DEGTORAD))
if not tr and UnitAlive(u)then
call IssuePointOrder(u2,"attack",tempX,tempY)
else
call IssuePointOrder(u2,"smart",tempX,tempY)
endif
endif
if LoadBoolean(System,a,$A276AA4F)and not LoadBoolean(System,a,$EBD878D3)then
call SaveBoolean(System,a,$EBD878D3,true)
call SetUnitState(u2,ConvertUnitState(0x16),GetUnitState(u2,ConvertUnitState(0x16))+150)
call SetUnitState(u2,ConvertUnitState(0x52),GetUnitState(u2,ConvertUnitState(0x16)))
endif
if LoadBoolean(System,a,$4F8578CE)and not LoadBoolean(System,a,$B5503B87)then
call SaveBoolean(System,a,$B5503B87,true)
call SetUnitState(u2,ConvertUnitState(0x16),GetUnitState(u2,ConvertUnitState(0x16))+150)
call SetUnitState(u2,ConvertUnitState(0x52),GetUnitState(u2,ConvertUnitState(0x16)))
endif
endif
set u2=LoadUnitHandle(udg_Hash,a,$B5A55CA8)
if GetUnitTypeId(u2)=='ndm1' then
set r=GetRandomReal(0,360)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(u2),GetUnitY(u2))>=1500 then
call SetUnitX(u2,GetUnitX(u))
call SetUnitY(u2,GetUnitY(u))
call EFsettingU(a,"war3mapImported\\@NS_MassTeleportCaster2.mdl",0,u2,"origin")
else
set tempX=GetUnitX(u)+(((500)*1.0)*Cos(((r)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((500)*1.0)*Sin(((r)*1.0)*bj_DEGTORAD))
if not tr and UnitAlive(u)then
call IssuePointOrder(u2,"attack",tempX,tempY)
else
call IssuePointOrder(u2,"smart",tempX,tempY)
endif
endif
if LoadBoolean(System,a,$A276AA4F)and not LoadBoolean(System,a,$3EE68FBD)then
call SaveBoolean(System,a,$3EE68FBD,true)
call SetUnitState(u2,ConvertUnitState(0x16),GetUnitState(u2,ConvertUnitState(0x16))+150)
call SetUnitState(u2,ConvertUnitState(0x52),GetUnitState(u2,ConvertUnitState(0x16)))
endif
if LoadBoolean(System,a,$4F8578CE)and not LoadBoolean(System,a,$B572E420)then
call SaveBoolean(System,a,$B572E420,true)
call SetUnitState(u2,ConvertUnitState(0x16),GetUnitState(u2,ConvertUnitState(0x16))+150)
call SetUnitState(u2,ConvertUnitState(0x52),GetUnitState(u2,ConvertUnitState(0x16)))
endif
endif
set u2=LoadUnitHandle(udg_Hash,a,$995E4AAA)
if GetUnitTypeId(u2)=='cdm1' then
set r=GetRandomReal(0,360)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(u2),GetUnitY(u2))>=1500 then
call SetUnitX(u2,GetUnitX(u))
call SetUnitY(u2,GetUnitY(u))
call EFsettingU(a,"war3mapImported\\@NS_MassTeleportCaster2.mdl",0,u2,"origin")
else
set tempX=GetUnitX(u)+(((400)*1.0)*Cos(((r)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((400)*1.0)*Sin(((r)*1.0)*bj_DEGTORAD))
if not tr and UnitAlive(u)then
call IssuePointOrder(u2,"attack",tempX,tempY)
else
call IssuePointOrder(u2,"smart",tempX,tempY)
endif
endif
if LoadInteger(udg_Hash,a,$F5CC8461)==1 then
set b=LoadInteger(udg_Hash,a,$8DAD119A)+1
call SaveInteger(udg_Hash,a,$8DAD119A,b)
if b>=5 then
call SaveInteger(udg_Hash,a,$8DAD119A,0)
call EFsettingU(a,"Abilities\\Spells\\Items\\HealingSalve\\HealingSalveTarget.mdl",1,u2,"origin")
call EFsettingU(a,"Abilities\\Spells\\Human\\Heal\\HealTarget.mdl",1.8,u,"origin")
if CharcterStat[a]==true then
call recoveryHP(u,u,(I2R(GetHeroAgi(u,true))*1)+(GetUnitState(u,ConvertUnitState(1))*0.01),"","")
else
call recoveryHP(u,u,(I2R(GetHeroAgi(u,true))*1)+(GetUnitState(u,ConvertUnitState(1))*0.01),"","")
endif
endif
endif
if LoadBoolean(System,a,$A276AA4F)and not LoadBoolean(System,a,$3F1CC46C)then
call SaveBoolean(System,a,$3F1CC46C,true)
call SetUnitState(u2,ConvertUnitState(0x16),GetUnitState(u2,ConvertUnitState(0x16))+150)
call SetUnitState(u2,ConvertUnitState(0x52),GetUnitState(u2,ConvertUnitState(0x16)))
endif
if LoadBoolean(System,a,$4F8578CE)and not LoadBoolean(System,a,$70277F66)then
call SaveBoolean(System,a,$70277F66,true)
call SetUnitState(u2,ConvertUnitState(0x16),GetUnitState(u2,ConvertUnitState(0x16))+150)
call SetUnitState(u2,ConvertUnitState(0x52),GetUnitState(u2,ConvertUnitState(0x16)))
endif
endif
set u2=LoadUnitHandle(udg_Hash,a,$7B23B649)
if GetUnitTypeId(u2)=='rdm1' or GetUnitTypeId(u2)=='rdm2' then
set r=GetRandomReal(0,360)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(u2),GetUnitY(u2))>=1500 then
call SetUnitX(u2,GetUnitX(u))
call SetUnitY(u2,GetUnitY(u))
call EFsettingU(a,"war3mapImported\\@NS_MassTeleportCaster2.mdl",0,u2,"origin")
else
set tempX=GetUnitX(u)+(((400)*1.0)*Cos(((r)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((400)*1.0)*Sin(((r)*1.0)*bj_DEGTORAD))
if not tr and UnitAlive(u)then
call IssuePointOrder(u2,"attack",tempX,tempY)
else
call IssuePointOrder(u2,"smart",tempX,tempY)
endif
endif
if LoadBoolean(System,a,$A276AA4F)and not LoadBoolean(System,a,$4F30312C)then
call SaveBoolean(System,a,$4F30312C,true)
call SetUnitState(u2,ConvertUnitState(0x16),GetUnitState(u2,ConvertUnitState(0x16))+150)
call SetUnitState(u2,ConvertUnitState(0x52),GetUnitState(u2,ConvertUnitState(0x16)))
endif
if LoadBoolean(System,a,$4F8578CE)and not LoadBoolean(System,a,$F2D0F7EF)then
call SaveBoolean(System,a,$F2D0F7EF,true)
call SetUnitState(u2,ConvertUnitState(0x16),GetUnitState(u2,ConvertUnitState(0x16))+150)
call SetUnitState(u2,ConvertUnitState(0x52),GetUnitState(u2,ConvertUnitState(0x16)))
endif
endif
set u2=LoadUnitHandle(udg_Hash,a,$A3CE90DF)
if GetUnitTypeId(u2)=='idm1' then
set r=GetRandomReal(0,360)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(u2),GetUnitY(u2))>=1500 then
call SetUnitX(u2,GetUnitX(u))
call SetUnitY(u2,GetUnitY(u))
call EFsettingU(a,"war3mapImported\\@NS_MassTeleportCaster2.mdll",0,u2,"origin")
else
set tempX=GetUnitX(u)+(((400)*1.0)*Cos(((r)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((400)*1.0)*Sin(((r)*1.0)*bj_DEGTORAD))
if not tr and UnitAlive(u)then
call IssuePointOrder(u2,"attack",tempX,tempY)
else
call IssuePointOrder(u2,"smart",tempX,tempY)
endif
endif
endif
set u2=LoadUnitHandle(udg_Hash,a,$F0F3C9CD)
if GetUnitTypeId(u2)=='cdm2' then
set r=GetRandomReal(0,360)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(u2),GetUnitY(u2))>=1500 then
call SetUnitX(u2,GetUnitX(u))
call SetUnitY(u2,GetUnitY(u))
call EFsettingU(a,"war3mapImported\\@NS_MassTeleportCaster2.mdl",0,u2,"origin")
else
set tempX=GetUnitX(u)+(((400)*1.0)*Cos(((r)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((400)*1.0)*Sin(((r)*1.0)*bj_DEGTORAD))
if not tr and UnitAlive(u)then
call IssuePointOrder(u2,"attack",tempX,tempY)
else
call IssuePointOrder(u2,"smart",tempX,tempY)
endif
endif
if LoadBoolean(System,a,$A276AA4F)and not LoadBoolean(System,a,$6C12ADA7)then
call SaveBoolean(System,a,$6C12ADA7,true)
call SetUnitState(u2,ConvertUnitState(0x16),GetUnitState(u2,ConvertUnitState(0x16))+150)
call SetUnitState(u2,ConvertUnitState(0x52),GetUnitState(u2,ConvertUnitState(0x16)))
endif
if LoadBoolean(System,a,$4F8578CE)and not LoadBoolean(System,a,$DE18A0C5)then
call SaveBoolean(System,a,$DE18A0C5,true)
call SetUnitState(u2,ConvertUnitState(0x16),GetUnitState(u2,ConvertUnitState(0x16))+150)
call SetUnitState(u2,ConvertUnitState(0x52),GetUnitState(u2,ConvertUnitState(0x16)))
endif
endif
set u2=LoadUnitHandle(udg_Hash,a,$CD56E738)
if GetUnitTypeId(u2)=='rdm3' then
set r=GetRandomReal(0,360)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(u2),GetUnitY(u2))>=1500 then
call SetUnitX(u2,GetUnitX(u))
call SetUnitY(u2,GetUnitY(u))
call EFsettingU(a,"war3mapImported\\@NS_MassTeleportCaster2.mdl",0,u2,"origin")
else
set tempX=GetUnitX(u)+(((400)*1.0)*Cos(((r)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((400)*1.0)*Sin(((r)*1.0)*bj_DEGTORAD))
if not tr and UnitAlive(u)then
call IssuePointOrder(u2,"attack",tempX,tempY)
else
call IssuePointOrder(u2,"smart",tempX,tempY)
endif
endif
if LoadBoolean(System,a,$A276AA4F)and not LoadBoolean(System,a,$5933B8AA)then
call SaveBoolean(System,a,$5933B8AA,true)
call SetUnitState(u2,ConvertUnitState(0x16),GetUnitState(u2,ConvertUnitState(0x16))+150)
call SetUnitState(u2,ConvertUnitState(0x52),GetUnitState(u2,ConvertUnitState(0x16)))
endif
if LoadBoolean(System,a,$4F8578CE)and not LoadBoolean(System,a,$8B998C27)then
call SaveBoolean(System,a,$8B998C27,true)
call SetUnitState(u2,ConvertUnitState(0x16),GetUnitState(u2,ConvertUnitState(0x16))+150)
call SetUnitState(u2,ConvertUnitState(0x52),GetUnitState(u2,ConvertUnitState(0x16)))
endif
endif
set u2=LoadUnitHandle(udg_Hash,a,$C4FF9F9D)
if GetUnitTypeId(u2)=='udm1' then
set r=GetRandomReal(0,360)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(u2),GetUnitY(u2))>=1500 then
call SetUnitX(u2,GetUnitX(u))
call SetUnitY(u2,GetUnitY(u))
call EFsettingU(a,"war3mapImported\\@NS_MassTeleportCaster2.mdl",0,u2,"origin")
else
set tempX=GetUnitX(u)+(((400)*1.0)*Cos(((r)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((400)*1.0)*Sin(((r)*1.0)*bj_DEGTORAD))
call IssuePointOrder(u2,"smart",tempX,tempY)
endif
endif
set u=null
set u2=null
set t=null
endfunction
function InitTrig_dron_move takes nothing returns nothing
set gg_trg_dron_move=CreateTrigger()
call TriggerAddAction(gg_trg_dron_move,function Trig_dron_move_Actions)
endfunction
function Trig_N001_Actions takes nothing returns nothing
local integer a=0
local integer b
local unit u
loop
exitwhen GetExpiredTimer()==N001timer[a]
set a=a+1
endloop
set u=Charcter[a]
set b=GetRandomint(1,100)
call EFsettingXY(a,"war3mapImported\\@EF_[tx][jn]yingliuzhanxin.mdl",0,GetUnitX(u),GetUnitY(u),3,270,1,0,0,0)
if b<=33 then
call StatChange(a,8,"피증",0.05)
elseif b>=34 and b<=67 then
call StatChange(a,8,"올탯퍼",10)
elseif b>=68 then
call StatChange(a,8,"방어력",10)
endif
set u=null
endfunction
function InitTrig_N001 takes nothing returns nothing
set gg_trg_N001=CreateTrigger()
call TriggerAddAction(gg_trg_N001,function Trig_N001_Actions)
endfunction
function Trig_N035counter_Actions takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==N035timer[a]
set a=a+1
endloop
call SaveBoolean(System,a,$567B85B4,true)
endfunction
function InitTrig_N035counter takes nothing returns nothing
set gg_trg_N035counter=CreateTrigger()
call TriggerAddAction(gg_trg_N035counter,function Trig_N035counter_Actions)
endfunction
function Trig_N035barrior_Actions takes nothing returns nothing
local integer a=0
local unit u
loop
exitwhen GetExpiredTimer()==N035timer2[a]
set a=a+1
endloop
set u=Charcter[a]
call ShildSet(u,u,8,GetUnitState(u,ConvertUnitState(1))*0.1)
set u=null
endfunction
function InitTrig_N035barrior takes nothing returns nothing
set gg_trg_N035barrior=CreateTrigger()
call TriggerAddAction(gg_trg_N035barrior,function Trig_N035barrior_Actions)
endfunction
function Trig_N035heal_Actions takes nothing returns nothing
local integer a=0
local unit u
local integer g=s__party_create()
local unit c
local player pl
loop
exitwhen GetExpiredTimer()==N035timer3[a]
set a=a+1
endloop
set u=Charcter[a]
set pl=GetOwningPlayer(u)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),1000,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if UnitAlive(c)and IsUnitAlly(c,pl)and IsUnitType(c,ConvertUnitType(0))and(GetUnitState(c,ConvertUnitState(0))/GetUnitState(c,ConvertUnitState(1))*100.0)<=50.00 then
call recoveryHP(u,c,(GetUnitState(u,ConvertUnitState(1))*0.1),"Abilities\\Spells\\Items\\AIhe\\AIheTarget.mdl","origin")
endif
endloop
call s__party_deallocate((g))
set u=null
set c=null
set pl=null
endfunction
function InitTrig_N035heal takes nothing returns nothing
set gg_trg_N035heal=CreateTrigger()
call TriggerAddAction(gg_trg_N035heal,function Trig_N035heal_Actions)
endfunction
function Trig_N031_Actions takes nothing returns nothing
local integer a=0
local real tempR
local integer temp0
loop
exitwhen GetExpiredTimer()==N031timer[a]
set a=a+1
endloop
set tempR=LoadReal(udg_Hashtable,a,$DA557887)-1
call SaveReal(udg_Hashtable,a,$DA557887,tempR)
if tempR<=0 then
if LoadInteger(udg_Hashtable,a,$A6A7F4EC)==8 then
call PauseTimer(N031timer[a])
endif
if LoadInteger(udg_Hashtable,a,$A6A7F4EC)==7 then
set temp0=0
loop
exitwhen temp0>31
if LoadInteger(Hash,a-1,$DA437F80+temp0)=='R013' then
if GetLocalPlayer()==Player(a-1)then
call DzSyncData("RCTGT",I2S(temp0)+"/"+I2S('U014'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp0=temp0+1
endloop
call SaveReal(udg_Hashtable,a,$DA557887,480)
call SaveInteger(udg_Hashtable,a,$A6A7F4EC,8)
call SaveReal(udg_Hashtable,a,$89215390,0.15)
endif
if LoadInteger(udg_Hashtable,a,$A6A7F4EC)==6 then
set temp0=0
loop
exitwhen temp0>31
if LoadInteger(Hash,a-1,$DA437F80+temp0)=='R012' then
if GetLocalPlayer()==Player(a-1)then
call DzSyncData("RCTGT",I2S(temp0)+"/"+I2S('R013'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp0=temp0+1
endloop
call SaveReal(udg_Hashtable,a,$DA557887,360)
call SaveInteger(udg_Hashtable,a,$A6A7F4EC,7)
call SaveBoolean(udg_Hashtable,a,$27D72755,true)
call SaveReal(udg_Hashtable,a,$F0892948,0.1)
endif
if LoadInteger(udg_Hashtable,a,$A6A7F4EC)==5 then
set temp0=0
loop
exitwhen temp0>31
if LoadInteger(Hash,a-1,$DA437F80+temp0)=='R011' then
if GetLocalPlayer()==Player(a-1)then
call DzSyncData("RCTGT",I2S(temp0)+"/"+I2S('R012'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp0=temp0+1
endloop
call SaveReal(udg_Hashtable,a,$DA557887,240)
call SaveInteger(udg_Hashtable,a,$A6A7F4EC,6)
call SaveBoolean(udg_Hashtable,a,$2AB47070,true)
endif
if LoadInteger(udg_Hashtable,a,$A6A7F4EC)==4 then
call Artfect_get('R011',Player(a-1))
call SaveReal(udg_Hashtable,a,$DA557887,180)
call SaveInteger(udg_Hashtable,a,$A6A7F4EC,5)
call SaveBoolean(udg_Hashtable,a,$91F47B7D,true)
set N031timer2[a]=CreateTimer()
call TriggerRegisterTimerExpireEvent(gg_trg_N031P,N031timer2[a])
endif
if LoadInteger(udg_Hashtable,a,$A6A7F4EC)==3 then
set temp0=0
loop
exitwhen temp0>31
if LoadInteger(Hash,a-1,$DA437F80+temp0)=='C013' then
if GetLocalPlayer()==Player(a-1)then
call DzSyncData("RCTGT",I2S(temp0)+"/"+I2S('C014'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp0=temp0+1
endloop
call SaveReal(udg_Hashtable,a,$DA557887,180)
call SaveInteger(udg_Hashtable,a,$A6A7F4EC,4)
endif
if LoadInteger(udg_Hashtable,a,$A6A7F4EC)==2 then
set temp0=0
loop
exitwhen temp0>31
if LoadInteger(Hash,a-1,$DA437F80+temp0)=='N033' then
if GetLocalPlayer()==Player(a-1)then
call DzSyncData("RCTGT",I2S(temp0)+"/"+I2S('C013'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp0=temp0+1
endloop
call SaveReal(udg_Hashtable,a,$DA557887,180)
call SaveInteger(udg_Hashtable,a,$A6A7F4EC,3)
call TimerStart(N031timer3[a],2,true,null)
endif
if LoadInteger(udg_Hashtable,a,$A6A7F4EC)==1 then
set temp0=0
loop
exitwhen temp0>31
if LoadInteger(Hash,a-1,$DA437F80+temp0)=='N032' then
if GetLocalPlayer()==Player(a-1)then
call DzSyncData("RCTGT",I2S(temp0)+"/"+I2S('N033'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp0=temp0+1
endloop
call SaveReal(udg_Hashtable,a,$DA557887,180)
call SaveInteger(udg_Hashtable,a,$A6A7F4EC,2)
call TimerStart(N031timer3[a],3,true,null)
endif
if LoadInteger(udg_Hashtable,a,$A6A7F4EC)==0 then
set temp0=0
loop
exitwhen temp0>31
if LoadInteger(Hash,a-1,$DA437F80+temp0)=='N031' then
if GetLocalPlayer()==Player(a-1)then
call DzSyncData("RCTGT",I2S(temp0)+"/"+I2S('N032'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",temp0),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set temp0=temp0+1
endloop
call SaveReal(udg_Hashtable,a,$DA557887,60)
call SaveInteger(udg_Hashtable,a,$A6A7F4EC,1)
call TimerStart(N031timer3[a],4,true,null)
endif
else
call TimerStart(N031timer[a],1,true,null)
endif
endfunction
function InitTrig_N031 takes nothing returns nothing
set gg_trg_N031=CreateTrigger()
call TriggerAddAction(gg_trg_N031,function Trig_N031_Actions)
endfunction
function Trig_N031stat_Actions takes nothing returns nothing
local integer a=0
local real tempR
loop
exitwhen GetExpiredTimer()==N031timer3[a]
set a=a+1
endloop
set tempR=GetUnitState(Charcter[a],ConvertUnitState(0x12))+1
call SetUnitState(Charcter[a],ConvertUnitState(0x12),tempR)
call SetHeroInt(Charcter[a],GetHeroInt(Charcter[a],false)+1,true)
call TimerStart(udg_PstatTimer[a],0,false,null)
endfunction
function InitTrig_N031stat takes nothing returns nothing
set gg_trg_N031stat=CreateTrigger()
call TriggerAddAction(gg_trg_N031stat,function Trig_N031stat_Actions)
endfunction
function Trig_N031P_Actions takes nothing returns nothing
local integer a=0
local real tempR
loop
exitwhen GetExpiredTimer()==N031timer2[a]
set a=a+1
endloop
if LoadInteger(udg_Hashtable,a,$A6A7F4EC)<=8 then
call SaveBoolean(udg_Hashtable,a,$D70AB363,false)
call SaveBoolean(udg_Hashtable,a,$91F47B7D,true)
call TimerStart(udg_PstatTimer[a],0,false,null)
endif
endfunction
function InitTrig_N031P takes nothing returns nothing
set gg_trg_N031P=CreateTrigger()
call TriggerAddAction(gg_trg_N031P,function Trig_N031P_Actions)
endfunction
function Trig_C005_Actions takes nothing returns nothing
local integer a=0
local real tempR
loop
exitwhen GetExpiredTimer()==C005timer[a]
set a=a+1
endloop
call SaveBoolean(System,a,$70739E58,true)
endfunction
function InitTrig_C005 takes nothing returns nothing
set gg_trg_C005=CreateTrigger()
call TriggerAddAction(gg_trg_C005,function Trig_C005_Actions)
endfunction
function Trig_C032_Actions takes nothing returns nothing
local integer a=0
local real tempR
local integer tempI
local integer tempI2
loop
exitwhen GetExpiredTimer()==C0321timer[a]or GetExpiredTimer()==C0322timer[a]
set a=a+1
endloop
if GetExpiredTimer()==C0321timer[a]then
set tempI=LoadInteger(System,a,$9652F653)
set tempR=LoadReal(Hash_Stat,a,$45E22B52)-(tempI*0.03)
call SaveReal(Hash_Stat,a,$45E22B52,tempR)
call SaveInteger(System,a,$9652F653,0)
elseif GetExpiredTimer()==C0322timer[a]then
set tempI=LoadInteger(System,a,$A26703F9)
set tempI2=LoadInteger(Hash_Stat,a,$9298D98F)-(tempI*5)
call SaveInteger(Hash_Stat,a,$9298D98F,tempI2)
set tempI2=LoadInteger(Hash_Stat,a,$C18D16A0)-(tempI*15)
call SaveInteger(Hash_Stat,a,$C18D16A0,tempI2)
call SaveInteger(System,a,$A26703F9,0)
endif
call TimerStart(udg_infoRe[a],0.0314,false,null)
endfunction
function InitTrig_C032 takes nothing returns nothing
set gg_trg_C032=CreateTrigger()
call TriggerAddAction(gg_trg_C032,function Trig_C032_Actions)
endfunction
function Trig_U020_Actions takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),1)
local integer g=s__party_create()
local unit u=Charcter[p]
local unit c
local real heal
if CharcterStat[p]then
set heal=GetHeroAgi(u,true)
else
set heal=GetHeroInt(u,true)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),600*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckBossGroupN(c)then
call recoveryHP(u,c,heal,"Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl","origin")
call StatChange(GetPlayerId(GetOwningPlayer(c))+1,10,"이속",3)
endif
endloop
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function InitTrig_U020trg takes nothing returns nothing
set gg_trg_U020trg=CreateTrigger()
call TriggerAddAction(gg_trg_U020trg,function Trig_U020_Actions)
endfunction
function Trig_R029_Actions takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==R029timer[a]
set a=a+1
endloop
call SaveBoolean(System,a,$D0192BF3,true)
endfunction
function InitTrig_R029 takes nothing returns nothing
set gg_trg_R029=CreateTrigger()
call TriggerAddAction(gg_trg_R029,function Trig_R029_Actions)
endfunction
function Trig_R034_Actions takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==R034timer[a]
set a=a+1
endloop
call SaveBoolean(System,a,$953C43EA,true)
endfunction
function InitTrig_R034 takes nothing returns nothing
set gg_trg_R034=CreateTrigger()
call TriggerAddAction(gg_trg_R034,function Trig_R034_Actions)
endfunction
function Trig_U037_Actions takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(System,GetHandleId(t),$457FA8BE)
local integer p=LoadInteger(System,GetHandleId(t),$34704AE4)
local integer stage=LoadInteger(System,GetHandleId(t),$EFF06CA0)
call SaveInteger(System,GetHandleId(t),$EFF06CA0,stage+1)
if stage<=10 then
call EFsettingU(p,"Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",0.3,u,"origin")
call SetUnitState(u,ConvertUnitState(0),GetUnitState(u,ConvertUnitState(0))+(GetUnitState(u,ConvertUnitState(1))*0.03))
call TimerStart(t,1.0,false,null)
elseif stage==11 then
call TimerStart(t,20.0,false,null)
else
call SaveBoolean(System,p,$3D7856A0,true)
call FlushChildHashtable(System,GetHandleId(t))
endif
set u=null
set t=null
endfunction
function InitTrig_U037 takes nothing returns nothing
set gg_trg_U037=CreateTrigger()
call TriggerAddAction(gg_trg_U037,function Trig_U037_Actions)
endfunction
function Trig_R031_Actions takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==R031timer[a]
set a=a+1
endloop
call SaveBoolean(System,a,$1DCE1310,true)
endfunction
function InitTrig_R031 takes nothing returns nothing
set gg_trg_R031=CreateTrigger()
call TriggerAddAction(gg_trg_R031,function Trig_R031_Actions)
endfunction
function Trig_U040_Actions takes nothing returns nothing
local integer a=0
local integer b=0
loop
exitwhen GetExpiredTimer()==U040timer[a]
set a=a+1
endloop
set b=LoadInteger(System,a,$6B2285BC)
call SaveInteger(System,a,$6B2285BC,b+1)
if b<3 then
set b=GetRandomInt(1,3)
if b==1 then
call SkillLVUP(a,1,1)
call DisplayTimedTextToPlayer(Player(a-1),0,0,10,"|cffffd700[시스템] - 노계왕신의 의식으로 Q 스킬 레벨이 1 상승했다.")
elseif b==2 then
call SkillLVUP(a,2,1)
call DisplayTimedTextToPlayer(Player(a-1),0,0,10,"|cffffd700[시스템] - 노계왕신의 의식으로 W 스킬 레벨이 1 상승했다.")
else
call SkillLVUP(a,3,1)
call DisplayTimedTextToPlayer(Player(a-1),0,0,10,"|cffffd700[시스템] - 노계왕신의 의식으로 E 스킬 레벨이 1 상승했다.")
endif
call CharacterToolTip(a)
call TimerStart(U040timer[a],600.00,true,null)
endif
endfunction
function InitTrig_U040 takes nothing returns nothing
set gg_trg_U040=CreateTrigger()
call TriggerAddAction(gg_trg_U040,function Trig_U040_Actions)
endfunction
function Trig_U044_Actions takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==U044timer[a]
set a=a+1
endloop
call SaveBoolean(System,a,$40587CED,false)
endfunction
function InitTrig_U044 takes nothing returns nothing
set gg_trg_U044=CreateTrigger()
call TriggerAddAction(gg_trg_U044,function Trig_U044_Actions)
endfunction
function U045eat takes nothing returns nothing
local timer t=GetExpiredTimer()
local real time=LoadReal(udg_Hash,GetHandleId(t),0)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),1)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),2)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),3)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),4)
call SaveReal(udg_Hash,GetHandleId(t),0,time-0.08)
if time<=0 then
call DestroyEffect(ef)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
if IsUnitInRangeXY(u,tempX,tempY,250)and time>=0.1 then
call SaveReal(udg_Hash,GetHandleId(t),0,0)
if LoadBoolean(Hash_Stat,p,$B9F5AC29)then
if LoadInteger(Hash_Stat,p,$45005BFF)==0 then
call SaveInteger(Hash_Stat,p,$45005BFF,1)
call StatUP(p,1,"체퍼")
else
call SaveInteger(Hash_Stat,p,$45005BFF,0)
call StatUP(p,2,"체퍼")
endif
call EFsettingU(p,"Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl",0,u,"origin")
call recoveryHP(u,u,(GetUnitState(u,ConvertUnitState(1))*0.06),"Abilities\\Spells\\Items\\AIhe\\AIheTarget.mdl","origin")
call recoveryMP(u,u,(GetUnitState(u,ConvertUnitState(3))*0.06),"","origin")
else
call StatUP(p,1,"체퍼")
call EFsettingU(p,"Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl",0,u,"origin")
call recoveryHP(u,u,(GetUnitState(u,ConvertUnitState(1))*0.03),"Abilities\\Spells\\Items\\AIhe\\AIheTarget.mdl","origin")
call recoveryMP(u,u,(GetUnitState(u,ConvertUnitState(3))*0.03),"","origin")
endif
endif
set t=null
set u=null
set ef=null
endfunction
function Trig_U045_Actions takes nothing returns nothing
local integer p=0
local real tempR
local integer tempI
local integer tempI2
local real tempX
local real tempY
local unit u
local timer t
local effect ef
if GetExpiredTimer()==U045timer1 then
set u=LoadUnitHandle(udg_Hash,GetHandleId(U045timer1),0)
set p=GetPlayerId(GetOwningPlayer(u))+1
set t=CreateTimer()
call SaveReal(udg_Hash,GetHandleId(t),0,12)
set tempX=GetUnitX(u)+(((500)*1.0)*Cos(((GetRandomReal(1,360))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((500)*1.0)*Sin(((GetRandomReal(1,360))*1.0)*bj_DEGTORAD))
loop
exitwhen IsPointPathableALL(tempX,tempY)
set tempX=GetUnitX(u)+(((500)*1.0)*Cos(((GetRandomReal(1,360))*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((500)*1.0)*Sin(((GetRandomReal(1,360))*1.0)*bj_DEGTORAD))
endloop
call SaveReal(udg_Hash,GetHandleId(t),1,tempX)
call SaveReal(udg_Hash,GetHandleId(t),2,tempY)
call SaveUnitHandle(udg_Hash,GetHandleId(t),3,u)
if LoadBoolean(Hash_Stat,p,$B9F5AC29)then
set ef=AddSpecialEffect("war3mapImported\\@EF_CrystalBallShiny2.mdl",tempX,tempY)
else
set ef=AddSpecialEffect("war3mapImported\\@EF_CrystalBallBlack2.mdl",tempX,tempY)
endif
call SaveEffectHandle(udg_Hash,GetHandleId(t),4,ef)
call TimerStart(t,0.08,true,function U045eat)
elseif GetExpiredTimer()==U045timer2 then
call PauseTimer(U045timer2)
set u=LoadUnitHandle(udg_Hash,GetHandleId(U045timer2),0)
set p=GetPlayerId(GetOwningPlayer(u))+1
if LoadBoolean(Hash_Stat,p,$B9F5AC29)then
call UnitAddAbility(u,'A01F')
else
call UnitAddAbility(u,'A01E')
endif
endif
set u=null
set t=null
set ef=null
endfunction
function InitTrig_U045 takes nothing returns nothing
set gg_trg_U045=CreateTrigger()
call TriggerAddAction(gg_trg_U045,function Trig_U045_Actions)
endfunction
function Trig_U047_Actions takes nothing returns nothing
local integer a=0
local integer tempI
local unit u
loop
exitwhen GetExpiredTimer()==U047timer[a]
set a=a+1
endloop
set u=Charcter[a]
set tempI=LoadInteger(System,a,$EBE767E6)
call SetHeroInt(u,GetHeroInt(u,false)-(100*tempI),true)
call SaveInteger(System,a,$EBE767E6,0)
call TimerStart(udg_PstatTimer[a],0.0314,false,null)
set u=null
endfunction
function InitTrig_U047 takes nothing returns nothing
set gg_trg_U047=CreateTrigger()
call TriggerAddAction(gg_trg_U047,function Trig_U047_Actions)
endfunction
function Trig_U061_Actions takes nothing returns nothing
local integer p=LoadInteger(System,0,$26F9F330)
local integer tempI=LoadInteger(System,0,$996EFFEA)
local unit u
local integer temp
set u=Charcter[tempI]
if CharcterStat[tempI]then
set temp=GetHeroAgi(u,false)/10
elseif not CharcterStat[tempI]then
set temp=GetHeroInt(u,false)/10
endif
call StatChange(p,temp,"주스탯",3)
set u=Charcter[p]
set temp=GetHeroStr(u,false)/10
call StatChange(tempI,temp,"체력",3)
call TimerStart(U061timer,3,false,null)
set u=null
endfunction
function InitTrig_U061 takes nothing returns nothing
set gg_trg_U061=CreateTrigger()
call TriggerAddAction(gg_trg_U061,function Trig_U061_Actions)
endfunction
function Trig_U068_Actions takes nothing returns nothing
local integer p=0
local unit u
local unit dummy
local real tempX
local real tempY
local real tempR
local integer loopA
loop
exitwhen GetExpiredTimer()==U068timer[p]
set p=p+1
endloop
set u=LoadUnitHandle(udg_Hash,p,$C4FF9F9D)
set dummy=LoadUnitHandle(udg_Hash,p,$7FCE9EC2)
set tempR=LoadReal(udg_Hash,p,$B00D0FFF)
call SaveReal(udg_Hash,p,$B00D0FFF,tempR+3)
set tempX=GetUnitX(u)+(((300)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call EXSetUnitFacing(dummy,tempR)
set dummy=LoadUnitHandle(udg_Hash,p,$49963496)
set tempR=LoadReal(udg_Hash,p,$7A61E869)
call SaveReal(udg_Hash,p,$7A61E869,tempR+3)
set tempX=GetUnitX(u)+(((300)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call EXSetUnitFacing(dummy,tempR)
set dummy=LoadUnitHandle(udg_Hash,p,$13000FD8)
set tempR=LoadReal(udg_Hash,p,$EB12B949)
call SaveReal(udg_Hash,p,$EB12B949,tempR+3)
set tempX=GetUnitX(u)+(((300)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call SetUnitX(dummy,tempX)
call SetUnitY(dummy,tempY)
call EXSetUnitFacing(dummy,tempR)
if LoadBoolean(System,p,$4F8578CE)and not LoadBoolean(System,p,$F7DA6D18)then
call SaveBoolean(System,p,$F7DA6D18,true)
set dummy=LoadUnitHandle(udg_Hash,p,$7FCE9EC2)
call SetUnitState(dummy,ConvertUnitState(0x16),GetUnitState(dummy,ConvertUnitState(0x16))+150)
call SetUnitState(dummy,ConvertUnitState(0x52),GetUnitState(dummy,ConvertUnitState(0x16)))
set dummy=LoadUnitHandle(udg_Hash,p,$49963496)
call SetUnitState(dummy,ConvertUnitState(0x16),GetUnitState(dummy,ConvertUnitState(0x16))+150)
call SetUnitState(dummy,ConvertUnitState(0x52),GetUnitState(dummy,ConvertUnitState(0x16)))
set dummy=LoadUnitHandle(udg_Hash,p,$13000FD8)
call SetUnitState(dummy,ConvertUnitState(0x16),GetUnitState(dummy,ConvertUnitState(0x16))+150)
call SetUnitState(dummy,ConvertUnitState(0x52),GetUnitState(dummy,ConvertUnitState(0x16)))
endif
if not CharacterDeath[p]then
set dummy=LoadUnitHandle(udg_Hash,p,$7FCE9EC2)
if OrderId2StringBJ(GetUnitCurrentOrder(dummy))=="move" then
call RemoveUnit(dummy)
set tempR=LoadReal(udg_Hash,p,$B00D0FFF)
set tempX=GetUnitX(u)+(((300)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(p-1),'udm2',tempX,tempY,tempR)
call SaveUnitHandle(udg_Hash,p,$7FCE9EC2,dummy)
endif
set dummy=LoadUnitHandle(udg_Hash,p,$49963496)
if OrderId2StringBJ(GetUnitCurrentOrder(dummy))=="move" then
call RemoveUnit(dummy)
set tempR=LoadReal(udg_Hash,p,$7A61E869)
set tempX=GetUnitX(u)+(((300)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(p-1),'udm2',tempX,tempY,tempR)
call SaveUnitHandle(udg_Hash,p,$49963496,dummy)
endif
set dummy=LoadUnitHandle(udg_Hash,p,$13000FD8)
if OrderId2StringBJ(GetUnitCurrentOrder(dummy))=="move" then
call RemoveUnit(dummy)
set tempR=LoadReal(udg_Hash,p,$EB12B949)
set tempX=GetUnitX(u)+(((300)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((300)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set dummy=CreateUnit(Player(p-1),'udm2',tempX,tempY,tempR)
call SaveUnitHandle(udg_Hash,p,$13000FD8,dummy)
endif
else
set dummy=LoadUnitHandle(udg_Hash,p,$7FCE9EC2)
call IssuePointOrder(dummy,"smart",tempX,tempY)
set dummy=LoadUnitHandle(udg_Hash,p,$49963496)
call IssuePointOrder(dummy,"smart",tempX,tempY)
set dummy=LoadUnitHandle(udg_Hash,p,$13000FD8)
call IssuePointOrder(dummy,"smart",tempX,tempY)
endif
set u=null
set dummy=null
endfunction
function InitTrig_U068 takes nothing returns nothing
set gg_trg_U068=CreateTrigger()
call TriggerAddAction(gg_trg_U068,function Trig_U068_Actions)
endfunction
function Trig_U074_Actions takes nothing returns nothing
local integer p=0
local real tempR
local integer tempI
local integer tempI2
loop
exitwhen GetExpiredTimer()==U074timer[p]
set p=p+1
endloop
set tempI=LoadInteger(System,p,$8002CBCD)
set tempI2=LoadInteger(Hash_Stat,p,$D8C9D96B)-(tempI*3)
call SaveInteger(Hash_Stat,p,$D8C9D96B,tempI2)
set tempR=LoadReal(Hash_Stat,p,$34D9AB92)-(tempI*3)
call SaveReal(Hash_Stat,p,$34D9AB92,tempR)
set tempR=LoadReal(Hash_Stat,p,$540C61C7)-(tempI*3)
call SaveReal(Hash_Stat,p,$540C61C7,tempR)
call SaveInteger(System,p,$8002CBCD,0)
call TimerStart(udg_infoRe[p],0.0314,false,null)
endfunction
function InitTrig_U074 takes nothing returns nothing
set gg_trg_U074=CreateTrigger()
call TriggerAddAction(gg_trg_U074,function Trig_U074_Actions)
endfunction
function RedMistT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
local integer g=s__party_create()
local unit u=Charcter[p]
local unit c
local real dmg=(GetHeroStr(u,true)+GetHeroAgi(u,true)+GetHeroInt(u,true))*5
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),800*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,4,0,false,1,0)
call EFsettingU(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,c,"chest")
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call s__party_deallocate((g))
set t=null
set u=null
set c=null
endfunction
function Trig_RedMist_Actions takes nothing returns nothing
local timer t=CreateTimer()
local integer p=0
local unit u
loop
exitwhen GetExpiredTimer()==RedMist[p]
set p=p+1
endloop
set u=Charcter[p]
call EFsettingXY(p,"war3mapImported\\@EF_yyjjn15.mdl",0,GetUnitX(u),GetUnitY(u),2.65*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_yyjjn15.mdl",0,GetUnitX(u),GetUnitY(u),2.65*Skrange[p],90,1,0,0,0)
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call TimerStart(t,0.12,false,function RedMistT)
set t=null
set u=null
endfunction
function InitTrig_RedMist takes nothing returns nothing
set gg_trg_RedMist=CreateTrigger()
call TriggerAddAction(gg_trg_RedMist,function Trig_RedMist_Actions)
endfunction
function Trig_info_Rejoin_Actions takes nothing returns nothing
local integer a=0
local integer temp
local real temp2
loop
exitwhen GetExpiredTimer()==udg_infoRe[a]
set a=a+1
endloop
set temp=LoadInteger(Hash_Stat,a,$D8C9D96B)
set temp=LoadInteger(Hash_Stat,a,$753B4F2F)
set ALLP[a]=temp
set temp2=LoadReal(Hash_Stat,a,$92D803F1)
set temp=LoadInteger(Hash_Stat,a,$ED314123)
set temp=temp+LoadInteger(Hash_Stat,a,$4309A2D3)
set ArmorP[a]=temp
set temp2=LoadReal(Hash_Stat,a,$92D803F1)*(I2R(temp)*0.01)
set temp2=LoadReal(Hash_Stat,a,$92D803F1)+temp2
call SetUnitState(Charcter[a],ConvertUnitState(0x20),temp2)
set temp=LoadInteger(Hash_Stat,a,$B38BEB44)
set temp=LoadInteger(Hash_Stat,a,$8885555B)
set DamageDec[a]=temp
call SetUnitAbilityLevel(Charcter[a],'SY00',DamageDec[a]+81)
set temp=LoadInteger(Hash_Stat,a,$C18D16A0)
set AttackSpd[a]=temp
set temp=LoadInteger(Hash_Stat,a,$924944F9)
set MoveSpd[a]=temp
set temp2=LoadReal(Hash_Stat,a,$34D9AB92)
set ADcriP[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$540C61C7)
set APcriP[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$337F1BA1)
set ADcriD[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$1486341)
set APcriD[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$164C40C9)
set DamageAmp[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$8EB4E7D9)
set BloodAbsolAD[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$6DC36456)
set BloodAbsolAP[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$45E22B52)
set SkillD[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$20CA2916)
set NONE[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$5C6093F2)
set FIRED[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$BC3801A9)
set ICED[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$50B06B2)
set WINDD[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$2034A1E3)
set ThunD[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$5FF1A35F)
set BOOSD[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$2E182EFC)
set HealEF[a]=temp2
set temp=LoadInteger(Hash_Stat,a,$B7E7C8AD)
if LoadBoolean(System,a,$B3C8CCC2)and CostM[a]>=1.5 and not LoadBoolean(System,a,$3C2C20C4)then
set temp=temp+35
call SaveInteger(Hash_Stat,a,$B7E7C8AD,temp)
call SaveBoolean(System,a,$3C2C20C4,true)
elseif LoadBoolean(System,a,$B3C8CCC2)and CostM[a]<=1.49 and LoadBoolean(System,a,$3C2C20C4)then
set temp=temp-35
call SaveInteger(Hash_Stat,a,$B7E7C8AD,temp)
call SaveBoolean(System,a,$3C2C20C4,false)
endif
set temp=R2I((100*150/(150+temp)))
set ct[a]=temp*0.01
set temp2=LoadReal(Hash_Stat,a,$F3FDA8C9)
set ArmorPenetrate[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$10BA18C8)
set Skrange[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$A7543052)
set CostM[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$9BC8E22B)
set CostH[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$62BD2901)
set Exp[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$3362B68D)
set Gold[a]=temp2
set temp2=LoadReal(Hash_Stat,a,$A053013A)
set Luck[a]=temp2
if LoadBoolean(System,a,$46E8BA0A)then
if CharcterStat[a]then
set HealEF[a]=HealEF[a]+(BloodAbsolAD[a]*0.5)
elseif not CharcterStat[a]then
set HealEF[a]=HealEF[a]+(BloodAbsolAP[a]*0.5)
endif
endif
if Luck[a]>=1.0 and(LoadBoolean(System,a,$AC59D5EE)or LoadBoolean(System,a,$E62F4E1E))then
set temp2=(Luck[a]/0.2)*0.01
set DamageAmp[a]=DamageAmp[a]+temp2
endif
if Luck[a]>=1.0 and LoadBoolean(System,a,$E62F4E1E)then
set temp2=(Luck[a]/0.05)
set ADcriP[a]=ADcriP[a]+temp2
set APcriP[a]=APcriP[a]+temp2
set temp2=(Luck[a]/0.1)
call SaveInteger(System,a,$98679886,R2I(temp2))
endif
if Luck[a]>=1.5 then
if LoadBoolean(udg_Hash,a,$CB6EFCC2)then
set temp2=R2I(Luck[a]/1)
set temp2=temp2*0.05
set Gold[a]=Gold[a]+temp2
endif
if LoadBoolean(System,a,$73E805F)then
set temp2=R2I(Luck[a]/1)
set temp2=temp2*0.1
set Gold[a]=Gold[a]+temp2
endif
if LoadBoolean(System,a,$972C0AFE)then
set ADcriD[a]=ADcriD[a]+0.1
set APcriD[a]=APcriD[a]+0.1
endif
if LoadBoolean(System,a,$1F2F434A)then
set ArmorPenetrate[a]=ArmorPenetrate[a]+0.1
endif
endif
if Luck[a]>=1.0 and LoadBoolean(System,a,$7E8487A1)then
set temp2=LoadReal(System,a,$30C0FC67)
if temp2 !=(Luck[a]-1.0)*100 then
call StatUP(a,(temp2*15)*-1,"체력")
call StatUP(a,(temp2*25)*-1,"주스탯")
set temp2=(Luck[a]-1.0)*100
call StatUP(a,temp2*15,"체력")
call StatUP(a,temp2*25,"주스탯")
call SaveReal(System,a,$30C0FC67,temp2)
endif
endif
if LoadBoolean(System,a,$F9D34A3D)and Luck[a]>=1.5 and not LoadBoolean(System,a,$F7AA5BEF)then
set temp=temp+10
call SaveInteger(Hash_Stat,a,$B7E7C8AD,temp)
call SaveBoolean(System,a,$F7AA5BEF,true)
elseif(not LoadBoolean(System,a,$F9D34A3D)or Luck[a]<=1.49)and LoadBoolean(System,a,$F7AA5BEF)then
set temp=temp-10
call SaveInteger(Hash_Stat,a,$B7E7C8AD,temp)
call SaveBoolean(System,a,$F7AA5BEF,false)
call RemoveSavedBoolean(System,a,$F7AA5BEF)
endif
if LoadBoolean(System,a,$3577A5CF)and Luck[a]>=1.5 and not LoadBoolean(System,a,$784AE416)then
set ArtRerollMaxChance[a]=ArtRerollMaxChance[a]+1
call SaveBoolean(System,a,$784AE416,true)
elseif(not LoadBoolean(System,a,$3577A5CF)or Luck[a]<=1.49)and LoadBoolean(System,a,$784AE416)then
set ArtRerollMaxChance[a]=ArtRerollMaxChance[a]-1
call SaveBoolean(System,a,$784AE416,false)
call RemoveSavedBoolean(System,a,$784AE416)
endif
if Luck[a]>=2.5 and LoadBoolean(System,a,$A222B918)then
set ADcriP[a]=ADcriP[a]+25
set APcriP[a]=APcriP[a]+25
set ADcriD[a]=ADcriD[a]+0.2
set APcriD[a]=APcriD[a]+0.2
set ArmorPenetrate[a]=ArmorPenetrate[a]+0.1
set DamageAmp[a]=DamageAmp[a]+0.15
endif
if LoadBoolean(System,a,$71E32348)then
if CharcterStat[a]and BloodAbsolAD[a]>=0.099 then
set ADcriP[a]=ADcriP[a]+(BloodAbsolAD[a]*100)
set ADcriD[a]=ADcriD[a]+BloodAbsolAD[a]
elseif not CharcterStat[a]and BloodAbsolAP[a]>=0.099 then
set APcriP[a]=APcriP[a]+(BloodAbsolAP[a]*100)
set APcriD[a]=APcriD[a]+BloodAbsolAP[a]
endif
endif
if LoadBoolean(System,a,$E6F56F2B)then
if CharcterStat[a]and BloodAbsolAD[a]>=0.099 then
set BOOSD[a]=BOOSD[a]+BloodAbsolAD[a]
elseif not CharcterStat[a]and BloodAbsolAP[a]>=0.099 then
set BOOSD[a]=BOOSD[a]+BloodAbsolAP[a]
endif
endif
if LoadBoolean(udg_Hash,a,$A3A49573)then
set temp2=LoadReal(Hash_Stat,a,$5C6093F2)
set FIRED[a]=temp2+((LoadReal(Hash_Stat,a,$BC3801A9)+LoadReal(Hash_Stat,a,$50B06B2)+LoadReal(Hash_Stat,a,$2034A1E3))*0.25)
set temp2=LoadReal(Hash_Stat,a,$BC3801A9)
set ICED[a]=temp2+((LoadReal(Hash_Stat,a,$5C6093F2)+LoadReal(Hash_Stat,a,$50B06B2)+LoadReal(Hash_Stat,a,$2034A1E3))*0.25)
set temp2=LoadReal(Hash_Stat,a,$50B06B2)
set WINDD[a]=temp2+((LoadReal(Hash_Stat,a,$5C6093F2)+LoadReal(Hash_Stat,a,$BC3801A9)+LoadReal(Hash_Stat,a,$2034A1E3))*0.25)
set temp2=LoadReal(Hash_Stat,a,$2034A1E3)
set ThunD[a]=temp2+((LoadReal(Hash_Stat,a,$5C6093F2)+LoadReal(Hash_Stat,a,$BC3801A9)+LoadReal(Hash_Stat,a,$50B06B2))*0.25)
endif
if LoadBoolean(Hash_Stat,a,$6BF8E68)then
if CharcterStat[a]and ADcriP[a]>=101 then
set temp2=(ADcriP[a]-100)*0.01
set ADcriD[a]=ADcriD[a]+temp2
elseif not CharcterStat[a]and APcriP[a]>=101 then
set temp2=(APcriP[a]-100)*0.01
set APcriD[a]=APcriD[a]+temp2
endif
endif
if LoadBoolean(System,a,$4E2511C8)then
set temp2=R2I(GetUnitState(Charcter[a],ConvertUnitState(0x20))/60)*0.01
set DamageAmp[a]=DamageAmp[a]+temp2
endif
if LoadBoolean(System,a,$B3C8CCC2)and CostM[a]>=1.5 then
set SkillD[a]=SkillD[a]+((CostM[a]-1)*0.3)
endif
if LoadBoolean(System,a,$C9172039)then
if NormalP[a]>=50 and not LoadBoolean(System,a,$7BCAF944)then
set temp=LoadInteger(Hash_Stat,a,$D8C9D96B)+10
call SaveInteger(Hash_Stat,a,$D8C9D96B,temp)
call SaveBoolean(System,a,$7BCAF944,true)
elseif NormalP[a]<=49 and LoadBoolean(System,a,$7BCAF944)then
set temp=LoadInteger(Hash_Stat,a,$D8C9D96B)-10
call SaveInteger(Hash_Stat,a,$D8C9D96B,temp)
call SaveBoolean(System,a,$7BCAF944,false)
endif
if AttackSpd[a]>=600 and not LoadBoolean(System,a,$16C17D27)then
call StatUP(a,0.05,"공격간격")
call SaveBoolean(System,a,$16C17D27,true)
elseif AttackSpd[a]<=599 and LoadBoolean(System,a,$16C17D27)then
call StatUP(a,-0.05,"공격간격")
call SaveBoolean(System,a,$16C17D27,false)
endif
endif
if LoadBoolean(System,a,$D9A065CA)then
if CostM[a]>=1.5 and not LoadBoolean(System,a,$5920E10)then
call SaveBoolean(System,a,$5920E10,true)
call SkillLVUP(a,1,1)
call SkillLVUP(a,2,1)
call SkillLVUP(a,3,1)
elseif CostM[a]<1.5 and LoadBoolean(System,a,$5920E10)then
call SaveBoolean(System,a,$5920E10,false)
call SkillLVUP(a,1,-1)
call SkillLVUP(a,2,-1)
call SkillLVUP(a,3,-1)
endif
endif
if LoadBoolean(System,a,$E6F56F2B)and LoadReal(Hash_Stat,a,$84545917)>=0.2 and not LoadBoolean(System,a,$FAF5CCE8)then
call SaveBoolean(System,a,$FAF5CCE8,true)
set temp=1
loop
exitwhen LoadInteger(UniqueArt,a,temp)==0
set temp=temp+1
endloop
call SaveInteger(UniqueArt,a,temp,'U076')
endif
set temp2=Range[a]
if GetUnitAbilityLevel(Charcter[a],'A021')==1 then
set temp2=temp2+300
endif
call SetUnitState(Charcter[a],ConvertUnitState(0x16),temp2)
call SetUnitState(Charcter[a],ConvertUnitState(0x52),temp2+100)
call CharacterToolTip(a)
call TimerStart(udg_PstatTimer[a],0.01,false,null)
endfunction
function InitTrig_info_Rejoin takes nothing returns nothing
set gg_trg_info_Rejoin=CreateTrigger()
call TriggerAddAction(gg_trg_info_Rejoin,function Trig_info_Rejoin_Actions)
endfunction
function Trig_Pstat_Actions takes nothing returns nothing
local integer a=1
local real b=0
local integer c=0
local integer d
local unit u
loop
exitwhen GetExpiredTimer()==udg_PstatTimer[a]
set a=a+1
endloop
set u=Charcter[a]
if GetUnitAbilityLevel(u,'A00B')==0 and LoadInteger(Hash_Stat,a,$D8DB7D58)!=0 then
set c=LoadInteger(Hash_Stat,a,$D8DB7D58)
set c=LoadInteger(Hash_Stat,a,$9298D98F)-c
call SaveInteger(Hash_Stat,a,$9298D98F,c)
call SaveInteger(Hash_Stat,a,$D8DB7D58,0)
elseif GetUnitAbilityLevel(u,'A00B')>=1 then
set c=LoadInteger(Hash_Stat,a,$D8DB7D58)
set c=LoadInteger(Hash_Stat,a,$9298D98F)-c
call SaveInteger(Hash_Stat,a,$9298D98F,c)
set d=GetUnitAbilityLevel(u,'A00B')*3
set c=LoadInteger(Hash_Stat,a,$9298D98F)+d
call SaveInteger(Hash_Stat,a,$9298D98F,c)
call SaveInteger(Hash_Stat,a,$D8DB7D58,d)
endif
set c=LoadInteger(Hash_Stat,a,$B38BEB44)
set c=c+LoadInteger(Hash_Stat,a,$B643E41C)
set c=c+LoadInteger(Hash_Stat,a,$753B4F2F)
set STRP[a]=c
set b=I2R(GetHeroStr(u,false))*(I2R(c)*0.01)
if GetUnitAbilityLevel(u,'Aamk')<=0 then
call UnitAddAbility(u,'Aamk')
endif
call EXSetAbilityDataReal(EXGetUnitAbility(u,'Aamk'),1,110,b)
call IncUnitAbilityLevel(u,'Aamk')
call DecUnitAbilityLevel(u,'Aamk')
set c=0
set c=LoadInteger(Hash_Stat,a,$C46B0D8B)
set c=c+LoadInteger(Hash_Stat,a,$5FFC130D)
if CharcterStat[a]then
set c=c+LoadInteger(Hash_Stat,a,$9298D98F)
endif
if LoadBoolean(System,a,$649C7D8F)then
set c=R2I(I2R(c)*1.1)
endif
if CharcterStat[a]then
set MainSTP[a]=c
endif
set c=c+LoadInteger(Hash_Stat,a,$753B4F2F)
set b=I2R(GetHeroAgi(u,false))*(I2R(c)*0.01)
if GetUnitAbilityLevel(u,'Aamk')<=0 then
call UnitAddAbility(u,'Aamk')
endif
call EXSetAbilityDataReal(EXGetUnitAbility(u,'Aamk'),1,108,b)
call IncUnitAbilityLevel(u,'Aamk')
call DecUnitAbilityLevel(u,'Aamk')
if CharcterStat[a]then
if GetUnitAbilityLevel(u,'AItg')<=0 then
call UnitAddAbility(u,'AItg')
endif
call EXSetAbilityDataReal(EXGetUnitAbility(u,'AItg'),1,108,b)
call IncUnitAbilityLevel(u,'AItg')
call DecUnitAbilityLevel(u,'AItg')
endif
set c=0
set c=LoadInteger(Hash_Stat,a,$5B2587EB)
set c=c+LoadInteger(Hash_Stat,a,$422E7865)
if not CharcterStat[a]then
set c=c+LoadInteger(Hash_Stat,a,$9298D98F)
endif
if LoadBoolean(udg_Hashtable,a,$D70AB363)and LoadBoolean(System,a,$E05324DC)then
set c=R2I(I2R(c)*1.2)
elseif LoadBoolean(udg_Hashtable,a,$D70AB363)then
set c=R2I(I2R(c)*1.1)
elseif LoadBoolean(System,a,$E05324DC)then
set c=R2I(I2R(c)*1.1)
endif
if not CharcterStat[a]then
set MainSTP[a]=c
endif
set c=c+LoadInteger(Hash_Stat,a,$753B4F2F)
set b=I2R(GetHeroInt(u,false))*(I2R(c)*0.01)
if GetUnitAbilityLevel(u,'Aamk')<=0 then
call UnitAddAbility(u,'Aamk')
endif
call EXSetAbilityDataReal(EXGetUnitAbility(u,'Aamk'),1,109,b)
call IncUnitAbilityLevel(u,'Aamk')
call DecUnitAbilityLevel(u,'Aamk')
if not CharcterStat[a]then
if GetUnitAbilityLevel(u,'AItg')<=0 then
call UnitAddAbility(u,'AItg')
endif
call EXSetAbilityDataReal(EXGetUnitAbility(u,'AItg'),1,108,b)
call IncUnitAbilityLevel(u,'AItg')
call DecUnitAbilityLevel(u,'AItg')
endif
set c=0
set c=LoadInteger(Hash_Stat,a,$D8C9D96B)
set c=c+LoadInteger(Hash_Stat,a,$85EC709A)
set NormalP[a]=c
set b=GetUnitState(u,ConvertUnitState(0x12))*(I2R(c)*0.01)
if GetUnitAbilityLevel(u,'AItn')<=0 then
call UnitAddAbility(u,'AItn')
endif
call EXSetAbilityDataReal(EXGetUnitAbility(u,'AItn'),1,108,b)
call IncUnitAbilityLevel(u,'AItn')
call DecUnitAbilityLevel(u,'AItn')
set c=0
set c=LoadInteger(Hash_Stat,a,$ED314123)
set c=c+LoadInteger(Hash_Stat,a,$4309A2D3)
set ArmorP[a]=c
set b=LoadReal(Hash_Stat,a,$92D803F1)*(I2R(c)*0.01)
set b=LoadReal(Hash_Stat,a,$92D803F1)+b
call SetUnitState(u,ConvertUnitState(0x20),b)
set c=0
set c=LoadInteger(Hash_Stat,a,$924944F9)
set c=c+LoadInteger(Hash_Stat,a,$488FEE02)
if Luck[a]>=1.0 and(LoadBoolean(System,a,$AC59D5EE)or LoadBoolean(System,a,$E62F4E1E))then
set b=(Luck[a]/0.2)
set c=c+R2I(b)
endif
set MoveSpd[a]=c
set b=GetUnitDefaultMoveSpeed(u)*(I2R(c)*0.01)
if GetUnitAbilityLevel(u,'AIms')<=0 then
call UnitAddAbility(u,'AIms')
endif
call EXSetAbilityDataReal(EXGetUnitAbility(u,'AIms'),1,108,b)
call IncUnitAbilityLevel(u,'AIms')
call DecUnitAbilityLevel(u,'AIms')
set c=0
set c=LoadInteger(Hash_Stat,a,$C18D16A0)
set c=c+LoadInteger(Hash_Stat,a,$6ACE3FD7)
set AttackSpd[a]=c
set b=I2R(c)*0.01
if GetUnitAbilityLevel(u,'AIsx')<=0 then
call UnitAddAbility(u,'AIsx')
endif
call EXSetAbilityDataReal(EXGetUnitAbility(u,'AIsx'),1,108,b)
call IncUnitAbilityLevel(u,'AIsx')
call DecUnitAbilityLevel(u,'AIsx')
if GetLocalPlayer()==Player(a-1)and LoadUnitHandle(udg_Hashtable,a,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("Stat_Mini_DesInf0",0),I2S(GetHeroStr(u,true)))
call DzFrameSetText(DzFrameFindByName("Stat_Mini_DesInf0",1),I2S(GetHeroAgi(u,true)))
call DzFrameSetText(DzFrameFindByName("Stat_Mini_DesInf0",2),I2S(GetHeroInt(u,true)))
call DzFrameSetText(DzFrameFindByName("AA_DesInf",0),"|CFFFFCC00공격력 : \n"+I2S(R2I(GetUnitState(u,ConvertUnitState(0x14))))+"")
if IsUnitInGroup(u,udg_Mujuk)then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n|cffFF0000무적")
else
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n"+I2S(R2I(GetUnitState(u,ConvertUnitState(0x20))))+"")
endif
endif
call CharacterToolTip(a)
set u=null
endfunction
function InitTrig_Pstat takes nothing returns nothing
set gg_trg_Pstat=CreateTrigger()
call TriggerAddAction(gg_trg_Pstat,function Trig_Pstat_Actions)
endfunction
function Trig_Hero_Death_Actions takes nothing returns nothing
local unit u=GetDyingUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local timer t=ReviveTimer[p]
local unit c
local real ReviveT=LoadReal(System,$11910FBA,p)
local timerdialog td
local integer loopA
local boolean tr=true
local effect ef
call RemoveSavedInteger(udg_Hash,GetHandleId(u),$5EE1219A)
set CharacterDeath[p]=true
if LoadBoolean(System,p,$8916B6E2)then
if BossBattle then
set ReviveT=ReviveT*0.4
else
set ReviveT=ReviveT*0.7
endif
endif
if LoadBoolean(udg_Hashtable,p,$EC03648A)then
set ReviveT=ReviveT*0.7
endif
if LoadBoolean(System,p,$DDE7686D)then
if LoadBoolean(Hash_Stat,p,$B9F5AC29)then
set ReviveT=ReviveT*0.6
else
set ReviveT=ReviveT*0.8
endif
endif
if(GetLocalPlayer()==Player(p-1))then
call ClearSelection()
call DzFrameShow(DzFrameFindByName("Stack_Mini_Icon",0),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",20),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",21),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",22),false)
call DzFrameShow(DzFrameFindByName("AA_Button",0),false)
call DzFrameShow(DzFrameFindByName("BB_Button",0),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_DesInf0",0),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_DesInf0",1),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_DesInf0",2),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",1),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",2),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",3),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",4),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",5),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",6),false)
call DzFrameShow(DzFrameFindByName("Stat_Mini_Button",7),false)
endif
call SaveReal(System,GetHandleId(t),$688DFB59,0)
call SaveReal(System,GetHandleId(t),$FA076041,0)
call SaveReal(udg_Hashtable,GetHandleId(u),$525D985A,0)
call SaveReal(udg_Hashtable,GetHandleId(u),$DC6A3962,0)
if BossBattle and LoadInteger(udg_Hash,GetHandleId(u),$AD509D80)>=1 then
call SaveReal(System,GetHandleId(t),$688DFB59,GetUnitX(u))
call SaveReal(System,GetHandleId(t),$FA076041,GetUnitY(u))
set loopA=LoadInteger(udg_Hash,GetHandleId(u),$AD509D80)-1
call SaveInteger(udg_Hash,GetHandleId(u),$AD509D80,loopA)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),5,p+1,I2S(loopA))
call DisplayTimedTextToPlayer(Player(p-1),0,0,10.00,"|cffFF0000남은 목숨 : "+I2S(loopA))
elseif BossBattle and LoadInteger(udg_Hash,GetHandleId(u),$AD509D80)<=0 then
set tr=false
endif
if not tr then
set loopA=0
loop
exitwhen loopA==Playint
set loopA=loopA+1
call DisplayTimedTextToPlayer(Player(PP[loopA]-1),0,0,10.00,"|cffFF0000[시스템] - "+GetPlayerName(Player(p-1))+"|cffFF0000님이 완전히 사망했습니다.")
endloop
elseif tr then
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
call DzSetUnitModel(c,"Abilities\\Spells\\Orc\\Reincarnation\\ReincarnationTarget.mdl")
call SetUnitScale(c,2.5,1,1)
call SaveUnitHandle(System,GetHandleId(t),$9046A301,c)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10.00,"|cffFF0000사망하셨습니다! 부활에 걸리는 시간 : "+I2S(R2I(ReviveT)))
call TimerStart(t,ReviveT,false,null)
call SaveUnitHandle(System,GetHandleId(t),$FAD24066,u)
set td=CreateTimerDialog(t)
call TimerDialogSetTitle(td,"남은 부활 시간")
call TimerDialogDisplay(td,true)
call SaveTimerDialogHandle(System,GetHandleId(t),$4F17DB0B,td)
call TimerDialogDisplay(td,false)
set loopA=0
loop
exitwhen loopA==Playint
set loopA=loopA+1
if PP[loopA]==p and GetLocalPlayer()==Player(p-1)then
call TimerDialogDisplay(td,true)
exitwhen true
endif
endloop
endif
if LoadInteger(udg_Hashtable,p,$A6A7F4EC)==8 and LoadReal(udg_Hashtable,p,$DA557887)==0 and GetUnitLevel(u)>=100 then
set invenClick[p]=false
set loopA=0
loop
exitwhen loopA>31
if LoadInteger(Hash,p-1,$DA437F80+loopA)=='U014' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(loopA)+"/"+I2S('N034'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",loopA),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",loopA),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set loopA=loopA+1
endloop
call SaveReal(udg_Hashtable,p,$F0892948,0.2)
call PauseTimer(N031timer2[p])
call SaveBoolean(udg_Hashtable,p,$D70AB363,true)
call SaveInteger(udg_Hashtable,p,$A6A7F4EC,9)
endif
if LoadBoolean(System,p,$1904ABF9)then
call SetPlayerName(Player(8),"|cffFF8200료멘 스쿠나 |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"작별이다 최강. 내가 없는 시대에 태어났을 뿐인 범부여.")
set invenClick[p]=false
set loopA=0
loop
exitwhen loopA>31
if LoadInteger(Hash,p-1,$DA437F80+loopA)=='R028' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(loopA)+"/"+I2S('N040'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",loopA),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",loopA),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set loopA=loopA+1
endloop
call SaveReal(Hash_Stat,'N040',$A7543052,0.50)
call SaveBoolean(System,p,$1904ABF9,false)
call RemoveSavedBoolean(System,p,$1904ABF9)
call SetPlayerAbilityAvailable(Player(p-1),'AF08',false)
endif
if LoadBoolean(Hash_Stat,p,$AA426FEF)then
call StatUP(p,-5*R2I(LoadInteger(Hash_Stat,p,$53858E4A)*0.5),"공격력")
call SetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I635'),R2I(LoadInteger(Hash_Stat,p,$53858E4A)*0.5))
call SaveInteger(Hash_Stat,p,$53858E4A,R2I(LoadInteger(Hash_Stat,p,$53858E4A)*0.5))
endif
if LoadBoolean(Hash_Stat,p,$560F1AB5)then
if LoadBoolean(Hash_Stat,p,$B8531136)then
call SaveReal(Hash_Stat,p,$21C5A944,0)
call SaveBoolean(Hash_Stat,p,$B8531136,false)
call StatUP(p,-0.05,"물리흡")
call PauseTimer(Aluzard[p])
set ef=LoadEffectHandle(udg_Hash,p,$858BC781)
call DestroyEffect(ef)
endif
endif
set t=null
set u=null
set td=null
set c=null
set ef=null
endfunction
function InitTrig_Hero_Death takes nothing returns nothing
set gg_trg_Hero_Death=CreateTrigger()
call TriggerAddAction(gg_trg_Hero_Death,function Trig_Hero_Death_Actions)
endfunction
function Trig_Revilve_Hero_Actions takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(System,GetHandleId(t),$FAD24066)
local real tempX
local real tempY
local timerdialog td=LoadTimerDialogHandle(System,GetHandleId(t),$4F17DB0B)
local integer stage=LoadInteger(System,GetHandleId(t),$733A3CAD)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer loopA
if stage==0 then
call SaveInteger(System,GetHandleId(t),$733A3CAD,1)
call SaveBoolean(System,GetHandleId(u),$779F983F,true)
call Mujuk(p,u)
call TimerStart(udg_infoRe[p],0.01,false,null)
if BossBattle then
set tempX=LoadReal(System,GetHandleId(t),$688DFB59)
set tempY=LoadReal(System,GetHandleId(t),$FA076041)
if tempX==0 and tempY==0 then
if LoadInteger(udg_Hash,0,$CBA714FE)==1 then
set tempX=GetRectCenterX(gg_rct_Taurren_Middle)
set tempY=GetRectCenterY(gg_rct_Taurren_Middle)
elseif LoadInteger(udg_Hash,0,$CBA714FE)==2 then
set tempX=GetRectCenterX(gg_rct_BB_Middle)
set tempY=GetRectCenterY(gg_rct_BB_Middle)
elseif LoadInteger(udg_Hash,0,$CBA714FE)==3 then
set tempX=GetRectCenterX(gg_rct_Cronus_Middle)
set tempY=GetRectCenterY(gg_rct_Cronus_Middle)
endif
endif
else
set tempX=GetRectCenterX(gg_rct_AttackZone)+(((500)*1.0)*Cos(((270)*1.0)*bj_DEGTORAD))
set tempY=GetRectCenterY(gg_rct_AttackZone)+(((500)*1.0)*Sin(((270)*1.0)*bj_DEGTORAD))
endif
call ReviveHero(u,tempX,tempY,true)
set CharacterDeath[p]=false
if LoadBoolean(System,p,$8916B6E2)then
call StatChange(p,0.1,"피증",60)
call BuffCall(u,'AT21',60,false,false)
endif
call SelectNone(Player(p-1))
call SelectGO(u,Player(p-1))
call SaveUnitHandle(udg_Hashtable,p,$C91F8651,u)
if(GetLocalPlayer()==Player(p-1))then
call ClearSelection()
call SelectUnit(u,true)
call PanCameraToTimed(tempX,tempY,0)
endif
call TimerStart(t,1,false,null)
call DestroyTimerDialog(td)
set u=LoadUnitHandle(System,GetHandleId(t),$9046A301)
call RemoveUnit(u)
else
if LoadBoolean(System,p,$2D17DDB)then
call SaveBoolean(System,p,$2D17DDB,false)
set loopA=1
loop
exitwhen loopA>=7
if UnitItemInSlot(Charcter[p],loopA-1)==null then
exitwhen true
elseif UnitItemInSlot(Charcter[p],loopA-1)!=null and loopA==6 then
call RemoveItem(UnitItemInSlot(Charcter[p],loopA-1))
call DisplayTimedTextToPlayer(Player(p-1),0,0,10.00,"|cffff8C00당신의 장비가 진흙에 침식되었다!")
endif
set loopA=loopA+1
endloop
set bj_lastCreatedItem=CreateItem('I999',GetUnitX(Charcter[p]),GetUnitY(Charcter[p]))
call UnitAddItem(Charcter[p],bj_lastCreatedItem)
endif
if LoadBoolean(System,p,$ABA407AB)then
call SaveBoolean(System,p,$ABA407AB,false)
set bj_lastCreatedItem=CreateItem('U016',GetUnitX(Charcter[p]),GetUnitY(Charcter[p]))
call UnitAddItem(Charcter[p],bj_lastCreatedItem)
endif
call SaveBoolean(System,GetHandleId(u),$779F983F,false)
call endMujuk(p,u)
call FlushChildHashtable(System,GetHandleId(t))
call PauseTimer(t)
endif
set t=null
set u=null
set td=null
endfunction
function InitTrig_Revilve_Hero takes nothing returns nothing
set gg_trg_Revilve_Hero=CreateTrigger()
call TriggerAddAction(gg_trg_Revilve_Hero,function Trig_Revilve_Hero_Actions)
endfunction
function Trig_Monster_Death_Actions takes nothing returns nothing
local unit u1=GetKillingUnit()
local unit u2=GetDyingUnit()
local unit u3
local integer p
local integer a=0
local integer b=0
local real c=0
local real tempR
local item itm
local integer tempI
local integer g=s__party_create()
if IsUnitAlly(u1,Player(9))and GetPlayerSlotState(GetOwningPlayer(u1))==ConvertPlayerSlotState(1)then
set p=GetPlayerId(GetOwningPlayer(u1))+1
set u1=Charcter[p]
endif
if IsUnitEnemy(u2,GetOwningPlayer(u1))==true and GetOwningPlayer(u2)!=Player(11)and not IsUnitIdType(GetUnitTypeId(u2),ConvertUnitType(15))then
set a=LoadInteger(udg_Hash,p,$A13CC7F9)+1
call SaveInteger(udg_Hash,p,$A13CC7F9,a)
call MultiboardSetItemValueBJ2(bj_lastCreatedMultiboard,3,PR[p]+1,I2S(a))
if LoadBoolean(System,p,$1F67FD0C)then
if GetUnitUserData(u2)==91 then
call StatUP(p,90,"주스탯")
else
call StatUP(p,6,"주스탯")
endif
endif
if GetOwningPlayer(u2)==Player(12)then
if GetUnitTypeId(u2)=='wv00' and GetUnitUserData(u2)==91 then
set a=(40+(LoadInteger(udg_Hash,999,$3862CC76)-1)*25)*15
elseif GetUnitTypeId(u2)=='wv00' and GetUnitUserData(u2)!=91 then
set a=40+(LoadInteger(udg_Hash,999,$3862CC76)-1)*25
endif
else
set a=GetUnitLevel(u2)*25
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u1),GetUnitY(u1),2000,null)
loop
set u3=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),u3)
exitwhen u3==null
if CheckBossGroupN(u3)then
call GivenExp(a,GetPlayerId(GetOwningPlayer(u3))+1)
endif
endloop
if GetUnitTypeId(u2)=='wv00' and GetUnitUserData(u2)==90 then
set a=LoadInteger(udg_Hash,p,$9D8A16C2)
elseif GetUnitTypeId(u2)=='wv00' and GetUnitUserData(u2)==91 then
set a=LoadInteger(udg_Hash,p,$9D8A16C2)*15
else
set a=R2I(GetUnitState(u2,ConvertUnitState(3)))
endif
call GivenGold(a,p,u2)
if GetUnitTypeId(u2)=='en00' then
set a=LoadInteger(Hash,p,$CF0C071E)
if a+1>=5 then
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,0,5,"|cff32cd32[농장 주인] |cffe9967a: 도와줘서 고맙네! 보상일세")
set a=LoadInteger(Hash,p,$24E48254)+1
call SaveInteger(Hash,p,$24E48254,a)
if a>=5 then
call GivenExp(600,p)
call GivenGold(500,p,u1)
call SaveInteger(Hash,p,$24E48254,0)
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,0,5,"|cffe9967a보상 2배 획득!")
else
call GivenExp(300,p)
call GivenGold(250,p,u1)
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,0,5,"|cffe9967a보상 2배까지 : ("+I2S(a)+"/5)")
endif
call DestroyEffect(AddSpecialEffectTarget("UI\\Feedback\\GoldCredit\\GoldCredit.mdl",u1,"chest"))
call SaveInteger(Hash,p,$CF0C071E,0)
else
call SaveInteger(Hash,p,$CF0C071E,a+1)
endif
endif
if GetUnitTypeId(u2)=='wv00' and GetUnitUserData(u2)<=89 then
set a=LoadInteger(Hash,p,$AA757FFF)
if a+1>=40 then
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,0,5,"|cff32cd32[시스템] |cffe9967a: 라인몬스터를 저지해 보상을얻었다.")
call GivenExp(LoadInteger(udg_Hash,999,$3862CC76)*500,p)
call GivenGold((LoadInteger(udg_Hash,999,$3862CC76)*250)+500,p,u1)
call DestroyEffect(AddSpecialEffectTarget("UI\\Feedback\\GoldCredit\\GoldCredit.mdl",u1,"chest"))
if LoadBoolean(System,p,$30CF6E3)then
call StatUP(p,200,"주스탯")
call StatUP(p,200,"체력")
else
call StatUP(p,100,"주스탯")
call StatUP(p,100,"체력")
endif
call SaveInteger(Hash,p,$AA757FFF,0)
else
call SaveInteger(Hash,p,$AA757FFF,a+1)
endif
endif
if GetUnitTypeId(u2)=='EN48' and LoadBoolean(udg_Hash,0,$4C678A98)then
set a=LoadInteger(udg_Hash,0,$46FBB73B)
set b=LoadInteger(udg_Hash,0,$3E003FA5)
if a==b then
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cffffa500[시스템] - "+I2S(a)+"단계 최초 도전성공. "+I2S(a*4500)+"골드 지급")
call GivenGold(a*4500,p,u1)
set a=a+1
call SaveInteger(udg_Hash,0,$46FBB73B,a)
if a<=20 then
call DisplayTimedTextToPlayer(Player(p-1),0,0,30,"현재 기사 단장의 단계 : ("+I2S(b)+"/"+I2S(a)+")")
endif
endif
endif
if GetUnitTypeId(u2)=='EN48' or GetUnitTypeId(u2)=='EN47' then
if LoadBoolean(Hash_Stat,p,$67D62E74)==true then
set tempI=LoadInteger(Hash_Stat,p,$E3F19892)
if tempI<10 then
set tempI=tempI+1
call SaveInteger(Hash_Stat,p,$E3F19892,tempI)
call StatUP(p,100,"공격력")
call SetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I647'),GetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I647'))+1)
if tempI==10 then
call StatUP(p,10,"피감")
endif
endif
endif
endif
if LoadBoolean(udg_Hash,p,$CC771750)then
set tempI=36
else
set tempI=30
endif
if GetUnitTypeId(u2)=='en01' and LuckySystem(tempI,p)then
set itm=CreateItem('I00F',GetUnitX(u2),GetUnitY(u2))
endif
if LoadBoolean(udg_Hash,p,$CC771750)then
set tempI=120
else
set tempI=100
endif
if GetUnitTypeId(u2)=='en04' and LuckySystem(tempI,p)then
set itm=CreateItem('I00N',GetUnitX(u2),GetUnitY(u2))
endif
if LoadBoolean(udg_Hash,p,$CC771750)then
set tempI=36
else
set tempI=30
endif
if GetUnitTypeId(u2)=='en05' and LuckySystem(tempI,p)then
set itm=CreateItem('I00O',GetUnitX(u2),GetUnitY(u2))
endif
if LoadBoolean(udg_Hash,p,$CC771750)then
set tempI=96
else
set tempI=80
endif
if GetUnitTypeId(u2)=='en06' and LuckySystem(tempI,p)then
set itm=CreateItem('I00P',GetUnitX(u2),GetUnitY(u2))
endif
if LoadBoolean(udg_Hash,p,$CC771750)then
set tempI=30
else
set tempI=25
endif
if GetUnitTypeId(u2)=='en03' and LuckySystem(tempI,p)then
set itm=CreateItem('I00Q',GetUnitX(u2),GetUnitY(u2))
endif
if LoadBoolean(udg_Hash,p,$CC771750)then
set tempI=96
else
set tempI=80
endif
if GetUnitTypeId(u2)=='en02' and LuckySystem(tempI,p)then
set itm=CreateItem('I00R',GetUnitX(u2),GetUnitY(u2))
endif
if LoadBoolean(udg_Hash,p,$CC771750)then
set tempI=30
else
set tempI=25
endif
if GetUnitTypeId(u2)=='en07' and LuckySystem(tempI,p)then
set itm=CreateItem('I00S',GetUnitX(u2),GetUnitY(u2))
endif
if LoadBoolean(udg_Hash,p,$CC771750)then
set tempI=84
else
set tempI=70
endif
if GetUnitTypeId(u2)=='en08' and LuckySystem(tempI,p)then
set itm=CreateItem('I00T',GetUnitX(u2),GetUnitY(u2))
endif
if LoadBoolean(udg_Hash,p,$CC771750)then
set tempI=24
else
set tempI=20
endif
if GetUnitTypeId(u2)=='en09' and LuckySystem(tempI,p)then
set itm=CreateItem('I00V',GetUnitX(u2),GetUnitY(u2))
endif
if LoadBoolean(udg_Hash,p,$CC771750)then
set tempI=84
else
set tempI=70
endif
if GetUnitTypeId(u2)=='en10' and LuckySystem(tempI,p)then
set itm=CreateItem('I00U',GetUnitX(u2),GetUnitY(u2))
endif
if LoadBoolean(udg_Hash,p,$CC771750)then
set tempI=72
else
set tempI=60
endif
if GetUnitTypeId(u2)=='en11' and LuckySystem(tempI,p)then
set itm=CreateItem('I00W',GetUnitX(u2),GetUnitY(u2))
endif
if LoadBoolean(System,p,$5842DED4)then
set b=LoadInteger(System,p,$6E915502)
if b<10 then
set a=LoadInteger(System,p,$8E89C421)
if a==29 then
call SaveInteger(System,p,$8E89C421,0)
call SaveInteger(System,p,$6E915502,b+1)
if b+1==10 then
call StatUP(p,250,"지능")
call StatUP(p,0.05,"방어관통")
call RemoveSavedBoolean(System,p,$5842DED4)
endif
call StatUP(p,15,"지능")
else
call SaveInteger(System,p,$8E89C421,a+1)
endif
endif
endif
if LoadBoolean(System,p,$B76CE2A6)then
set b=LoadInteger(System,p,$29CCA62F)
if b<10 then
set a=LoadInteger(System,p,$E5795F72)
if a==29 then
call SaveInteger(System,p,$E5795F72,0)
call SaveInteger(System,p,$29CCA62F,b+1)
if b+1==10 then
call StatUP(p,300,"지능")
call StatUP(p,5,"체퍼")
call RemoveSavedBoolean(System,p,$B76CE2A6)
endif
call StatUP(p,30,"체력")
call StatUP(p,1,"체퍼")
else
call SaveInteger(System,p,$E5795F72,a+1)
endif
elseif b==10 then
call SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)+(GetUnitState(u1,UNIT_STATE_MAX_LIFE)*0.015)))
endif
endif
if LoadBoolean(System,p,$D21EF0EE)then
set b=LoadInteger(System,p,$C5F5E739)
if b<10 then
set a=LoadInteger(System,p,$1D8F1A0A)
if a==29 then
call SaveInteger(System,p,$1D8F1A0A,0)
call SaveInteger(System,p,$C5F5E739,b+1)
if b+1==10 then
call StatUP(p,250,"공격력")
call StatUP(p,0.05,"방어관통")
call RemoveSavedBoolean(System,p,$D21EF0EE)
endif
call StatUP(p,15,"공격력")
else
call SaveInteger(System,p,$1D8F1A0A,a+1)
endif
endif
endif
if LoadBoolean(System,p,$B9956ACE)then
set b=LoadInteger(System,p,$15991CE1)
if b<10 then
set a=LoadInteger(System,p,$5CE1FA8C)
if a==29 then
call SaveInteger(System,p,$5CE1FA8C,0)
call SaveInteger(System,p,$15991CE1,b+1)
if b+1==10 then
call StatUP(p,250,"주스탯")
call StatUP(p,10,"주탯퍼")
call StatUP(p,0.05,"방어관통")
call RemoveSavedBoolean(System,p,$B9956ACE)
endif
call StatUP(p,15,"주스탯")
else
call SaveInteger(System,p,$5CE1FA8C,a+1)
endif
endif
endif
if LoadBoolean(System,p,$D5C635B6)then
set a=LoadInteger(udg_Hash,p,$FA13BE83)+1
if a==4 then
call StatUP(p,1,"지능")
call SaveInteger(udg_Hash,p,$FA13BE83,0)
else
call SaveInteger(udg_Hash,p,$FA13BE83,a)
endif
endif
if LoadBoolean(System,p,$28D58E2F)then
set a=LoadInteger(udg_Hash,p,$A13CC7F9)
if a>=1000 and not LoadBoolean(System,p,$E18DB73A)then
call StatUP(p,0.05,"스증")
call SaveBoolean(System,p,$E18DB73A,true)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff32cd32[시스템] |cffe9967a: 살인귀의 밤이 강화됬다.")
endif
if a>=2500 and not LoadBoolean(System,p,$F21BB364)then
call StatUP(p,0.05,"보스추뎀")
call SaveBoolean(System,p,$F21BB364,true)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff32cd32[시스템] |cffe9967a: 살인귀의 밤이 강화됬다.")
endif
if a>=4000 and not LoadBoolean(System,p,$5E8665B5)then
call StatUP(p,0.1,"보스추뎀")
call SaveBoolean(System,p,$5E8665B5,true)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff32cd32[시스템] |cffe9967a: 살인귀의 밤이 강화됬다.")
call RemoveSavedBoolean(System,p,$28D58E2F)
endif
endif
if LoadBoolean(System,p,$256D2755)then
set a=LoadInteger(udg_Hash,p,$FA13BE83)+1
if a==4 then
call StatUP(p,1,"공격력")
call SaveInteger(udg_Hash,p,$FA13BE83,0)
else
call SaveInteger(udg_Hash,p,$FA13BE83,a)
endif
endif
if LoadBoolean(System,p,$B6BC37D2)then
set a=LoadInteger(udg_Hash,p,$A13CC7F9)
if a>=1000 and not LoadBoolean(System,p,$5EFD31A0)then
call StatUP(p,0.05,"스증")
call SaveBoolean(System,p,$5EFD31A0,true)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff32cd32[시스템] |cffe9967a: 고원의 마녀가 강화됬다.")
endif
if a>=2500 and not LoadBoolean(System,p,$538A11C3)then
call StatUP(p,0.05,"보스추뎀")
call SaveBoolean(System,p,$538A11C3,true)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff32cd32[시스템] |cffe9967a: 고원의 마녀가 강화됬다.")
endif
if a>=4000 and not LoadBoolean(System,p,$5E28A017)then
call StatUP(p,0.1,"보스추뎀")
call SaveBoolean(System,p,$5E28A017,true)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff32cd32[시스템] |cffe9967a: 고원의 마녀가 강화됬다.")
call RemoveSavedBoolean(System,p,$B6BC37D2)
endif
endif
set tempI=LoadInteger(Hash_Stat,p,$53858E4A)
if LoadBoolean(Hash_Stat,p,$AA426FEF)==true and tempI<500 then
call StatUP(p,5,"공격력")
call SetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I635'),GetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I635'))+1)
call SaveInteger(Hash_Stat,p,$53858E4A,tempI+1)
endif
if GetUnitTypeId(u1)=='HR13' then
set tempR=LoadReal(udg_Hash,GetHandleId(u1),$C41A3DB7)
if GetRandomReal(0,100)<=tempR then
set a=LoadInteger(udg_Hash,GetHandleId(u1),$D3B20A2B)
call SaveInteger(udg_Hash,GetHandleId(u1),$D3B20A2B,a+1)
call SaveReal(udg_Hash,GetHandleId(u1),$C41A3DB7,3)
call DisplayTimedTextToPlayer(Player(p-1),0,0,30,"|cff4169e1[시스템] - |cffffa500마카롱 티켓을 얻었다!")
else
call SaveReal(udg_Hash,GetHandleId(u1),$C41A3DB7,tempR+0.02)
endif
endif
if LoadInteger(udg_Hash,p,$3782B6B0)>=1 then
if LoadInteger(udg_Hash,p,$3782B6B0)==1 and GetUnitTypeId(u2)=='en04' then
set b=LoadInteger(udg_Hash,p,$3782B6B0)+1
call SaveInteger(udg_Hash,p,$3782B6B0,b)
call StatUP(p,100,"체력")
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cff4169e1[시스템] - |cffff1493필로의 호감도가 상승했다.")
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_heart_particle_v2.mdx",LoadUnitHandle(udg_Hash,p,$7B23B649),"overhead"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIvi\\AIviTarget.mdl",LoadUnitHandle(udg_Hash,p,$7B23B649),"origin"))
endif
if LoadInteger(udg_Hash,p,$3782B6B0)==2 and GetUnitTypeId(u2)=='en06' then
set b=LoadInteger(udg_Hash,p,$3782B6B0)+1
call SaveInteger(udg_Hash,p,$3782B6B0,b)
call StatUP(p,100,"체력")
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cff4169e1[시스템] - |cffff1493필로의 호감도가 상승했다.")
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_heart_particle_v2.mdx",LoadUnitHandle(udg_Hash,p,$7B23B649),"overhead"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIvi\\AIviTarget.mdl",LoadUnitHandle(udg_Hash,p,$7B23B649),"origin"))
endif
if LoadInteger(udg_Hash,p,$3782B6B0)==3 and GetUnitTypeId(u2)=='en02' then
set b=LoadInteger(udg_Hash,p,$3782B6B0)+1
call SaveInteger(udg_Hash,p,$3782B6B0,b)
call StatUP(p,100,"체력")
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cff4169e1[시스템] - |cffff1493필로의 호감도가 상승했다.")
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_heart_particle_v2.mdx",LoadUnitHandle(udg_Hash,p,$7B23B649),"overhead"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIvi\\AIviTarget.mdl",LoadUnitHandle(udg_Hash,p,$7B23B649),"origin"))
endif
if LoadInteger(udg_Hash,p,$3782B6B0)==4 and GetUnitTypeId(u2)=='en08' then
set b=LoadInteger(udg_Hash,p,$3782B6B0)+1
call SaveInteger(udg_Hash,p,$3782B6B0,b)
call StatUP(p,100,"체력")
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cff4169e1[시스템] - |cffff1493필로의 호감도가 상승했다.")
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\@EF_heart_particle_v2.mdx",LoadUnitHandle(udg_Hash,p,$7B23B649),"overhead"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIvi\\AIviTarget.mdl",LoadUnitHandle(udg_Hash,p,$7B23B649),"origin"))
endif
if LoadInteger(udg_Hash,p,$3782B6B0)==5 and GetUnitTypeId(u2)=='en10' then
call SaveInteger(udg_Hash,p,$3782B6B0,0)
call RemoveSavedInteger(System,p,$3782B6B0)
call StatUP(p,100,"체력")
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cff4169e1[시스템] - |cffff1493필로의 호감도가 최대치가 되었다!")
call RemoveUnit(LoadUnitHandle(udg_Hash,p,$7B23B649))
set bj_lastCreatedUnit=CreateUnit(Player(p-1),'rdm2',GetUnitX(u1),GetUnitY(u1),270)
call SaveUnitHandle(udg_Hash,p,$7B23B649,bj_lastCreatedUnit)
set tempI=0
loop
exitwhen tempI>31
if LoadInteger(Hash,p-1,$DA437F80+tempI)=='R016' then
if GetLocalPlayer()==Player(p-1)then
call DzSyncData("RCTGT",I2S(tempI)+"/"+I2S('U018'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set tempI=tempI+1
endloop
call PilloGet(p)
endif
endif
if IchigoSET[p]then
set Ichigointeger[1]=Ichigointeger[1]+1
set a=Ichigointeger[0]
call StatUP(p,a,"공격력")
if Ichigointeger[1]>=25 and Ichigointeger[3]==0 then
set tempI=0
loop
exitwhen tempI>31
if LoadInteger(Hash,p-1,$DA437F80+tempI)=='N019' then
if GetLocalPlayer()==Player(p-1)then
call DzSyncData("RCTGT",I2S(tempI)+"/"+I2S('N020'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set tempI=tempI+1
endloop
set IchigoString="시해 단련"
set Ichigointeger[3]=1
set Ichigointeger[1]=0
endif
if Ichigointeger[1]>=50 and Ichigointeger[3]==1 then
set IchigoSET[p]=false
call SArtADD('N021',p)
endif
if Ichigointeger[1]>=50 and Ichigointeger[3]==2 then
set IchigoSET[p]=false
call SArtADD('C009',p)
endif
if Ichigointeger[1]>=100 and Ichigointeger[3]==3 then
set IchigoSET[p]=false
if IchigoSET[6]then
call SArtADD('C010',p)
endif
endif
if Ichigointeger[1]>=200 and Ichigointeger[3]==4 then
set IchigoSET[p]=false
endif
if Ichigointeger[1]>=400 and Ichigointeger[3]==7 then
set IchigoSET[p]=false
call SaveBoolean(udg_Hash,p,$69B3F052,false)
endif
if Ichigointeger[1]>=600 and Ichigointeger[3]==9 then
set IchigoSET[p]=false
call SaveBoolean(udg_Hash,p,$69B3F052,false)
endif
endif
if IchigoSET[6]and p==Ichigointeger[4]then
set Ichigointeger[6]=Ichigointeger[6]+1
if Ichigointeger[6]>=3 then
set Ichigointeger[6]=0
call StatUP(p,1,"공격력")
endif
endif
if IchigoSET[7]and p==Ichigointeger[4]then
set Ichigointeger[2]=Ichigointeger[2]+1
if Ichigointeger[2]>=4 then
set Ichigointeger[2]=0
call StatUP(p,1,"올스탯")
endif
endif
endif
call s__party_deallocate((g))
set u1=null
set u2=null
set u3=null
set itm=null
endfunction
function InitTrig_Monster_Death takes nothing returns nothing
set gg_trg_Monster_Death=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Monster_Death,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_Monster_Death,function Trig_Monster_Death_Actions)
endfunction
function Trig_Town_Destroy_Actions takes nothing returns nothing
call CustomDefeatBJ(Player(0),"기지를 지키지못했다.")
call CustomDefeatBJ(Player(1),"기지를 지키지못했다.")
call CustomDefeatBJ(Player(2),"기지를 지키지못했다.")
call CustomDefeatBJ(Player(3),"기지를 지키지못했다.")
call CustomDefeatBJ(Player(4),"기지를 지키지못했다.")
endfunction
function InitTrig_Town_Destroy takes nothing returns nothing
set gg_trg_Town_Destroy=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_Town_Destroy,gg_unit_h000_0013,EVENT_UNIT_DEATH)
call TriggerAddAction(gg_trg_Town_Destroy,function Trig_Town_Destroy_Actions)
endfunction
function Trig_CreepRegion_Timer takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer unitType=LoadInteger(System,GetHandleId(t),$FAD24066)
local integer unitCode=LoadInteger(System,GetHandleId(t),$4F17DB0B)
local real x=LoadReal(System,$A99320FA,unitCode)
local real y=LoadReal(System,$FDF65382,unitCode)
local unit tempUnit
set tempUnit=CreateUnit(Player(10),unitType,x,y,GetRandomReal(0,360))
call visible(tempUnit,30,100,0.5,0.01)
call SaveUnitHandle(System,10,unitCode,tempUnit)
if unitType=='DM01' then
set Sandback=tempUnit
endif
call FlushChildHashtable(System,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set tempUnit=null
endfunction
function Trig_CreepRegion_Actions takes nothing returns nothing
local timer t
local integer unitType=GetUnitTypeId(GetTriggerUnit())
local integer unitCode
local unit tempUnit
local integer loopA
set loopA=1
loop
exitwhen loopA>udg_regionI
set tempUnit=LoadUnitHandle(System,10,loopA)
if(GetTriggerUnit()==tempUnit)then
set unitCode=loopA
exitwhen true
endif
set loopA=loopA+1
endloop
set t=CreateTimer()
call SaveInteger(System,GetHandleId(t),$FAD24066,unitType)
call SaveInteger(System,GetHandleId(t),$4F17DB0B,unitCode)
call TimerStart(t,S2R(EXExecuteScript("(require'jass.slk').unit["+I2S(unitType)+"].points")),false,function Trig_CreepRegion_Timer)
set t=null
set tempUnit=null
endfunction
function InitTrig_CreepRegion takes nothing returns nothing
set gg_trg_CreepRegion=CreateTrigger()
call TriggerAddAction(gg_trg_CreepRegion,function Trig_CreepRegion_Actions)
endfunction
function MonsterRegen1 takes nothing returns nothing
local integer loopA=0
local integer tempI=15
local integer tempI2=0
local real tempX
local real tempY
local unit u
local integer g=s__party_create()
local integer p
local real UnitHP
if LoadInteger(udg_Hash,999,$3862CC76)<=30 then
loop
exitwhen GetExpiredTimer()==Room[loopA]
set loopA=loopA+1
endloop
set p=loopA
set tempX=GetRectCenterX(TraningRoom[p])
set tempY=GetRectCenterY(TraningRoom[p])
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1500,null)
loop
set u=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),u)
exitwhen u==null
if GetUnitTypeId(u)=='wv00' and UnitAlive(u)then
set tempI=tempI-1
endif
endloop
set loopA=0
loop
exitwhen loopA==tempI
set loopA=loopA+1
set u=CreateUnit(Player(12),'wv00',tempX,tempY,270)
call SetUnitUserData(u,90)
set tempI2=LoadInteger(udg_Hash,999,$3862CC76)
if tempI2==1 then
set tempI2=1
else
set tempI2=tempI2-1
endif
call DzSetUnitModel(u,LoadStr(udg_Hash,0,$28C8CC8E+tempI2))
call SetUnitState(u,ConvertUnitState(0x16),LoadReal(udg_Hash,0,$63E433C9+tempI2))
call SetUnitState(u,ConvertUnitState(0x52),1800)
call SetUnitState(u,ConvertUnitState(0x12),(((tempI2*(tempI2*0.5))*(20+difficulty*4))+((tempI2*tempI2)*8)+135)*(0.7+(difficulty*0.1)))
if tempI2<=5 then
set UnitHP=(500+((tempI2*(tempI2*1.5))*200)+((tempI2*(tempI2*1.5))*200))
elseif tempI2>5 and tempI2<=10 then
set UnitHP=(350+((tempI2*(tempI2*1.5))*200)+((tempI2*(tempI2*2))*200))
elseif tempI2>10 and tempI2<=15 then
set UnitHP=(100+((tempI2*(tempI2*1.5))*200)+((tempI2*(tempI2*2.5))*200))
elseif tempI2>15 and tempI2<=20 then
set UnitHP=(((tempI2*(tempI2*1.5))*200)+((tempI2*(tempI2*3))*200))
elseif tempI2>20 and tempI2<=25 then
set UnitHP=(((tempI2*(tempI2*1.5))*200)+((tempI2*(tempI2*3.25))*200))
elseif tempI2>25 and tempI2<=30 then
set UnitHP=(((tempI2*(tempI2*1.5))*200)+((tempI2*(tempI2*3.5))*250))
endif
set UnitHP=UnitHP*(0.6+(difficulty*0.2))
call SetUnitState(u,ConvertUnitState(1),UnitHP)
call SetUnitState(u,ConvertUnitState(0),GetUnitState(u,ConvertUnitState(1)))
call SetUnitState(u,ConvertUnitState(0x20),(5+(tempI2*5)+(tempI2*6))*(0.9+(difficulty*0.1)))
set tempI2=LoadInteger(udg_Hash,p,$B45CB0BF)
if tempI2==6 then
call SetUnitVertexColor(u,255,255,0,255)
endif
endloop
call TimerStart(Room[p],4,false,function MonsterRegen1)
endif
call s__party_deallocate((g))
set u=null
endfunction
function MonsterRegen2 takes nothing returns nothing
local integer tempI2=0
local real tempX
local real tempY
local unit u
local integer g=s__party_create()
local boolean groom=true
local integer loopA=0
local integer p
local real UnitHP
if LoadInteger(udg_Hash,999,$3862CC76)<=30 then
loop
exitwhen GetExpiredTimer()==Room[loopA]
set loopA=loopA+1
endloop
set p=loopA
set tempX=GetRectCenterX(TraningRoom[p])
set tempY=GetRectCenterY(TraningRoom[p])
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1500,null)
loop
set u=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),u)
exitwhen u==null
if GetUnitTypeId(u)=='wv00' and UnitAlive(u)then
set groom=false
endif
endloop
if groom then
set u=CreateUnit(Player(12),'wv00',tempX,tempY,270)
call SetUnitScale(u,3.5,1,1)
call SetUnitUserData(u,91)
set tempI2=LoadInteger(udg_Hash,999,$3862CC76)
if tempI2==1 then
set tempI2=1
else
set tempI2=tempI2-1
endif
call DzSetUnitModel(u,LoadStr(udg_Hash,0,$28C8CC8E+tempI2))
call SetUnitState(u,ConvertUnitState(0x16),LoadReal(udg_Hash,0,$63E433C9+tempI2))
call SetUnitState(u,ConvertUnitState(0x52),1800)
call SetUnitState(u,ConvertUnitState(0x12),(((tempI2*(tempI2*0.5))*(20+difficulty*4))+((tempI2*tempI2)*8)+135)*(0.7+(difficulty*0.1))*2)
if tempI2<=5 then
set UnitHP=(500+((tempI2*(tempI2*1.5))*200)+((tempI2*(tempI2*1.5))*200))*5.5
elseif tempI2>5 and tempI2<=10 then
set UnitHP=(350+((tempI2*(tempI2*1.5))*200)+((tempI2*(tempI2*2))*200))*5.5
elseif tempI2>10 and tempI2<=15 then
set UnitHP=(100+((tempI2*(tempI2*1.5))*200)+((tempI2*(tempI2*2.5))*200))*5.5
elseif tempI2>15 and tempI2<=20 then
set UnitHP=(((tempI2*(tempI2*1.5))*200)+((tempI2*(tempI2*3))*200))*5.5
elseif tempI2>20 and tempI2<=25 then
set UnitHP=(((tempI2*(tempI2*1.5))*200)+((tempI2*(tempI2*3.25))*200))*5.5
elseif tempI2>25 and tempI2<=30 then
set UnitHP=(((tempI2*(tempI2*1.5))*200)+((tempI2*(tempI2*3.5))*250))*5.5
endif
set UnitHP=UnitHP*(0.6+(difficulty*0.2))
call SetUnitState(u,ConvertUnitState(1),UnitHP)
call SetUnitState(u,ConvertUnitState(0),GetUnitState(u,ConvertUnitState(1)))
call SetUnitState(u,ConvertUnitState(0x20),((5+(tempI2*5)+(tempI2*6))*(0.9+(difficulty*0.1)))*1.05)
set tempI2=LoadInteger(udg_Hash,p,$B45CB0BF)
if tempI2==6 then
call SetUnitVertexColor(u,255,255,0,255)
endif
endif
call TimerStart(Room[p],4,false,function MonsterRegen2)
endif
call s__party_deallocate((g))
set u=null
endfunction
function RoomClear takes integer p returns nothing
local integer g=s__party_create()
local unit c
local real tempX=GetRectCenterX(TraningRoom[p])
local real tempY=GetRectCenterY(TraningRoom[p])
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1500,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if GetUnitTypeId(c)=='wv00' then
call RemoveUnit(c)
endif
endloop
call s__party_deallocate((g))
set c=null
endfunction
function Tower takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit c=LoadUnitHandle(udg_Hash,GetHandleId(t),2)
local unit d
local real stage=LoadReal(udg_Hash,GetHandleId(t),0)
local integer g=s__party_create()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),1)
local real tempX=GetRectCenterX(TraningRoom[p])
local real tempY=GetRectCenterY(TraningRoom[p])
local integer tempI2
local integer tempI3
local integer tempI4
local boolean outcheck=false
local boolean towerOut=LoadBoolean(udg_Hash,p,$A694F677)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1500,null)
loop
set d=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),d)
exitwhen d==null
if d==Charcter[p]then
set outcheck=true
endif
endloop
if not towerOut then
set outcheck=false
endif
if stage==0 then
if not UnitAlive(c)then
set tempI2=LoadInteger(udg_Hash,p,$C8ADDEFD)
if tempI2==70 then
call StatUP(p,(10+(tempI2*2)),"체력")
call StatUP(p,(10+(tempI2*2)),"주스탯")
call GivenExp(1000+(tempI2*1000),p)
if LoadBoolean(System,p,$D163EB76)then
call GivenGold(12000+(tempI2*2000),p,Charcter[p])
else
call GivenGold(5000+(tempI2*750),p,Charcter[p])
endif
if LoadBoolean(System,p,$D163EB76)then
set tempI3=LoadInteger(System,p,$FC009EBA)-1
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cffFFA2A2[시스템] - 칼리 각성까지.... "+I2S(tempI3)+"층")
if tempI3==0 then
set invenClick[p]=false
set tempI4=0
loop
exitwhen tempI4>31
if LoadInteger(Hash,p-1,$DA437F80+tempI4)=='R009' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(tempI4)+"/"+I2S('U008'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",tempI4),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",tempI4),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set tempI4=tempI4+1
endloop
call SaveBoolean(System,p,$D163EB76,false)
endif
call SaveInteger(System,p,$FC009EBA,tempI3)
endif
set tempI3=LoadInteger(udg_Hash,p,$E32CD36C)+(10+(tempI2*2))
call SaveInteger(udg_Hash,p,$C8ADDEFD,tempI2+1)
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cffffa500[시스템] - "+I2S(tempI2)+"층 도전 성공! 탑을 제패하였다.")
call EXSetAbilityString(TowerStat[p],1,ABILITY_DATA_UBERTIP,"|cffffa500탑을 올라 자신의 강함을 시험해보세요\n탑에 오르는것에 성공했을경우 올스탯과 골드 경험치를 획득할수있습니다.\n\n10 + (층 수 * 2)의 체력 스탯과 주스탯\n1000 + (층 수 * 1000)의 경험치\n25층 이하일경우 :\n3000 + (층 수 * 500)의 골드\n25층 이상일경우 :\n5000 + (층 수 * 750)의 골드\n\n현재 층 수 : (70/70)\n획득한 스탯 : "+I2S(tempI3))
call SetPlayerAbilityAvailable(Player(p-1),TowerStat[p],true)
call SaveBoolean(udg_Hash,p,$A694F677,false)
call PauseTimer(t)
call DestroyTimer(t)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cffffa500[시스템] - "+I2S(tempI2)+"층 도전 성공! 3초후 다음층 자동도전.")
call SaveInteger(udg_Hash,p,$C8ADDEFD,tempI2+1)
call SaveReal(udg_Hash,GetHandleId(t),0,3)
endif
call StatUP(p,(10+(tempI2*2)),"체력")
call StatUP(p,(10+(tempI2*2)),"주스탯")
call GivenExp(1000+(tempI2*1000),p)
if LoadBoolean(System,p,$D163EB76)then
if tempI2<=25 then
call GivenGold(5000+(tempI2*750),p,Charcter[p])
else
call GivenGold(10000+(tempI2*1500),p,Charcter[p])
endif
else
if tempI2<=25 then
call GivenGold(3000+(tempI2*500),p,Charcter[p])
else
call GivenGold(6000+(tempI2*1000),p,Charcter[p])
endif
endif
if LoadBoolean(System,p,$D163EB76)then
set tempI3=LoadInteger(System,p,$FC009EBA)-1
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cffFFA2A2[시스템] - 칼리 각성까지.... "+I2S(tempI3)+"층")
if tempI3==0 then
set invenClick[p]=false
set tempI2=0
loop
exitwhen tempI2>31
if LoadInteger(Hash,p-1,$DA437F80+tempI2)=='R009' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(tempI2)+"/"+I2S('U008'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",tempI2),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",tempI2),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set tempI2=tempI2+1
endloop
call SaveBoolean(System,p,$D163EB76,false)
endif
call SaveInteger(System,p,$FC009EBA,tempI3)
endif
set tempI3=LoadInteger(udg_Hash,p,$E32CD36C)+(10+(tempI2*2))
call SaveInteger(udg_Hash,p,$E32CD36C,tempI3)
call EXSetAbilityString(TowerStat[p],1,ABILITY_DATA_UBERTIP,"|cffffa500탑을 올라 자신의 강함을 시험해보세요\n탑에 오르는것에 성공했을경우 올스탯과 골드 경험치를 획득할수있습니다.\n\n10 + (층 수 * 2)의 체력 스탯과 주스탯\n1000 + (층 수 * 1000)의 경험치\n25층 이하일경우 :\n3000 + (층 수 * 500)의 골드\n25층 이상일경우 :\n6000 + (층 수 * 750)의 골드\n\n현재 층 수 : ("+I2S(tempI2+1)+"/70)\n획득한 스탯 : "+I2S(tempI3))
endif
else
set stage=stage-0.03
if stage<=0 then
call SaveReal(udg_Hash,GetHandleId(t),0,0)
set c=CreateUnit(Player(12),'EN49',tempX,tempY,270)
call SetUnitUserData(c,90)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_AZ_Goods_Blink(3).mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,3)
call DestroyEffect(bj_lastCreatedEffect)
call SaveUnitHandle(udg_Hash,GetHandleId(t),2,c)
set tempI2=LoadInteger(udg_Hash,p,$C8ADDEFD)
call SetUnitState(c,ConvertUnitState(0x12),(-500+(tempI2*3500)+((tempI2*R2I(tempI2*0.5))*160))*(0.6+difficulty*0.1))
call SetUnitState(c,ConvertUnitState(1),(40000+(tempI2*90000)+((tempI2*tempI2)*11500))*(0.6+difficulty*0.1))
call SetUnitState(c,ConvertUnitState(0),GetUnitState(c,ConvertUnitState(1)))
call SetUnitState(c,ConvertUnitState(0x20),((65+(tempI2*15))*(0.6+difficulty*0.1)))
else
call SaveReal(udg_Hash,GetHandleId(t),0,stage)
endif
endif
if outcheck then
call TimerStart(t,0.03,false,function Tower)
else
call SetPlayerAbilityAvailable(Player(p-1),TowerStat[p],true)
call SaveBoolean(udg_Hash,p,$A694F677,false)
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,3)
call DestroyEffect(bj_lastCreatedEffect)
call RemoveUnit(c)
call PauseTimer(t)
call DestroyTimer(t)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|CFF808080도전 실패.")
endif
call s__party_deallocate((g))
set c=null
set t=null
set d=null
endfunction
function LightTower takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit c=LoadUnitHandle(udg_Hash,GetHandleId(t),2)
local unit d
local real stage=LoadReal(udg_Hash,GetHandleId(t),0)
local integer g=s__party_create()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),1)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),3)
local real tempX=GetRectCenterX(TraningRoom[p])
local real tempY=GetRectCenterY(TraningRoom[p])
local integer tempI2
local integer tempI3
local boolean outcheck=false
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1500,null)
loop
set d=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),d)
exitwhen d==null
if d==Charcter[p]then
set outcheck=true
endif
endloop
if stage==0 then
if not UnitAlive(c)then
call itemgiven(p,Charcter[p],'I01Y')
set tempI2=LoadInteger(udg_Hash,p,$7C442681)+1
call SaveInteger(udg_Hash,p,$7C442681,tempI2)
call SaveBoolean(udg_Hash,p,$A694F677,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cffffa500[시스템] - "+I2S(tempI2)+"번째 성수의 파편을 얻었다.")
call IncUnitAbilityLevel(u,'A01S')
call SetPlayerAbilityAvailable(Player(p-1),'A01S',true)
call PauseTimer(t)
call DestroyTimer(t)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
endif
else
set stage=stage-0.03
if stage<=0 then
call SaveReal(udg_Hash,GetHandleId(t),0,0)
set c=CreateUnit(Player(12),'EN46',tempX,tempY,270)
call SetUnitUserData(c,90)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_AZ_Goods_Blink(3).mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,3)
call DestroyEffect(bj_lastCreatedEffect)
call SaveUnitHandle(udg_Hash,GetHandleId(t),2,c)
set tempI2=LoadInteger(udg_Hash,p,$7C442681)
if tempI2==0 then
set tempI2=1
elseif tempI2>=1 then
set tempI2=tempI2*6
endif
call SetUnitState(c,ConvertUnitState(0x12),(1000+(tempI2*2000)+((tempI2*R2I(tempI2*0.5))*150))*(0.6+difficulty*0.1))
call SetUnitState(c,ConvertUnitState(1),(40000+(tempI2*70000)+((tempI2*tempI2)*8000))*(0.6+difficulty*0.1))
call SetUnitState(c,ConvertUnitState(0),GetUnitState(c,ConvertUnitState(1)))
call SetUnitState(c,ConvertUnitState(0x20),((35+(tempI2*7))*(0.6+difficulty*0.1)))
else
call SaveReal(udg_Hash,GetHandleId(t),0,stage)
endif
endif
if outcheck then
call TimerStart(t,0.03,false,function LightTower)
else
call SaveBoolean(udg_Hash,p,$A694F677,false)
call SetPlayerAbilityAvailable(Player(p-1),'A01S',true)
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,3)
call DestroyEffect(bj_lastCreatedEffect)
call RemoveUnit(c)
call PauseTimer(t)
call DestroyTimer(t)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|CFF808080도전 실패.")
endif
call s__party_deallocate((g))
set c=null
set t=null
set u=null
set d=null
endfunction
function Supply takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit c=LoadUnitHandle(udg_Hash,GetHandleId(t),2)
local unit d
local real stage=LoadReal(udg_Hash,GetHandleId(t),0)
local integer g=s__party_create()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),1)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),3)
local integer lv=LoadInteger(udg_Hash,GetHandleId(t),4)
local real tempX=GetRectCenterX(TraningRoom[p])
local real tempY=GetRectCenterY(TraningRoom[p])
local integer tempI2
local integer tempI3
local boolean outcheck=false
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1500,null)
loop
set d=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),d)
exitwhen d==null
if d==Charcter[p]then
set outcheck=true
endif
endloop
if stage==0 then
if not UnitAlive(c)then
if lv==3 then
call SetUnitAbilityLevel(u,'A048',3)
call itemgiven(p,Charcter[p],'I02U')
elseif lv==15 then
call SetUnitAbilityLevel(u,'A049',3)
call itemgiven(p,Charcter[p],'I02T')
elseif lv==40 then
call SetUnitAbilityLevel(u,'A04A',3)
call itemgiven(p,Charcter[p],'I02S')
elseif lv==60 then
call SetUnitAbilityLevel(u,'A04B',3)
call itemgiven(p,Charcter[p],'I02R')
endif
call SaveBoolean(udg_Hash,p,$A694F677,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cffffa500[시스템] - 보급품 심사에 통과했다.")
call PauseTimer(t)
call DestroyTimer(t)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
endif
else
set stage=stage-0.03
if stage<=0 then
call SaveReal(udg_Hash,GetHandleId(t),0,0)
set c=CreateUnit(Player(12),'EN45',tempX,tempY,270)
call SetUnitUserData(c,90)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_AZ_Goods_Blink(3).mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,3)
call DestroyEffect(bj_lastCreatedEffect)
call SaveUnitHandle(udg_Hash,GetHandleId(t),2,c)
call SetUnitState(c,ConvertUnitState(0x12),(-500+(lv*3500)+((lv*R2I(lv*0.5))*160))*(0.6+difficulty*0.1))
call SetUnitState(c,ConvertUnitState(1),(40000+(lv*90000)+((lv*lv)*11500))*(0.6+difficulty*0.1))
call SetUnitState(c,ConvertUnitState(0),GetUnitState(c,ConvertUnitState(1)))
call SetUnitState(c,ConvertUnitState(0x20),((65+(lv*15))*(0.6+difficulty*0.1)))
else
call SaveReal(udg_Hash,GetHandleId(t),0,stage)
endif
endif
if outcheck then
call TimerStart(t,0.03,false,function Supply)
else
call SaveBoolean(udg_Hash,p,$A694F677,false)
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,3)
call DestroyEffect(bj_lastCreatedEffect)
call RemoveUnit(c)
call PauseTimer(t)
call DestroyTimer(t)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|CFF808080도전 실패.")
endif
call s__party_deallocate((g))
set c=null
set t=null
set u=null
set d=null
endfunction
function Knight takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit c=LoadUnitHandle(udg_Hash,GetHandleId(t),2)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),0)
local integer g=s__party_create()
local real tempX=GetRectCenterX(gg_rct_MemoryMonster)
local real tempY=GetRectCenterY(gg_rct_MemoryMonster)
local integer tempI2=LoadInteger(udg_Hash,GetHandleId(t),1)
local integer loopA
local integer a
local integer b
call SaveInteger(udg_Hash,GetHandleId(t),0,stage-1)
if stage==120 then
set c=CreateUnit(Player(12),'EN48',tempX,tempY,270)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_AZ_Goods_Blink(3).mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,3)
call DestroyEffect(bj_lastCreatedEffect)
call SaveUnitHandle(udg_Hash,GetHandleId(t),2,c)
call BuffCall(c,'BS99',120,false,false)
if tempI2>=10 then
set tempI2=tempI2+7
endif
call SetUnitState(c,ConvertUnitState(0x12),(500+(tempI2*1500)+((tempI2*R2I(tempI2*0.5))*150))*(0.6+difficulty*0.1))
call SetUnitState(c,ConvertUnitState(1),(40000+(tempI2*70000)+((tempI2*tempI2)*8000))*(0.6+difficulty*0.1))
call SetUnitState(c,ConvertUnitState(0),GetUnitState(c,ConvertUnitState(1)))
call SetUnitState(c,ConvertUnitState(0x20),((35+(tempI2*5))*(0.6+difficulty*0.1)))
endif
if not UnitAlive(c)then
set loopA=0
call SaveBoolean(udg_Hash,0,$4C678A98,false)
call SetPlayerAbilityAvailable(Player(9),'A01N',true)
call SetPlayerAbilityAvailable(Player(9),'A01M',true)
call SetPlayerAbilityAvailable(Player(9),'A01P',true)
call SetPlayerAbilityAvailable(Player(9),'A01O',true)
loop
exitwhen loopA>=Playint
set loopA=loopA+1
call DisplayTimedTextToPlayer(Player(PP[loopA]-1),0,0,5,"|cffffa500[시스템] - "+I2S(tempI2)+"단계 도전성공. "+I2S(tempI2*3000)+"골드 지급")
call GivenGold(tempI2*3000,PP[loopA],Charcter[PP[loopA]])
endloop
call PauseTimer(t)
call DestroyTimer(t)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
elseif UnitAlive(c)then
if stage<=0 or not LoadBoolean(udg_Hash,0,$4C678A98)then
call SaveBoolean(udg_Hash,0,$4C678A98,false)
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,3)
call DestroyEffect(bj_lastCreatedEffect)
call SetUnitVertexColor(c,0,0,0,0)
call KillUnit(c)
call PauseTimer(t)
call DestroyTimer(t)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call SetPlayerAbilityAvailable(Player(9),'A01N',true)
call SetPlayerAbilityAvailable(Player(9),'A01M',true)
call SetPlayerAbilityAvailable(Player(9),'A01P',true)
call SetPlayerAbilityAvailable(Player(9),'A01O',true)
set loopA=0
loop
exitwhen loopA>=Playint
set loopA=loopA+1
call DisplayTimedTextToPlayer(Player(PP[loopA]-1),0,0,5,"|CFF808080도전 실패.")
endloop
endif
endif
call TimerStart(t,1,false,function Knight)
call s__party_deallocate((g))
set c=null
set t=null
endfunction
function Trent takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit c=LoadUnitHandle(udg_Hash,GetHandleId(t),2)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),0)
local integer g=s__party_create()
local real tempX=GetRectCenterX(gg_rct_MemoryMonster)
local real tempY=GetRectCenterY(gg_rct_MemoryMonster)
local integer tempI2=LoadInteger(udg_Hash,0,$7653121A)
local integer loopA
call SaveInteger(udg_Hash,GetHandleId(t),0,stage-1)
if stage==120 then
set c=CreateUnit(Player(12),'EN47',tempX,tempY,270)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_AZ_Goods_Blink(3).mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,3)
call DestroyEffect(bj_lastCreatedEffect)
call SaveUnitHandle(udg_Hash,GetHandleId(t),2,c)
call BuffCall(c,'BS99',120,false,false)
call SetUnitState(c,ConvertUnitState(0x12),(1000+(tempI2*2000)+((tempI2*R2I(tempI2*0.5))*150))*(0.6+difficulty*0.1))
call SetUnitState(c,ConvertUnitState(1),(40000+(tempI2*70000)+((tempI2*tempI2)*5000))*(0.6+difficulty*0.1))
call SetUnitState(c,ConvertUnitState(0),GetUnitState(c,ConvertUnitState(1)))
call SetUnitState(c,ConvertUnitState(0x20),((35+(tempI2*10))*(0.6+difficulty*0.1)))
endif
if not UnitAlive(c)then
call SaveInteger(udg_Hash,0,$7653121A,tempI2+1)
call SaveBoolean(udg_Hash,0,$C4CBCF07,false)
call SetPlayerAbilityAvailable(Player(9),'A01N',true)
call SetPlayerAbilityAvailable(Player(9),'A01M',true)
call SetPlayerAbilityAvailable(Player(9),'A01P',true)
call SetPlayerAbilityAvailable(Player(9),'A01O',true)
set loopA=0
loop
exitwhen loopA>=Playint
set loopA=loopA+1
call DisplayTimedTextToPlayer(Player(PP[loopA]-1),0,0,5,"|cffffa500[시스템] - 트렌트 처치 성공 아티팩트 선택권 지급")
set ArtChoiceTicket[PP[loopA]]=ArtChoiceTicket[PP[loopA]]+1
call SetPlayerStateBJ(Player(PP[loopA]-1),ConvertPlayerState(2),ArtChoiceTicket[PP[loopA]])
if ArtChoiceTicket[PP[loopA]]>=1 and ArtChoiceTicketU[PP[loopA]]==null then
set bj_lastCreatedUnit=CreateUnit(Player(PP[loopA]-1),'sys4',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),0)
set ArtChoiceTicketU[PP[loopA]]=bj_lastCreatedUnit
endif
endloop
call PauseTimer(t)
call DestroyTimer(t)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
elseif UnitAlive(c)then
if stage<=0 or not LoadBoolean(udg_Hash,0,$C4CBCF07)then
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl",tempX,tempY)
call EXSetEffectSize(bj_lastCreatedEffect,3)
call DestroyEffect(bj_lastCreatedEffect)
call SetUnitVertexColor(c,0,0,0,0)
call KillUnit(c)
call PauseTimer(t)
call DestroyTimer(t)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call SaveBoolean(udg_Hash,0,$C4CBCF07,false)
call SetPlayerAbilityAvailable(Player(9),'A01N',true)
call SetPlayerAbilityAvailable(Player(9),'A01M',true)
call SetPlayerAbilityAvailable(Player(9),'A01P',true)
call SetPlayerAbilityAvailable(Player(9),'A01O',true)
set loopA=0
loop
exitwhen loopA>=Playint
set loopA=loopA+1
call DisplayTimedTextToPlayer(Player(PP[loopA]-1),0,0,5,"|CFF808080도전 실패.")
endloop
endif
endif
call TimerStart(t,1,false,function Trent)
call s__party_deallocate((g))
set c=null
set t=null
endfunction
function Trig_Room_Skill_Actions takes nothing returns nothing
local unit u=GetTriggerUnit()
local player pl=GetOwningPlayer(u)
local integer p=GetPlayerId(pl)+1
local integer skillcode=GetSpellAbilityId()
local timer t
local integer a
local real b
local integer tempI
local integer loopA
local boolean upgrade=false
if skillcode=='A00V' then
call RoomClear(p)
call TimerStart(Room[p],4,false,function MonsterRegen1)
endif
if skillcode=='A00X' then
call RoomClear(p)
call TimerStart(Room[p],4,false,function MonsterRegen2)
endif
if skillcode=='A00W' then
call RoomClear(p)
call PauseTimer(Room[p])
endif
if skillcode==TowerStat[p]and not LoadBoolean(udg_Hash,p,$A694F677)then
set tempI=LoadInteger(udg_Hash,p,$C8ADDEFD)
if tempI !=71 then
call DisplayTimedTextToPlayer(pl,0,0,5,"|cffFF0000[시스템] - 3초후 몬스터가 생성됩니다.")
set t=CreateTimer()
call TimerStart(t,0,false,function Tower)
call SaveReal(udg_Hash,GetHandleId(t),0,3)
call SaveInteger(udg_Hash,GetHandleId(t),1,p)
call SaveBoolean(udg_Hash,p,$A694F677,true)
call SetPlayerAbilityAvailable(Player(p-1),TowerStat[p],false)
endif
endif
if skillcode=='A010' then
call SaveBoolean(udg_Hash,p,$A694F677,false)
endif
if skillcode=='A00Y' then
set tempI=LoadInteger(udg_Hash,p,$B45CB0BF)
if tempI<=5 then
if WhatGold(20000,p)and GetUnitAbilityLevel(u,'A00Y')==1 then
set upgrade=true
set a=20000
call SaveInteger(udg_Hash,p,$9D8A16C2,140)
elseif WhatGold(50000,p)and GetUnitAbilityLevel(u,'A00Y')==2 then
set upgrade=true
set a=50000
call SaveInteger(udg_Hash,p,$9D8A16C2,196)
elseif WhatGold(90000,p)and GetUnitAbilityLevel(u,'A00Y')==3 then
set upgrade=true
set a=90000
call SaveInteger(udg_Hash,p,$9D8A16C2,274)
elseif WhatGold(160000,p)and GetUnitAbilityLevel(u,'A00Y')==4 then
set upgrade=true
set a=160000
call SaveInteger(udg_Hash,p,$9D8A16C2,383)
elseif WhatGold(300000,p)and GetUnitAbilityLevel(u,'A00Y')==5 then
set upgrade=true
set a=300000
if LoadInteger(udg_Hash,999,$3862CC76)>=15 then
call SaveInteger(udg_Hash,p,$9D8A16C2,638)
else
call SaveInteger(udg_Hash,p,$9D8A16C2,536)
endif
endif
endif
if upgrade then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffffa500[시스템] - 업그레이드 성공!")
call SetUnitAbilityLevel(u,'A00Y',GetUnitAbilityLevel(u,'A00Y')+1)
call SteelGold(a,p)
call SaveInteger(udg_Hash,p,$B45CB0BF,GetUnitAbilityLevel(u,'A00Y'))
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffFF0000[시스템] - 업그레이드에 실패했다.")
endif
endif
if skillcode=='A01S' and not LoadBoolean(udg_Hash,p,$A694F677)then
set tempI=LoadInteger(udg_Hash,p,$7C442681)
if tempI !=6 then
call DisplayTimedTextToPlayer(pl,0,0,5,"|cffFF0000[시스템] - 3초후 몬스터가 생성됩니다.")
set t=CreateTimer()
call TimerStart(t,0,false,function LightTower)
call SaveReal(udg_Hash,GetHandleId(t),0,3)
call SaveInteger(udg_Hash,GetHandleId(t),1,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),3,u)
call SaveBoolean(udg_Hash,p,$A694F677,true)
call SetPlayerAbilityAvailable(Player(p-1),'A01S',false)
endif
endif
if skillcode=='A048' then
if GetUnitAbilityLevel(u,'A048')==2 and not LoadBoolean(udg_Hash,p,$A694F677)then
call DisplayTimedTextToPlayer(pl,0,0,5,"|cffFF0000[시스템] - 3초후 몬스터가 생성됩니다.")
set t=CreateTimer()
call TimerStart(t,0,false,function Supply)
call SaveReal(udg_Hash,GetHandleId(t),0,3)
call SaveInteger(udg_Hash,GetHandleId(t),1,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),3,u)
call SaveInteger(udg_Hash,GetHandleId(t),4,3)
call SaveBoolean(udg_Hash,p,$A694F677,true)
endif
if GetUnitAbilityLevel(u,'A048')==1 and WhatGold(50000,p)then
call DisplayTimedTextToPlayer(pl,0,0,5,"|cffffa500[시스템] - 티켓 발행에 성공했다.")
call SetUnitAbilityLevel(u,'A048',2)
call SteelGold(50000,p)
endif
endif
if skillcode=='A049' then
if GetUnitAbilityLevel(u,'A049')==2 and not LoadBoolean(udg_Hash,p,$A694F677)then
call DisplayTimedTextToPlayer(pl,0,0,5,"|cffFF0000[시스템] - 3초후 몬스터가 생성됩니다.")
set t=CreateTimer()
call TimerStart(t,0,false,function Supply)
call SaveReal(udg_Hash,GetHandleId(t),0,3)
call SaveInteger(udg_Hash,GetHandleId(t),1,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),3,u)
call SaveInteger(udg_Hash,GetHandleId(t),4,15)
call SaveBoolean(udg_Hash,p,$A694F677,true)
endif
if GetUnitAbilityLevel(u,'A049')==1 and WhatGold(100000,p)then
call DisplayTimedTextToPlayer(pl,0,0,5,"|cffffa500[시스템] - 티켓 발행에 성공했다.")
call SetUnitAbilityLevel(u,'A049',2)
call SteelGold(100000,p)
endif
endif
if skillcode=='A04A' then
if GetUnitAbilityLevel(u,'A04A')==2 and not LoadBoolean(udg_Hash,p,$A694F677)then
call DisplayTimedTextToPlayer(pl,0,0,5,"|cffFF0000[시스템] - 3초후 몬스터가 생성됩니다.")
set t=CreateTimer()
call TimerStart(t,0,false,function Supply)
call SaveReal(udg_Hash,GetHandleId(t),0,3)
call SaveInteger(udg_Hash,GetHandleId(t),1,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),3,u)
call SaveInteger(udg_Hash,GetHandleId(t),4,40)
call SaveBoolean(udg_Hash,p,$A694F677,true)
endif
if GetUnitAbilityLevel(u,'A04A')==1 and WhatGold(300000,p)then
call DisplayTimedTextToPlayer(pl,0,0,5,"|cffffa500[시스템] - 티켓 발행에 성공했다.")
call SetUnitAbilityLevel(u,'A04A',2)
call SteelGold(300000,p)
endif
endif
if skillcode=='A04B' then
if GetUnitAbilityLevel(u,'A04B')==2 and not LoadBoolean(udg_Hash,p,$A694F677)then
call DisplayTimedTextToPlayer(pl,0,0,5,"|cffFF0000[시스템] - 3초후 몬스터가 생성됩니다.")
set t=CreateTimer()
call TimerStart(t,0,false,function Supply)
call SaveReal(udg_Hash,GetHandleId(t),0,3)
call SaveInteger(udg_Hash,GetHandleId(t),1,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),3,u)
call SaveInteger(udg_Hash,GetHandleId(t),4,60)
call SaveBoolean(udg_Hash,p,$A694F677,true)
endif
if GetUnitAbilityLevel(u,'A04B')==1 and WhatGold(500000,p)then
call DisplayTimedTextToPlayer(pl,0,0,5,"|cffffa500[시스템] - 티켓 발행에 성공했다.")
call SetUnitAbilityLevel(u,'A04B',2)
call SteelGold(500000,p)
endif
endif
if skillcode=='A01M' then
call SetPlayerAbilityAvailable(Player(9),'A01N',false)
call SetPlayerAbilityAvailable(Player(9),'A01M',false)
call SetPlayerAbilityAvailable(Player(9),'A01P',false)
call SetPlayerAbilityAvailable(Player(9),'A01O',false)
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,120)
call SaveInteger(udg_Hash,GetHandleId(t),1,LoadInteger(udg_Hash,0,$3E003FA5))
call SaveBoolean(udg_Hash,0,$4C678A98,true)
call TimerStart(t,0,false,function Knight)
endif
if skillcode=='A01N' then
call SetPlayerAbilityAvailable(Player(9),'A01N',false)
call SetPlayerAbilityAvailable(Player(9),'A01M',false)
call SetPlayerAbilityAvailable(Player(9),'A01P',false)
call SetPlayerAbilityAvailable(Player(9),'A01O',false)
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,120)
call SaveBoolean(udg_Hash,0,$C4CBCF07,true)
call TimerStart(t,0,false,function Trent)
endif
if skillcode=='A01O' then
set tempI=LoadInteger(udg_Hash,0,$46FBB73B)
if tempI>=20 then
set tempI=20
endif
set a=LoadInteger(udg_Hash,0,$3E003FA5)+1
if a<=tempI and a<=20 then
call SaveInteger(udg_Hash,0,$3E003FA5,a)
else
set a=LoadInteger(udg_Hash,0,$3E003FA5)
endif
set loopA=0
loop
exitwhen loopA>=Playint
set loopA=loopA+1
call DisplayTimedTextToPlayer(Player(PP[loopA]-1),0,0,30,"현재 기사 단장의 단계 : ("+I2S(a)+"/"+I2S(tempI)+")")
endloop
endif
if skillcode=='A01P' then
set tempI=LoadInteger(udg_Hash,0,$46FBB73B)
if tempI>=20 then
set tempI=20
endif
set a=LoadInteger(udg_Hash,0,$3E003FA5)-1
if a>=1 then
call SaveInteger(udg_Hash,0,$3E003FA5,a)
else
set a=LoadInteger(udg_Hash,0,$3E003FA5)
endif
set loopA=0
loop
exitwhen loopA>=Playint
set loopA=loopA+1
call DisplayTimedTextToPlayer(Player(PP[loopA]-1),0,0,30,"현재 기사 단장의 단계 : ("+I2S(a)+"/"+I2S(tempI)+")")
endloop
endif
if skillcode=='A01Q' then
call SaveBoolean(udg_Hash,0,$4C678A98,false)
call SaveBoolean(udg_Hash,0,$C4CBCF07,false)
endif
set t=null
set u=null
set pl=null
endfunction
function InitTrig_Room_Skill takes nothing returns nothing
set gg_trg_Room_Skill=CreateTrigger()
call TriggerAddAction(gg_trg_Room_Skill,function Trig_Room_Skill_Actions)
endfunction
function DanWP takes nothing returns nothing
local timer t=GetExpiredTimer()
local item tempItem=null
local item given
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local player pl=Player(p-1)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local integer typ=LoadInteger(udg_Hash,GetHandleId(t),$FA0E1FE7)
local integer tempI2
local boolean upgrade=false
if UnitAlive(Charcter[p])then
set tempItem=itemTypeCheckLv(u,1)
if u==Charcter[p]and tempItem==null then
set u=chango[p]
set tempItem=itemTypeCheckLv(u,1)
elseif u==chango[p]and tempItem==null then
set u=Charcter[p]
set tempItem=itemTypeCheckLv(u,1)
endif
if WhatGold(5000,p)and typ==0 and itemCheckCharge(p,'I00F','I00N','0000',5,2,0)and GetItemLevel(tempItem)==1 then
call SteelGold(5000,p)
call itemCheckChargeM(p,'I00F',5)
call itemCheckChargeM(p,'I00N',2)
if GetItemTypeId(tempItem)=='I200' then
set tempI2='I300'
elseif GetItemTypeId(tempItem)=='I201' then
set tempI2='I301'
elseif GetItemTypeId(tempItem)=='I202' then
set tempI2='I302'
elseif GetItemTypeId(tempItem)=='I203' then
set tempI2='I303'
elseif GetItemTypeId(tempItem)=='I204' then
set tempI2='I304'
elseif GetItemTypeId(tempItem)=='I235' then
set tempI2='I335'
elseif GetItemTypeId(tempItem)=='I236' then
set tempI2='I336'
elseif GetItemTypeId(tempItem)=='I237' then
set tempI2='I337'
elseif GetItemTypeId(tempItem)=='I238' then
set tempI2='I338'
elseif GetItemTypeId(tempItem)=='I224' then
set tempI2='I324'
elseif GetItemTypeId(tempItem)=='I240' then
set tempI2='I340'
elseif GetItemTypeId(tempItem)=='I241' then
set tempI2='I341'
elseif GetItemTypeId(tempItem)=='I242' then
set tempI2='I342'
elseif GetItemTypeId(tempItem)=='I243' then
set tempI2='I343'
elseif GetItemTypeId(tempItem)=='I246' then
set tempI2='I346'
elseif GetItemTypeId(tempItem)=='I249' then
set tempI2='I349'
elseif GetItemTypeId(tempItem)=='I253' then
set tempI2='I353'
endif
set upgrade=true
elseif WhatGold(20000,p)and typ==0 and itemCheckCharge(p,'I00O','I00P','0000',5,2,0)and GetItemLevel(tempItem)==2 then
call SteelGold(20000,p)
call itemCheckChargeM(p,'I00O',5)
call itemCheckChargeM(p,'I00P',2)
if GetItemTypeId(tempItem)=='I300' then
set tempI2='I400'
elseif GetItemTypeId(tempItem)=='I301' then
set tempI2='I401'
elseif GetItemTypeId(tempItem)=='I302' then
set tempI2='I402'
elseif GetItemTypeId(tempItem)=='I303' then
set tempI2='I403'
elseif GetItemTypeId(tempItem)=='I304' then
set tempI2='I404'
elseif GetItemTypeId(tempItem)=='I335' then
set tempI2='I435'
elseif GetItemTypeId(tempItem)=='I336' then
set tempI2='I436'
elseif GetItemTypeId(tempItem)=='I337' then
set tempI2='I437'
elseif GetItemTypeId(tempItem)=='I338' then
set tempI2='I438'
elseif GetItemTypeId(tempItem)=='I324' then
set tempI2='I424'
elseif GetItemTypeId(tempItem)=='I340' then
set tempI2='I440'
elseif GetItemTypeId(tempItem)=='I341' then
set tempI2='I441'
elseif GetItemTypeId(tempItem)=='I342' then
set tempI2='I442'
elseif GetItemTypeId(tempItem)=='I343' then
set tempI2='I443'
elseif GetItemTypeId(tempItem)=='I346' then
set tempI2='I446'
elseif GetItemTypeId(tempItem)=='I349' then
set tempI2='I449'
elseif GetItemTypeId(tempItem)=='I353' then
set tempI2='I453'
endif
set upgrade=true
elseif WhatGold(40000,p)and typ==0 and itemCheckCharge(p,'I00Q','I00R','0000',8,2,0)and GetItemLevel(tempItem)==3 then
call SteelGold(40000,p)
call itemCheckChargeM(p,'I00Q',8)
call itemCheckChargeM(p,'I00R',2)
if GetItemTypeId(tempItem)=='I400' then
set tempI2='I500'
elseif GetItemTypeId(tempItem)=='I401' then
set tempI2='I501'
elseif GetItemTypeId(tempItem)=='I402' then
set tempI2='I502'
elseif GetItemTypeId(tempItem)=='I403' then
set tempI2='I503'
elseif GetItemTypeId(tempItem)=='I404' then
set tempI2='I504'
elseif GetItemTypeId(tempItem)=='I435' then
set tempI2='I535'
elseif GetItemTypeId(tempItem)=='I436' then
set tempI2='I536'
elseif GetItemTypeId(tempItem)=='I437' then
set tempI2='I537'
elseif GetItemTypeId(tempItem)=='I438' then
set tempI2='I538'
elseif GetItemTypeId(tempItem)=='I424' then
set tempI2='I524'
elseif GetItemTypeId(tempItem)=='I440' then
set tempI2='I540'
elseif GetItemTypeId(tempItem)=='I441' then
set tempI2='I541'
elseif GetItemTypeId(tempItem)=='I442' then
set tempI2='I542'
elseif GetItemTypeId(tempItem)=='I443' then
set tempI2='I543'
elseif GetItemTypeId(tempItem)=='I446' then
set tempI2='I546'
elseif GetItemTypeId(tempItem)=='I449' then
set tempI2='I549'
elseif GetItemTypeId(tempItem)=='I453' then
set tempI2='I553'
endif
set upgrade=true
elseif WhatGold(60000,p)and typ==1 and GetItemLevel(tempItem)==1 then
call SteelGold(60000,p)
if GetItemTypeId(tempItem)=='I200' then
set tempI2='I300'
elseif GetItemTypeId(tempItem)=='I201' then
set tempI2='I301'
elseif GetItemTypeId(tempItem)=='I202' then
set tempI2='I302'
elseif GetItemTypeId(tempItem)=='I203' then
set tempI2='I303'
elseif GetItemTypeId(tempItem)=='I204' then
set tempI2='I304'
elseif GetItemTypeId(tempItem)=='I235' then
set tempI2='I335'
elseif GetItemTypeId(tempItem)=='I236' then
set tempI2='I336'
elseif GetItemTypeId(tempItem)=='I237' then
set tempI2='I337'
elseif GetItemTypeId(tempItem)=='I238' then
set tempI2='I338'
elseif GetItemTypeId(tempItem)=='I224' then
set tempI2='I324'
elseif GetItemTypeId(tempItem)=='I240' then
set tempI2='I340'
elseif GetItemTypeId(tempItem)=='I241' then
set tempI2='I341'
elseif GetItemTypeId(tempItem)=='I242' then
set tempI2='I342'
elseif GetItemTypeId(tempItem)=='I243' then
set tempI2='I343'
elseif GetItemTypeId(tempItem)=='I246' then
set tempI2='I346'
elseif GetItemTypeId(tempItem)=='I249' then
set tempI2='I349'
elseif GetItemTypeId(tempItem)=='I253' then
set tempI2='I353'
endif
set upgrade=true
elseif WhatGold(180000,p)and typ==1 and GetItemLevel(tempItem)==2 then
call SteelGold(180000,p)
if GetItemTypeId(tempItem)=='I300' then
set tempI2='I400'
elseif GetItemTypeId(tempItem)=='I301' then
set tempI2='I401'
elseif GetItemTypeId(tempItem)=='I302' then
set tempI2='I402'
elseif GetItemTypeId(tempItem)=='I303' then
set tempI2='I403'
elseif GetItemTypeId(tempItem)=='I304' then
set tempI2='I404'
elseif GetItemTypeId(tempItem)=='I335' then
set tempI2='I435'
elseif GetItemTypeId(tempItem)=='I336' then
set tempI2='I436'
elseif GetItemTypeId(tempItem)=='I337' then
set tempI2='I437'
elseif GetItemTypeId(tempItem)=='I338' then
set tempI2='I438'
elseif GetItemTypeId(tempItem)=='I324' then
set tempI2='I424'
elseif GetItemTypeId(tempItem)=='I340' then
set tempI2='I440'
elseif GetItemTypeId(tempItem)=='I341' then
set tempI2='I441'
elseif GetItemTypeId(tempItem)=='I342' then
set tempI2='I442'
elseif GetItemTypeId(tempItem)=='I343' then
set tempI2='I443'
elseif GetItemTypeId(tempItem)=='I346' then
set tempI2='I446'
elseif GetItemTypeId(tempItem)=='I349' then
set tempI2='I449'
elseif GetItemTypeId(tempItem)=='I353' then
set tempI2='I453'
endif
set upgrade=true
elseif WhatGold(350000,p)and typ==1 and GetItemLevel(tempItem)==3 then
call SteelGold(350000,p)
if GetItemTypeId(tempItem)=='I400' then
set tempI2='I500'
elseif GetItemTypeId(tempItem)=='I401' then
set tempI2='I501'
elseif GetItemTypeId(tempItem)=='I402' then
set tempI2='I502'
elseif GetItemTypeId(tempItem)=='I403' then
set tempI2='I503'
elseif GetItemTypeId(tempItem)=='I404' then
set tempI2='I504'
elseif GetItemTypeId(tempItem)=='I435' then
set tempI2='I535'
elseif GetItemTypeId(tempItem)=='I436' then
set tempI2='I536'
elseif GetItemTypeId(tempItem)=='I437' then
set tempI2='I537'
elseif GetItemTypeId(tempItem)=='I438' then
set tempI2='I538'
elseif GetItemTypeId(tempItem)=='I424' then
set tempI2='I524'
elseif GetItemTypeId(tempItem)=='I440' then
set tempI2='I540'
elseif GetItemTypeId(tempItem)=='I441' then
set tempI2='I541'
elseif GetItemTypeId(tempItem)=='I442' then
set tempI2='I542'
elseif GetItemTypeId(tempItem)=='I443' then
set tempI2='I543'
elseif GetItemTypeId(tempItem)=='I446' then
set tempI2='I546'
elseif GetItemTypeId(tempItem)=='I449' then
set tempI2='I549'
elseif GetItemTypeId(tempItem)=='I453' then
set tempI2='I553'
endif
set upgrade=true
elseif WhatGold(100000,p)and itemCheckCharge(p,'I00S','I00T','I00W',5,3,1)and GetItemLevel(tempItem)==4 then
call SteelGold(100000,p)
call itemCheckChargeM(p,'I00S',5)
call itemCheckChargeM(p,'I00T',3)
call itemCheckChargeM(p,'I00W',1)
if GetItemTypeId(tempItem)=='I500' then
set tempI2='I600'
elseif GetItemTypeId(tempItem)=='I501' then
set tempI2='I601'
elseif GetItemTypeId(tempItem)=='I502' then
set tempI2='I602'
elseif GetItemTypeId(tempItem)=='I503' then
set tempI2='I603'
elseif GetItemTypeId(tempItem)=='I504' then
set tempI2='I604'
elseif GetItemTypeId(tempItem)=='I535' then
set tempI2='I635'
elseif GetItemTypeId(tempItem)=='I536' then
set tempI2='I636'
elseif GetItemTypeId(tempItem)=='I537' then
set tempI2='I637'
elseif GetItemTypeId(tempItem)=='I538' then
set tempI2='I638'
elseif GetItemTypeId(tempItem)=='I524' then
set tempI2='I624'
elseif GetItemTypeId(tempItem)=='I540' then
set tempI2='I640'
elseif GetItemTypeId(tempItem)=='I541' then
set tempI2='I641'
elseif GetItemTypeId(tempItem)=='I542' then
set tempI2='I642'
elseif GetItemTypeId(tempItem)=='I543' then
set tempI2='I643'
elseif GetItemTypeId(tempItem)=='I546' then
set tempI2='I646'
elseif GetItemTypeId(tempItem)=='I549' then
set tempI2='I649'
elseif GetItemTypeId(tempItem)=='I553' then
set tempI2='I653'
endif
set upgrade=true
elseif GetPlayerState(pl,ConvertPlayerState(1))>=100000 and itemCheckCharge(p,'I00S','I00T','I00W',5,3,1)and GetItemLevel(tempItem)==6 then
call SteelGold(100000,p)
call itemCheckChargeM(p,'I00S',5)
call itemCheckChargeM(p,'I00T',3)
call itemCheckChargeM(p,'I00W',1)
if GetItemTypeId(tempItem)=='I643' then
set tempI2='I743'
set upgrade=true
elseif GetItemTypeId(tempItem)=='I743' then
set tempI2='I843'
set upgrade=true
elseif GetItemTypeId(tempItem)=='I843' then
set tempI2='I943'
set upgrade=true
endif
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 장비 단조에 실패했습니다.")
endif
elseif not UnitAlive(Charcter[p])then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 장비 단조에 실패했습니다.")
endif
if upgrade then
call RemoveItem(tempItem)
call SetItemPosition(tempItem,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
set given=CreateItem(tempI2,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call UnitAddItem(u,given)
call DisplayTimedTextToPlayer(pl,0,0,10,GetItemName(given)+"|cffffd700 업그레이드 완료")
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set tempItem=null
set t=null
set u=null
set given=null
set pl=null
endfunction
function DanDP takes nothing returns nothing
local timer t=GetExpiredTimer()
local item tempItem
local item given
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local player pl=Player(p-1)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local integer typ=LoadInteger(udg_Hash,GetHandleId(t),$FA0E1FE7)
local integer tempI2
local boolean upgrade=false
if UnitAlive(Charcter[p])then
set tempItem=itemTypeCheckLv(u,2)
if u==Charcter[p]and tempItem==null then
set u=chango[p]
set tempItem=itemTypeCheckLv(u,2)
elseif u==chango[p]and tempItem==null then
set u=Charcter[p]
set tempItem=itemTypeCheckLv(u,2)
endif
if WhatGold(5000,p)and typ==0 and itemCheckCharge(p,'I00F','I00N','0000',5,2,0)and GetItemLevel(tempItem)==1 then
call SteelGold(5000,p)
call itemCheckChargeM(p,'I00F',5)
call itemCheckChargeM(p,'I00N',2)
if GetItemTypeId(tempItem)=='I205' then
set tempI2='I305'
elseif GetItemTypeId(tempItem)=='I206' then
set tempI2='I306'
elseif GetItemTypeId(tempItem)=='I207' then
set tempI2='I307'
elseif GetItemTypeId(tempItem)=='I208' then
set tempI2='I308'
elseif GetItemTypeId(tempItem)=='I209' then
set tempI2='I309'
elseif GetItemTypeId(tempItem)=='I210' then
set tempI2='I310'
elseif GetItemTypeId(tempItem)=='I230' then
set tempI2='I330'
elseif GetItemTypeId(tempItem)=='I231' then
set tempI2='I331'
elseif GetItemTypeId(tempItem)=='I234' then
set tempI2='I334'
elseif GetItemTypeId(tempItem)=='I244' then
set tempI2='I344'
elseif GetItemTypeId(tempItem)=='I245' then
set tempI2='I345'
elseif GetItemTypeId(tempItem)=='I247' then
set tempI2='I347'
elseif GetItemTypeId(tempItem)=='I248' then
set tempI2='I348'
elseif GetItemTypeId(tempItem)=='I250' then
set tempI2='I350'
elseif GetItemTypeId(tempItem)=='I254' then
set tempI2='I354'
endif
set upgrade=true
elseif WhatGold(20000,p)and typ==0 and itemCheckCharge(p,'I00O','I00P','0000',5,2,0)and GetItemLevel(tempItem)==2 then
call SteelGold(20000,p)
call itemCheckChargeM(p,'I00O',5)
call itemCheckChargeM(p,'I00P',2)
if GetItemTypeId(tempItem)=='I305' then
set tempI2='I405'
elseif GetItemTypeId(tempItem)=='I306' then
set tempI2='I406'
elseif GetItemTypeId(tempItem)=='I307' then
set tempI2='I407'
elseif GetItemTypeId(tempItem)=='I308' then
set tempI2='I408'
elseif GetItemTypeId(tempItem)=='I309' then
set tempI2='I409'
elseif GetItemTypeId(tempItem)=='I310' then
set tempI2='I410'
elseif GetItemTypeId(tempItem)=='I330' then
set tempI2='I430'
elseif GetItemTypeId(tempItem)=='I331' then
set tempI2='I431'
elseif GetItemTypeId(tempItem)=='I334' then
set tempI2='I434'
elseif GetItemTypeId(tempItem)=='I344' then
set tempI2='I444'
elseif GetItemTypeId(tempItem)=='I345' then
set tempI2='I445'
elseif GetItemTypeId(tempItem)=='I347' then
set tempI2='I447'
elseif GetItemTypeId(tempItem)=='I348' then
set tempI2='I448'
elseif GetItemTypeId(tempItem)=='I350' then
set tempI2='I450'
elseif GetItemTypeId(tempItem)=='I354' then
set tempI2='I454'
endif
set upgrade=true
elseif WhatGold(40000,p)and typ==0 and itemCheckCharge(p,'I00Q','I00R','0000',8,2,0)and GetItemLevel(tempItem)==3 then
call SteelGold(40000,p)
call itemCheckChargeM(p,'I00Q',8)
call itemCheckChargeM(p,'I00R',2)
if GetItemTypeId(tempItem)=='I405' then
set tempI2='I505'
elseif GetItemTypeId(tempItem)=='I406' then
set tempI2='I506'
elseif GetItemTypeId(tempItem)=='I407' then
set tempI2='I507'
elseif GetItemTypeId(tempItem)=='I408' then
set tempI2='I508'
elseif GetItemTypeId(tempItem)=='I409' then
set tempI2='I509'
elseif GetItemTypeId(tempItem)=='I410' then
set tempI2='I510'
elseif GetItemTypeId(tempItem)=='I430' then
set tempI2='I530'
elseif GetItemTypeId(tempItem)=='I431' then
set tempI2='I531'
elseif GetItemTypeId(tempItem)=='I434' then
set tempI2='I534'
elseif GetItemTypeId(tempItem)=='I444' then
set tempI2='I544'
elseif GetItemTypeId(tempItem)=='I445' then
set tempI2='I545'
elseif GetItemTypeId(tempItem)=='I447' then
set tempI2='I547'
elseif GetItemTypeId(tempItem)=='I448' then
set tempI2='I548'
elseif GetItemTypeId(tempItem)=='I450' then
set tempI2='I550'
elseif GetItemTypeId(tempItem)=='I454' then
set tempI2='I554'
endif
set upgrade=true
elseif WhatGold(60000,p)and typ==1 and GetItemLevel(tempItem)==1 then
call SteelGold(60000,p)
if GetItemTypeId(tempItem)=='I205' then
set tempI2='I305'
elseif GetItemTypeId(tempItem)=='I206' then
set tempI2='I306'
elseif GetItemTypeId(tempItem)=='I207' then
set tempI2='I307'
elseif GetItemTypeId(tempItem)=='I208' then
set tempI2='I308'
elseif GetItemTypeId(tempItem)=='I209' then
set tempI2='I309'
elseif GetItemTypeId(tempItem)=='I210' then
set tempI2='I310'
elseif GetItemTypeId(tempItem)=='I230' then
set tempI2='I330'
elseif GetItemTypeId(tempItem)=='I231' then
set tempI2='I331'
elseif GetItemTypeId(tempItem)=='I234' then
set tempI2='I334'
elseif GetItemTypeId(tempItem)=='I244' then
set tempI2='I344'
elseif GetItemTypeId(tempItem)=='I245' then
set tempI2='I345'
elseif GetItemTypeId(tempItem)=='I247' then
set tempI2='I347'
elseif GetItemTypeId(tempItem)=='I248' then
set tempI2='I348'
elseif GetItemTypeId(tempItem)=='I250' then
set tempI2='I350'
elseif GetItemTypeId(tempItem)=='I254' then
set tempI2='I354'
endif
set upgrade=true
elseif WhatGold(180000,p)and typ==1 and GetItemLevel(tempItem)==2 then
call SteelGold(180000,p)
if GetItemTypeId(tempItem)=='I305' then
set tempI2='I405'
elseif GetItemTypeId(tempItem)=='I306' then
set tempI2='I406'
elseif GetItemTypeId(tempItem)=='I307' then
set tempI2='I407'
elseif GetItemTypeId(tempItem)=='I308' then
set tempI2='I408'
elseif GetItemTypeId(tempItem)=='I309' then
set tempI2='I409'
elseif GetItemTypeId(tempItem)=='I310' then
set tempI2='I410'
elseif GetItemTypeId(tempItem)=='I330' then
set tempI2='I430'
elseif GetItemTypeId(tempItem)=='I331' then
set tempI2='I431'
elseif GetItemTypeId(tempItem)=='I334' then
set tempI2='I434'
elseif GetItemTypeId(tempItem)=='I344' then
set tempI2='I444'
elseif GetItemTypeId(tempItem)=='I345' then
set tempI2='I445'
elseif GetItemTypeId(tempItem)=='I347' then
set tempI2='I447'
elseif GetItemTypeId(tempItem)=='I348' then
set tempI2='I448'
elseif GetItemTypeId(tempItem)=='I350' then
set tempI2='I450'
elseif GetItemTypeId(tempItem)=='I354' then
set tempI2='I454'
endif
set upgrade=true
elseif WhatGold(350000,p)and typ==1 and GetItemLevel(tempItem)==3 then
call SteelGold(350000,p)
if GetItemTypeId(tempItem)=='I405' then
set tempI2='I505'
elseif GetItemTypeId(tempItem)=='I406' then
set tempI2='I506'
elseif GetItemTypeId(tempItem)=='I407' then
set tempI2='I507'
elseif GetItemTypeId(tempItem)=='I408' then
set tempI2='I508'
elseif GetItemTypeId(tempItem)=='I409' then
set tempI2='I509'
elseif GetItemTypeId(tempItem)=='I410' then
set tempI2='I510'
elseif GetItemTypeId(tempItem)=='I430' then
set tempI2='I530'
elseif GetItemTypeId(tempItem)=='I431' then
set tempI2='I531'
elseif GetItemTypeId(tempItem)=='I434' then
set tempI2='I534'
elseif GetItemTypeId(tempItem)=='I444' then
set tempI2='I544'
elseif GetItemTypeId(tempItem)=='I445' then
set tempI2='I545'
elseif GetItemTypeId(tempItem)=='I447' then
set tempI2='I547'
elseif GetItemTypeId(tempItem)=='I448' then
set tempI2='I548'
elseif GetItemTypeId(tempItem)=='I450' then
set tempI2='I550'
elseif GetItemTypeId(tempItem)=='I454' then
set tempI2='I554'
endif
set upgrade=true
elseif WhatGold(100000,p)and itemCheckCharge(p,'I00S','I00T','I00W',5,3,1)and GetItemLevel(tempItem)==4 then
call SteelGold(100000,p)
call itemCheckChargeM(p,'I00S',5)
call itemCheckChargeM(p,'I00T',3)
call itemCheckChargeM(p,'I00W',1)
if GetItemTypeId(tempItem)=='I505' then
set tempI2='I605'
elseif GetItemTypeId(tempItem)=='I506' then
set tempI2='I606'
elseif GetItemTypeId(tempItem)=='I507' then
set tempI2='I607'
elseif GetItemTypeId(tempItem)=='I508' then
set tempI2='I608'
elseif GetItemTypeId(tempItem)=='I509' then
set tempI2='I609'
elseif GetItemTypeId(tempItem)=='I510' then
set tempI2='I610'
elseif GetItemTypeId(tempItem)=='I530' then
set tempI2='I630'
elseif GetItemTypeId(tempItem)=='I531' then
set tempI2='I631'
elseif GetItemTypeId(tempItem)=='I534' then
set tempI2='I634'
elseif GetItemTypeId(tempItem)=='I544' then
set tempI2='I644'
elseif GetItemTypeId(tempItem)=='I545' then
set tempI2='I645'
elseif GetItemTypeId(tempItem)=='I547' then
set tempI2='I647'
elseif GetItemTypeId(tempItem)=='I548' then
set tempI2='I648'
elseif GetItemTypeId(tempItem)=='I550' then
set tempI2='I650'
elseif GetItemTypeId(tempItem)=='I554' then
set tempI2='I654'
endif
set upgrade=true
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 장비 단조에 실패했습니다.")
endif
elseif not UnitAlive(Charcter[p])then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 장비 단조에 실패했습니다.")
endif
if upgrade then
call RemoveItem(tempItem)
call SetItemPosition(tempItem,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
set given=CreateItem(tempI2,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call UnitAddItem(u,given)
call DisplayTimedTextToPlayer(pl,0,0,10,GetItemName(given)+"|cffffd700 업그레이드 완료")
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set tempItem=null
set t=null
set u=null
set given=null
set pl=null
endfunction
function DanMG takes nothing returns nothing
local timer t=GetExpiredTimer()
local item given
local item tempItem=null
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local player pl=Player(p-1)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$C303079D)
local integer tempI2
local integer typ=LoadInteger(udg_Hash,GetHandleId(t),$FA0E1FE7)
local integer loopA=1
local boolean upgrade=false
if UnitAlive(Charcter[p])then
loop
set tempItem=itemTypeCheckLv2(u,loopA)
if u==Charcter[p]and tempItem==null then
set u=chango[p]
set tempItem=itemTypeCheckLv2(u,loopA)
elseif u==chango[p]and tempItem==null then
set u=Charcter[p]
set tempItem=itemTypeCheckLv2(u,loopA)
endif
if WhatGold(5000,p)and typ==0 and itemCheckCharge(p,'I00F','I00N','0000',5,2,0)and GetItemLevel(tempItem)==1 then
call SteelGold(5000,p)
call itemCheckChargeM(p,'I00F',5)
call itemCheckChargeM(p,'I00N',2)
if GetItemTypeId(tempItem)=='I211' then
set tempI2='I311'
elseif GetItemTypeId(tempItem)=='I212' then
set tempI2='I312'
elseif GetItemTypeId(tempItem)=='I213' then
set tempI2='I313'
elseif GetItemTypeId(tempItem)=='I214' then
set tempI2='I314'
elseif GetItemTypeId(tempItem)=='I215' then
set tempI2='I315'
elseif GetItemTypeId(tempItem)=='I216' then
set tempI2='I316'
elseif GetItemTypeId(tempItem)=='I217' then
set tempI2='I317'
elseif GetItemTypeId(tempItem)=='I218' then
set tempI2='I318'
elseif GetItemTypeId(tempItem)=='I219' then
set tempI2='I319'
elseif GetItemTypeId(tempItem)=='I220' then
set tempI2='I320'
elseif GetItemTypeId(tempItem)=='I221' then
set tempI2='I321'
elseif GetItemTypeId(tempItem)=='I222' then
set tempI2='I322'
elseif GetItemTypeId(tempItem)=='I223' then
set tempI2='I323'
elseif GetItemTypeId(tempItem)=='I225' then
set tempI2='I325'
elseif GetItemTypeId(tempItem)=='I226' then
set tempI2='I326'
elseif GetItemTypeId(tempItem)=='I227' then
set tempI2='I327'
elseif GetItemTypeId(tempItem)=='I228' then
set tempI2='I328'
elseif GetItemTypeId(tempItem)=='I229' then
set tempI2='I329'
elseif GetItemTypeId(tempItem)=='I232' then
set tempI2='I332'
elseif GetItemTypeId(tempItem)=='I233' then
set tempI2='I333'
elseif GetItemTypeId(tempItem)=='I251' then
set tempI2='I351'
elseif GetItemTypeId(tempItem)=='I252' then
set tempI2='I352'
endif
set upgrade=true
elseif WhatGold(20000,p)and typ==0 and itemCheckCharge(p,'I00O','I00P','0000',5,2,0)and GetItemLevel(tempItem)==2 then
call SteelGold(20000,p)
call itemCheckChargeM(p,'I00O',5)
call itemCheckChargeM(p,'I00P',2)
if GetItemTypeId(tempItem)=='I311' then
set tempI2='I411'
elseif GetItemTypeId(tempItem)=='I312' then
set tempI2='I412'
elseif GetItemTypeId(tempItem)=='I313' then
set tempI2='I413'
elseif GetItemTypeId(tempItem)=='I314' then
set tempI2='I414'
elseif GetItemTypeId(tempItem)=='I315' then
set tempI2='I415'
elseif GetItemTypeId(tempItem)=='I316' then
set tempI2='I416'
elseif GetItemTypeId(tempItem)=='I317' then
set tempI2='I417'
elseif GetItemTypeId(tempItem)=='I318' then
set tempI2='I418'
elseif GetItemTypeId(tempItem)=='I319' then
set tempI2='I419'
elseif GetItemTypeId(tempItem)=='I320' then
set tempI2='I420'
elseif GetItemTypeId(tempItem)=='I321' then
set tempI2='I421'
elseif GetItemTypeId(tempItem)=='I322' then
set tempI2='I422'
elseif GetItemTypeId(tempItem)=='I323' then
set tempI2='I423'
elseif GetItemTypeId(tempItem)=='I325' then
set tempI2='I425'
elseif GetItemTypeId(tempItem)=='I326' then
set tempI2='I426'
elseif GetItemTypeId(tempItem)=='I327' then
set tempI2='I427'
elseif GetItemTypeId(tempItem)=='I328' then
set tempI2='I428'
elseif GetItemTypeId(tempItem)=='I329' then
set tempI2='I429'
elseif GetItemTypeId(tempItem)=='I332' then
set tempI2='I432'
elseif GetItemTypeId(tempItem)=='I333' then
set tempI2='I433'
elseif GetItemTypeId(tempItem)=='I351' then
set tempI2='I451'
elseif GetItemTypeId(tempItem)=='I352' then
set tempI2='I452'
endif
set upgrade=true
elseif WhatGold(40000,p)and typ==0 and itemCheckCharge(p,'I00Q','I00R','0000',8,2,0)and GetItemLevel(tempItem)==3 then
call SteelGold(40000,p)
call itemCheckChargeM(p,'I00Q',8)
call itemCheckChargeM(p,'I00R',2)
if GetItemTypeId(tempItem)=='I411' then
set tempI2='I511'
elseif GetItemTypeId(tempItem)=='I412' then
set tempI2='I512'
elseif GetItemTypeId(tempItem)=='I413' then
set tempI2='I513'
elseif GetItemTypeId(tempItem)=='I414' then
set tempI2='I514'
elseif GetItemTypeId(tempItem)=='I415' then
set tempI2='I515'
elseif GetItemTypeId(tempItem)=='I416' then
set tempI2='I516'
elseif GetItemTypeId(tempItem)=='I417' then
set tempI2='I517'
elseif GetItemTypeId(tempItem)=='I418' then
set tempI2='I518'
elseif GetItemTypeId(tempItem)=='I419' then
set tempI2='I519'
elseif GetItemTypeId(tempItem)=='I420' then
set tempI2='I520'
elseif GetItemTypeId(tempItem)=='I421' then
set tempI2='I521'
elseif GetItemTypeId(tempItem)=='I422' then
set tempI2='I522'
elseif GetItemTypeId(tempItem)=='I423' then
set tempI2='I523'
elseif GetItemTypeId(tempItem)=='I425' then
set tempI2='I525'
elseif GetItemTypeId(tempItem)=='I426' then
set tempI2='I526'
elseif GetItemTypeId(tempItem)=='I427' then
set tempI2='I527'
elseif GetItemTypeId(tempItem)=='I428' then
set tempI2='I528'
elseif GetItemTypeId(tempItem)=='I429' then
set tempI2='I529'
elseif GetItemTypeId(tempItem)=='I433' then
set tempI2='I533'
elseif GetItemTypeId(tempItem)=='I451' then
set tempI2='I551'
elseif GetItemTypeId(tempItem)=='I452' then
set tempI2='I552'
endif
set upgrade=true
elseif WhatGold(60000,p)and typ==1 and GetItemLevel(tempItem)==1 then
call SteelGold(60000,p)
if GetItemTypeId(tempItem)=='I211' then
set tempI2='I311'
elseif GetItemTypeId(tempItem)=='I212' then
set tempI2='I312'
elseif GetItemTypeId(tempItem)=='I213' then
set tempI2='I313'
elseif GetItemTypeId(tempItem)=='I214' then
set tempI2='I314'
elseif GetItemTypeId(tempItem)=='I215' then
set tempI2='I315'
elseif GetItemTypeId(tempItem)=='I216' then
set tempI2='I316'
elseif GetItemTypeId(tempItem)=='I217' then
set tempI2='I317'
elseif GetItemTypeId(tempItem)=='I218' then
set tempI2='I318'
elseif GetItemTypeId(tempItem)=='I219' then
set tempI2='I319'
elseif GetItemTypeId(tempItem)=='I220' then
set tempI2='I320'
elseif GetItemTypeId(tempItem)=='I221' then
set tempI2='I321'
elseif GetItemTypeId(tempItem)=='I222' then
set tempI2='I322'
elseif GetItemTypeId(tempItem)=='I223' then
set tempI2='I323'
elseif GetItemTypeId(tempItem)=='I225' then
set tempI2='I325'
elseif GetItemTypeId(tempItem)=='I226' then
set tempI2='I326'
elseif GetItemTypeId(tempItem)=='I227' then
set tempI2='I327'
elseif GetItemTypeId(tempItem)=='I228' then
set tempI2='I328'
elseif GetItemTypeId(tempItem)=='I229' then
set tempI2='I329'
elseif GetItemTypeId(tempItem)=='I232' then
set tempI2='I332'
elseif GetItemTypeId(tempItem)=='I233' then
set tempI2='I333'
elseif GetItemTypeId(tempItem)=='I251' then
set tempI2='I351'
elseif GetItemTypeId(tempItem)=='I252' then
set tempI2='I352'
endif
set upgrade=true
elseif WhatGold(180000,p)and typ==1 and GetItemLevel(tempItem)==2 then
call SteelGold(180000,p)
if GetItemTypeId(tempItem)=='I311' then
set tempI2='I411'
elseif GetItemTypeId(tempItem)=='I312' then
set tempI2='I412'
elseif GetItemTypeId(tempItem)=='I313' then
set tempI2='I413'
elseif GetItemTypeId(tempItem)=='I314' then
set tempI2='I414'
elseif GetItemTypeId(tempItem)=='I315' then
set tempI2='I415'
elseif GetItemTypeId(tempItem)=='I316' then
set tempI2='I416'
elseif GetItemTypeId(tempItem)=='I317' then
set tempI2='I417'
elseif GetItemTypeId(tempItem)=='I318' then
set tempI2='I418'
elseif GetItemTypeId(tempItem)=='I319' then
set tempI2='I419'
elseif GetItemTypeId(tempItem)=='I320' then
set tempI2='I420'
elseif GetItemTypeId(tempItem)=='I321' then
set tempI2='I421'
elseif GetItemTypeId(tempItem)=='I322' then
set tempI2='I422'
elseif GetItemTypeId(tempItem)=='I323' then
set tempI2='I423'
elseif GetItemTypeId(tempItem)=='I325' then
set tempI2='I425'
elseif GetItemTypeId(tempItem)=='I326' then
set tempI2='I426'
elseif GetItemTypeId(tempItem)=='I327' then
set tempI2='I427'
elseif GetItemTypeId(tempItem)=='I328' then
set tempI2='I428'
elseif GetItemTypeId(tempItem)=='I329' then
set tempI2='I429'
elseif GetItemTypeId(tempItem)=='I332' then
set tempI2='I432'
elseif GetItemTypeId(tempItem)=='I333' then
set tempI2='I433'
elseif GetItemTypeId(tempItem)=='I351' then
set tempI2='I451'
elseif GetItemTypeId(tempItem)=='I352' then
set tempI2='I452'
endif
set upgrade=true
elseif WhatGold(350000,p)and typ==1 and GetItemLevel(tempItem)==3 then
call SteelGold(350000,p)
if GetItemTypeId(tempItem)=='I411' then
set tempI2='I511'
elseif GetItemTypeId(tempItem)=='I412' then
set tempI2='I512'
elseif GetItemTypeId(tempItem)=='I413' then
set tempI2='I513'
elseif GetItemTypeId(tempItem)=='I414' then
set tempI2='I514'
elseif GetItemTypeId(tempItem)=='I415' then
set tempI2='I515'
elseif GetItemTypeId(tempItem)=='I416' then
set tempI2='I516'
elseif GetItemTypeId(tempItem)=='I417' then
set tempI2='I517'
elseif GetItemTypeId(tempItem)=='I418' then
set tempI2='I518'
elseif GetItemTypeId(tempItem)=='I419' then
set tempI2='I519'
elseif GetItemTypeId(tempItem)=='I420' then
set tempI2='I520'
elseif GetItemTypeId(tempItem)=='I421' then
set tempI2='I521'
elseif GetItemTypeId(tempItem)=='I422' then
set tempI2='I522'
elseif GetItemTypeId(tempItem)=='I423' then
set tempI2='I523'
elseif GetItemTypeId(tempItem)=='I425' then
set tempI2='I525'
elseif GetItemTypeId(tempItem)=='I426' then
set tempI2='I526'
elseif GetItemTypeId(tempItem)=='I427' then
set tempI2='I527'
elseif GetItemTypeId(tempItem)=='I428' then
set tempI2='I528'
elseif GetItemTypeId(tempItem)=='I429' then
set tempI2='I529'
elseif GetItemTypeId(tempItem)=='I433' then
set tempI2='I533'
elseif GetItemTypeId(tempItem)=='I451' then
set tempI2='I551'
elseif GetItemTypeId(tempItem)=='I452' then
set tempI2='I552'
endif
set upgrade=true
elseif WhatGold(100000,p)and itemCheckCharge(p,'I00V','I00U','I00W',5,4,1)and GetItemLevel(tempItem)==4 then
call SteelGold(100000,p)
call itemCheckChargeM(p,'I00V',5)
call itemCheckChargeM(p,'I00U',4)
call itemCheckChargeM(p,'I00W',1)
if GetItemTypeId(tempItem)=='I511' then
set tempI2='I611'
elseif GetItemTypeId(tempItem)=='I512' then
set tempI2='I612'
elseif GetItemTypeId(tempItem)=='I513' then
set tempI2='I613'
elseif GetItemTypeId(tempItem)=='I514' then
set tempI2='I614'
elseif GetItemTypeId(tempItem)=='I515' then
set tempI2='I615'
elseif GetItemTypeId(tempItem)=='I516' then
set tempI2='I616'
elseif GetItemTypeId(tempItem)=='I517' then
set tempI2='I617'
elseif GetItemTypeId(tempItem)=='I518' then
set tempI2='I618'
elseif GetItemTypeId(tempItem)=='I519' then
set tempI2='I619'
elseif GetItemTypeId(tempItem)=='I520' then
set tempI2='I620'
elseif GetItemTypeId(tempItem)=='I521' then
set tempI2='I621'
elseif GetItemTypeId(tempItem)=='I522' then
set tempI2='I622'
elseif GetItemTypeId(tempItem)=='I523' then
set tempI2='I623'
elseif GetItemTypeId(tempItem)=='I525' then
set tempI2='I625'
elseif GetItemTypeId(tempItem)=='I526' then
set tempI2='I626'
elseif GetItemTypeId(tempItem)=='I527' then
set tempI2='I627'
elseif GetItemTypeId(tempItem)=='I528' then
set tempI2='I628'
elseif GetItemTypeId(tempItem)=='I529' then
set tempI2='I629'
elseif GetItemTypeId(tempItem)=='I533' then
set tempI2='I633'
elseif GetItemTypeId(tempItem)=='I551' then
set tempI2='I651'
elseif GetItemTypeId(tempItem)=='I552' then
set tempI2='I652'
endif
set upgrade=true
endif
set loopA=loopA+1
exitwhen upgrade==true or loopA>=4
endloop
elseif not UnitAlive(Charcter[p])then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 장비 단조에 실패했습니다.")
endif
if upgrade then
call RemoveItem(tempItem)
call SetItemPosition(tempItem,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
set given=CreateItem(tempI2,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call UnitAddItem(u,given)
call DisplayTimedTextToPlayer(pl,0,0,10,GetItemName(given)+"|cffffd700 업그레이드 완료")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 장비 단조에 실패했습니다.")
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
set given=null
set tempItem=null
set pl=null
endfunction
function itemRemover takes nothing returns nothing
local timer t=GetExpiredTimer()
local item itm=LoadItemHandle(udg_Hash,GetHandleId(t),$CDB28B13)
call SetItemPosition(itm,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call RemoveItem(itm)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set itm=null
endfunction
function HomeImmune takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer loopA=0
local timerdialog td=LoadTimerDialogHandle(udg_Hash,GetHandleId(t),0)
call SetUnitInvulnerable(gg_unit_h000_0013,false)
call GroupRemoveUnit(udg_Mujuk,gg_unit_h000_0013)
loop
exitwhen loopA==Playint
set loopA=loopA+1
if GetLocalPlayer()==Player(PP[loopA]-1)and LoadUnitHandle(udg_Hashtable,PP[loopA],$C91F8651)==gg_unit_h000_0013 then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n"+I2S(R2I(GetUnitState(gg_unit_h000_0013,ConvertUnitState(0x20))))+"")
endif
endloop
call DestroyTimerDialog(td)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set td=null
endfunction
function itemCharge takes item tm,unit u returns nothing
local item Invenitem
local integer loopA=0
if GetItemTypeId(tm)=='I00N' or GetItemTypeId(tm)=='I00F' or GetItemTypeId(tm)=='I00O' or GetItemTypeId(tm)=='I00P' or GetItemTypeId(tm)=='I00Q' or GetItemTypeId(tm)=='I00R' or GetItemTypeId(tm)=='I00S' or GetItemTypeId(tm)=='I00T' or GetItemTypeId(tm)=='I00V' or GetItemTypeId(tm)=='I00U' or GetItemTypeId(tm)=='I00W' then
loop
set Invenitem=UnitItemInSlot(u,loopA)
if GetItemTypeId(Invenitem)==GetItemTypeId(tm)then
if GetItemCharges(Invenitem)>=1 and tm !=Invenitem then
set loopA=GetItemCharges(Invenitem)+GetItemCharges(tm)
call RemoveItem(tm)
call SetItemCharges(Invenitem,loopA)
endif
exitwhen true
endif
set loopA=loopA+1
exitwhen loopA>=6
endloop
endif
set tm=null
set Invenitem=null
set u=null
endfunction
function Trig_Main_Skill_Actions takes nothing returns nothing
local timer t
local timer t2
local item itm=GetManipulatedItem()
local item given
local unit u=GetTriggerUnit()
local player pl=GetOwningPlayer(u)
local integer p=GetPlayerId(pl)+1
local integer pid=GetPlayerId(pl)
local integer tempI
local integer tempI2
local integer tempI3
local item tempItem
local real tempR
local boolean upgrade=false
if GetItemType(itm)==ConvertItemType(3)then
if GetItemTypeId(itm)=='I02D' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"색채","0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if tempI==0 and tempI2>=50 then
call StashSave(PLAYER_DATA[pid],"색채",I2S(1))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-50))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==1 and tempI2>=75 then
call StashSave(PLAYER_DATA[pid],"색채",I2S(2))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-75))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==2 and tempI2>=100 then
call StashSave(PLAYER_DATA[pid],"색채",I2S(3))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-100))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==0 and tempI2<=49 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI==1 and tempI2<=74 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI==2 and tempI2<=99 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI>=3 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 모든 정보를 구입했다.")
endif
elseif GetItemTypeId(itm)=='I02E' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"용사","0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if tempI==0 and tempI2>=50 then
call StashSave(PLAYER_DATA[pid],"용사",I2S(1))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-50))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==1 and tempI2>=75 then
call StashSave(PLAYER_DATA[pid],"용사",I2S(2))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-75))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==2 and tempI2>=100 then
call StashSave(PLAYER_DATA[pid],"용사",I2S(3))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-100))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==0 and tempI2<=49 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI==1 and tempI2<=74 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI==2 and tempI2<=99 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI>=3 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 모든 정보를 구입했다.")
endif
elseif GetItemTypeId(itm)=='I02F' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"헤븐즈필","0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if tempI==0 and tempI2>=50 then
call StashSave(PLAYER_DATA[pid],"헤븐즈필",I2S(1))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-50))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==1 and tempI2>=75 then
call StashSave(PLAYER_DATA[pid],"헤븐즈필",I2S(2))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-75))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==2 and tempI2>=100 then
call StashSave(PLAYER_DATA[pid],"헤븐즈필",I2S(3))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-100))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==0 and tempI2<=49 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI==1 and tempI2<=74 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI==2 and tempI2<=99 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI>=3 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 모든 정보를 구입했다.")
endif
elseif GetItemTypeId(itm)=='I02G' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"기도","0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if tempI==0 and tempI2>=50 then
call StashSave(PLAYER_DATA[pid],"기도",I2S(1))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-50))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==1 and tempI2>=75 then
call StashSave(PLAYER_DATA[pid],"기도",I2S(2))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-75))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==2 and tempI2>=100 then
call StashSave(PLAYER_DATA[pid],"기도",I2S(3))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-100))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==0 and tempI2<=49 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI==1 and tempI2<=74 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI==2 and tempI2<=99 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI>=3 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 모든 정보를 구입했다.")
endif
elseif GetItemTypeId(itm)=='I02H' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"완호","0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if tempI==0 and tempI2>=100 then
call StashSave(PLAYER_DATA[pid],"완호",I2S(1))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-100))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI>=1 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 모든 정보를 구입했다.")
endif
if tempI2<=99 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
elseif GetItemTypeId(itm)=='I02I' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"아르카나","0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if tempI==0 and tempI2>=100 then
call StashSave(PLAYER_DATA[pid],"아르카나",I2S(1))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-100))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI>=1 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 모든 정보를 구입했다.")
endif
if tempI2<=99 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
elseif GetItemTypeId(itm)=='I02J' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"캬루콘","0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if GetUnitAbilityLevel(chango[p],'A03W')==0 then
call UnitAddAbility(chango[p],'A03M')
endif
if tempI==0 and tempI2>=200 then
call StashSave(PLAYER_DATA[pid],"캬루콘",I2S(1))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-200))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이모티콘 구매에 성공했다.")
endif
if tempI>=1 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 구매한 상품입니다.")
endif
if tempI2<=199 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
elseif GetItemTypeId(itm)=='I02K' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"타마콘","0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if GetUnitAbilityLevel(chango[p],'A03M')==0 then
call UnitAddAbility(chango[p],'A03W')
endif
if tempI==0 and tempI2>=200 then
call StashSave(PLAYER_DATA[pid],"타마콘",I2S(1))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-200))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이모티콘 구매에 성공했다.")
endif
if tempI>=1 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 구매한 상품입니다.")
endif
if tempI2<=199 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
elseif GetItemTypeId(itm)=='I02M' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"무간","0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if tempI==0 and tempI2>=50 then
call StashSave(PLAYER_DATA[pid],"무간",I2S(1))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-50))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI>=1 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 모든 정보를 구입했다.")
endif
if tempI2<=49 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
elseif GetItemTypeId(itm)=='I02N' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"흥신소","0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if tempI==0 and tempI2>=50 then
call StashSave(PLAYER_DATA[pid],"흥신소",I2S(1))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-50))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI>=1 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 모든 정보를 구입했다.")
endif
if tempI2<=49 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
elseif GetItemTypeId(itm)=='I02O' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"보이드","0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if tempI==0 and tempI2>=50 then
call StashSave(PLAYER_DATA[pid],"보이드",I2S(1))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-50))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI>=1 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 모든 정보를 구입했다.")
endif
if tempI2<=49 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
elseif GetItemTypeId(itm)=='I02P' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"의식반전","0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if tempI==0 and tempI2>=50 then
call StashSave(PLAYER_DATA[pid],"의식반전",I2S(1))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-50))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI>=1 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 모든 정보를 구입했다.")
endif
if tempI2<=49 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
elseif GetItemTypeId(itm)=='I02W' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"키스샷","0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if tempI==0 and tempI2>=50 then
call StashSave(PLAYER_DATA[pid],"키스샷",I2S(1))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-50))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==1 and tempI2>=75 then
call StashSave(PLAYER_DATA[pid],"키스샷",I2S(2))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-75))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==2 and tempI2>=100 then
call StashSave(PLAYER_DATA[pid],"키스샷",I2S(3))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-100))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI==0 and tempI2<=49 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI==1 and tempI2<=74 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI==2 and tempI2<=99 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
if tempI>=3 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 모든 정보를 구입했다.")
endif
elseif GetItemTypeId(itm)=='I02V' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],"오티누스","0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if tempI==0 and tempI2>=100 then
call StashSave(PLAYER_DATA[pid],"오티누스",I2S(1))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-100))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700정보 구매에 성공했다.")
endif
if tempI>=1 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 모든 정보를 구입했다.")
endif
if tempI2<=99 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포인트가 부족합니다.")
endif
elseif GetItemTypeId(itm)=='I02Q' then
set tempI=S2I(StashLoad(PLAYER_DATA[pid],GetUnitName(Charcter[p]),"0"))
set tempI2=S2I(StashLoad(PLAYER_DATA[pid],"Playint","0"))
if tempI<=199 and tempI2>=750 then
call StashSave(PLAYER_DATA[pid],GetUnitName(Charcter[p]),I2S(200))
call StashSave(PLAYER_DATA[pid],"Playint",I2S(tempI2-750))
call JNStashNetUploadUser(pl,MapId,LoadStr(udg_Hash,p,$AC6659BB),SecretKey,PLAYER_DATA[pid],UPLOAD_CALLBACK)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700캐릭터의 EX 확정권 구매를 완료했다.")
endif
if tempI>=200 or tempI2<=749 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700이미 EX 확정권이 존재하거나 포인트가 부족합니다.")
endif
endif
if GetItemTypeId(itm)=='nps0' then
set tempI=LoadInteger(udg_Hash,999,$3862CC76)
if(tempI==10 or tempI==20 or tempI==30)and TimerGetRemaining(RoundTimer)<=70 then
set tempI2=0
loop
exitwhen tempI2==Playint
set tempI2=tempI2+1
call DisplayTimedTextToPlayer(Player(PP[tempI2]-1),0,0,30,"|cff00bfff[시스템] - "+GetPlayerName(pl)+"|cffffd700 플레이어가 라운드를 스킵했다.")
endloop
call TimerStart(RoundTimer,1,false,null)
elseif(tempI==10 or tempI==20 or tempI==30)and TimerGetRemaining(RoundTimer)>70 then
set tempI2=0
loop
exitwhen tempI2==Playint
set tempI2=tempI2+1
call DisplayTimedTextToPlayer(Player(PP[tempI2]-1),0,0,30,"|cff00bfff[시스템] - |cffffd700라운드 스킵에 실패했다.")
endloop
elseif tempI !=10 or tempI !=20 or tempI !=30 then
set tempI2=0
loop
exitwhen tempI2==Playint
set tempI2=tempI2+1
call DisplayTimedTextToPlayer(Player(PP[tempI2]-1),0,0,30,"|cff00bfff[시스템] - "+GetPlayerName(pl)+"|cffffd700 플레이어가 라운드를 스킵했다.")
endloop
call TimerStart(RoundTimer,1,false,null)
endif
elseif GetItemTypeId(itm)=='I01E' then
set u=gg_unit_h000_0013
call SetUnitState(u,ConvertUnitState(0),GetUnitState(u,ConvertUnitState(0))+(GetUnitState(u,ConvertUnitState(1))*(0.3+(LoadInteger(udg_Hash,0,$E41F80EA)*0.01))))
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl",GetUnitX(gg_unit_h000_0013),GetUnitY(gg_unit_h000_0013))
call EXSetEffectSize(bj_lastCreatedEffect,5)
call EDestroy(bj_lastCreatedEffect,1.8)
elseif GetItemTypeId(itm)=='I01D' then
call SetUnitInvulnerable(gg_unit_h000_0013,true)
call GroupAddUnit(udg_Mujuk,gg_unit_h000_0013)
set tempI2=0
loop
exitwhen tempI2==Playint
set tempI2=tempI2+1
if GetLocalPlayer()==Player(PP[tempI2]-1)and LoadUnitHandle(udg_Hashtable,PP[tempI2],$C91F8651)==gg_unit_h000_0013 then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n"+I2S(R2I(GetUnitState(gg_unit_h000_0013,ConvertUnitState(0x20))))+"")
endif
endloop
set bj_lastCreatedEffect=AddSpecialEffect("Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl",GetUnitX(gg_unit_h000_0013),GetUnitY(gg_unit_h000_0013))
call EXSetEffectSize(bj_lastCreatedEffect,5)
call EDestroy(bj_lastCreatedEffect,30)
set t2=CreateTimer()
call TimerStart(t2,30,false,function HomeImmune)
set bj_lastCreatedTimerDialog=CreateTimerDialog(t2)
call TimerDialogSetTitle(bj_lastCreatedTimerDialog,"기지 무적")
call TimerDialogDisplay(bj_lastCreatedTimerDialog,true)
call SaveTimerDialogHandle(udg_Hash,GetHandleId(t2),0,bj_lastCreatedTimerDialog)
set t2=null
elseif GetItemTypeId(itm)=='I00L' then
set tempI=LoadInteger(udg_Hash,0,$E41F80EA)
if WhatGold(500+(tempI*500),p)and tempI<=29 then
call SteelGold((500+(tempI*500)),p)
call SaveInteger(udg_Hash,0,$E41F80EA,tempI+1)
set tempI2=0
loop
exitwhen tempI2==Playint
set tempI2=tempI2+1
call DisplayTimedTextToPlayer(Player(PP[tempI2]-1),0,0,10,"|cffcd853f기지 강화완료. 모든 아군에게 올스탯 20 지급. 현재 강화횟수 : "+I2S(tempI+1))
call SetHeroStr(Charcter[PP[tempI2]],GetHeroStr(Charcter[PP[tempI2]],false)+20,true)
call SetHeroAgi(Charcter[PP[tempI2]],GetHeroAgi(Charcter[PP[tempI2]],false)+20,true)
call SetHeroInt(Charcter[PP[tempI2]],GetHeroInt(Charcter[PP[tempI2]],false)+20,true)
call TimerStart(udg_PstatTimer[PP[tempI2]],1.0,false,null)
endloop
set u=gg_unit_h000_0013
set tempR=LoadReal(Hash_Stat,GetHandleId(u),$7FAFA384)
call SaveReal(Hash_Stat,GetHandleId(u),$7FAFA384,tempR+10)
call SetUnitState(u,ConvertUnitState(0x20),GetUnitState(u,ConvertUnitState(0x20))+30)
call SetUnitState(u,ConvertUnitState(1),GetUnitState(u,ConvertUnitState(1))+1000)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 최대치까지 강화했거나 골드가 부족합니다.")
if tempI<=29 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000업그레이드에 필요한 골드 : 	|cffffd700"+I2S(500+(tempI*500)))
endif
endif
elseif GetItemTypeId(itm)=='I000' and not LoadBoolean(udg_Hash,p,$268FE3F7)then
if GetLocalPlayer()==pl then
call PanCameraToTimed(GetRectCenterX(gg_rct_item_plz),GetRectCenterY(gg_rct_item_plz),0.1)
endif
call SaveBoolean(udg_Hash,p,$BF3FCE5D,true)
call SaveBoolean(udg_Hash,p,$268FE3F7,true)
set given=CreateItem('I00I',GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call UnitAddItem(u,given)
elseif GetItemTypeId(itm)=='I001' and not LoadBoolean(udg_Hash,p,$50E3BEA7)then
if GetLocalPlayer()==pl then
call PanCameraToTimed(GetRectCenterX(gg_rct_water_plz2),GetRectCenterY(gg_rct_water_plz2),0.1)
endif
call SaveBoolean(udg_Hash,p,$C5236945,true)
call SaveBoolean(udg_Hash,p,$50E3BEA7,true)
set given=CreateItem('I00H',GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call UnitAddItem(u,given)
elseif GetItemTypeId(itm)=='I003' and not LoadBoolean(udg_Hash,p,$5C7F9C57)then
if GetLocalPlayer()==pl then
call PanCameraToTimed(GetRectCenterX(gg_rct_traning_room),GetRectCenterY(gg_rct_traning_room),0.1)
endif
call SaveBoolean(udg_Hash,p,$67DEB377,true)
call SaveBoolean(udg_Hash,p,$5C7F9C57,true)
set given=CreateItem('I00J',GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call UnitAddItem(u,given)
elseif GetItemTypeId(itm)=='I002' and not LoadBoolean(udg_Hash,p,$18C96DCD)then
set given=CreateItem('I01A',GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call UnitAddItem(u,given)
call SaveBoolean(udg_Hash,p,$18C96DCD,true)
elseif GetItemTypeId(itm)=='I00X' then
if GetLocalPlayer()==pl then
call PanCameraToTimed(GetRectCenterX(gg_rct_Undead),GetRectCenterY(gg_rct_Undead),0.1)
endif
call SetUnitX(u,GetRectCenterX(gg_rct_Undead))
call SetUnitY(u,GetRectCenterY(gg_rct_Undead))
elseif GetItemTypeId(itm)=='I00Y' then
if GetLocalPlayer()==pl then
call PanCameraToTimed(GetRectCenterX(gg_rct_Winter),GetRectCenterY(gg_rct_Winter),0.1)
endif
call SetUnitX(u,GetRectCenterX(gg_rct_Winter))
call SetUnitY(u,GetRectCenterY(gg_rct_Winter))
elseif GetItemTypeId(itm)=='I00Z' then
if GetLocalPlayer()==pl then
call PanCameraToTimed(GetRectCenterX(gg_rct_Ent),GetRectCenterY(gg_rct_Ent),0.1)
endif
call SetUnitX(u,GetRectCenterX(gg_rct_Ent))
call SetUnitY(u,GetRectCenterY(gg_rct_Ent))
elseif GetItemTypeId(itm)=='I010' then
if GetLocalPlayer()==pl then
call PanCameraToTimed(GetRectCenterX(gg_rct_Orc),GetRectCenterY(gg_rct_Orc),0.1)
endif
call SetUnitX(u,GetRectCenterX(gg_rct_Orc))
call SetUnitY(u,GetRectCenterY(gg_rct_Orc))
elseif GetItemTypeId(itm)=='I011' then
if GetLocalPlayer()==pl then
call PanCameraToTimed(GetRectCenterX(gg_rct_Golem),GetRectCenterY(gg_rct_Golem),0.1)
endif
call SetUnitX(u,GetRectCenterX(gg_rct_Golem))
call SetUnitY(u,GetRectCenterY(gg_rct_Golem))
elseif GetItemTypeId(itm)=='I012' then
if GetLocalPlayer()==pl then
call PanCameraToTimed(GetRectCenterX(gg_rct_LegendZone),GetRectCenterY(gg_rct_LegendZone),0.1)
endif
call SetUnitX(u,GetRectCenterX(gg_rct_LegendZone))
call SetUnitY(u,GetRectCenterY(gg_rct_LegendZone))
elseif GetItemTypeId(itm)=='I00M' then
if GetLocalPlayer()==pl then
call PanCameraToTimed(GetRectCenterX(TraningRoom[p]),GetRectCenterY(TraningRoom[p]),0.1)
endif
call SetUnitX(u,GetRectCenterX(TraningRoom[p]))
call SetUnitY(u,GetRectCenterY(TraningRoom[p]))
elseif GetItemTypeId(itm)=='I01S' then
if GetLocalPlayer()==pl then
call PanCameraToTimed(GetRectCenterX(gg_rct_MemoryRoom),GetRectCenterY(gg_rct_MemoryRoom),0.1)
endif
call SetUnitX(u,GetRectCenterX(gg_rct_MemoryRoom))
call SetUnitY(u,GetRectCenterY(gg_rct_MemoryRoom))
elseif GetItemTypeId(itm)=='I013' then
set given=GetItemOfTypeFromUnit(u,'I00F')
if GetItemCharges(given)>=6 then
if GetItemCharges(given)==6 then
call RemoveItem(given)
else
set tempI=GetItemCharges(given)
call SetItemCharges(given,tempI-6)
endif
set given=CreateItem('I00N',GetUnitX(u),GetUnitY(u))
set tempI=0
loop
set tempItem=UnitItemInSlot(u,tempI)
if GetItemTypeId(tempItem)!=GetItemTypeId(given)then
set tempItem=null
endif
exitwhen GetItemTypeId(tempItem)==GetItemTypeId(given)
set tempI=tempI+1
exitwhen tempI>=6
endloop
if GetItemCharges(tempItem)>=1 and tempItem !=given then
set tempI=GetItemCharges(tempItem)+GetItemCharges(given)
call SetItemPosition(given,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call RemoveItem(given)
call SetItemCharges(tempItem,tempI)
else
call UnitAddItem(u,given)
endif
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[교환완료] - 언데드의 혼을 언데드의 정수로 교환했다.")
endif
elseif GetItemTypeId(itm)=='I014' then
set given=GetItemOfTypeFromUnit(u,'I00O')
if GetItemCharges(given)>=7 then
if GetItemCharges(given)==7 then
call RemoveItem(given)
else
set tempI=GetItemCharges(given)
call SetItemCharges(given,tempI-7)
endif
set given=CreateItem('I00P',GetUnitX(u),GetUnitY(u))
set tempI=0
loop
set tempItem=UnitItemInSlot(u,tempI)
if GetItemTypeId(tempItem)!=GetItemTypeId(given)then
set tempItem=null
endif
exitwhen GetItemTypeId(tempItem)==GetItemTypeId(given)
set tempI=tempI+1
exitwhen tempI>=6
endloop
if GetItemCharges(tempItem)>=1 and tempItem !=given then
set tempI=GetItemCharges(tempItem)+GetItemCharges(given)
call SetItemPosition(given,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call RemoveItem(given)
call SetItemCharges(tempItem,tempI)
else
call UnitAddItem(u,given)
endif
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[교환완료] - 얼어붙은 가시를 얼어붙은 심장으로 교환했다.")
endif
elseif GetItemTypeId(itm)=='I015' then
set given=GetItemOfTypeFromUnit(u,'I00Q')
if GetItemCharges(given)>=8 then
if GetItemCharges(given)==8 then
call RemoveItem(given)
else
set tempI=GetItemCharges(given)
call SetItemCharges(given,tempI-8)
endif
set given=CreateItem('I00R',GetUnitX(u),GetUnitY(u))
set tempI=0
loop
set tempItem=UnitItemInSlot(u,tempI)
if GetItemTypeId(tempItem)!=GetItemTypeId(given)then
set tempItem=null
endif
exitwhen GetItemTypeId(tempItem)==GetItemTypeId(given)
set tempI=tempI+1
exitwhen tempI>=6
endloop
if GetItemCharges(tempItem)>=1 and tempItem !=given then
set tempI=GetItemCharges(tempItem)+GetItemCharges(given)
call SetItemPosition(given,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call RemoveItem(given)
call SetItemCharges(tempItem,tempI)
else
call UnitAddItem(u,given)
endif
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[교환완료] - 숲의 정기를 숲의 정수로 교환했다.")
endif
elseif GetItemTypeId(itm)=='I016' then
set given=GetItemOfTypeFromUnit(u,'I00S')
if GetItemCharges(given)>=10 then
if GetItemCharges(given)==10 then
call RemoveItem(given)
else
set tempI=GetItemCharges(given)
call SetItemCharges(given,tempI-10)
endif
set given=CreateItem('I00T',GetUnitX(u),GetUnitY(u))
set tempI=0
loop
set tempItem=UnitItemInSlot(u,tempI)
if GetItemTypeId(tempItem)!=GetItemTypeId(given)then
set tempItem=null
endif
exitwhen GetItemTypeId(tempItem)==GetItemTypeId(given)
set tempI=tempI+1
exitwhen tempI>=6
endloop
if GetItemCharges(tempItem)>=1 and tempItem !=given then
set tempI=GetItemCharges(tempItem)+GetItemCharges(given)
call SetItemPosition(given,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call RemoveItem(given)
call SetItemCharges(tempItem,tempI)
else
call UnitAddItem(u,given)
endif
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[교환완료] - 질긴 핏줄을 전쟁나팔로 교환했다.")
endif
elseif GetItemTypeId(itm)=='I017' then
set given=GetItemOfTypeFromUnit(u,'I00V')
if GetItemCharges(given)>=10 then
if GetItemCharges(given)==10 then
call RemoveItem(given)
else
set tempI=GetItemCharges(given)
call SetItemCharges(given,tempI-10)
endif
set given=CreateItem('I00U',GetUnitX(u),GetUnitY(u))
set tempI=0
loop
set tempItem=UnitItemInSlot(u,tempI)
if GetItemTypeId(tempItem)!=GetItemTypeId(given)then
set tempItem=null
endif
exitwhen GetItemTypeId(tempItem)==GetItemTypeId(given)
set tempI=tempI+1
exitwhen tempI>=6
endloop
if GetItemCharges(tempItem)>=1 and tempItem !=given then
set tempI=GetItemCharges(tempItem)+GetItemCharges(given)
call SetItemPosition(given,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call RemoveItem(given)
call SetItemCharges(tempItem,tempI)
else
call UnitAddItem(u,given)
endif
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[교환완료] - 뜨거운 골램의 핵을 순수한 결정으로 교환했다.")
endif
elseif GetItemTypeId(itm)=='I008' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_np12_0136,true)
endif
elseif GetItemTypeId(itm)=='I01Z' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_np04_0116,true)
endif
elseif GetItemTypeId(itm)=='I020' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_np10_0134,true)
endif
elseif GetItemTypeId(itm)=='I021' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_np11_0135,true)
endif
elseif GetItemTypeId(itm)=='I022' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_np13_0138,true)
endif
elseif GetItemTypeId(itm)=='I009' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_np05_0115,true)
endif
elseif GetItemTypeId(itm)=='I023' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_np14_0151,true)
endif
elseif GetItemTypeId(itm)=='I024' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_np15_0152,true)
endif
elseif GetItemTypeId(itm)=='I025' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_np16_0153,true)
endif
elseif GetItemTypeId(itm)=='I026' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_np17_0150,true)
endif
elseif GetItemTypeId(itm)=='I00A' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_np06_0118,true)
endif
elseif GetItemTypeId(itm)=='I00E' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_np07_0117,true)
endif
elseif GetItemTypeId(itm)=='I02A' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_np18_0140,true)
endif
elseif GetItemTypeId(itm)=='I02B' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_n006_0022,true)
endif
elseif GetItemTypeId(itm)=='I02C' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_n007_0027,true)
endif
elseif GetItemTypeId(itm)=='I02L' then
if(GetLocalPlayer()==pl)then
call ClearSelection()
call SelectUnit(gg_unit_n008_0028,true)
endif
elseif GetItemTypeId(itm)=='I100' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f오색찬란한 봉황 소녀 |cffffd700구입완료")
set given=CreateItem('I200',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I101' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f회귀하는 포옹 라티카 |cffffd700구입완료")
set given=CreateItem('I201',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I135' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f악마 군단장 헥터 |cffffd700구입완료")
set given=CreateItem('I235',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I136' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f데우스 엑스 마키나 |cffffd700구입완료")
set given=CreateItem('I236',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I124' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f영겁의 흡혈귀 알루자드 |cffffd700구입완료")
set given=CreateItem('I224',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I137' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f마나리아의 마법 공주 앤 |cffffd700구입완료")
set given=CreateItem('I237',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I104' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f동화나라 공주님 아마릴리스 |cffffd700구입완료")
set given=CreateItem('I204',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I138' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f엠퍼러 피스트 가롬 |cffffd700구입완료")
set given=CreateItem('I238',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I140' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f이스라필 |cffffd700구입완료")
set given=CreateItem('I240',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I102' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f레비온 기사 알베르 |cffffd700구입완료")
set given=CreateItem('I202',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I103' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f숙청의 그릇 메이시아 |cffffd700구입완료")
set given=CreateItem('I203',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I141' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f가속하는 영웅 마이저 |cffffd700구입완료")
set given=CreateItem('I241',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I142' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f순수한 기도 에일라 |cffffd700구입완료")
set given=CreateItem('I242',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I143' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f봉인된 치천사 |cffffd700구입완료")
set given=CreateItem('I243',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I146' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f출항의 죄인 바르바토스 |cffffd700구입완료")
set given=CreateItem('I246',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I149' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f천하의 대도둑 지에몬 |cffffd700구입완료")
set given=CreateItem('I249',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I153' then
if not itemTypeCheck(u,1)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffcd853f섬세한 마법 연주자 니오 |cffffd700구입완료")
set given=CreateItem('I253',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 무기를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I105' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6신비의 파수꾼 스피네 |cffffd700구입완료")
set given=CreateItem('I205',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I106' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6빛의 검 앙리에트 |cffffd700구입완료")
set given=CreateItem('I206',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I107' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6잔혹한 고양이 토바리 |cffffd700구입완료")
set given=CreateItem('I207',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I108' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6영원의 신부 세레스 |cffffd700구입완료")
set given=CreateItem('I208',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I109' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6절조의 악마 유즈키 |cffffd700구입완료")
set given=CreateItem('I209',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I110' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6영광의 꽃 엘레노아 |cffffd700구입완료")
set given=CreateItem('I210',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I130' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6붉은빛의 대항자 모노 |cffffd700구입완료")
set given=CreateItem('I230',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I131' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6요조숙녀 엘비라 |cffffd700구입완료")
set given=CreateItem('I231',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I144' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6지옥의 군주 제벳 |cffffd700구입완료")
set given=CreateItem('I244',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I145' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6늠름한 저격수 실바 |cffffd700구입완료")
set given=CreateItem('I245',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I134' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6평온의 여신 플루메리아 |cffffd700구입완료")
set given=CreateItem('I234',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I147' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6결핍의 재앙 기르네리제 |cffffd700구입완료")
set given=CreateItem('I247',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I148' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6현란한 디자이너 코르와 |cffffd700구입완료")
set given=CreateItem('I248',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I150' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6운명의 예언자 루니 |cffffd700구입완료")
set given=CreateItem('I250',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I154' then
if not itemTypeCheck(u,2)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffb0e0e6전차 오르온 |cffffd700구입완료")
set given=CreateItem('I254',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 방어구를 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I111' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd쌍혼의 영원 케리드웬 |cffffd700구입완료")
set given=CreateItem('I211',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I112' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd인형 소녀 오르키스 |cffffd700구입완료")
set given=CreateItem('I212',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I113' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd프리그 |cffffd700구입완료")
set given=CreateItem('I213',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I114' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd동경을 향한 비약 이츠루기 |cffffd700구입완료")
set given=CreateItem('I214',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I115' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd전장의 가희 매그놀리아 |cffffd700구입완료")
set given=CreateItem('I215',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I116' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd숙명의 여우불 셋카 |cffffd700구입완료")
set given=CreateItem('I216',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I117' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd음속의 기계 라라미아 |cffffd700구입완료")
set given=CreateItem('I217',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I118' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd한 자루의 혼 카게로우 |cffffd700구입완료")
set given=CreateItem('I218',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I119' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd우아한 고양이 자매 샴과 샤마 |cffffd700구입완료")
set given=CreateItem('I219',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I120' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd금빛의 위신 루미오르 |cffffd700구입완료")
set given=CreateItem('I220',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I121' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd힘 - 소피나 |cffffd700구입완료")
set given=CreateItem('I221',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I122' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd케르눈노스 |cffffd700구입완료")
set given=CreateItem('I222',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I123' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd숲의 여왕 리자 |cffffd700구입완료")
set given=CreateItem('I223',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I125' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd요조숙녀 엘비라 |cffffd700구입완료")
set given=CreateItem('I225',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I133' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd희망의 성녀 리튜엘 |cffffd700구입완료")
set given=CreateItem('I233',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I126' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd명염의 옥견 케르베로스 |cffffd700구입완료")
set given=CreateItem('I226',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I127' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd절대영도 필레인 |cffffd700구입완료")
set given=CreateItem('I227',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I128' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd날개의 신 가루라 |cffffd700구입완료")
set given=CreateItem('I228',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I129' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd고고한 천둥 로마로니아 |cffffd700구입완료")
set given=CreateItem('I229',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I151' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd월혼귀 츠바키 |cffffd700구입완료")
set given=CreateItem('I251',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I152' then
if not itemTypeCheck(u,3)and WhatGold(500,p)then
call SteelGold(500,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffdda0dd찬란한 성기사 월버트 |cffffd700구입완료")
set given=CreateItem('I252',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000[실패] - 골드가 부족하거나 이미 3개의 지혜 아이템을 소지중입니다.")
endif
elseif GetItemTypeId(itm)=='I00B' then
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t2),$FA0E1FE7,0)
call TimerStart(t2,0.01,false,function DanWP)
set t2=null
elseif GetItemTypeId(itm)=='I00C' then
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t2),$FA0E1FE7,0)
call TimerStart(t2,0.01,false,function DanDP)
set t2=null
elseif GetItemTypeId(itm)=='I00D' then
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t2),$FA0E1FE7,0)
call TimerStart(t2,0.01,false,function DanMG)
set t2=null
elseif GetItemTypeId(itm)=='I029' then
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t2),$FA0E1FE7,1)
call TimerStart(t2,0.01,false,function DanWP)
set t2=null
elseif GetItemTypeId(itm)=='I028' then
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t2),$FA0E1FE7,1)
call TimerStart(t2,0.01,false,function DanDP)
set t2=null
elseif GetItemTypeId(itm)=='I027' then
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$C303079D,u)
call SaveInteger(udg_Hash,GetHandleId(t2),$FA0E1FE7,1)
call TimerStart(t2,0.01,false,function DanMG)
set t2=null
elseif GetItemTypeId(itm)=='I01H' then
if WhatGold(10000,p)then
call SteelGold(10000,p)
call SetHeroStr(Charcter[p],GetHeroStr(Charcter[p],false)+3,true)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl",Charcter[p],"origin"))
call TimerStart(udg_PstatTimer[p],0.7,false,null)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffFF0000[시스템] - |cffFF0000골드가 부족하다.")
endif
elseif GetItemTypeId(itm)=='I01I' then
if WhatGold(100000,p)then
call SteelGold(100000,p)
call SetHeroStr(Charcter[p],GetHeroStr(Charcter[p],false)+30,true)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl",Charcter[p],"origin"))
call TimerStart(udg_PstatTimer[p],0.7,false,null)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffFF0000[시스템] - |cffFF0000골드가 부족하다.")
endif
elseif GetItemTypeId(itm)=='I01J' then
if WhatGold(10000,p)then
call SteelGold(10000,p)
call SetHeroAgi(Charcter[p],GetHeroAgi(Charcter[p],false)+3,true)
if CharcterStat[p]then
call SetUnitState(Charcter[p],ConvertUnitState(0x12),GetUnitState(Charcter[p],ConvertUnitState(0x12))+3)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl",Charcter[p],"origin"))
call TimerStart(udg_PstatTimer[p],0.7,false,null)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffFF0000[시스템] - |cffFF0000골드가 부족하다.")
endif
elseif GetItemTypeId(itm)=='I01K' then
if WhatGold(100000,p)then
call SteelGold(100000,p)
call SetHeroAgi(Charcter[p],GetHeroAgi(Charcter[p],false)+30,true)
if CharcterStat[p]then
call SetUnitState(Charcter[p],ConvertUnitState(0x12),GetUnitState(Charcter[p],ConvertUnitState(0x12))+30)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl",Charcter[p],"origin"))
call TimerStart(udg_PstatTimer[p],0.7,false,null)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffFF0000[시스템] - |cffFF0000골드가 부족하다.")
endif
elseif GetItemTypeId(itm)=='I01L' then
if WhatGold(10000,p)then
call SteelGold(10000,p)
call SetHeroInt(Charcter[p],GetHeroInt(Charcter[p],false)+3,true)
if not CharcterStat[p]then
call SetUnitState(Charcter[p],ConvertUnitState(0x12),GetUnitState(Charcter[p],ConvertUnitState(0x12))+3)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl",Charcter[p],"origin"))
call TimerStart(udg_PstatTimer[p],0.7,false,null)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffFF0000[시스템] - |cffFF0000골드가 부족하다.")
endif
elseif GetItemTypeId(itm)=='I01M' then
if WhatGold(100000,p)then
call SteelGold(100000,p)
call SetHeroInt(Charcter[p],GetHeroInt(Charcter[p],false)+30,true)
if not CharcterStat[p]then
call SetUnitState(Charcter[p],ConvertUnitState(0x12),GetUnitState(Charcter[p],ConvertUnitState(0x12))+30)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl",Charcter[p],"origin"))
call TimerStart(udg_PstatTimer[p],0.7,false,null)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffFF0000[시스템] - |cffFF0000골드가 부족하다.")
endif
elseif GetItemTypeId(itm)=='I01N' then
if WhatGold(10000,p)then
call SteelGold(10000,p)
if(GetUnitLevel(Charcter[p])<=300 and LoadBoolean(System,p,$32B05931))or(GetUnitLevel(Charcter[p])<=200 and not LoadBoolean(System,p,$32B05931))then
call SetHeroLevel(Charcter[p],GetUnitLevel(Charcter[p])+1,true)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffFF0000[시스템] - 이미 최대 레벨이라 무효되었다. 돈은 제작자 주머니에 잘 저장하겠다.")
endif
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffFF0000[시스템] - |cffFF0000골드가 부족하다.")
endif
elseif GetItemTypeId(itm)=='I01O' then
if WhatGold(100000,p)then
call SteelGold(100000,p)
if(GetUnitLevel(Charcter[p])<=300 and LoadBoolean(System,p,$32B05931))or(GetUnitLevel(Charcter[p])<=200 and not LoadBoolean(System,p,$32B05931))then
if GetUnitLevel(Charcter[p])>=190 and not LoadBoolean(System,p,$32B05931)then
call SetHeroLevel(Charcter[p],GetUnitLevel(Charcter[p])+(200-GetUnitLevel(Charcter[p])),true)
else
call SetHeroLevel(Charcter[p],GetUnitLevel(Charcter[p])+10,true)
endif
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffFF0000[시스템] - 이미 최대 레벨이라 무효되었다. 돈은 제작자 주머니에 잘 저장하겠다.")
endif
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffFF0000[시스템] - |cffFF0000골드가 부족하다.")
endif
elseif GetItemTypeId(itm)=='I01G' then
if WhatGold(80000,p)then
call SteelGold(80000,p)
set ArtChoiceTicket[p]=ArtChoiceTicket[p]+1
call SetPlayerState(pl,ConvertPlayerState(2),ArtChoiceTicket[p])
if ArtChoiceTicket[p]>=1 and ArtChoiceTicketU[p]==null then
set bj_lastCreatedUnit=CreateUnit(pl,'sys4',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),0)
set ArtChoiceTicketU[p]=bj_lastCreatedUnit
endif
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700티켓 구입으로 아티팩트 티켓을 1장 얻었다.")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffFF0000[시스템] - |cffFF0000골드가 부족하다.")
endif
elseif GetItemTypeId(itm)=='I01Q' then
set ArtChoiceTicket[p]=ArtChoiceTicket[p]-1
call SetPlayerState(pl,ConvertPlayerState(2),ArtChoiceTicket[p])
if ArtChoiceTicket[p]<=0 then
call RemoveUnit(ArtChoiceTicketU[p])
endif
call SteelGold(-80000,p)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700티켓을 돈으로 반환했다.")
endif
set t=CreateTimer()
call SaveItemHandle(udg_Hash,GetHandleId(t),$CDB28B13,itm)
call TimerStart(t,0.01,false,function itemRemover)
set t=null
elseif GetItemTypeId(itm)=='I01C' and Charcter[p]==u then
set tempR=LoadReal(Hash_Stat,p,$A053013A)+0.1
call SaveReal(Hash_Stat,p,$A053013A,tempR)
set Luck[p]=tempR
elseif GetItemType(itm)==ConvertItemType(7)and itemTypeCheck2(u,1)then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 다른 공격 아이템을 소지중입니다.")
set given=CreateItem(GetItemTypeId(itm),GetUnitX(u),GetUnitY(u))
call SaveItemHandle(udg_Hash,p,$C51B137D,itm)
call itemGet(p)
call SetItemPosition(itm,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call RemoveItem(itm)
elseif GetItemType(itm)==ConvertItemType(7)and not itemTypeCheck2(u,1)and Charcter[p]==u then
call SaveItemHandle(udg_Hash,p,$C51B137D,itm)
call itemGet(p)
elseif GetItemType(itm)==ConvertItemType(5)and itemTypeCheck2(u,2)then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 다른 방어 아이템을 소지중입니다.")
set given=CreateItem(GetItemTypeId(itm),GetUnitX(u),GetUnitY(u))
call SaveItemHandle(udg_Hash,p,$C51B137D,itm)
call itemGet(p)
call SetItemPosition(itm,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call RemoveItem(itm)
elseif GetItemType(itm)==ConvertItemType(5)and not itemTypeCheck2(u,2)and Charcter[p]==u then
call SaveItemHandle(udg_Hash,p,$C51B137D,itm)
call itemGet(p)
elseif GetItemType(itm)==ConvertItemType(4)and itemTypeCheck3(u,GetItemTypeId(itm),itm)then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 3개의 지혜 아이템을 소지중이거나 중복착용 물품입니다.")
set given=CreateItem(GetItemTypeId(itm),GetUnitX(u),GetUnitY(u))
call SaveItemHandle(udg_Hash,p,$C51B137D,itm)
call itemGet(p)
call SetItemPosition(itm,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
call RemoveItem(itm)
elseif GetItemType(itm)==ConvertItemType(4)and not itemTypeCheck3(u,GetItemTypeId(itm),itm)and Charcter[p]==u then
call SaveItemHandle(udg_Hash,p,$C51B137D,itm)
call itemGet(p)
elseif GetItemType(itm)==ConvertItemType(2)then
call itemCharge(itm,u)
endif
set t=null
set t2=null
set itm=null
set u=null
set given=null
set tempItem=null
set pl=null
endfunction
function InitTrig_Main_Skill takes nothing returns nothing
set gg_trg_Main_Skill=CreateTrigger()
call TriggerAddAction(gg_trg_Main_Skill,function Trig_Main_Skill_Actions)
endfunction
function Trig_Item_Lost_Actions takes nothing returns nothing
local item itm=GetManipulatedItem()
local unit u=GetTriggerUnit()
local player pl=GetOwningPlayer(u)
local integer p=GetPlayerId(pl)+1
local real tempR
if GetItemType(itm)==ConvertItemType(7)then
call SaveItemHandle(udg_Hash,p,$C51B137D,itm)
call itemLost(p)
elseif GetItemType(itm)==ConvertItemType(5)then
call SaveItemHandle(udg_Hash,p,$C51B137D,itm)
call itemLost(p)
elseif GetItemType(itm)==ConvertItemType(4)then
call SaveItemHandle(udg_Hash,p,$C51B137D,itm)
call itemLost(p)
elseif GetItemTypeId(itm)=='I01C' and Charcter[p]==u then
set tempR=LoadReal(Hash_Stat,p,$A053013A)-0.1
call SaveReal(Hash_Stat,p,$A053013A,tempR)
set Luck[p]=tempR
endif
set itm=null
set u=null
set pl=null
endfunction
function InitTrig_Item_Lost takes nothing returns nothing
set gg_trg_Item_Lost=CreateTrigger()
call TriggerAddAction(gg_trg_Item_Lost,function Trig_Item_Lost_Actions)
endfunction
function Trig_water_Quest_Actions takes nothing returns nothing
local item given
local unit u=GetEnteringUnit()
if IsUnitType(GetEnteringUnit(),ConvertUnitType(0))and GetInventoryIndexOfItemType(GetEnteringUnit(),'I01A')>0 then
call RemoveItem(GetItemOfTypeFromUnit(GetEnteringUnit(),'I01A'))
set given=CreateItem('I00G',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",u,"origin"))
endif
set given=null
set u=null
endfunction
function InitTrig_water_Quest takes nothing returns nothing
set gg_trg_water_Quest=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_water_Quest,gg_rct_water_plz)
call TriggerAddAction(gg_trg_water_Quest,function Trig_water_Quest_Actions)
endfunction
function Trig_water_Quest2_Actions takes nothing returns nothing
local unit u=GetEnteringUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer a
local item given
if GetInventoryIndexOfItemType(u,'I00H')>0 and LoadBoolean(udg_Hash,p,$C5236945)then
call GivenExp(300,p)
call GivenGold(500,p,u)
call RemoveItem(GetItemOfTypeFromUnit(u,'I00H'))
call SaveBoolean(udg_Hash,p,$C5236945,false)
call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,5,"|cff32cd32[농장 주인] |cffe9967a: 글을 읽고왔나? 농장일좀 도와주게.")
call DestroyEffect(AddSpecialEffectTarget("UI\\Feedback\\GoldCredit\\GoldCredit.mdl",u,"chest"))
endif
if IsUnitType(u,ConvertUnitType(0))and GetInventoryIndexOfItemType(u,'I00G')>0 and LoadBoolean(udg_Hash,p,$18C96DCD)then
call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,5,"|cff32cd32[농장 주인] |cffe9967a: 도와줘서 고맙네! 보상일세")
set a=LoadInteger(Hash,p,$A7EDA7FA)+1
call SaveInteger(Hash,p,$A7EDA7FA,a)
if a>=5 then
call GivenExp(1200,p)
call GivenGold(700,p,u)
call SaveInteger(Hash,p,$A7EDA7FA,0)
call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,5,"|cffe9967a보상 2배 획득!")
if not LoadBoolean(udg_Hash,p,$5D350321)then
call SaveBoolean(udg_Hash,p,$5D350321,true)
set given=CreateItem('I01C',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,5,"|cffe9967a보상 2배까지 : ("+I2S(a)+"/5)")
call GivenExp(600,p)
call GivenGold(350,p,u)
endif
call DestroyEffect(AddSpecialEffectTarget("UI\\Feedback\\GoldCredit\\GoldCredit.mdl",u,"chest"))
call RemoveItem(GetItemOfTypeFromUnit(u,'I00G'))
call SaveBoolean(udg_Hash,p,$18C96DCD,false)
endif
set u=null
set given=null
endfunction
function InitTrig_water_Quest2 takes nothing returns nothing
set gg_trg_water_Quest2=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_water_Quest2,gg_rct_water_plz2)
call TriggerAddAction(gg_trg_water_Quest2,function Trig_water_Quest2_Actions)
endfunction
function Trig_item_Quest_Actions takes nothing returns nothing
local unit u=GetEnteringUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
if GetInventoryIndexOfItemType(u,'I00I')>0 and LoadBoolean(udg_Hash,p,$BF3FCE5D)then
call GivenExp(300,p)
call GivenGold(500,p,u)
call RemoveItem(GetItemOfTypeFromUnit(u,'I00I'))
call SaveBoolean(udg_Hash,p,$BF3FCE5D,false)
call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,5,"|cff32cd32[장비 상점 주인] |cffe9967a: 으응..? 뭐라고.. 소개서?? 아무거나 대충 집어가..")
call DestroyEffect(AddSpecialEffectTarget("UI\\Feedback\\GoldCredit\\GoldCredit.mdl",u,"chest"))
endif
set u=null
endfunction
function InitTrig_item_Quest takes nothing returns nothing
set gg_trg_item_Quest=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_item_Quest,gg_rct_item_plz)
call TriggerAddAction(gg_trg_item_Quest,function Trig_item_Quest_Actions)
endfunction
function Trig_traning_Quest_Actions takes nothing returns nothing
local unit u=GetEnteringUnit()
local integer p=GetPlayerId(GetOwningPlayer(u))+1
if GetInventoryIndexOfItemType(u,'I00J')>0 and LoadBoolean(udg_Hash,p,$67DEB377)then
call GivenExp(300,p)
call GivenGold(500,p,u)
call RemoveItem(GetItemOfTypeFromUnit(u,'I00J'))
call SaveBoolean(udg_Hash,p,$67DEB377,false)
call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,0,5,"|cff32cd32[기사단장] |cffe9967a: 훈련장에 온걸 환영하네! 나는 재료 교환도 맡아서 해주고있다네.")
call DestroyEffect(AddSpecialEffectTarget("UI\\Feedback\\GoldCredit\\GoldCredit.mdl",u,"chest"))
endif
set u=null
endfunction
function InitTrig_traning_Quest takes nothing returns nothing
set gg_trg_traning_Quest=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_traning_Quest,gg_rct_traning_room)
call TriggerAddAction(gg_trg_traning_Quest,function Trig_traning_Quest_Actions)
endfunction
function Trig_Frig_Actions takes nothing returns nothing
local integer a=0
local integer b
local unit u
loop
exitwhen GetExpiredTimer()==Frig[a]
set a=a+1
endloop
set u=Charcter[a]
call UnitRemoveAbility(u,'A00B')
call TimerStart(udg_PstatTimer[a],0.00,false,null)
set u=null
endfunction
function InitTrig_Frig takes nothing returns nothing
set gg_trg_Frig=CreateTrigger()
call TriggerAddAction(gg_trg_Frig,function Trig_Frig_Actions)
endfunction
function Trig_Mono_Actions takes nothing returns nothing
local integer a=0
local integer b
local integer d
local unit u
local unit c
local real dmg
local integer g=s__party_create()
loop
exitwhen GetExpiredTimer()==Mono[a]
set a=a+1
endloop
set u=Charcter[a]
set d=GetHeroAgi(u,true)
set dmg=(d*6)+(GetUnitState(u,ConvertUnitState(1))*0.4)
set dmg=dmg*(1+(1-(GetUnitState(u,ConvertUnitState(0))/GetUnitState(u,ConvertUnitState(1)))))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),500*Skrange[a],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,1,1,false,1,'item')
endif
endloop
set u=null
set c=null
call s__party_deallocate((g))
endfunction
function InitTrig_Mono takes nothing returns nothing
set gg_trg_Mono=CreateTrigger()
call TriggerAddAction(gg_trg_Mono,function Trig_Mono_Actions)
endfunction
function Trig_Latika_Actions takes nothing returns nothing
local integer a=0
local unit u
loop
exitwhen GetExpiredTimer()==Latika[a]
set a=a+1
endloop
set u=Charcter[a]
call SaveBoolean(Hash_Stat,GetPlayerId(GetOwningPlayer(u))+1,$A5435A9D,false)
set u=null
endfunction
function InitTrig_Latika takes nothing returns nothing
set gg_trg_Latika=CreateTrigger()
call TriggerAddAction(gg_trg_Latika,function Trig_Latika_Actions)
endfunction
function Trig_HackterTrig_Actions takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==Hackter[a]
set a=a+1
endloop
call SaveBoolean(Hash_Stat,a,$B657F083,false)
endfunction
function InitTrig_HackterTrig takes nothing returns nothing
set gg_trg_HackterTrig=CreateTrigger()
call TriggerAddAction(gg_trg_HackterTrig,function Trig_HackterTrig_Actions)
endfunction
function TelpoCool takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
local integer time=LoadInteger(udg_Hash,GetHandleId(t),1)
call IssueImmediateOrder(u,"stop")
call EXSetAbilityState(EXGetUnitAbility(u,'SY02'),ABILITY_STATE_COOLDOWN,time)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function LuniBoom takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer g=s__party_create()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit gunit
local real dmg
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
set dmg=LoadReal(udg_Hashtable,GetHandleId(u),$DC6A3962)*2.0
call EFsettingXY(p,"war3mapImported\\@EF_Blue--Zhendi.mdl",1.0,GetUnitX(u),GetUnitY(u),1.0,0,1.0,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),800*Skrange[p],null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckPlayerGroup(gunit)then
call Damage(u,gunit,dmg,4,2,false,1,'item')
endif
endloop
call SaveReal(udg_Hashtable,GetHandleId(u),$DC6A3962,0)
call SaveReal(udg_Hashtable,GetHandleId(u),$525D985A,0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
call s__party_deallocate((g))
set u=null
set gunit=null
endfunction
function NioT takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==Nio[a]
set a=a+1
endloop
call SaveBoolean(udg_Hash,a,$226678D,false)
endfunction
function LuniT takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==Luni[a]
set a=a+1
endloop
call SaveBoolean(udg_Hash,a,$4187570C,false)
endfunction
function ElbiraT takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==Elbira[a]
set a=a+1
endloop
call SaveBoolean(udg_Hash,a,$1EAA65F3,false)
endfunction
function TobariT takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==Tobari[a]
set a=a+1
endloop
call SaveBoolean(udg_Hash,a,$8605C224,false)
endfunction
function GaromT takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==Garom[a]
set a=a+1
endloop
call SaveBoolean(udg_Hash,a,$40B25D0F,false)
endfunction
function AnnT takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==Ann[a]
set a=a+1
endloop
call SaveBoolean(udg_Hash,a,$D3FEDE5C,false)
endfunction
function YuzukiCounterT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),99)
if stage==0 then
call SaveInteger(udg_Hash,GetHandleId(t),99,11)
if not LoadBoolean(udg_Hash,p,$7DB6D651)then
call TimerStart(t,12,false,function YuzukiCounterT)
call itemCoolTime(GetItemOfTypeFromUnit(Charcter[p],'I609'),12)
else
call UnitRemoveAbility(Charcter[p],'A01A')
call TimerStart(t,20,false,function YuzukiCounterT)
call itemCoolTime(GetItemOfTypeFromUnit(Charcter[p],'I609'),20)
call SaveBoolean(udg_Hash,p,$7DB6D651,false)
endif
else
call SaveBoolean(udg_Hash,p,$3048CB4A,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function R065Timer takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveBoolean(udg_Hash,p,$8E12174C,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function AluzardTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer a=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
if GetUnitState(Charcter[a],ConvertUnitState(0))>=GetUnitState(Charcter[a],ConvertUnitState(1))*0.05 then
call SetUnitState(Charcter[a],ConvertUnitState(0),GetUnitState(Charcter[a],ConvertUnitState(0))-GetUnitState(Charcter[a],ConvertUnitState(1))*0.007)
endif
set t=null
endfunction
function GaromTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$F8F856EA)
call StatUP(p,15,"피감")
call SaveBoolean(Hash_Stat,p,$D7D5DB,false)
call DestroyEffect(ef)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set ef=null
endfunction
function NioActive takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local unit gunit
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local real dmg=GetHeroInt(u,true)*50
local integer g=s__party_create()
local integer tempI=0
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,0.01,false,function NioActive)
if stage==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@IS_Nio.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if stage<=20 and IsPointPathableALL(GetUnitX(dummy)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)),GetUnitY(dummy)+(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))then
call SetUnitX(dummy,GetUnitX(dummy)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD)))
call SetUnitY(dummy,GetUnitY(dummy)+(((100)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD)))
if ModuloInteger(stage,4)==0 then
call EFsettingXY(p,"war3mapImported\\@EF_effectgreen.mdl",1.0,GetUnitX(dummy),GetUnitY(dummy),2.0*Skrange[p],(GetRandomReal(0.0,360.0)),1.0,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_WindCirclefaster.mdl",1.0,GetUnitX(dummy),GetUnitY(dummy),2.0*Skrange[p],(GetRandomReal(0.0,360.0)),1.0,0,0,0)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),450*Skrange[p],null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckPlayerGroup(gunit)and LoadBoolean(udg_Hash,GetHandleId(t),GetHandleId(gunit))==false then
call Damage(u,gunit,dmg,2,3,false,1,'item')
call SaveBoolean(udg_Hash,GetHandleId(t),GetHandleId(gunit),true)
if GetUnitAbilityLevel(gunit,'Bcri')>=1 then
call Stun(u,gunit,4.0)
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagTextBJ(bj_lastCreatedTextTag,"기절시킴!",20)
call SetTextTagPosUnit(bj_lastCreatedTextTag,gunit,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.8)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag,20,GetRandomInt(45,75))
call SetTextTagFadepointBJ(bj_lastCreatedTextTag,0.5)
endif
call SlowApply(u,gunit,4.0,0.5)
endif
endloop
else
call RemoveUnit(dummy)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set gunit=null
set dummy=null
call s__party_deallocate((g))
endfunction
function AmaActive takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local real FirstLocX=LoadReal(udg_Hash,GetHandleId(t),$D3F9E925)
local real FirstLocY=LoadReal(udg_Hash,GetHandleId(t),$DECCF61B)
local real MiddleLocX=LoadReal(udg_Hash,GetHandleId(t),$8A2F2B5)
local real MiddleLocY=LoadReal(udg_Hash,GetHandleId(t),$34AA385E)
local real tempR=LoadReal(udg_Hash,GetHandleId(t),$7C15A41A)
local real tempI2=GetRandomInt(1,3)
local unit u=Charcter[p]
local real dmg=GetHeroInt(u,true)*4+GetUnitState(u,ConvertUnitState(3))*0.04
if tempR<=1.00 then
call SetUnitX(dummy,(FirstLocX*((1-tempR)*(1-tempR)))+((GetUnitX(tar)*(tempR*tempR))+MiddleLocX*(2.00*(tempR*(1.00-tempR)))))
call SetUnitY(dummy,(FirstLocY*((1-tempR)*(1-tempR)))+(GetUnitY(tar)*(tempR*tempR))+MiddleLocY*(2.00*(tempR*(1-tempR))))
set tempR=(tempR+0.03)
call SaveReal(udg_Hash,GetHandleId(t),$7C15A41A,tempR)
call TimerStart(t,0.02,false,function AmaActive)
else
if LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Amarilis_DMG1.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,1)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Amarilis_DMG2.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Amarilis_DMG3.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,3)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Amarilis_DMG1.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,4)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Amarilis_DMG2.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,5)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)>=5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Amarilis_DMG3.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,tar)
set bj_lastCreatedUnit=CreateUnit(Player(p-1),'sys7',GetUnitX(tar),GetUnitY(tar),270)
call imagedummySET(p,bj_lastCreatedUnit,"Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl")
call KillUnit(bj_lastCreatedUnit)
call Damage(u,tar,dmg,2,2,false,1,'I604')
call RemoveUnit(dummy)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set dummy=null
set tar=null
set u=null
endfunction
function AnnActive takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local unit u=Charcter[p]
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$DA25243A)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$8BEF6842)
local unit gunit
local real dmg=GetHeroInt(u,true)*100
local integer g=s__party_create()
local integer tempI=0
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
call TimerStart(t,0.04,false,function AnnActive)
if stage==1 then
call EFsettingXY(p,"war3mapImported\\@EF_SpecialAnimeDustWave.mdl",1.0,tempX,tempY,6.0*Skrange[p],(GetRandomReal(0.0,360.0)),0.8,0,0,0)
endif
if stage==31 then
call ND(Player(p-1),2.0,30)
call EFsettingXY(p,"war3mapImported\\@EF_megumin-6.mdl",0,tempX,tempY,2.0*Skrange[p],(GetRandomReal(0.0,360.0)),1.2,0,0,0)
set tempI=GetRandomInt(1,2)
if tempI==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_KeroBeros1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_KeroBeros2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
endif
call PlaySoundOnUnit(udg_SND,100,u)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,1000*Skrange[p],null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckPlayerGroup(gunit)then
call Damage(u,gunit,dmg,2,1,false,1,'A01X')
endif
endloop
endif
if stage==32 then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
set gunit=null
call s__party_deallocate((g))
endfunction
function EGO takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
local unit u=Charcter[p]
if GetUnitTypeId(u)!='HR21' then
call Stun(u,u,5)
endif
call TimerStart(RedMist[p],15,true,null)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function shuhiddenT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer loopA=0
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveInteger(udg_Hash,GetHandleId(t),0,stage+1)
if stage==0 then
loop
exitwhen loopA>=Playint
set loopA=loopA+1
call DisplayTimedTextToPlayer(Player(PP[loopA]-1),0,0,2.67,"|cffff4848손|r|cffff5252을|r|cffff5e5e |r|cffff6969잡|r|cffff7474고|r|cffff7f7f |r|cffff8b8b있|r|cffff9696어|r|cffffa1a1줘|r")
endloop
call TimerStart(t,2.67,false,function shuhiddenT)
elseif stage==1 then
loop
exitwhen loopA>=Playint
set loopA=loopA+1
call DisplayTimedTextToPlayer(Player(PP[loopA]-1),0,0,7.27,"|cffff4848너|r|cffff4e4e와|r|cffff5454 |r|cffff5a5a둘|r|cffff6161이|r|cffff6767 |r|cffff6e6e영|r|cffff7474원|r|cffff7a7a할|r|cffff8181 |r|cffff8787거|r|cffff8e8e라|r|cffff9494 |r|cffff9a9a해|r|cffffa1a1줘|r")
endloop
call TimerStart(t,7.27,false,function shuhiddenT)
elseif stage==2 then
loop
exitwhen loopA>=Playint
set loopA=loopA+1
call DisplayTimedTextToPlayer(Player(PP[loopA]-1),0,0,11.7,"|cffff4848이|r|cffff4f4f어|r|cffff5656진|r|cffff5e5e |r|cffff6565그|r|cffff6d6d |r|cffff7474손|r|cffff7c7c은|r|cffff8383 |r|cffff8b8b따|r|cffff9292스|r|cffff9999하|r|cffffa1a1고|r")
endloop
call TimerStart(t,11.7,false,function shuhiddenT)
elseif stage==3 then
loop
exitwhen loopA>=Playint
set loopA=loopA+1
call DisplayTimedTextToPlayer(Player(PP[loopA]-1),0,0,3,"|cffff4848상|r|cffff5e5e냥|r|cffff7474했|r|cffff8b8b었|r|cffffa1a1어|r")
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function shuhidden takes nothing returns nothing
local timer t=CreateTimer()
local integer loopA=0
loop
exitwhen loopA>=Playint
set loopA=loopA+1
call DisplayTimedTextToPlayer(Player(PP[loopA]-1),0,0,4.3,"|cffff4848놓|r|cffff5050치|r|cffff5858지|r|cffff6060 |r|cffff6868말|r|cffff7070아|r|cffff7878줘|r|cffff8080 |r|cffff8989,|r|cffff9191 |r|cffff9999꼬|r|cffffa1a1옥|r")
call FilterBasic(Player(PP[loopA]-1),2.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,75.00,90.00,0.00,100.00,75.00,90.00,100.00)
endloop
call SaveInteger(udg_Hash,GetHandleId(t),0,0)
call TimerStart(t,4.3,false,function shuhiddenT)
set t=null
endfunction
function Letuel takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveInteger(Hash_Stat,p,$C311FD16,0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function YoumuNBTimer takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==YoumuNBT[a]
set a=a+1
endloop
call SaveInteger(System,a,$71F4A76C,0)
endfunction
function PhoenixGirlSkillCoolTimeReduce takes nothing returns nothing
local integer a=0
loop
exitwhen GetExpiredTimer()==PhoenixGirl[a]
set a=a+1
endloop
call SaveInteger(Hash_Stat,a,$79CE8FB3,0)
endfunction
function SkillCooldown takes nothing returns nothing
local timer t=GetExpiredTimer()
local timer t2
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer skillcode=LoadInteger(udg_Hash,GetHandleId(t),$9B55BE3B)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer temp
local integer temp2
local real tempR
if stage==1 then
if LoadBoolean(System,p,$FA9949B7)and LoadInteger(System,p,$71F4A76C)==0 then
call SaveInteger(System,p,$71F4A76C,1)
call ShildSet(u,u,3,GetHeroAgi(u,true)*1)
call TimerStart(YoumuNBT[p],3.0,false,function YoumuNBTimer)
endif
if LoadBoolean(Hash_Stat,p,$D70C6EE6)then
if GetUnitAbilityLevel(u,'A00B')<=4 then
call SetUnitAbilityLevel(u,'A00B',GetUnitAbilityLevel(u,'A00B')+1)
call UnitAddAbility(u,'A00B')
endif
call BuffCall(u,'BI03',6,false,false)
call TimerStart(Frig[p],6.0,false,null)
call TimerStart(udg_PstatTimer[p],0.00,false,null)
endif
if LoadBoolean(Hash_Stat,p,$9B5D7717)and LoadInteger(Hash_Stat,p,$C311FD16)==0 then
set t2=CreateTimer()
call SaveInteger(Hash_Stat,p,$C311FD16,1)
call SaveInteger(udg_Hash,GetHandleId(t2),0,p)
call TimerStart(t2,3.0,false,function Letuel)
call itemCoolTime(GetItemOfTypeFromUnit(Charcter[p],'I633'),3)
call SetUnitState(u,ConvertUnitState(0),GetUnitState(u,ConvertUnitState(0))+(GetUnitState(u,ConvertUnitState(1))*0.1))
call SetUnitState(u,ConvertUnitState(2),GetUnitState(u,ConvertUnitState(2))+(GetUnitState(u,ConvertUnitState(3))*0.1))
call EFsettingU(p,"war3mapImported\\@Aura_Athelas Silver.mdl",0.5,u,"origin")
endif
if LoadBoolean(Hash_Stat,p,$6AF32C8D)and LoadInteger(Hash_Stat,p,$79CE8FB3)==0 then
call SaveInteger(Hash_Stat,p,$79CE8FB3,1)
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillD[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillD[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillD[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillD[p]),ABILITY_STATE_COOLDOWN)*0.05))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillQ[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillQ[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillQ[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillQ[p]),ABILITY_STATE_COOLDOWN)*0.05))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillQQ[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillQQ[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillQQ[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillQQ[p]),ABILITY_STATE_COOLDOWN)*0.05))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillW[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillW[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillW[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillW[p]),ABILITY_STATE_COOLDOWN)*0.05))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillWW[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillWW[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillWW[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillWW[p]),ABILITY_STATE_COOLDOWN)*0.05))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillE[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillE[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillE[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillE[p]),ABILITY_STATE_COOLDOWN)*0.05))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillEE[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillEE[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillEE[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillEE[p]),ABILITY_STATE_COOLDOWN)*0.05))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillR[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillR[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillR[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillR[p]),ABILITY_STATE_COOLDOWN)*0.05))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillT[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillT[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillT[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillT[p]),ABILITY_STATE_COOLDOWN)*0.05))
endif
call TimerStart(PhoenixGirl[p],3.0,false,function PhoenixGirlSkillCoolTimeReduce)
call itemCoolTime(GetItemOfTypeFromUnit(Charcter[p],'I600'),3)
endif
call EXSetAbilityState(EXGetUnitAbility(u,skillcode),ABILITY_STATE_COOLDOWN,EXGetAbilityDataReal(EXGetUnitAbility(u,skillcode),1,ABILITY_DATA_COOL)*ct[p])
if LoadBoolean(System,p,$E4CAF050)then
set temp=GetRandomint(1,2)
if temp<=12 then
set temp2=LoadInteger(Hash_Stat,p,$B7E7C8AD)+200
set temp2=R2I((100*200/(200+temp2)))
call EXSetAbilityState(EXGetUnitAbility(u,skillcode),ABILITY_STATE_COOLDOWN,EXGetAbilityDataReal(EXGetUnitAbility(u,skillcode),1,ABILITY_DATA_COOL)*(temp2*0.01))
endif
if temp>=80 then
call EXSetAbilityState(EXGetUnitAbility(u,skillcode),ABILITY_STATE_COOLDOWN,EXGetAbilityDataReal(EXGetUnitAbility(u,skillcode),1,ABILITY_DATA_COOL)*1.2)
endif
endif
if LoadBoolean(Hash_Stat,p,$60333C98)then
call SaveInteger(Hash_Stat,p,$9202DC38,GetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I636')))
if GetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I636'))==7 then
call SetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I636'),0)
call EFsettingU(p,"war3mapImported\\@EF_Blink New Sky.mdl",0.0,u,"chest")
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Deus7stack.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,70,u)
else
call SetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I636'),GetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I636'))+1)
endif
endif
set tempR=LoadReal(udg_Hash,skillcode,$2113522E)
if tempR>0 and LoadBoolean(System,p,$55D3C47F)then
set tempR=(tempR/GetUnitState(u,ConvertUnitState(1)))*100
call BuffCall(u,'AT05',tempR,true,false)
if not LoadBoolean(System,p,$77EBFF9B)then
call SaveBoolean(System,p,$77EBFF9B,true)
set tempR=LoadReal(Hash_Stat,p,$164C40C9)
call SaveReal(Hash_Stat,p,$164C40C9,tempR+0.2)
set temp=LoadInteger(Hash_Stat,p,$C18D16A0)
call SaveInteger(Hash_Stat,p,$C18D16A0,temp+60)
set temp=LoadInteger(Hash_Stat,p,$924944F9)
call SaveInteger(Hash_Stat,p,$924944F9,temp+10)
set temp=LoadInteger(Hash_Stat,p,$8885555B)
call SaveInteger(Hash_Stat,p,$8885555B,temp+12)
call TimerStart(udg_infoRe[p],0.00,false,null)
endif
endif
if(LoadBoolean(System,p,$F3C2DB66)or LoadBoolean(udg_Hash,p,$664E8F23))and skillcode==ChSkillT[p]and not LoadBoolean(System,p,$E1F35AF7)then
if LoadBoolean(System,p,$F3C2DB66)and not LoadBoolean(udg_Hash,p,$664E8F23)then
set temp2=LoadInteger(System,p,$5A7CB292)
call SaveInteger(udg_Hash,GetHandleId(t),$D627626A,temp2)
call SetHeroAgi(u,GetHeroAgi(u,false)+500,true)
call SetHeroInt(u,GetHeroInt(u,false)+500,true)
call BuffCall(u,'AT15',15,false,false)
call TimerStart(t,15,false,function SkillCooldown)
elseif LoadBoolean(System,p,$F3C2DB66)and LoadBoolean(udg_Hash,p,$664E8F23)then
set temp2=20
call SaveInteger(udg_Hash,GetHandleId(t),$D627626A,temp2)
call SetHeroAgi(u,GetHeroAgi(u,false)+1500,true)
call SetHeroInt(u,GetHeroInt(u,false)+1500,true)
call BuffCall(u,'AT16',30,false,false)
call TimerStart(t,30,false,function SkillCooldown)
endif
set temp=LoadInteger(Hash_Stat,p,$C46B0D8B)+temp2
call SaveInteger(Hash_Stat,p,$C46B0D8B,temp)
set temp=LoadInteger(Hash_Stat,p,$5B2587EB)+temp2
call SaveInteger(Hash_Stat,p,$5B2587EB,temp)
call TimerStart(udg_infoRe[p],0.0,false,null)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,2)
call SaveBoolean(System,p,$E1F35AF7,true)
call EFsettingU(p,"war3mapImported\\@EF_az_lina_f.mdl",15,u,"origin")
else
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
elseif stage==2 then
set temp2=LoadInteger(udg_Hash,GetHandleId(t),$D627626A)
if LoadBoolean(System,p,$F3C2DB66)and not LoadBoolean(udg_Hash,p,$664E8F23)then
call SetHeroAgi(u,GetHeroAgi(u,false)-500,true)
call SetHeroInt(u,GetHeroInt(u,false)-500,true)
elseif LoadBoolean(System,p,$F3C2DB66)and LoadBoolean(udg_Hash,p,$664E8F23)then
call SetHeroAgi(u,GetHeroAgi(u,false)-1500,true)
call SetHeroInt(u,GetHeroInt(u,false)-1500,true)
endif
set temp=LoadInteger(Hash_Stat,p,$C46B0D8B)-temp2
call SaveInteger(Hash_Stat,p,$C46B0D8B,temp)
set temp=LoadInteger(Hash_Stat,p,$5B2587EB)-temp2
call SaveInteger(Hash_Stat,p,$5B2587EB,temp)
call SaveBoolean(System,p,$E1F35AF7,false)
call TimerStart(udg_infoRe[p],0.0,false,null)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set t2=null
set u=null
endfunction
function Mugetsu takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local player pl=Player(p+1)
local location loc=GetUnitLoc(u)
local real tempX
local real tempY
local unit c
local integer a
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==10 then
set tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@AF_Shio_Ichigo_Wy_Tx_Wy.mdl",0,tempX,tempY,3,angle,1,0,0,0)
set tempX=GetUnitX(u)+(((-150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set a=0
loop
exitwhen not IsPointPathableALL(tempX,tempY)or a==20
set a=a+1
set tempX=GetUnitX(u)+(((a*450)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((a*450)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@AF_Shio_Ichigo_Wy_Tx_Wy.mdl",0,tempX,tempY,3,angle,1,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,800,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and not IsUnitInGroup(c,MultyGroup[p+90])then
call Damage(u,c,(GetHeroAgi(Charcter[p],true)+GetUnitState(Charcter[p],ConvertUnitState(0x14)))*100,3,0,false,1,0)
call GroupAddUnit(MultyGroup[p+90],c)
endif
endloop
endloop
call GroupClear(MultyGroup[p+90])
call DestroyGroup(MultyGroup[p+90])
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call TimerStart(t,0.05,false,function Mugetsu)
call EFsettingU(p,"war3mapImported\\@EF_Effect_Invisibility_Target_Black.mdx",0,u,"origin")
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set pl=null
endfunction
function Dash takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hashtable,GetHandleId(t),$91D99C00)
local unit u=LoadUnitHandle(udg_Hashtable,GetHandleId(t),$63B255A1)
local unit dummy
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer DashWhat=LoadInteger(udg_Hashtable,GetHandleId(t),$1B9D399E)
local real a=LoadReal(udg_Hashtable,GetHandleId(t),$D1AFF844)
local real b=LoadReal(udg_Hashtable,GetHandleId(t),$3F01E1A6)
local real dmg=0
local integer tempI=0
local integer g=s__party_create()
call SaveInteger(udg_Hashtable,GetHandleId(t),$91D99C00,stage+1)
if stage==0 then
if DashWhat==1 then
call EXSetAbilityState(EXGetUnitAbility(u,'PD00'),ABILITY_STATE_COOLDOWN,DashCool[p])
endif
if LoadBoolean(Hash_Stat,p,$3B76FF1A)then
set tempI=GetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I654'))
if tempI<100 then
set tempI=tempI+1
call SaveInteger(Hash_Stat,p,$929FD517,tempI)
call SetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I654'),LoadInteger(Hash_Stat,p,$929FD517))
endif
endif
if LoadBoolean(System,p,$820FB5AF)or LoadBoolean(System,p,$73C0D841)then
set SandeBisut[p]=true
endif
endif
if LoadBoolean(Hash_Stat,p,$3B76FF1A)or LoadBoolean(Hash_Stat,p,$4D0EA1A1)then
if ModuloInteger(stage,3)==0 then
call EFsettingXY(p,"war3mapImported\\@EF_AZ_EarthShaker_A.mdl",0,GetUnitX(u),GetUnitY(u),1*Skrange[p],270,1,0,0,0)
if LoadBoolean(Hash_Stat,p,$4D0EA1A1)then
call EFsettingXY(p,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",0,GetUnitX(u),GetUnitY(u),1*Skrange[p],270,1,0,0,0)
endif
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),400*Skrange[p],null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckPlayerGroup(dummy)and LoadBoolean(udg_Hashtable,GetHandleId(t),GetHandleId(dummy))==false then
if LoadBoolean(Hash_Stat,p,$4D0EA1A1)then
set dmg=GetHeroAgi(u,true)*10
else
set dmg=GetHeroAgi(u,true)*5
endif
set dmg=dmg*(1+(MoveSpd[p]*0.01))
call Damage(u,dummy,dmg,1,3,false,1,0)
call SaveBoolean(udg_Hashtable,GetHandleId(t),GetHandleId(dummy),true)
endif
endloop
endif
if stage<=9 then
if b<=40 then
set stage=10
else
if stage<=7 then
if LoadBoolean(udg_Hash,p,$AB91EED3)then
call SetUnitAnimation(u,"Alternate walk")
else
call SetUnitAnimation(u,"walk")
endif
endif
call SetUnitInvulnerable(u,true)
if GetLocalPlayer()==Player(p-1)and LoadUnitHandle(udg_Hashtable,p,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n|cffFF0000무적")
endif
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),a)
call imagedummy(p,dummy,0.12,2,"walk",Model[p])
if LoadBoolean(System,p,$820FB5AF)and stage==1 or stage==8 then
call invisibleColor(dummy,40,100,255,0,0,0.18,0.01)
elseif LoadBoolean(System,p,$820FB5AF)and stage==2 or stage==9 then
call invisibleColor(dummy,40,100,255,187,0,0.18,0.01)
elseif LoadBoolean(System,p,$820FB5AF)and stage==3 or stage==10 then
call invisibleColor(dummy,40,100,255,255,126,0.18,0.01)
elseif LoadBoolean(System,p,$820FB5AF)and stage==4 or stage==0 then
call invisibleColor(dummy,40,100,29,219,22,0.18,0.01)
elseif LoadBoolean(System,p,$820FB5AF)and stage==5 then
call invisibleColor(dummy,40,100,0,84,255,0.18,0.01)
elseif LoadBoolean(System,p,$820FB5AF)and stage==6 then
call invisibleColor(dummy,40,100,3,0,102,0.18,0.01)
elseif LoadBoolean(System,p,$820FB5AF)and stage==7 then
call invisibleColor(dummy,40,100,95,0,255,0.18,0.01)
else
call invisible(dummy,40.00,100.00,0.18,0.01)
endif
if IsPointPathableALL(GetUnitX(u)+(((DashMove[p])*1.0)*Cos(((a)*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((DashMove[p])*1.0)*Sin(((a)*1.0)*bj_DEGTORAD)))then
call SetUnitX(u,GetUnitX(u)+(((DashMove[p])*1.0)*Cos(((a)*1.0)*bj_DEGTORAD)))
call SetUnitY(u,GetUnitY(u)+(((DashMove[p])*1.0)*Sin(((a)*1.0)*bj_DEGTORAD)))
endif
call SaveReal(udg_Hashtable,GetHandleId(t),$3F01E1A6,b-DashMove[p])
endif
endif
if stage>=10 then
if LoadInteger(udg_Hash,p,$EADDF8B6)==1 then
if CharcterStat[p]==true then
set b=(I2R(GetHeroAgi(u,true))*15)
else
set b=(I2R(GetHeroInt(u,true))*15)
endif
call EFsettingXY(p,"war3mapImported\\@EF_20.mdl",0,GetUnitX(u),GetUnitY(u),1,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_az_siwenpf1_w1_hui.mdl",0,GetUnitX(u),GetUnitY(u),2,270,1,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),500*Skrange[p],null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckPlayerGroup(dummy)then
call Damage(u,dummy,b,4,0,false,1,0)
endif
endloop
endif
call SetUnitInvulnerable(u,false)
if GetLocalPlayer()==Player(p-1)and LoadUnitHandle(udg_Hashtable,p,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n"+I2S(R2I(GetUnitState(u,ConvertUnitState(0x20))))+"")
endif
if LoadBoolean(Hash_Stat,p,$EE4F1B3F)then
call StatChange(p,15,"이속",2)
call EFsettingU(p,"war3mapImported\\@Aura_AZ_LCguanyu_W3_BUFF.mdl",2,u,"chest")
call BuffCall(u,'BI15',2,false,false)
endif
set SandeBisut[p]=false
call RemoveShacull(p)
call GroupRemoveUnit(udg_Mujuk,u)
call FlushChildHashtable(udg_Hashtable,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call TimerStart(t,0.02,false,function Dash)
endif
call s__party_deallocate((g))
set t=null
set u=null
set dummy=null
endfunction
function SandeBeast takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
local integer tempI=0
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),1)
local unit dummy
local real tempX
local real tempY
local real tempX2
local real tempY2
local real tempX3
local real tempY3
local real dmg=0
local real angle=LoadReal(udg_Hash,GetHandleId(t),2)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
set tempX=GetUnitX(u)+(((DashMove[p]*9.25)*1.0)*Cos(((angle-90)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((DashMove[p]*9.25)*1.0)*Sin(((angle-90)*1.0)*bj_DEGTORAD))
set tempX3=GetUnitX(u)+(((DashMove[p]*12.5)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY3=GetUnitY(u)+(((DashMove[p]*12.5)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set tempX2=tempX3+(((DashMove[p]*9.25)*1.0)*Cos(((angle-90)*1.0)*bj_DEGTORAD))
set tempY2=tempY3+(((DashMove[p]*9.25)*1.0)*Sin(((angle-90)*1.0)*bj_DEGTORAD))
call s__FXCURVEDASH_Create()
set s__FXCURVEDASH_Caster[(s__FXCURVEDASH_CFXLast)]=u
set s__FXCURVEDASH_X1[(s__FXCURVEDASH_CFXLast)]=GetUnitX(u)
set s__FXCURVEDASH_Y1[(s__FXCURVEDASH_CFXLast)]=GetUnitY(u)
set s__FXCURVEDASH_X2[(s__FXCURVEDASH_CFXLast)]=tempX
set s__FXCURVEDASH_Y2[(s__FXCURVEDASH_CFXLast)]=tempY
set s__FXCURVEDASH_X3[(s__FXCURVEDASH_CFXLast)]=tempX2
set s__FXCURVEDASH_Y3[(s__FXCURVEDASH_CFXLast)]=tempY2
set s__FXCURVEDASH_X4[(s__FXCURVEDASH_CFXLast)]=tempX3
set s__FXCURVEDASH_Y4[(s__FXCURVEDASH_CFXLast)]=tempY3
set s__FXCURVEDASH_Time[(s__FXCURVEDASH_CFXLast)]=0.5
call s__FXCURVEDASH_Start((s__FXCURVEDASH_CFXLast))
call FilterBasic(Player(p-1),1.0,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,100.00,100.00,30.00,100.00,100.00,100.00,100.00)
call ND(Player(p-1),0.25,25)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_SandeBeast.mp3"),(null),(127),((1)*1.0),TRUE,((5000)*1.0),((4000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call EXSetAbilityState(EXGetUnitAbility(u,'AF15'),ABILITY_STATE_COOLDOWN,(19+DashCool[p]))
set SandeBisut[p]=true
if LoadBoolean(Hash_Stat,p,$3B76FF1A)then
set tempI=GetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I654'))
if tempI<100 then
set tempI=tempI+1
call SaveInteger(Hash_Stat,p,$929FD517,tempI)
call SetItemCharges(GetItemOfTypeFromUnit(Charcter[p],'I654'),LoadInteger(Hash_Stat,p,$929FD517))
endif
endif
endif
if stage<=24 then
call Mujuk(p,u)
if stage<=15 then
if LoadBoolean(udg_Hash,p,$AB91EED3)then
call SetUnitAnimation(u,"Alternate walk")
else
call SetUnitAnimation(u,"walk")
endif
endif
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
call imagedummy(p,dummy,0.12,2,"walk",Model[p])
call SetUnitTimeScale(dummy,0.5)
if stage==1 or stage==8 or stage==15 or stage==22 then
call invisibleColor(dummy,40,100,255,0,0,0.18,0.01)
elseif stage==2 or stage==9 or stage==16 or stage==23 then
call invisibleColor(dummy,40,100,255,187,0,0.18,0.01)
elseif stage==3 or stage==10 or stage==17 or stage==24 then
call invisibleColor(dummy,40,100,255,255,126,0.18,0.01)
elseif stage==4 or stage==11 or stage==18 or stage==0 then
call invisibleColor(dummy,40,100,29,219,22,0.18,0.01)
elseif stage==5 or stage==12 or stage==19 then
call invisibleColor(dummy,40,100,0,84,255,0.18,0.01)
elseif stage==6 or stage==13 or stage==20 then
call invisibleColor(dummy,40,100,3,0,102,0.18,0.01)
elseif stage==7 or stage==14 or stage==21 then
call invisibleColor(dummy,40,100,95,0,255,0.18,0.01)
endif
if LoadBoolean(Hash_Stat,p,$3B76FF1A)or LoadBoolean(Hash_Stat,p,$4D0EA1A1)then
if ModuloInteger(stage,3)==0 then
call EFsettingXY(p,"war3mapImported\\@EF_AZ_EarthShaker_A.mdl",0,GetUnitX(u),GetUnitY(u),1*Skrange[p],270,1,0,0,0)
if LoadBoolean(Hash_Stat,p,$4D0EA1A1)then
call EFsettingXY(p,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",0,GetUnitX(u),GetUnitY(u),1*Skrange[p],270,1,0,0,0)
endif
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),400*Skrange[p],null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckPlayerGroup(dummy)and LoadBoolean(udg_Hashtable,GetHandleId(t),GetHandleId(dummy))==false then
if LoadBoolean(Hash_Stat,p,$4D0EA1A1)then
set dmg=GetHeroAgi(u,true)*10
else
set dmg=GetHeroAgi(u,true)*5
endif
set dmg=dmg*(1+(MoveSpd[p]*0.01))
call Damage(u,dummy,dmg,1,3,false,1,0)
call SaveBoolean(udg_Hashtable,GetHandleId(t),GetHandleId(dummy),true)
endif
endloop
endif
endif
if stage>=25 then
call Damage(u,u,1,1,0,false,1,0)
if LoadInteger(udg_Hash,p,$EADDF8B6)==1 then
if CharcterStat[p]==true then
set tempX=(I2R(GetHeroAgi(u,true))*15)
else
set tempX=(I2R(GetHeroInt(u,true))*15)
endif
call EFsettingXY(p,"war3mapImported\\@EF_20.mdl",0,GetUnitX(u),GetUnitY(u),1,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_az_siwenpf1_w1_hui.mdl",0,GetUnitX(u),GetUnitY(u),2,270,1,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),500*Skrange[p],null)
loop
set dummy=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),dummy)
exitwhen dummy==null
if CheckPlayerGroup(dummy)then
call Damage(u,dummy,tempX,1,0,false,1,0)
endif
endloop
endif
if LoadBoolean(Hash_Stat,p,$EE4F1B3F)then
call StatChange(p,15,"이속",2)
call EFsettingU(p,"war3mapImported\\@Aura_AZ_LCguanyu_W3_BUFF.mdl",2,u,"chest")
call BuffCall(u,'BI15',2,false,false)
endif
set SandeBisut[p]=false
call RemoveShacull(p)
call endMujuk(p,u)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set dummy=null
endfunction
function Watson takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$686E03BD)
local integer a
if BossBattle then
call EXSetAbilityState(EXGetUnitAbility(Charcter[p],'AF04'),ABILITY_STATE_COOLDOWN,12)
call DisplayTimedTextToPlayer(Player(p-1),0,0,30,"|cffff0000보스전중 사용할수없다.")
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
elseif not BossBattle then
if p<=999 then
call SaveInteger(udg_Hash,GetHandleId(t),$686E03BD,9999)
set a=LoadInteger(udg_Hash,p,$406A6BC3)
call StopSound(LastBGM,false,false)
call StopSound(LastEFVoice,false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_C017.mp3"),(null),(117),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
set LastBGM=udg_SND
if a<=3 then
set Ccooltime[6]=120
call EXSetAbilityState(EXGetUnitAbility(Charcter[p],'AF04'),ABILITY_STATE_COOLDOWN,120)
else
set Ccooltime[6]=300
endif
call TimerStart(t,20,false,function Watson)
else
call ResumeTimer(RoundTimer)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
set t=null
endfunction
function GojoActive takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local unit dummy=LoadUnitHandle(udg_Hash,GetHandleId(t),$535B7E08)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit c
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage<=50 then
if stage==1 then
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call imagedummySET(p,dummy,"war3mapImported\\@AF_zhonglic.mdl")
call SetUnitScale(dummy,3.0*Skrange[p],1,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,dummy)
call SetUnitAnimation(dummy,"birth")
elseif stage==5 then
call SetUnitAnimation(dummy,"stand")
elseif stage==45 then
call SetUnitAnimation(dummy,"death")
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(dummy),GetUnitY(dummy),800*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Stun(u,c,0.2)
endif
endloop
call TimerStart(t,0.1,false,function GojoActive)
elseif stage>50 then
call RemoveUnit(dummy)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set c=null
set dummy=null
endfunction
function TimerAlter takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),1)
local unit c
local real tempX=LoadReal(udg_Hash,GetHandleId(t),$A99320FA)
local real tempY=LoadReal(udg_Hash,GetHandleId(t),$FDF65382)
local real time=LoadReal(udg_Hash,GetHandleId(t),2)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),3)
call SaveReal(udg_Hash,GetHandleId(t),2,time-0.08)
if stage==0 then
call SaveInteger(udg_Hash,GetHandleId(t),3,1)
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillD[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillD[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillD[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillD[p]),ABILITY_STATE_COOLDOWN)*0.3))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillQ[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillQ[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillQ[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillQ[p]),ABILITY_STATE_COOLDOWN)*0.3))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillW[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillW[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillW[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillW[p]),ABILITY_STATE_COOLDOWN)*0.3))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillE[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillE[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillE[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillE[p]),ABILITY_STATE_COOLDOWN)*0.3))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillQQ[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillQQ[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillQQ[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillQ[p]),ABILITY_STATE_COOLDOWN)*0.3))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillWW[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillWW[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillWW[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillW[p]),ABILITY_STATE_COOLDOWN)*0.3))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillEE[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillEE[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillEE[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillE[p]),ABILITY_STATE_COOLDOWN)*0.3))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillR[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillR[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillR[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillR[p]),ABILITY_STATE_COOLDOWN)*0.3))
endif
if EXGetAbilityState(EXGetUnitAbility(u,ChSkillT[p]),ABILITY_STATE_COOLDOWN)>=0 then
call EXSetAbilityState(EXGetUnitAbility(u,ChSkillT[p]),ABILITY_STATE_COOLDOWN,EXGetAbilityState(EXGetUnitAbility(u,ChSkillT[p]),ABILITY_STATE_COOLDOWN)-(EXGetAbilityState(EXGetUnitAbility(u,ChSkillT[p]),ABILITY_STATE_COOLDOWN)*0.3))
endif
endif
if time<=0 then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call SaveReal(udg_Hash,GetHandleId(t),$A99320FA,GetUnitX(u))
call SaveReal(udg_Hash,GetHandleId(t),$FDF65382,GetUnitY(u))
if not UnitHasBuff(u,'Bmlt')and not UnitHasBuff(u,'BPSE')and s__Distance_PBP(GetUnitX(u),GetUnitY(u),tempX,tempY)>=10.00 then
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,GetUnitFacing(u))
call imagedummy(p,c,0.18,2,"walk",Model[p])
call invisibleColor(c,40,100,255,0,0,0.18,0.01)
endif
endif
set t=null
set u=null
set c=null
endfunction
function R073Timer takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
if LoadBoolean(System,p,$2D47D94C)then
call SaveBoolean(System,p,$2D47D94C,false)
endif
call SaveBoolean(System,p,$FD13BA27,true)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function Trig_Arti_Skill_Actions takes nothing returns nothing
local unit u=GetTriggerUnit()
local player pl=GetOwningPlayer(u)
local integer p=GetPlayerId(pl)+1
local integer skillcode=GetSpellAbilityId()
local timer t
local timer t2
local real SkillLocX=GetSpellTargetX()
local real SkillLocY=GetSpellTargetY()
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
local integer a
local real b
local unit c
local unit d
local integer tempI
local integer invenslot
local real tempR
local effect ef
local boolean bool=false
local item given
local integer g=s__party_create()
if(skillcode !='SY02' and not LoadBoolean(udg_Hashtable,skillcode,$7312D821))and skillcode==ChSkillD[p]or skillcode==ChSkillQ[p]or skillcode==ChSkillW[p]or skillcode==ChSkillE[p]or skillcode==ChSkillQQ[p]or skillcode==ChSkillWW[p]or skillcode==ChSkillEE[p]or skillcode==ChSkillR[p]or skillcode==ChSkillT[p]then
set t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$9B55BE3B,skillcode)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call TimerStart(t,0.00,false,function SkillCooldown)
set t=null
if LoadBoolean(System,p,$C0D815BA)then
call BuffCall(u,'AT31',5,false,false)
if LoadBoolean(System,p,$B3139CCF)or Luck[p]>=1.5 then
call StatChangeX(p,0.16,"피증",5,"C069")
else
call StatChangeX(p,0.08,"피증",5,"C069")
endif
endif
if LoadBoolean(System,p,$FD13BA27)then
call SaveBoolean(System,p,$FD13BA27,false)
call SaveBoolean(System,p,$2D47D94C,true)
call BuffCall(u,'AT27',5,false,false)
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call TimerStart(t,5,false,function R073Timer)
set t=null
endif
if LoadBoolean(udg_Hash,p,$C2D4DCB3)then
if(ChSkillQ[p]==skillcode or ChSkillQQ[p]==skillcode)and LoadReal(udg_Hashtable,p,$9B58470C)>=1000 then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$9B58470C)*0.1)))
call StatChangeX(p,1.5,"MP리젠",5,"C064")
call BuffCall(u,'AT22',5,false,false)
elseif(ChSkillW[p]==skillcode or ChSkillWW[p]==skillcode)and LoadReal(udg_Hashtable,p,$E755DDB8)>=1000 then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$E755DDB8)*0.1)))
call StatChangeX(p,1.5,"MP리젠",5,"C064")
call BuffCall(u,'AT22',5,false,false)
elseif(ChSkillE[p]==skillcode or ChSkillEE[p]==skillcode)and LoadReal(udg_Hashtable,p,$A2229E00)>=1000 then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$A2229E00)*0.1)))
call StatChangeX(p,1.5,"MP리젠",5,"C064")
call BuffCall(u,'AT22',5,false,false)
elseif ChSkillR[p]==skillcode and LoadReal(udg_Hashtable,p,$C3EA9E83)>=1000 then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$C3EA9E83)*0.1)))
call StatChangeX(p,1.5,"MP리젠",5,"C064")
call BuffCall(u,'AT22',5,false,false)
elseif ChSkillT[p]==skillcode and LoadReal(udg_Hashtable,p,$127510D2)>=1000 then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$127510D2)*0.1)))
call StatChangeX(p,1.5,"MP리젠",5,"C064")
call BuffCall(u,'AT22',5,false,false)
endif
endif
if LoadBoolean(udg_Hash,p,$379C4E8)and CostM[p]>=1.5 then
if(ChSkillQ[p]==skillcode or ChSkillQQ[p]==skillcode)then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$9B58470C)*0.1)))
elseif(ChSkillW[p]==skillcode or ChSkillWW[p]==skillcode)then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$E755DDB8)*0.1)))
elseif(ChSkillE[p]==skillcode or ChSkillEE[p]==skillcode)then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$A2229E00)*0.1)))
elseif ChSkillR[p]==skillcode then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$C3EA9E83)*0.1)))
elseif ChSkillT[p]==skillcode then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$127510D2)*0.1)))
endif
endif
if LoadBoolean(udg_Hash,p,$D9A065CA)and CostM[p]>=1.5 then
if(ChSkillQ[p]==skillcode or ChSkillQQ[p]==skillcode)then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$9B58470C)*0.1)))
elseif(ChSkillW[p]==skillcode or ChSkillWW[p]==skillcode)then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$E755DDB8)*0.1)))
elseif(ChSkillE[p]==skillcode or ChSkillEE[p]==skillcode)then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$A2229E00)*0.1)))
elseif ChSkillR[p]==skillcode then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$C3EA9E83)*0.1)))
elseif ChSkillT[p]==skillcode then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$127510D2)*0.1)))
endif
endif
if LoadBoolean(udg_Hash,p,$FD13BA27)and CostM[p]>=1.5 then
if(ChSkillQ[p]==skillcode or ChSkillQQ[p]==skillcode)then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$9B58470C)*0.1)))
elseif(ChSkillW[p]==skillcode or ChSkillWW[p]==skillcode)then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$E755DDB8)*0.1)))
elseif(ChSkillE[p]==skillcode or ChSkillEE[p]==skillcode)then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$A2229E00)*0.1)))
elseif ChSkillR[p]==skillcode then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$C3EA9E83)*0.1)))
elseif ChSkillT[p]==skillcode then
call SetUnitState(u,ConvertUnitState(2),(GetUnitState(u,ConvertUnitState(2))+(LoadReal(udg_Hashtable,p,$127510D2)*0.1)))
endif
endif
if LoadBoolean(System,p,$70739E58)then
if LoadInteger(System,p,$86FA2B12)==1 then
call EFsettingU(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,u,"chest")
if GetUnitState(u,ConvertUnitState(0))>(GetUnitState(u,ConvertUnitState(1))*0.03)then
call SetUnitState(u,ConvertUnitState(0),GetUnitState(u,ConvertUnitState(0))-(GetUnitState(u,ConvertUnitState(1))*0.03))
else
call SetUnitState(u,ConvertUnitState(0),1)
endif
set a=LoadInteger(System,p,$73A5B1F2)+1
if a>=40 then
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='C005' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('R004'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
call SaveInteger(System,p,$73A5B1F2,0)
else
call SaveInteger(System,p,$73A5B1F2,a)
endif
set a=10
elseif LoadInteger(System,p,$86FA2B12)==2 then
call EFsettingU(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,u,"chest")
if GetUnitState(u,ConvertUnitState(0))>(GetUnitState(u,ConvertUnitState(1))*0.04)then
call SetUnitState(u,ConvertUnitState(0),GetUnitState(u,ConvertUnitState(0))-(GetUnitState(u,ConvertUnitState(1))*0.04))
else
call SetUnitState(u,ConvertUnitState(0),1)
endif
set a=LoadInteger(System,p,$73A5B1F2)+1
if a>=80 then
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='R004' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('U003'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
call SaveInteger(System,p,$73A5B1F2,0)
else
call SaveInteger(System,p,$73A5B1F2,a)
endif
set a=15
elseif LoadInteger(System,p,$86FA2B12)==3 then
call EFsettingU(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,u,"chest")
if GetUnitState(u,ConvertUnitState(0))>(GetUnitState(u,ConvertUnitState(1))*0.05)then
call SetUnitState(u,ConvertUnitState(0),GetUnitState(u,ConvertUnitState(0))-(GetUnitState(u,ConvertUnitState(1))*0.05))
else
call SetUnitState(u,ConvertUnitState(0),1)
endif
set a=LoadInteger(System,p,$73A5B1F2)+1
call SaveInteger(System,p,$73A5B1F2,a)
if LoadInteger(System,p,$BA86D6C4)==1 and a>=120 and GetUnitState(u,ConvertUnitState(0))<=(GetUnitState(u,ConvertUnitState(1))*0.1)and not LoadBoolean(System,p,$EB09C778)and LoadInteger(Hash,p-1,$E79F32FE)<=28 then
call HevensFeel(p)
call SaveInteger(System,p,$86FA2B12,4)
endif
if a>=120 then
set a=0
else
set a=20
endif
elseif LoadInteger(System,p,$86FA2B12)==4 then
call SetUnitState(u,ConvertUnitState(0),GetUnitState(u,ConvertUnitState(0))+(GetUnitState(u,ConvertUnitState(1))*0.03))
set a=20
endif
call SetHeroAgi(u,GetHeroAgi(u,false)+a,true)
call SetHeroInt(u,GetHeroInt(u,false)+a,true)
set b=GetUnitState(u,ConvertUnitState(0x12))
set a=R2I(b)+a
call SetUnitState(u,ConvertUnitState(0x12),a)
call SaveBoolean(System,p,$70739E58,false)
call TimerStart(C005timer[p],3.00,false,null)
call TimerStart(udg_PstatTimer[p],0.02,false,null)
endif
if EXGetAbilityDataReal(EXGetUnitAbility(u,skillcode),1,ABILITY_DATA_COOL)>=5 and LoadBoolean(udg_Hashtable,p,$91F47B7D)then
call SaveBoolean(udg_Hashtable,p,$91F47B7D,false)
if LoadInteger(udg_Hashtable,p,$A6A7F4EC)<=8 then
call TimerStart(N031timer2[p],20,false,null)
endif
call SaveBoolean(udg_Hashtable,p,$D70AB363,true)
call TimerStart(udg_PstatTimer[p],0,false,null)
endif
if LoadBoolean(System,p,$CE6ED0DC)then
call recoveryMP(u,u,((GetUnitState(u,ConvertUnitState(3))-GetUnitState(u,ConvertUnitState(2)))*0.03),"","origin")
endif
if LoadBoolean(System,p,$16431182)then
set tempI=LoadInteger(System,p,$A26703F9)
if tempI<=3 then
set a=LoadInteger(Hash_Stat,p,$9298D98F)+5
call SaveInteger(Hash_Stat,p,$9298D98F,a)
set a=LoadInteger(Hash_Stat,p,$C18D16A0)+15
call SaveInteger(Hash_Stat,p,$C18D16A0,a)
call SaveInteger(System,p,$A26703F9,tempI+1)
endif
call BuffCall(u,'AT08',10,false,false)
call TimerStart(C0322timer[p],10,false,null)
call TimerStart(udg_infoRe[p],0.0314,false,null)
call SetUnitState(u,ConvertUnitState(0),GetUnitState(u,ConvertUnitState(0))-(GetUnitState(u,ConvertUnitState(0))*0.06))
call EFsettingU(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,u,"chest")
if GetRandomint(1,100)<=2 then
call Stun(u,u,0.5)
endif
endif
if LoadBoolean(System,p,$AA506E80)then
set tempI=LoadInteger(System,p,$8002CBCD)
if tempI<=4 then
set a=LoadInteger(Hash_Stat,p,$D8C9D96B)+3
call SaveInteger(Hash_Stat,p,$D8C9D96B,a)
set tempR=LoadReal(Hash_Stat,p,$34D9AB92)+3
call SaveReal(Hash_Stat,p,$34D9AB92,tempR)
set tempR=LoadReal(Hash_Stat,p,$540C61C7)+3
call SaveReal(Hash_Stat,p,$540C61C7,tempR)
call SaveInteger(System,p,$8002CBCD,tempI+1)
endif
call BuffCall(u,'AT28',6,false,false)
call TimerStart(U074timer[p],6,false,null)
call TimerStart(udg_infoRe[p],0.0314,false,null)
endif
if LoadBoolean(System,p,$12CF1142)then
set tempI=LoadInteger(System,p,$EBE767E6)
if tempI<=9 then
call SetHeroInt(u,GetHeroInt(u,false)+100,true)
call SaveInteger(System,p,$EBE767E6,tempI+1)
endif
call BuffCall(u,'AT09',8,false,false)
call TimerStart(U047timer[p],8,false,null)
call TimerStart(udg_PstatTimer[p],0.0314,false,null)
endif
if LoadBoolean(Hash_Stat,p,$33EA6442)and not LoadBoolean(Hash_Stat,p,$B592109D)then
call BuffCall(u,'BI06',4,false,false)
if not LoadBoolean(Hash_Stat,p,$B26AA776)then
call SaveBoolean(Hash_Stat,p,$B26AA776,true)
call EFsettingU(p,"Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl",0.5,u,"origin")
call UnitAddAbility(u,'A021')
call TimerStart(udg_infoRe[p],0.00,false,null)
endif
endif
if LoadBoolean(Hash_Stat,p,$E326DCAD)and LoadBoolean(udg_Hashtable,skillcode,$33B724A0)then
if EXGetAbilityDataReal(EXGetUnitAbility(u,skillcode),1,ABILITY_DATA_COOL)>=15 then
call EFsettingU(p,"Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",0,u,"origin")
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,"|cff8d192b강화!|r",(10*0.023/10))
call SetTextTagPosUnit(bj_lastCreatedTextTag,u,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.5)
call SetTextTagVelocityBJ2(bj_lastCreatedTextTag,10,GetRandomInt(85,95))
call SetTextTagFadepoint(bj_lastCreatedTextTag,0.4)
call StatChange(p,12,"일공증",16.0)
call StatChange(p,6,"방퍼",16.0)
else
set bj_lastCreatedTextTag=CreateTextTag()
call EFsettingU(p,"Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",0,u,"origin")
call StatChange(p,4,"일공증",8.0)
call StatChange(p,2,"방퍼",8.0)
endif
endif
else
if skillcode=='PD00' or skillcode=='A027' then
if skillcode=='PD00' then
set bool=true
endif
if skillcode=='A027' and LoadBoolean(udg_Hash,p,$8605C224)==false then
set bool=true
endif
if bool then
set t=CreateTimer()
call SaveInteger(udg_Hashtable,GetHandleId(t),$91D99C00,0)
call SaveReal(udg_Hashtable,GetHandleId(t),$D1AFF844,angle)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Z048.mdl",0,GetUnitX(u),GetUnitY(u),1.0,angle-180,1,0,0,0)
set angle=s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)
call SaveReal(udg_Hashtable,GetHandleId(t),$3F01E1A6,angle)
call SaveUnitHandle(udg_Hashtable,GetHandleId(t),$63B255A1,u)
if skillcode=='PD00' then
call SaveInteger(udg_Hashtable,GetHandleId(t),$1B9D399E,1)
elseif skillcode=='A027' then
call SaveInteger(udg_Hashtable,GetHandleId(t),$1B9D399E,2)
endif
call TimerStart(t,0.02,false,function Dash)
if LoadReal(udg_Hash,p,$14A4C253)>=1 and not US01[p]then
set angle=LoadReal(udg_Hash,p,$14A4C253)
set skillcode=LoadInteger(Hash_Stat,p,$D8C9D96B)-R2I(angle)
call SaveInteger(Hash_Stat,p,$D8C9D96B,skillcode)
call EXSetAbilityDataReal(EXGetUnitAbility(u,'A01R'),1,108,0)
call IncUnitAbilityLevel(u,'A01R')
call DecUnitAbilityLevel(u,'A01R')
call SaveReal(udg_Hash,p,$14A4C253,0)
call TimerStart(udg_PstatTimer[p],0,false,null)
endif
call SetUnitInvulnerable(u,true)
if GetLocalPlayer()==Player(p-1)and LoadUnitHandle(udg_Hashtable,p,$C91F8651)==u then
call DzFrameSetText(DzFrameFindByName("BB_DesInf",0),"|CFFFFCC00방어력 : \n|cffFF0000무적")
endif
call GroupAddUnit(udg_Mujuk,u)
call Shacull(p)
set bool=false
endif
endif
if skillcode=='AF00' and GetUnitAbilityLevel(u,skillcode)==1 then
call ichigoMugetsu(p)
call SetUnitAbilityLevel(u,'AF00',2)
set Ccooltime[p]=15
elseif skillcode=='AF00' and GetUnitAbilityLevel(u,skillcode)==2 then
set t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,angle)
call InS(u,0.5)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_U005_useAct.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call SetUnitAnimation(u,"attack")
set MultyGroup[p+90]=CreateGroup()
call TimerStart(t,0.05,false,function Mugetsu)
set Ccooltime[p]=15
endif
if skillcode=='AF01' then
call SaveBoolean(udg_Hash,p,$1AE5ABCE,false)
call SaveBoolean(udg_Hash,p,$72822878,true)
call Aris(p)
endif
if skillcode=='AF02' then
set GameChnag2=true
call UnitAddAbility(Charcter[p],'UE02')
call UnitMakeAbilityPermanent(Charcter[p],true,'UE02')
call UnitRemoveAbility(Charcter[p],'AF02')
call SetPlayerAbilityAvailable(Player(p-1),'AF02',false)
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='U010' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('U011'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='US02' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('US04'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
call ArisUS04(p)
endif
if skillcode=='AF03' then
if LoadInteger(udg_Hash,p,$F5CC8461)==0 then
set u=LoadUnitHandle(udg_Hash,p,$995E4AAA)
call UnitAddAbility(u,'Abun')
call SaveInteger(udg_Hash,p,$F5CC8461,1)
call SaveInteger(udg_Hash,p,$8DAD119A,0)
call DisplayTimedTextToPlayer(pl,0,0,5,"|cff00bfff[시스템] - |cffffd700포드를 보조모드로 모드 전환했다!")
else
set u=LoadUnitHandle(udg_Hash,p,$995E4AAA)
call UnitRemoveAbility(u,'Abun')
call SaveInteger(udg_Hash,p,$F5CC8461,0)
call SaveInteger(udg_Hash,p,$8DAD119A,0)
call DisplayTimedTextToPlayer(pl,0,0,5,"|cff00bfff[시스템] - |cffffd700포드를 공격모드로 모드 전환했다!")
endif
endif
if skillcode=='AF04' then
set t=CreateTimer()
call TimerStart(t,0.01,false,function Watson)
call PauseTimer(RoundTimer)
call SaveInteger(udg_Hash,GetHandleId(t),$686E03BD,p)
set a=LoadInteger(udg_Hash,p,$406A6BC3)
call SaveInteger(udg_Hash,p,$406A6BC3,a+1)
endif
if skillcode=='AF05' then
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='U019' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('US11'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
call UnitAddAbility(Charcter[p],'UE06')
call UnitMakeAbilityPermanent(Charcter[p],true,'UE06')
call SetPlayerAbilityAvailable(Player(p-1),'AF05',false)
call StopSound(LastBGM,false,false)
call StopSound(LastEFVoice,false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_US11bgm.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
set LastBGM=udg_SND
call FilterBasic(Player(p-1),1.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",0.00,0.00,100.00,40.00,100.00,0.00,0.00,100.00)
endif
if skillcode=='AF06' then
set tempI=0
set a=LoadInteger(System,p,$F5D93FAA)
call StatUP(p,R2I(a),"체력")
call SaveInteger(System,p,$F5D93FAA,0)
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cff800000힘 스탯을 "+I2S(a)+" 만큼 돌려받았다.")
set tempI=tempI+a
set a=LoadInteger(System,p,$6B309F2)
call StatUP(p,a,"공격력")
call SaveInteger(System,p,$6B309F2,0)
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cff800000민첩 스탯을 "+I2S(a)+" 만큼 돌려받았다.")
set tempI=tempI+a
set a=LoadInteger(System,p,$3630D7A0)
call StatUP(p,a,"지능")
call SaveInteger(System,p,$3630D7A0,0)
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cff800000지능 스탯을 "+I2S(a)+" 만큼 돌려받았다.")
set tempI=tempI+a
set a=LoadInteger(System,p,$7F0C4544)+tempI
call SaveInteger(System,p,$7F0C4544,a)
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cff800000누적 획득량 : "+I2S(a))
if LoadBoolean(System,p,$A2CB6CF4)and LoadInteger(System,p,$9D58DA4A)>=10 and LoadBoolean(System,p,$29AE479D)and a>=1000 then
call SetPlayerAbilityAvailable(Player(p-1),'AF05',true)
endif
call EFsettingU(p,"Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl",0,u,"origin")
endif
endif
if skillcode=='AF07' then
set tempI=0
set b=0
set a=LoadInteger(System,p,$C25FCCE9)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_HellTrainGet.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
if a==1 then
set b=0.2
elseif a==2 then
set b=0.4
elseif a==3 then
set b=0.60
elseif a==4 then
set b=0.80
endif
set tempR=GetUnitState(u,ConvertUnitState(1))-GetUnitState(u,ConvertUnitState(0))
call recoveryHP(u,u,GetUnitState(u,ConvertUnitState(1))*b,"war3mapImported\\@AF_yiliaobengdai.mdl","origin")
if GetUnitState(u,ConvertUnitState(0))==GetUnitState(u,ConvertUnitState(1))then
call ShildSet(u,u,12,(GetUnitState(u,ConvertUnitState(1))*(b*0.5))-tempR)
endif
call recoveryMP(u,u,GetUnitState(u,ConvertUnitState(3))*b,"","origin")
call SaveInteger(System,p,$C25FCCE9,0)
call SaveReal(System,p,$B5B7CEDB,20.0)
endif
if skillcode=='AF08' then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_Gojo1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,75,u)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_Gojo2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,75,u)
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t2),$A59BB4C6,p)
call TimerStart(t2,0.05,false,function GojoActive)
set t2=null
endif
if skillcode=='A00K' and LoadBoolean(udg_Hash,p,$1EAA65F3)==false then
call SaveBoolean(udg_Hash,p,$1EAA65F3,true)
call TimerStart(Elbira[p],40,false,function ElbiraT)
call itemCoolTime(GetItemOfTypeFromUnit(Charcter[p],'I625'),40)
set SkillLocX=GetUnitX(u)
set SkillLocY=GetUnitY(u)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Goods_Shiva'sGuard_Target(1).mdl",0,SkillLocX,SkillLocY,6*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_dtYellow.mdl",0,SkillLocX,SkillLocY,7.5*Skrange[p],270,1.85,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),SkillLocX,SkillLocY,1500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckFBossGroupN(c)then
call EFsettingU(p,"war3mapImported\\@EF_AZ_Goods_Force Staff(1).mdl",0,u,"chest")
call recoveryHP(u,c,(GetUnitState(u,ConvertUnitState(1))*0.4),"war3mapImported\\@EF_AZ_Goods_Force Staff(1).mdl","origin")
call recoveryMP(u,c,(GetUnitState(u,ConvertUnitState(3))*0.4),"","origin")
set tempI=GetPlayerId(GetOwningPlayer(c))+1
call StatChangeX(tempI,30,"방어력",15,"elbira")
endif
endloop
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Elbira_Act.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
endif
if skillcode=='A00R' then
set BossAgro=u
endif
if skillcode=='A00U' then
if WhatGold(100000,p)then
call SteelGold(100000,p)
set angle=LoadReal(Hash_Stat,p,$A053013A)+0.1
call SaveReal(Hash_Stat,p,$A053013A,angle)
set Luck[p]=angle
call RemoveItem(GetItemOfTypeFromUnit(u,'I01C'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700행운 클로버를 흡수했다!")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000사용 조건이 맞지않아 실패했다.")
endif
endif
if skillcode=='AF09' then
set c=GetSpellTargetUnit()
set tempI=GetPlayerId(GetOwningPlayer(c))+1
set a=GetRandomInt(1,4)
set b=1
loop
exitwhen b>=40 or not LoadBoolean(udg_Hash,p,$42A9ECD3+a)
set b=b+1
set a=GetRandomInt(1,4)
endloop
if b>=40 then
if LoadBoolean(udg_Hash,p,$42A9ECD3+1)and LoadBoolean(udg_Hash,p,$42A9ECD3+2)and LoadBoolean(udg_Hash,p,$42A9ECD3+3)and LoadBoolean(udg_Hash,p,$42A9ECD3+4)and LoadBoolean(udg_Hash,tempI,$B7D5798E)then
call UnitRemoveAbility(u,'AF09')
call SetPlayerAbilityAvailable(Player(p-1),'AF09',false)
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_shu_iniori_BGM.mp3"),(null),(120),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
call shuhidden()
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='R023' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('U021'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,tempI-1,$DA437F80+a)=='R024' then
if GetLocalPlayer()==Player(tempI-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('U021'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
call SaveBoolean(udg_Hash,p,$79E59778,true)
if LoadBoolean(udg_Hash,p,$42A9ECD3)then
call SaveBoolean(udg_Hash,p,$42A9ECD3,false)
set b=LoadReal(Hash_Stat,p,$164C40C9)+0.2
call SaveReal(Hash_Stat,p,$164C40C9,b)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 아포칼립스 바이러스|cffffa500가 해주됬다!")
endif
set a=LoadInteger(udg_Hash,p,$39F717C6)
call SaveInteger(udg_Hash,p,$39F717C6,a+1)
set a=LoadInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80)+1
call SaveInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80,a)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),5,PR[p]+1,I2S(a))
set a=LoadInteger(udg_Hash,tempI,$39F717C6)
call SaveInteger(udg_Hash,tempI,$39F717C6,a+1)
set a=LoadInteger(udg_Hash,GetHandleId(Charcter[tempI]),$AD509D80)+1
call SaveInteger(udg_Hash,GetHandleId(Charcter[tempI]),$AD509D80,a)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),5,PR[tempI]+1,I2S(a))
call StatUP(p,1000,"체력")
call StatUP(p,30,"방어력")
call StatUP(tempI,30,"방어력")
call StatUP(tempI,2000,"체력")
call StatUP(tempI,8,"피감")
call EFsettingU(p,"Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",0,u,"origin")
call EFsettingU(p,"Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",0,c,"origin")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000보이드 획득에 실패했다.")
endif
else
call EFsettingU(p,"Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",0,u,"origin")
call EFsettingU(p,"Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",0,c,"origin")
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_shu_Void.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,90,u)
call PlaySoundOnUnit(udg_SND,90,c)
call SaveBoolean(udg_Hash,p,$42A9ECD3+a,true)
call SaveStr(udg_Hash,p,$17336529+a,"|cffffffff")
if a==1 then
call StatUP(p,40,"방어력")
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[보이드 게놈] - |cffffd700방패를 획득했다.")
elseif a==2 then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[보이드 게놈] - |cffffd700붕대를 획득했다.")
elseif a==3 then
call StatUP(p,10,"이속")
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[보이드 게놈] - |cffffd700의족을 획득했다.")
elseif a==4 then
call StatUP(p,1000,"체력")
call StatUP(p,8,"피감")
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[보이드 게놈] - |cffffd700대검을 획득했다.")
endif
set ShuText[p]="☞ '보이드 게놈' : 이 아티팩트를 오른쪽 클릭 시 특수 능력(C) 키를 통해 사용할 수 있게 된다. \n▶ 아군에게 사용시 다음 효과들중 하나를 영구적으로 획득한다. (쿨타임 60초)\n\n"+LoadStr(udg_Hash,p,$17336529+1)+" ① 방패 : 방어력이 40 증가한다.|r\n"+LoadStr(udg_Hash,p,$17336529+2)+" ② 붕대 : 매 초마다 체력을 0.15% 회복한다.|r\n"+LoadStr(udg_Hash,p,$17336529+3)+" ③ 의족 : 이동속도가 10% 증가한다.|r\n"+LoadStr(udg_Hash,p,$17336529+4)+" ④ 대검 : 체력 스탯이 1000 상승하고 모든 받는 피해 감소가 8% 증가한다.|r\n\nㆍ |cffff00ff저주 - '아포칼립스 바이러스'|r : |cffff0000모든 피해 증가율이 20% 감소한다.|r"
endif
endif
if skillcode=='AF10' then
call StatChange(p,20,"올탯퍼",30)
call StatChange(p,20,"이속",30)
call BuffCall(u,'AT06',30,false,false)
call TimerStart(RedMist[p],3,true,null)
set t=CreateTimer()
call TimerStart(t,30,false,function EGO)
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call EFsettingU(p,"war3mapImported\\@Aura_RedShield.mdl",30,u,"origin")
call EFsettingU(p,"war3mapImported\\@Aura_Z_Ora_beam(red).mdl",26,u,"origin")
endif
if skillcode=='AF11' then
call DialogDisplay(Player(p-1),udg_CustomDialog[2],true)
endif
if skillcode=='AF12' then
set t2=CreateTimer()
call TimerStart(t2,0.08,true,function TimerAlter)
call SaveInteger(udg_Hash,GetHandleId(t2),0,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),1,u)
call SaveReal(udg_Hash,GetHandleId(t2),2,2)
call SaveInteger(udg_Hash,GetHandleId(t2),3,0)
call StatChange(p,60,"이속",2)
call BuffCall(u,'AT10',2,false,false)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(u),GetUnitY(u),1,270,1,0,0,0)
endif
if skillcode=='AF13' then
call SetPlayerAbilityAvailable(pl,'AF13',false)
call HolyArcana(p)
endif
if skillcode=='AF14' then
call BuffCall(u,'AT11',20,false,false)
call StatChange(p,20,"일공증",20)
call StatChange(p,10,"이속",20)
call StatChange(p,0.05,"공격간격",20)
call EFsettingU(p,"war3mapImported\\@Aura_guanghuan03.mdl",15,u,"origin")
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_W3.mdl",0,GetUnitX(u),GetUnitY(u),2,270,1,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",0,GetUnitX(u),GetUnitY(u),4,270,1,0,0,0)
endif
if skillcode=='A01G' then
if LoadInteger(udg_Hash,p,$D4397677)==1 then
if not LoadBoolean(udg_Hash,p,$C32582AF+1)then
call ArtiCutN(p,'N060')
call SArtADD('N060',p)
call RemoveItem(GetItemOfTypeFromUnit(u,'I01R'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 획득한 아티팩트다.")
endif
elseif LoadInteger(udg_Hash,p,$D4397677)==2 then
if not LoadBoolean(udg_Hash,p,$C32582AF+2)then
call ArtiCutN(p,'N059')
call SArtADD('N059',p)
call RemoveItem(GetItemOfTypeFromUnit(u,'I01R'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 획득한 아티팩트다.")
endif
elseif LoadInteger(udg_Hash,p,$D4397677)==3 then
if not LoadBoolean(udg_Hash,p,$C32582AF+3)then
call ArtiCutN(p,'N061')
call SArtADD('N061',p)
call RemoveItem(GetItemOfTypeFromUnit(u,'I01R'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 획득한 아티팩트다.")
endif
elseif LoadInteger(udg_Hash,p,$D4397677)==4 then
if not LoadBoolean(udg_Hash,p,$C32582AF+4)then
call ArtiCutC(p,'C035')
call SArtADD('C035',p)
call RemoveItem(GetItemOfTypeFromUnit(u,'I01R'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 획득한 아티팩트다.")
endif
elseif LoadInteger(udg_Hash,p,$D4397677)==5 then
if not LoadBoolean(udg_Hash,p,$C32582AF+5)then
call ArtiCutC(p,'C036')
call SArtADD('C036',p)
call RemoveItem(GetItemOfTypeFromUnit(u,'I01R'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 획득한 아티팩트다.")
endif
elseif LoadInteger(udg_Hash,p,$D4397677)==6 then
if not LoadBoolean(udg_Hash,p,$C32582AF+6)then
call ArtiCutR(p,'R037')
call SArtADD('R037',p)
call RemoveItem(GetItemOfTypeFromUnit(u,'I01R'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 획득한 아티팩트다.")
endif
elseif LoadInteger(udg_Hash,p,$D4397677)==7 then
if not LoadBoolean(udg_Hash,p,$C32582AF+7)then
call ArtiCutR(p,'R036')
call SArtADD('R036',p)
call RemoveItem(GetItemOfTypeFromUnit(u,'I01R'))
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000이미 획득한 아티팩트다.")
endif
endif
endif
if skillcode=='A01T' then
call DialogDisplay(Player(p-1),udg_CustomDialog[5],true)
endif
if skillcode=='A01X' and LoadBoolean(udg_Hash,p,$D3FEDE5C)==false then
call SaveBoolean(udg_Hash,p,$D3FEDE5C,true)
set t2=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t2),$62760798,1)
call SaveInteger(udg_Hash,GetHandleId(t2),$A59BB4C6,p)
if s__Distance_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY)>=1500 then
set SkillLocX=GetUnitX(u)+(((1500)*1.0)*Cos(((s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY))*1.0)*bj_DEGTORAD))
set SkillLocY=GetUnitY(u)+(((1500)*1.0)*Sin(((s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY))*1.0)*bj_DEGTORAD))
endif
call SaveReal(udg_Hash,GetHandleId(t2),$DA25243A,SkillLocX)
call SaveReal(udg_Hash,GetHandleId(t2),$8BEF6842,SkillLocY)
call TimerStart(Ann[p],60,false,function AnnT)
call itemCoolTime(GetItemOfTypeFromUnit(Charcter[p],'I637'),60)
call TimerStart(t2,0.00,false,function AnnActive)
set t2=null
endif
if skillcode=='A01Y' then
call SaveUnitHandle(Hash_Stat,p,$233C16E5,GetSpellTargetUnit())
endif
if LoadBoolean(Hash_Stat,p,$50350C1D)and GetUnitState(u,ConvertUnitState(2))>=GetUnitState(u,ConvertUnitState(3))*0.3 then
set c=LoadUnitHandle(Hash_Stat,p,$233C16E5)
if s__Distance_PBP(GetUnitX(c),GetUnitY(c),GetUnitX(u),GetUnitY(u))<=2000 and UnitAlive(c)then
if not LoadBoolean(udg_Hashtable,skillcode,$7312D821)and skillcode==ChSkillD[p]or skillcode==ChSkillQ[p]or skillcode==ChSkillQQ[p]or skillcode==ChSkillW[p]or skillcode==ChSkillWW[p]or skillcode==ChSkillE[p]or skillcode==ChSkillEE[p]or skillcode==ChSkillR[p]or skillcode==ChSkillT[p]then
call SetUnitState(u,ConvertUnitState(2),GetUnitState(u,ConvertUnitState(2))-GetUnitState(u,ConvertUnitState(3))*0.04)
set t2=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$FC4D8276,c)
set c=CreateUnit(Player(p-1),'sys7',GetUnitX(u),GetUnitY(u),270)
call SaveUnitHandle(udg_Hash,GetHandleId(t2),$535B7E08,c)
call imagedummySET(p,c,"Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl")
call SetUnitFlyHeight(c,GetUnitFlyHeight(c)+50,0)
call SaveInteger(udg_Hash,GetHandleId(t2),$A59BB4C6,p)
call SaveReal(udg_Hash,GetHandleId(t2),$D3F9E925,GetUnitX(u))
call SaveReal(udg_Hash,GetHandleId(t2),$DECCF61B,GetUnitY(u))
set b=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(c),GetUnitY(c))
set a=GetRandomInt(1,2)
call SaveReal(udg_Hash,GetHandleId(t2),$8A2F2B5,GetUnitX(u)+(((1000)*1.0)*Cos(((b+(30.00+(100.00*I2R(a))))*1.0)*bj_DEGTORAD)))
call SaveReal(udg_Hash,GetHandleId(t2),$34AA385E,GetUnitY(u)+(((1000)*1.0)*Sin(((b+(30.00+(100.00*I2R(a))))*1.0)*bj_DEGTORAD)))
call TimerStart(t2,0.00,false,function AmaActive)
set t2=null
endif
endif
endif
if skillcode=='A01Z' and LoadBoolean(udg_Hash,p,$40B25D0F)==false then
set t=CreateTimer()
call BuffCall(u,'BI04',12,false,false)
call SaveBoolean(Hash_Stat,p,$D7D5DB,true)
call SaveBoolean(udg_Hash,p,$40B25D0F,true)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$F8F856EA,EFsettingUcustom(p,"war3mapImported\\@Aura_verg_avesta.mdl",u,"chest"))
call TimerStart(t,12.00,false,function GaromTimer)
call StatUP(p,-15,"피감")
call TimerStart(Garom[p],40.00,false,function GaromT)
call itemCoolTime(GetItemOfTypeFromUnit(Charcter[p],'I638'),40)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_GaromAct.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
set t=null
endif
if skillcode=='A020' then
if LoadBoolean(Hash_Stat,p,$B8531136)==false then
call SaveInteger(udg_Hash,GetHandleId(Aluzard[p]),$A59BB4C6,p)
call TimerStart(Aluzard[p],0.2,true,function AluzardTimer)
call StatUP(p,0.05,"물리흡")
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_iluzardAct.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call SaveReal(Hash_Stat,p,$21C5A944,0)
call SaveBoolean(Hash_Stat,p,$B8531136,true)
call SaveEffectHandle(udg_Hash,p,$858BC781,EFsettingUcustom(p,"war3mapImported\\@Aura_Devil Aura.mdl",u,"origin"))
elseif LoadBoolean(Hash_Stat,p,$B8531136)==true then
call SaveReal(Hash_Stat,p,$21C5A944,0)
call SaveBoolean(Hash_Stat,p,$B8531136,false)
call StatUP(p,-0.05,"물리흡")
call PauseTimer(Aluzard[p])
set ef=LoadEffectHandle(udg_Hash,p,$858BC781)
call DestroyEffect(ef)
endif
endif
if skillcode=='A023' then
if not LoadBoolean(udg_Hash,p,$3048CB4A)then
call SaveBoolean(udg_Hash,p,$3048CB4A,true)
call SaveBoolean(udg_Hash,p,$7DB6D651,true)
call BuffCall(u,'BI08',0.5,false,false)
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call UnitAddAbility(u,'A01A')
call TimerStart(t,0.5,false,function YuzukiCounterT)
call EFsettingU(p,"war3mapImported\\@EF_AZ_PotMred_W1_chest.mdl",0,u,"origin")
endif
endif
if skillcode=='A027' and LoadBoolean(udg_Hash,p,$8605C224)==false then
call BuffCall(u,'BI12',2,false,false)
call StatChange(p,100,"이속",2.0)
call SaveBoolean(udg_Hash,p,$8605C224,true)
call EFsettingU(p,"Abilities\\Spells\\Items\\AIsp\\SpeedTarget.mdl",2.0,u,"origin")
call TimerStart(Tobari[p],8,false,function TobariT)
call itemCoolTime(GetItemOfTypeFromUnitBJ(Charcter[p],'I607'),8)
endif
if skillcode=='A02C' and LoadBoolean(udg_Hash,p,$4187570C)==false then
call SaveBoolean(udg_Hash,p,$4187570C,true)
call ShildSet(u,u,4.5,GetHeroInt(u,true)*20)
call TimerStart(Luni[p],60,false,function LuniT)
set t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call TimerStart(t,4,false,function LuniBoom)
set t=null
call itemCoolTime(GetItemOfTypeFromUnit(Charcter[p],'I650'),60)
endif
if skillcode=='A02G' and LoadBoolean(udg_Hash,p,$226678D)==false then
call SaveBoolean(udg_Hash,p,$226678D,true)
call TimerStart(Nio[p],60,false,function NioT)
set t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY))
set c=CreateUnit(Player(p-1),'sys7',GetUnitX(u),GetUnitY(u),s__Angle_PBP(GetUnitX(u),GetUnitY(u),SkillLocX,SkillLocY))
call SaveUnitHandle(udg_Hash,GetHandleId(t),$535B7E08,c)
call TimerStart(t,0,false,function NioActive)
set t=null
call itemCoolTime(GetItemOfTypeFromUnit(Charcter[p],'I653'),60)
endif
if skillcode=='A02H' then
set given=GetItemOfTypeFromUnit(u,'I654')
if LoadInteger(Hash_Stat,p,$929FD517)>=50 then
call RemoveItem(given)
call SetItemPosition(given,GetRectCenterX(gg_rct_WisspZone),GetRectCenterY(gg_rct_WisspZone))
set given=CreateItem('I754',GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,given)
else
call SetItemCharges(given,LoadInteger(Hash_Stat,p,$929FD517)+1)
endif
endif
if skillcode=='AF15' then
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),1,u)
call SaveReal(udg_Hash,GetHandleId(t),2,angle)
call TimerStart(t,0.02,true,function SandeBeast)
call Shacull(p)
call Mujuk(p,u)
endif
if skillcode=='AF21' then
call SaveBoolean(udg_Hash,p,$8E12174C,true)
call BuffCall(u,'AT25',0.5,false,false)
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call UnitAddAbility(u,'A01A')
call TimerStart(t,0.5,false,function R065Timer)
call EFsettingU(p,"war3mapImported\\@EF_AZ_PotMred_W1_chest.mdl",0,u,"origin")
endif
if skillcode=='AF17' then
call EFsettingU(p,"war3mapImported\\@Aura_790.mdl",1,u,"origin")
call EFsettingU(p,"war3mapImported\\@Aura_Athelas Green.mdl",1,u,"origin")
call recoveryHP(u,u,(GetUnitState(u,ConvertUnitState(1))*0.3),"","origin")
call recoveryMP(u,u,(GetUnitState(u,ConvertUnitState(3))*0.3),"","origin")
endif
if skillcode=='AF18' then
if WhatGold(50000,p)then
call SteelGold(50000,p)
if LuckySystem(25,p)then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700고서 해독에 성공했다!")
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='C054' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('R055'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
call SaveBoolean(System,p,$AC59D5EE,true)
call SetPlayerAbilityAvailable(pl,'AF18',false)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffff0000고서 해독에 실패했다")
endif
endif
endif
if skillcode=='AF19' then
if WhatGold(100000,p)then
call SteelGold(100000,p)
if LuckySystem(25,p)then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700고서 해방에 성공했다!")
set invenClick[p]=false
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='R055' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('U059'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
call SaveBoolean(System,p,$AC59D5EE,false)
call SaveBoolean(System,p,$E62F4E1E,true)
call SetPlayerAbilityAvailable(pl,'AF19',false)
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffff0000고서 해방에 실패했다")
endif
endif
endif
if skillcode=='AF20' then
set c=GetSpellTargetUnit()
set tempI=GetPlayerId(GetOwningPlayer(c))+1
call StatUP(p,12,"쿨감")
call StatUP(tempI,12,"쿨감")
call UnitAddAbility(u,'A02B')
call UnitAddAbility(c,'A02B')
call FilterBasic(pl,2.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,75.00,90.00,0.00,100.00,75.00,90.00,100.00)
call FilterBasic(Player(tempI-1),2.50,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.00,75.00,90.00,0.00,100.00,75.00,90.00,100.00)
call SaveInteger(System,0,$26F9F330,p)
call SaveInteger(System,0,$996EFFEA,tempI)
call SaveUnitHandle(System,0,$E20EFA5E,u)
call SaveUnitHandle(System,0,$A9F4A531,c)
call TimerStart(U061timer,0,false,null)
call SetPlayerAbilityAvailable(pl,'AF20',false)
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_blank.mp3"),(null),(127),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastBGM=udg_SND
set a=LoadInteger(udg_Hash,p,$39F717C6)
call SaveInteger(udg_Hash,p,$39F717C6,a+1)
set a=LoadInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80)+1
call SaveInteger(udg_Hash,GetHandleId(Charcter[p]),$AD509D80,a)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),5,PR[p]+1,I2S(a))
set a=LoadInteger(udg_Hash,tempI,$39F717C6)
call SaveInteger(udg_Hash,tempI,$39F717C6,a+1)
set a=LoadInteger(udg_Hash,GetHandleId(Charcter[tempI]),$AD509D80)+1
call SaveInteger(udg_Hash,GetHandleId(Charcter[tempI]),$AD509D80,a)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),5,PR[tempI]+1,I2S(a))
set a=0
loop
exitwhen a>=Playint
set a=a+1
call DisplayTimedTextToPlayer(Player(PP[a]-1),0,0,4.3,"|cff00bfff[시스템] - |cffffd700"+GetPlayerName(pl)+"와 "+GetPlayerName(Player(tempI-1))+"가 아셴테에 의거해 이 자리에서 계약했다!")
endloop
endif
if skillcode=='AF16' then
set tempI=0
if LoadInteger(udg_Hash,p,$D4397677)==1 then
set a=LoadInteger(udg_Hashtable,p,$FAFE5485)
call SaveInteger(udg_Hashtable,p,$FAFE5485,a+1)
set b=LoadReal(udg_Hashtable,p,$9B58470C)+(LoadReal(udg_Hashtable,p,$88E0F85F))
call SaveReal(udg_Hashtable,p,$9B58470C,b)
set tempI=1
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700수렵의 장을 읽어 Q 스킬 레벨이 상승했다.")
elseif LoadInteger(udg_Hash,p,$D4397677)==2 then
set a=LoadInteger(udg_Hashtable,p,$457BCFC0)
call SaveInteger(udg_Hashtable,p,$457BCFC0,a+1)
set b=LoadReal(udg_Hashtable,p,$E755DDB8)+(LoadReal(udg_Hashtable,p,$ABD3E955))
call SaveReal(udg_Hashtable,p,$E755DDB8,b)
set tempI=1
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700포박의 장을 읽어 W 스킬 레벨이 상승했다.")
elseif LoadInteger(udg_Hash,p,$D4397677)==3 then
set a=LoadInteger(udg_Hashtable,p,$6074AEF9)
call SaveInteger(udg_Hashtable,p,$6074AEF9,a+1)
set b=LoadReal(udg_Hashtable,p,$A2229E00)+(LoadReal(udg_Hashtable,p,$5E6EF8DA))
call SaveReal(udg_Hashtable,p,$A2229E00,b)
set tempI=1
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700수확의 장을 읽어 E 스킬 레벨이 상승했다.")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000사용 실패.")
endif
if tempI==1 then
if LoadInteger(udg_Hash,p,$BA82A5AA)==1 then
call UnitRemoveAbility(u,'AF16')
call SaveInteger(udg_Hash,p,$BA82A5AA,2)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffff0000더이상 제로의 서를 사용할수 없게되었다.")
elseif LoadInteger(udg_Hash,p,$BA82A5AA)==0 then
call SaveInteger(udg_Hash,p,$BA82A5AA,1)
endif
endif
endif
if skillcode=='AF22' then
set tempI=LoadInteger(udg_Hash,p,$282E9D48)
if tempI==2 then
call SaveInteger(udg_Hash,p,$282E9D48,0)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[더 커럽팅 하트] - |cffffd700효과를 제거했다.")
call StatUP(p,-0.25,"피증")
call StatUP(p,0.1,"방어관통")
endif
if tempI==1 then
call SaveInteger(udg_Hash,p,$282E9D48,2)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[더 커럽팅 하트] - |cffffd700썰물 상태로 변경했다.")
call StatUP(p,0.5,"피증")
call StatUP(p,-0.2,"방어관통")
endif
if tempI==0 then
call SaveInteger(udg_Hash,p,$282E9D48,1)
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[더 커럽팅 하트] - |cffffd700밀물 상태로 변경했다.")
call StatUP(p,-0.25,"피증")
call StatUP(p,0.1,"방어관통")
endif
endif
if skillcode=='SY02' then
set a=0
call GroupEnumUnitsInRange((s__party_G[(g)]),SkillLocX,SkillLocY,1500,null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if GetUnitAbilityLevel(c,'SY03')==1 then
set a=1
set d=c
endif
endloop
if a==1 then
call SetUnitInvulnerable(u,true)
call SetUnitX(u,GetUnitX(d))
call SetUnitY(u,GetUnitY(d))
call SetUnitInvulnerable(u,false)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(u),GetUnitY(u)))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(d),GetUnitY(d)))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",u,"origin"))
set t2=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t2),0,u)
if BossBattleN and s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(Boss),GetUnitY(Boss))<=2500 then
call SaveInteger(udg_Hash,GetHandleId(t2),1,8)
else
call SaveInteger(udg_Hash,GetHandleId(t2),1,4)
endif
call TimerStart(t2,0.01,false,function TelpoCool)
set t2=null
else
set t2=CreateTimer()
call DisplayTextToPlayer(pl,0,0,("|cFF0080FF[!]|r |cffFAEB78텔레포트 실패!|r"))
call SaveUnitHandle(udg_Hash,GetHandleId(t2),0,u)
call SaveInteger(udg_Hash,GetHandleId(t2),1,0)
call TimerStart(t2,0.01,false,function TelpoCool)
set t2=null
endif
endif
if skillcode=='AF23' then
set bool=false
set tempI=LoadInteger(Hash,p-1,$DA437F80)
if tempI=='R050' then
set invenslot='U016'
set bool=true
endif
if tempI=='R022' then
set invenslot='U020'
set bool=true
endif
if tempI=='R009' then
set invenslot='U008'
set bool=true
endif
if tempI=='C025' then
set invenslot='R020'
set bool=true
endif
if tempI=='C069' then
set invenslot='R080'
set bool=true
endif
if tempI=='C070' then
set invenslot='R081'
set bool=true
endif
if tempI=='C071' then
set invenslot='R083'
set bool=true
endif
if tempI=='C072' then
set invenslot='R086'
set bool=true
endif
if tempI=='R082' then
set invenslot='U080'
set bool=true
endif
if tempI=='R084' then
set invenslot='U081'
set bool=true
endif
if tempI=='R085' then
set invenslot='U082'
set bool=true
endif
if tempI=='R062' and LoadInteger(udg_Hash,p,$3D7E2EF)==6 then
set invenslot='U083'
set bool=true
endif
if WhatGold(100000,p)and bool then
call SteelGold(100000,p)
call StatUP(p,0.03,"피증")
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)==tempI then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S(invenslot))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
if tempI=='R050' then
call SaveBoolean(System,p,$F018D681,true)
call SaveBoolean(System,p,$EF91E6F0,false)
set STRup[p]=STRup[p]+5
if CharcterStat[p]then
set AGIup[p]=AGIup[p]+2
else
set INTup[p]=INTup[p]+2
endif
endif
if tempI=='R022' then
call TimerStart(U020timer,12,true,null)
call SaveInteger(udg_Hash,GetHandleId(U020timer),1,p)
call TriggerRegisterTimerExpireEvent(gg_trg_U020trg,U020timer)
call SaveBoolean(udg_Hash,p,$57EF94CC,true)
call SkillLVUP(p,5,1)
call SaveReal(udg_Hash,p,$648997DA,999999)
endif
if tempI=='R009' then
call SaveBoolean(System,p,$D163EB76,false)
endif
if tempI=='C025' then
call SaveBoolean(System,p,$261D0D16,false)
set a=LoadInteger(System,p,$9D58DA4A)
call StatUP(p,a*100,"올스탯")
set a=LoadInteger(Hash_Stat,p,$753B4F2F)+(a*2)
call SaveInteger(Hash_Stat,p,$753B4F2F,a)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 저주받은 꽃|cffffa500이 해주됬다!")
endif
if tempI=='C070' then
call SaveBoolean(udg_Hash,p,$343D806,true)
endif
if tempI=='C071' then
if LoadInteger(udg_Hash,p,$3D7E2EF)==0 and LoadBoolean(udg_Hash,p,$F61FF70C)then
call SaveInteger(udg_Hash,p,$3D7E2EF,1)
endif
endif
if tempI=='R085' then
if LoadInteger(udg_Hash,p,$3D7E2EF)==1 then
call SaveInteger(udg_Hash,p,$3D7E2EF,2)
endif
endif
if tempI=='C072' then
if LoadInteger(udg_Hash,p,$3D7E2EF)==2 then
call SaveInteger(udg_Hash,p,$3D7E2EF,3)
endif
endif
if tempI=='R084' then
if LoadInteger(udg_Hash,p,$3D7E2EF)==3 then
call SaveInteger(udg_Hash,p,$3D7E2EF,4)
endif
endif
if tempI=='R082' then
if LoadInteger(udg_Hash,p,$3D7E2EF)==4 and LoadBoolean(System,p,$C0D815BA)then
call SaveInteger(udg_Hash,p,$3D7E2EF,5)
call SteinsGate(p)
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='C069' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('C073'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
endif
endif
if tempI=='R062' then
call SaveBoolean(System,p,$DEEC8F75,true)
if LoadBoolean(udg_Hash,p,$343D806)then
call SetPlayerAbilityAvailable(Player(p-1),'AF24',true)
endif
endif
elseif not WhatGold(100000,p)or not bool then
call DisplayTimedTextToPlayer(pl,0,0,10.00,"|cffff0000[!] 돈이 부족하거나 올바른 대상이 아니다.")
endif
endif
if skillcode=='AF24' then
call SetPlayerAbilityAvailable(Player(p-1),'AF24',false)
call SteinsGate2(p)
call UnitAddAbility(u,'A04I')
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='U079' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('US15'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
set a=0
loop
exitwhen a>31
if LoadInteger(Hash,p-1,$DA437F80+a)=='C073' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(a)+"/"+I2S('R080'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",a),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set a=a+1
endloop
endif
if skillcode=='A04C' then
if not LoadBoolean(udg_Hash,p,$31DA12A9)then
call SaveBoolean(udg_Hash,p,$9CE7B80,true)
set RareDrop[p]=0
set UniqueDrop[p]=0
set UncarmonDrop[p]=0
set ArtChoiceTicket[p]=ArtChoiceTicket[p]+1
call SetPlayerState(Player(p-1),ConvertPlayerState(2),ArtChoiceTicket[p])
set a=0
set tempI=0
loop
exitwhen a>31
if LoadBoolean(Hash,p-1,$FD5E106+a)then
set tempI=tempI+1
endif
set a=a+1
endloop
set invenslot=tempI
call MultiboardSetItemValueBJ2(GetLastCreatedMultiboard(),4,PR[p]+1,I2S(invenslot))
call SaveInteger(Hash,p-1,$E79F32FE,invenslot)
if invenslot>=30 then
call DisplayTimedTextToPlayer(pl,0,0,10.00,"|cffff0000[!] 아티팩트 칸이 가득찼다.")
else
call SaveBoolean(udg_Hash,p,$31DA12A9,true)
set ArtRerollChance[p]=99
call DisplayTimedTextToPlayer(pl,0,0,10.00,"|cffff0000[!] 	|cffff8c00남은 리롤 횟수 : |cff0000ff"+I2S(ArtRerollChance[p]))
if ArtRerollChance[p]>=1 then
set c=CreateUnit(pl,'sys2',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),270)
set ArtRerollUnit[p]=c
endif
set c=CreateUnit(pl,'sys3',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),270)
set ArtGiveup[p]=c
call RemoveUnit(ArtPickProgress[p])
set ArtPickProgress[p]=null
set a=1
loop
exitwhen ArtpickSlot[p]<a
set invenslot=ArtefactSys2(p)
call ArtPectCodeSetting(a,invenslot,pl)
set a=a+1
endloop
endif
else
call itemgiven(p,u,'I02U')
endif
endif
if skillcode=='A04D' then
call RemoveItem(GetItemOfTypeFromUnit(u,'A04D'))
set ArtChoiceTicket[p]=ArtChoiceTicket[p]+1
call SetPlayerState(Player(p-1),ConvertPlayerState(2),ArtChoiceTicket[p])
if ArtChoiceTicket[p]>=1 and ArtChoiceTicketU[p]==null then
set c=CreateUnit(Player(p-1),'sys4',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),0)
set ArtChoiceTicketU[p]=c
endif
set temp_integer='N063'
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
endif
if skillcode=='A04E' then
call RemoveItem(GetItemOfTypeFromUnit(u,'A04E'))
set ArtChoiceTicket[p]=ArtChoiceTicket[p]+1
call SetPlayerState(Player(p-1),ConvertPlayerState(2),ArtChoiceTicket[p])
if ArtChoiceTicket[p]>=1 and ArtChoiceTicketU[p]==null then
set c=CreateUnit(Player(p-1),'sys4',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),0)
set ArtChoiceTicketU[p]=c
endif
set temp_integer='C057'
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
endif
if skillcode=='A04F' then
call RemoveItem(GetItemOfTypeFromUnit(u,'A04F'))
set ArtChoiceTicket[p]=ArtChoiceTicket[p]+1
call SetPlayerState(Player(p-1),ConvertPlayerState(2),ArtChoiceTicket[p])
if ArtChoiceTicket[p]>=1 and ArtChoiceTicketU[p]==null then
set c=CreateUnit(Player(p-1),'sys4',GetRectCenterX(gg_rct_DummyUnitSet),GetRectCenterY(gg_rct_DummyUnitSet),0)
set ArtChoiceTicketU[p]=c
endif
set temp_integer='R060'
set temp_integer2=p
call TriggerExecute(gg_trg_Artefactget)
endif
if skillcode=='A018' then
if EX[p]then
call DisplayTimedTextToPlayer(pl,0,0,10,"|cffff0000사용 조건이 맞지않아 실패했다.")
else
call DisplayTimedTextToPlayer(pl,0,0,10,"|cff00bfff[시스템] - |cffffd700사용 성공")
if GetUnitTypeId(Charcter[p])=='HR01' then
if not LoadBoolean(udg_Hash,0,$AA794A28)then
call ArtiCutN(p,'N019')
call SArtADD('N019',p)
endif
elseif GetUnitTypeId(Charcter[p])=='HR03' then
call ArtiCutU(p,'U009')
call SArtADD('U009',p)
elseif GetUnitTypeId(Charcter[p])=='HR04' then
call ArtiCutU(p,'U030')
call SArtADD('U030',p)
elseif GetUnitTypeId(Charcter[p])=='HR05' then
call ArtiCutU(p,'U042')
call SArtADD('U042',p)
elseif GetUnitTypeId(Charcter[p])=='HR06' then
call ArtiCutU(p,'U027')
call SArtADD('U027',p)
elseif GetUnitTypeId(Charcter[p])=='HR07' then
call ArtiCutU(p,'U026')
call SArtADD('U026',p)
elseif GetUnitTypeId(Charcter[p])=='HR08' then
call ArtiCutU(p,'U028')
call SArtADD('U028',p)
elseif GetUnitTypeId(Charcter[p])=='HR09' then
if not LoadBoolean(udg_Hash,0,$39D38E32)then
call ArtiCutU(p,'U002')
call SArtADD('U002',p)
endif
elseif GetUnitTypeId(Charcter[p])=='HR10' then
call ArtiCutU(p,'U043')
call SArtADD('U043',p)
elseif GetUnitTypeId(Charcter[p])=='HR11' then
call ArtiCutU(p,'U044')
call SArtADD('U044',p)
elseif GetUnitTypeId(Charcter[p])=='HR12' then
call ArtiCutU(p,'U053')
call SArtADD('U053',p)
elseif GetUnitTypeId(Charcter[p])=='HR13' then
call ArtiCutU(p,'U051')
call SArtADD('U051',p)
elseif GetUnitTypeId(Charcter[p])=='HR14' then
call ArtiCutU(p,'U052')
call SArtADD('U052',p)
elseif GetUnitTypeId(Charcter[p])=='HR15' then
call ArtiCutR(p,'R050')
call SArtADD('R050',p)
elseif GetUnitTypeId(Charcter[p])=='HR16' then
call ArtiCutU(p,'U055')
call SArtADD('U055',p)
elseif GetUnitTypeId(Charcter[p])=='HR17' then
call ArtiCutU(p,'U062')
call SArtADD('U062',p)
elseif GetUnitTypeId(Charcter[p])=='HR18' then
call ArtiCutU(p,'U060')
call SArtADD('U060',p)
elseif GetUnitTypeId(Charcter[p])=='HR19' then
call ArtiCutU(p,'U069')
call SArtADD('U069',p)
elseif GetUnitTypeId(Charcter[p])=='HR20' then
call ArtiCutU(p,'U074')
call SArtADD('U074',p)
elseif GetUnitTypeId(Charcter[p])=='HR21' then
call ArtiCutR(p,'R009')
call SArtADD('R009',p)
elseif GetUnitTypeId(Charcter[p])=='HR22' then
call ArtiCutU(p,'U077')
call SArtADD('U077',p)
endif
endif
endif
call s__party_deallocate((g))
set u=null
set t=null
set t2=null
set c=null
set pl=null
set ef=null
set d=null
set given=null
endfunction
function InitTrig_Skill_Cool_and_Arti_Skill takes nothing returns nothing
set gg_trg_Skill_Cool_and_Arti_Skill=CreateTrigger()
call TriggerAddAction(gg_trg_Skill_Cool_and_Arti_Skill,function Trig_Arti_Skill_Actions)
endfunction
function Teleport__SyncTP takes nothing returns nothing
local player pl=DzGetTriggerSyncPlayer()
local integer p=GetPlayerId(pl)+1
local string data=DzGetTriggerSyncData()
local real tempX=S2R(JNStringSplit(data,"/",0))
local real tempY=S2R(JNStringSplit(data,"/",1))
local unit u=Charcter[p]
call SetUnitInvulnerable(u,true)
if BossBattleN and s__Distance_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(Boss),GetUnitY(Boss))<=2500 then
call EXSetAbilityState(EXGetUnitAbility(u,'SY02'),ABILITY_STATE_COOLDOWN,8)
else
call EXSetAbilityState(EXGetUnitAbility(u,'SY02'),ABILITY_STATE_COOLDOWN,4)
endif
call SetUnitX(u,tempX)
call SetUnitY(u,tempY)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",tempX,tempY))
if not IsUnitInGroup(u,udg_Mujuk)then
call SetUnitInvulnerable(u,false)
endif
if GetLocalPlayer()==pl then
call PanCameraToTimed(tempX,tempY,0.00)
endif
set u=null
set pl=null
endfunction
function Teleport__F3_Teleport takes nothing returns nothing
local player pl=DzGetTriggerKeyPlayer()
local integer p=GetPlayerId(pl)+1
local unit u=Charcter[p]
local real cool=EXGetAbilityState(EXGetUnitAbility(u,'SY02'),ABILITY_STATE_COOLDOWN)
local real tempX=GetRectCenterX(gg_rct_AttackZone)+(((500)*1.0)*Cos(((270)*1.0)*bj_DEGTORAD))
local real tempY=GetRectCenterY(gg_rct_AttackZone)+(((500)*1.0)*Sin(((270)*1.0)*bj_DEGTORAD))
if cool<=0 and UnitAlive(u)and GetUnitTypeId(u)!=null and not BossBattle and not UnitHasBuff(u,'Bmlt')then
call DzSyncData("TP",R2S(tempX)+"/"+R2S(tempY))
endif
set u=null
set pl=null
endfunction
function Teleport__F4_Teleport takes nothing returns nothing
local integer p=GetPlayerId(DzGetTriggerKeyPlayer())+1
local unit u=Charcter[p]
local real cool=EXGetAbilityState(EXGetUnitAbility(u,'SY02'),ABILITY_STATE_COOLDOWN)
local real tempX=GetRectCenterX(TraningRoom[p])+(((900)*1.0)*Cos(((270)*1.0)*bj_DEGTORAD))
local real tempY=GetRectCenterY(TraningRoom[p])+(((900)*1.0)*Sin(((270)*1.0)*bj_DEGTORAD))
if cool<=0 and UnitAlive(u)and GetUnitTypeId(u)!=null and not BossBattle and not UnitHasBuff(u,'Bmlt')then
call DzSyncData("TP",R2S(tempX)+"/"+R2S(tempY))
endif
set u=null
endfunction
function Teleport__OnInit takes nothing returns nothing
local trigger trg=CreateTrigger()
call DzTriggerRegisterKeyEventByCode(trg,JN_OSKEY_F4,0,false,function Teleport__F4_Teleport)
set trg=CreateTrigger()
call DzTriggerRegisterKeyEventByCode(trg,JN_OSKEY_F3,0,false,function Teleport__F3_Teleport)
set trg=CreateTrigger()
call DzTriggerRegisterSyncData(trg,"TP",false)
call TriggerAddAction(trg,function Teleport__SyncTP)
set trg=null
endfunction
function Trig_Aqua_EXO takes nothing returns nothing
local integer a
local player pl=GetTriggerPlayer()
local integer p=GetPlayerId(pl)+1
local real temp2
local integer tempI
if GetClickedButton()==customDialogButton[7]then
if LoadBoolean(udg_Hash,p,$F96AA2DA)then
call SaveBoolean(udg_Hash,p,$F96AA2DA,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 이단자의 가면|cffffa500이 해주됬다!")
set a=LoadInteger(Hash_Stat,p,$8885555B)+10
call SaveInteger(Hash_Stat,p,$8885555B,a)
set a=LoadInteger(Hash_Stat,p,$924944F9)+5
call SaveInteger(Hash_Stat,p,$924944F9,a)
call DialogDisplay(pl,udg_CustomDialog[2],false)
call SetPlayerAbilityAvailable(pl,'AF11',false)
call EFsettingU(p,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",0,Charcter[p],"origin")
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 해당 저주를 소지중이 아니다.")
endif
elseif GetClickedButton()==customDialogButton[8]then
if LoadBoolean(udg_Hash,p,$3C47E971)then
call SaveBoolean(udg_Hash,p,$3C47E971,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 옅게 오염된 칼날|cffffa500이 해주됬다!")
set a=LoadInteger(Hash_Stat,p,$924944F9)+20
call SaveInteger(Hash_Stat,p,$924944F9,a)
set DashCool[p]=DashCool[p]-1.5
call DialogDisplay(pl,udg_CustomDialog[2],false)
call SetPlayerAbilityAvailable(pl,'AF11',false)
call EFsettingU(p,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",0,Charcter[p],"origin")
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 해당 저주를 소지중이 아니다.")
endif
elseif GetClickedButton()==customDialogButton[9]then
if LoadBoolean(udg_Hash,p,$7A069023)then
call SaveBoolean(udg_Hash,p,$7A069023,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 님필리아의 반지|cffffa500가 해주됬다!")
set temp2=LoadReal(Hash_Stat,p,$2E182EFC)+0.75
call SaveReal(Hash_Stat,p,$2E182EFC,temp2)
call DialogDisplay(pl,udg_CustomDialog[2],false)
call SetPlayerAbilityAvailable(pl,'AF11',false)
call EFsettingU(p,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",0,Charcter[p],"origin")
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 해당 저주를 소지중이 아니다.")
endif
elseif GetClickedButton()==customDialogButton[10]then
if LoadBoolean(System,p,$C175B12C)then
call SaveBoolean(System,p,$C175B12C,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 오염된 것 - 더러워진 은재 목주|cffffa500가 해주됬다!")
set STRup[p]=STRup[p]+8
call DialogDisplay(pl,udg_CustomDialog[2],false)
call SetPlayerAbilityAvailable(pl,'AF11',false)
call EFsettingU(p,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",0,Charcter[p],"origin")
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 해당 저주를 소지중이 아니다.")
endif
elseif GetClickedButton()==customDialogButton[11]then
if LoadBoolean(System,p,$534A17A0)then
call SaveBoolean(System,p,$534A17A0,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 오염된 것 - 처형인의 장갑|cffffa500이 해주됬다!")
call DialogDisplay(pl,udg_CustomDialog[2],false)
call SetPlayerAbilityAvailable(pl,'AF11',false)
call EFsettingU(p,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",0,Charcter[p],"origin")
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 해당 저주를 소지중이 아니다.")
endif
elseif GetClickedButton()==customDialogButton[12]then
if LoadBoolean(System,p,$261D0D16)then
call SaveBoolean(System,p,$261D0D16,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 저주받은 꽃|cffffa500이 해주됬다!")
set invenClick[p]=false
set tempI=0
loop
exitwhen tempI>31
if LoadInteger(Hash,p-1,$DA437F80+tempI)=='C025' then
if GetLocalPlayer()==Player(p-1)then
if Inventory_AreYouPickUp then
set Inventory_LastSelected=-1
set Inventory_AreYouPickUp=false
call DzFrameShow(DzFrameFindByName("InVe_SelectedBack",0),false)
call DzFrameShow(DzFrameFindByName("InVe_MouseItem",0),false)
endif
call DzSyncData("RCTGT",I2S(tempI)+"/"+I2S('R020'))
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",tempI),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
endif
exitwhen true
endif
set tempI=tempI+1
endloop
set a=LoadInteger(System,p,$9D58DA4A)
call StatUP(p,a*100,"올스탯")
set a=LoadInteger(Hash_Stat,p,$753B4F2F)+(a*2)
call SaveInteger(Hash_Stat,p,$753B4F2F,a)
call DialogDisplay(pl,udg_CustomDialog[2],false)
call SetPlayerAbilityAvailable(pl,'AF11',false)
call EFsettingU(p,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",0,Charcter[p],"origin")
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 해당 저주를 소지중이 아니다.")
endif
elseif GetClickedButton()==customDialogButton[13]then
call DialogDisplay(pl,udg_CustomDialog[2],false)
call DialogDisplay(pl,udg_CustomDialog[3],true)
elseif GetClickedButton()==customDialogButton[15]then
if LoadBoolean(udg_Hash,p,$85959104)then
call SaveBoolean(udg_Hash,p,$85959104,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 여행하는 마도서|cffffa500가 해주됬다!")
call DialogDisplay(pl,udg_CustomDialog[3],false)
call SetPlayerAbilityAvailable(pl,'AF11',false)
call EFsettingU(p,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",0,Charcter[p],"origin")
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 해당 저주를 소지중이 아니다.")
endif
elseif GetClickedButton()==customDialogButton[16]then
if LoadBoolean(udg_Hash,p,$42A9ECD3)then
call SaveBoolean(udg_Hash,p,$42A9ECD3,false)
set temp2=LoadReal(Hash_Stat,p,$164C40C9)+0.2
call SaveReal(Hash_Stat,p,$164C40C9,temp2)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 아포칼립스 바이러스|cffffa500가 해주됬다!")
call DialogDisplay(pl,udg_CustomDialog[3],false)
call SetPlayerAbilityAvailable(pl,'AF11',false)
call EFsettingU(p,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",0,Charcter[p],"origin")
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 해당 저주를 소지중이 아니다.")
endif
elseif GetClickedButton()==customDialogButton[17]then
if LoadBoolean(udg_Hash,p,$C24D2DFB)then
call SaveBoolean(udg_Hash,p,$C24D2DFB,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 만상저주|cffffa500가 해주됬다!")
set temp2=LoadReal(Hash_Stat,p,$62BD2901)+0.6
call SaveReal(Hash_Stat,p,$62BD2901,temp2)
set temp2=LoadReal(Hash_Stat,p,$34D9AB92)+50
call SaveReal(Hash_Stat,p,$34D9AB92,temp2)
set temp2=LoadReal(Hash_Stat,p,$540C61C7)+50
call SaveReal(Hash_Stat,p,$540C61C7,temp2)
call DialogDisplay(pl,udg_CustomDialog[3],false)
call SetPlayerAbilityAvailable(pl,'AF11',false)
call EFsettingU(p,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",0,Charcter[p],"origin")
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 해당 저주를 소지중이 아니다.")
endif
elseif GetClickedButton()==customDialogButton[18]then
if LoadBoolean(System,p,$BCFC08DC)then
call SaveBoolean(System,p,$BCFC08DC,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 악마와의 계약|cffffa500이 해주됬다!")
call DialogDisplay(pl,udg_CustomDialog[3],false)
call SetPlayerAbilityAvailable(pl,'AF11',false)
call EFsettingU(p,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",0,Charcter[p],"origin")
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 해당 저주를 소지중이 아니다.")
endif
elseif GetClickedButton()==customDialogButton[19]then
if LoadBoolean(System,p,$8ACA14E7)then
call SaveBoolean(System,p,$8ACA14E7,false)
set a=LoadInteger(Hash_Stat,p,$8885555B)+12
call SaveInteger(Hash_Stat,p,$8885555B,a)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 광전사|cffffa500가 해주됬다!")
call DialogDisplay(pl,udg_CustomDialog[3],false)
call SetPlayerAbilityAvailable(pl,'AF11',false)
call EFsettingU(p,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",0,Charcter[p],"origin")
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 해당 저주를 소지중이 아니다.")
endif
elseif GetClickedButton()==customDialogButton[21]then
if LoadBoolean(System,p,$EAB0C3BA)then
call SaveBoolean(System,p,$EAB0C3BA,false)
set temp2=LoadReal(Hash_Stat,p,$164C40C9)+0.12
call SaveReal(Hash_Stat,p,$164C40C9,a)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 고양이에게 홀리다|cffffa500가 해주됬다!")
call DialogDisplay(pl,udg_CustomDialog[3],false)
call SetPlayerAbilityAvailable(pl,'AF11',false)
call EFsettingU(p,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",0,Charcter[p],"origin")
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 해당 저주를 소지중이 아니다.")
endif
elseif GetClickedButton()==customDialogButton[22]then
if LoadBoolean(System,p,$42D99B02)then
call SaveBoolean(System,p,$42D99B02,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 흡혈 충동|cffffa500이 해주됬다!")
call DialogDisplay(pl,udg_CustomDialog[3],false)
call SetPlayerAbilityAvailable(pl,'AF11',false)
call EFsettingU(p,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",0,Charcter[p],"origin")
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 해당 저주를 소지중이 아니다.")
endif
elseif GetClickedButton()==customDialogButton[23]then
if LoadBoolean(udg_Hash,p,$395FAFE6)then
call SaveBoolean(udg_Hash,p,$395FAFE6,false)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - |cffff0000저주 : 저주받은 검|cffffa500이 해주됬다!")
call DialogDisplay(pl,udg_CustomDialog[3],false)
call SetPlayerAbilityAvailable(pl,'AF11',false)
call EFsettingU(p,"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",0,Charcter[p],"origin")
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 해당 저주를 소지중이 아니다.")
endif
elseif GetClickedButton()==customDialogButton[14]or GetClickedButton()==customDialogButton[20]then
call DialogDisplay(pl,udg_CustomDialog[2],false)
call DialogDisplay(pl,udg_CustomDialog[3],false)
endif
call TimerStart(udg_infoRe[p],0.01,false,null)
set pl=null
endfunction
function InitTrig_Aqua_EXO takes nothing returns nothing
set gg_trg_Aqua_EXO=CreateTrigger()
call TriggerRegisterDialogEvent(gg_trg_Aqua_EXO,udg_CustomDialog[2])
call TriggerRegisterDialogEvent(gg_trg_Aqua_EXO,udg_CustomDialog[3])
call TriggerAddAction(gg_trg_Aqua_EXO,function Trig_Aqua_EXO)
endfunction
function Trig_HolyWater takes nothing returns nothing
local integer a
local integer b
local integer c
local player pl=GetTriggerPlayer()
local integer p=GetPlayerId(pl)+1
if GetClickedButton()==customDialogButton[50]then
set a=LoadInteger(udg_Hash,p,$254000DE)+1
set b=LoadInteger(udg_Hash,p,$D9CFDBAB)+1
set c=LoadInteger(udg_Hash,p,$C2605BF6)+1
if c<=2 then
if GetLocalPlayer()==pl then
if a==5 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack5.blp",0)
elseif a==4 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack4.blp",0)
elseif a==3 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack3.blp",0)
elseif a==2 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack2.blp",0)
elseif a==1 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack1.blp",0)
elseif a==6 then
call DzFrameSetTexture(DzFrameFindByName("GloryWater_IconTriangle",0),"war3mapImported\\Stack6.blp",0)
endif
call DzFrameSetTexture(DzFrameFindByName("GloryWater_Back",0),"ReplaceableTextures\\CommandButtons\\BTNGloryWater.blp",0)
endif
call SaveInteger(udg_Hash,p,$254000DE,a)
call SaveInteger(udg_Hash,p,$D9CFDBAB,b)
call SaveInteger(udg_Hash,p,$C2605BF6,c)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 성수 강화에 성공했다.")
call DialogDisplay(pl,udg_CustomDialog[5],false)
else
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 사용에 실패했다.")
call itemgiven(p,Charcter[p],'I01Y')
endif
elseif GetClickedButton()==customDialogButton[51]then
set a=LoadInteger(udg_Hash,p,$6748D1B7)+5
set c=LoadInteger(udg_Hash,p,$45A8566B)+1
if c<=4 then
call SaveInteger(udg_Hash,p,$6748D1B7,a)
call SaveInteger(udg_Hash,p,$45A8566B,c)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 성수 강화에 성공했다.")
call DialogDisplay(pl,udg_CustomDialog[5],false)
else
call itemgiven(p,Charcter[p],'I01Y')
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 사용에 실패했다.")
endif
elseif GetClickedButton()==customDialogButton[52]then
set a=LoadInteger(udg_Hash,p,$382CD415)-2
set c=LoadInteger(udg_Hash,p,$FF3E708C)+1
if c<=4 then
call SaveInteger(udg_Hash,p,$382CD415,a)
call SaveInteger(udg_Hash,p,$FF3E708C,c)
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 성수 강화에 성공했다.")
call DialogDisplay(pl,udg_CustomDialog[5],false)
else
call itemgiven(p,Charcter[p],'I01Y')
call DisplayTimedTextToPlayer(Player(p-1),0,0,10,"|cff4169e1[시스템] - 사용에 실패했다.")
endif
endif
set pl=null
endfunction
function InitTrig_HolyWater takes nothing returns nothing
set gg_trg_HolyWater=CreateTrigger()
call TriggerRegisterDialogEvent(gg_trg_HolyWater,udg_CustomDialog[5])
call TriggerAddAction(gg_trg_HolyWater,function Trig_HolyWater)
endfunction
function WakamoF takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),1)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),3)
local integer stack=LoadInteger(udg_Hash,GetHandleId(t),4)
call SaveInteger(udg_Hash,GetHandleId(t),3,stage+1)
if not BossBattleN then
if not Battle[p]then
call StatUP(p,(stack*0.01)*-1,"스증")
if stack==10 then
call StatUP(p,-15,"쿨감")
endif
call BuffCall(u,'B040',0,false,false)
call SaveBoolean(udg_Hash,GetHandleId(u),$FE85F174,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
elseif BossBattleN then
if not UnitAlive(u)then
call StatUP(p,(stack*0.01)*-1,"스증")
if stack==10 then
call StatUP(p,-15,"쿨감")
endif
call BuffCall(u,'B040',0,false,false)
call SaveBoolean(udg_Hash,GetHandleId(u),$FE85F174,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
endif
if stage>=100 then
call SaveInteger(udg_Hash,GetHandleId(t),3,0)
if stack<=9 then
call SaveInteger(udg_Hash,GetHandleId(t),4,stack+1)
call StatUP(p,0.01,"스증")
endif
if stack==9 then
call StatUP(p,15,"쿨감")
if BossBattleN then
call BuffCall(u,'B040',999999,false,false)
else
call BuffCall(u,'B040',1,false,true)
endif
endif
endif
set t=null
endfunction
function US15t takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveBoolean(System,p,$94F6D6FE,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function SinobuC takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveBoolean(System,p,$3D68529D,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function WakamoEt takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
call RemoveSavedBoolean(udg_Hash,GetHandleId(u),$1B2F3C85)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function NaruFTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveBoolean(udg_Hash,p,$845B15F8,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function sirodamage takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local unit u=Charcter[p]
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local unit c
local real tempR
local integer g=s__party_create()
if CharcterStat[p]then
set tempR=(GetHeroAgi(u,true)*4)
else
set tempR=(GetHeroInt(u,true)*4)
endif
call EFsettingXY(p,"war3mapImported\\@EF_AZ_ESFrost_C1_Caster.mdl",0,GetUnitX(tar),GetUnitY(tar),1.0,270,1,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),300*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,tempR,6,0,false,1,0)
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call s__party_deallocate((g))
set t=null
set u=null
set tar=null
set c=null
endfunction
function Knightdamage takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local unit u=Charcter[p]
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local unit c
local real tempR
local integer g=s__party_create()
if CharcterStat[p]then
set tempR=(GetHeroAgi(u,true)*6)
else
set tempR=(GetHeroInt(u,true)*6)
endif
call EFsettingXY(p,"war3mapImported\\@EF_WindCirclefaster.mdl",0,GetUnitX(tar),GetUnitY(tar),1*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_White-Qiquan-Special.mdl",0,GetUnitX(tar),GetUnitY(tar),1.45*Skrange[p],270,1,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),300*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if c==tar then
call Damage(u,c,tempR,6,0,false,1.5,0)
else
call Damage(u,c,tempR,6,0,false,1,0)
endif
endif
endloop
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call s__party_deallocate((g))
set t=null
set u=null
set tar=null
set c=null
endfunction
function R069t takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveBoolean(System,p,$AFFD60C8,true)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function R077t takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveBoolean(udg_Hash,p,$C67FEEB4,true)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function KanekiD takes unit u returns nothing
local real dmg=(GetHeroAgi(u,true)*4)+(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.08)
local unit gunit=null
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer g=s__party_create()
local unit dummy=null
if LoadBoolean(udg_Hash,p,$2205A105)then
set dmg=(GetHeroAgi(u,true)*6)+(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.12)
endif
call EFsettingXY(p,"war3mapImported\\@EF_animeslashfinal5.mdl",0,GetUnitX(u),GetUnitY(u),4.0*Skrange[p],GetUnitFacing(u),1.0,0,0,50)
call EFsettingXY(p,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",0,GetUnitX(u),GetUnitY(u),1.0,GetUnitFacing(u),1.0,0,0,0)
set dummy=CreateUnit(Player(p-1),'sys9',GetUnitX(u)+(((60)*1.0)*Cos(((GetUnitFacing(u))*1.0)*bj_DEGTORAD)),GetUnitY(u)+(((60)*1.0)*Sin(((GetUnitFacing(u))*1.0)*bj_DEGTORAD)),GetUnitFacing(u))
call imagedummy(p,dummy,0.24,2,"attack",Model[p])
call invisible(dummy,20.00,100.00,0.24,0.01)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),500*Skrange[p],null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckPlayerGroup(gunit)then
call Damage(u,gunit,dmg,1,0,false,1,'H180')
call EFsettingU(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,gunit,"chest")
endif
endloop
set u=null
call s__party_deallocate((g))
set gunit=null
set dummy=null
endfunction
function C061ct takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveBoolean(udg_Hash,p,$5CAEE4EC,true)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function ikkiF takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),1)
call SaveInteger(udg_Hash,GetHandleId(t),1,stage+1)
if stage>=80 then
set stage=80
call SaveInteger(udg_Hash,GetHandleId(t),1,80)
else
call SaveInteger(udg_Hash,GetHandleId(t),1,stage+1)
endif
call StatChange(p,stage,"공속",0.099)
if BossBattleN then
call StatChange(p,20,"일공증",0.099)
call StatChange(p,10,"피감",0.099)
endif
if not Battle[p]then
call SaveBoolean(udg_Hash,GetHandleId(u),$CF0ECAB4,false)
call RemoveSavedBoolean(udg_Hash,GetHandleId(u),$CF0ECAB4)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
endfunction
function U060 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveBoolean(System,p,$EA28DE2C,false)
call RemoveSavedBoolean(System,p,$EA28DE2C)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function SeresT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveBoolean(Hash_Stat,p,$12AD886D,false)
call RemoveSavedBoolean(System,p,$12AD886D)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function Seres takes integer p returns nothing
local timer t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call TimerStart(t,120,false,function SeresT)
set t=null
endfunction
function savehomeT takes nothing returns nothing
local timer t=GetExpiredTimer()
call SaveBoolean(udg_Hash,0,$F40D3927,false)
call RemoveSavedBoolean(udg_Hash,0,$F40D3927)
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function savehome takes nothing returns nothing
local timer t=CreateTimer()
call TimerStart(t,2,false,function savehomeT)
set t=null
endfunction
function EsdsR takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276)
local real dmg=GetHeroInt(u,true)*(LoadInteger(udg_Hashtable,p,$BB70E228)*8)
call Damage(u,tar,dmg,2,2,false,1,'H164')
call EFsettingXY(p,"war3mapImported\\@EF_AZ_ESFrost_E2_Impact.mdl",0,GetUnitX(tar),GetUnitY(tar),2,270,1,0,0,150)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_ESFrost_E1_Caster.mdl",0,GetUnitX(tar),GetUnitY(tar),2,270,1,0,0,150)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_EsdeathRef.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,tar)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
set tar=null
endfunction
function EsdeathR takes unit u,unit tar,integer p returns nothing
local timer t=CreateTimer()
local unit c
local real tempR
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local real tempX
local real tempY
if GetRandomInt(0,1)==0 then
set tempX=GetUnitX(u)+(((-150)*1.0)*Cos(((angle+20)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-150)*1.0)*Sin(((angle+20)*1.0)*bj_DEGTORAD))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,1)
else
set tempX=GetUnitX(u)+(((-150)*1.0)*Cos(((angle-25)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((-150)*1.0)*Sin(((angle-25)*1.0)*bj_DEGTORAD))
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
endif
set tempR=(s__Distance_PBP(tempX,tempY,GetUnitX(tar),GetUnitY(tar))/4000)
set c=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call EFsettingU(p,"war3mapImported\\@EF_Icebolt.mdl",tempR,c,"origin")
call SetUnitAnimationByIndex(c,45)
call SetUnitScale(c,2,1,1)
call SetUnitFlyHeight(c,350,0)
call SetUnitFlyHeight(c,0,350/tempR)
call UnitRemove(c,tempR)
call KnockBackXYef(c,GetUnitX(tar),GetUnitY(tar),tempR,tempR*0.1)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,p)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,tar)
call TimerStart(t,tempR,false,function EsdsR)
set t=null
set u=null
set tar=null
set c=null
endfunction
function ArtifactDamageorHeal takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
local unit u=Charcter[p]
local unit drone=LoadUnitHandle(udg_Hash,p,$A3CE90DF)
local unit gunit=null
local unit tar=null
local real tempR=0
local integer tempI=0
local integer tempI2=0
local boolean check=LoadBoolean(Hash_Stat,p,$24067F02)
local integer g=s__party_create()
if LoadInteger(Hash_Stat,p,$10EACD89)!=0 then
if check==false then
set tempR=GetHeroInt(u,true)*4
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(drone),GetUnitY(drone),800,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if check==false then
if CheckPlayerGroup(gunit)then
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI,gunit)
endif
else
if IsUnitAlly(gunit,Player(p-1))==true and IsUnitIdType(GetUnitTypeId(gunit),UNIT_TYPE_MECHANICAL)==false then
set tempI=tempI+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI,gunit)
endif
endif
endloop
if tempI !=0 then
loop
exitwhen tar !=null
set tempI2=tempI2+1
if tempI2>tempI then
set tempI2=0
endif
if GetRandomInt(1,tempI)==1 then
set tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2)
endif
endloop
if check==false then
call EFsettingXY(p,"war3mapImported\\@EF_Archetype_R4.mdl",0,GetUnitX(tar),GetUnitY(tar),2.5,0,1.0,0,0,0)
else
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Goods_Blink(1).mdl",0,GetUnitX(tar),GetUnitY(tar),3.0,0,1.0,0,0,0)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),500,null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if check==false then
if CheckPlayerGroup(gunit)then
call Damage(drone,gunit,tempR,6,0,false,1,'item')
endif
else
if IsUnitAlly(gunit,Player(p-1))==true and IsUnitIdType(GetUnitTypeId(gunit),UNIT_TYPE_MECHANICAL)==false then
set tempR=GetHeroInt(u,true)+(GetUnitState(gunit,UNIT_STATE_MAX_LIFE)*0.02)
call recoveryHP(u,gunit,tempR,"Abilities\\Spells\\Human\\Heal\\HealTarget.mdl","origin")
endif
endif
endloop
endif
endif
if LoadBoolean(Hash_Stat,p,$24067F02)==false then
call SaveBoolean(Hash_Stat,p,$24067F02,true)
else
call SaveBoolean(Hash_Stat,p,$24067F02,false)
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
set drone=null
set gunit=null
set tar=null
call s__party_deallocate((g))
endfunction
function RomaroT takes nothing returns nothing
local timer t=GetExpiredTimer()
local real time=LoadReal(udg_Hash,GetHandleId(t),0)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),1)
call SaveReal(udg_Hash,GetHandleId(t),0,time-0.08)
if time<=0 then
call SaveBoolean(Hash_Stat,p,$CC310875,false)
call RemoveSavedBoolean(Hash_Stat,p,$CC310875)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function Romaro takes unit u,unit tar,integer p returns nothing
local timer t=CreateTimer()
local real dmg
local unit c
local real tempX=GetUnitX(tar)
local real tempY=GetUnitY(tar)
local real tempR=2+(R2I(ThunD[p]/4)*0.1)
local integer g=s__party_create()
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_Romaronia.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,tar)
call EFsettingXY(p,"war3mapImported\\@EF_Vinz Nova Ice.mdl",0,tempX,tempY,1.65*Skrange[p],270,1.65,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Goods_Lvlup(3).mdl",0,tempX,tempY,5.5*Skrange[p],270,1.65,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Electric Spark.mdl",0,tempX,tempY,2*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Blue-Zhendi-Ryougi-Big.mdl",0,tempX,tempY,1*Skrange[p],270,1,0,0,0)
if CharcterStat[p]then
set dmg=GetHeroAgi(u,true)*16
else
set dmg=GetHeroInt(u,true)*16
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,dmg,4,4,false,1,'item')
call Stun(u,c,tempR)
endif
endloop
call TimerStart(t,0.08,true,function RomaroT)
call SaveReal(udg_Hash,GetHandleId(t),0,8)
call SaveInteger(udg_Hash,GetHandleId(t),1,p)
call s__party_deallocate((g))
set t=null
set u=null
set tar=null
set c=null
endfunction
function GaruraT2 takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
local real time=LoadReal(udg_Hash,GetHandleId(tar),$2CCE111C)
call SaveReal(udg_Hash,GetHandleId(tar),$2CCE111C,time-0.08)
if time<=0 or not UnitAlive(tar)then
call SaveReal(udg_Hash,GetHandleId(tar),$2CCE111C,0)
call RemoveSavedInteger(udg_Hash,GetHandleId(tar),$2CCE111C)
call UnitRemoveAbility(tar,'A026')
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set tar=null
endfunction
function GaruraT takes unit tar,integer p returns nothing
local timer t
local integer a=0
local real tempR=(5+(R2I(WINDD[p]*100)/20))*-0.01
if GetUnitAbilityLevel(tar,'A026')==0 then
call UnitAddAbility(tar,'A026')
call EXSetAbilityDataReal(EXGetUnitAbility(tar,'A026'),1,108,GetUnitState(tar,ConvertUnitState(0x20))*tempR)
call IncUnitAbilityLevel(tar,'A026')
call DecUnitAbilityLevel(tar,'A026')
call BuffCall(tar,'BI10',4,false,false)
set t=CreateTimer()
call SaveReal(udg_Hash,GetHandleId(tar),$2CCE111C,4.0)
call TimerStart(t,0.08,true,function GaruraT2)
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,tar)
else
call BuffCall(tar,'BI10',4,false,false)
call SaveReal(udg_Hash,GetHandleId(tar),$2CCE111C,4.0)
endif
set t=null
set tar=null
endfunction
function KerberosT takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),1)
local real time=LoadReal(udg_Hash,GetHandleId(tar)+p+40000,$76AC6BCD)
local unit u=Charcter[p]
local real dmg
call SaveReal(udg_Hash,GetHandleId(tar)+p+40000,$76AC6BCD,time-1)
if CharcterStat[p]then
set dmg=GetHeroAgi(u,true)*2.0
else
set dmg=GetHeroInt(u,true)*2.0
endif
call Damage(u,tar,dmg,4,1,true,1,'item')
call EFsettingU(p,"Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl",0,tar,"chest")
if time<=0 or not UnitAlive(tar)then
call SaveReal(udg_Hash,GetHandleId(tar)+p+40000,$76AC6BCD,0)
call SaveInteger(udg_Hash,GetHandleId(tar)+p+40000,$83E2351B,0)
call RemoveSavedInteger(udg_Hash,GetHandleId(tar)+p+40000,$83E2351B)
call RemoveSavedReal(udg_Hash,GetHandleId(tar)+p+40000,$76AC6BCD)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set tar=null
endfunction
function Kerberos takes unit tar,integer p returns nothing
local timer t
local integer a=0
if LoadInteger(udg_Hash,GetHandleId(tar)+p+40000,$83E2351B)==0 then
set t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,tar)
call SaveInteger(udg_Hash,GetHandleId(t),1,p)
call SaveInteger(udg_Hash,GetHandleId(tar)+p+40000,$83E2351B,1)
call BuffCall(tar,'BI11',4,false,false)
call SaveReal(udg_Hash,GetHandleId(tar)+p+40000,$76AC6BCD,3.0)
call TimerStart(t,1,true,function KerberosT)
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,tar)
else
call BuffCall(tar,'BI11',4,false,false)
call SaveReal(udg_Hash,GetHandleId(tar)+p+40000,$76AC6BCD,3.0)
endif
set t=null
set tar=null
endfunction
function silvaC takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveBoolean(Hash_Stat,p,$6093226A,true)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function silva takes integer p returns nothing
local timer t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call TimerStart(t,8,false,function silvaC)
set t=null
endfunction
function AngelRapisT takes nothing returns nothing
local timer t=GetExpiredTimer()
local real time=LoadReal(udg_Hash,GetHandleId(t),0)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),1)
call SaveReal(udg_Hash,GetHandleId(t),0,time-0.06)
if time<=0 then
call SaveBoolean(Hash_Stat,p,$308AF369,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
endfunction
function AngelRapis takes integer p,unit tar returns nothing
local timer t=CreateTimer()
local unit u=Charcter[p]
local real dmg=(GetHeroStr(u,true)+GetHeroAgi(u,true)+GetHeroInt(u,true))*LoadReal(Hash_Stat,p,$6FC2025B)
call Damage(u,tar,dmg,3,0,false,1,'item')
call EFsettingU(p,"war3mapImported\\@EF_Soul Beam.mdl",0,tar,"origin")
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_RapisDamage.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,tar)
call SaveReal(udg_Hash,GetHandleId(t),0,6)
call SaveInteger(udg_Hash,GetHandleId(t),1,p)
call TimerStart(t,0.06,true,function AngelRapisT)
set t=null
set u=null
set tar=null
endfunction
function MaizerT takes nothing returns nothing
local timer t=GetExpiredTimer()
local real dmg=LoadReal(udg_Hash,GetHandleId(t),0)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),1)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),2)
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local integer p=LoadInteger(udg_Hash,GetHandleId(t),3)
call Damage(u,tar,dmg,4,0,false,1,'item')
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Sniper(2)_T_Misslie.mdl",0,GetUnitX(tar),GetUnitY(tar),1,angle,0,0,0,0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
set tar=null
endfunction
function Maizer takes unit u,unit tar returns nothing
local timer t=CreateTimer()
local real as=R2I(GetUnitState(u,ConvertUnitState(0x51)))
local real dmg=GetUnitState(u,ConvertUnitState(0x14))*as
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local unit dummy
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local real tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
local real tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
local integer loopA
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call imagedummySET(p,dummy,"war3mapImported\\@EF_BulletMissileHit.mdl")
call KnockBackXYef(dummy,GetUnitX(tar),GetUnitY(tar),0.1,0.01)
call SetUnitScale(dummy,2.5,1,1)
call SetUnitFlyHeight(dummy,200,0)
call UnitApplyTimedLife(dummy,'BHwe',0.1)
set loopA=0
if LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Maizer_Shoot.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,1)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Maizer_Shoot.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Maizer_Shoot.mp3"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,3)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Maizer_Shoot.mp3"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,50.00,u)
loop
exitwhen loopA>=3 or as<=1
set loopA=loopA+1
set as=as-1
set dummy=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call imagedummySET(p,dummy,"war3mapImported\\@EF_BulletMissileHit.mdl")
call KnockBackXYef(dummy,GetUnitX(tar),GetUnitY(tar),0.1+(loopA*0.014),0.01)
call SetUnitScale(dummy,2.5,1,1)
call SetUnitFlyHeight(dummy,200,0)
call UnitApplyTimedLife(dummy,'BHwe',0.1+(loopA*0.015))
endloop
call SaveReal(udg_Hash,GetHandleId(t),0,dmg)
call SaveUnitHandle(udg_Hash,GetHandleId(t),1,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),2,tar)
call SaveInteger(udg_Hash,GetHandleId(t),3,p)
call TimerStart(t,0.1,false,function MaizerT)
set t=null
set u=null
set tar=null
set dummy=null
endfunction
function IsrapilT takes nothing returns nothing
local timer t=GetExpiredTimer()
local real dmg=LoadReal(udg_Hash,GetHandleId(t),0)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),1)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),2)
local unit tar2=null
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local integer p=LoadInteger(udg_Hash,GetHandleId(t),3)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),4)
local real time=LoadReal(udg_Hash,GetHandleId(t),5)
local integer tempI=0
local integer tempI2=0
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),4,stage-1)
call SaveReal(udg_Hash,GetHandleId(t),5,time-0.08)
if stage>=1 then
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),800,null)
loop
set tar2=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),tar2)
exitwhen tar2==null
if CheckPlayerGroup(tar2)then
set tempI2=tempI2+1
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI2,tar2)
endif
endloop
if tempI2 !=0 then
loop
exitwhen tar2 !=null
set tempI=tempI+1
if tempI>tempI2 then
set tempI=0
endif
if GetRandomInt(1,tempI2)==1 then
set tar2=LoadUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276+tempI)
endif
endloop
else
set tar2=tar
endif
if LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_israpilDamage1.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,1)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_israpilDamage2.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,2)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_israpilDamage3.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,3)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_israpilDamage1.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,4)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_israpilDamage2.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,5)
elseif LoadInteger(udg_Hash,GetHandleId(u),$ABFBD6BA)==5 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_israpilDamage3.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(u),$ABFBD6BA,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,100.00,tar2)
if LoadBoolean(udg_Hash,GetHandleId(t),GetHandleId(tar2))then
call Damage(u,tar2,dmg,4,4,false,0.3,'item')
else
call Damage(u,tar2,dmg,4,4,false,1,'item')
call SaveBoolean(udg_Hash,GetHandleId(t),GetHandleId(tar2),true)
endif
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ERE_LightningStream.mdl",0,GetUnitX(tar2),GetUnitY(tar2),1.25,GetRandomReal(0,360),1,0,0,0)
endif
if time<=0 then
call SaveBoolean(Hash_Stat,p,$B592109D,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set u=null
set tar=null
set tar2=null
endfunction
function Israpil takes unit u,unit tar returns nothing
local timer t=CreateTimer()
local real dmg=GetHeroInt(u,true)*8
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real as=4+((Luck[p]-1)/0.1)
local unit dummy
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local real tempX=GetUnitX(u)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
local real tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_VFX_ERE_LightningStream.mdl",0,GetUnitX(tar),GetUnitY(tar),1.25,GetRandomReal(0,360),1,0,0,0)
call Damage(u,tar,dmg,4,4,false,1,'item')
call SaveReal(udg_Hash,GetHandleId(t),0,dmg)
call SaveUnitHandle(udg_Hash,GetHandleId(t),1,u)
call SaveUnitHandle(udg_Hash,GetHandleId(t),2,tar)
call SaveInteger(udg_Hash,GetHandleId(t),3,p)
call SaveInteger(udg_Hash,GetHandleId(t),4,R2I(as))
call SaveReal(udg_Hash,GetHandleId(t),5,8)
call TimerStart(t,0.08,true,function IsrapilT)
set t=null
set u=null
set tar=null
set dummy=null
endfunction
function HackterPower takes integer p,real tempX,real tempY returns nothing
local integer g=s__party_create()
local unit gunit
local real tempR
local unit u=Charcter[p]
set tempR=GetHeroAgi(u,true)*LoadInteger(Hash_Stat,p,$53858E4A)*0.05
call EFsettingXY(p,"war3mapImported\\@EF_23.mdl",0,tempX,tempY,1.0,270,1.0,0,0,0)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500*Skrange[p],null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckPlayerGroup(gunit)then
call Damage(u,gunit,tempR,4,2,false,1,0)
endif
endloop
call s__party_deallocate((g))
set gunit=null
set u=null
endfunction
function AluzardT takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$A59BB4C6)
call SaveBoolean(Hash_Stat,p,$21EE870,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function AluzardPower takes integer p,unit u,real r returns nothing
local timer t=CreateTimer()
local integer g=s__party_create()
local unit gunit
call SaveBoolean(Hash_Stat,p,$21EE870,true)
call EFsettingXY(p,"war3mapImported\\@EF_Blood Explosion.mdl",0,GetUnitX(u),GetUnitY(u),3.0*Skrange[p],270,1,0,0,50)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@@Is_iluzarDamage.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,u)
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),500*Skrange[p],null)
loop
set gunit=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),gunit)
exitwhen gunit==null
if CheckPlayerGroup(gunit)then
call Damage(u,gunit,r,4,1,false,1,'I624')
endif
endloop
call SaveReal(Hash_Stat,p,$21C5A944,0)
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,p)
call TimerStart(t,0.5,false,function AluzardT)
set t=null
call s__party_deallocate((g))
set gunit=null
set u=null
endfunction
function DPStimer takes nothing returns nothing
local integer p=0
local integer loopA=0
loop
exitwhen GetExpiredTimer()==SandbackkDPS[p]
set p=p+1
endloop
if LoadInteger(udg_Hash,999,$3862CC76)>=31 then
call UnitResetCooldown(Charcter[p])
endif
call SaveInteger(System,p,$98ED74C7,0)
loop
exitwhen loopA==6
call DisplayTimedTextToPlayer(Player(loopA),0,0,10,"|cff4169e1["+GetUnitName(Charcter[p])+"] - |cffffa50015초 DPS 결과 : "+R2S(DPS[p]))
set loopA=loopA+1
endloop
set DPS[p]=0
call PauseTimer(SandbackkDPS[p])
call DestroyTimer(SandbackkDPS[p])
endfunction
function ichigoF takes nothing returns nothing
local integer g=s__party_create()
local unit c
local integer p=GetPlayerId(GetOwningPlayer(AttackU))+1
local real tempR
local integer temp=GetHeroLevel(AttackU)
if temp>=200 then
set temp=200
endif
set temp=temp/50
call EFsettingXY(p,"war3mapImported\\@EF_[dz.spell]001.mdl",0,GetUnitX(AttackTar),GetUnitY(AttackTar),1*Skrange[p],270,1,0,0,0)
set tempR=(GetHeroAgi(AttackU,true)*(3+temp*0.5))+(GetUnitState(AttackU,ConvertUnitState(0x14))*(2.5+temp*0.5))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(AttackTar),GetUnitY(AttackTar),300*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if IsUnitType(c,UNIT_TYPE_HERO)then
call Damage(AttackU,c,tempR,1,0,false,1,CharacterColor[p+5])
else
call Damage(AttackU,c,tempR,1,0,false,1.4,CharacterColor[p+5])
endif
endif
endloop
call s__party_deallocate((g))
set c=null
endfunction
function meisiaC takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
call SaveInteger(Hash_Stat,p,$49F2FF0B,0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function meisia takes nothing returns nothing
local integer g=s__party_create()
local timer t=CreateTimer()
local unit c
local integer p=GetPlayerId(GetOwningPlayer(AttackU))+1
local real tempR=GetUnitState(AttackU,ConvertUnitState(0x14))*10
local real tempX=GetUnitX(AttackTar)
local real tempY=GetUnitY(AttackTar)
call EFsettingXY(p,"war3mapImported\\@EF_[DZ.Spell]006.mdl",0,tempX,tempY,1*Skrange[p],270,1,0,0,50)
call EFsettingXY(p,"war3mapImported\\@EF_az_daoguang-newx_r.mdl",0,tempX,tempY,2.5*Skrange[p],270,1,0,0,-125)
call EFsettingXY(p,"war3mapImported\\@EF_az_daoguang-newx_r.mdl",0,tempX,tempY,2.5*Skrange[p],90,1,0,0,-125)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(AttackU,c,tempR,4,3,false,1,'item')
endif
endloop
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call TimerStart(t,4,false,function meisiaC)
call s__party_deallocate((g))
set c=null
set t=null
endfunction
function Kazusa takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real tempR
if LoadInteger(udg_Hash,GetHandleId(u),$C7B31310)==1 then
set tempR=LoadReal(udg_Hashtable,p,$46D2FE81)+0.1
call SaveReal(udg_Hashtable,p,$46D2FE81,tempR)
call SetUnitState(u,ConvertUnitState(0x25),tempR)
call SaveInteger(udg_Hash,GetHandleId(u),$C7B31310,0)
endif
call UnitRemoveAbility(u,'A007')
call SaveInteger(udg_Hash,GetHandleId(u),$96DA32D9,0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
set u=null
set t=null
endfunction
function GutsD takes real dmg returns nothing
local integer g=s__party_create()
local unit c
local integer p=GetPlayerId(GetOwningPlayer(AttackU))+1
local real tempX
local real tempY
local real tempR
local integer tempI=LoadInteger(Hash_Stat,p,$13973259)
local integer tempI2=(LoadInteger(udg_Hashtable,p,$457BCFC0)*25)
local integer tempI3
if tempI<tempI2 then
if tempI+2==tempI2 then
call DisplayTimedTextToPlayer(Player(p-1),0,0,5,"|cffFF0000무자비 공격속도 최대치 달성")
endif
call SaveInteger(Hash_Stat,p,$13973259,tempI+5)
if LoadBoolean(udg_Hash,p,$27DA0754)then
set tempI3=LoadInteger(Hash_Stat,p,$E9334651)+1
call SaveInteger(Hash_Stat,p,$E9334651,tempI3)
set tempI=LoadInteger(Hash_Stat,p,$85EC709A)
call SaveInteger(Hash_Stat,p,$85EC709A,tempI+1)
endif
set tempI=LoadInteger(Hash_Stat,p,$6ACE3FD7)
call SaveInteger(Hash_Stat,p,$6ACE3FD7,tempI+5)
call TimerStart(udg_PstatTimer[p],0.01,false,null)
endif
call BuffCall(AttackU,'B004',1,false,true)
set tempX=GetUnitX(AttackTar)
set tempY=GetUnitY(AttackTar)
call EFsettingXY(p,"war3mapImported\\@EF_baojiang.mdl",0,tempX,tempY,0.5,270,1,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Sniper(2)_T_Misslie.mdl",0,tempX,tempY,2*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl",0,tempX,tempY,1.5*Skrange[p],270,1,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",0,tempX,tempY,1.5*Skrange[p],270,1,0,0,0)
set tempR=s__Angle_PBP(GetUnitX(AttackU),GetUnitY(AttackU),GetUnitX(AttackTar),GetUnitY(AttackTar))
set tempX=GetUnitX(AttackU)+(((40)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(AttackU)+(((40)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
if GutsAttack then
call EFsettingXY(p,"war3mapImported\\@EF_animeslashfinal5.mdx",0,tempX,tempY,4.5,tempR,1,0,90,0)
else
call EFsettingXY(p,"war3mapImported\\@EF_animeslashfinal5.mdx",0,tempX,tempY,4.5,tempR,1,0,180,0)
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(AttackTar),GetUnitY(AttackTar),500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and c !=AttackTar then
call Damage(AttackU,c,dmg,1,0,false,1,CharacterColor[p+5])
endif
endloop
call s__party_deallocate((g))
set c=null
endfunction
function MeilingED takes nothing returns nothing
local integer g=s__party_create()
local unit c
local integer p=GetPlayerId(GetOwningPlayer(AttackU))+1
local real tempX
local real tempY
local real tempR
local integer tempI
local integer tempI2
local real dmg
local real Armor=GetUnitState(AttackU,ConvertUnitState(0x20))
call UnitRemoveAbility(AttackU,'A019')
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Meiling_E_effect2.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80.00,AttackU)
call ND(Player(p-1),0.2,20)
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Zeusking_Impact-blue.mdx",0,GetUnitX(AttackTar),GetUnitY(AttackTar),2,270,1.5,0,0,120)
call EFsettingXY(p,"war3mapImported\\@EF_Vinz Nova Wind.mdx",0,GetUnitX(AttackTar),GetUnitY(AttackTar),1*Skrange[p],270,2.5,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_Vinz Nova Wind.mdx",0,GetUnitX(AttackTar),GetUnitY(AttackTar),1.5*Skrange[p],270,2,0,0,0)
call EFsettingXY(p,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(AttackTar),GetUnitY(AttackTar),1.8,270,2.5,0,0,0)
call EFsettingXY(p,"war3mapImported\\@EF_WindCirclefaster.mdx",0,GetUnitX(AttackU),GetUnitY(AttackU),2.5,270,1.5,0,0,50)
set dmg=(GetHeroInt(AttackU,true)*(7+(LoadInteger(udg_Hashtable,p,$6074AEF9)*5)))*(1+(Armor*0.001))
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(AttackTar),GetUnitY(AttackTar),500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(AttackU,c,dmg,2,0,false,1,'H123')
endif
endloop
call s__party_deallocate((g))
set c=null
endfunction
function N008T takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer p=LoadInteger(udg_Hash,GetHandleId(t),0)
local real tempR
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),1)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),2)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),3)
local real time=LoadReal(udg_Hash,GetHandleId(t),4)
local unit c
local integer g=s__party_create()
call SaveReal(udg_Hash,GetHandleId(t),4,time-0.06)
if not UnitAlive(tar)or time<=0 then
call EFsettingXY(p,"war3mapImported\\@EF_1 (241).mdl",0,GetUnitX(tar),GetUnitY(tar),3*Skrange[p],270,1,0,0,0)
if US01[p]then
set tempR=GetUnitState(u,ConvertUnitState(0x14))*5
else
set tempR=GetUnitState(u,ConvertUnitState(0x14))*2.5
endif
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(tar),GetUnitY(tar),550*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,tempR,5,0,false,1,0)
endif
endloop
call DestroyEffect(ef)
call SaveInteger(System,p,$B06CCFE4,0)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
call s__party_deallocate((g))
set t=null
set ef=null
set u=null
set tar=null
set c=null
endfunction
function N008multyattack takes nothing returns nothing
local timer t=CreateTimer()
local integer p=GetPlayerId(GetOwningPlayer(AttackU))+1
local real tempR
local effect ef
set ef=EFsettingUcustom(p,"war3mapImported\\@EF_frozenshell_Red3.mdl",AttackTar,"chest")
call SaveInteger(udg_Hash,GetHandleId(t),0,p)
call SaveEffectHandle(udg_Hash,GetHandleId(t),1,ef)
call SaveUnitHandle(udg_Hash,GetHandleId(t),2,AttackU)
call SaveUnitHandle(udg_Hash,GetHandleId(t),3,AttackTar)
call SaveReal(udg_Hash,GetHandleId(t),4,3)
call TimerStart(t,0.06,true,function N008T)
set t=null
set ef=null
endfunction
function orihimeTrig takes nothing returns nothing
local integer g=s__party_create()
local unit c
local integer p=GetPlayerId(GetOwningPlayer(AttackU))+1
local real tempR
call EFsettingXY(p,"war3mapImported\\@EF_[spell]_070.mdl",0,GetUnitX(AttackU),GetUnitY(AttackU),3*Skrange[p],270,1,0,0,0)
set tempR=GetUnitState(AttackU,UNIT_STATE_MAX_LIFE)*0.15
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(AttackU),GetUnitY(AttackU),500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(AttackU,c,tempR,4,0,false,1,0)
endif
endloop
call s__party_deallocate((g))
set c=null
endfunction
function PilloDamage takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local integer stage=LoadInteger(udg_Hash,GetHandleId(t),$62760798)
local real dmg=LoadReal(udg_Hash,GetHandleId(t),$6730A85A)
local real angle=LoadReal(udg_Hash,GetHandleId(t),$9966AD24)
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local effect ef=LoadEffectHandle(udg_Hash,GetHandleId(t),$23E22F84)
local real tempX
local real tempY
local unit c
local integer g=s__party_create()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,stage+1)
if stage==0 then
set tempX=GetUnitX(u)+(((100)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set ef=EFsettingXYcustom(p,"war3mapImported\\@EF_BladeBeamFinal.mdl",tempX,tempY)
call EXSetEffectSize(ef,3.5*Skrange[p])
call EXEffectMatRotateX(ef,0)
call EXEffectMatRotateZ(ef,angle)
call EXSetEffectZ(ef,150)
call SaveEffectHandle(udg_Hash,GetHandleId(t),$23E22F84,ef)
endif
if stage==15 then
call DestroyEffect(ef)
call FlushChildHashtable(udg_Hash,$60F1D10D)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
set tempX=EXGetEffectX(ef)+(((60)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=EXGetEffectY(ef)+(((60)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EXSetEffectXY(ef,tempX,tempY)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,300*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)and LoadInteger(udg_Hash,$60F1D10D,GetHandleId(c))==0 then
call Damage(Charcter[p],c,dmg,6,0,false,1,0)
call EFsettingU(p,"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",0,c,"origin")
call SaveInteger(udg_Hash,$60F1D10D,GetHandleId(c),1)
endif
endloop
call TimerStart(t,0.02,false,function PilloDamage)
endif
call s__party_deallocate((g))
set c=null
set t=null
set u=null
set ef=null
endfunction
function ArisaAttack takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA)
local unit tar=LoadUnitHandle(udg_Hash,GetHandleId(t),$580C1005)
local unit c
local real dmg
local real angle=s__Angle_PBP(GetUnitX(u),GetUnitY(u),GetUnitX(tar),GetUnitY(tar))
local integer p=LoadInteger(udg_Hash,GetHandleId(t),$32A9E4C8)
local real ChargeP=LoadReal(udg_Hash,GetHandleId(t),$62760798)
local real SecCharge=LoadReal(udg_Hash,GetHandleId(t),$5F1A0752)
local real tempX
local real tempY
local real MaxCharge=LoadReal(udg_Hash,GetHandleId(t),$17CEBA88)
local real AS
local integer tempI
local integer TLv=LoadInteger(udg_Hashtable,p,$132FA1F5)
local integer loopA=LoadInteger(udg_Hash,GetHandleId(t),$704DDED4)
local integer g=s__party_create()
if ChargeP==1.0 then
if LoadBoolean(udg_Hash,p,$3EC4FAF3)then
set MaxCharge=4
else
set MaxCharge=3
endif
set tempI=LoadInteger(udg_Hashtable,p,$B491D29B)
if tempI>=1 then
set SecCharge=0.06+(0.03+(TLv*0.01))
set MaxCharge=MaxCharge+(1.5+(TLv*0.5))
else
set SecCharge=0.06
endif
call SaveReal(udg_Hash,GetHandleId(t),$17CEBA88,MaxCharge)
if GetUnitCurrentOrder(u)!=String2OrderIdBJ("autoharvestlumber")then
call UnitRemoveAbility(u,'Abun')
call UnitRemoveAbility(u,'H099')
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_F_Charge.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call SaveReal(udg_Hash,GetHandleId(t),$5F1A0752,SecCharge)
endif
endif
if SecCharge==99 then
call UnitRemoveAbility(u,'Abun')
call UnitRemoveAbility(u,'H099')
if LoadBoolean(udg_Hash,p,$3EC4FAF3)then
if ChargeP>=MaxCharge then
set ChargeP=MaxCharge+0.4
endif
else
if ChargeP>=MaxCharge then
set ChargeP=MaxCharge
endif
endif
set AS=GetUnitState(u,ConvertUnitState(0x51))
set dmg=GetUnitState(u,ConvertUnitState(0x14))*2.0
set dmg=dmg*(ChargeP+(AS*0.2))
set tempX=GetUnitX(tar)
set tempY=GetUnitY(tar)
call GroupEnumUnitsInRange((s__party_G[(g)]),tempX,tempY,500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
if c==tar then
call UnitDamageTarget(u,tar,dmg,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
else
call Damage(Charcter[p],c,dmg,2,0,false,1,CharacterColor[p+5])
endif
endif
endloop
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_F_Damage.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,u)
call EFsettingXY(p,"war3mapImported\\@EF_[dz.spell]001_blue_mhg.mdl",0,tempX,tempY,1,270,1,0,0,0)
call EFsettingU(p,"war3mapImported\\@EF_AZ_Magina[2]_B.mdl",0,tar,"origin")
if ChargeP>=5.50 then
call EFsettingU(p,"war3mapImported\\@EF_AZ_Magina[2]_B.mdl",0,tar,"origin")
call EFsettingU(p,"war3mapImported\\@EF_Singularity I Blue.mdl",0,tar,"origin")
call EFsettingU(p,"war3mapImported\\@EF_shinratensei.mdl",0,tar,"origin")
call EFsettingXY(p,"war3mapImported\\@EF_Electric Spark.mdl",0,tempX,tempY,2,270,1,0,0,0)
endif
call EFsettingXY(p,"war3mapImported\\@EF_Electric Spark.mdl",0,tempX,tempY,2,270,1,0,0,0)
set tar=CreateUnit(Player(p-1),'sys9',tempX,tempY,angle)
call EFsettingU(p,"war3mapImported\\@EF_BY_Wood_Effect_Order_DanGe_LiangYiShi_ZhiSiZhiMoYanZhanJi Blue.mdl",0,tar,"origin")
call SetUnitFlyHeight(tar,150,0)
call SetUnitScale(tar,2,1,1)
call SetUnitVertexColor(tar,0,0,0,255)
call UnitApplyTimedLife(tar,'BHwe',1)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Aris_F_Charge.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
if GetUnitCurrentOrder(u)==String2OrderIdBJ("autoharvestlumber")then
set ChargeP=ChargeP+SecCharge
if LoadBoolean(udg_Hash,p,$3EC4FAF3)then
if ChargeP>=MaxCharge or not UnitAlive(tar)or not IsUnitInRange(tar,u,3000)then
call IssueImmediateOrder(u,"stop")
endif
else
if ChargeP>=MaxCharge or not UnitAlive(tar)or not IsUnitInRange(tar,u,3000)then
call IssueImmediateOrder(u,"stop")
endif
endif
call EFsettingU(p,"war3mapImported\\@EF_AZ_PotM(1)_W1_chest.mdl",0,u,"weapon")
call SetUnitFacingTimed(u,angle,0)
call SetUnitAnimationByIndex(u,10)
call SaveReal(udg_Hash,GetHandleId(t),$62760798,ChargeP)
if LoadBoolean(udg_Hash,p,$3EC4FAF3)and ChargeP>=3 then
call EFsettingU(p,"war3mapImported\\@EF_VFX_yae_ribbon_thun_BLUE2.mdl",0,u,"weapon")
call EFsettingU(p,"war3mapImported\\@EF_VFX_yae_ribbon_thun_BLUE.mdl",0,u,"weapon")
call EFsettingU(p,"war3mapImported\\@EF_Suzakuin-22.mdl",0,u,"chest")
if loopA==2 then
call EFsettingXY(p,"war3mapImported\\@EF_hutao-8.mdl",0,GetUnitX(u),GetUnitY(u),1,GetRandomReal(0,360),1,0,0,0)
call SaveInteger(udg_Hash,GetHandleId(t),$704DDED4,0)
else
call SaveInteger(udg_Hash,GetHandleId(t),$704DDED4,loopA+1)
endif
endif
call TimerStart(t,0.04,false,function ArisaAttack)
else
call SaveReal(udg_Hash,GetHandleId(t),$5F1A0752,99)
if GetUnitCurrentOrder(u)==String2OrderIdBJ("autoharvestlumber")then
call IssueImmediateOrder(u,"stop")
endif
call SetUnitAnimationByIndex(u,11)
call TimerStart(t,0.1,false,function ArisaAttack)
set tempX=GetUnitX(u)+(((250)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)+(((250)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
set dmg=s__Distance_PBP(tempX,tempY,GetUnitX(tar),GetUnitY(tar))-50
call EFsettingXY(p,"war3mapImported\\@EF_AZ_Z048.mdl",0,tempX,tempY,1,angle-180,1,0,0,0)
call EFsettingLOCDD(p,"war3mapImported\\@EF_Vinz Killer Instinct.mdl",tempX,tempY,1,angle,1,0,150,dmg,0.11,0.01)
call EFsettingLOCDD(p,"war3mapImported\\@EF_VFX_yae_ribbon_thun_BLUE.mdl",tempX,tempY,2,angle,1,0,150,dmg,0.11,0.01)
set tempX=GetUnitX(u)-(((125)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempY=GetUnitY(u)-(((125)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(p,"war3mapImported\\@EF_Dustwind Smoke.mdl",0,tempX,tempY,1,angle,1,0,0,0)
endif
set t=null
set u=null
set c=null
set tar=null
call s__party_deallocate((g))
endfunction
function MeilingFT takes nothing returns nothing
local timer t=GetExpiredTimer()
local real dmg=LoadReal(udg_Hash,GetHandleId(t),0)
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),1)
local real tempR
set tempR=LoadReal(udg_Hash,GetHandleId(u),$FB407201)-dmg
call SaveReal(udg_Hash,GetHandleId(u),$FB407201,tempR)
if tempR<GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.1 then
call UnitRemoveAbility(u,'A01B')
endif
if tempR<=0 then
call SaveReal(udg_Hash,GetHandleId(u),$FB407201,0)
endif
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function MeilingF takes unit u,real dmg returns nothing
local timer t=CreateTimer()
local real a=LoadReal(udg_Hash,GetHandleId(u),$FB407201)
if(a+dmg)>=GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.2 then
set dmg=dmg-(dmg-(GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.2-a))
if dmg<=0 then
set dmg=0
endif
call SaveReal(udg_Hash,GetHandleId(u),$FB407201,a+dmg)
else
call SaveReal(udg_Hash,GetHandleId(u),$FB407201,a+dmg)
endif
if(a+dmg)>=GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.1 then
call UnitAddAbility(u,'A01B')
endif
call SaveReal(udg_Hash,GetHandleId(t),0,dmg)
call SaveUnitHandle(udg_Hash,GetHandleId(t),1,u)
call TimerStart(t,3,true,function MeilingFT)
set u=null
set t=null
endfunction
function RBt takes nothing returns nothing
local timer t=GetExpiredTimer()
call SaveBoolean(udg_Hash,0,$A11CC5B7,false)
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function R034dmg takes unit u returns nothing
local integer g=s__party_create()
local unit c
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real tempR
set c=CreateUnit(Player(p-1),'sys9',GetUnitX(u),GetUnitY(u),270)
call SetUnitVertexColor(c,0,255,0,255)
call SetUnitScale(c,1.65*Skrange[p],1,1)
call UnitApplyTimedLife(c,'BHwe',1.35)
call EFsettingU(p,"war3mapImported\\@EF_az_siwenpf1_w1_hui.mdl",0.6,c,"origin")
call EFsettingU(p,"war3mapImported\\@EF_az_siwenpf1_w1_hui.mdl",0.6,c,"origin")
call EFsettingXY(p,"war3mapImported\\@EF_[AKE]war3AKE.com - 9997996651673980406444242.mdl",0,GetUnitX(u),GetUnitY(u),2*Skrange[p],270,1,0,0,0)
set tempR=GetUnitState(u,UNIT_STATE_MAX_LIFE)*0.01
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),500*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call poison(u,c,tempR,4,1,4,0,0,"Objects\\Spawnmodels\\Demon\\DemonSmallDeathExplode\\DemonSmallDeathExplode.mdl")
call UnitAddAbility(c,'A01D')
call EXSetAbilityDataReal(EXGetUnitAbility(c,'A01D'),1,108,(GetUnitState(c,ConvertUnitState(0x20))*0.12)*-1)
call IncUnitAbilityLevel(c,'A01D')
call DecUnitAbilityLevel(c,'A01D')
call TimerABILL(c,4,'A01D')
endif
endloop
call s__party_deallocate((g))
set c=null
set u=null
endfunction
function HolyArcaD takes unit u returns nothing
local integer g=s__party_create()
local unit c
local integer p=GetPlayerId(GetOwningPlayer(u))+1
local real tempR
call EFsettingXY(p,"war3mapImported\\@EF_LightNova.mdl",0,GetUnitX(u),GetUnitY(u),1.5*Skrange[p],270,1,0,0,0)
set tempR=GetHeroStr(u,true)*10
call GroupEnumUnitsInRange((s__party_G[(g)]),GetUnitX(u),GetUnitY(u),1000*Skrange[p],null)
loop
set c=FirstOfGroup((s__party_G[(g)]))
call GroupRemoveUnit((s__party_G[(g)]),c)
exitwhen c==null
if CheckPlayerGroup(c)then
call Damage(u,c,tempR,3,0,false,1,'item')
endif
endloop
call s__party_deallocate((g))
set c=null
set u=null
endfunction
function Trig_Any_Unit_Damage_Actions takes nothing returns nothing
local timer t
local unit trgU=GetTriggerUnit()
local unit atkU=GetEventDamageSource()
local integer atk=GetPlayerId(GetOwningPlayer(atkU))+1
local integer trg=GetPlayerId(GetOwningPlayer(trgU))+1
local unit c
local real dmg=GetEventDamage()
local player pl=Player(11)
local integer tempI
local integer loopA
local integer typ2=0
local real tempR=0
local real tempR2
local real tempR3
local real tempR4
local real tempR5
local real DMP=1.0
local real angle
local string l__str
local string str2
local effect ef
local boolean Bcheck=false
if atkU==Charcter[atk]then
set typ2=LoadInteger(udg_Hash,GetHandleId(atkU),$B5798816)
endif
if dmg>0 then
if atkU==Charcter[atk]then
set pl=Player(atk-1)
set tempR=1
elseif trgU==Charcter[trg]then
set pl=Player(trg-1)
set tempR=1
endif
if tempR==1 then
if not Battle[GetPlayerId(pl)+1]then
call DisplayTimedTextToPlayer(pl,0,0,5,"[시스템] - 전투개시")
endif
set Battle[GetPlayerId(pl)+1]=true
set t=udg_BattleEND[GetPlayerId(pl)+1]
call TimerStart(t,12.00,false,null)
set t=null
endif
if GetUnitTypeId(atkU)=='HR22' and not LoadBoolean(udg_Hash,GetHandleId(atkU),$FE85F174)then
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,atk)
call SaveUnitHandle(udg_Hash,GetHandleId(t),1,atkU)
call TimerStart(t,0.01,true,function WakamoF)
call SaveBoolean(udg_Hash,GetHandleId(atkU),$FE85F174,true)
set t=null
endif
if GetUnitTypeId(trgU)=='HR22' and not LoadBoolean(udg_Hash,GetHandleId(trgU),$FE85F174)then
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,trg)
call SaveUnitHandle(udg_Hash,GetHandleId(t),1,trgU)
call TimerStart(t,0.01,true,function WakamoF)
call SaveBoolean(udg_Hash,GetHandleId(trgU),$FE85F174,true)
set t=null
endif
if C004[atk]then
call BuffCall(atkU,'AT00',1,false,true)
endif
if GetUnitTypeId(atkU)=='HR17' or GetUnitTypeId(trgU)=='HR17' then
if GetUnitTypeId(atkU)=='HR17' and not LoadBoolean(udg_Hash,GetHandleId(atkU),$CF0ECAB4)then
set t=CreateTimer()
call TimerStart(t,0.1,true,function ikkiF)
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,atkU)
call SaveBoolean(udg_Hash,GetHandleId(atkU),$CF0ECAB4,true)
call BuffCall(atkU,'B024',1,false,true)
set t=null
elseif GetUnitTypeId(trgU)=='HR17' and not LoadBoolean(udg_Hash,GetHandleId(trgU),$CF0ECAB4)then
set t=CreateTimer()
call TimerStart(t,0.1,true,function ikkiF)
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,trgU)
call SaveBoolean(udg_Hash,GetHandleId(trgU),$CF0ECAB4,true)
call BuffCall(trgU,'B024',1,false,true)
set t=null
endif
endif
if LoadBoolean(System,trg,$567B85B4)then
call SaveBoolean(System,trg,$567B85B4,false)
call TimerStart(N035timer[trg],6,false,null)
set AttackU=trgU
set AttackTar=atkU
call orihimeTrig()
endif
if LoadBoolean(System,atk,$D0192BF3)and GetUnitTypeId(trgU)=='wv00' and GetUnitUserData(trgU)<=89 then
call SaveBoolean(System,atk,$D0192BF3,false)
set tempI=300*LoadInteger(udg_Hash,999,$3862CC76)
call EFsettingU(atk,"Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl",0,trgU,"origin")
call GivenGold(tempI,atk,trgU)
call KillUnit(trgU)
call TimerStart(R029timer[atk],60,false,null)
endif
if LoadInteger(System,atk,$DA550BF7)==1 and trgU==Boss and not LoadBoolean(udg_Hash,0,$A11CC5B7)then
call SaveBoolean(udg_Hash,0,$A11CC5B7,true)
call StatChangeX(12,-0.4,"HP리젠",6,"RB")
set RBtimer=CreateTimer()
call TimerStart(RBtimer,1,false,function RBt)
endif
if LoadBoolean(System,atk,$1DCE1310)then
call SaveBoolean(System,atk,$1DCE1310,false)
call Damage(Charcter[atk],trgU,GetHeroAgi(Charcter[atk],true)*5,4,0,true,1,0)
call Assets_UseSoundByPath__MakeSound(("Sound\\Units\\Combat\\MetalHeavySliceWood1.wav"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,50,trgU)
call EFsettingU(atk,"Objects\\Spawnmodels\\Orc\\OrcSmallDeathExplode\\OrcSmallDeathExplode.mdl",0.0,trgU,"origin")
call TimerStart(R031timer[atk],4.0,false,null)
endif
if LoadBoolean(Hash_Stat,atk,$AA426FEF)and LoadBoolean(Hash_Stat,atk,$B657F083)==false then
call SaveBoolean(Hash_Stat,atk,$B657F083,true)
call HackterPower(atk,GetUnitX(trgU),GetUnitY(trgU))
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_HackterDamage.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,70,trgU)
call TimerStart(Hackter[atk],8.0,false,null)
endif
if LoadBoolean(Hash_Stat,atk,$9BB9078A)and not LoadBoolean(Hash_Stat,atk,$308AF369)then
call SaveBoolean(Hash_Stat,atk,$308AF369,true)
call AngelRapis(atk,trgU)
call itemCoolTime(GetItemOfTypeFromUnit(atkU,'I943'),8)
endif
if(0 !=EXGetEventDamageData(EVENT_DAMAGE_DATA_IS_PHYSICAL))or ConvertAttackType(EXGetEventDamageData(6))==ConvertAttackType(5)then
set typ2=0
if atkU==Charcter[atk]then
if GetUnitTypeId(atkU)=='HR09' and(0 !=EXGetEventDamageData(EVENT_DAMAGE_DATA_IS_PHYSICAL))then
else
if LoadBoolean(System,atk,$643D1E47)then
set tempI=LoadInteger(System,atk,$5C87BBE5)
if tempI==4 then
set tempI=0
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_Whisper.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,75,atkU)
call EFsettingXY(atk,"war3mapImported\\@EF_yz-leimitx10.mdl",1,GetUnitX(trgU),GetUnitY(trgU),1,270,1,0,0,50)
set DMP=DMP+0.2
endif
call SaveInteger(System,atk,$5C87BBE5,tempI+1)
endif
if US01[atk]then
set DMP=DMP+US01damage[atk]
endif
if LoadBoolean(System,atk,$2D47D94C)then
call SaveBoolean(System,atk,$2D47D94C,false)
call EFsettingXY(atk,"war3mapImported\\@EF_70.mdl",0,GetUnitX(trgU),GetUnitY(trgU),1,270,1,0,0,0)
if GetRandomInt(1,2)==1 then
set tempR=GetUnitX(atkU)+(((350)*1.0)*Cos(((GetUnitFacing(atkU)+45)*1.0)*bj_DEGTORAD))
set tempR2=GetUnitY(atkU)+(((350)*1.0)*Sin(((GetUnitFacing(atkU)+45)*1.0)*bj_DEGTORAD))
else
set tempR=GetUnitX(atkU)+(((350)*1.0)*Cos(((GetUnitFacing(atkU)-45)*1.0)*bj_DEGTORAD))
set tempR2=GetUnitY(atkU)+(((350)*1.0)*Sin(((GetUnitFacing(atkU)-45)*1.0)*bj_DEGTORAD))
endif
set angle=s__Angle_PBP(GetUnitX(atkU),GetUnitY(atkU),GetUnitX(trgU),GetUnitY(trgU))
set c=CreateUnit(GetOwningPlayer(atkU),'sys7',tempR,tempR2,s__Angle_PBP(tempR,tempR2,GetUnitX(trgU),GetUnitY(trgU)))
call imagedummy(atk,c,0.35,2,"attack",Model[atk])
call SetUnitTimeScale(c,1.6)
call SetUnitVertexColor(c,255,255,255,127)
call EFsettingXY(atk,"war3mapImported\\@EF_canying.mdl",0,tempR,tempR2,1,270,1,0,0,50)
if GetUnitTypeId(atkU)=='HR09' then
call SetUnitAnimationByIndex(c,11)
set DMP=DMP+0.5
else
call UnitDamageTarget(atkU,trgU,GetEventDamage()*0.5,true,false,ConvertAttackType(5),ConvertDamageType(4),ConvertWeaponType(0))
endif
endif
if LoadBoolean(Hash_Stat,atk,$52FAA289)then
set tempI=LoadInteger(Hash_Stat,atk,$DC650744)+1
if tempI>=5 then
call EFsettingXY(atk,"war3mapImported\\@EF_70.mdl",0,GetUnitX(trgU),GetUnitY(trgU),1,270,1,0,0,0)
if GetRandomInt(1,2)==1 then
set tempR=GetUnitX(atkU)+(((350)*1.0)*Cos(((GetUnitFacing(atkU)+45)*1.0)*bj_DEGTORAD))
set tempR2=GetUnitY(atkU)+(((350)*1.0)*Sin(((GetUnitFacing(atkU)+45)*1.0)*bj_DEGTORAD))
else
set tempR=GetUnitX(atkU)+(((350)*1.0)*Cos(((GetUnitFacing(atkU)-45)*1.0)*bj_DEGTORAD))
set tempR2=GetUnitY(atkU)+(((350)*1.0)*Sin(((GetUnitFacing(atkU)-45)*1.0)*bj_DEGTORAD))
endif
if GetRandomInt(1,2)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_Alberu1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_Alberu2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
endif
call PlaySoundOnUnit(udg_SND,100,atkU)
set angle=s__Angle_PBP(GetUnitX(atkU),GetUnitY(atkU),GetUnitX(trgU),GetUnitY(trgU))
set c=CreateUnit(GetOwningPlayer(atkU),'sys7',tempR,tempR2,s__Angle_PBP(tempR,tempR2,GetUnitX(trgU),GetUnitY(trgU)))
call imagedummy(atk,c,0.35,2,"attack",Model[atk])
call SetUnitTimeScale(c,1.6)
call SetUnitVertexColor(c,255,255,255,127)
call EFsettingXY(atk,"war3mapImported\\@EF_canying.mdl",0,tempR,tempR2,1,270,1,0,0,50)
if GetUnitTypeId(atkU)=='HR09' then
call SetUnitAnimationByIndex(c,11)
set DMP=DMP+0.5
call SaveInteger(Hash_Stat,atk,$DC650744,1)
else
call SaveInteger(Hash_Stat,atk,$DC650744,0)
call UnitDamageTarget(atkU,trgU,GetEventDamage()*0.5,true,false,ConvertAttackType(5),ConvertDamageType(4),ConvertWeaponType(0))
endif
else
call SaveInteger(Hash_Stat,atk,$DC650744,tempI)
endif
endif
if LoadBoolean(Hash_Stat,atk,$4F540F4D)then
if LoadInteger(Hash_Stat,atk,$49F2FF0B)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_Meisia.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,atkU)
set AttackU=atkU
set AttackTar=trgU
call meisia()
call SaveInteger(Hash_Stat,atk,$49F2FF0B,1)
call itemCoolTime(GetItemOfTypeFromUnit(atkU,'I603'),4)
endif
endif
if N008[atk]and LoadInteger(System,atk,$B06CCFE4)==0 then
call SaveInteger(System,atk,$B06CCFE4,1)
set AttackU=atkU
set AttackTar=trgU
call N008multyattack()
endif
if LoadBoolean(Hash_Stat,atk,$9D41BD23)then
set tempI=LoadInteger(Hash_Stat,atk,$B7E7C8AD)/10
set tempI=tempI+5
if GetRandomint(1,1)<=tempI then
call Maizer(atkU,trgU)
endif
endif
if GetUnitAbilityLevel(atkU,'A021')==1 then
call BuffCall(atkU,'BI06',0,false,false)
call UnitRemoveAbility(atkU,'A021')
call SaveBoolean(Hash_Stat,atk,$B26AA776,false)
call SaveBoolean(Hash_Stat,atk,$B592109D,true)
call itemCoolTime(GetItemOfTypeFromUnit(atkU,'I640'),8)
call Israpil(atkU,trgU)
endif
if LoadBoolean(Hash_Stat,atk,$6093226A)then
call SaveBoolean(Hash_Stat,atk,$6093226A,false)
call itemCoolTime(GetItemOfTypeFromUnit(atkU,'I645'),8)
set tempR=s__Distance_PBP(GetUnitX(atkU),GetUnitY(atkU),GetUnitX(trgU),GetUnitY(trgU))
if tempR>=2000 then
set tempR=3
else
set tempR=1+((tempR/100)*0.1)
endif
call Damage(atkU,trgU,(GetUnitState(atkU,ConvertUnitState(0x14))*8)*tempR,4,0,false,1,'item')
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_SilvaDamage.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,atkU)
call EFsettingXY(atk,"war3mapImported\\@EF_Archetype_R5.mdl",0,GetUnitX(trgU),GetUnitY(trgU),1.25,270,1,0,0,0)
call EFsettingXY(atk,"war3mapImported\\@EF_AZ_Sniper(2)_Misslie.mdl",0,GetUnitX(trgU),GetUnitY(trgU),1.85,GetRandomReal(0,360),1,0,0,250)
call silva(atk)
endif
if LoadBoolean(Hash_Stat,atk,$FA682A40)and GetUnitAbilityLevel(trgU,'BPSE')>=1 then
call EFsettingU(atk,"Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl",0,trgU,"origin")
call EFsettingU(atk,"war3mapImported\\@EF_Suzakuin-21.mdl",0,trgU,"origin")
set tempR=GetUnitState(atkU,ConvertUnitState(0x14))*4.0
call Damage(atkU,trgU,tempR,4,4,false,1,'item')
endif
if LoadBoolean(System,atk,$F1BF676D)and GetEventDamage()>0 then
call poison(atkU,trgU,(I2R(GetHeroAgi(Charcter[atk],true))*0.1)*0.33,3,1,4,1,0,"Abilities\\Weapons\\BloodElfSpellThiefMISSILE\\BloodElfSpellThiefMISSILE.mdl")
endif
if LoadBoolean(System,atk,$91113F5D)and GetEventDamage()>0 then
set tempR=GetUnitState(atkU,ConvertUnitState(0x14))
call poison(atkU,trgU,((tempR*0.15)*0.33),3,1,3,0,0,"Abilities\\Weapons\\ChimaeraAcidMissile\\ChimaeraAcidMissile.mdl")
endif
if LoadBoolean(System,atk,$224E7B1B)and not LoadBoolean(udg_Hash,atk,$664E8F23)then
call Damage(atkU,trgU,(GetEventDamage()*0.1)+(GetUnitState(atkU,ConvertUnitState(0x14))*0.25),4,1,false,1,0)
call StatChangeX(atk,10,"이속",2,"nonomi")
call BuffCall(atkU,'AT17',2,false,false)
endif
if LoadBoolean(udg_Hash,atk,$89619C0C)then
if LoadUnitHandle(udg_Hash,atk,$AC182F1C)==trgU then
set tempR=LoadReal(udg_Hash,atk,$C07652C1)+0.01
if tempR>=0.6 then
set tempR=0.6
endif
call SaveReal(udg_Hash,atk,$C07652C1,tempR)
set DMP=DMP+tempR
else
call SaveReal(udg_Hash,atk,$C07652C1,0.25)
call SaveUnitHandle(udg_Hash,atk,$AC182F1C,trgU)
set DMP=DMP+0.25
endif
endif
if GetUnitTypeId(atkU)=='HR13' then
call UnitAddAbility(atkU,'A007')
set tempI=LoadInteger(udg_Hash,GetHandleId(atkU),$96DA32D9)+1
if tempI>=20 then
if LoadInteger(udg_Hash,GetHandleId(atkU),$C7B31310)==0 then
set tempR=LoadReal(udg_Hashtable,atk,$46D2FE81)-0.1
call SaveReal(udg_Hashtable,atk,$46D2FE81,tempR)
call SetUnitState(atkU,ConvertUnitState(0x25),tempR)
endif
if LoadBoolean(udg_Hashtable,GetHandleId(atkU),$CF16D639)then
call BuffCall(atkU,'B021',30,false,false)
call TimerStart(KazusaT,30,false,function Kazusa)
else
call BuffCall(atkU,'B021',6,false,false)
call TimerStart(KazusaT,6,false,function Kazusa)
endif
call SaveUnitHandle(udg_Hash,GetHandleId(KazusaT),0,atkU)
call SaveInteger(udg_Hash,GetHandleId(atkU),$96DA32D9,20)
call SaveInteger(udg_Hash,GetHandleId(atkU),$C7B31310,1)
call EXSetAbilityDataReal(EXGetUnitAbility(atkU,'A007'),1,108,0.8)
call IncUnitAbilityLevel(atkU,'A007')
call DecUnitAbilityLevel(atkU,'A007')
else
call SaveInteger(udg_Hash,GetHandleId(atkU),$96DA32D9,tempI)
call EXSetAbilityDataReal(EXGetUnitAbility(atkU,'A007'),1,108,tempI*0.04)
call IncUnitAbilityLevel(atkU,'A007')
call DecUnitAbilityLevel(atkU,'A007')
endif
endif
if GetUnitTypeId(atkU)=='HR12' then
set tempR=LoadReal(udg_Hash,GetHandleId(atkU),$FB407201)*0.15
if tempR>=0 then
call EFsettingXY(atk,"war3mapImported\\@EF_Heal Green_d.mdl",0,GetUnitX(atkU),GetUnitY(atkU),1,270,2.5,0,0,0)
call recoveryHP(atkU,atkU,tempR,"","origin")
endif
if GetUnitAbilityLevel(atkU,'A019')==1 then
set AttackU=atkU
set AttackTar=trgU
call MeilingED()
call BuffCall(atkU,'B018',0,false,false)
endif
endif
if LoadBoolean(System,atk,$16431182)then
set tempI=LoadInteger(System,atk,$9652F653)
if tempI<=3 then
set tempR=LoadReal(Hash_Stat,atk,$45E22B52)+0.03
call SaveReal(Hash_Stat,atk,$45E22B52,tempR)
call SaveInteger(System,atk,$9652F653,tempI+1)
endif
call BuffCall(atkU,'AT07',10,false,false)
call TimerStart(C0321timer[atk],10,false,null)
call TimerStart(udg_infoRe[atk],0.0314,false,null)
endif
if LoadBoolean(System,atk,$F61DFFEB)and CharcterStat[atk]and GetRandomint(1,100)<=(50+ADcriP[atk])then
if LoadBoolean(System,atk,$6C86C3C8)then
set DMP=DMP+0.3
else
set DMP=DMP+0.15
endif
endif
if LoadBoolean(System,atk,$6C86C3C8)and not CharcterStat[atk]and GetRandomint(1,100)<=(50+APcriP[atk])then
if LoadBoolean(System,atk,$F61DFFEB)then
set DMP=DMP+0.3
else
set DMP=DMP+0.15
endif
endif
if LoadBoolean(udg_Hash,atk,$5CAEE4EC)then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_ShildAttack.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,95,atkU)
set tempR=(GetHeroStr(atkU,true)*10)*(1+(GetUnitState(atkU,ConvertUnitState(0x20))*0.002))
call Damage(atkU,trgU,tempR,4,1,false,1,0)
set tempR4=s__Angle_PBP(GetUnitX(atkU),GetUnitY(atkU),GetUnitX(trgU),GetUnitY(trgU))
set tempR=GetUnitX(atkU)+(((150)*1.0)*Cos(((tempR4)*1.0)*bj_DEGTORAD))
set tempR2=GetUnitY(atkU)+(((150)*1.0)*Sin(((tempR4)*1.0)*bj_DEGTORAD))
call EFsettingXY(atk,"war3mapImported\\@EF_1130.mdl",0,tempR,tempR2,2,tempR4,1,0,0,100)
call SaveBoolean(udg_Hash,atk,$5CAEE4EC,false)
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,atk)
call TimerStart(t,5,false,function C061ct)
endif
endif
call EXSetEventDamage(GetEventDamage()*(DMP))
if GetUnitTypeId(atkU)=='HR09' and(0 !=EXGetEventDamageData(EVENT_DAMAGE_DATA_IS_PHYSICAL))then
set t=CreateTimer()
call SaveReal(udg_Hash,GetHandleId(t),$62760798,1.0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,atkU)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$580C1005,trgU)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,atk)
call UnitAddAbility(atkU,'Abun')
call UnitAddAbility(atkU,'H099')
call IssueImmediateOrder(atkU,"autoharvestlumber")
call TimerStart(t,0.04,false,function ArisaAttack)
else
if GetUnitTypeId(atkU)=='HR09' then
call Damage(atkU,trgU,GetEventDamage(),5,0,false,1,CharacterColor[atk+5])
else
call Damage(atkU,trgU,GetEventDamage(),5,0,false,1,0)
endif
endif
if GetUnitTypeId(atkU)=='HR16' and GetUnitAbilityLevel(atkU,'H164')>=1 then
if EXGetAbilityState(EXGetUnitAbility(atkU,'H164'),ABILITY_STATE_COOLDOWN)<=0 then
call EXSetAbilityState(EXGetUnitAbility(atkU,'H164'),ABILITY_STATE_COOLDOWN,4*ct[atk])
call EsdeathR(atkU,trgU,atk)
endif
endif
if GetUnitTypeId(atkU)=='HR01' then
set Attack1[atk]=Attack1[atk]+1
if Attack2[atk]<=Attack1[atk]then
set Attack1[atk]=0
set AttackU=atkU
set AttackTar=trgU
call ichigoF()
endif
endif
if GetUnitTypeId(atkU)=='HR04' then
set AttackU=atkU
set AttackTar=trgU
call GutsD(GetEventDamage())
set tempI=GetRandomInt(1,4)
if tempI==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_W_Effect_1.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif tempI==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_W_Effect_2.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif tempI==3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_W_Effect_3.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
elseif tempI==4 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_W_Effect_4.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
endif
call PlaySoundOnUnit(udg_SND,75,atkU)
endif
if GetUnitTypeId(atkU)=='HR17' then
if LoadBoolean(udg_Hash,GetHandleId(atkU),$E3FD8C59)then
if GetRandomInt(0,2)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikkiQ.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,80,atkU)
endif
if LoadInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikkiQd.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA,1)
elseif LoadInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikkiQd.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA,2)
elseif LoadInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikkiQd.mp3"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA,3)
elseif LoadInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA)>=3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikkiQd.mp3"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,80,atkU)
call SaveBoolean(udg_Hash,GetHandleId(atkU),$E3FD8C59,false)
set ef=LoadEffectHandle(udg_Hash,GetHandleId(atkU),$9C8B35F)
call DestroyEffect(ef)
call EFsettingXY(atk,"war3mapImported\\@EF_az_siwenpf1_w1_hui.mdl",0,GetUnitX(trgU),GetUnitY(trgU),1,270,1,0,0,0)
call EFsettingXY(atk,"war3mapImported\\@EF_WindCirclefaster.mdl",0,GetUnitX(trgU),GetUnitY(trgU),1,270,1,0,0,0)
call EFsettingXY(atk,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(trgU),GetUnitY(trgU),1,270,1,0,0,0)
call ND(Player(atk-1),0.1,15)
set tempR=(GetUnitState(atkU,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,atk,$FAFE5485)*0.4))
call Damage(atkU,trgU,tempR,1,0,false,1,'H171')
endif
set Attack1[atk]=Attack1[atk]+1
if Attack2[atk]<=Attack1[atk]then
set Attack1[atk]=0
if LoadInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikkiW.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA,1)
elseif LoadInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikkiW.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA,2)
elseif LoadInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikkiW.mp3"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA,3)
elseif LoadInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA)>=3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikkiW.mp3"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,80,atkU)
call ND(Player(atk-1),0.1,6)
set tempR=s__Angle_PBP(GetUnitX(atkU),GetUnitY(atkU),GetUnitX(trgU),GetUnitY(trgU))
set tempR2=GetUnitX(atkU)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempR3=GetUnitY(atkU)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
set ef=EFsettingXYcustom(atk,"war3mapImported\\@EF_Anime Slash.mdl",tempR2,tempR3)
call SetSpecialEffectColorEx(ef,155,155,255,255)
call EXEffectMatRotateX(ef,45)
call EXEffectMatRotateZ(ef,tempR)
call EXSetEffectZ(ef,150)
call DestroyEffect(ef)
call EFsettingXY(atk,"war3mapImported\\@EF_SlashCRITLOW.mdl",0,GetUnitX(trgU),GetUnitY(trgU),2,270,1,0,0,0)
set tempR=(GetHeroAgi(atkU,true)*(LoadInteger(udg_Hashtable,atk,$457BCFC0)))+(GetUnitState(atkU,ConvertUnitState(0x14)))+(GetUnitState(trgU,UNIT_STATE_LIFE)*0.005)
if LoadBoolean(udg_Hash,GetHandleId(atkU),$BCFEAC47)then
set tempR=tempR+(GetUnitState(atkU,ConvertUnitState(0x14))*(LoadInteger(udg_Hashtable,atk,$FAFE5485)*0.2))
endif
call Damage(atkU,trgU,tempR,1,0,false,1,'H172')
endif
endif
if GetUnitTypeId(atkU)=='HR20' then
if not LoadBoolean(udg_Hash,atk,$845B15F8)then
call SaveBoolean(udg_Hash,atk,$845B15F8,true)
set tempI=LoadInteger(udg_Hash,GetHandleId(atkU),$93AB7BC2)
if LoadBoolean(udg_Hash,atk,$C75C3005)then
set tempI=tempI+2
else
set tempI=tempI+1
endif
if tempI>=7 then
set tempI=7
endif
call SaveInteger(udg_Hash,GetHandleId(atkU),$93AB7BC2,tempI)
if GetLocalPlayer()==Player(atk-1)then
if tempI==1 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack1.blp",0)
endif
if tempI==2 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack2.blp",0)
endif
if tempI==3 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack3.blp",0)
endif
if tempI==4 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack4.blp",0)
endif
if tempI==5 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack5.blp",0)
endif
if tempI==6 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack6.blp",0)
endif
if tempI==7 then
call DzFrameSetTexture(DzFrameFindByName("Stack_Mini_Icon",0),"war3mapImported\\Stack7.blp",0)
endif
endif
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,atk)
call TimerStart(t,1,false,function NaruFTimer)
set t=null
endif
endif
if GetUnitTypeId(atkU)=='HR22' then
if not LoadBoolean(udg_Hash,GetHandleId(trgU),$1B2F3C85)then
if LoadInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA)==0 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Shot2.mp3"),("1"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA,1)
elseif LoadInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Shot2.mp3"),("2"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA,2)
elseif LoadInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA)==2 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Shot2.mp3"),("3"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA,3)
elseif LoadInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA)>=3 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_KazusaR_Shot2.mp3"),("4"),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call SaveInteger(udg_Hash,GetHandleId(atkU),$ABFBD6BA,0)
endif
call StopSound(udg_SND,false,false)
call PlaySoundOnUnit(udg_SND,80,atkU)
call EFsettingXY(atk,"war3mapImported\\@EF_VFX_ERE_LightningcloudRed.mdl",0,GetUnitX(trgU),GetUnitY(trgU),2,270,1,0,0,100)
set tempR=GetHeroInt(atkU,true)*(LoadInteger(udg_Hashtable,atk,$6074AEF9)*3.5)
if GetUnitAbilityLevel(trgU,'A046')==0 then
call UnitAddAbility(trgU,'A046')
call WakamoDstack(trgU)
call Damage(atkU,trgU,tempR,2,0,false,1,'H223')
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_WakamoD_ef.mp3"),(null),(127),((1.00)*1.0),TRUE,((1500)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100.00,trgU)
call StatChangeX(atk,LoadInteger(udg_Hashtable,atk,$6074AEF9)*4,"이속",3,"H02234")
call BuffCall(atkU,'B038',3,false,false)
if trgU==LoadUnitHandle(udg_Hash,GetHandleId(atkU),$CC761EC2)then
set tempI=LoadInteger(udg_Hash,GetHandleId(trgU),$27B55739)+1
call SaveInteger(udg_Hash,GetHandleId(trgU),$27B55739,tempI)
endif
call UnitRemoveAbility(trgU,'A046')
set tempI=GetHeroLevel(atkU)
if tempI>=200 then
set tempI=200
endif
set tempI=tempI/40
set tempR=tempR+(GetHeroInt(atkU,true)*(4+(tempI*4.5)))
call EFsettingXY(atk,"war3mapImported\\@EF_az_ts_v2.mdl",0,GetUnitX(trgU),GetUnitY(trgU),2,270,1,0,0,0)
call Damage(atkU,trgU,tempR,2,0,false,1,'H223')
endif
call SaveBoolean(udg_Hash,GetHandleId(trgU),$1B2F3C85,true)
set t=CreateTimer()
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,trgU)
if LoadBoolean(udg_Hash,atk,$28E17E86)then
call TimerStart(t,2*ct[atk],false,function WakamoEt)
else
call TimerStart(t,4*ct[atk],false,function WakamoEt)
endif
set t=null
endif
endif
elseif GetUnitTypeId(atkU)=='ndm1' then
if GetRandomInt(1,2)==1 then
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_dronAttack1.mp3"),(null),(100),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
else
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@AF_dronAttack2.mp3"),(null),(100),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
endif
call AttachSoundToUnit(udg_SND,trgU)
call StartSound(udg_SND)
set tempR=1.0
set tempR2=0.25
if LoadBoolean(udg_Hash,atk,$C7E4B113)then
set tempR=1.5
set tempR2=0.5
endif
if CharcterStat[atk]==true then
set tempR=((GetHeroAgi(Charcter[atk],true)*tempR)+GetUnitState(Charcter[atk],ConvertUnitState(0x14))*tempR2)*LoadReal(udg_Hash,atk,$FF8638AE)
else
set tempR=((GetHeroInt(Charcter[atk],true)*tempR)+GetUnitState(Charcter[atk],ConvertUnitState(0x14))*tempR2)*LoadReal(udg_Hash,atk,$FF8638AE)
endif
call Damage(atkU,trgU,tempR,6,0,false,1,0)
elseif GetUnitTypeId(atkU)=='cdm1' then
if CharcterStat[atk]==true then
set tempR=GetHeroAgi(Charcter[atk],true)+GetUnitState(Charcter[atk],ConvertUnitState(0x14))*0.3
else
set tempR=GetHeroInt(Charcter[atk],true)+GetUnitState(Charcter[atk],ConvertUnitState(0x14))*0.3
endif
call Damage(atkU,trgU,tempR,6,0,false,1,0)
elseif GetUnitTypeId(atkU)=='rdm1' or GetUnitTypeId(atkU)=='rdm2' then
if GetUnitTypeId(atkU)=='rdm1' then
set tempR=(GetHeroStr(Charcter[atk],true)*5)
else
if CharcterStat[atk]==true then
set tempR=(GetHeroAgi(Charcter[atk],true)*3)+(GetHeroStr(Charcter[atk],true)*6)
else
set tempR=(GetHeroInt(Charcter[atk],true)*3)+(GetHeroStr(Charcter[atk],true)*6)
endif
endif
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),$62760798,0)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$B6A6EBAA,atkU)
call SaveReal(udg_Hash,GetHandleId(t),$6730A85A,tempR)
set tempR=s__Angle_PBP(GetUnitX(atkU),GetUnitY(atkU),GetUnitX(trgU),GetUnitY(trgU))
call SaveReal(udg_Hash,GetHandleId(t),$9966AD24,tempR)
call SaveInteger(udg_Hash,GetHandleId(t),$32A9E4C8,atk)
call TimerStart(t,0.01,false,function PilloDamage)
set t=null
elseif GetOwningPlayer(atkU)==Player(10)or GetOwningPlayer(atkU)==Player(11)or GetOwningPlayer(atkU)==Player(12)then
call Damage(atkU,trgU,GetEventDamage(),1,0,false,1,0)
elseif GetUnitTypeId(atkU)=='h056' then
set tempR=GetUnitUserData(atkU)
set tempR=GetHeroInt(Charcter[atk],true)*(1+((tempR*(LoadInteger(udg_Hashtable,atk,$FAFE5485)*0.035))+LoadInteger(udg_Hashtable,atk,$FAFE5485))*0.2)
call Damage(atkU,trgU,tempR,2,4,true,1,'H051')
call EFsettingXY(atk,"war3mapImported\\@EF_sl_e6bb08d.mdl",0,GetUnitX(trgU),GetUnitY(trgU),2,270,1,0,0,0)
call EFsettingXY(atk,"war3mapImported\\@EF_skill_buwenyineng.mdl",0,GetUnitX(atkU),GetUnitY(atkU),1,270,1,0,0,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Yae_Q_Damage.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call AttachSoundToUnit(udg_SND,atkU)
call SetSoundVolume(udg_SND,127)
call StartSound(udg_SND)
elseif GetUnitTypeId(atkU)=='idm1' then
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,atk)
call TimerStart(t,0.01,false,function ArtifactDamageorHeal)
set t=null
elseif GetUnitTypeId(atkU)=='cdm2' then
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,atk)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,trgU)
call TimerStart(t,0.01,false,function sirodamage)
set t=null
elseif GetUnitTypeId(atkU)=='rdm3' then
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),$A59BB4C6,atk)
call SaveUnitHandle(udg_Hash,GetHandleId(t),$FC4D8276,trgU)
call TimerStart(t,0.01,false,function Knightdamage)
set t=null
elseif GetUnitTypeId(atkU)=='udm2' then
if CharcterStat[atk]==true then
set tempR=(GetHeroAgi(Charcter[atk],true)*2)
else
set tempR=(GetHeroInt(Charcter[atk],true)*2)
endif
call Damage(atkU,trgU,tempR,6,0,false,1,0)
elseif GetUnitTypeId(atkU)=='h196' then
if LoadBoolean(udg_Hash,atk,$1669AAAD)then
set tempR=(GetHeroInt(Charcter[atk],true)*5)
else
set tempR=(GetHeroInt(Charcter[atk],true)*3)
endif
call Damage(atkU,trgU,tempR,2,0,false,1,0)
endif
call EXSetEventDamage(0)
endif
if LoadBoolean(udg_Hash,atk,$8C79D441)then
if GetRandomInt(1,10)<=1 then
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagTextBJ(bj_lastCreatedTextTag,"?",7)
call SetTextTagPosUnit(bj_lastCreatedTextTag,trgU,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,45,45,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag,64,90)
call SetTextTagFadepoint(bj_lastCreatedTextTag,3)
call EFsettingXY(atk,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(trgU),GetUnitY(trgU),2,270,1,0,0,0)
call EXSetEventDamage(0)
endif
endif
if LoadBoolean(udg_Hash,trg,$8C79D441)then
call recoveryHP(trgU,trgU,(GetEventDamage()*0.03),"","")
call recoveryMP(trgU,trgU,(GetEventDamage()*0.005),"","")
endif
if trgU==LoadUnitHandle(System,0,$A9F4A531)then
set tempR2=GetEventDamage()*0.12
if GetEventDamage()<=GetUnitState(trgU,UNIT_STATE_MAX_LIFE)*0.6 then
call EXSetEventDamage(GetEventDamage()-tempR2)
call Damage(atkU,LoadUnitHandle(System,0,$E20EFA5E),tempR2,1,0,false,1,0)
endif
endif
if LoadBoolean(System,atk,$71E32348)and not LoadBoolean(System,atk,$EA28DE2C)then
call SaveBoolean(System,atk,$EA28DE2C,true)
call recoveryHP(atkU,atkU,((GetUnitState(atkU,UNIT_STATE_MAX_LIFE)-GetUnitState(atkU,UNIT_STATE_LIFE))*0.08),"","")
call EFsettingU(atk,"war3mapImported\\@EF_7901.mdl",1,atkU,"origin")
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,atk)
call TimerStart(t,12,false,function U060)
set t=null
endif
if typ2==1 or typ2==5 then
if LoadBoolean(Hash_Stat,atk,$97477F7C)and LoadBoolean(udg_Hash,GetHandleId(atkU),$B9D8D8AA)==true then
call Kerberos(trgU,atk)
endif
endif
if typ2==2 or typ2==5 then
if LoadBoolean(Hash_Stat,atk,$B3E72325)and UnitHasBuff(trgU,'Bcri')then
call EXSetEventDamage(GetEventDamage()*1.2)
endif
endif
if typ2==3 or typ2==5 then
if LoadBoolean(Hash_Stat,atk,$7F82C721)then
call GaruraT(trgU,atk)
endif
endif
if typ2==4 or typ2==5 then
if LoadBoolean(Hash_Stat,atk,$E9E2B5AE)and not LoadBoolean(Hash_Stat,atk,$CC310875)then
call SaveBoolean(Hash_Stat,atk,$CC310875,true)
call itemCoolTime(GetItemOfTypeFromUnit(atkU,'I629'),8)
call Romaro(atkU,trgU,atk)
endif
endif
if LoadBoolean(udg_Hash,trg,$7DB6D651)and s__Distance_PBP(GetUnitX(trgU),GetUnitY(trgU),GetUnitX(atkU),GetUnitY(atkU))<=3500 then
call BuffCall(trgU,'BI08',0,false,false)
call SaveBoolean(udg_Hash,trg,$7DB6D651,false)
call EXSetEventDamage(0)
if LoadBoolean(System,trg,$2143868)then
call StatChangeX(trg,40,"이속",1.5,"R0651")
call StatChangeX(trg,30,"피감",1.5,"R0652")
call BuffCall(trgU,'AT24',1.5,false,false)
call Damage(trgU,atkU,GetHeroAgi(trgU,true)*40,4,0,false,1,'item')
else
call Damage(trgU,atkU,GetHeroAgi(trgU,true)*20,4,0,false,1,'item')
endif
call UnitRemoveAbility(trgU,'A01A')
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagTextBJ(bj_lastCreatedTextTag,"Counter!!",8)
call SetTextTagPosUnit(bj_lastCreatedTextTag,trgU,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,45,45,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag,64,90)
call SetTextTagFadepoint(bj_lastCreatedTextTag,3)
call ND(Player(trg-1),0.2,25)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_YuzukiCounter.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,127,trgU)
call EFsettingXY(trg,"war3mapImported\\@EF_AZ_KingLeoric(SDWZ)_E.mdl",0,GetUnitX(atkU),GetUnitY(atkU),2.5,GetRandomReal(0,360),1,0,0,0)
call EFsettingXY(trg,"war3mapImported\\@EF_AZ_PA_B2.mdl",0,GetUnitX(atkU),GetUnitY(atkU),2.5,GetRandomReal(0,360),1,0,0,0)
call EFsettingXY(trg,"war3mapImported\\@EF_by_wood_effect_yuanbanlin_sand2.mdl",0,GetUnitX(trgU),GetUnitY(trgU),0.5,GetRandomReal(0,360),1,0,0,0)
endif
if LoadBoolean(udg_Hash,trg,$8E12174C)and s__Distance_PBP(GetUnitX(trgU),GetUnitY(trgU),GetUnitX(atkU),GetUnitY(atkU))<=3500 then
call BuffCall(trgU,'AT25',0,false,false)
call SaveBoolean(udg_Hash,trg,$8E12174C,false)
call EXSetEventDamage(0)
call StatChangeX(trg,40,"이속",1.5,"R0651")
call StatChangeX(trg,30,"피감",1.5,"R0652")
call BuffCall(trgU,'AT24',1.5,false,false)
if CharcterStat[atk]==true then
set tempR=(GetHeroAgi(Charcter[trg],true)*20)
else
set tempR=(GetHeroInt(Charcter[trg],true)*20)
endif
call Damage(trgU,atkU,tempR,4,0,false,1,'R065')
call UnitRemoveAbility(trgU,'A01A')
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagTextBJ(bj_lastCreatedTextTag,"Counter!!",8)
call SetTextTagPosUnit(bj_lastCreatedTextTag,trgU,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,45,45,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.2)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag,64,90)
call SetTextTagFadepoint(bj_lastCreatedTextTag,3)
call ND(Player(trg-1),0.2,25)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikki_Dcount.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,127,trgU)
call EFsettingXY(trg,"war3mapImported\\@EF_AZ_KingLeoric(SDWZ)_E.mdl",0,GetUnitX(atkU),GetUnitY(atkU),2.5,GetRandomReal(0,360),1,0,0,0)
call EFsettingXY(trg,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(atkU),GetUnitY(atkU),1,0,1,0,0,0)
endif
if Bossunable and trgU==Boss then
call EXSetEventDamage(GetEventDamage()*1.2)
endif
if LoadBoolean(System,trg,$B9553A1F)and GetEventDamage()<=GetUnitState(trgU,UNIT_STATE_MAX_LIFE)*0.1 and GetRandomint(1,100)<=8 then
call EXSetEventDamage(0)
call EFsettingXY(trg,"Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",0,GetUnitX(trgU),GetUnitY(trgU),1.5,270,1,0,0,0)
endif
if(GetUnitAbilityLevel(trgU,'A01E')==1 or GetUnitAbilityLevel(trgU,'A01F')==1)and GetEventDamage()<=GetUnitState(trgU,UNIT_STATE_MAX_LIFE)*0.6 and s__Distance_PBP(GetUnitX(trgU),GetUnitY(trgU),GetUnitX(atkU),GetUnitY(atkU))<=3500 then
call EXSetEventDamage(0)
call TimerStart(U045timer2,25,false,null)
if GetUnitAbilityLevel(trgU,'A01E')==1 then
call UnitRemoveAbility(trgU,'A01E')
elseif GetUnitAbilityLevel(trgU,'A01F')==1 then
call UnitRemoveAbility(trgU,'A01F')
call HolyArcaD(trgU)
endif
endif
if LoadBoolean(System,trg,$953C43EA)then
call R034dmg(trgU)
call SaveBoolean(System,trg,$953C43EA,false)
call TimerStart(R034timer[trg],8,false,null)
endif
if LoadBoolean(Hash_Stat,trg,$215416C9)then
call EXSetEventDamage(GetEventDamage()-(GetEventDamage()*0.04))
endif
if GetUnitTypeId(atkU)=='HR17' and not IsUnitType(trgU,ConvertUnitType(0))then
call EXSetEventDamage(GetEventDamage()+(GetEventDamage()*0.2))
endif
if GetUnitTypeId(trgU)=='HR17' and GetEventDamage()<=(GetUnitState(trgU,UNIT_STATE_MAX_LIFE)*3)and s__Distance_PBP(GetUnitX(trgU),GetUnitY(trgU),GetUnitX(atkU),GetUnitY(atkU))<=3500 then
if LoadBoolean(udg_Hash,GetHandleId(trgU),$DC0032E2)then
call EFsettingXY(trg,"war3mapImported\\@EF_SlashCRITLOW.mdl",0,GetUnitX(atkU),GetUnitY(atkU),2,270,1,0,0,0)
call EFsettingXY(trg,"war3mapImported\\@EF_Freezingring.mdl",0,GetUnitX(atkU),GetUnitY(atkU),2,270,1,0,0,0)
call EFsettingXY(trg,"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",0,GetUnitX(atkU),GetUnitY(atkU),2,270,1,0,0,0)
call SaveBoolean(udg_Hash,GetHandleId(trgU),$DC0032E2,false)
set tempR=s__Angle_PBP(GetUnitX(trgU),GetUnitY(trgU),GetUnitX(atkU),GetUnitY(atkU))
set tempR2=GetUnitX(atkU)+(((150)*1.0)*Cos(((tempR)*1.0)*bj_DEGTORAD))
set tempR3=GetUnitY(atkU)+(((150)*1.0)*Sin(((tempR)*1.0)*bj_DEGTORAD))
call BuffCall(trgU,'B025',0,false,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_ikki_Dcount.mp3"),(null),(127),((1.00)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,80,trgU)
set tempR=(GetHeroAgi(trgU,true)+GetUnitState(trgU,ConvertUnitState(0x14)))*8
if LoadBoolean(System,trg,$2143868)then
call Damage(trgU,atkU,tempR*2,1,0,false,1,'H170')
call StatChangeX(trg,40,"이속",1.5,"R0651")
call StatChangeX(trg,30,"피감",1.5,"R0652")
call BuffCall(trgU,'AT24',1.5,false,false)
else
call Damage(trgU,atkU,tempR,1,0,false,1,'H170')
endif
call UnitRemoveAbility(trgU,'A01A')
if LoadBoolean(udg_Hash,trg,$53D6EE36)then
call EXSetAbilityState(EXGetUnitAbility(trgU,'H170'),ABILITY_STATE_COOLDOWN,1.2)
endif
call ND(Player(trg-1),0.1,25)
call EXSetEventDamage(0)
call SetUnitX(trgU,tempR2)
call SetUnitY(trgU,tempR3)
endif
endif
if GetUnitTypeId(trgU)=='HR18' and GetUnitAbilityLevel(trgU,'H180')>=1 then
if EXGetAbilityState(EXGetUnitAbility(trgU,'H180'),ABILITY_STATE_COOLDOWN)<=0 then
call EXSetAbilityState(EXGetUnitAbility(trgU,'H180'),ABILITY_STATE_COOLDOWN,2*ct[trg])
call KanekiD(trgU)
endif
endif
if LoadBoolean(System,trg,$4C5AB3C1)and(GetUnitState(trgU,ConvertUnitState(2))*0.2)>=(GetEventDamage()*0.2)then
set tempR2=GetEventDamage()*0.12
if GetUnitState(trgU,ConvertUnitState(2))>=(tempR2*0.2)then
call EXSetEventDamage(GetEventDamage()-tempR2)
call SetUnitState(trgU,ConvertUnitState(2),GetUnitState(trgU,ConvertUnitState(2))-(tempR2*0.12))
set angle=s__Angle_PBP(GetUnitX(trgU),GetUnitY(trgU),GetUnitX(atkU),GetUnitY(atkU))
set tempR4=GetUnitX(trgU)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempR5=GetUnitY(trgU)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(trg,"war3mapImported\\@EF_DefendCaster_Blue.mdl",0,tempR4,tempR5,3,angle,1,0,0,0)
endif
endif
if LoadBoolean(Hash_Stat,trg,$BE623654)and(GetUnitState(trgU,ConvertUnitState(2))*0.2)>=(GetEventDamage()*0.2)then
set tempR2=GetEventDamage()*0.15
if GetUnitState(trgU,ConvertUnitState(2))>=(tempR2*0.2)then
call EXSetEventDamage(GetEventDamage()-tempR2)
call SetUnitState(trgU,ConvertUnitState(2),GetUnitState(trgU,ConvertUnitState(2))-(tempR2*0.15))
set angle=s__Angle_PBP(GetUnitX(trgU),GetUnitY(trgU),GetUnitX(atkU),GetUnitY(atkU))
set tempR4=GetUnitX(trgU)+(((150)*1.0)*Cos(((angle)*1.0)*bj_DEGTORAD))
set tempR5=GetUnitY(trgU)+(((150)*1.0)*Sin(((angle)*1.0)*bj_DEGTORAD))
call EFsettingXY(trg,"war3mapImported\\@EF_DefendCaster_Blue.mdl",0,tempR4,tempR5,3,angle,1,0,0,0)
endif
endif
if GetUnitTypeId(trgU)=='HR12' then
call MeilingF(trgU,GetEventDamage())
endif
if GetUnitAbilityLevel(trgU,'A00M')==1 then
call EXSetEventDamage(GetEventDamage()+(GetEventDamage()*0.5))
endif
if GetUnitTypeId(trgU)=='HR04' and LoadBoolean(udg_Hash,trg,$4D96C329)and GetEventDamage()<=(GetUnitState(trgU,UNIT_STATE_MAX_LIFE)*3)then
call EXSetEventDamage(0)
endif
if GetUnitTypeId(trgU)=='EN52' and LoadBoolean(udg_Hash,GetHandleId(trgU),$5CE873F2)then
set tempR=LoadReal(udg_Hash,GetHandleId(trgU),$91803829)+GetEventDamage()
call SaveReal(udg_Hash,GetHandleId(trgU),$91803829,tempR)
call EXSetEventDamage(0)
endif
if atkU==Charcter[atk]and GetEventDamage()>=1 then
set l__str=I2S(R2I(GetEventDamage()))
set tempI=JNStringLength(l__str)
if ConvertDamageType(EXGetEventDamageData(4))==ConvertDamageType(4)then
set Bcheck=false
elseif ConvertDamageType(EXGetEventDamageData(4))==ConvertDamageType(14)then
set Bcheck=true
endif
set tempR=(tempI*-35)
if CriticalCheck[atk]then
set CriticalCheck[atk]=false
set tempR2=GetUnitX(trgU)-((tempI*-40)*Cos(180*bj_DEGTORAD))
set tempR3=GetUnitY(trgU)-((tempI*-40)*Sin(180*bj_DEGTORAD))
if not Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$7D9D4D5C),tempR2,tempR3)
elseif Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$BEDDEBCD),tempR2,tempR3)
endif
call EXSetEffectSize(ef,fontSize[atk])
call DestroyEffect(ef)
endif
set loopA=0
loop
exitwhen loopA>=tempI
set loopA=loopA+1
set str2=SubString(l__str,loopA-1,loopA)
set tempR2=GetUnitX(trgU)-((tempR+(fontPlus[atk]*loopA))*Cos(180*bj_DEGTORAD))
set tempR3=GetUnitY(trgU)-((tempR+(fontPlus[atk]*loopA))*Sin(180*bj_DEGTORAD))
if str2=="0" then
if not Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$2C69309C),tempR2,tempR3)
elseif Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$26352B4),tempR2,tempR3)
endif
call EXSetEffectSize(ef,fontSize[atk])
call DestroyEffect(ef)
endif
if str2=="1" then
if not Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$93C85373),tempR2,tempR3)
elseif Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$8B0682AF),tempR2,tempR3)
endif
call EXSetEffectSize(ef,fontSize[atk])
call DestroyEffect(ef)
endif
if str2=="2" then
if not Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$7A7EF6A5),tempR2,tempR3)
elseif Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$19ABC757),tempR2,tempR3)
endif
call EXSetEffectSize(ef,fontSize[atk])
call DestroyEffect(ef)
endif
if str2=="3" then
if not Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$FB048DC1),tempR2,tempR3)
elseif Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$8339B35E),tempR2,tempR3)
endif
call EXSetEffectSize(ef,fontSize[atk])
call DestroyEffect(ef)
endif
if str2=="4" then
if not Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$476D2208),tempR2,tempR3)
elseif Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$68D25CFA),tempR2,tempR3)
endif
call EXSetEffectSize(ef,fontSize[atk])
call DestroyEffect(ef)
endif
if str2=="5" then
if not Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$E0D07590),tempR2,tempR3)
elseif Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$2D0B2257),tempR2,tempR3)
endif
call EXSetEffectSize(ef,fontSize[atk])
call DestroyEffect(ef)
endif
if str2=="6" then
if not Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$6CB8443A),tempR2,tempR3)
elseif Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$A3FC889C),tempR2,tempR3)
endif
call EXSetEffectSize(ef,fontSize[atk])
call DestroyEffect(ef)
endif
if str2=="7" then
if not Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$F2BEC8C9),tempR2,tempR3)
elseif Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$91B5B24),tempR2,tempR3)
endif
call EXSetEffectSize(ef,fontSize[atk])
call DestroyEffect(ef)
endif
if str2=="8" then
if not Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$13CCAFD),tempR2,tempR3)
elseif Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$1235F210),tempR2,tempR3)
endif
call EXSetEffectSize(ef,fontSize[atk])
call DestroyEffect(ef)
endif
if str2=="9" then
if not Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$4A88E55F),tempR2,tempR3)
elseif Bcheck then
set ef=AddSpecialEffect(LoadStr(udg_Hash,atk,$DBB44304),tempR2,tempR3)
endif
call EXSetEffectSize(ef,fontSize[atk])
call DestroyEffect(ef)
endif
endloop
endif
if IsUnitType(trgU,UNIT_TYPE_HERO)==true then
set tempR2=0.1
else
set tempR2=0.01
endif
if LoadBoolean(System,atk,$AA808F7B)then
if CharcterStat[atk]then
set tempR=LoadReal(Hash_Stat,atk,$240C8F13)+GetEventDamage()*BloodAbsolAD[atk]*tempR2*HealEF[atk]
call SaveReal(Hash_Stat,atk,$240C8F13,tempR)
else
set tempR=LoadReal(Hash_Stat,atk,$240C8F13)+GetEventDamage()*BloodAbsolAP[atk]*tempR2*HealEF[atk]
call SaveReal(Hash_Stat,atk,$240C8F13,tempR)
endif
if tempR>=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*5 and not LoadBoolean(System,atk,$11106FD1)then
call SaveBoolean(System,atk,$11106FD1,true)
call StatUP(atk,0.08,"피증")
call SetPlayerName(Player(8),"|cffFFB914??? |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFF0000힘이 돌아오고있구나.")
endif
if tempR>=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*10 and not LoadBoolean(System,atk,$C0ABCED8)then
call SaveBoolean(System,atk,$C0ABCED8,true)
call StatUP(atk,10,"이속")
endif
if tempR>=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*25 and not LoadBoolean(System,atk,$B5CA862)then
call SaveBoolean(System,atk,$B5CA862,true)
call StatUP(atk,0.05,"물리흡")
call StatUP(atk,0.05,"마법흡")
call SetPlayerName(Player(8),"|cffFFB914??? |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFF0000짐의 이야기가 곧 네 이야기가 되리라.")
endif
if tempR>=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*40 and not LoadBoolean(System,atk,$5720426)then
call SaveBoolean(System,atk,$5720426,true)
call StatUP(atk,0.15,"치피")
endif
if tempR>=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*80 and not LoadBoolean(System,atk,$48E53D88)then
call SaveBoolean(System,atk,$48E53D88,true)
set tempI=1
loop
exitwhen LoadInteger(UniqueArt,atk,tempI)==0
set tempI=tempI+1
endloop
call SaveInteger(UniqueArt,atk,tempI,'US13')
call SetPlayerName(Player(8),"|cffFFB914??? |r")
call EXDisplayChat(Player(8),CHAT_RECIPIENT_ALLIES,"|cffFF0000어서와라. 밤의 세계에....")
call RemoveSavedBoolean(System,atk,$AA808F7B)
call RemoveSavedBoolean(System,atk,$11106FD1)
call RemoveSavedBoolean(System,atk,$C0ABCED8)
call RemoveSavedBoolean(System,atk,$B5CA862)
call RemoveSavedBoolean(System,atk,$5720426)
call RemoveSavedBoolean(System,atk,$48E53D88)
call RemoveSavedReal(Hash_Stat,atk,$240C8F13)
endif
endif
if CharcterStat[atk]and BloodAbsolAD[atk]>=0.01 then
if GetUnitTypeId(Charcter[atk])=='HR18' then
set tempR3=(1+(((GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)-(GetUnitState(Charcter[atk],UNIT_STATE_LIFE)))/GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE))))
call recoveryHP(Charcter[atk],Charcter[atk],((GetEventDamage()*BloodAbsolAD[atk])*tempR2)*tempR3,"","origin")
else
call recoveryHP(Charcter[atk],Charcter[atk],(GetEventDamage()*BloodAbsolAD[atk])*tempR2,"","origin")
endif
if LoadBoolean(Hash_Stat,atk,$B8531136)and LoadBoolean(Hash_Stat,atk,$21EE870)==false then
set tempR=LoadReal(Hash_Stat,atk,$21C5A944)+GetEventDamage()*BloodAbsolAD[atk]*tempR2*HealEF[atk]
call SaveReal(Hash_Stat,atk,$21C5A944,tempR)
if tempR>=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*0.08 then
set tempR=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*0.16
call AluzardPower(atk,Charcter[atk],tempR+GetHeroAgi(Charcter[atk],true)*4)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_iluzarDamage.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,trgU)
endif
endif
if LoadBoolean(System,atk,$79954775)and BloodAbsolAD[atk]>=0.1 then
set tempR=LoadReal(Hash_Stat,atk,$DDEC23C5)+GetEventDamage()*BloodAbsolAD[atk]*tempR2*HealEF[atk]
call SaveReal(Hash_Stat,atk,$DDEC23C5,tempR)
if tempR>=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*0.08 then
call BuffCall(atkU,'AT26',5,false,false)
call StatChangeX(atk,0.15,"피증",5,"R066")
call SaveReal(Hash_Stat,atk,$DDEC23C5,0)
call EFsettingXY(atk,"war3mapImported\\@EF_t3_effect_azeffect3.mdl",0,GetUnitX(Charcter[atk]),GetUnitY(Charcter[atk]),1,270,1,0,0,0)
endif
endif
if LoadBoolean(System,atk,$E6F56F2B)and not LoadBoolean(System,atk,$3D68529D)and BloodAbsolAD[atk]>=0.1 then
set tempR=LoadReal(Hash_Stat,atk,$268544BA)+GetEventDamage()*BloodAbsolAD[atk]*tempR2*HealEF[atk]
call SaveReal(Hash_Stat,atk,$268544BA,tempR)
if tempR>=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*0.08 then
call SaveReal(Hash_Stat,atk,$268544BA,0)
call ShildSet(Charcter[atk],Charcter[atk],3,GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*0.05)
call EFsettingXY(atk,"war3mapImported\\@EF_VFX_yae_ribbon_thun_Red2.mdl",0,GetUnitX(Charcter[atk]),GetUnitY(Charcter[atk]),1,270,1,0,0,0)
call SaveBoolean(System,atk,$3D68529D,true)
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,atk)
call TimerStart(t,1.5,false,function SinobuC)
set t=null
endif
endif
if LoadBoolean(System,atk,$868CD39)then
set tempR=LoadReal(Hash_Stat,atk,$32B88F16)+GetEventDamage()*BloodAbsolAD[atk]*tempR2*HealEF[atk]
call SaveReal(Hash_Stat,atk,$32B88F16,tempR)
if tempR>=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*0.08 then
set tempI=LoadInteger(Hash_Stat,atk,$CC65F201)+1
if tempI>=38 then
call SaveInteger(Hash_Stat,atk,$CC65F201,0)
call StatUP(atk,0.01,"치피")
else
call SaveInteger(Hash_Stat,atk,$CC65F201,tempI)
endif
call SaveReal(Hash_Stat,atk,$32B88F16,0)
call BuffCall(atkU,'AT30',5,false,false)
call StatChangeX(atk,BloodAbsolAD[atk]*0.5,"물치피",5,"KISSSHOT")
call EFsettingXY(atk,"war3mapImported\\@EF_VFX_yae_ribbon_thun_Red2.mdl",0,GetUnitX(Charcter[atk]),GetUnitY(Charcter[atk]),1,270,1,0,0,0)
endif
endif
elseif not CharcterStat[atk]and BloodAbsolAP[atk]>=0.01 then
call recoveryHP(Charcter[atk],Charcter[atk],(GetEventDamage()*BloodAbsolAP[atk])*tempR2,"","origin")
if LoadBoolean(Hash_Stat,atk,$B8531136)and LoadBoolean(Hash_Stat,atk,$21EE870)==false then
set tempR=LoadReal(Hash_Stat,atk,$21C5A944)+GetEventDamage()*BloodAbsolAP[atk]*tempR2*HealEF[atk]
call SaveReal(Hash_Stat,atk,$21C5A944,tempR)
if tempR>=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*0.08 then
set tempR=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*0.16
call AluzardPower(atk,Charcter[atk],tempR+GetHeroAgi(Charcter[atk],true)*2)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_iluzarDamage.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,trgU)
endif
endif
if LoadBoolean(System,atk,$79954775)and BloodAbsolAP[atk]>=0.1 then
set tempR=LoadReal(Hash_Stat,atk,$DDEC23C5)+GetEventDamage()*BloodAbsolAP[atk]*tempR2*HealEF[atk]
call SaveReal(Hash_Stat,atk,$DDEC23C5,tempR)
if tempR>=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*0.08 then
call BuffCall(atkU,'AT26',5,false,false)
call StatChangeX(atk,0.15,"피증",5,"R066")
call SaveReal(Hash_Stat,atk,$DDEC23C5,0)
call EFsettingXY(atk,"war3mapImported\\@EF_t3_effect_azeffect3.mdl",0,GetUnitX(Charcter[atk]),GetUnitY(Charcter[atk]),1,270,1,0,0,0)
endif
endif
if LoadBoolean(System,atk,$E6F56F2B)and not LoadBoolean(System,atk,$3D68529D)and BloodAbsolAP[atk]>=0.1 then
set tempR=LoadReal(Hash_Stat,atk,$268544BA)+GetEventDamage()*BloodAbsolAP[atk]*tempR2*HealEF[atk]
call SaveReal(Hash_Stat,atk,$268544BA,tempR)
if tempR>=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*0.08 then
call SaveReal(Hash_Stat,atk,$268544BA,0)
call ShildSet(Charcter[atk],Charcter[atk],3,GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*0.05)
call EFsettingXY(atk,"war3mapImported\\@EF_VFX_yae_ribbon_thun_Red2.mdl",0,GetUnitX(Charcter[atk]),GetUnitY(Charcter[atk]),1,270,1,0,0,0)
call SaveBoolean(System,atk,$3D68529D,true)
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,atk)
call TimerStart(t,1.5,false,function SinobuC)
set t=null
endif
endif
if LoadBoolean(System,atk,$868CD39)then
set tempR=LoadReal(Hash_Stat,atk,$32B88F16)+GetEventDamage()*BloodAbsolAP[atk]*tempR2*HealEF[atk]
call SaveReal(Hash_Stat,atk,$32B88F16,tempR)
if tempR>=GetUnitState(Charcter[atk],UNIT_STATE_MAX_LIFE)*0.08 then
set tempI=LoadInteger(Hash_Stat,atk,$CC65F201)+1
if tempI>=38 then
call SaveInteger(Hash_Stat,atk,$CC65F201,0)
call StatUP(atk,0.01,"치피")
else
call SaveInteger(Hash_Stat,atk,$CC65F201,tempI)
endif
call SaveReal(Hash_Stat,atk,$32B88F16,0)
call BuffCall(atkU,'AT30',5,false,false)
call StatChangeX(atk,BloodAbsolAP[atk]*0.5,"물치피",5,"KISSSHOT")
call EFsettingXY(atk,"war3mapImported\\@EF_VFX_yae_ribbon_thun_Red2.mdl",0,GetUnitX(Charcter[atk]),GetUnitY(Charcter[atk]),1,270,1,0,0,0)
endif
endif
endif
if GetUnitTypeId(trgU)=='HR18' and LoadBoolean(udg_Hash,GetHandleId(trgU),$68069668)and GetEventDamage()<=(GetUnitState(trgU,UNIT_STATE_MAX_LIFE)*3)then
call EXSetEventDamage(0)
endif
if LoadBoolean(udg_Hash,GetHandleId(trgU),$DD7D2BAE)and GetEventDamage()<=(GetUnitState(trgU,UNIT_STATE_MAX_LIFE)*3)then
call EXSetEventDamage(0)
endif
if LoadBoolean(Hash_Stat,trg,$4AED8E9E)==true and GetEventDamage()!=0 and GetUnitTypeId(trgU)=='HR18' then
set tempR=LoadReal(Hash_Stat,trg,$B180EDBA)
call SaveReal(Hash_Stat,trg,$B180EDBA,tempR+GetEventDamage())
set tempI=R2I((LoadReal(Hash_Stat,trg,$B180EDBA)/GetUnitState(trgU,UNIT_STATE_MAX_LIFE))*100)*4
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagTextBJ(bj_lastCreatedTextTag,"|cffff0000"+I2S(tempI)+"%",10+(tempI/12))
call SetTextTagPosUnit(bj_lastCreatedTextTag,trgU,0)
call SetTextTagColor(bj_lastCreatedTextTag,255,255,255,255)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,0.8)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag,20,GetRandomInt(45,75))
call SetTextTagFadepointBJ(bj_lastCreatedTextTag,0.5)
endif
set tempR=LoadReal(udg_Hashtable,GetHandleId(trgU),$DC6A3962)
set tempR2=LoadReal(udg_Hashtable,GetHandleId(trgU),$525D985A)
if tempR>0 then
if GetEventDamage()>=tempR then
call SaveReal(udg_Hashtable,GetHandleId(trgU),$DC6A3962,0)
call SaveReal(udg_Hashtable,GetHandleId(trgU),$525D985A,0)
if LoadBoolean(udg_Hash,trg,$402AEB67)then
set loopA=0
loop
exitwhen loopA>31
if LoadInteger(Hash,trg-1,$DA437F80+loopA)=='N011' then
if GetLocalPlayer()==Player(trg-1)then
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotA",loopA),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzFrameSetTexture(DzFrameFindByName("InVe_SlotB",loopA),"UI\\Widgets\\Console\\Human\\human-inventory-slotfiller.blp",0)
call DzSyncData("RCT",I2S(loopA))
endif
endif
set loopA=loopA+1
endloop
call SaveBoolean(udg_Hash,trg,$402AEB67,false)
endif
else
call SaveReal(udg_Hashtable,GetHandleId(trgU),$DC6A3962,tempR-GetEventDamage())
call SaveReal(udg_Hashtable,GetHandleId(trgU),$525D985A,tempR2+GetEventDamage())
endif
call EXSetEventDamage(GetEventDamage()-tempR)
if GetEventDamage()<=0 then
call EXSetEventDamage(0)
endif
endif
if LoadBoolean(System,GetHandleId(trgU),$779F983F)then
call EXSetEventDamage(0)
endif
if GetEventDamage()>=GetUnitState(trgU,UNIT_STATE_LIFE)and GetEventDamage()<=(GetUnitState(trgU,UNIT_STATE_MAX_LIFE)*3)then
if Ichigointeger[4]==trg and not IchigoSET[trg]and Ichigointeger[3]==4 then
call Inv(trgU,16.5)
call InS(trgU,16.5)
call ichigoHoro(trg)
if ProduceLV<3 then
set ProduceLV=3
call StopSoundBJ(LastEFVoice,false)
call StopSoundBJ(LastBGM,false)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@ES_R007.mp3"),(null),(100),((1.00)*1.0),false,0,0)
call StartSound(udg_SND)
set LastEFVoice=udg_SND
set LastBGM=udg_SND
endif
call SetUnitState(trgU,UNIT_STATE_LIFE,1)
call SetUnitAnimation(trgU,"death")
call EXSetEventDamage(0)
endif
if LoadBoolean(System,trg,$A222B918)and not LoadBoolean(System,trg,$94F6D6FE)and GetEventDamage()>0 then
call SaveBoolean(System,trg,$94F6D6FE,true)
call Inv(trgU,3)
call SetUnitState(trgU,UNIT_STATE_LIFE,GetUnitState(trgU,UNIT_STATE_MAX_LIFE))
call EXSetEventDamage(0)
call BuffCall(trgU,'AT33',30,false,false)
call EFsettingXY(trg,"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",0,GetUnitX(trgU),GetUnitY(trgU),2,270,1,0,0,0)
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,trg)
call TimerStart(t,60,false,function US15t)
set t=null
endif
if LoadBoolean(udg_Hash,trg,$C67FEEB4)and GetEventDamage()>0 then
call SaveBoolean(udg_Hash,trg,$C67FEEB4,false)
call SetUnitState(trgU,UNIT_STATE_LIFE,GetUnitState(trgU,UNIT_STATE_MAX_LIFE)*0.4)
call EXSetEventDamage(0)
call BuffCall(trgU,'AT29',90,false,false)
call StatChangeX(trg,0.07,"피증",90,"toma")
call EFsettingXY(trg,"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",0,GetUnitX(trgU),GetUnitY(trgU),2,270,1,0,0,0)
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,trg)
call TimerStart(t,90,false,function R077t)
set t=null
endif
if LoadBoolean(System,trg,$AFFD60C8)and GetEventDamage()>0 then
call SaveBoolean(System,trg,$AFFD60C8,false)
call Inv(trgU,2)
call SetUnitState(trgU,UNIT_STATE_LIFE,1)
call EXSetEventDamage(0)
call BuffCall(trgU,'AT23',60,false,false)
call EFsettingXY(trg,"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",0,GetUnitX(trgU),GetUnitY(trgU),2,270,1,0,0,0)
set t=CreateTimer()
call SaveInteger(udg_Hash,GetHandleId(t),0,trg)
call TimerStart(t,60,false,function R069t)
set t=null
endif
if GetUnitTypeId(trgU)=='HR04' and GetEventDamage()>0 and LoadInteger(udg_Hashtable,trg,$D3AD4DC3)>=5 and LoadBoolean(udg_Hash,trg,$AA0F518A)then
call EXSetEventDamage(0)
call EFsettingXY(trg,"war3mapImported\\@EF_t3_effect_azeffect3.mdl",0,GetUnitX(trgU),GetUnitY(trgU),10,270,1,0,0,0)
call EFsettingXY(trg,"war3mapImported\\@EF_t7_red-texiao-shandian.mdl",0,GetUnitX(trgU),GetUnitY(trgU),5,270,1,0,0,0)
call EFsettingXY(trg,"war3mapImported\\@EF_1098.mdl",0,GetUnitX(trgU),GetUnitY(trgU),5,270,1,0,0,0)
call EFsettingU(trg,"war3mapImported\\@EF_AZ_Slark_D1.mdl",6,trgU,"origin")
call SaveBoolean(udg_Hash,trg,$AA0F518A,false)
call SaveBoolean(udg_Hash,trg,$4D96C329,true)
if not LoadBoolean(udg_Hash,trg,$27DA0754)then
call SetPlayerAlliance(Player(trg-1),Player(trg-1),ALLIANCE_SHARED_CONTROL,false)
endif
call SetUnitState(trgU,UNIT_STATE_LIFE,1)
call TimerStart(GutsFuse,0.03,false,null)
call SaveInteger(udg_Hash,GetHandleId(GutsFuse),1,0)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Cs_Guts_D.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,trgU)
call BuffCall(trgU,'B007',6,false,false)
endif
if LoadBoolean(Hash_Stat,trg,$799EDCD1)and not LoadBoolean(Hash_Stat,trg,$12AD886D)and GetEventDamage()!=0 then
call EXSetEventDamage(0)
call SaveBoolean(Hash_Stat,trg,$12AD886D,true)
call SetUnitState(trgU,UNIT_STATE_LIFE,GetUnitState(trgU,UNIT_STATE_MAX_LIFE)*1.0)
call recovery(trgU,trgU,GetUnitState(trgU,UNIT_STATE_MAX_LIFE)*0.2,5,1,"","origin")
call BuffCall(trgU,'BI14',5,false,false)
call EFsettingU(trg,"war3mapImported\\@EF_7901.mdl",5,trgU,"origin")
call itemCoolTime(GetItemOfTypeFromUnit(Charcter[trg],'I608'),120)
call Assets_UseSoundByPath__MakeSound(("war3mapImported\\@Is_Seres.mp3"),(null),(127),((1)*1.0),TRUE,((4000)*1.0),((3000)*1.0))
call PlaySoundOnUnit(udg_SND,100,trgU)
call Seres(trg)
endif
elseif GetEventDamage()<GetUnitState(trgU,UNIT_STATE_LIFE)then
if dmg>=GetUnitState(trgU,UNIT_STATE_MAX_LIFE)*0.2 and LoadBoolean(System,trg,$3D7856A0)then
call SaveBoolean(System,trg,$3D7856A0,false)
call SaveInteger(System,GetHandleId(U037timer[trg]),$34704AE4,trg)
call SaveInteger(System,GetHandleId(U037timer[trg]),$EFF06CA0,1)
call SaveUnitHandle(System,GetHandleId(U037timer[trg]),$457FA8BE,trgU)
call TimerStart(U037timer[trg],0.0,false,null)
endif
endif
if GetUnitTypeId(trgU)=='DM01' then
if LoadInteger(System,atk,$98ED74C7)==0 then
call SaveInteger(System,atk,$98ED74C7,1)
set SandbackkDPS[atk]=CreateTimer()
call TimerStart(SandbackkDPS[atk],15,false,function DPStimer)
set DPS[atk]=0
call DisplayTimedTextToPlayer(Player(atk-1),0,0,15,"|cff4169e1[시스템] - |cffffa500DPS 측정 시작")
endif
set DPS[atk]=DPS[atk]+GetEventDamage()
endif
if trgU==Boss then
set tempR=LoadReal(udg_Hash,atk,$190C4819)+GetEventDamage()
call SaveReal(udg_Hash,atk,$190C4819,tempR)
endif
if GetUnitTypeId(trgU)=='h000' and not LoadBoolean(udg_Hash,0,$F40D3927)then
call SaveBoolean(udg_Hash,0,$F40D3927,true)
call savehome()
call PingMinimapForForceEx(bj_FORCE_ALL_PLAYERS,GetUnitX(trgU),GetUnitY(trgU),3,bj_MINIMAPPINGSTYLE_ATTACK,100,0,0)
set loopA=0
loop
exitwhen loopA>=Playint
set loopA=loopA+1
call DisplayTimedTextToPlayer(Player(PP[loopA]-1),0,0,5,"|cffff0000기지가 공격받고있다!!!!!!!!! 현재 기지 남은 체력 : "+I2S(R2I(GetUnitState(trgU,UNIT_STATE_LIFE)/GetUnitState(trgU,UNIT_STATE_MAX_LIFE)*100.0))+"%")
endloop
endif
endif
set trgU=null
set atkU=null
set c=null
set t=null
set ef=null
set pl=null
endfunction
function InitTrig_Any_Unit_Damage takes nothing returns nothing
call TriggerAddCondition(DamageEngineDefensive__EAH,Condition((function Trig_Any_Unit_Damage_Actions)))
endfunction
function Trig_BattleEND_Actions takes nothing returns nothing
local integer a=1
local integer tempI1
local integer tempI2
loop
exitwhen GetExpiredTimer()==udg_BattleEND[a]
set a=a+1
endloop
call DisplayTimedTextToPlayer(Player(a-1),0,0,5,"[시스템] - 전투종료")
set Battle[a]=false
set tempI1=LoadInteger(Hash_Stat,a,$13973259)
if tempI1>=1 then
set tempI2=LoadInteger(Hash_Stat,a,$6ACE3FD7)
call SaveInteger(Hash_Stat,a,$6ACE3FD7,tempI2-tempI1)
call SaveInteger(Hash_Stat,a,$13973259,0)
if LoadBoolean(udg_Hash,a,$27DA0754)then
set tempI1=LoadInteger(Hash_Stat,a,$E9334651)
set tempI1=LoadInteger(Hash_Stat,a,$85EC709A)-tempI1
call SaveInteger(Hash_Stat,a,$85EC709A,tempI1)
call SaveInteger(Hash_Stat,a,$E9334651,0)
endif
call TimerStart(udg_PstatTimer[a],0,false,null)
endif
endfunction
function InitTrig_BattleEND takes nothing returns nothing
set gg_trg_BattleEND=CreateTrigger()
call TriggerAddAction(gg_trg_BattleEND,function Trig_BattleEND_Actions)
endfunction
function BossCleanTimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer time=LoadInteger(udg_Hash,GetHandleId(t),$6B54C545)
local integer fulltime=LoadInteger(udg_Hash,GetHandleId(t),$25BECA1)
local real Bossclean=LoadReal(udg_Hash,$F61C5FD6,0)
local boolean BosscleanSETUP=LoadBoolean(udg_Hash,$F61C5FD6,1)
local real tempR
call SaveInteger(udg_Hash,GetHandleId(t),$6B54C545,time-1)
set tempR=(time/fulltime)*10
call SetUnitState(Boss,UNIT_STATE_MANA,tempR)
if time<=0 or not UnitAlive(Boss)then
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
call SaveReal(udg_Hash,$F61C5FD6,0,0)
call SetUnitState(Boss,UNIT_STATE_MANA,0)
call SaveBoolean(udg_Hash,$F61C5FD6,1,false)
endif
call TimerStart(t,1,false,function BossCleanTimer)
set t=null
endfunction
function Trig_BossStun_Actions takes nothing returns nothing
local timer t
local unit u=(CustomStun__M_UTAR[CustomStun__P_STUN])
local real Bossclean=LoadReal(udg_Hash,$F61C5FD6,0)
local boolean BosscleanSETUP=LoadBoolean(udg_Hash,$F61C5FD6,1)
if u==Boss and Bossclean<10 and not BosscleanSETUP then
set Bossstun=true
call SaveReal(udg_Hash,$F61C5FD6,0,Bossclean+0.03125)
call SetUnitState(u,UNIT_STATE_MANA,Bossclean)
elseif u==Boss and Bossclean>=10 and not BosscleanSETUP then
set Bossstun=false
call s__CustomStun_Clear(u)
set bj_lastCreatedEffect=AddSpecialEffect("war3mapImported\\@EF_AZ_Akasha(2)_B2.mdl",GetUnitX(u),GetUnitY(u))
call EXSetEffectSize(bj_lastCreatedEffect,4)
call EDestroy(bj_lastCreatedEffect,0.01)
call SaveReal(udg_Hash,$F61C5FD6,0,10)
call SaveBoolean(udg_Hash,$F61C5FD6,1,true)
set t=CreateTimer()
call TimerStart(t,1,false,function BossCleanTimer)
call SaveInteger(udg_Hash,GetHandleId(t),$6B54C545,30+(difficulty*7))
call SaveInteger(udg_Hash,GetHandleId(t),$25BECA1,30+(difficulty*7))
endif
set t=null
set u=null
endfunction
function lineattack takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
call IssuePointOrder(u,"attack",GetRectCenterX(gg_rct_AttackZone),GetRectCenterY(gg_rct_AttackZone))
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set u=null
set t=null
endfunction
function Reattack takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(udg_Hash,GetHandleId(t),0)
call IssuePointOrder(u,"attack",GetUnitX(u),GetUnitY(u))
call FlushChildHashtable(udg_Hash,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set u=null
set t=null
endfunction
function Trig_BossStun2_Actions takes nothing returns nothing
local timer t
local unit u=(CustomStun__M_UTAR[CustomStun__P_STUN])
if u==Boss then
set Bossstun=false
endif
if GetUnitTypeId(u)=='wv00' and GetUnitUserData(u)!=91 and GetUnitUserData(u)!=90 then
set t=CreateTimer()
call TimerStart(t,0.25,false,function lineattack)
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,u)
elseif not IsUnitType(u,UNIT_TYPE_HERO)or GetUnitTypeId(u)=='EN49' or GetUnitTypeId(u)=='EN46' or GetUnitTypeId(u)=='EN48' or GetUnitTypeId(u)=='EN47' then
set t=CreateTimer()
call TimerStart(t,0.25,false,function Reattack)
call SaveUnitHandle(udg_Hash,GetHandleId(t),0,u)
endif
set u=null
set t=null
endfunction
function InitTrig_BossStun takes nothing returns nothing
local trigger trg=CreateTrigger()
call TriggerAddCondition(CustomStun__E_STUN_TIMEOUT,Condition((function Trig_BossStun_Actions)))
call TriggerAddAction(trg,function Trig_BossStun_Actions)
set trg=CreateTrigger()
call TriggerAddCondition(CustomStun__E_STUN_END,Condition((function Trig_BossStun2_Actions)))
call TriggerAddAction(trg,function Trig_BossStun2_Actions)
endfunction
function Sk2illUP_RefreshSkillDes2 takes integer pid,integer Spid,integer f returns nothing
local integer f3=DzFrameFindByName("Sk2_DesBack",0)
local integer temp
local integer i
local unit u=Charcter[pid+1]
call DzFrameShow(f3,true)
call DzFrameSetPoint(f3,JN_FRAMEPOINT_BOTTOM,f,JN_FRAMEPOINT_TOP,0,0)
call DzFrameSetText(DzFrameFindByName("Sk2_DesClass",0)," ")
call DzFrameSetText(DzFrameFindByName("Sk2_DesName",0),EXGetAbilityString(Spid,2,ABILITY_DATA_TIP))
if Spid==999 then
call DzFrameSetText(DzFrameFindByName("Sk2_DesName",0),"|cff48d1cc마카롱 섭취")
call DzFrameSetTexture(DzFrameFindByName("Sk2_DesIcon",0),"ReplaceableTextures\\CommandButtons\\BTNC_KazusaF.blp",0)
call DzFrameSetText(DzFrameFindByName("Sk2_DesOpt",0),"민첩을 40 , 공격속도를 10% 상승시킵니다.")
else
if Spid==ChSkillQ[pid+1]then
call DzFrameSetText(DzFrameFindByName("Sk2_DesOpt",0),"|cff00ff00스킬 강화|cffffa500 : 쿨타임이 6초 감소하고 공격력 x 0.075의 계수가 추가된다.")
elseif Spid==ChSkillW[pid+1]then
call DzFrameSetText(DzFrameFindByName("Sk2_DesOpt",0),"|cff00ff00스킬 강화|cffffa500 : 회복량이 30% 상승하고 사용후 전력질주의 쿨타임을 초기화시킨다.")
elseif Spid==ChSkillE[pid+1]then
call DzFrameSetText(DzFrameFindByName("Sk2_DesOpt",0),"|cff00ff00스킬 강화|cffffa500 : 탄환당 (공격력 x 0.5)의 피해가 상승하고 전력질주 효과를 보유중일경우 피해량이 그만큼 상승한다.")
elseif Spid==ChSkillR[pid+1]then
call DzFrameSetText(DzFrameFindByName("Sk2_DesOpt",0),"|cff00ff00스킬 강화|cffffa500 : 탄환이 스킬이 아닌 기본 공격 판정을 가지며 (공격력 x 10)의 피해가 상승하고 400%를 초과한 공격속도에 추가피해가 발생한다.")
elseif Spid==ChSkillD[pid+1]then
call DzFrameSetText(DzFrameFindByName("Sk2_DesOpt",0),"|cff00ff00스킬 강화|cffffa500 : 지속시간이 30초가 되고 3회당 추가피해 공격력 계수가 3이 된다.")
else
call DzFrameSetText(DzFrameFindByName("Sk2_DesOpt",0),"이미 강화 완료되었다.")
endif
call DzFrameSetTexture(DzFrameFindByName("Sk2_DesIcon",0),EXGetAbilityString(Spid,1,ABILITY_DATA_ART),0)
endif
call DzFrameSetSize(f3,0.18,0.15)
set u=null
endfunction
function Sk2illUP___SkillTextIn takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerUIEventPlayer())
local integer f=DzGetTriggerUIEventFrame()
local integer fid=LoadInteger(udg_Hash,f,$FA4531C3)
local unit u=Charcter[pid+1]
if fid==1 and not LoadBoolean(udg_Hashtable,GetHandleId(u),$94C2158E)then
set fid=ChSkillQ[pid+1]
elseif fid==1 and LoadBoolean(udg_Hashtable,GetHandleId(u),$94C2158E)then
set fid='A01L'
endif
if fid==2 and not LoadBoolean(udg_Hashtable,GetHandleId(u),$FB2863CE)then
set fid=ChSkillW[pid+1]
elseif fid==2 and LoadBoolean(udg_Hashtable,GetHandleId(u),$FB2863CE)then
set fid='A01L'
endif
if fid==3 and not LoadBoolean(udg_Hashtable,GetHandleId(u),$BDB2E45A)then
set fid=ChSkillE[pid+1]
elseif fid==3 and LoadBoolean(udg_Hashtable,GetHandleId(u),$BDB2E45A)then
set fid='A01L'
endif
if fid==4 and not LoadBoolean(udg_Hashtable,GetHandleId(u),$D98232EE)then
set fid=ChSkillR[pid+1]
elseif fid==4 and LoadBoolean(udg_Hashtable,GetHandleId(u),$D98232EE)then
set fid='A01L'
endif
if fid==5 and not LoadBoolean(udg_Hashtable,GetHandleId(u),$CF16D639)then
set fid=ChSkillD[pid+1]
elseif fid==5 and LoadBoolean(udg_Hashtable,GetHandleId(u),$CF16D639)then
set fid='A01L'
endif
if fid==6 then
set fid=999
endif
call Sk2illUP_RefreshSkillDes2(pid,fid,f)
set u=null
endfunction
function Sk2illUP___SkillTextOut takes nothing returns nothing
call DzFrameShow(DzFrameFindByName("Sk2_DesBack",0),false)
endfunction
function Sk2illUP___SkillClick takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerUIEventPlayer())
local integer f=DzGetTriggerUIEventFrame()
local integer fid=LoadInteger(udg_Hash,f,$FA4531C3)
local unit u=Charcter[pid+1]
local integer SkillPoint=LoadInteger(udg_Hash,GetHandleId(u),$D3B20A2B)
local boolean a=false
local boolean b
local integer f2=20
local integer Lv
local integer LvUP
local real mana
if fid==1 and LoadBoolean(udg_Hashtable,GetHandleId(u),$94C2158E)then
set a=true
endif
if fid==2 and LoadBoolean(udg_Hashtable,GetHandleId(u),$FB2863CE)then
set a=true
endif
if fid==3 and LoadBoolean(udg_Hashtable,GetHandleId(u),$BDB2E45A)then
set a=true
endif
if fid==4 and LoadBoolean(udg_Hashtable,GetHandleId(u),$D98232EE)then
set a=true
endif
if fid==5 and LoadBoolean(udg_Hashtable,GetHandleId(u),$CF16D639)then
set a=true
endif
if fid==6 then
set f2=LoadInteger(udg_Hash,GetHandleId(u),$1EAE4B11)
endif
if SkillPoint>=f2 and not LoadBoolean(udg_Hash,pid+1,$9CB2F91A)and not a then
if fid==1 then
call DzSyncData("Kool","Qupgrade/true")
call DzFrameShow(DzFrameFindByName("Sk2_SkillIconChain",1),true)
call DzFrameShow(DzFrameFindByName("Sk2_SkillIconBlack",1),true)
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cff90ee90전력 질주를 강화했다.")
endif
if fid==2 then
call DzSyncData("Kool","Wupgrade/true")
call DzFrameShow(DzFrameFindByName("Sk2_SkillIconChain",2),true)
call DzFrameShow(DzFrameFindByName("Sk2_SkillIconBlack",2),true)
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cff90ee90슈가 타임을 강화했다.")
endif
if fid==3 then
call DzSyncData("Kool","Eupgrade/true")
call DzFrameShow(DzFrameFindByName("Sk2_SkillIconChain",3),true)
call DzFrameShow(DzFrameFindByName("Sk2_SkillIconBlack",3),true)
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cff90ee90연속 사격을 강화했다.")
endif
if fid==4 then
call DzSyncData("Kool","Rupgrade/true")
call DzFrameShow(DzFrameFindByName("Sk2_SkillIconChain",4),true)
call DzFrameShow(DzFrameFindByName("Sk2_SkillIconBlack",4),true)
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cff90ee90달콤한 포화를 강화했다.")
endif
if fid==5 then
call DzSyncData("Kool","Dupgrade/true")
call DzFrameShow(DzFrameFindByName("Sk2_SkillIconChain",5),true)
call DzFrameShow(DzFrameFindByName("Sk2_SkillIconBlack",5),true)
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cff90ee90마비노기온을 강화했다.")
endif
if fid==6 then
call DzFrameSetText(DzFrameFindByName("Sk2_DesOpt",0),"민첩을 40 , 공격속도를 10% 상승시킵니다.")
call DzSyncData("Kool","Aupgrade/true")
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cff90ee90스텟이 상승했다.")
endif
set SkillPoint=SkillPoint-f2
if SkillPoint<=0 then
set Sk2illUP_Visility=false
call DzFrameShow(DzFrameFindByName("Sk2_Back",0),false)
endif
call DzSyncData("KNG",I2S(SkillPoint))
call SaveBoolean(udg_Hash,pid+1,$9CB2F91A,true)
call DzSyncData("Bool","SKUPok/true")
else
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cffffa500조건에 맞지않거나 연타로 인해 무효처리됬습니다.")
if fid==6 then
call DisplayTimedTextToPlayer(Player(pid),0,0,5,"|cffffa500마카롱 섭취에 필요한 마카롱양 : "+I2S(f2))
endif
endif
set u=null
endfunction
function Sk2illUP___ESC takes nothing returns nothing
if Sk2illUP_Visility then
set Sk2illUP_Visility=false
call DzFrameShow(DzFrameFindByName("Sk2_Back",0),false)
endif
endfunction
function Sk2illUP___MiniButtonEnter takes nothing returns nothing
local integer f=DzFrameFindByName("Sk2_MiniIconNameBack",0)
local integer f2=DzGetTriggerUIEventFrame()
local integer pid=GetPlayerId(DzGetTriggerUIEventPlayer())
local unit u=Charcter[pid+1]
local integer Sp=LoadInteger(udg_Hash,GetHandleId(u),$D3B20A2B)
call DzFrameShow(f,true)
call DzFrameSetPoint(f,JN_FRAMEPOINT_BOTTOM,f2,JN_FRAMEPOINT_TOP,0,0.001)
call DzFrameSetText(DzFrameFindByName("Sk2_MiniIconNameText",0),"|CFFFFCC00현재 마카롱 티켓 : "+I2S(Sp))
endfunction
function Sk2illUP___MiniButtonLeave takes nothing returns nothing
call DzFrameShow(DzFrameFindByName("Sk2_MiniIconNameBack",0),false)
endfunction
function Sk2illUP___MiniButtonClick takes nothing returns nothing
local integer pid=GetPlayerId(DzGetTriggerUIEventPlayer())
if Sk2illUP_Visility==false then
set Sk2illUP_Visility=true
call DzFrameShow(DzFrameFindByName("Sk2_Back",0),true)
call DzFrameShow(DzFrameFindByName("Sk_Back",0),false)
else
set Sk2illUP_Visility=false
call DzFrameShow(DzFrameFindByName("Sk2_Back",0),false)
endif
endfunction
function Sk2illUP___DelayedInit takes nothing returns nothing
local integer UI=DzGetGameUI()
local integer Main
local integer f
local integer f2
local integer loopA
local integer temp
local real offset=0.045
set Main=DzCreateFrame("Sk2_Button",UI,0)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.195,0.079)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_ENTER,function Sk2illUP___MiniButtonEnter,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_MOUSE_LEAVE,function Sk2illUP___MiniButtonLeave,false)
call DzFrameSetScriptByCode(Main,JN_FRAMEEVENT_CONTROL_CLICK,function Sk2illUP___MiniButtonClick,false)
call DzFrameShow(Main,false)
call DzCreateFrame("Sk2_MiniIconNameBack",Main,0)
call DzFrameShow(Main,false)
set Main=DzCreateFrameByTagName("SPRITE","SkillLvUP2",UI,"",0)
call DzFrameSetPoint(Main,JN_FRAMEPOINT_BOTTOMLEFT,DzFrameFindByName("Sk2_Button",0),JN_FRAMEPOINT_CENTER,0,0)
call DzFrameSetModel(Main,"war3mapImported\\@SY_KazusaMakarong.mdx",0,0)
call DzFrameShow(Main,false)
set Main=DzCreateFrame("Sk2_Back",UI,0)
call DzFrameSetAbsolutePoint(Main,JN_FRAMEPOINT_CENTER,0.325,0.159)
call DzFrameShow(Main,false)
set loopA=1
loop
exitwhen loopA>6
set temp=loopA
set f=DzCreateFrame("Sk2_Slot",Main,temp)
call DzFrameSetPoint(f,JN_FRAMEPOINT_TOPLEFT,Main,JN_FRAMEPOINT_TOPLEFT,-0.031+loopA*offset,-0.01)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_MOUSE_ENTER,function Sk2illUP___SkillTextIn,false)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_MOUSE_LEAVE,function Sk2illUP___SkillTextOut,false)
call DzFrameSetScriptByCode(f,JN_FRAMEEVENT_CONTROL_CLICK,function Sk2illUP___SkillClick,false)
call SaveInteger(udg_Hash,f,$FA4531C3,temp)
set f2=DzCreateFrame("Sk2_SkillIcon",Main,temp)
call DzFrameSetPoint(f2,JN_FRAMEPOINT_CENTER,f,JN_FRAMEPOINT_CENTER,0,0)
call DzFrameSetTexture(f2,"",0)
set f2=DzCreateFrame("Sk2_SkillIconChain",Main,temp)
call DzFrameSetPoint(f2,JN_FRAMEPOINT_CENTER,f,JN_FRAMEPOINT_CENTER,0,0)
call DzFrameShow(f2,false)
set f2=DzCreateFrame("Sk2_SkillIconBlack",Main,temp)
call DzFrameSetPoint(f2,JN_FRAMEPOINT_CENTER,f,JN_FRAMEPOINT_CENTER,0,0)
call DzFrameShow(f2,false)
set loopA=loopA+1
endloop
call DzCreateFrame("Sk2_DesBack",UI,0)
endfunction
function Sk2illUP___OnInit takes nothing returns nothing
local trigger trg
local integer i
set trg=CreateTrigger()
set i=0
loop
exitwhen i>6
call TriggerRegisterPlayerEvent(trg,Player(i),EVENT_PLAYER_END_CINEMATIC)
set i=i+1
endloop
call TriggerAddAction(trg,function Sk2illUP___ESC)
call TimerStart(CreateTimer(),0.09,false,function Sk2illUP___DelayedInit)
set trg=null
endfunction
function InitCustomTriggers takes nothing returns nothing
call InitTrig_IchigoSkill()
call InitTrig_ArisLight()
call InitTrig_GachaUnit()
call InitTrig_Artefactget()
call InitTrig_Philosopher_stone()
call InitTrig_Bending()
call InitTrig_Taro()
call InitTrig_Player_Out()
call InitTrig_Set()
call InitTrig_ArtSet()
call InitTrig_Difficulty_set()
call InitTrig_Round_Start()
call InitTrig_wave_unit_setting1()
call InitTrig_wave_unit_setting2()
call InitTrig_wave_unit_setting3()
call InitTrig_wave_unit_setting4()
call InitTrig_INFO_OFF()
call InitTrig_Seeya()
call InitTrig_test_mothin()
call InitTrig_test4()
call InitTrig_test()
call InitTrig_Select()
call InitTrig_Attack_Mosun()
call InitTrig_HP_bar_add()
call InitTrig_timer_set()
call InitTrig_cost()
call InitTrig_Lv_up()
call InitTrig_sec1()
call InitTrig_Morning()
call InitTrig_Night()
call InitTrig_leader_timer()
call InitTrig_dron_move()
call InitTrig_N001()
call InitTrig_N035counter()
call InitTrig_N035barrior()
call InitTrig_N035heal()
call InitTrig_N031()
call InitTrig_N031stat()
call InitTrig_N031P()
call InitTrig_C005()
call InitTrig_C032()
call InitTrig_U020trg()
call InitTrig_R029()
call InitTrig_R034()
call InitTrig_U037()
call InitTrig_R031()
call InitTrig_U040()
call InitTrig_U044()
call InitTrig_U045()
call InitTrig_U047()
call InitTrig_U061()
call InitTrig_U068()
call InitTrig_U074()
call InitTrig_RedMist()
call InitTrig_info_Rejoin()
call InitTrig_Pstat()
call InitTrig_Hero_Death()
call InitTrig_Revilve_Hero()
call InitTrig_Monster_Death()
call InitTrig_Town_Destroy()
call InitTrig_CreepRegion()
call InitTrig_Room_Skill()
call InitTrig_Main_Skill()
call InitTrig_Item_Lost()
call InitTrig_water_Quest()
call InitTrig_water_Quest2()
call InitTrig_item_Quest()
call InitTrig_traning_Quest()
call InitTrig_Frig()
call InitTrig_Mono()
call InitTrig_Latika()
call InitTrig_HackterTrig()
call InitTrig_Skill_Cool_and_Arti_Skill()
call InitTrig_Aqua_EXO()
call InitTrig_HolyWater()
call TriggerAddCondition(DamageEngineDefensive__EAH,Condition((function Trig_Any_Unit_Damage_Actions)))
call InitTrig_BattleEND()
call InitTrig_BossStun()
endfunction
function InitCustomPlayerSlots takes nothing returns nothing
call SetPlayerStartLocation(Player(0),0)
call ForcePlayerStartLocation(Player(0),0)
call SetPlayerColor(Player(0),ConvertPlayerColor(0))
call SetPlayerRacePreference(Player(0),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(0),false)
call SetPlayerController(Player(0),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(1),1)
call ForcePlayerStartLocation(Player(1),1)
call SetPlayerColor(Player(1),ConvertPlayerColor(1))
call SetPlayerRacePreference(Player(1),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(1),false)
call SetPlayerController(Player(1),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(2),2)
call ForcePlayerStartLocation(Player(2),2)
call SetPlayerColor(Player(2),ConvertPlayerColor(2))
call SetPlayerRacePreference(Player(2),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(2),false)
call SetPlayerController(Player(2),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(3),3)
call ForcePlayerStartLocation(Player(3),3)
call SetPlayerColor(Player(3),ConvertPlayerColor(3))
call SetPlayerRacePreference(Player(3),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(3),false)
call SetPlayerController(Player(3),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(4),4)
call ForcePlayerStartLocation(Player(4),4)
call SetPlayerColor(Player(4),ConvertPlayerColor(4))
call SetPlayerRacePreference(Player(4),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(4),false)
call SetPlayerController(Player(4),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(9),5)
call ForcePlayerStartLocation(Player(9),5)
call SetPlayerColor(Player(9),ConvertPlayerColor(9))
call SetPlayerRacePreference(Player(9),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(9),false)
call SetPlayerController(Player(9),MAP_CONTROL_COMPUTER)
call SetPlayerStartLocation(Player(10),6)
call ForcePlayerStartLocation(Player(10),6)
call SetPlayerColor(Player(10),ConvertPlayerColor(10))
call SetPlayerRacePreference(Player(10),RACE_PREF_UNDEAD)
call SetPlayerRaceSelectable(Player(10),false)
call SetPlayerController(Player(10),MAP_CONTROL_COMPUTER)
call SetPlayerStartLocation(Player(11),7)
call ForcePlayerStartLocation(Player(11),7)
call SetPlayerColor(Player(11),ConvertPlayerColor(11))
call SetPlayerRacePreference(Player(11),RACE_PREF_UNDEAD)
call SetPlayerRaceSelectable(Player(11),false)
call SetPlayerController(Player(11),MAP_CONTROL_COMPUTER)
endfunction
function InitCustomTeams takes nothing returns nothing
call SetPlayerTeam(Player(0),0)
call SetPlayerState(Player(0),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(1),0)
call SetPlayerState(Player(1),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(2),0)
call SetPlayerState(Player(2),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(3),0)
call SetPlayerState(Player(3),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(4),0)
call SetPlayerState(Player(4),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(9),0)
call SetPlayerState(Player(9),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(9),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(9),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(9),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(9),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(9),true)
call SetPlayerAllianceStateAllyBJ(Player(9),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(9),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(9),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(9),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(9),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(9),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(9),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(9),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(9),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(9),true)
call SetPlayerAllianceStateVisionBJ(Player(9),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(9),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(9),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(9),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(9),Player(4),true)
call SetPlayerTeam(Player(10),1)
call SetPlayerTeam(Player(11),1)
call SetPlayerAllianceStateAllyBJ(Player(10),Player(11),true)
call SetPlayerAllianceStateAllyBJ(Player(11),Player(10),true)
call SetPlayerAllianceStateVisionBJ(Player(10),Player(11),true)
call SetPlayerAllianceStateVisionBJ(Player(11),Player(10),true)
endfunction
function InitAllyPriorities takes nothing returns nothing
call SetStartLocPrioCount(0,4)
call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(1,4)
call SetStartLocPrio(1,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(2,4)
call SetStartLocPrio(2,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(3,4)
call SetStartLocPrio(3,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(4,4)
call SetStartLocPrio(4,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,3,3,MAP_LOC_PRIO_HIGH)
endfunction
function main takes nothing returns nothing
call SetCameraBounds(-29952.0+GetCameraMargin(CAMERA_MARGIN_LEFT),-30208.0+GetCameraMargin(CAMERA_MARGIN_BOTTOM),29952.0-GetCameraMargin(CAMERA_MARGIN_RIGHT),29696.0-GetCameraMargin(CAMERA_MARGIN_TOP),-29952.0+GetCameraMargin(CAMERA_MARGIN_LEFT),29696.0-GetCameraMargin(CAMERA_MARGIN_TOP),29952.0-GetCameraMargin(CAMERA_MARGIN_RIGHT),-30208.0+GetCameraMargin(CAMERA_MARGIN_BOTTOM))
call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl","Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
call NewSoundEnvironment("Default")
call SetAmbientDaySound("VillageDay")
call SetAmbientNightSound("VillageNight")
call SetMapMusic("Music",true,0)
call CreateRegions()
call CreateCameras()
call CreateAllItems()
call CreateAllUnits()
call InitBlizzard()
call ExecuteFunc("jasshelper__initstructs215750")
call ExecuteFunc("BossBar__OnInit")
call ExecuteFunc("CustomStun__OnMapLoad")
call ExecuteFunc("DamageEngineDefensive__OnMapLoad")
call ExecuteFunc("LinkFrame__Init")
call ExecuteFunc("TimerUtils__init")
call ExecuteFunc("JNStashNet__onInit")
call ExecuteFunc("MemoryLibBase___Init")
call ExecuteFunc("EndGameHook___Init")
call MaxCameraRange__Init()
call Infomation__OnInit()
call Init___OnInit()
call Inventory___OnInit()
call itemthrow___OnInit()
call Setting___OnInit()
call SkillUP___OnInit()
call MouseInCommon___OnInit()
call unitselect___OnInit()
call Teleport__OnInit()
call Sk2illUP___OnInit()
call InitGlobals()
call InitCustomTriggers()
endfunction
function config takes nothing returns nothing
call SetMapName("Project : Defence Test.49")
call SetMapDescription("기지를 막고 보스들을 잡으세요")
call SetPlayers(8)
call SetTeams(8)
call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
call DefineStartLocation(0,-1536.0,-3136.0)
call DefineStartLocation(1,-1536.0,-3136.0)
call DefineStartLocation(2,-1536.0,-3136.0)
call DefineStartLocation(3,-1536.0,-3136.0)
call DefineStartLocation(4,-1536.0,-3136.0)
call DefineStartLocation(5,-1536.0,-3136.0)
call DefineStartLocation(6,-1536.0,-3136.0)
call DefineStartLocation(7,-1536.0,-3136.0)
call InitCustomPlayerSlots()
call InitCustomTeams()
call InitAllyPriorities()
endfunction
function sa__FXCURVEDASH__get_Elapsed takes nothing returns boolean
local integer this=f__arg_this
set f__result_real=s__FXCURVEDASH_CFXelapsed[this]
return true
endfunction
function sa__FXCURVEDASH_Stop takes nothing returns boolean
local integer this=f__arg_this
if not s__FXCURVEDASH_CFXexists[this]then
return true
endif
set s__FXCURVEDASH_CFXexists[this]=false
set s__FXCURVEDASH_Caster[(this)]=null
call TimerStart(s__FXCURVEDASH_CFXtimer[this],CFX_GCTIMEOUT,false,function s__FXCURVEDASH_CFXAtDestroy)
return true
endfunction
function sa__TrigVariables_ExecuteTrigger takes nothing returns boolean
local integer this=f__arg_this
local integer PreGlobalTV=GlobalTV
set s__TrigVariables_ThroughTimer=true
set GlobalTV=this
set Wait=GlobalTV
set s__TrigVariables_Destructable[this]=true
call TriggerExecute(s__TrigVariables_CurrentTrigger[this])
set s__TrigVariables_ThroughTimer=false
if s__TrigVariables_Destructable[this]then
call s__TrigVariables_Flush(this)
endif
set GlobalTV=PreGlobalTV
set Wait=GlobalTV
call TimerStart(s__TrigVariables_TimerForExecuteTrigger,0,false,function s__TrigVariables_ExecuteTriggerResetGlobalTV)
return true
endfunction
function sa__TrigVariables_onDestroy takes nothing returns boolean
local integer this=f__arg_this
set s__TrigVariables_CurrentTrigger[this]=null
set s__TrigVariables_EventId[this]=null
set s__TrigVariables_UserData[this]=0
set s__TrigVariables_Destructable[this]=false
call sc__TrigVariables_setVoid(this)
return true
endfunction
function sa__TrigVariables_DeleteAllTriggers takes nothing returns boolean
local integer this=f__arg_this
call s__TimerPutsTriggerToSleep__TrigInfo_DeleteAll(s__TrigVariables_last[this])
set s__TrigVariables_last[this]=0
return true
endfunction
function sa__TrigVariables_setVoid takes nothing returns boolean
local integer this=f__arg_this
set s__TrigVariables_thisForVoid=this
call TriggerEvaluate(s__TrigVariables_trigForVoid)
return true
endfunction
function sa__TrigVariables_LVforCreate takes nothing returns boolean
local integer this=f__arg_this
set s__TrigVariables_player[this]=this
set s__TrigVariables_force[this]=this
set s__TrigVariables_group[this]=this
set s__TrigVariables_item[this]=this
set s__TrigVariables_effect[this]=this
set s__TrigVariables_timer[this]=this
set s__TrigVariables_unit[this]=this
set s__TrigVariables_location[this]=this
set s__TrigVariables_lightning[this]=this
set s__TrigVariables_integer[this]=this
set s__TrigVariables_real[this]=this
set s__TrigVariables_boolean[this]=this
return true
endfunction
function sa__TrigVariables_Setplayer takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
local player x=f__arg_player1
call s__TrigVariables_LinkedVariables_player__StateSetUsedplayer(this,i)
call RemoveSavedHandle(s__TrigVariables_Hashplayer,0,this*s__TrigVariables_arraySize+i)
call SavePlayerHandle(s__TrigVariables_Hashplayer,0,this*s__TrigVariables_arraySize+i,x)
return true
endfunction
function sa__TrigVariables_Getplayer takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
set f__result_player=LoadPlayerHandle(s__TrigVariables_Hashplayer,0,this*s__TrigVariables_arraySize+i)
return true
endfunction
function sa__TrigVariables_Setforce takes nothing returns boolean
call s__TrigVariables_Setforce(f__arg_this,f__arg_integer1,f__arg_force1)
return true
endfunction
function sa__TrigVariables_Getforce takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
set f__result_force=LoadForceHandle(s__TrigVariables_Hashforce,0,this*s__TrigVariables_arraySize+i)
return true
endfunction
function sa__TrigVariables_Setgroup takes nothing returns boolean
call s__TrigVariables_Setgroup(f__arg_this,f__arg_integer1,f__arg_group1)
return true
endfunction
function sa__TrigVariables_Getgroup takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
set f__result_group=LoadGroupHandle(s__TrigVariables_Hashgroup,0,this*s__TrigVariables_arraySize+i)
return true
endfunction
function sa__TrigVariables_Setitem takes nothing returns boolean
call s__TrigVariables_Setitem(f__arg_this,f__arg_integer1,f__arg_item1)
return true
endfunction
function sa__TrigVariables_Getitem takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
set f__result_item=LoadItemHandle(s__TrigVariables_Hashitem,0,this*s__TrigVariables_arraySize+i)
return true
endfunction
function sa__TrigVariables_Seteffect takes nothing returns boolean
call s__TrigVariables_Seteffect(f__arg_this,f__arg_integer1,f__arg_effect1)
return true
endfunction
function sa__TrigVariables_Geteffect takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
set f__result_effect=LoadEffectHandle(s__TrigVariables_Hasheffect,0,this*s__TrigVariables_arraySize+i)
return true
endfunction
function sa__TrigVariables_Settimer takes nothing returns boolean
call s__TrigVariables_Settimer(f__arg_this,f__arg_integer1,f__arg_timer1)
return true
endfunction
function sa__TrigVariables_Gettimer takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
set f__result_timer=LoadTimerHandle(s__TrigVariables_Hashtimer,0,this*s__TrigVariables_arraySize+i)
return true
endfunction
function sa__TrigVariables_Setunit takes nothing returns boolean
call s__TrigVariables_Setunit(f__arg_this,f__arg_integer1,f__arg_unit1)
return true
endfunction
function sa__TrigVariables_Getunit takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
set f__result_unit=LoadUnitHandle(s__TrigVariables_Hashunit,0,this*s__TrigVariables_arraySize+i)
return true
endfunction
function sa__TrigVariables_Setlocation takes nothing returns boolean
call s__TrigVariables_Setlocation(f__arg_this,f__arg_integer1,f__arg_location1)
return true
endfunction
function sa__TrigVariables_Getlocation takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
set f__result_location=LoadLocationHandle(s__TrigVariables_Hashlocation,0,this*s__TrigVariables_arraySize+i)
return true
endfunction
function sa__TrigVariables_Setlightning takes nothing returns boolean
call s__TrigVariables_Setlightning(f__arg_this,f__arg_integer1,f__arg_lightning1)
return true
endfunction
function sa__TrigVariables_Getlightning takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
set f__result_lightning=LoadLightningHandle(s__TrigVariables_Hashlightning,0,this*s__TrigVariables_arraySize+i)
return true
endfunction
function sa__TrigVariables_Setinteger takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
local integer x=f__arg_integer2
call s__TrigVariables_LinkedVariables_integer__StateSetUsedinteger(this,i)
call RemoveSavedInteger(s__TrigVariables_Hashinteger,0,this*s__TrigVariables_arraySize+i)
call SaveInteger(s__TrigVariables_Hashinteger,0,this*s__TrigVariables_arraySize+i,x)
return true
endfunction
function sa__TrigVariables_Getinteger takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
set f__result_integer=LoadInteger(s__TrigVariables_Hashinteger,0,this*s__TrigVariables_arraySize+i)
return true
endfunction
function sa__TrigVariables_Setreal takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
local real x=f__arg_real1
call s__TrigVariables_LinkedVariables_real__StateSetUsedreal(this,i)
call RemoveSavedReal(s__TrigVariables_Hashreal,0,this*s__TrigVariables_arraySize+i)
call SaveReal(s__TrigVariables_Hashreal,0,this*s__TrigVariables_arraySize+i,x)
return true
endfunction
function sa__TrigVariables_Getreal takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
set f__result_real=LoadReal(s__TrigVariables_Hashreal,0,this*s__TrigVariables_arraySize+i)
return true
endfunction
function sa__TrigVariables_Setboolean takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
local boolean x=f__arg_boolean1
call s__TrigVariables_LinkedVariables_boolean__StateSetUsedboolean(this,i)
call RemoveSavedBoolean(s__TrigVariables_Hashboolean,0,this*s__TrigVariables_arraySize+i)
call SaveBoolean(s__TrigVariables_Hashboolean,0,this*s__TrigVariables_arraySize+i,x)
return true
endfunction
function sa__TrigVariables_Getboolean takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
set f__result_boolean=LoadBoolean(s__TrigVariables_Hashboolean,0,this*s__TrigVariables_arraySize+i)
return true
endfunction
function sa__TrigVariables_Settexttag takes nothing returns boolean
call s__TrigVariables_Settexttag(f__arg_this,f__arg_integer1,f__arg_texttag1)
return true
endfunction
function sa__TrigVariables_Gettexttag takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
set f__result_texttag=LoadTextTagHandle(s__TrigVariables_Hashtexttag,0,this*s__TrigVariables_arraySize+i)
return true
endfunction
function sa__TrigVariables_Setstring takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
local string x=f__arg_string1
call s__TrigVariables_LinkedVariables_string__StateSetUsedstring(this,i)
call RemoveSavedString(s__TrigVariables_Hashstring,0,this*s__TrigVariables_arraySize+i)
call SaveStr(s__TrigVariables_Hashstring,0,this*s__TrigVariables_arraySize+i,x)
return true
endfunction
function sa__TrigVariables_Getstring takes nothing returns boolean
local integer this=f__arg_this
local integer i=f__arg_integer1
set f__result_string=LoadStr(s__TrigVariables_Hashstring,0,this*s__TrigVariables_arraySize+i)
return true
endfunction
function sa__TrigVariables_FlushAvars takes nothing returns boolean
local integer this=f__arg_this
local integer i=0
if not s__TrigVariables_INUSE_Avar[this]then
return true
endif
loop
if s__TPTTSLinkedVariablesArray__alocationsA[s__TrigVariables_locationsA[this]+i]!=null then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsA[s__TrigVariables_locationsA[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsA[s__TrigVariables_locationsA[this]+i]=null
endif
if s__TPTTSLinkedVariablesArray__alocationsB[s__TrigVariables_locationsB[this]+i]!=null then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsB[s__TrigVariables_locationsB[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsB[s__TrigVariables_locationsB[this]+i]=null
endif
if s__TPTTSLinkedVariablesArray__alocationsC[s__TrigVariables_locationsC[this]+i]!=null then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsC[s__TrigVariables_locationsC[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsC[s__TrigVariables_locationsC[this]+i]=null
endif
if s__TPTTSLinkedVariablesArray__alocationsD[s__TrigVariables_locationsD[this]+i]!=null then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsD[s__TrigVariables_locationsD[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsD[s__TrigVariables_locationsD[this]+i]=null
endif
if s__TPTTSLinkedVariablesArray__alocationsE[s__TrigVariables_locationsE[this]+i]!=null then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsE[s__TrigVariables_locationsE[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsE[s__TrigVariables_locationsE[this]+i]=null
endif
if s__TPTTSLinkedVariablesArray__alocationsF[s__TrigVariables_locationsF[this]+i]!=null then
call RemoveLocation(s__TPTTSLinkedVariablesArray__alocationsF[s__TrigVariables_locationsF[this]+i])
set s__TPTTSLinkedVariablesArray__alocationsF[s__TrigVariables_locationsF[this]+i]=null
endif
set s__TPTTSLinkedVariablesArray__abooleansA[s__TrigVariables_booleansA[this]+i]=false
set s__TPTTSLinkedVariablesArray__abooleansB[s__TrigVariables_booleansB[this]+i]=false
set s__TPTTSLinkedVariablesArray__abooleansC[s__TrigVariables_booleansC[this]+i]=false
set s__TPTTSLinkedVariablesArray__abooleansD[s__TrigVariables_booleansD[this]+i]=false
set s__TPTTSLinkedVariablesArray__abooleansE[s__TrigVariables_booleansE[this]+i]=false
set s__TPTTSLinkedVariablesArray__abooleansF[s__TrigVariables_booleansF[this]+i]=false
set s__TPTTSLinkedVariablesArray__aintegersA[s__TrigVariables_integersA[this]+i]=0
set s__TPTTSLinkedVariablesArray__aintegersB[s__TrigVariables_integersB[this]+i]=0
set s__TPTTSLinkedVariablesArray__aintegersC[s__TrigVariables_integersC[this]+i]=0
set s__TPTTSLinkedVariablesArray__aintegersD[s__TrigVariables_integersD[this]+i]=0
set s__TPTTSLinkedVariablesArray__aintegersE[s__TrigVariables_integersE[this]+i]=0
set s__TPTTSLinkedVariablesArray__aintegersF[s__TrigVariables_integersF[this]+i]=0
set s__TPTTSLinkedVariablesArray__arealsA[s__TrigVariables_realsA[this]+i]=0.
set s__TPTTSLinkedVariablesArray__arealsB[s__TrigVariables_realsB[this]+i]=0.
set s__TPTTSLinkedVariablesArray__arealsC[s__TrigVariables_realsC[this]+i]=0.
set s__TPTTSLinkedVariablesArray__arealsD[s__TrigVariables_realsD[this]+i]=0.
set s__TPTTSLinkedVariablesArray__arealsE[s__TrigVariables_realsE[this]+i]=0.
set s__TPTTSLinkedVariablesArray__arealsF[s__TrigVariables_realsF[this]+i]=0.
set s__TPTTSLinkedVariablesArray__aunitsA[s__TrigVariables_unitsA[this]+i]=null
set s__TPTTSLinkedVariablesArray__aunitsB[s__TrigVariables_unitsB[this]+i]=null
set s__TPTTSLinkedVariablesArray__aunitsC[s__TrigVariables_unitsC[this]+i]=null
set s__TPTTSLinkedVariablesArray__aunitsD[s__TrigVariables_unitsD[this]+i]=null
set s__TPTTSLinkedVariablesArray__aunitsE[s__TrigVariables_unitsE[this]+i]=null
set s__TPTTSLinkedVariablesArray__aunitsF[s__TrigVariables_unitsF[this]+i]=null
set s__TPTTSLinkedVariablesArray__aeffectsA[s__TrigVariables_effectsA[this]+i]=null
set s__TPTTSLinkedVariablesArray__aeffectsB[s__TrigVariables_effectsB[this]+i]=null
set s__TPTTSLinkedVariablesArray__aeffectsC[s__TrigVariables_effectsC[this]+i]=null
set s__TPTTSLinkedVariablesArray__aeffectsD[s__TrigVariables_effectsD[this]+i]=null
set s__TPTTSLinkedVariablesArray__aeffectsE[s__TrigVariables_effectsE[this]+i]=null
set s__TPTTSLinkedVariablesArray__aeffectsF[s__TrigVariables_effectsF[this]+i]=null
set s__TPTTSLinkedVariablesArray__alightningsA[s__TrigVariables_lightningsA[this]+i]=null
set s__TPTTSLinkedVariablesArray__alightningsB[s__TrigVariables_lightningsB[this]+i]=null
set s__TPTTSLinkedVariablesArray__alightningsC[s__TrigVariables_lightningsC[this]+i]=null
set s__TPTTSLinkedVariablesArray__alightningsD[s__TrigVariables_lightningsD[this]+i]=null
set s__TPTTSLinkedVariablesArray__alightningsE[s__TrigVariables_lightningsE[this]+i]=null
set s__TPTTSLinkedVariablesArray__alightningsF[s__TrigVariables_lightningsF[this]+i]=null
set s__TPTTSLinkedVariablesArray__aplayersA[s__TrigVariables_playersA[this]+i]=null
set s__TPTTSLinkedVariablesArray__aplayersB[s__TrigVariables_playersB[this]+i]=null
set s__TPTTSLinkedVariablesArray__aplayersC[s__TrigVariables_playersC[this]+i]=null
set s__TPTTSLinkedVariablesArray__aplayersD[s__TrigVariables_playersD[this]+i]=null
set s__TPTTSLinkedVariablesArray__aplayersE[s__TrigVariables_playersE[this]+i]=null
set s__TPTTSLinkedVariablesArray__aplayersF[s__TrigVariables_playersF[this]+i]=null
set s__TPTTSLinkedVariablesArray__aforcesA[s__TrigVariables_forcesA[this]+i]=null
set s__TPTTSLinkedVariablesArray__aforcesB[s__TrigVariables_forcesB[this]+i]=null
set s__TPTTSLinkedVariablesArray__aforcesC[s__TrigVariables_forcesC[this]+i]=null
set s__TPTTSLinkedVariablesArray__aforcesD[s__TrigVariables_forcesD[this]+i]=null
set s__TPTTSLinkedVariablesArray__aforcesE[s__TrigVariables_forcesE[this]+i]=null
set s__TPTTSLinkedVariablesArray__aforcesF[s__TrigVariables_forcesF[this]+i]=null
set s__TPTTSLinkedVariablesArray__agroupsA[s__TrigVariables_groupsA[this]+i]=null
set s__TPTTSLinkedVariablesArray__agroupsB[s__TrigVariables_groupsB[this]+i]=null
set s__TPTTSLinkedVariablesArray__agroupsC[s__TrigVariables_groupsC[this]+i]=null
set s__TPTTSLinkedVariablesArray__agroupsD[s__TrigVariables_groupsD[this]+i]=null
set s__TPTTSLinkedVariablesArray__agroupsE[s__TrigVariables_groupsE[this]+i]=null
set s__TPTTSLinkedVariablesArray__agroupsF[s__TrigVariables_groupsF[this]+i]=null
set s__TPTTSLinkedVariablesArray__aitemsA[s__TrigVariables_itemsA[this]+i]=null
set s__TPTTSLinkedVariablesArray__aitemsB[s__TrigVariables_itemsB[this]+i]=null
set s__TPTTSLinkedVariablesArray__aitemsC[s__TrigVariables_itemsC[this]+i]=null
set s__TPTTSLinkedVariablesArray__aitemsD[s__TrigVariables_itemsD[this]+i]=null
set s__TPTTSLinkedVariablesArray__aitemsE[s__TrigVariables_itemsE[this]+i]=null
set s__TPTTSLinkedVariablesArray__aitemsF[s__TrigVariables_itemsF[this]+i]=null
set s__TPTTSLinkedVariablesArray__atimersA[s__TrigVariables_timersA[this]+i]=null
set s__TPTTSLinkedVariablesArray__atimersB[s__TrigVariables_timersB[this]+i]=null
set s__TPTTSLinkedVariablesArray__atimersC[s__TrigVariables_timersC[this]+i]=null
set s__TPTTSLinkedVariablesArray__atimersD[s__TrigVariables_timersD[this]+i]=null
set s__TPTTSLinkedVariablesArray__atimersE[s__TrigVariables_timersE[this]+i]=null
set s__TPTTSLinkedVariablesArray__atimersF[s__TrigVariables_timersF[this]+i]=null
set i=i+1
exitwhen i>=TPTTSLinkedVariablesArray__ARRAY_MAX
endloop
call s__TPTTSLinkedVariablesArray__abooleansA_deallocate(s__TrigVariables_booleansA[this])
call s__TPTTSLinkedVariablesArray__abooleansB_deallocate(s__TrigVariables_booleansB[this])
call s__TPTTSLinkedVariablesArray__abooleansC_deallocate(s__TrigVariables_booleansC[this])
call s__TPTTSLinkedVariablesArray__abooleansD_deallocate(s__TrigVariables_booleansD[this])
call s__TPTTSLinkedVariablesArray__abooleansE_deallocate(s__TrigVariables_booleansE[this])
call s__TPTTSLinkedVariablesArray__abooleansF_deallocate(s__TrigVariables_booleansF[this])
call s__TPTTSLinkedVariablesArray__aintegersA_deallocate(s__TrigVariables_integersA[this])
call s__TPTTSLinkedVariablesArray__aintegersB_deallocate(s__TrigVariables_integersB[this])
call s__TPTTSLinkedVariablesArray__aintegersC_deallocate(s__TrigVariables_integersC[this])
call s__TPTTSLinkedVariablesArray__aintegersD_deallocate(s__TrigVariables_integersD[this])
call s__TPTTSLinkedVariablesArray__aintegersE_deallocate(s__TrigVariables_integersE[this])
call s__TPTTSLinkedVariablesArray__aintegersF_deallocate(s__TrigVariables_integersF[this])
call s__TPTTSLinkedVariablesArray__arealsA_deallocate(s__TrigVariables_realsA[this])
call s__TPTTSLinkedVariablesArray__arealsB_deallocate(s__TrigVariables_realsB[this])
call s__TPTTSLinkedVariablesArray__arealsC_deallocate(s__TrigVariables_realsC[this])
call s__TPTTSLinkedVariablesArray__arealsD_deallocate(s__TrigVariables_realsD[this])
call s__TPTTSLinkedVariablesArray__arealsE_deallocate(s__TrigVariables_realsE[this])
call s__TPTTSLinkedVariablesArray__arealsF_deallocate(s__TrigVariables_realsF[this])
call s__TPTTSLinkedVariablesArray__alocationsA_deallocate(s__TrigVariables_locationsA[this])
call s__TPTTSLinkedVariablesArray__alocationsB_deallocate(s__TrigVariables_locationsB[this])
call s__TPTTSLinkedVariablesArray__alocationsC_deallocate(s__TrigVariables_locationsC[this])
call s__TPTTSLinkedVariablesArray__alocationsD_deallocate(s__TrigVariables_locationsD[this])
call s__TPTTSLinkedVariablesArray__alocationsE_deallocate(s__TrigVariables_locationsE[this])
call s__TPTTSLinkedVariablesArray__alocationsF_deallocate(s__TrigVariables_locationsF[this])
call s__TPTTSLinkedVariablesArray__aunitsA_deallocate(s__TrigVariables_unitsA[this])
call s__TPTTSLinkedVariablesArray__aunitsB_deallocate(s__TrigVariables_unitsB[this])
call s__TPTTSLinkedVariablesArray__aunitsC_deallocate(s__TrigVariables_unitsC[this])
call s__TPTTSLinkedVariablesArray__aunitsD_deallocate(s__TrigVariables_unitsD[this])
call s__TPTTSLinkedVariablesArray__aunitsE_deallocate(s__TrigVariables_unitsE[this])
call s__TPTTSLinkedVariablesArray__aunitsF_deallocate(s__TrigVariables_unitsF[this])
call s__TPTTSLinkedVariablesArray__aeffectsA_deallocate(s__TrigVariables_effectsA[this])
call s__TPTTSLinkedVariablesArray__aeffectsB_deallocate(s__TrigVariables_effectsB[this])
call s__TPTTSLinkedVariablesArray__aeffectsC_deallocate(s__TrigVariables_effectsC[this])
call s__TPTTSLinkedVariablesArray__aeffectsD_deallocate(s__TrigVariables_effectsD[this])
call s__TPTTSLinkedVariablesArray__aeffectsE_deallocate(s__TrigVariables_effectsE[this])
call s__TPTTSLinkedVariablesArray__aeffectsF_deallocate(s__TrigVariables_effectsF[this])
call s__TPTTSLinkedVariablesArray__alightningsA_deallocate(s__TrigVariables_lightningsA[this])
call s__TPTTSLinkedVariablesArray__alightningsB_deallocate(s__TrigVariables_lightningsB[this])
call s__TPTTSLinkedVariablesArray__alightningsC_deallocate(s__TrigVariables_lightningsC[this])
call s__TPTTSLinkedVariablesArray__alightningsD_deallocate(s__TrigVariables_lightningsD[this])
call s__TPTTSLinkedVariablesArray__alightningsE_deallocate(s__TrigVariables_lightningsE[this])
call s__TPTTSLinkedVariablesArray__alightningsF_deallocate(s__TrigVariables_lightningsF[this])
call s__TPTTSLinkedVariablesArray__aplayersA_deallocate(s__TrigVariables_playersA[this])
call s__TPTTSLinkedVariablesArray__aplayersB_deallocate(s__TrigVariables_playersB[this])
call s__TPTTSLinkedVariablesArray__aplayersC_deallocate(s__TrigVariables_playersC[this])
call s__TPTTSLinkedVariablesArray__aplayersD_deallocate(s__TrigVariables_playersD[this])
call s__TPTTSLinkedVariablesArray__aplayersE_deallocate(s__TrigVariables_playersE[this])
call s__TPTTSLinkedVariablesArray__aplayersF_deallocate(s__TrigVariables_playersF[this])
call s__TPTTSLinkedVariablesArray__aforcesA_deallocate(s__TrigVariables_forcesA[this])
call s__TPTTSLinkedVariablesArray__aforcesB_deallocate(s__TrigVariables_forcesB[this])
call s__TPTTSLinkedVariablesArray__aforcesC_deallocate(s__TrigVariables_forcesC[this])
call s__TPTTSLinkedVariablesArray__aforcesD_deallocate(s__TrigVariables_forcesD[this])
call s__TPTTSLinkedVariablesArray__aforcesE_deallocate(s__TrigVariables_forcesE[this])
call s__TPTTSLinkedVariablesArray__aforcesF_deallocate(s__TrigVariables_forcesF[this])
call s__TPTTSLinkedVariablesArray__agroupsA_deallocate(s__TrigVariables_groupsA[this])
call s__TPTTSLinkedVariablesArray__agroupsB_deallocate(s__TrigVariables_groupsB[this])
call s__TPTTSLinkedVariablesArray__agroupsC_deallocate(s__TrigVariables_groupsC[this])
call s__TPTTSLinkedVariablesArray__agroupsD_deallocate(s__TrigVariables_groupsD[this])
call s__TPTTSLinkedVariablesArray__agroupsE_deallocate(s__TrigVariables_groupsE[this])
call s__TPTTSLinkedVariablesArray__agroupsF_deallocate(s__TrigVariables_groupsF[this])
call s__TPTTSLinkedVariablesArray__aitemsA_deallocate(s__TrigVariables_itemsA[this])
call s__TPTTSLinkedVariablesArray__aitemsB_deallocate(s__TrigVariables_itemsB[this])
call s__TPTTSLinkedVariablesArray__aitemsC_deallocate(s__TrigVariables_itemsC[this])
call s__TPTTSLinkedVariablesArray__aitemsD_deallocate(s__TrigVariables_itemsD[this])
call s__TPTTSLinkedVariablesArray__aitemsE_deallocate(s__TrigVariables_itemsE[this])
call s__TPTTSLinkedVariablesArray__aitemsF_deallocate(s__TrigVariables_itemsF[this])
call s__TPTTSLinkedVariablesArray__atimersA_deallocate(s__TrigVariables_timersA[this])
call s__TPTTSLinkedVariablesArray__atimersB_deallocate(s__TrigVariables_timersB[this])
call s__TPTTSLinkedVariablesArray__atimersC_deallocate(s__TrigVariables_timersC[this])
call s__TPTTSLinkedVariablesArray__atimersD_deallocate(s__TrigVariables_timersD[this])
call s__TPTTSLinkedVariablesArray__atimersE_deallocate(s__TrigVariables_timersE[this])
call s__TPTTSLinkedVariablesArray__atimersF_deallocate(s__TrigVariables_timersF[this])
return true
endfunction
function sa__TimerPutsTriggerToSleep__TrigInfo_onDestroy takes nothing returns boolean
local integer this=f__arg_this
call TriggerRemoveAction(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this],s__TimerPutsTriggerToSleep__TrigInfo_Action[this])
if s__TimerPutsTriggerToSleep__TrigInfo_Reg[this]!=null then
call RemoveRegion(s__TimerPutsTriggerToSleep__TrigInfo_Reg[this])
endif
call RemoveSavedInteger(s__TimerPutsTriggerToSleep__TrigInfo_HASH,0,GetHandleId(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this]))
call DestroyTrigger(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this])
call DestroyTrigger(s__TimerPutsTriggerToSleep__TrigInfo_TrigForCond[this])
set s__TimerPutsTriggerToSleep__TrigInfo_post[s__TimerPutsTriggerToSleep__TrigInfo_prev[this]]=s__TimerPutsTriggerToSleep__TrigInfo_post[this]
set s__TimerPutsTriggerToSleep__TrigInfo_prev[s__TimerPutsTriggerToSleep__TrigInfo_post[this]]=s__TimerPutsTriggerToSleep__TrigInfo_prev[this]
set s__TimerPutsTriggerToSleep__TrigInfo_prev[this]=0
set s__TimerPutsTriggerToSleep__TrigInfo_post[this]=0
return true
endfunction
function sa__TimerPutsTriggerToSleep__TrigInfo_create takes nothing returns boolean
local integer this=s__TimerPutsTriggerToSleep__TrigInfo__allocate()
call SaveInteger(s__TimerPutsTriggerToSleep__TrigInfo_HASH,0,GetHandleId(s__TimerPutsTriggerToSleep__TrigInfo_Trig[this]),this)
set f__result_integer=this
return true
endfunction
function sa___prototype2_TimerUtils__init takes nothing returns boolean
local integer i=0
local integer o=-1
local boolean oops=false
if(TimerUtils__didinit)then
return true
else
set TimerUtils__didinit=true
endif
set TimerUtils__ht=InitHashtable()
loop
exitwhen(i==TimerUtils__QUANTITY)
set s__TimerUtils__tT[i]=CreateTimer()
call SaveInteger(TimerUtils__ht,0,GetHandleId((s__TimerUtils__tT[i])),(TimerUtils__HELD))
set i=i+1
endloop
set TimerUtils__tN=TimerUtils__QUANTITY
return true
endfunction
function sa___prototype47_s__Angle_Random takes nothing returns boolean
set f__result_real=GetRandomReal(0.0,360.0)
return true
endfunction
function jasshelper__initstructs215750 takes nothing returns nothing
set st__FXCURVEDASH__get_Elapsed=CreateTrigger()
call TriggerAddCondition(st__FXCURVEDASH__get_Elapsed,Condition(function sa__FXCURVEDASH__get_Elapsed))
set st__FXCURVEDASH_Stop=CreateTrigger()
call TriggerAddCondition(st__FXCURVEDASH_Stop,Condition(function sa__FXCURVEDASH_Stop))
set st__TrigVariables_ExecuteTrigger=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_ExecuteTrigger,Condition(function sa__TrigVariables_ExecuteTrigger))
set st__TrigVariables_onDestroy=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_onDestroy,Condition(function sa__TrigVariables_onDestroy))
set st__TrigVariables_DeleteAllTriggers=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_DeleteAllTriggers,Condition(function sa__TrigVariables_DeleteAllTriggers))
set st__TrigVariables_setVoid=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_setVoid,Condition(function sa__TrigVariables_setVoid))
set st__TrigVariables_LVforCreate=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_LVforCreate,Condition(function sa__TrigVariables_LVforCreate))
set st__TrigVariables_Setplayer=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Setplayer,Condition(function sa__TrigVariables_Setplayer))
set st__TrigVariables_Getplayer=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Getplayer,Condition(function sa__TrigVariables_Getplayer))
set st__TrigVariables_Setforce=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Setforce,Condition(function sa__TrigVariables_Setforce))
set st__TrigVariables_Getforce=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Getforce,Condition(function sa__TrigVariables_Getforce))
set st__TrigVariables_Setgroup=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Setgroup,Condition(function sa__TrigVariables_Setgroup))
set st__TrigVariables_Getgroup=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Getgroup,Condition(function sa__TrigVariables_Getgroup))
set st__TrigVariables_Setitem=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Setitem,Condition(function sa__TrigVariables_Setitem))
set st__TrigVariables_Getitem=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Getitem,Condition(function sa__TrigVariables_Getitem))
set st__TrigVariables_Seteffect=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Seteffect,Condition(function sa__TrigVariables_Seteffect))
set st__TrigVariables_Geteffect=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Geteffect,Condition(function sa__TrigVariables_Geteffect))
set st__TrigVariables_Settimer=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Settimer,Condition(function sa__TrigVariables_Settimer))
set st__TrigVariables_Gettimer=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Gettimer,Condition(function sa__TrigVariables_Gettimer))
set st__TrigVariables_Setunit=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Setunit,Condition(function sa__TrigVariables_Setunit))
set st__TrigVariables_Getunit=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Getunit,Condition(function sa__TrigVariables_Getunit))
set st__TrigVariables_Setlocation=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Setlocation,Condition(function sa__TrigVariables_Setlocation))
set st__TrigVariables_Getlocation=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Getlocation,Condition(function sa__TrigVariables_Getlocation))
set st__TrigVariables_Setlightning=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Setlightning,Condition(function sa__TrigVariables_Setlightning))
set st__TrigVariables_Getlightning=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Getlightning,Condition(function sa__TrigVariables_Getlightning))
set st__TrigVariables_Setinteger=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Setinteger,Condition(function sa__TrigVariables_Setinteger))
set st__TrigVariables_Getinteger=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Getinteger,Condition(function sa__TrigVariables_Getinteger))
set st__TrigVariables_Setreal=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Setreal,Condition(function sa__TrigVariables_Setreal))
set st__TrigVariables_Getreal=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Getreal,Condition(function sa__TrigVariables_Getreal))
set st__TrigVariables_Setboolean=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Setboolean,Condition(function sa__TrigVariables_Setboolean))
set st__TrigVariables_Getboolean=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Getboolean,Condition(function sa__TrigVariables_Getboolean))
set st__TrigVariables_Settexttag=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Settexttag,Condition(function sa__TrigVariables_Settexttag))
set st__TrigVariables_Gettexttag=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Gettexttag,Condition(function sa__TrigVariables_Gettexttag))
set st__TrigVariables_Setstring=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Setstring,Condition(function sa__TrigVariables_Setstring))
set st__TrigVariables_Getstring=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_Getstring,Condition(function sa__TrigVariables_Getstring))
set st__TrigVariables_FlushAvars=CreateTrigger()
call TriggerAddCondition(st__TrigVariables_FlushAvars,Condition(function sa__TrigVariables_FlushAvars))
set st__TimerPutsTriggerToSleep__TrigInfo_onDestroy=CreateTrigger()
call TriggerAddCondition(st__TimerPutsTriggerToSleep__TrigInfo_onDestroy,Condition(function sa__TimerPutsTriggerToSleep__TrigInfo_onDestroy))
set st__TimerPutsTriggerToSleep__TrigInfo_create=CreateTrigger()
call TriggerAddCondition(st__TimerPutsTriggerToSleep__TrigInfo_create,Condition(function sa__TimerPutsTriggerToSleep__TrigInfo_create))
set st__Ptr_onDestroy[95]=null
set st__Ptr_onDestroy[89]=null
set st__Ptr_onDestroy[90]=null
set st__Ptr_onDestroy[91]=null
set st__Ptr_onDestroy[92]=null
set st__Ptr_onDestroy[93]=null
set st__Ptr_onDestroy[94]=null
set st___prototype2[1]=CreateTrigger()
call TriggerAddAction(st___prototype2[1],function sa___prototype2_TimerUtils__init)
call TriggerAddCondition(st___prototype2[1],Condition(function sa___prototype2_TimerUtils__init))
set st___prototype47[1]=CreateTrigger()
call TriggerAddAction(st___prototype47[1],function sa___prototype47_s__Angle_Random)
call TriggerAddCondition(st___prototype47[1],Condition(function sa___prototype47_s__Angle_Random))
call ExecuteFunc("s__TrigVariables_TPTTS_WhenEventId__onInit")
call ExecuteFunc("s__TrigVariables_LinkedVariables_player__onInit")
call ExecuteFunc("s__TrigVariables_LinkedVariables_force__onInit")
call ExecuteFunc("s__TrigVariables_LinkedVariables_group__onInit")
call ExecuteFunc("s__TrigVariables_LinkedVariables_item__onInit")
call ExecuteFunc("s__TrigVariables_LinkedVariables_effect__onInit")
call ExecuteFunc("s__TrigVariables_LinkedVariables_timer__onInit")
call ExecuteFunc("s__TrigVariables_LinkedVariables_unit__onInit")
call ExecuteFunc("s__TrigVariables_LinkedVariables_location__onInit")
call ExecuteFunc("s__TrigVariables_LinkedVariables_lightning__onInit")
call ExecuteFunc("s__TrigVariables_LinkedVariables_integer__onInit")
call ExecuteFunc("s__TrigVariables_LinkedVariables_real__onInit")
call ExecuteFunc("s__TrigVariables_LinkedVariables_boolean__onInit")
call ExecuteFunc("s__TrigVariables_LinkedVariables_texttag__onInit")
call ExecuteFunc("s__TrigVariables_LinkedVariables_string__onInit")
call ExecuteFunc("s__TrigVariables_TPTTS_CopyByEventId__onInit")
call ExecuteFunc("s__TrigVariables_TPTTS_EmptyTrigVars__onInit")
call ExecuteFunc("s__CustomStun__PROC_onInit")
call ExecuteFunc("s__TrigVariables_onInit")
call ExecuteFunc("s__EndGameHook___MemoryBlock_onInit")
call ExecuteFunc("s__SpecialEffectColor___MemoryBlock_onInit")
endfunction
